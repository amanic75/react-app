var aw=Object.defineProperty;var ow=(t,e,s)=>e in t?aw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var se=(t,e,s)=>(ow(t,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var ls=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function lw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function cw(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),s}var Zg={exports:{}},Ql={},ex={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var qa=Symbol.for("react.element"),dw=Symbol.for("react.portal"),uw=Symbol.for("react.fragment"),hw=Symbol.for("react.strict_mode"),fw=Symbol.for("react.profiler"),mw=Symbol.for("react.provider"),pw=Symbol.for("react.context"),gw=Symbol.for("react.forward_ref"),xw=Symbol.for("react.suspense"),yw=Symbol.for("react.memo"),vw=Symbol.for("react.lazy"),zm=Symbol.iterator;function bw(t){return t===null||typeof t!="object"?null:(t=zm&&t[zm]||t["@@iterator"],typeof t=="function"?t:null)}var tx={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},sx=Object.assign,nx={};function yi(t,e,s){this.props=t,this.context=e,this.refs=nx,this.updater=s||tx}yi.prototype.isReactComponent={};yi.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};yi.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function rx(){}rx.prototype=yi.prototype;function Ku(t,e,s){this.props=t,this.context=e,this.refs=nx,this.updater=s||tx}var Yu=Ku.prototype=new rx;Yu.constructor=Ku;sx(Yu,yi.prototype);Yu.isPureReactComponent=!0;var Um=Array.isArray,ix=Object.prototype.hasOwnProperty,Ju={current:null},ax={key:!0,ref:!0,__self:!0,__source:!0};function ox(t,e,s){var n,r={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)ix.call(e,n)&&!ax.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(l===1)r.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:qa,type:t,key:i,ref:o,props:r,_owner:Ju.current}}function ww(t,e){return{$$typeof:qa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Qu(t){return typeof t=="object"&&t!==null&&t.$$typeof===qa}function jw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var Bm=/\/+/g;function Dc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?jw(""+t.key):e.toString(36)}function Go(t,e,s,n,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case qa:case dw:o=!0}}if(o)return o=t,r=r(o),t=n===""?"."+Dc(o,0):n,Um(r)?(s="",t!=null&&(s=t.replace(Bm,"$&/")+"/"),Go(r,e,s,"",function(d){return d})):r!=null&&(Qu(r)&&(r=ww(r,s+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(Bm,"$&/")+"/")+t)),e.push(r)),1;if(o=0,n=n===""?".":n+":",Um(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+Dc(i,l);o+=Go(i,e,s,c,r)}else if(c=bw(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+Dc(i,l++),o+=Go(i,e,s,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function ro(t,e,s){if(t==null)return t;var n=[],r=0;return Go(t,n,"","",function(i){return e.call(s,i,r++)}),n}function Nw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var St={current:null},Ko={transition:null},_w={ReactCurrentDispatcher:St,ReactCurrentBatchConfig:Ko,ReactCurrentOwner:Ju};function lx(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:ro,forEach:function(t,e,s){ro(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return ro(t,function(){e++}),e},toArray:function(t){return ro(t,function(e){return e})||[]},only:function(t){if(!Qu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=yi;fe.Fragment=uw;fe.Profiler=fw;fe.PureComponent=Ku;fe.StrictMode=hw;fe.Suspense=xw;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=_w;fe.act=lx;fe.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=sx({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Ju.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)ix.call(e,c)&&!ax.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:qa,type:t.type,key:r,ref:i,props:n,_owner:o}};fe.createContext=function(t){return t={$$typeof:pw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:mw,_context:t},t.Consumer=t};fe.createElement=ox;fe.createFactory=function(t){var e=ox.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:gw,render:t}};fe.isValidElement=Qu;fe.lazy=function(t){return{$$typeof:vw,_payload:{_status:-1,_result:t},_init:Nw}};fe.memo=function(t,e){return{$$typeof:yw,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=Ko.transition;Ko.transition={};try{t()}finally{Ko.transition=e}};fe.unstable_act=lx;fe.useCallback=function(t,e){return St.current.useCallback(t,e)};fe.useContext=function(t){return St.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return St.current.useDeferredValue(t)};fe.useEffect=function(t,e){return St.current.useEffect(t,e)};fe.useId=function(){return St.current.useId()};fe.useImperativeHandle=function(t,e,s){return St.current.useImperativeHandle(t,e,s)};fe.useInsertionEffect=function(t,e){return St.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return St.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return St.current.useMemo(t,e)};fe.useReducer=function(t,e,s){return St.current.useReducer(t,e,s)};fe.useRef=function(t){return St.current.useRef(t)};fe.useState=function(t){return St.current.useState(t)};fe.useSyncExternalStore=function(t,e,s){return St.current.useSyncExternalStore(t,e,s)};fe.useTransition=function(){return St.current.useTransition()};fe.version="18.3.1";ex.exports=fe;var w=ex.exports;const Xl=lw(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var kw=w,Sw=Symbol.for("react.element"),Cw=Symbol.for("react.fragment"),Ew=Object.prototype.hasOwnProperty,Pw=kw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Aw={key:!0,ref:!0,__self:!0,__source:!0};function cx(t,e,s){var n,r={},i=null,o=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Ew.call(e,n)&&!Aw.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Sw,type:t,key:i,ref:o,props:r,_owner:Pw.current}}Ql.Fragment=Cw;Ql.jsx=cx;Ql.jsxs=cx;Zg.exports=Ql;var a=Zg.exports,Ad={},dx={exports:{}},Xt={},ux={exports:{}},hx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,W){var K=O.length;O.push(W);e:for(;0<K;){var H=K-1>>>1,T=O[H];if(0<r(T,W))O[H]=W,O[K]=T,K=H;else break e}}function s(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var W=O[0],K=O.pop();if(K!==W){O[0]=K;e:for(var H=0,T=O.length,R=T>>>1;H<R;){var Q=2*(H+1)-1,ue=O[Q],me=Q+1,Ae=O[me];if(0>r(ue,K))me<T&&0>r(Ae,ue)?(O[H]=Ae,O[me]=K,H=me):(O[H]=ue,O[Q]=K,H=Q);else if(me<T&&0>r(Ae,K))O[H]=Ae,O[me]=K,H=me;else break e}}return W}function r(O,W){var K=O.sortIndex-W.sortIndex;return K!==0?K:O.id-W.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,m=!1,p=!1,v=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var W=s(d);W!==null;){if(W.callback===null)n(d);else if(W.startTime<=O)n(d),W.sortIndex=W.expirationTime,e(c,W);else break;W=s(d)}}function k(O){if(v=!1,b(O),!p)if(s(c)!==null)p=!0,U(j);else{var W=s(d);W!==null&&ee(k,W.startTime-O)}}function j(O,W){p=!1,v&&(v=!1,g(_),_=-1),m=!0;var K=f;try{for(b(W),h=s(c);h!==null&&(!(h.expirationTime>W)||O&&!L());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var T=H(h.expirationTime<=W);W=t.unstable_now(),typeof T=="function"?h.callback=T:h===s(c)&&n(c),b(W)}else n(c);h=s(c)}if(h!==null)var R=!0;else{var Q=s(d);Q!==null&&ee(k,Q.startTime-W),R=!1}return R}finally{h=null,f=K,m=!1}}var S=!1,E=null,_=-1,C=5,N=-1;function L(){return!(t.unstable_now()-N<C)}function P(){if(E!==null){var O=t.unstable_now();N=O;var W=!0;try{W=E(!0,O)}finally{W?M():(S=!1,E=null)}}else S=!1}var M;if(typeof y=="function")M=function(){y(P)};else if(typeof MessageChannel<"u"){var B=new MessageChannel,$=B.port2;B.port1.onmessage=P,M=function(){$.postMessage(null)}}else M=function(){x(P,0)};function U(O){E=O,S||(S=!0,M())}function ee(O,W){_=x(function(){O(t.unstable_now())},W)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,U(j))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var W=3;break;default:W=f}var K=f;f=W;try{return O()}finally{f=K}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,W){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var K=f;f=O;try{return W()}finally{f=K}},t.unstable_scheduleCallback=function(O,W,K){var H=t.unstable_now();switch(typeof K=="object"&&K!==null?(K=K.delay,K=typeof K=="number"&&0<K?H+K:H):K=H,O){case 1:var T=-1;break;case 2:T=250;break;case 5:T=1073741823;break;case 4:T=1e4;break;default:T=5e3}return T=K+T,O={id:u++,callback:W,priorityLevel:O,startTime:K,expirationTime:T,sortIndex:-1},K>H?(O.sortIndex=K,e(d,O),s(c)===null&&O===s(d)&&(v?(g(_),_=-1):v=!0,ee(k,K-H))):(O.sortIndex=T,e(c,O),p||m||(p=!0,U(j))),O},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(O){var W=f;return function(){var K=f;f=W;try{return O.apply(this,arguments)}finally{f=K}}}})(hx);ux.exports=hx;var Lw=ux.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Tw=w,Qt=Lw;function F(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var fx=new Set,xa={};function wr(t,e){oi(t,e),oi(t+"Capture",e)}function oi(t,e){for(xa[t]=e,t=0;t<e.length;t++)fx.add(e[t])}var sn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Ld=Object.prototype.hasOwnProperty,Mw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Hm={},Wm={};function Dw(t){return Ld.call(Wm,t)?!0:Ld.call(Hm,t)?!1:Mw.test(t)?Wm[t]=!0:(Hm[t]=!0,!1)}function Ow(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Rw(t,e,s,n){if(e===null||typeof e>"u"||Ow(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Ct(t,e,s,n,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var ht={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){ht[t]=new Ct(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];ht[e]=new Ct(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){ht[t]=new Ct(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){ht[t]=new Ct(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){ht[t]=new Ct(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){ht[t]=new Ct(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){ht[t]=new Ct(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){ht[t]=new Ct(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){ht[t]=new Ct(t,5,!1,t.toLowerCase(),null,!1,!1)});var Xu=/[\-:]([a-z])/g;function Zu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Xu,Zu);ht[e]=new Ct(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Xu,Zu);ht[e]=new Ct(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Xu,Zu);ht[e]=new Ct(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){ht[t]=new Ct(t,1,!1,t.toLowerCase(),null,!1,!1)});ht.xlinkHref=new Ct("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){ht[t]=new Ct(t,1,!1,t.toLowerCase(),null,!0,!0)});function eh(t,e,s,n){var r=ht.hasOwnProperty(e)?ht[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Rw(e,s,r,n)&&(s=null),n||r===null?Dw(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):r.mustUseProperty?t[r.propertyName]=s===null?r.type===3?!1:"":s:(e=r.attributeName,n=r.attributeNamespace,s===null?t.removeAttribute(e):(r=r.type,s=r===3||r===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var ln=Tw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,io=Symbol.for("react.element"),Ur=Symbol.for("react.portal"),Br=Symbol.for("react.fragment"),th=Symbol.for("react.strict_mode"),Td=Symbol.for("react.profiler"),mx=Symbol.for("react.provider"),px=Symbol.for("react.context"),sh=Symbol.for("react.forward_ref"),Md=Symbol.for("react.suspense"),Dd=Symbol.for("react.suspense_list"),nh=Symbol.for("react.memo"),mn=Symbol.for("react.lazy"),gx=Symbol.for("react.offscreen"),Vm=Symbol.iterator;function Ei(t){return t===null||typeof t!="object"?null:(t=Vm&&t[Vm]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,Oc;function Vi(t){if(Oc===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);Oc=e&&e[1]||""}return`
`+Oc+t}var Rc=!1;function Ic(t,e){if(!t||Rc)return"";Rc=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=n.stack.split(`
`),o=r.length-1,l=i.length-1;1<=o&&0<=l&&r[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==i[l]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{Rc=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Vi(t):""}function Iw(t){switch(t.tag){case 5:return Vi(t.type);case 16:return Vi("Lazy");case 13:return Vi("Suspense");case 19:return Vi("SuspenseList");case 0:case 2:case 15:return t=Ic(t.type,!1),t;case 11:return t=Ic(t.type.render,!1),t;case 1:return t=Ic(t.type,!0),t;default:return""}}function Od(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Br:return"Fragment";case Ur:return"Portal";case Td:return"Profiler";case th:return"StrictMode";case Md:return"Suspense";case Dd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case px:return(t.displayName||"Context")+".Consumer";case mx:return(t._context.displayName||"Context")+".Provider";case sh:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case nh:return e=t.displayName||null,e!==null?e:Od(t.type)||"Memo";case mn:e=t._payload,t=t._init;try{return Od(t(e))}catch{}}return null}function Fw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return Od(e);case 8:return e===th?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function In(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function xx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function $w(t){var e=xx(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function ao(t){t._valueTracker||(t._valueTracker=$w(t))}function yx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=xx(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function pl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function Rd(t,e){var s=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function qm(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=In(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function vx(t,e){e=e.checked,e!=null&&eh(t,"checked",e,!1)}function Id(t,e){vx(t,e);var s=In(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Fd(t,e.type,s):e.hasOwnProperty("defaultValue")&&Fd(t,e.type,In(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Gm(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Fd(t,e,s){(e!=="number"||pl(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var qi=Array.isArray;function Zr(t,e,s,n){if(t=t.options,e){e={};for(var r=0;r<s.length;r++)e["$"+s[r]]=!0;for(s=0;s<t.length;s++)r=e.hasOwnProperty("$"+t[s].value),t[s].selected!==r&&(t[s].selected=r),r&&n&&(t[s].defaultSelected=!0)}else{for(s=""+In(s),e=null,r=0;r<t.length;r++){if(t[r].value===s){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function $d(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(F(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Km(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(F(92));if(qi(s)){if(1<s.length)throw Error(F(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:In(s)}}function bx(t,e){var s=In(e.value),n=In(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function Ym(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function wx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function zd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?wx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var oo,jx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(oo=oo||document.createElement("div"),oo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=oo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function ya(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var Zi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},zw=["Webkit","ms","Moz","O"];Object.keys(Zi).forEach(function(t){zw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Zi[e]=Zi[t]})});function Nx(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||Zi.hasOwnProperty(t)&&Zi[t]?(""+e).trim():e+"px"}function _x(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,r=Nx(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,r):t[s]=r}}var Uw=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Ud(t,e){if(e){if(Uw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(F(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(F(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(F(61))}if(e.style!=null&&typeof e.style!="object")throw Error(F(62))}}function Bd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Hd=null;function rh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Wd=null,ei=null,ti=null;function Jm(t){if(t=Ya(t)){if(typeof Wd!="function")throw Error(F(280));var e=t.stateNode;e&&(e=nc(e),Wd(t.stateNode,t.type,e))}}function kx(t){ei?ti?ti.push(t):ti=[t]:ei=t}function Sx(){if(ei){var t=ei,e=ti;if(ti=ei=null,Jm(t),e)for(t=0;t<e.length;t++)Jm(e[t])}}function Cx(t,e){return t(e)}function Ex(){}var Fc=!1;function Px(t,e,s){if(Fc)return t(e,s);Fc=!0;try{return Cx(t,e,s)}finally{Fc=!1,(ei!==null||ti!==null)&&(Ex(),Sx())}}function va(t,e){var s=t.stateNode;if(s===null)return null;var n=nc(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(F(231,e,typeof s));return s}var Vd=!1;if(sn)try{var Pi={};Object.defineProperty(Pi,"passive",{get:function(){Vd=!0}}),window.addEventListener("test",Pi,Pi),window.removeEventListener("test",Pi,Pi)}catch{Vd=!1}function Bw(t,e,s,n,r,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var ea=!1,gl=null,xl=!1,qd=null,Hw={onError:function(t){ea=!0,gl=t}};function Ww(t,e,s,n,r,i,o,l,c){ea=!1,gl=null,Bw.apply(Hw,arguments)}function Vw(t,e,s,n,r,i,o,l,c){if(Ww.apply(this,arguments),ea){if(ea){var d=gl;ea=!1,gl=null}else throw Error(F(198));xl||(xl=!0,qd=d)}}function jr(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function Ax(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function Qm(t){if(jr(t)!==t)throw Error(F(188))}function qw(t){var e=t.alternate;if(!e){if(e=jr(t),e===null)throw Error(F(188));return e!==t?null:t}for(var s=t,n=e;;){var r=s.return;if(r===null)break;var i=r.alternate;if(i===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===s)return Qm(r),t;if(i===n)return Qm(r),e;i=i.sibling}throw Error(F(188))}if(s.return!==n.return)s=r,n=i;else{for(var o=!1,l=r.child;l;){if(l===s){o=!0,s=r,n=i;break}if(l===n){o=!0,n=r,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,n=r;break}if(l===n){o=!0,n=i,s=r;break}l=l.sibling}if(!o)throw Error(F(189))}}if(s.alternate!==n)throw Error(F(190))}if(s.tag!==3)throw Error(F(188));return s.stateNode.current===s?t:e}function Lx(t){return t=qw(t),t!==null?Tx(t):null}function Tx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Tx(t);if(e!==null)return e;t=t.sibling}return null}var Mx=Qt.unstable_scheduleCallback,Xm=Qt.unstable_cancelCallback,Gw=Qt.unstable_shouldYield,Kw=Qt.unstable_requestPaint,Ke=Qt.unstable_now,Yw=Qt.unstable_getCurrentPriorityLevel,ih=Qt.unstable_ImmediatePriority,Dx=Qt.unstable_UserBlockingPriority,yl=Qt.unstable_NormalPriority,Jw=Qt.unstable_LowPriority,Ox=Qt.unstable_IdlePriority,Zl=null,Ts=null;function Qw(t){if(Ts&&typeof Ts.onCommitFiberRoot=="function")try{Ts.onCommitFiberRoot(Zl,t,void 0,(t.current.flags&128)===128)}catch{}}var ys=Math.clz32?Math.clz32:e1,Xw=Math.log,Zw=Math.LN2;function e1(t){return t>>>=0,t===0?32:31-(Xw(t)/Zw|0)|0}var lo=64,co=4194304;function Gi(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function vl(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,r=t.suspendedLanes,i=t.pingedLanes,o=s&268435455;if(o!==0){var l=o&~r;l!==0?n=Gi(l):(i&=o,i!==0&&(n=Gi(i)))}else o=s&~r,o!==0?n=Gi(o):i!==0&&(n=Gi(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-ys(e),r=1<<s,n|=t[s],e&=~r;return n}function t1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function s1(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ys(i),l=1<<o,c=r[o];c===-1?(!(l&s)||l&n)&&(r[o]=t1(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function Gd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Rx(){var t=lo;return lo<<=1,!(lo&4194240)&&(lo=64),t}function $c(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Ga(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ys(e),t[e]=s}function n1(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var r=31-ys(s),i=1<<r;e[r]=0,n[r]=-1,t[r]=-1,s&=~i}}function ah(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-ys(s),r=1<<n;r&e|t[n]&e&&(t[n]|=e),s&=~r}}var _e=0;function Ix(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Fx,oh,$x,zx,Ux,Kd=!1,uo=[],En=null,Pn=null,An=null,ba=new Map,wa=new Map,xn=[],r1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function Zm(t,e){switch(t){case"focusin":case"focusout":En=null;break;case"dragenter":case"dragleave":Pn=null;break;case"mouseover":case"mouseout":An=null;break;case"pointerover":case"pointerout":ba.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":wa.delete(e.pointerId)}}function Ai(t,e,s,n,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Ya(e),e!==null&&oh(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function i1(t,e,s,n,r){switch(e){case"focusin":return En=Ai(En,t,e,s,n,r),!0;case"dragenter":return Pn=Ai(Pn,t,e,s,n,r),!0;case"mouseover":return An=Ai(An,t,e,s,n,r),!0;case"pointerover":var i=r.pointerId;return ba.set(i,Ai(ba.get(i)||null,t,e,s,n,r)),!0;case"gotpointercapture":return i=r.pointerId,wa.set(i,Ai(wa.get(i)||null,t,e,s,n,r)),!0}return!1}function Bx(t){var e=ir(t.target);if(e!==null){var s=jr(e);if(s!==null){if(e=s.tag,e===13){if(e=Ax(s),e!==null){t.blockedOn=e,Ux(t.priority,function(){$x(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Yo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Yd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);Hd=n,s.target.dispatchEvent(n),Hd=null}else return e=Ya(s),e!==null&&oh(e),t.blockedOn=s,!1;e.shift()}return!0}function ep(t,e,s){Yo(t)&&s.delete(e)}function a1(){Kd=!1,En!==null&&Yo(En)&&(En=null),Pn!==null&&Yo(Pn)&&(Pn=null),An!==null&&Yo(An)&&(An=null),ba.forEach(ep),wa.forEach(ep)}function Li(t,e){t.blockedOn===e&&(t.blockedOn=null,Kd||(Kd=!0,Qt.unstable_scheduleCallback(Qt.unstable_NormalPriority,a1)))}function ja(t){function e(r){return Li(r,t)}if(0<uo.length){Li(uo[0],t);for(var s=1;s<uo.length;s++){var n=uo[s];n.blockedOn===t&&(n.blockedOn=null)}}for(En!==null&&Li(En,t),Pn!==null&&Li(Pn,t),An!==null&&Li(An,t),ba.forEach(e),wa.forEach(e),s=0;s<xn.length;s++)n=xn[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<xn.length&&(s=xn[0],s.blockedOn===null);)Bx(s),s.blockedOn===null&&xn.shift()}var si=ln.ReactCurrentBatchConfig,bl=!0;function o1(t,e,s,n){var r=_e,i=si.transition;si.transition=null;try{_e=1,lh(t,e,s,n)}finally{_e=r,si.transition=i}}function l1(t,e,s,n){var r=_e,i=si.transition;si.transition=null;try{_e=4,lh(t,e,s,n)}finally{_e=r,si.transition=i}}function lh(t,e,s,n){if(bl){var r=Yd(t,e,s,n);if(r===null)Yc(t,e,n,wl,s),Zm(t,n);else if(i1(r,t,e,s,n))n.stopPropagation();else if(Zm(t,n),e&4&&-1<r1.indexOf(t)){for(;r!==null;){var i=Ya(r);if(i!==null&&Fx(i),i=Yd(t,e,s,n),i===null&&Yc(t,e,n,wl,s),i===r)break;r=i}r!==null&&n.stopPropagation()}else Yc(t,e,n,null,s)}}var wl=null;function Yd(t,e,s,n){if(wl=null,t=rh(n),t=ir(t),t!==null)if(e=jr(t),e===null)t=null;else if(s=e.tag,s===13){if(t=Ax(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return wl=t,null}function Hx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(Yw()){case ih:return 1;case Dx:return 4;case yl:case Jw:return 16;case Ox:return 536870912;default:return 16}default:return 16}}var bn=null,ch=null,Jo=null;function Wx(){if(Jo)return Jo;var t,e=ch,s=e.length,n,r="value"in bn?bn.value:bn.textContent,i=r.length;for(t=0;t<s&&e[t]===r[t];t++);var o=s-t;for(n=1;n<=o&&e[s-n]===r[i-n];n++);return Jo=r.slice(t,1<n?1-n:void 0)}function Qo(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function ho(){return!0}function tp(){return!1}function Zt(t){function e(s,n,r,i,o){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?ho:tp,this.isPropagationStopped=tp,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=ho)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=ho)},persist:function(){},isPersistent:ho}),e}var vi={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},dh=Zt(vi),Ka=He({},vi,{view:0,detail:0}),c1=Zt(Ka),zc,Uc,Ti,ec=He({},Ka,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:uh,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==Ti&&(Ti&&t.type==="mousemove"?(zc=t.screenX-Ti.screenX,Uc=t.screenY-Ti.screenY):Uc=zc=0,Ti=t),zc)},movementY:function(t){return"movementY"in t?t.movementY:Uc}}),sp=Zt(ec),d1=He({},ec,{dataTransfer:0}),u1=Zt(d1),h1=He({},Ka,{relatedTarget:0}),Bc=Zt(h1),f1=He({},vi,{animationName:0,elapsedTime:0,pseudoElement:0}),m1=Zt(f1),p1=He({},vi,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),g1=Zt(p1),x1=He({},vi,{data:0}),np=Zt(x1),y1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},v1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},b1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function w1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=b1[t])?!!e[t]:!1}function uh(){return w1}var j1=He({},Ka,{key:function(t){if(t.key){var e=y1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=Qo(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?v1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:uh,charCode:function(t){return t.type==="keypress"?Qo(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?Qo(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),N1=Zt(j1),_1=He({},ec,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),rp=Zt(_1),k1=He({},Ka,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:uh}),S1=Zt(k1),C1=He({},vi,{propertyName:0,elapsedTime:0,pseudoElement:0}),E1=Zt(C1),P1=He({},ec,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),A1=Zt(P1),L1=[9,13,27,32],hh=sn&&"CompositionEvent"in window,ta=null;sn&&"documentMode"in document&&(ta=document.documentMode);var T1=sn&&"TextEvent"in window&&!ta,Vx=sn&&(!hh||ta&&8<ta&&11>=ta),ip=String.fromCharCode(32),ap=!1;function qx(t,e){switch(t){case"keyup":return L1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Gx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Hr=!1;function M1(t,e){switch(t){case"compositionend":return Gx(e);case"keypress":return e.which!==32?null:(ap=!0,ip);case"textInput":return t=e.data,t===ip&&ap?null:t;default:return null}}function D1(t,e){if(Hr)return t==="compositionend"||!hh&&qx(t,e)?(t=Wx(),Jo=ch=bn=null,Hr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Vx&&e.locale!=="ko"?null:e.data;default:return null}}var O1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function op(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!O1[t.type]:e==="textarea"}function Kx(t,e,s,n){kx(n),e=jl(e,"onChange"),0<e.length&&(s=new dh("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var sa=null,Na=null;function R1(t){iy(t,0)}function tc(t){var e=qr(t);if(yx(e))return t}function I1(t,e){if(t==="change")return e}var Yx=!1;if(sn){var Hc;if(sn){var Wc="oninput"in document;if(!Wc){var lp=document.createElement("div");lp.setAttribute("oninput","return;"),Wc=typeof lp.oninput=="function"}Hc=Wc}else Hc=!1;Yx=Hc&&(!document.documentMode||9<document.documentMode)}function cp(){sa&&(sa.detachEvent("onpropertychange",Jx),Na=sa=null)}function Jx(t){if(t.propertyName==="value"&&tc(Na)){var e=[];Kx(e,Na,t,rh(t)),Px(R1,e)}}function F1(t,e,s){t==="focusin"?(cp(),sa=e,Na=s,sa.attachEvent("onpropertychange",Jx)):t==="focusout"&&cp()}function $1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return tc(Na)}function z1(t,e){if(t==="click")return tc(e)}function U1(t,e){if(t==="input"||t==="change")return tc(e)}function B1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var bs=typeof Object.is=="function"?Object.is:B1;function _a(t,e){if(bs(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!Ld.call(e,r)||!bs(t[r],e[r]))return!1}return!0}function dp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function up(t,e){var s=dp(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=dp(s)}}function Qx(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?Qx(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function Xx(){for(var t=window,e=pl();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=pl(t.document)}return e}function fh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function H1(t){var e=Xx(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&Qx(s.ownerDocument.documentElement,s)){if(n!==null&&fh(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=s.textContent.length,i=Math.min(n.start,r);n=n.end===void 0?i:Math.min(n.end,r),!t.extend&&i>n&&(r=n,n=i,i=r),r=up(s,i);var o=up(s,n);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var W1=sn&&"documentMode"in document&&11>=document.documentMode,Wr=null,Jd=null,na=null,Qd=!1;function hp(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Qd||Wr==null||Wr!==pl(n)||(n=Wr,"selectionStart"in n&&fh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),na&&_a(na,n)||(na=n,n=jl(Jd,"onSelect"),0<n.length&&(e=new dh("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=Wr)))}function fo(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Vr={animationend:fo("Animation","AnimationEnd"),animationiteration:fo("Animation","AnimationIteration"),animationstart:fo("Animation","AnimationStart"),transitionend:fo("Transition","TransitionEnd")},Vc={},Zx={};sn&&(Zx=document.createElement("div").style,"AnimationEvent"in window||(delete Vr.animationend.animation,delete Vr.animationiteration.animation,delete Vr.animationstart.animation),"TransitionEvent"in window||delete Vr.transitionend.transition);function sc(t){if(Vc[t])return Vc[t];if(!Vr[t])return t;var e=Vr[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in Zx)return Vc[t]=e[s];return t}var ey=sc("animationend"),ty=sc("animationiteration"),sy=sc("animationstart"),ny=sc("transitionend"),ry=new Map,fp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Un(t,e){ry.set(t,e),wr(e,[t])}for(var qc=0;qc<fp.length;qc++){var Gc=fp[qc],V1=Gc.toLowerCase(),q1=Gc[0].toUpperCase()+Gc.slice(1);Un(V1,"on"+q1)}Un(ey,"onAnimationEnd");Un(ty,"onAnimationIteration");Un(sy,"onAnimationStart");Un("dblclick","onDoubleClick");Un("focusin","onFocus");Un("focusout","onBlur");Un(ny,"onTransitionEnd");oi("onMouseEnter",["mouseout","mouseover"]);oi("onMouseLeave",["mouseout","mouseover"]);oi("onPointerEnter",["pointerout","pointerover"]);oi("onPointerLeave",["pointerout","pointerover"]);wr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));wr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));wr("onBeforeInput",["compositionend","keypress","textInput","paste"]);wr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));wr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ki="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),G1=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ki));function mp(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,Vw(n,e,void 0,t),t.currentTarget=null}function iy(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],r=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;mp(r,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;mp(r,l,d),i=c}}}if(xl)throw t=qd,xl=!1,qd=null,t}function Te(t,e){var s=e[su];s===void 0&&(s=e[su]=new Set);var n=t+"__bubble";s.has(n)||(ay(e,t,2,!1),s.add(n))}function Kc(t,e,s){var n=0;e&&(n|=4),ay(s,t,n,e)}var mo="_reactListening"+Math.random().toString(36).slice(2);function ka(t){if(!t[mo]){t[mo]=!0,fx.forEach(function(s){s!=="selectionchange"&&(G1.has(s)||Kc(s,!1,t),Kc(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[mo]||(e[mo]=!0,Kc("selectionchange",!1,e))}}function ay(t,e,s,n){switch(Hx(e)){case 1:var r=o1;break;case 4:r=l1;break;default:r=lh}s=r.bind(null,e,s,t),r=void 0,!Vd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,s,{capture:!0,passive:r}):t.addEventListener(e,s,!0):r!==void 0?t.addEventListener(e,s,{passive:r}):t.addEventListener(e,s,!1)}function Yc(t,e,s,n,r){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=ir(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Px(function(){var d=i,u=rh(s),h=[];e:{var f=ry.get(t);if(f!==void 0){var m=dh,p=t;switch(t){case"keypress":if(Qo(s)===0)break e;case"keydown":case"keyup":m=N1;break;case"focusin":p="focus",m=Bc;break;case"focusout":p="blur",m=Bc;break;case"beforeblur":case"afterblur":m=Bc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=sp;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=u1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=S1;break;case ey:case ty:case sy:m=m1;break;case ny:m=E1;break;case"scroll":m=c1;break;case"wheel":m=A1;break;case"copy":case"cut":case"paste":m=g1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=rp}var v=(e&4)!==0,x=!v&&t==="scroll",g=v?f!==null?f+"Capture":null:f;v=[];for(var y=d,b;y!==null;){b=y;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,g!==null&&(k=va(y,g),k!=null&&v.push(Sa(y,k,b)))),x)break;y=y.return}0<v.length&&(f=new m(f,p,null,s,u),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&s!==Hd&&(p=s.relatedTarget||s.fromElement)&&(ir(p)||p[nn]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=s.relatedTarget||s.toElement,m=d,p=p?ir(p):null,p!==null&&(x=jr(p),p!==x||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=d),m!==p)){if(v=sp,k="onMouseLeave",g="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=rp,k="onPointerLeave",g="onPointerEnter",y="pointer"),x=m==null?f:qr(m),b=p==null?f:qr(p),f=new v(k,y+"leave",m,s,u),f.target=x,f.relatedTarget=b,k=null,ir(u)===d&&(v=new v(g,y+"enter",p,s,u),v.target=b,v.relatedTarget=x,k=v),x=k,m&&p)t:{for(v=m,g=p,y=0,b=v;b;b=Dr(b))y++;for(b=0,k=g;k;k=Dr(k))b++;for(;0<y-b;)v=Dr(v),y--;for(;0<b-y;)g=Dr(g),b--;for(;y--;){if(v===g||g!==null&&v===g.alternate)break t;v=Dr(v),g=Dr(g)}v=null}else v=null;m!==null&&pp(h,f,m,v,!1),p!==null&&x!==null&&pp(h,x,p,v,!0)}}e:{if(f=d?qr(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var j=I1;else if(op(f))if(Yx)j=U1;else{j=$1;var S=F1}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=z1);if(j&&(j=j(t,d))){Kx(h,j,s,u);break e}S&&S(t,f,d),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&Fd(f,"number",f.value)}switch(S=d?qr(d):window,t){case"focusin":(op(S)||S.contentEditable==="true")&&(Wr=S,Jd=d,na=null);break;case"focusout":na=Jd=Wr=null;break;case"mousedown":Qd=!0;break;case"contextmenu":case"mouseup":case"dragend":Qd=!1,hp(h,s,u);break;case"selectionchange":if(W1)break;case"keydown":case"keyup":hp(h,s,u)}var E;if(hh)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Hr?qx(t,s)&&(_="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(_="onCompositionStart");_&&(Vx&&s.locale!=="ko"&&(Hr||_!=="onCompositionStart"?_==="onCompositionEnd"&&Hr&&(E=Wx()):(bn=u,ch="value"in bn?bn.value:bn.textContent,Hr=!0)),S=jl(d,_),0<S.length&&(_=new np(_,t,null,s,u),h.push({event:_,listeners:S}),E?_.data=E:(E=Gx(s),E!==null&&(_.data=E)))),(E=T1?M1(t,s):D1(t,s))&&(d=jl(d,"onBeforeInput"),0<d.length&&(u=new np("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=E))}iy(h,e)})}function Sa(t,e,s){return{instance:t,listener:e,currentTarget:s}}function jl(t,e){for(var s=e+"Capture",n=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=va(t,s),i!=null&&n.unshift(Sa(t,i,r)),i=va(t,e),i!=null&&n.push(Sa(t,i,r))),t=t.return}return n}function Dr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function pp(t,e,s,n,r){for(var i=e._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,r?(c=va(s,i),c!=null&&o.unshift(Sa(s,c,l))):r||(c=va(s,i),c!=null&&o.push(Sa(s,c,l)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var K1=/\r\n?/g,Y1=/\u0000|\uFFFD/g;function gp(t){return(typeof t=="string"?t:""+t).replace(K1,`
`).replace(Y1,"")}function po(t,e,s){if(e=gp(e),gp(t)!==e&&s)throw Error(F(425))}function Nl(){}var Xd=null,Zd=null;function eu(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var tu=typeof setTimeout=="function"?setTimeout:void 0,J1=typeof clearTimeout=="function"?clearTimeout:void 0,xp=typeof Promise=="function"?Promise:void 0,Q1=typeof queueMicrotask=="function"?queueMicrotask:typeof xp<"u"?function(t){return xp.resolve(null).then(t).catch(X1)}:tu;function X1(t){setTimeout(function(){throw t})}function Jc(t,e){var s=e,n=0;do{var r=s.nextSibling;if(t.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(n===0){t.removeChild(r),ja(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=r}while(s);ja(e)}function Ln(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function yp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var bi=Math.random().toString(36).slice(2),Ls="__reactFiber$"+bi,Ca="__reactProps$"+bi,nn="__reactContainer$"+bi,su="__reactEvents$"+bi,Z1="__reactListeners$"+bi,ej="__reactHandles$"+bi;function ir(t){var e=t[Ls];if(e)return e;for(var s=t.parentNode;s;){if(e=s[nn]||s[Ls]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=yp(t);t!==null;){if(s=t[Ls])return s;t=yp(t)}return e}t=s,s=t.parentNode}return null}function Ya(t){return t=t[Ls]||t[nn],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function qr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(F(33))}function nc(t){return t[Ca]||null}var nu=[],Gr=-1;function Bn(t){return{current:t}}function De(t){0>Gr||(t.current=nu[Gr],nu[Gr]=null,Gr--)}function Pe(t,e){Gr++,nu[Gr]=t.current,t.current=e}var Fn={},wt=Bn(Fn),Rt=Bn(!1),fr=Fn;function li(t,e){var s=t.type.contextTypes;if(!s)return Fn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in s)r[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function It(t){return t=t.childContextTypes,t!=null}function _l(){De(Rt),De(wt)}function vp(t,e,s){if(wt.current!==Fn)throw Error(F(168));Pe(wt,e),Pe(Rt,s)}function oy(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(F(108,Fw(t)||"Unknown",r));return He({},s,n)}function kl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||Fn,fr=wt.current,Pe(wt,t),Pe(Rt,Rt.current),!0}function bp(t,e,s){var n=t.stateNode;if(!n)throw Error(F(169));s?(t=oy(t,e,fr),n.__reactInternalMemoizedMergedChildContext=t,De(Rt),De(wt),Pe(wt,t)):De(Rt),Pe(Rt,s)}var Gs=null,rc=!1,Qc=!1;function ly(t){Gs===null?Gs=[t]:Gs.push(t)}function tj(t){rc=!0,ly(t)}function Hn(){if(!Qc&&Gs!==null){Qc=!0;var t=0,e=_e;try{var s=Gs;for(_e=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}Gs=null,rc=!1}catch(r){throw Gs!==null&&(Gs=Gs.slice(t+1)),Mx(ih,Hn),r}finally{_e=e,Qc=!1}}return null}var Kr=[],Yr=0,Sl=null,Cl=0,ns=[],rs=0,mr=null,Ys=1,Js="";function Zn(t,e){Kr[Yr++]=Cl,Kr[Yr++]=Sl,Sl=t,Cl=e}function cy(t,e,s){ns[rs++]=Ys,ns[rs++]=Js,ns[rs++]=mr,mr=t;var n=Ys;t=Js;var r=32-ys(n)-1;n&=~(1<<r),s+=1;var i=32-ys(e)+r;if(30<i){var o=r-r%5;i=(n&(1<<o)-1).toString(32),n>>=o,r-=o,Ys=1<<32-ys(e)+r|s<<r|n,Js=i+t}else Ys=1<<i|s<<r|n,Js=t}function mh(t){t.return!==null&&(Zn(t,1),cy(t,1,0))}function ph(t){for(;t===Sl;)Sl=Kr[--Yr],Kr[Yr]=null,Cl=Kr[--Yr],Kr[Yr]=null;for(;t===mr;)mr=ns[--rs],ns[rs]=null,Js=ns[--rs],ns[rs]=null,Ys=ns[--rs],ns[rs]=null}var Yt=null,qt=null,Re=!1,xs=null;function dy(t,e){var s=is(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function wp(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Yt=t,qt=Ln(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Yt=t,qt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=mr!==null?{id:Ys,overflow:Js}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=is(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Yt=t,qt=null,!0):!1;default:return!1}}function ru(t){return(t.mode&1)!==0&&(t.flags&128)===0}function iu(t){if(Re){var e=qt;if(e){var s=e;if(!wp(t,e)){if(ru(t))throw Error(F(418));e=Ln(s.nextSibling);var n=Yt;e&&wp(t,e)?dy(n,s):(t.flags=t.flags&-4097|2,Re=!1,Yt=t)}}else{if(ru(t))throw Error(F(418));t.flags=t.flags&-4097|2,Re=!1,Yt=t}}}function jp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Yt=t}function go(t){if(t!==Yt)return!1;if(!Re)return jp(t),Re=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!eu(t.type,t.memoizedProps)),e&&(e=qt)){if(ru(t))throw uy(),Error(F(418));for(;e;)dy(t,e),e=Ln(e.nextSibling)}if(jp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(F(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){qt=Ln(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}qt=null}}else qt=Yt?Ln(t.stateNode.nextSibling):null;return!0}function uy(){for(var t=qt;t;)t=Ln(t.nextSibling)}function ci(){qt=Yt=null,Re=!1}function gh(t){xs===null?xs=[t]:xs.push(t)}var sj=ln.ReactCurrentBatchConfig;function Mi(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(F(309));var n=s.stateNode}if(!n)throw Error(F(147,t));var r=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=r.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(F(284));if(!s._owner)throw Error(F(290,t))}return t}function xo(t,e){throw t=Object.prototype.toString.call(e),Error(F(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Np(t){var e=t._init;return e(t._payload)}function hy(t){function e(g,y){if(t){var b=g.deletions;b===null?(g.deletions=[y],g.flags|=16):b.push(y)}}function s(g,y){if(!t)return null;for(;y!==null;)e(g,y),y=y.sibling;return null}function n(g,y){for(g=new Map;y!==null;)y.key!==null?g.set(y.key,y):g.set(y.index,y),y=y.sibling;return g}function r(g,y){return g=On(g,y),g.index=0,g.sibling=null,g}function i(g,y,b){return g.index=b,t?(b=g.alternate,b!==null?(b=b.index,b<y?(g.flags|=2,y):b):(g.flags|=2,y)):(g.flags|=1048576,y)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,y,b,k){return y===null||y.tag!==6?(y=rd(b,g.mode,k),y.return=g,y):(y=r(y,b),y.return=g,y)}function c(g,y,b,k){var j=b.type;return j===Br?u(g,y,b.props.children,k,b.key):y!==null&&(y.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===mn&&Np(j)===y.type)?(k=r(y,b.props),k.ref=Mi(g,y,b),k.return=g,k):(k=rl(b.type,b.key,b.props,null,g.mode,k),k.ref=Mi(g,y,b),k.return=g,k)}function d(g,y,b,k){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=id(b,g.mode,k),y.return=g,y):(y=r(y,b.children||[]),y.return=g,y)}function u(g,y,b,k,j){return y===null||y.tag!==7?(y=dr(b,g.mode,k,j),y.return=g,y):(y=r(y,b),y.return=g,y)}function h(g,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=rd(""+y,g.mode,b),y.return=g,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case io:return b=rl(y.type,y.key,y.props,null,g.mode,b),b.ref=Mi(g,null,y),b.return=g,b;case Ur:return y=id(y,g.mode,b),y.return=g,y;case mn:var k=y._init;return h(g,k(y._payload),b)}if(qi(y)||Ei(y))return y=dr(y,g.mode,b,null),y.return=g,y;xo(g,y)}return null}function f(g,y,b,k){var j=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(g,y,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case io:return b.key===j?c(g,y,b,k):null;case Ur:return b.key===j?d(g,y,b,k):null;case mn:return j=b._init,f(g,y,j(b._payload),k)}if(qi(b)||Ei(b))return j!==null?null:u(g,y,b,k,null);xo(g,b)}return null}function m(g,y,b,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(b)||null,l(y,g,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case io:return g=g.get(k.key===null?b:k.key)||null,c(y,g,k,j);case Ur:return g=g.get(k.key===null?b:k.key)||null,d(y,g,k,j);case mn:var S=k._init;return m(g,y,b,S(k._payload),j)}if(qi(k)||Ei(k))return g=g.get(b)||null,u(y,g,k,j,null);xo(y,k)}return null}function p(g,y,b,k){for(var j=null,S=null,E=y,_=y=0,C=null;E!==null&&_<b.length;_++){E.index>_?(C=E,E=null):C=E.sibling;var N=f(g,E,b[_],k);if(N===null){E===null&&(E=C);break}t&&E&&N.alternate===null&&e(g,E),y=i(N,y,_),S===null?j=N:S.sibling=N,S=N,E=C}if(_===b.length)return s(g,E),Re&&Zn(g,_),j;if(E===null){for(;_<b.length;_++)E=h(g,b[_],k),E!==null&&(y=i(E,y,_),S===null?j=E:S.sibling=E,S=E);return Re&&Zn(g,_),j}for(E=n(g,E);_<b.length;_++)C=m(E,g,_,b[_],k),C!==null&&(t&&C.alternate!==null&&E.delete(C.key===null?_:C.key),y=i(C,y,_),S===null?j=C:S.sibling=C,S=C);return t&&E.forEach(function(L){return e(g,L)}),Re&&Zn(g,_),j}function v(g,y,b,k){var j=Ei(b);if(typeof j!="function")throw Error(F(150));if(b=j.call(b),b==null)throw Error(F(151));for(var S=j=null,E=y,_=y=0,C=null,N=b.next();E!==null&&!N.done;_++,N=b.next()){E.index>_?(C=E,E=null):C=E.sibling;var L=f(g,E,N.value,k);if(L===null){E===null&&(E=C);break}t&&E&&L.alternate===null&&e(g,E),y=i(L,y,_),S===null?j=L:S.sibling=L,S=L,E=C}if(N.done)return s(g,E),Re&&Zn(g,_),j;if(E===null){for(;!N.done;_++,N=b.next())N=h(g,N.value,k),N!==null&&(y=i(N,y,_),S===null?j=N:S.sibling=N,S=N);return Re&&Zn(g,_),j}for(E=n(g,E);!N.done;_++,N=b.next())N=m(E,g,_,N.value,k),N!==null&&(t&&N.alternate!==null&&E.delete(N.key===null?_:N.key),y=i(N,y,_),S===null?j=N:S.sibling=N,S=N);return t&&E.forEach(function(P){return e(g,P)}),Re&&Zn(g,_),j}function x(g,y,b,k){if(typeof b=="object"&&b!==null&&b.type===Br&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case io:e:{for(var j=b.key,S=y;S!==null;){if(S.key===j){if(j=b.type,j===Br){if(S.tag===7){s(g,S.sibling),y=r(S,b.props.children),y.return=g,g=y;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===mn&&Np(j)===S.type){s(g,S.sibling),y=r(S,b.props),y.ref=Mi(g,S,b),y.return=g,g=y;break e}s(g,S);break}else e(g,S);S=S.sibling}b.type===Br?(y=dr(b.props.children,g.mode,k,b.key),y.return=g,g=y):(k=rl(b.type,b.key,b.props,null,g.mode,k),k.ref=Mi(g,y,b),k.return=g,g=k)}return o(g);case Ur:e:{for(S=b.key;y!==null;){if(y.key===S)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){s(g,y.sibling),y=r(y,b.children||[]),y.return=g,g=y;break e}else{s(g,y);break}else e(g,y);y=y.sibling}y=id(b,g.mode,k),y.return=g,g=y}return o(g);case mn:return S=b._init,x(g,y,S(b._payload),k)}if(qi(b))return p(g,y,b,k);if(Ei(b))return v(g,y,b,k);xo(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(s(g,y.sibling),y=r(y,b),y.return=g,g=y):(s(g,y),y=rd(b,g.mode,k),y.return=g,g=y),o(g)):s(g,y)}return x}var di=hy(!0),fy=hy(!1),El=Bn(null),Pl=null,Jr=null,xh=null;function yh(){xh=Jr=Pl=null}function vh(t){var e=El.current;De(El),t._currentValue=e}function au(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function ni(t,e){Pl=t,xh=Jr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Ot=!0),t.firstContext=null)}function cs(t){var e=t._currentValue;if(xh!==t)if(t={context:t,memoizedValue:e,next:null},Jr===null){if(Pl===null)throw Error(F(308));Jr=t,Pl.dependencies={lanes:0,firstContext:t}}else Jr=Jr.next=t;return e}var ar=null;function bh(t){ar===null?ar=[t]:ar.push(t)}function my(t,e,s,n){var r=e.interleaved;return r===null?(s.next=s,bh(e)):(s.next=r.next,r.next=s),e.interleaved=s,rn(t,n)}function rn(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var pn=!1;function wh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function py(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function Zs(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Tn(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,ye&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,rn(t,s)}return r=n.interleaved,r===null?(e.next=e,bh(n)):(e.next=r.next,r.next=e),n.interleaved=e,rn(t,s)}function Xo(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,ah(t,s)}}function _p(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?r=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?r=i=e:i=i.next=e}else r=i=e;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function Al(t,e,s,n){var r=t.updateQueue;pn=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;o=0,u=d=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,v=l;switch(f=e,m=s,v.tag){case 1:if(p=v.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=He({},h,f);break e;case 2:pn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(1);if(u===null&&(c=h),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);gr|=o,t.lanes=o,t.memoizedState=h}}function kp(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=s,typeof r!="function")throw Error(F(191,r));r.call(n)}}}var Ja={},Ms=Bn(Ja),Ea=Bn(Ja),Pa=Bn(Ja);function or(t){if(t===Ja)throw Error(F(174));return t}function jh(t,e){switch(Pe(Pa,e),Pe(Ea,t),Pe(Ms,Ja),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:zd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=zd(e,t)}De(Ms),Pe(Ms,e)}function ui(){De(Ms),De(Ea),De(Pa)}function gy(t){or(Pa.current);var e=or(Ms.current),s=zd(e,t.type);e!==s&&(Pe(Ea,t),Pe(Ms,s))}function Nh(t){Ea.current===t&&(De(Ms),De(Ea))}var Ue=Bn(0);function Ll(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Xc=[];function _h(){for(var t=0;t<Xc.length;t++)Xc[t]._workInProgressVersionPrimary=null;Xc.length=0}var Zo=ln.ReactCurrentDispatcher,Zc=ln.ReactCurrentBatchConfig,pr=0,Be=null,et=null,at=null,Tl=!1,ra=!1,Aa=0,nj=0;function gt(){throw Error(F(321))}function kh(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!bs(t[s],e[s]))return!1;return!0}function Sh(t,e,s,n,r,i){if(pr=i,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Zo.current=t===null||t.memoizedState===null?oj:lj,t=s(n,r),ra){i=0;do{if(ra=!1,Aa=0,25<=i)throw Error(F(301));i+=1,at=et=null,e.updateQueue=null,Zo.current=cj,t=s(n,r)}while(ra)}if(Zo.current=Ml,e=et!==null&&et.next!==null,pr=0,at=et=Be=null,Tl=!1,e)throw Error(F(300));return t}function Ch(){var t=Aa!==0;return Aa=0,t}function Es(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return at===null?Be.memoizedState=at=t:at=at.next=t,at}function ds(){if(et===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=et.next;var e=at===null?Be.memoizedState:at.next;if(e!==null)at=e,et=t;else{if(t===null)throw Error(F(310));et=t,t={memoizedState:et.memoizedState,baseState:et.baseState,baseQueue:et.baseQueue,queue:et.queue,next:null},at===null?Be.memoizedState=at=t:at=at.next=t}return at}function La(t,e){return typeof e=="function"?e(t):e}function ed(t){var e=ds(),s=e.queue;if(s===null)throw Error(F(311));s.lastRenderedReducer=t;var n=et,r=n.baseQueue,i=s.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}n.baseQueue=r=i,s.pending=null}if(r!==null){i=r.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((pr&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Be.lanes|=u,gr|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,bs(n,e.memoizedState)||(Ot=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){r=t;do i=r.lane,Be.lanes|=i,gr|=i,r=r.next;while(r!==t)}else r===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function td(t){var e=ds(),s=e.queue;if(s===null)throw Error(F(311));s.lastRenderedReducer=t;var n=s.dispatch,r=s.pending,i=e.memoizedState;if(r!==null){s.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);bs(i,e.memoizedState)||(Ot=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),s.lastRenderedState=i}return[i,n]}function xy(){}function yy(t,e){var s=Be,n=ds(),r=e(),i=!bs(n.memoizedState,r);if(i&&(n.memoizedState=r,Ot=!0),n=n.queue,Eh(wy.bind(null,s,n,t),[t]),n.getSnapshot!==e||i||at!==null&&at.memoizedState.tag&1){if(s.flags|=2048,Ta(9,by.bind(null,s,n,r,e),void 0,null),ot===null)throw Error(F(349));pr&30||vy(s,e,r)}return r}function vy(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function by(t,e,s,n){e.value=s,e.getSnapshot=n,jy(e)&&Ny(t)}function wy(t,e,s){return s(function(){jy(e)&&Ny(t)})}function jy(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!bs(t,s)}catch{return!0}}function Ny(t){var e=rn(t,1);e!==null&&vs(e,t,1,-1)}function Sp(t){var e=Es();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:La,lastRenderedState:t},e.queue=t,t=t.dispatch=aj.bind(null,Be,t),[e.memoizedState,t]}function Ta(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function _y(){return ds().memoizedState}function el(t,e,s,n){var r=Es();Be.flags|=t,r.memoizedState=Ta(1|e,s,void 0,n===void 0?null:n)}function ic(t,e,s,n){var r=ds();n=n===void 0?null:n;var i=void 0;if(et!==null){var o=et.memoizedState;if(i=o.destroy,n!==null&&kh(n,o.deps)){r.memoizedState=Ta(e,s,i,n);return}}Be.flags|=t,r.memoizedState=Ta(1|e,s,i,n)}function Cp(t,e){return el(8390656,8,t,e)}function Eh(t,e){return ic(2048,8,t,e)}function ky(t,e){return ic(4,2,t,e)}function Sy(t,e){return ic(4,4,t,e)}function Cy(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function Ey(t,e,s){return s=s!=null?s.concat([t]):null,ic(4,4,Cy.bind(null,e,t),s)}function Ph(){}function Py(t,e){var s=ds();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&kh(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function Ay(t,e){var s=ds();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&kh(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function Ly(t,e,s){return pr&21?(bs(s,e)||(s=Rx(),Be.lanes|=s,gr|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Ot=!0),t.memoizedState=s)}function rj(t,e){var s=_e;_e=s!==0&&4>s?s:4,t(!0);var n=Zc.transition;Zc.transition={};try{t(!1),e()}finally{_e=s,Zc.transition=n}}function Ty(){return ds().memoizedState}function ij(t,e,s){var n=Dn(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},My(t))Dy(e,s);else if(s=my(t,e,s,n),s!==null){var r=_t();vs(s,t,n,r),Oy(s,e,n)}}function aj(t,e,s){var n=Dn(t),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(My(t))Dy(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,s);if(r.hasEagerState=!0,r.eagerState=l,bs(l,o)){var c=e.interleaved;c===null?(r.next=r,bh(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}s=my(t,e,r,n),s!==null&&(r=_t(),vs(s,t,n,r),Oy(s,e,n))}}function My(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function Dy(t,e){ra=Tl=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function Oy(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,ah(t,s)}}var Ml={readContext:cs,useCallback:gt,useContext:gt,useEffect:gt,useImperativeHandle:gt,useInsertionEffect:gt,useLayoutEffect:gt,useMemo:gt,useReducer:gt,useRef:gt,useState:gt,useDebugValue:gt,useDeferredValue:gt,useTransition:gt,useMutableSource:gt,useSyncExternalStore:gt,useId:gt,unstable_isNewReconciler:!1},oj={readContext:cs,useCallback:function(t,e){return Es().memoizedState=[t,e===void 0?null:e],t},useContext:cs,useEffect:Cp,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,el(4194308,4,Cy.bind(null,e,t),s)},useLayoutEffect:function(t,e){return el(4194308,4,t,e)},useInsertionEffect:function(t,e){return el(4,2,t,e)},useMemo:function(t,e){var s=Es();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=Es();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=ij.bind(null,Be,t),[n.memoizedState,t]},useRef:function(t){var e=Es();return t={current:t},e.memoizedState=t},useState:Sp,useDebugValue:Ph,useDeferredValue:function(t){return Es().memoizedState=t},useTransition:function(){var t=Sp(!1),e=t[0];return t=rj.bind(null,t[1]),Es().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=Be,r=Es();if(Re){if(s===void 0)throw Error(F(407));s=s()}else{if(s=e(),ot===null)throw Error(F(349));pr&30||vy(n,e,s)}r.memoizedState=s;var i={value:s,getSnapshot:e};return r.queue=i,Cp(wy.bind(null,n,i,t),[t]),n.flags|=2048,Ta(9,by.bind(null,n,i,s,e),void 0,null),s},useId:function(){var t=Es(),e=ot.identifierPrefix;if(Re){var s=Js,n=Ys;s=(n&~(1<<32-ys(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=Aa++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=nj++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},lj={readContext:cs,useCallback:Py,useContext:cs,useEffect:Eh,useImperativeHandle:Ey,useInsertionEffect:ky,useLayoutEffect:Sy,useMemo:Ay,useReducer:ed,useRef:_y,useState:function(){return ed(La)},useDebugValue:Ph,useDeferredValue:function(t){var e=ds();return Ly(e,et.memoizedState,t)},useTransition:function(){var t=ed(La)[0],e=ds().memoizedState;return[t,e]},useMutableSource:xy,useSyncExternalStore:yy,useId:Ty,unstable_isNewReconciler:!1},cj={readContext:cs,useCallback:Py,useContext:cs,useEffect:Eh,useImperativeHandle:Ey,useInsertionEffect:ky,useLayoutEffect:Sy,useMemo:Ay,useReducer:td,useRef:_y,useState:function(){return td(La)},useDebugValue:Ph,useDeferredValue:function(t){var e=ds();return et===null?e.memoizedState=t:Ly(e,et.memoizedState,t)},useTransition:function(){var t=td(La)[0],e=ds().memoizedState;return[t,e]},useMutableSource:xy,useSyncExternalStore:yy,useId:Ty,unstable_isNewReconciler:!1};function fs(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function ou(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:He({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var ac={isMounted:function(t){return(t=t._reactInternals)?jr(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=_t(),r=Dn(t),i=Zs(n,r);i.payload=e,s!=null&&(i.callback=s),e=Tn(t,i,r),e!==null&&(vs(e,t,r,n),Xo(e,t,r))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=_t(),r=Dn(t),i=Zs(n,r);i.tag=1,i.payload=e,s!=null&&(i.callback=s),e=Tn(t,i,r),e!==null&&(vs(e,t,r,n),Xo(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=_t(),n=Dn(t),r=Zs(s,n);r.tag=2,e!=null&&(r.callback=e),e=Tn(t,r,n),e!==null&&(vs(e,t,n,s),Xo(e,t,n))}};function Ep(t,e,s,n,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!_a(s,n)||!_a(r,i):!0}function Ry(t,e,s){var n=!1,r=Fn,i=e.contextType;return typeof i=="object"&&i!==null?i=cs(i):(r=It(e)?fr:wt.current,n=e.contextTypes,i=(n=n!=null)?li(t,r):Fn),e=new e(s,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=ac,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function Pp(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&ac.enqueueReplaceState(e,e.state,null)}function lu(t,e,s,n){var r=t.stateNode;r.props=s,r.state=t.memoizedState,r.refs={},wh(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=cs(i):(i=It(e)?fr:wt.current,r.context=li(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&(ou(t,e,i,s),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&ac.enqueueReplaceState(r,r.state,null),Al(t,s,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function hi(t,e){try{var s="",n=e;do s+=Iw(n),n=n.return;while(n);var r=s}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function sd(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function cu(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var dj=typeof WeakMap=="function"?WeakMap:Map;function Iy(t,e,s){s=Zs(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){Ol||(Ol=!0,vu=n),cu(t,e)},s}function Fy(t,e,s){s=Zs(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;s.payload=function(){return n(r)},s.callback=function(){cu(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){cu(t,e),typeof n!="function"&&(Mn===null?Mn=new Set([this]):Mn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function Ap(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new dj;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(s)||(r.add(s),t=_j.bind(null,t,e,s),e.then(t,t))}function Lp(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Tp(t,e,s,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=Zs(-1,1),e.tag=2,Tn(s,e,1))),s.lanes|=1),t)}var uj=ln.ReactCurrentOwner,Ot=!1;function Nt(t,e,s,n){e.child=t===null?fy(e,null,s,n):di(e,t.child,s,n)}function Mp(t,e,s,n,r){s=s.render;var i=e.ref;return ni(e,r),n=Sh(t,e,s,n,i,r),s=Ch(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,an(t,e,r)):(Re&&s&&mh(e),e.flags|=1,Nt(t,e,n,r),e.child)}function Dp(t,e,s,n,r){if(t===null){var i=s.type;return typeof i=="function"&&!Ih(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=i,$y(t,e,i,n,r)):(t=rl(s.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:_a,s(o,n)&&t.ref===e.ref)return an(t,e,r)}return e.flags|=1,t=On(i,n),t.ref=e.ref,t.return=e,e.child=t}function $y(t,e,s,n,r){if(t!==null){var i=t.memoizedProps;if(_a(i,n)&&t.ref===e.ref)if(Ot=!1,e.pendingProps=n=i,(t.lanes&r)!==0)t.flags&131072&&(Ot=!0);else return e.lanes=t.lanes,an(t,e,r)}return du(t,e,s,n,r)}function zy(t,e,s){var n=e.pendingProps,r=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Pe(Xr,Wt),Wt|=s;else{if(!(s&1073741824))return t=i!==null?i.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Pe(Xr,Wt),Wt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,Pe(Xr,Wt),Wt|=n}else i!==null?(n=i.baseLanes|s,e.memoizedState=null):n=s,Pe(Xr,Wt),Wt|=n;return Nt(t,e,r,s),e.child}function Uy(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function du(t,e,s,n,r){var i=It(s)?fr:wt.current;return i=li(e,i),ni(e,r),s=Sh(t,e,s,n,i,r),n=Ch(),t!==null&&!Ot?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,an(t,e,r)):(Re&&n&&mh(e),e.flags|=1,Nt(t,e,s,r),e.child)}function Op(t,e,s,n,r){if(It(s)){var i=!0;kl(e)}else i=!1;if(ni(e,r),e.stateNode===null)tl(t,e),Ry(e,s,n),lu(e,s,n,r),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=cs(d):(d=It(s)?fr:wt.current,d=li(e,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Pp(e,o,n,d),pn=!1;var f=e.memoizedState;o.state=f,Al(e,n,o,r),c=e.memoizedState,l!==n||f!==c||Rt.current||pn?(typeof u=="function"&&(ou(e,s,u,n),c=e.memoizedState),(l=pn||Ep(e,s,l,n,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,py(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:fs(e.type,l),o.props=d,h=e.pendingProps,f=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=cs(c):(c=It(s)?fr:wt.current,c=li(e,c));var m=s.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Pp(e,o,n,c),pn=!1,f=e.memoizedState,o.state=f,Al(e,n,o,r);var p=e.memoizedState;l!==h||f!==p||Rt.current||pn?(typeof m=="function"&&(ou(e,s,m,n),p=e.memoizedState),(d=pn||Ep(e,s,d,n,f,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return uu(t,e,s,n,i,r)}function uu(t,e,s,n,r,i){Uy(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return r&&bp(e,s,!1),an(t,e,i);n=e.stateNode,uj.current=e;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=di(e,t.child,null,i),e.child=di(e,null,l,i)):Nt(t,e,l,i),e.memoizedState=n.state,r&&bp(e,s,!0),e.child}function By(t){var e=t.stateNode;e.pendingContext?vp(t,e.pendingContext,e.pendingContext!==e.context):e.context&&vp(t,e.context,!1),jh(t,e.containerInfo)}function Rp(t,e,s,n,r){return ci(),gh(r),e.flags|=256,Nt(t,e,s,n),e.child}var hu={dehydrated:null,treeContext:null,retryLane:0};function fu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Hy(t,e,s){var n=e.pendingProps,r=Ue.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Pe(Ue,r&1),t===null)return iu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=cc(o,n,0,null),t=dr(t,n,s,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=fu(s),e.memoizedState=hu,t):Ah(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return hj(t,e,o,n,l,r,s);if(i){i=n.fallback,o=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=On(r,c),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=On(l,i):(i=dr(i,o,s,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?fu(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~s,e.memoizedState=hu,n}return i=t.child,t=i.sibling,n=On(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function Ah(t,e){return e=cc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function yo(t,e,s,n){return n!==null&&gh(n),di(e,t.child,null,s),t=Ah(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function hj(t,e,s,n,r,i,o){if(s)return e.flags&256?(e.flags&=-257,n=sd(Error(F(422))),yo(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,r=e.mode,n=cc({mode:"visible",children:n.children},r,0,null),i=dr(i,r,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&di(e,t.child,null,o),e.child.memoizedState=fu(o),e.memoizedState=hu,i);if(!(e.mode&1))return yo(t,e,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(F(419)),n=sd(i,n,void 0),yo(t,e,o,n)}if(l=(o&t.childLanes)!==0,Ot||l){if(n=ot,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,rn(t,r),vs(n,t,r,-1))}return Rh(),n=sd(Error(F(421))),yo(t,e,o,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=kj.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,qt=Ln(r.nextSibling),Yt=e,Re=!0,xs=null,t!==null&&(ns[rs++]=Ys,ns[rs++]=Js,ns[rs++]=mr,Ys=t.id,Js=t.overflow,mr=e),e=Ah(e,n.children),e.flags|=4096,e)}function Ip(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),au(t.return,e,s)}function nd(t,e,s,n,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=r)}function Wy(t,e,s){var n=e.pendingProps,r=n.revealOrder,i=n.tail;if(Nt(t,e,n.children,s),n=Ue.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Ip(t,s,e);else if(t.tag===19)Ip(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Pe(Ue,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(s=e.child,r=null;s!==null;)t=s.alternate,t!==null&&Ll(t)===null&&(r=s),s=s.sibling;s=r,s===null?(r=e.child,e.child=null):(r=s.sibling,s.sibling=null),nd(e,!1,r,s,i);break;case"backwards":for(s=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Ll(t)===null){e.child=r;break}t=r.sibling,r.sibling=s,s=r,r=t}nd(e,!0,s,null,i);break;case"together":nd(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function tl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function an(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),gr|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(F(153));if(e.child!==null){for(t=e.child,s=On(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=On(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function fj(t,e,s){switch(e.tag){case 3:By(e),ci();break;case 5:gy(e);break;case 1:It(e.type)&&kl(e);break;case 4:jh(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;Pe(El,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Pe(Ue,Ue.current&1),e.flags|=128,null):s&e.child.childLanes?Hy(t,e,s):(Pe(Ue,Ue.current&1),t=an(t,e,s),t!==null?t.sibling:null);Pe(Ue,Ue.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return Wy(t,e,s);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Pe(Ue,Ue.current),n)break;return null;case 22:case 23:return e.lanes=0,zy(t,e,s)}return an(t,e,s)}var Vy,mu,qy,Gy;Vy=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};mu=function(){};qy=function(t,e,s,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,or(Ms.current);var i=null;switch(s){case"input":r=Rd(t,r),n=Rd(t,n),i=[];break;case"select":r=He({},r,{value:void 0}),n=He({},n,{value:void 0}),i=[];break;case"textarea":r=$d(t,r),n=$d(t,n),i=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Nl)}Ud(s,n);var o;s=null;for(d in r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(xa.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=r!=null?r[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(xa.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Te("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};Gy=function(t,e,s,n){s!==n&&(e.flags|=4)};function Di(t,e){if(!Re)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function xt(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function mj(t,e,s){var n=e.pendingProps;switch(ph(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return xt(e),null;case 1:return It(e.type)&&_l(),xt(e),null;case 3:return n=e.stateNode,ui(),De(Rt),De(wt),_h(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(go(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,xs!==null&&(ju(xs),xs=null))),mu(t,e),xt(e),null;case 5:Nh(e);var r=or(Pa.current);if(s=e.type,t!==null&&e.stateNode!=null)qy(t,e,s,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(F(166));return xt(e),null}if(t=or(Ms.current),go(e)){n=e.stateNode,s=e.type;var i=e.memoizedProps;switch(n[Ls]=e,n[Ca]=i,t=(e.mode&1)!==0,s){case"dialog":Te("cancel",n),Te("close",n);break;case"iframe":case"object":case"embed":Te("load",n);break;case"video":case"audio":for(r=0;r<Ki.length;r++)Te(Ki[r],n);break;case"source":Te("error",n);break;case"img":case"image":case"link":Te("error",n),Te("load",n);break;case"details":Te("toggle",n);break;case"input":qm(n,i),Te("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Te("invalid",n);break;case"textarea":Km(n,i),Te("invalid",n)}Ud(s,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&po(n.textContent,l,t),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&po(n.textContent,l,t),r=["children",""+l]):xa.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Te("scroll",n)}switch(s){case"input":ao(n),Gm(n,i,!0);break;case"textarea":ao(n),Ym(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Nl)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=wx(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(s,{is:n.is}):(t=o.createElement(s),s==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,s),t[Ls]=e,t[Ca]=n,Vy(t,e,!1,!1),e.stateNode=t;e:{switch(o=Bd(s,n),s){case"dialog":Te("cancel",t),Te("close",t),r=n;break;case"iframe":case"object":case"embed":Te("load",t),r=n;break;case"video":case"audio":for(r=0;r<Ki.length;r++)Te(Ki[r],t);r=n;break;case"source":Te("error",t),r=n;break;case"img":case"image":case"link":Te("error",t),Te("load",t),r=n;break;case"details":Te("toggle",t),r=n;break;case"input":qm(t,n),r=Rd(t,n),Te("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=He({},n,{value:void 0}),Te("invalid",t);break;case"textarea":Km(t,n),r=$d(t,n),Te("invalid",t);break;default:r=n}Ud(s,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?_x(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&jx(t,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&ya(t,c):typeof c=="number"&&ya(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(xa.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Te("scroll",t):c!=null&&eh(t,i,c,o))}switch(s){case"input":ao(t),Gm(t,n,!1);break;case"textarea":ao(t),Ym(t);break;case"option":n.value!=null&&t.setAttribute("value",""+In(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Zr(t,!!n.multiple,i,!1):n.defaultValue!=null&&Zr(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Nl)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return xt(e),null;case 6:if(t&&e.stateNode!=null)Gy(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(F(166));if(s=or(Pa.current),or(Ms.current),go(e)){if(n=e.stateNode,s=e.memoizedProps,n[Ls]=e,(i=n.nodeValue!==s)&&(t=Yt,t!==null))switch(t.tag){case 3:po(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&po(n.nodeValue,s,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Ls]=e,e.stateNode=n}return xt(e),null;case 13:if(De(Ue),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Re&&qt!==null&&e.mode&1&&!(e.flags&128))uy(),ci(),e.flags|=98560,i=!1;else if(i=go(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(F(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(F(317));i[Ls]=e}else ci(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;xt(e),i=!1}else xs!==null&&(ju(xs),xs=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?tt===0&&(tt=3):Rh())),e.updateQueue!==null&&(e.flags|=4),xt(e),null);case 4:return ui(),mu(t,e),t===null&&ka(e.stateNode.containerInfo),xt(e),null;case 10:return vh(e.type._context),xt(e),null;case 17:return It(e.type)&&_l(),xt(e),null;case 19:if(De(Ue),i=e.memoizedState,i===null)return xt(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)Di(i,!1);else{if(tt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Ll(t),o!==null){for(e.flags|=128,Di(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)i=s,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Pe(Ue,Ue.current&1|2),e.child}t=t.sibling}i.tail!==null&&Ke()>fi&&(e.flags|=128,n=!0,Di(i,!1),e.lanes=4194304)}else{if(!n)if(t=Ll(o),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Di(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Re)return xt(e),null}else 2*Ke()-i.renderingStartTime>fi&&s!==1073741824&&(e.flags|=128,n=!0,Di(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(s=i.last,s!==null?s.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=Ke(),e.sibling=null,s=Ue.current,Pe(Ue,n?s&1|2:s&1),e):(xt(e),null);case 22:case 23:return Oh(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Wt&1073741824&&(xt(e),e.subtreeFlags&6&&(e.flags|=8192)):xt(e),null;case 24:return null;case 25:return null}throw Error(F(156,e.tag))}function pj(t,e){switch(ph(e),e.tag){case 1:return It(e.type)&&_l(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ui(),De(Rt),De(wt),_h(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Nh(e),null;case 13:if(De(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(F(340));ci()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return De(Ue),null;case 4:return ui(),null;case 10:return vh(e.type._context),null;case 22:case 23:return Oh(),null;case 24:return null;default:return null}}var vo=!1,bt=!1,gj=typeof WeakSet=="function"?WeakSet:Set,J=null;function Qr(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Ve(t,e,n)}else s.current=null}function pu(t,e,s){try{s()}catch(n){Ve(t,e,n)}}var Fp=!1;function xj(t,e){if(Xd=bl,t=Xx(),fh(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==s||r!==0&&h.nodeType!==3||(l=o+r),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===s&&++d===r&&(l=o),f===i&&++u===n&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Zd={focusedElem:t,selectionRange:s},bl=!1,J=e;J!==null;)if(e=J,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,J=t;else for(;J!==null;){e=J;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,x=p.memoizedState,g=e.stateNode,y=g.getSnapshotBeforeUpdate(e.elementType===e.type?v:fs(e.type,v),x);g.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(F(163))}}catch(k){Ve(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,J=t;break}J=e.return}return p=Fp,Fp=!1,p}function ia(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&pu(e,s,i)}r=r.next}while(r!==n)}}function oc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function gu(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function Ky(t){var e=t.alternate;e!==null&&(t.alternate=null,Ky(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ls],delete e[Ca],delete e[su],delete e[Z1],delete e[ej])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function Yy(t){return t.tag===5||t.tag===3||t.tag===4}function $p(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||Yy(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function xu(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Nl));else if(n!==4&&(t=t.child,t!==null))for(xu(t,e,s),t=t.sibling;t!==null;)xu(t,e,s),t=t.sibling}function yu(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(yu(t,e,s),t=t.sibling;t!==null;)yu(t,e,s),t=t.sibling}var ct=null,ms=!1;function un(t,e,s){for(s=s.child;s!==null;)Jy(t,e,s),s=s.sibling}function Jy(t,e,s){if(Ts&&typeof Ts.onCommitFiberUnmount=="function")try{Ts.onCommitFiberUnmount(Zl,s)}catch{}switch(s.tag){case 5:bt||Qr(s,e);case 6:var n=ct,r=ms;ct=null,un(t,e,s),ct=n,ms=r,ct!==null&&(ms?(t=ct,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):ct.removeChild(s.stateNode));break;case 18:ct!==null&&(ms?(t=ct,s=s.stateNode,t.nodeType===8?Jc(t.parentNode,s):t.nodeType===1&&Jc(t,s),ja(t)):Jc(ct,s.stateNode));break;case 4:n=ct,r=ms,ct=s.stateNode.containerInfo,ms=!0,un(t,e,s),ct=n,ms=r;break;case 0:case 11:case 14:case 15:if(!bt&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&pu(s,e,o),r=r.next}while(r!==n)}un(t,e,s);break;case 1:if(!bt&&(Qr(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Ve(s,e,l)}un(t,e,s);break;case 21:un(t,e,s);break;case 22:s.mode&1?(bt=(n=bt)||s.memoizedState!==null,un(t,e,s),bt=n):un(t,e,s);break;default:un(t,e,s)}}function zp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new gj),e.forEach(function(n){var r=Sj.bind(null,t,n);s.has(n)||(s.add(n),n.then(r,r))})}}function us(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ct=l.stateNode,ms=!1;break e;case 3:ct=l.stateNode.containerInfo,ms=!0;break e;case 4:ct=l.stateNode.containerInfo,ms=!0;break e}l=l.return}if(ct===null)throw Error(F(160));Jy(i,o,r),ct=null,ms=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Ve(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)Qy(e,t),e=e.sibling}function Qy(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(us(e,t),_s(t),n&4){try{ia(3,t,t.return),oc(3,t)}catch(v){Ve(t,t.return,v)}try{ia(5,t,t.return)}catch(v){Ve(t,t.return,v)}}break;case 1:us(e,t),_s(t),n&512&&s!==null&&Qr(s,s.return);break;case 5:if(us(e,t),_s(t),n&512&&s!==null&&Qr(s,s.return),t.flags&32){var r=t.stateNode;try{ya(r,"")}catch(v){Ve(t,t.return,v)}}if(n&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=s!==null?s.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&vx(r,i),Bd(l,o);var d=Bd(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?_x(r,h):u==="dangerouslySetInnerHTML"?jx(r,h):u==="children"?ya(r,h):eh(r,u,h,d)}switch(l){case"input":Id(r,i);break;case"textarea":bx(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Zr(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Zr(r,!!i.multiple,i.defaultValue,!0):Zr(r,!!i.multiple,i.multiple?[]:"",!1))}r[Ca]=i}catch(v){Ve(t,t.return,v)}}break;case 6:if(us(e,t),_s(t),n&4){if(t.stateNode===null)throw Error(F(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(v){Ve(t,t.return,v)}}break;case 3:if(us(e,t),_s(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{ja(e.containerInfo)}catch(v){Ve(t,t.return,v)}break;case 4:us(e,t),_s(t);break;case 13:us(e,t),_s(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(Mh=Ke())),n&4&&zp(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(bt=(d=bt)||u,us(e,t),bt=d):us(e,t),_s(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(J=t,u=t.child;u!==null;){for(h=J=u;J!==null;){switch(f=J,m=f.child,f.tag){case 0:case 11:case 14:case 15:ia(4,f,f.return);break;case 1:Qr(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){Ve(n,s,v)}}break;case 5:Qr(f,f.return);break;case 22:if(f.memoizedState!==null){Bp(h);continue}}m!==null?(m.return=f,J=m):Bp(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Nx("display",o))}catch(v){Ve(t,t.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(v){Ve(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:us(e,t),_s(t),n&4&&zp(t);break;case 21:break;default:us(e,t),_s(t)}}function _s(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(Yy(s)){var n=s;break e}s=s.return}throw Error(F(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(ya(r,""),n.flags&=-33);var i=$p(t);yu(t,i,r);break;case 3:case 4:var o=n.stateNode.containerInfo,l=$p(t);xu(t,l,o);break;default:throw Error(F(161))}}catch(c){Ve(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function yj(t,e,s){J=t,Xy(t)}function Xy(t,e,s){for(var n=(t.mode&1)!==0;J!==null;){var r=J,i=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||vo;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||bt;l=vo;var d=bt;if(vo=o,(bt=c)&&!d)for(J=r;J!==null;)o=J,c=o.child,o.tag===22&&o.memoizedState!==null?Hp(r):c!==null?(c.return=o,J=c):Hp(r);for(;i!==null;)J=i,Xy(i),i=i.sibling;J=r,vo=l,bt=d}Up(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,J=i):Up(t)}}function Up(t){for(;J!==null;){var e=J;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:bt||oc(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!bt)if(s===null)n.componentDidMount();else{var r=e.elementType===e.type?s.memoizedProps:fs(e.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&kp(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}kp(e,o,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&ja(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(F(163))}bt||e.flags&512&&gu(e)}catch(f){Ve(e,e.return,f)}}if(e===t){J=null;break}if(s=e.sibling,s!==null){s.return=e.return,J=s;break}J=e.return}}function Bp(t){for(;J!==null;){var e=J;if(e===t){J=null;break}var s=e.sibling;if(s!==null){s.return=e.return,J=s;break}J=e.return}}function Hp(t){for(;J!==null;){var e=J;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{oc(4,e)}catch(c){Ve(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(c){Ve(e,r,c)}}var i=e.return;try{gu(e)}catch(c){Ve(e,i,c)}break;case 5:var o=e.return;try{gu(e)}catch(c){Ve(e,o,c)}}}catch(c){Ve(e,e.return,c)}if(e===t){J=null;break}var l=e.sibling;if(l!==null){l.return=e.return,J=l;break}J=e.return}}var vj=Math.ceil,Dl=ln.ReactCurrentDispatcher,Lh=ln.ReactCurrentOwner,os=ln.ReactCurrentBatchConfig,ye=0,ot=null,Je=null,dt=0,Wt=0,Xr=Bn(0),tt=0,Ma=null,gr=0,lc=0,Th=0,aa=null,Tt=null,Mh=0,fi=1/0,Vs=null,Ol=!1,vu=null,Mn=null,bo=!1,wn=null,Rl=0,oa=0,bu=null,sl=-1,nl=0;function _t(){return ye&6?Ke():sl!==-1?sl:sl=Ke()}function Dn(t){return t.mode&1?ye&2&&dt!==0?dt&-dt:sj.transition!==null?(nl===0&&(nl=Rx()),nl):(t=_e,t!==0||(t=window.event,t=t===void 0?16:Hx(t.type)),t):1}function vs(t,e,s,n){if(50<oa)throw oa=0,bu=null,Error(F(185));Ga(t,s,n),(!(ye&2)||t!==ot)&&(t===ot&&(!(ye&2)&&(lc|=s),tt===4&&yn(t,dt)),Ft(t,n),s===1&&ye===0&&!(e.mode&1)&&(fi=Ke()+500,rc&&Hn()))}function Ft(t,e){var s=t.callbackNode;s1(t,e);var n=vl(t,t===ot?dt:0);if(n===0)s!==null&&Xm(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&Xm(s),e===1)t.tag===0?tj(Wp.bind(null,t)):ly(Wp.bind(null,t)),Q1(function(){!(ye&6)&&Hn()}),s=null;else{switch(Ix(n)){case 1:s=ih;break;case 4:s=Dx;break;case 16:s=yl;break;case 536870912:s=Ox;break;default:s=yl}s=av(s,Zy.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function Zy(t,e){if(sl=-1,nl=0,ye&6)throw Error(F(327));var s=t.callbackNode;if(ri()&&t.callbackNode!==s)return null;var n=vl(t,t===ot?dt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=Il(t,n);else{e=n;var r=ye;ye|=2;var i=tv();(ot!==t||dt!==e)&&(Vs=null,fi=Ke()+500,cr(t,e));do try{jj();break}catch(l){ev(t,l)}while(1);yh(),Dl.current=i,ye=r,Je!==null?e=0:(ot=null,dt=0,e=tt)}if(e!==0){if(e===2&&(r=Gd(t),r!==0&&(n=r,e=wu(t,r))),e===1)throw s=Ma,cr(t,0),yn(t,n),Ft(t,Ke()),s;if(e===6)yn(t,n);else{if(r=t.current.alternate,!(n&30)&&!bj(r)&&(e=Il(t,n),e===2&&(i=Gd(t),i!==0&&(n=i,e=wu(t,i))),e===1))throw s=Ma,cr(t,0),yn(t,n),Ft(t,Ke()),s;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(F(345));case 2:er(t,Tt,Vs);break;case 3:if(yn(t,n),(n&130023424)===n&&(e=Mh+500-Ke(),10<e)){if(vl(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){_t(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=tu(er.bind(null,t,Tt,Vs),e);break}er(t,Tt,Vs);break;case 4:if(yn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var o=31-ys(n);i=1<<o,o=e[o],o>r&&(r=o),n&=~i}if(n=r,n=Ke()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*vj(n/1960))-n,10<n){t.timeoutHandle=tu(er.bind(null,t,Tt,Vs),n);break}er(t,Tt,Vs);break;case 5:er(t,Tt,Vs);break;default:throw Error(F(329))}}}return Ft(t,Ke()),t.callbackNode===s?Zy.bind(null,t):null}function wu(t,e){var s=aa;return t.current.memoizedState.isDehydrated&&(cr(t,e).flags|=256),t=Il(t,e),t!==2&&(e=Tt,Tt=s,e!==null&&ju(e)),t}function ju(t){Tt===null?Tt=t:Tt.push.apply(Tt,t)}function bj(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var r=s[n],i=r.getSnapshot;r=r.value;try{if(!bs(i(),r))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function yn(t,e){for(e&=~Th,e&=~lc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-ys(e),n=1<<s;t[s]=-1,e&=~n}}function Wp(t){if(ye&6)throw Error(F(327));ri();var e=vl(t,0);if(!(e&1))return Ft(t,Ke()),null;var s=Il(t,e);if(t.tag!==0&&s===2){var n=Gd(t);n!==0&&(e=n,s=wu(t,n))}if(s===1)throw s=Ma,cr(t,0),yn(t,e),Ft(t,Ke()),s;if(s===6)throw Error(F(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,er(t,Tt,Vs),Ft(t,Ke()),null}function Dh(t,e){var s=ye;ye|=1;try{return t(e)}finally{ye=s,ye===0&&(fi=Ke()+500,rc&&Hn())}}function xr(t){wn!==null&&wn.tag===0&&!(ye&6)&&ri();var e=ye;ye|=1;var s=os.transition,n=_e;try{if(os.transition=null,_e=1,t)return t()}finally{_e=n,os.transition=s,ye=e,!(ye&6)&&Hn()}}function Oh(){Wt=Xr.current,De(Xr)}function cr(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,J1(s)),Je!==null)for(s=Je.return;s!==null;){var n=s;switch(ph(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&_l();break;case 3:ui(),De(Rt),De(wt),_h();break;case 5:Nh(n);break;case 4:ui();break;case 13:De(Ue);break;case 19:De(Ue);break;case 10:vh(n.type._context);break;case 22:case 23:Oh()}s=s.return}if(ot=t,Je=t=On(t.current,null),dt=Wt=e,tt=0,Ma=null,Th=lc=gr=0,Tt=aa=null,ar!==null){for(e=0;e<ar.length;e++)if(s=ar[e],n=s.interleaved,n!==null){s.interleaved=null;var r=n.next,i=s.pending;if(i!==null){var o=i.next;i.next=r,n.next=o}s.pending=n}ar=null}return t}function ev(t,e){do{var s=Je;try{if(yh(),Zo.current=Ml,Tl){for(var n=Be.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Tl=!1}if(pr=0,at=et=Be=null,ra=!1,Aa=0,Lh.current=null,s===null||s.return===null){tt=1,Ma=e,Je=null;break}e:{var i=t,o=s.return,l=s,c=e;if(e=dt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Lp(o);if(m!==null){m.flags&=-257,Tp(m,o,l,i,e),m.mode&1&&Ap(i,d,e),e=m,c=d;var p=e.updateQueue;if(p===null){var v=new Set;v.add(c),e.updateQueue=v}else p.add(c);break e}else{if(!(e&1)){Ap(i,d,e),Rh();break e}c=Error(F(426))}}else if(Re&&l.mode&1){var x=Lp(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Tp(x,o,l,i,e),gh(hi(c,l));break e}}i=c=hi(c,l),tt!==4&&(tt=2),aa===null?aa=[i]:aa.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var g=Iy(i,c,e);_p(i,g);break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(Mn===null||!Mn.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var k=Fy(i,l,e);_p(i,k);break e}}i=i.return}while(i!==null)}nv(s)}catch(j){e=j,Je===s&&s!==null&&(Je=s=s.return);continue}break}while(1)}function tv(){var t=Dl.current;return Dl.current=Ml,t===null?Ml:t}function Rh(){(tt===0||tt===3||tt===2)&&(tt=4),ot===null||!(gr&268435455)&&!(lc&268435455)||yn(ot,dt)}function Il(t,e){var s=ye;ye|=2;var n=tv();(ot!==t||dt!==e)&&(Vs=null,cr(t,e));do try{wj();break}catch(r){ev(t,r)}while(1);if(yh(),ye=s,Dl.current=n,Je!==null)throw Error(F(261));return ot=null,dt=0,tt}function wj(){for(;Je!==null;)sv(Je)}function jj(){for(;Je!==null&&!Gw();)sv(Je)}function sv(t){var e=iv(t.alternate,t,Wt);t.memoizedProps=t.pendingProps,e===null?nv(t):Je=e,Lh.current=null}function nv(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=pj(s,e),s!==null){s.flags&=32767,Je=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{tt=6,Je=null;return}}else if(s=mj(s,e,Wt),s!==null){Je=s;return}if(e=e.sibling,e!==null){Je=e;return}Je=e=t}while(e!==null);tt===0&&(tt=5)}function er(t,e,s){var n=_e,r=os.transition;try{os.transition=null,_e=1,Nj(t,e,s,n)}finally{os.transition=r,_e=n}return null}function Nj(t,e,s,n){do ri();while(wn!==null);if(ye&6)throw Error(F(327));s=t.finishedWork;var r=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(F(177));t.callbackNode=null,t.callbackPriority=0;var i=s.lanes|s.childLanes;if(n1(t,i),t===ot&&(Je=ot=null,dt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||bo||(bo=!0,av(yl,function(){return ri(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=os.transition,os.transition=null;var o=_e;_e=1;var l=ye;ye|=4,Lh.current=null,xj(t,s),Qy(s,t),H1(Zd),bl=!!Xd,Zd=Xd=null,t.current=s,yj(s),Kw(),ye=l,_e=o,os.transition=i}else t.current=s;if(bo&&(bo=!1,wn=t,Rl=r),i=t.pendingLanes,i===0&&(Mn=null),Qw(s.stateNode),Ft(t,Ke()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)r=e[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(Ol)throw Ol=!1,t=vu,vu=null,t;return Rl&1&&t.tag!==0&&ri(),i=t.pendingLanes,i&1?t===bu?oa++:(oa=0,bu=t):oa=0,Hn(),null}function ri(){if(wn!==null){var t=Ix(Rl),e=os.transition,s=_e;try{if(os.transition=null,_e=16>t?16:t,wn===null)var n=!1;else{if(t=wn,wn=null,Rl=0,ye&6)throw Error(F(331));var r=ye;for(ye|=4,J=t.current;J!==null;){var i=J,o=i.child;if(J.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(J=d;J!==null;){var u=J;switch(u.tag){case 0:case 11:case 15:ia(8,u,i)}var h=u.child;if(h!==null)h.return=u,J=h;else for(;J!==null;){u=J;var f=u.sibling,m=u.return;if(Ky(u),u===d){J=null;break}if(f!==null){f.return=m,J=f;break}J=m}}}var p=i.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var x=v.sibling;v.sibling=null,v=x}while(v!==null)}}J=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,J=o;else e:for(;J!==null;){if(i=J,i.flags&2048)switch(i.tag){case 0:case 11:case 15:ia(9,i,i.return)}var g=i.sibling;if(g!==null){g.return=i.return,J=g;break e}J=i.return}}var y=t.current;for(J=y;J!==null;){o=J;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,J=b;else e:for(o=y;J!==null;){if(l=J,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:oc(9,l)}}catch(j){Ve(l,l.return,j)}if(l===o){J=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,J=k;break e}J=l.return}}if(ye=r,Hn(),Ts&&typeof Ts.onPostCommitFiberRoot=="function")try{Ts.onPostCommitFiberRoot(Zl,t)}catch{}n=!0}return n}finally{_e=s,os.transition=e}}return!1}function Vp(t,e,s){e=hi(s,e),e=Iy(t,e,1),t=Tn(t,e,1),e=_t(),t!==null&&(Ga(t,1,e),Ft(t,e))}function Ve(t,e,s){if(t.tag===3)Vp(t,t,s);else for(;e!==null;){if(e.tag===3){Vp(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(Mn===null||!Mn.has(n))){t=hi(s,t),t=Fy(e,t,1),e=Tn(e,t,1),t=_t(),e!==null&&(Ga(e,1,t),Ft(e,t));break}}e=e.return}}function _j(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=_t(),t.pingedLanes|=t.suspendedLanes&s,ot===t&&(dt&s)===s&&(tt===4||tt===3&&(dt&130023424)===dt&&500>Ke()-Mh?cr(t,0):Th|=s),Ft(t,e)}function rv(t,e){e===0&&(t.mode&1?(e=co,co<<=1,!(co&130023424)&&(co=4194304)):e=1);var s=_t();t=rn(t,e),t!==null&&(Ga(t,e,s),Ft(t,s))}function kj(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),rv(t,s)}function Sj(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(F(314))}n!==null&&n.delete(e),rv(t,s)}var iv;iv=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||Rt.current)Ot=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return Ot=!1,fj(t,e,s);Ot=!!(t.flags&131072)}else Ot=!1,Re&&e.flags&1048576&&cy(e,Cl,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;tl(t,e),t=e.pendingProps;var r=li(e,wt.current);ni(e,s),r=Sh(null,e,n,t,r,s);var i=Ch();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,It(n)?(i=!0,kl(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,wh(e),r.updater=ac,e.stateNode=r,r._reactInternals=e,lu(e,n,t,s),e=uu(null,e,n,!0,i,s)):(e.tag=0,Re&&i&&mh(e),Nt(null,e,r,s),e=e.child),e;case 16:n=e.elementType;e:{switch(tl(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=Ej(n),t=fs(n,t),r){case 0:e=du(null,e,n,t,s);break e;case 1:e=Op(null,e,n,t,s);break e;case 11:e=Mp(null,e,n,t,s);break e;case 14:e=Dp(null,e,n,fs(n.type,t),s);break e}throw Error(F(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:fs(n,r),du(t,e,n,r,s);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:fs(n,r),Op(t,e,n,r,s);case 3:e:{if(By(e),t===null)throw Error(F(387));n=e.pendingProps,i=e.memoizedState,r=i.element,py(t,e),Al(e,n,null,s);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=hi(Error(F(423)),e),e=Rp(t,e,n,s,r);break e}else if(n!==r){r=hi(Error(F(424)),e),e=Rp(t,e,n,s,r);break e}else for(qt=Ln(e.stateNode.containerInfo.firstChild),Yt=e,Re=!0,xs=null,s=fy(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ci(),n===r){e=an(t,e,s);break e}Nt(t,e,n,s)}e=e.child}return e;case 5:return gy(e),t===null&&iu(e),n=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,eu(n,r)?o=null:i!==null&&eu(n,i)&&(e.flags|=32),Uy(t,e),Nt(t,e,o,s),e.child;case 6:return t===null&&iu(e),null;case 13:return Hy(t,e,s);case 4:return jh(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=di(e,null,n,s):Nt(t,e,n,s),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:fs(n,r),Mp(t,e,n,r,s);case 7:return Nt(t,e,e.pendingProps,s),e.child;case 8:return Nt(t,e,e.pendingProps.children,s),e.child;case 12:return Nt(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,Pe(El,n._currentValue),n._currentValue=o,i!==null)if(bs(i.value,o)){if(i.children===r.children&&!Rt.current){e=an(t,e,s);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=Zs(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),au(i.return,s,e),l.lanes|=s;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(F(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),au(o,s,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}Nt(t,e,r.children,s),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,ni(e,s),r=cs(r),n=n(r),e.flags|=1,Nt(t,e,n,s),e.child;case 14:return n=e.type,r=fs(n,e.pendingProps),r=fs(n.type,r),Dp(t,e,n,r,s);case 15:return $y(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:fs(n,r),tl(t,e),e.tag=1,It(n)?(t=!0,kl(e)):t=!1,ni(e,s),Ry(e,n,r),lu(e,n,r,s),uu(null,e,n,!0,t,s);case 19:return Wy(t,e,s);case 22:return zy(t,e,s)}throw Error(F(156,e.tag))};function av(t,e){return Mx(t,e)}function Cj(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(t,e,s,n){return new Cj(t,e,s,n)}function Ih(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Ej(t){if(typeof t=="function")return Ih(t)?1:0;if(t!=null){if(t=t.$$typeof,t===sh)return 11;if(t===nh)return 14}return 2}function On(t,e){var s=t.alternate;return s===null?(s=is(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function rl(t,e,s,n,r,i){var o=2;if(n=t,typeof t=="function")Ih(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Br:return dr(s.children,r,i,e);case th:o=8,r|=8;break;case Td:return t=is(12,s,e,r|2),t.elementType=Td,t.lanes=i,t;case Md:return t=is(13,s,e,r),t.elementType=Md,t.lanes=i,t;case Dd:return t=is(19,s,e,r),t.elementType=Dd,t.lanes=i,t;case gx:return cc(s,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case mx:o=10;break e;case px:o=9;break e;case sh:o=11;break e;case nh:o=14;break e;case mn:o=16,n=null;break e}throw Error(F(130,t==null?t:typeof t,""))}return e=is(o,s,e,r),e.elementType=t,e.type=n,e.lanes=i,e}function dr(t,e,s,n){return t=is(7,t,n,e),t.lanes=s,t}function cc(t,e,s,n){return t=is(22,t,n,e),t.elementType=gx,t.lanes=s,t.stateNode={isHidden:!1},t}function rd(t,e,s){return t=is(6,t,null,e),t.lanes=s,t}function id(t,e,s){return e=is(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Pj(t,e,s,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=$c(0),this.expirationTimes=$c(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=$c(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Fh(t,e,s,n,r,i,o,l,c){return t=new Pj(t,e,s,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=is(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},wh(i),t}function Aj(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Ur,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function ov(t){if(!t)return Fn;t=t._reactInternals;e:{if(jr(t)!==t||t.tag!==1)throw Error(F(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(It(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(F(171))}if(t.tag===1){var s=t.type;if(It(s))return oy(t,s,e)}return e}function lv(t,e,s,n,r,i,o,l,c){return t=Fh(s,n,!0,t,r,i,o,l,c),t.context=ov(null),s=t.current,n=_t(),r=Dn(s),i=Zs(n,r),i.callback=e??null,Tn(s,i,r),t.current.lanes=r,Ga(t,r,n),Ft(t,n),t}function dc(t,e,s,n){var r=e.current,i=_t(),o=Dn(r);return s=ov(s),e.context===null?e.context=s:e.pendingContext=s,e=Zs(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Tn(r,e,o),t!==null&&(vs(t,r,o,i),Xo(t,r,o)),o}function Fl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function qp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function $h(t,e){qp(t,e),(t=t.alternate)&&qp(t,e)}function Lj(){return null}var cv=typeof reportError=="function"?reportError:function(t){console.error(t)};function zh(t){this._internalRoot=t}uc.prototype.render=zh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(F(409));dc(t,e,null,null)};uc.prototype.unmount=zh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;xr(function(){dc(null,t,null,null)}),e[nn]=null}};function uc(t){this._internalRoot=t}uc.prototype.unstable_scheduleHydration=function(t){if(t){var e=zx();t={blockedOn:null,target:t,priority:e};for(var s=0;s<xn.length&&e!==0&&e<xn[s].priority;s++);xn.splice(s,0,t),s===0&&Bx(t)}};function Uh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function hc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Gp(){}function Tj(t,e,s,n,r){if(r){if(typeof n=="function"){var i=n;n=function(){var d=Fl(o);i.call(d)}}var o=lv(e,n,t,0,null,!1,!1,"",Gp);return t._reactRootContainer=o,t[nn]=o.current,ka(t.nodeType===8?t.parentNode:t),xr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var d=Fl(c);l.call(d)}}var c=Fh(t,0,!1,null,null,!1,!1,"",Gp);return t._reactRootContainer=c,t[nn]=c.current,ka(t.nodeType===8?t.parentNode:t),xr(function(){dc(e,c,s,n)}),c}function fc(t,e,s,n,r){var i=s._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var l=r;r=function(){var c=Fl(o);l.call(c)}}dc(e,o,t,r)}else o=Tj(s,e,t,r,n);return Fl(o)}Fx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=Gi(e.pendingLanes);s!==0&&(ah(e,s|1),Ft(e,Ke()),!(ye&6)&&(fi=Ke()+500,Hn()))}break;case 13:xr(function(){var n=rn(t,1);if(n!==null){var r=_t();vs(n,t,1,r)}}),$h(t,1)}};oh=function(t){if(t.tag===13){var e=rn(t,134217728);if(e!==null){var s=_t();vs(e,t,134217728,s)}$h(t,134217728)}};$x=function(t){if(t.tag===13){var e=Dn(t),s=rn(t,e);if(s!==null){var n=_t();vs(s,t,e,n)}$h(t,e)}};zx=function(){return _e};Ux=function(t,e){var s=_e;try{return _e=t,e()}finally{_e=s}};Wd=function(t,e,s){switch(e){case"input":if(Id(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var r=nc(n);if(!r)throw Error(F(90));yx(n),Id(n,r)}}}break;case"textarea":bx(t,s);break;case"select":e=s.value,e!=null&&Zr(t,!!s.multiple,e,!1)}};Cx=Dh;Ex=xr;var Mj={usingClientEntryPoint:!1,Events:[Ya,qr,nc,kx,Sx,Dh]},Oi={findFiberByHostInstance:ir,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Dj={bundleType:Oi.bundleType,version:Oi.version,rendererPackageName:Oi.rendererPackageName,rendererConfig:Oi.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:ln.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Lx(t),t===null?null:t.stateNode},findFiberByHostInstance:Oi.findFiberByHostInstance||Lj,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var wo=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!wo.isDisabled&&wo.supportsFiber)try{Zl=wo.inject(Dj),Ts=wo}catch{}}Xt.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Mj;Xt.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Uh(e))throw Error(F(200));return Aj(t,e,null,s)};Xt.createRoot=function(t,e){if(!Uh(t))throw Error(F(299));var s=!1,n="",r=cv;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Fh(t,1,!1,null,null,s,!1,n,r),t[nn]=e.current,ka(t.nodeType===8?t.parentNode:t),new zh(e)};Xt.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(F(188)):(t=Object.keys(t).join(","),Error(F(268,t)));return t=Lx(e),t=t===null?null:t.stateNode,t};Xt.flushSync=function(t){return xr(t)};Xt.hydrate=function(t,e,s){if(!hc(e))throw Error(F(200));return fc(null,t,e,!0,s)};Xt.hydrateRoot=function(t,e,s){if(!Uh(t))throw Error(F(405));var n=s!=null&&s.hydratedSources||null,r=!1,i="",o=cv;if(s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=lv(e,null,t,1,s??null,r,!1,i,o),t[nn]=e.current,ka(t),n)for(t=0;t<n.length;t++)s=n[t],r=s._getVersion,r=r(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,r]:e.mutableSourceEagerHydrationData.push(s,r);return new uc(e)};Xt.render=function(t,e,s){if(!hc(e))throw Error(F(200));return fc(null,t,e,!1,s)};Xt.unmountComponentAtNode=function(t){if(!hc(t))throw Error(F(40));return t._reactRootContainer?(xr(function(){fc(null,null,t,!1,function(){t._reactRootContainer=null,t[nn]=null})}),!0):!1};Xt.unstable_batchedUpdates=Dh;Xt.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!hc(s))throw Error(F(200));if(t==null||t._reactInternals===void 0)throw Error(F(38));return fc(t,e,s,!1,n)};Xt.version="18.3.1-next-f1338f8080-20240426";function dv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(dv)}catch(t){console.error(t)}}dv(),dx.exports=Xt;var Oj=dx.exports,Kp=Oj;Ad.createRoot=Kp.createRoot,Ad.hydrateRoot=Kp.hydrateRoot;const Rj="modulepreload",Ij=function(t){return"/"+t},Yp={},Nr=function(e,s,n){if(!s||s.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(s.map(i=>{if(i=Ij(i),i in Yp)return;Yp[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let u=r.length-1;u>=0;u--){const h=r[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":Rj,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var Bh={};Object.defineProperty(Bh,"__esModule",{value:!0});Bh.parse=Wj;Bh.serialize=Vj;const Fj=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,$j=/^[\u0021-\u003A\u003C-\u007E]*$/,zj=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,Uj=/^[\u0020-\u003A\u003D-\u007E]*$/,Bj=Object.prototype.toString,Hj=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function Wj(t,e){const s=new Hj,n=t.length;if(n<2)return s;const r=(e==null?void 0:e.decode)||qj;let i=0;do{const o=t.indexOf("=",i);if(o===-1)break;const l=t.indexOf(";",i),c=l===-1?n:l;if(o>c){i=t.lastIndexOf(";",o-1)+1;continue}const d=Jp(t,i,o),u=Qp(t,o,d),h=t.slice(d,u);if(s[h]===void 0){let f=Jp(t,o+1,c),m=Qp(t,c,f);const p=r(t.slice(f,m));s[h]=p}i=c+1}while(i<n);return s}function Jp(t,e,s){do{const n=t.charCodeAt(e);if(n!==32&&n!==9)return e}while(++e<s);return s}function Qp(t,e,s){for(;e>s;){const n=t.charCodeAt(--e);if(n!==32&&n!==9)return e+1}return s}function Vj(t,e,s){const n=(s==null?void 0:s.encode)||encodeURIComponent;if(!Fj.test(t))throw new TypeError(`argument name is invalid: ${t}`);const r=n(e);if(!$j.test(r))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+r;if(!s)return i;if(s.maxAge!==void 0){if(!Number.isInteger(s.maxAge))throw new TypeError(`option maxAge is invalid: ${s.maxAge}`);i+="; Max-Age="+s.maxAge}if(s.domain){if(!zj.test(s.domain))throw new TypeError(`option domain is invalid: ${s.domain}`);i+="; Domain="+s.domain}if(s.path){if(!Uj.test(s.path))throw new TypeError(`option path is invalid: ${s.path}`);i+="; Path="+s.path}if(s.expires){if(!Gj(s.expires)||!Number.isFinite(s.expires.valueOf()))throw new TypeError(`option expires is invalid: ${s.expires}`);i+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.partitioned&&(i+="; Partitioned"),s.priority)switch(typeof s.priority=="string"?s.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${s.priority}`)}if(s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${s.sameSite}`)}return i}function qj(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function Gj(t){return Bj.call(t)==="[object Date]"}var Xp="popstate";function Kj(t={}){function e(n,r){let{pathname:i,search:o,hash:l}=n.location;return Nu("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function s(n,r){return typeof r=="string"?r:Da(r)}return Jj(e,s,null,t)}function Fe(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function ws(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function Yj(){return Math.random().toString(36).substring(2,10)}function Zp(t,e){return{usr:t.state,key:t.key,idx:e}}function Nu(t,e,s=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?wi(e):e,state:s,key:e&&e.key||n||Yj()}}function Da({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function wi(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function Jj(t,e,s,n={}){let{window:r=document.defaultView,v5Compat:i=!1}=n,o=r.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let x=u(),g=x==null?null:x-d;d=x,c&&c({action:l,location:v.location,delta:g})}function f(x,g){l="PUSH";let y=Nu(v.location,x,g);s&&s(y,x),d=u()+1;let b=Zp(y,d),k=v.createHref(y);try{o.pushState(b,"",k)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;r.location.assign(k)}i&&c&&c({action:l,location:v.location,delta:1})}function m(x,g){l="REPLACE";let y=Nu(v.location,x,g);s&&s(y,x),d=u();let b=Zp(y,d),k=v.createHref(y);o.replaceState(b,"",k),i&&c&&c({action:l,location:v.location,delta:0})}function p(x){return Qj(x)}let v={get action(){return l},get location(){return t(r,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(Xp,h),c=x,()=>{r.removeEventListener(Xp,h),c=null}},createHref(x){return e(r,x)},createURL:p,encodeLocation(x){let g=p(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:m,go(x){return o.go(x)}};return v}function Qj(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Fe(s,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:Da(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=s+n),new URL(n,s)}function uv(t,e,s="/"){return Xj(t,e,s,!1)}function Xj(t,e,s,n){let r=typeof e=="string"?wi(e):e,i=on(r.pathname||"/",s);if(i==null)return null;let o=hv(t);Zj(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=dN(i);l=lN(o[c],d,n)}return l}function hv(t,e=[],s=[],n=""){let r=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Fe(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let d=en([n,c.relativePath]),u=s.concat(c);i.children&&i.children.length>0&&(Fe(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),hv(i.children,e,u,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:aN(d,i.index),routesMeta:u})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,o);else for(let c of fv(i.path))r(i,o,c)}),e}function fv(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,r=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let o=fv(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function Zj(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:oN(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}var eN=/^:[\w-]+$/,tN=3,sN=2,nN=1,rN=10,iN=-2,e0=t=>t==="*";function aN(t,e){let s=t.split("/"),n=s.length;return s.some(e0)&&(n+=iN),e&&(n+=sN),s.filter(r=>!e0(r)).reduce((r,i)=>r+(eN.test(i)?tN:i===""?nN:rN),n)}function oN(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function lN(t,e,s=!1){let{routesMeta:n}=t,r={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=$l({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&s&&!n[n.length-1].route.index&&(h=$l({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:en([i,h.pathname]),pathnameBase:mN(en([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=en([i,h.pathnameBase]))}return o}function $l(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=cN(t.path,t.caseSensitive,t.end),r=e.match(s);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((d,{paramName:u,isOptional:h},f)=>{if(u==="*"){let p=l[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const m=l[f];return h&&!m?d[u]=void 0:d[u]=(m||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function cN(t,e=!1,s=!0){ws(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function dN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return ws(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function on(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function uN(t,e="/"){let{pathname:s,search:n="",hash:r=""}=typeof t=="string"?wi(t):t;return{pathname:s?s.startsWith("/")?s:hN(s,e):e,search:pN(n),hash:gN(r)}}function hN(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?s.length>1&&s.pop():r!=="."&&s.push(r)}),s.length>1?s.join("/"):"/"}function ad(t,e,s,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function fN(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Hh(t){let e=fN(t);return e.map((s,n)=>n===e.length-1?s.pathname:s.pathnameBase)}function Wh(t,e,s,n=!1){let r;typeof t=="string"?r=wi(t):(r={...t},Fe(!r.pathname||!r.pathname.includes("?"),ad("?","pathname","search",r)),Fe(!r.pathname||!r.pathname.includes("#"),ad("#","pathname","hash",r)),Fe(!r.search||!r.search.includes("#"),ad("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=s;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=uN(r,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var en=t=>t.join("/").replace(/\/\/+/g,"/"),mN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),pN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,gN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function xN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var mv=["POST","PUT","PATCH","DELETE"];new Set(mv);var yN=["GET",...mv];new Set(yN);var ji=w.createContext(null);ji.displayName="DataRouter";var mc=w.createContext(null);mc.displayName="DataRouterState";var pv=w.createContext({isTransitioning:!1});pv.displayName="ViewTransition";var vN=w.createContext(new Map);vN.displayName="Fetchers";var bN=w.createContext(null);bN.displayName="Await";var js=w.createContext(null);js.displayName="Navigation";var Qa=w.createContext(null);Qa.displayName="Location";var Ns=w.createContext({outlet:null,matches:[],isDataRoute:!1});Ns.displayName="Route";var Vh=w.createContext(null);Vh.displayName="RouteError";function wN(t,{relative:e}={}){Fe(Ni(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=w.useContext(js),{hash:r,pathname:i,search:o}=Xa(t,{relative:e}),l=i;return s!=="/"&&(l=i==="/"?s:en([s,i])),n.createHref({pathname:l,search:o,hash:r})}function Ni(){return w.useContext(Qa)!=null}function $t(){return Fe(Ni(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Qa).location}var gv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function xv(t){w.useContext(js).static||w.useLayoutEffect(t)}function ft(){let{isDataRoute:t}=w.useContext(Ns);return t?DN():jN()}function jN(){Fe(Ni(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(ji),{basename:e,navigator:s}=w.useContext(js),{matches:n}=w.useContext(Ns),{pathname:r}=$t(),i=JSON.stringify(Hh(n)),o=w.useRef(!1);return xv(()=>{o.current=!0}),w.useCallback((c,d={})=>{if(ws(o.current,gv),!o.current)return;if(typeof c=="number"){s.go(c);return}let u=Wh(c,JSON.parse(i),r,d.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:en([e,u.pathname])),(d.replace?s.replace:s.push)(u,d.state,d)},[e,s,i,r,t])}w.createContext(null);function yv(){let{matches:t}=w.useContext(Ns),e=t[t.length-1];return e?e.params:{}}function Xa(t,{relative:e}={}){let{matches:s}=w.useContext(Ns),{pathname:n}=$t(),r=JSON.stringify(Hh(s));return w.useMemo(()=>Wh(t,JSON.parse(r),n,e==="path"),[t,r,n,e])}function NN(t,e){return vv(t,e)}function vv(t,e,s,n){var g;Fe(Ni(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=w.useContext(js),{matches:i}=w.useContext(Ns),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",u=o&&o.route;{let y=u&&u.path||"";bv(c,!u||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let h=$t(),f;if(e){let y=typeof e=="string"?wi(e):e;Fe(d==="/"||((g=y.pathname)==null?void 0:g.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${y.pathname}" was given in the \`location\` prop.`),f=y}else f=h;let m=f.pathname||"/",p=m;if(d!=="/"){let y=d.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=uv(t,{pathname:p});ws(u||v!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),ws(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=EN(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:en([d,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:en([d,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,s,n);return e&&x?w.createElement(Qa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},x):x}function _N(){let t=MN(),e=xN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=w.createElement(w.Fragment,null,w.createElement("p",null,"💿 Hey developer 👋"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:i},"ErrorBoundary")," or"," ",w.createElement("code",{style:i},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),s?w.createElement("pre",{style:r},s):null,o)}var kN=w.createElement(_N,null),SN=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?w.createElement(Ns.Provider,{value:this.props.routeContext},w.createElement(Vh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function CN({routeContext:t,match:e,children:s}){let n=w.useContext(ji);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(Ns.Provider,{value:t},s)}function EN(t,e=[],s=null,n=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let r=t,i=s==null?void 0:s.errors;if(i!=null){let c=r.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);Fe(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let o=!1,l=-1;if(s)for(let c=0;c<r.length;c++){let d=r[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:u,errors:h}=s,f=d.route.loader&&!u.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||f){o=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((c,d,u)=>{let h,f=!1,m=null,p=null;s&&(h=i&&d.route.id?i[d.route.id]:void 0,m=d.route.errorElement||kN,o&&(l<0&&u===0?(bv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,p=null):l===u&&(f=!0,p=d.route.hydrateFallbackElement||null)));let v=e.concat(r.slice(0,u+1)),x=()=>{let g;return h?g=m:f?g=p:d.route.Component?g=w.createElement(d.route.Component,null):d.route.element?g=d.route.element:g=c,w.createElement(CN,{match:d,routeContext:{outlet:c,matches:v,isDataRoute:s!=null},children:g})};return s&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?w.createElement(SN,{location:s.location,revalidation:s.revalidation,component:m,error:h,children:x(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):x()},null)}function qh(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function PN(t){let e=w.useContext(ji);return Fe(e,qh(t)),e}function AN(t){let e=w.useContext(mc);return Fe(e,qh(t)),e}function LN(t){let e=w.useContext(Ns);return Fe(e,qh(t)),e}function Gh(t){let e=LN(t),s=e.matches[e.matches.length-1];return Fe(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function TN(){return Gh("useRouteId")}function MN(){var n;let t=w.useContext(Vh),e=AN("useRouteError"),s=Gh("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[s]}function DN(){let{router:t}=PN("useNavigate"),e=Gh("useNavigate"),s=w.useRef(!1);return xv(()=>{s.current=!0}),w.useCallback(async(r,i={})=>{ws(s.current,gv),s.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...i}))},[t,e])}var t0={};function bv(t,e,s){!e&&!t0[t]&&(t0[t]=!0,ws(!1,s))}w.memo(ON);function ON({routes:t,future:e,state:s}){return vv(t,void 0,s,e)}function _u({to:t,replace:e,state:s,relative:n}){Fe(Ni(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=w.useContext(js);ws(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=w.useContext(Ns),{pathname:o}=$t(),l=ft(),c=Wh(t,Hh(i),o,n==="path"),d=JSON.stringify(c);return w.useEffect(()=>{l(JSON.parse(d),{replace:e,state:s,relative:n})},[l,d,n,e,s]),null}function Bt(t){Fe(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function RN({basename:t="/",children:e=null,location:s,navigationType:n="POP",navigator:r,static:i=!1}){Fe(!Ni(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=w.useMemo(()=>({basename:o,navigator:r,static:i,future:{}}),[o,r,i]);typeof s=="string"&&(s=wi(s));let{pathname:c="/",search:d="",hash:u="",state:h=null,key:f="default"}=s,m=w.useMemo(()=>{let p=on(c,o);return p==null?null:{location:{pathname:p,search:d,hash:u,state:h,key:f},navigationType:n}},[o,c,d,u,h,f,n]);return ws(m!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:w.createElement(js.Provider,{value:l},w.createElement(Qa.Provider,{children:e,value:m}))}function IN({children:t,location:e}){return NN(ku(t),e)}function ku(t,e=[]){let s=[];return w.Children.forEach(t,(n,r)=>{if(!w.isValidElement(n))return;let i=[...e,r];if(n.type===w.Fragment){s.push.apply(s,ku(n.props.children,i));return}Fe(n.type===Bt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Fe(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=ku(n.props.children,i)),s.push(o)}),s}var il="get",al="application/x-www-form-urlencoded";function pc(t){return t!=null&&typeof t.tagName=="string"}function FN(t){return pc(t)&&t.tagName.toLowerCase()==="button"}function $N(t){return pc(t)&&t.tagName.toLowerCase()==="form"}function zN(t){return pc(t)&&t.tagName.toLowerCase()==="input"}function UN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function BN(t,e){return t.button===0&&(!e||e==="_self")&&!UN(t)}var jo=null;function HN(){if(jo===null)try{new FormData(document.createElement("form"),0),jo=!1}catch{jo=!0}return jo}var WN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function od(t){return t!=null&&!WN.has(t)?(ws(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${al}"`),null):t}function VN(t,e){let s,n,r,i,o;if($N(t)){let l=t.getAttribute("action");n=l?on(l,e):null,s=t.getAttribute("method")||il,r=od(t.getAttribute("enctype"))||al,i=new FormData(t)}else if(FN(t)||zN(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?on(c,e):null,s=t.getAttribute("formmethod")||l.getAttribute("method")||il,r=od(t.getAttribute("formenctype"))||od(l.getAttribute("enctype"))||al,i=new FormData(l,t),!HN()){let{name:d,type:u,value:h}=t;if(u==="image"){let f=d?`${d}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else d&&i.append(d,h)}}else{if(pc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=il,n=null,r=al,o=t}return i&&r==="text/plain"&&(o=i,i=void 0),{action:n,method:s.toLowerCase(),encType:r,formData:i,body:o}}function Kh(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function qN(t,e){if(t.id in e)return e[t.id];try{let s=await Nr(()=>import(t.module),[]);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function GN(t){return t!=null&&typeof t.page=="string"}function KN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function YN(t,e,s){let n=await Promise.all(t.map(async r=>{let i=e.routes[r.route.id];if(i){let o=await qN(i,s);return o.links?o.links():[]}return[]}));return ZN(n.flat(1).filter(KN).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function s0(t,e,s,n,r,i){let o=(c,d)=>s[d]?c.route.id!==s[d].route.id:!0,l=(c,d)=>{var u;return s[d].pathname!==c.pathname||((u=s[d].route.path)==null?void 0:u.endsWith("*"))&&s[d].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?e.filter((c,d)=>{var h;let u=n.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((h=s[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function JN(t,e,{includeHydrateFallback:s}={}){return QN(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),s&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function QN(t){return[...new Set(t)]}function XN(t){let e={},s=Object.keys(t).sort();for(let n of s)e[n]=t[n];return e}function ZN(t,e){let s=new Set,n=new Set(e);return t.reduce((r,i)=>{if(e&&!GN(i)&&i.as==="script"&&i.href&&n.has(i.href))return r;let l=JSON.stringify(XN(i));return s.has(l)||(s.add(l),r.push({key:l,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var e_=new Set([100,101,204,205]);function t_(t,e){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname="_root.data":e&&on(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}function wv(){let t=w.useContext(ji);return Kh(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function s_(){let t=w.useContext(mc);return Kh(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Yh=w.createContext(void 0);Yh.displayName="FrameworkContext";function jv(){let t=w.useContext(Yh);return Kh(t,"You must render this element inside a <HydratedRouter> element"),t}function n_(t,e){let s=w.useContext(Yh),[n,r]=w.useState(!1),[i,o]=w.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=e,f=w.useRef(null);w.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let v=g=>{g.forEach(y=>{o(y.isIntersecting)})},x=new IntersectionObserver(v,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[t]),w.useEffect(()=>{if(n){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[n]);let m=()=>{r(!0)},p=()=>{r(!1),o(!1)};return s?t!=="intent"?[i,f,{}]:[i,f,{onFocus:Ri(l,m),onBlur:Ri(c,p),onMouseEnter:Ri(d,m),onMouseLeave:Ri(u,p),onTouchStart:Ri(h,m)}]:[!1,f,{}]}function Ri(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function r_({page:t,...e}){let{router:s}=wv(),n=w.useMemo(()=>uv(s.routes,t,s.basename),[s.routes,t,s.basename]);return n?w.createElement(a_,{page:t,matches:n,...e}):null}function i_(t){let{manifest:e,routeModules:s}=jv(),[n,r]=w.useState([]);return w.useEffect(()=>{let i=!1;return YN(t,e,s).then(o=>{i||r(o)}),()=>{i=!0}},[t,e,s]),n}function a_({page:t,matches:e,...s}){let n=$t(),{manifest:r,routeModules:i}=jv(),{basename:o}=wv(),{loaderData:l,matches:c}=s_(),d=w.useMemo(()=>s0(t,e,c,r,n,"data"),[t,e,c,r,n]),u=w.useMemo(()=>s0(t,e,c,r,n,"assets"),[t,e,c,r,n]),h=w.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let p=new Set,v=!1;if(e.forEach(g=>{var b;let y=r.routes[g.route.id];!y||!y.hasLoader||(!d.some(k=>k.route.id===g.route.id)&&g.route.id in l&&((b=i[g.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?v=!0:p.add(g.route.id))}),p.size===0)return[];let x=t_(t,o);return v&&p.size>0&&x.searchParams.set("_routes",e.filter(g=>p.has(g.route.id)).map(g=>g.route.id).join(",")),[x.pathname+x.search]},[o,l,n,r,d,e,t,i]),f=w.useMemo(()=>JN(u,r),[u,r]),m=i_(u);return w.createElement(w.Fragment,null,h.map(p=>w.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...s})),f.map(p=>w.createElement("link",{key:p,rel:"modulepreload",href:p,...s})),m.map(({key:p,link:v})=>w.createElement("link",{key:p,...v})))}function o_(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var Nv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Nv&&(window.__reactRouterVersion="7.6.2")}catch{}function l_({basename:t,children:e,window:s}){let n=w.useRef();n.current==null&&(n.current=Kj({window:s,v5Compat:!0}));let r=n.current,[i,o]=w.useState({action:r.action,location:r.location}),l=w.useCallback(c=>{w.startTransition(()=>o(c))},[o]);return w.useLayoutEffect(()=>r.listen(l),[r,l]),w.createElement(RN,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:r})}var _v=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,kv=w.forwardRef(function({onClick:e,discover:s="render",prefetch:n="none",relative:r,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,...f},m){let{basename:p}=w.useContext(js),v=typeof d=="string"&&_v.test(d),x,g=!1;if(typeof d=="string"&&v&&(x=d,Nv))try{let C=new URL(window.location.href),N=d.startsWith("//")?new URL(C.protocol+d):new URL(d),L=on(N.pathname,p);N.origin===C.origin&&L!=null?d=L+N.search+N.hash:g=!0}catch{ws(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=wN(d,{relative:r}),[b,k,j]=n_(n,f),S=h_(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:r,viewTransition:h});function E(C){e&&e(C),C.defaultPrevented||S(C)}let _=w.createElement("a",{...f,...j,href:x||y,onClick:g||i?e:E,ref:o_(m,k),target:c,"data-discover":!v&&s==="render"?"true":void 0});return b&&!v?w.createElement(w.Fragment,null,_,w.createElement(r_,{page:y})):_});kv.displayName="Link";var c_=w.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:n="",end:r=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let h=Xa(o,{relative:d.relative}),f=$t(),m=w.useContext(mc),{navigator:p,basename:v}=w.useContext(js),x=m!=null&&x_(h)&&l===!0,g=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,y=f.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(y=y.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase()),b&&v&&(b=on(b,v)||b);const k=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let j=y===g||!r&&y.startsWith(g)&&y.charAt(k)==="/",S=b!=null&&(b===g||!r&&b.startsWith(g)&&b.charAt(g.length)==="/"),E={isActive:j,isPending:S,isTransitioning:x},_=j?e:void 0,C;typeof n=="function"?C=n(E):C=[n,j?"active":null,S?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let N=typeof i=="function"?i(E):i;return w.createElement(kv,{...d,"aria-current":_,className:C,ref:u,style:N,to:o,viewTransition:l},typeof c=="function"?c(E):c)});c_.displayName="NavLink";var d_=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:n,replace:r,state:i,method:o=il,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,...f},m)=>{let p=p_(),v=g_(l,{relative:d}),x=o.toLowerCase()==="get"?"get":"post",g=typeof l=="string"&&_v.test(l),y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let k=b.nativeEvent.submitter,j=(k==null?void 0:k.getAttribute("formmethod"))||o;p(k||b.currentTarget,{fetcherKey:e,method:j,navigate:s,replace:r,state:i,relative:d,preventScrollReset:u,viewTransition:h})};return w.createElement("form",{ref:m,method:x,action:v,onSubmit:n?c:y,...f,"data-discover":!g&&t==="render"?"true":void 0})});d_.displayName="Form";function u_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Sv(t){let e=w.useContext(ji);return Fe(e,u_(t)),e}function h_(t,{target:e,replace:s,state:n,preventScrollReset:r,relative:i,viewTransition:o}={}){let l=ft(),c=$t(),d=Xa(t,{relative:i});return w.useCallback(u=>{if(BN(u,e)){u.preventDefault();let h=s!==void 0?s:Da(c)===Da(d);l(t,{replace:h,state:n,preventScrollReset:r,relative:i,viewTransition:o})}},[c,l,d,s,n,e,t,r,i,o])}var f_=0,m_=()=>`__${String(++f_)}__`;function p_(){let{router:t}=Sv("useSubmit"),{basename:e}=w.useContext(js),s=TN();return w.useCallback(async(n,r={})=>{let{action:i,method:o,encType:l,formData:c,body:d}=VN(n,e);if(r.navigate===!1){let u=r.fetcherKey||m_();await t.fetch(u,s,r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||o,formEncType:r.encType||l,flushSync:r.flushSync})}else await t.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||o,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:s,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,s])}function g_(t,{relative:e}={}){let{basename:s}=w.useContext(js),n=w.useContext(Ns);Fe(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),i={...Xa(t||".",{relative:e})},o=$t();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(i.pathname=i.pathname==="/"?s:en([s,i.pathname])),Da(i)}function x_(t,e={}){let s=w.useContext(pv);Fe(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Sv("useViewTransitionState"),r=Xa(t,{relative:e.relative});if(!s.isTransitioning)return!1;let i=on(s.currentLocation.pathname,n)||s.currentLocation.pathname,o=on(s.nextLocation.pathname,n)||s.nextLocation.pathname;return $l(r.pathname,o)!=null||$l(r.pathname,i)!=null}[...e_];const y_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Nr(()=>Promise.resolve().then(()=>_i),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class Jh extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class v_ extends Jh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class n0 extends Jh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class r0 extends Jh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Su;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Su||(Su={}));var b_=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class w_{constructor(e,{headers:s={},customFetch:n,region:r=Su.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=y_(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return b_(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=s;let l={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:u}).catch(v=>{throw new v_(v)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new n0(h);if(!h.ok)throw new r0(h);let m=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return m==="application/json"?p=yield h.json():m==="application/octet-stream"?p=yield h.blob():m==="text/event-stream"?p=h:m==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null,response:h}}catch(r){return{data:null,error:r,response:r instanceof r0||r instanceof n0?r.context:void 0}}})}}var Mt={},Qh={},gc={},Za={},xc={},yc={},j_=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},mi=j_();const N_=mi.fetch,Cv=mi.fetch.bind(mi),Ev=mi.Headers,__=mi.Request,k_=mi.Response,_i=Object.freeze(Object.defineProperty({__proto__:null,Headers:Ev,Request:__,Response:k_,default:Cv,fetch:N_},Symbol.toStringTag,{value:"Module"})),S_=cw(_i);var vc={};Object.defineProperty(vc,"__esModule",{value:!0});let C_=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};vc.default=C_;var Pv=ls&&ls.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yc,"__esModule",{value:!0});const E_=Pv(S_),P_=Pv(vc);let A_=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=E_.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,u=null,h=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const g=await i.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=g:u=JSON.parse(g))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&x&&x.length>1&&(h=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await i.text();try{d=JSON.parse(v),Array.isArray(d)&&i.status===404&&(u=[],d=null,f=200,m="OK")}catch{i.status===404&&v===""?(f=204,m="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new P_.default(d)}return{error:d,data:u,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,s)}returns(){return this}overrideTypes(){return this}};yc.default=A_;var L_=ls&&ls.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(xc,"__esModule",{value:!0});const T_=L_(yc);let M_=class extends T_.default{select(e){let s=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};xc.default=M_;var D_=ls&&ls.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Za,"__esModule",{value:!0});const O_=D_(xc);let R_=class extends O_.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};Za.default=R_;var I_=ls&&ls.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(gc,"__esModule",{value:!0});const Ii=I_(Za);let F_=class{constructor(e,{headers:s={},schema:n,fetch:r}){this.url=e,this.headers=s,this.schema=n,this.fetch=r}select(e,{head:s=!1,count:n}={}){const r=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Ii.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Ii.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Ii.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),this.headers.Prefer=r.join(","),new Ii.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Ii.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};gc.default=F_;var bc={},wc={};Object.defineProperty(wc,"__esModule",{value:!0});wc.version=void 0;wc.version="0.0.0-automated";Object.defineProperty(bc,"__esModule",{value:!0});bc.DEFAULT_HEADERS=void 0;const $_=wc;bc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${$_.version}`};var Av=ls&&ls.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Qh,"__esModule",{value:!0});const z_=Av(gc),U_=Av(Za),B_=bc;let H_=class Lv{constructor(e,{headers:s={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},B_.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=r}from(e){const s=new URL(`${this.url}/${e}`);return new z_.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Lv(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:r=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||r?(o=n?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=s);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new U_.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Qh.default=H_;var ki=ls&&ls.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Mt,"__esModule",{value:!0});Mt.PostgrestError=Mt.PostgrestBuilder=Mt.PostgrestTransformBuilder=Mt.PostgrestFilterBuilder=Mt.PostgrestQueryBuilder=Mt.PostgrestClient=void 0;const Tv=ki(Qh);Mt.PostgrestClient=Tv.default;const Mv=ki(gc);Mt.PostgrestQueryBuilder=Mv.default;const Dv=ki(Za);Mt.PostgrestFilterBuilder=Dv.default;const Ov=ki(xc);Mt.PostgrestTransformBuilder=Ov.default;const Rv=ki(yc);Mt.PostgrestBuilder=Rv.default;const Iv=ki(vc);Mt.PostgrestError=Iv.default;var W_=Mt.default={PostgrestClient:Tv.default,PostgrestQueryBuilder:Mv.default,PostgrestFilterBuilder:Dv.default,PostgrestTransformBuilder:Ov.default,PostgrestBuilder:Rv.default,PostgrestError:Iv.default};const{PostgrestClient:V_,PostgrestQueryBuilder:ZA,PostgrestFilterBuilder:eL,PostgrestTransformBuilder:tL,PostgrestBuilder:sL,PostgrestError:nL}=W_;function q_(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const G_=q_(),K_="2.11.15",Y_=`realtime-js/${K_}`,J_="1.0.0",Fv=1e4,Q_=1e3;var la;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(la||(la={}));var yt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(yt||(yt={}));var ps;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(ps||(ps={}));var Cu;(function(t){t.websocket="websocket"})(Cu||(Cu={}));var rr;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(rr||(rr={}));class X_{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+r));o=o+r;const c=n.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class $v{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ce;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ce||(Ce={}));const i0=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=Z_(o,t,e,r),i),{})},Z_=(t,e,s,n)=>{const r=e.find(l=>l.name===t),i=r==null?void 0:r.type,o=s[t];return i&&!n.includes(i)?zv(i,o):Eu(o)},zv=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return n2(e,s)}switch(t){case Ce.bool:return e2(e);case Ce.float4:case Ce.float8:case Ce.int2:case Ce.int4:case Ce.int8:case Ce.numeric:case Ce.oid:return t2(e);case Ce.json:case Ce.jsonb:return s2(e);case Ce.timestamp:return r2(e);case Ce.abstime:case Ce.date:case Ce.daterange:case Ce.int4range:case Ce.int8range:case Ce.money:case Ce.reltime:case Ce.text:case Ce.time:case Ce.timestamptz:case Ce.timetz:case Ce.tsrange:case Ce.tstzrange:return Eu(e);default:return Eu(e)}},Eu=t=>t,e2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},t2=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},s2=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},n2=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>zv(e,l))}return t},r2=t=>typeof t=="string"?t.replace(" ","T"):t,Uv=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class ld{constructor(e,s,n={},r=Fv){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var a0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(a0||(a0={}));class ca{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=ca.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=ca.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=ca.syncDiff(this.state,r,i,o),l())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const i=this.cloneDeep(e),o=this.transformState(s),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const f=u.map(x=>x.presence_ref),m=h.map(x=>x.presence_ref),p=u.filter(x=>m.indexOf(x.presence_ref)<0),v=h.filter(x=>f.indexOf(x.presence_ref)<0);p.length>0&&(l[d]=p),v.length>0&&(c[d]=v)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,r)}static syncDiff(e,s,n,r){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,r(l,d,c),d.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var o0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(o0||(o0={}));var l0;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(l0||(l0={}));var qs;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(qs||(qs={}));class Xh{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=yt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new ld(this,ps.join,this.params,this.timeout),this.rejoinTimer=new $v(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=yt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=yt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=yt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(ps.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new ca(this),this.broadcastEndpointURL=Uv(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==yt.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(qs.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(qs.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(qs.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,p=[];for(let v=0;v<m;v++){const x=f[v],{filter:{event:g,schema:y,table:b,filter:k}}=x,j=u&&u[v];if(j&&j.event===g&&j.schema===y&&j.table===b&&j.filter===k)p.push(Object.assign(Object.assign({},x),{id:j.id}));else{this.unsubscribe(),this.state=yt.errored,e==null||e(qs.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(qs.SUBSCRIBED);return}}).receive("error",u=>{this.state=yt.errored,e==null||e(qs.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(qs.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=d.body)===null||r===void 0?void 0:r.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=yt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(ps.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new ld(this,ps.leave,{},e),n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(i),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new ld(this,e,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=ps;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var p,v,x;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((x=(v=m.filter)===null||v===void 0?void 0:v.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var p,v,x,g,y,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const k=m.id,j=(p=m.filter)===null||p===void 0?void 0:p.event;return k&&((v=s.ids)===null||v===void 0?void 0:v.includes(k))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((x=s.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const k=(y=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return k==="*"||k===((b=s==null?void 0:s.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:v,table:x,commit_timestamp:g,type:y,errors:b}=p;f=Object.assign(Object.assign({},{schema:v,table:x,commit_timestamp:g,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(p))}m.callback(f,n)})}_isClosed(){return this.state===yt.closed}_isJoined(){return this.state===yt.joined}_isJoining(){return this.state===yt.joining}_isLeaving(){return this.state===yt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),i={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Xh.isEqual(r.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(ps.close,{},e)}_onError(e){this._on(ps.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=yt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=i0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=i0(e.columns,e.old_record)),s}}const c0=()=>{},i2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class a2{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Fv,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=c0,this.ref=0,this.logger=c0,this.conn=null,this.sendBuffer=[],this.serializer=new X_,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>Nr(()=>Promise.resolve().then(()=>_i),void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Cu.websocket}`,this.httpEndpoint=Uv(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new $v(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=G_),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:J_}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case la.connecting:return rr.Connecting;case la.open:return rr.Open;case la.closing:return rr.Closing;default:return rr.Closed}}isConnected(){return this.connectionState()===rr.Open}channel(e,s={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new Xh(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const r={access_token:s,version:Y_};s&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(ps.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(Q_,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:r,payload:i,ref:o}=s;n==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(ps.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([i2],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class Zh extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function it(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class o2 extends Zh{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Pu extends Zh{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var l2=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Bv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Nr(()=>Promise.resolve().then(()=>_i),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},c2=()=>l2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield Nr(()=>Promise.resolve().then(()=>_i),void 0)).Response:Response}),Au=t=>{if(Array.isArray(t))return t.map(s=>Au(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=Au(n)}),e};var _r=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const cd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),d2=(t,e,s)=>_r(void 0,void 0,void 0,function*(){const n=yield c2();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{e(new o2(cd(r),t.status||500))}).catch(r=>{e(new Pu(cd(r),r))}):e(new Pu(cd(t),t))}),u2=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),s))};function eo(t,e,s,n,r,i){return _r(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(s,u2(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>d2(c,l,n))})})}function zl(t,e,s,n){return _r(this,void 0,void 0,function*(){return eo(t,"GET",e,s,n)})}function gn(t,e,s,n,r){return _r(this,void 0,void 0,function*(){return eo(t,"POST",e,n,r,s)})}function h2(t,e,s,n,r){return _r(this,void 0,void 0,function*(){return eo(t,"PUT",e,n,r,s)})}function f2(t,e,s,n){return _r(this,void 0,void 0,function*(){return eo(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Hv(t,e,s,n,r){return _r(this,void 0,void 0,function*(){return eo(t,"DELETE",e,n,r,s)})}var At=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const m2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},d0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class p2{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=Bv(r)}uploadOrUpdate(e,s,n,r){return At(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},d0),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(it(i))return{data:null,error:i};throw i}})}upload(e,s,n){return At(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return At(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:d0.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(it(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return At(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const i=yield gn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Zh("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}})}update(e,s,n){return At(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return At(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}})}copy(e,s,n){return At(this,void 0,void 0,function*(){try{return{data:{path:(yield gn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return At(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield gn(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return At(this,void 0,void 0,function*(){try{const r=yield gn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}})}download(e,s){return At(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield zl(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(it(l))return{data:null,error:l};throw l}})}info(e){return At(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield zl(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Au(n),error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}})}exists(e){return At(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield f2(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(it(n)&&n instanceof Pu){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&r.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&r.push(c);let d=r.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return At(this,void 0,void 0,function*(){try{return{data:yield Hv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(it(s))return{data:null,error:s};throw s}})}list(e,s,n){return At(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},m2),s),{prefix:e||""});return{data:yield gn(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(it(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const g2="2.7.1",x2={"X-Client-Info":`storage-js/${g2}`};var Or=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class y2{constructor(e,s={},n){this.url=e,this.headers=Object.assign(Object.assign({},x2),s),this.fetch=Bv(n)}listBuckets(){return Or(this,void 0,void 0,function*(){try{return{data:yield zl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(it(e))return{data:null,error:e};throw e}})}getBucket(e){return Or(this,void 0,void 0,function*(){try{return{data:yield zl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(it(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Or(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Or(this,void 0,void 0,function*(){try{return{data:yield h2(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(it(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Or(this,void 0,void 0,function*(){try{return{data:yield gn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(it(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Or(this,void 0,void 0,function*(){try{return{data:yield Hv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(it(s))return{data:null,error:s};throw s}})}}class v2 extends y2{constructor(e,s={},n){super(e,s,n)}from(e){return new p2(this.url,this.headers,e,this.fetch)}}const b2="2.50.3";let Yi="";typeof Deno<"u"?Yi="deno":typeof document<"u"?Yi="web":typeof navigator<"u"&&navigator.product==="ReactNative"?Yi="react-native":Yi="node";const w2={"X-Client-Info":`supabase-js-${Yi}/${b2}`},j2={headers:w2},N2={schema:"public"},_2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},k2={};var S2=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const C2=t=>{let e;return t?e=t:typeof fetch>"u"?e=Cv:e=fetch,(...s)=>e(...s)},E2=()=>typeof Headers>"u"?Ev:Headers,P2=(t,e,s)=>{const n=C2(s),r=E2();return(i,o)=>S2(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new r(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var A2=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};function L2(t){return t.endsWith("/")?t:t+"/"}function T2(t,e){var s,n;const{db:r,auth:i,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>A2(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const Wv="2.70.0",zr=30*1e3,Lu=3,dd=Lu*zr,M2="http://localhost:9999",D2="supabase.auth.token",O2={"X-Client-Info":`gotrue-js/${Wv}`},Tu="X-Supabase-Api-Version",Vv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},R2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,I2=6e5;class ef extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function ie(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class F2 extends ef{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function $2(t){return ie(t)&&t.name==="AuthApiError"}class qv extends ef{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Wn extends ef{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class fn extends Wn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function z2(t){return ie(t)&&t.name==="AuthSessionMissingError"}class No extends Wn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class _o extends Wn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class ko extends Wn{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function U2(t){return ie(t)&&t.name==="AuthImplicitGrantRedirectError"}class u0 extends Wn{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Mu extends Wn{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function ud(t){return ie(t)&&t.name==="AuthRetryableFetchError"}class h0 extends Wn{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class da extends Wn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Ul="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),f0=` 	
\r=`.split(""),B2=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<f0.length;e+=1)t[f0[e].charCodeAt(0)]=-2;for(let e=0;e<Ul.length;e+=1)t[Ul[e].charCodeAt(0)]=e;return t})();function m0(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Ul[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Ul[n]),e.queuedBits-=6}}function Gv(t,e,s){const n=B2[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function p0(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{V2(o,n,s)};for(let o=0;o<t.length;o+=1)Gv(t.charCodeAt(o),r,i);return e.join("")}function H2(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function W2(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}H2(n,e)}}function V2(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function q2(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)Gv(t.charCodeAt(r),s,n);return new Uint8Array(e)}function G2(t){const e=[];return W2(t,s=>e.push(s)),new Uint8Array(e)}function K2(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};return t.forEach(r=>m0(r,s,n)),m0(null,s,n),e.join("")}function Y2(t){return Math.round(Date.now()/1e3)+t}function J2(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const hs=()=>typeof window<"u"&&typeof document<"u",Kn={tested:!1,writable:!1},ua=()=>{if(!hs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Kn.tested)return Kn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Kn.tested=!0,Kn.writable=!0}catch{Kn.tested=!0,Kn.writable=!1}return Kn.writable};function Q2(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const Kv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>Nr(()=>Promise.resolve().then(()=>_i),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},X2=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",Yv=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},So=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Co=async(t,e)=>{await t.removeItem(e)};class jc{constructor(){this.promise=new jc.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}jc.promiseConstructor=Promise;function hd(t){const e=t.split(".");if(e.length!==3)throw new da("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!R2.test(e[n]))throw new da("JWT not in base64url format");return{header:JSON.parse(p0(e[0])),payload:JSON.parse(p0(e[1])),signature:q2(e[2]),raw:{header:e[0],payload:e[1]}}}async function Z2(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ek(t,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function tk(t){return("0"+t.toString(16)).substr(-2)}function sk(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let i=0;i<56;i++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,tk).join("")}async function nk(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function rk(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await nk(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Rr(t,e,s=!1){const n=sk();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await Yv(t,`${e}-code-verifier`,r);const i=await rk(n);return[i,n===i?"plain":"s256"]}const ik=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function ak(t){const e=t.headers.get(Tu);if(!e||!e.match(ik))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function ok(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function lk(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const ck=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function Ir(t){if(!ck.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var dk=globalThis&&globalThis.__rest||function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const tr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),uk=[502,503,504];async function g0(t){var e;if(!X2(t))throw new Mu(tr(t),0);if(uk.includes(t.status))throw new Mu(tr(t),t.status);let s;try{s=await t.json()}catch(i){throw new qv(tr(i),i)}let n;const r=ak(t);if(r&&r.getTime()>=Vv["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new h0(tr(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new fn}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new h0(tr(s),t.status,s.weak_password.reasons);throw new F2(tr(s),t.status||500,n)}const hk=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function he(t,e,s,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[Tu]||(i[Tu]=Vv["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await fk(t,e,s+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function fk(t,e,s,n,r,i){const o=hk(e,n,r,i);let l;try{l=await t(s,Object.assign({},o))}catch(c){throw console.error(c),new Mu(tr(c),0)}if(l.ok||await g0(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await g0(c)}}function Bs(t){var e;let s=null;xk(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=Y2(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function x0(t){const e=Bs(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function vn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function mk(t){return{data:t,error:null}}function pk(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=t,o=dk(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function gk(t){return t}function xk(t){return t.access_token&&t.refresh_token&&t.expires_in}const fd=["global","local","others"];var yk=globalThis&&globalThis.__rest||function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class vk{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=Kv(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=fd[0]){if(fd.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${fd.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:vn})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=yk(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:pk,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ie(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:vn})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:gk});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(p.split(";")[1].split("=")[1]);d[`${x}Page`]=v}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(ie(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){Ir(e);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:vn})}catch(s){if(ie(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){Ir(e);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:vn})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){Ir(e);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:vn})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){Ir(e.userId);try{const{data:s,error:n}=await he(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _deleteFactor(e){Ir(e.userId),Ir(e.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}}}const bk={getItem:t=>ua()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{ua()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{ua()&&globalThis.localStorage.removeItem(t)}};function y0(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function wk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const Fr={debug:!!(globalThis&&ua()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class Jv extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class jk extends Jv{}async function Nk(t,e,s){Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw Fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new jk(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(Fr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}wk();const _k={url:M2,storageKey:D2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:O2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function v0(t,e,s){return await s()}class Oa{constructor(e){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Oa.nextInstanceID,Oa.nextInstanceID+=1,this.instanceID>0&&hs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},_k),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new vk({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Kv(r.fetch),this.lock=r.lock||v0,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:hs()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Nk:this.lock=v0,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:ua()?this.storage=bk:(this.memoryStorage={},this.storage=y0(this.memoryStorage)):(this.memoryStorage={},this.storage=y0(this.memoryStorage)),hs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Wv}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=Q2(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),hs()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),U2(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ie(s)?{error:s}:{error:new qv("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Bs}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ie(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,r;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Rr(this.storage,this.storageKey)),i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:Bs})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Bs})}else throw new _o("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ie(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:l}=e;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:x0})}else if("phone"in e){const{phone:i,password:o,options:l}=e;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:x0})}else throw new _o("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new No}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,r,i,o,l,c,d,u,h,f,m;let p,v;if("message"in e)p=e.message,v=e.signature;else{const{chain:x,wallet:g,statement:y,options:b}=e;let k;if(hs())if(typeof g=="object")k=g;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))k=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=g}const j=new URL((s=b==null?void 0:b.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in k&&k.signIn){const S=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),y?{statement:y}:null));let E;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")E=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)E=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in E&&"signature"in E&&(typeof E.signedMessage=="string"||E.signedMessage instanceof Uint8Array)&&E.signature instanceof Uint8Array)p=typeof E.signedMessage=="string"?E.signedMessage:new TextDecoder().decode(E.signedMessage),v=E.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${j.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(r=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(E=>`- ${E}`)]:[]].join(`
`);const S=await k.signMessage(new TextEncoder().encode(p),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=S}}try{const{data:x,error:g}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:K2(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Bs});if(g)throw g;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new No}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:g})}catch(x){if(ie(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const s=await So(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:i,error:o}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Bs});if(await Co(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new No}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(ie(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:i,nonce:o}=e,l=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Bs}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new No}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Rr(this.storage,this.storageKey));const{error:h}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new _o("You must provide either an email or phone number.")}catch(l){if(ie(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,n;try{let r,i;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Bs});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(r){if(ie(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await Rr(this.storage,this.storageKey)),await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:mk})}catch(i){if(ie(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new fn;const{error:r}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(ie(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await he(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:l}=await he(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new _o("You must provide either an email or phone number and a type")}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await So(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<dd:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:vn}):await this._useSession(async s=>{var n,r,i;const{data:o,error:l}=s;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new fn}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:vn})})}catch(s){if(ie(s))return z2(s)&&(await this._removeSession(),await Co(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new fn;const o=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Rr(this.storage,this.storageKey));const{data:d,error:u}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:vn});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ie(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new fn;const s=Date.now()/1e3;let n=s,r=!0,i=null;const{payload:o}=hd(e.access_token);if(o.exp&&(n=o.exp,r=n<=s),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(ie(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:l}=s;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new fn;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ie(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!hs())throw new ko("No browser detected.");if(e.error||e.error_description||e.error_code)throw new ko(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new u0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new ko("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new u0("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new ko("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=zr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const p=f-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,u);const{data:v,error:x}=await this._getUser(i);if(x)throw x;const g={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(ie(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await So(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{error:i};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!($2(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Co(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=J2(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:i},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Rr(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(ie(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(ie(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return hs()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ie(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)throw o;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await ek(async r=>(r>0&&await Z2(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Bs})),(r,i)=>{const o=200*Math.pow(2,r);return i&&ud(i)&&Date.now()+o-n<zr})}catch(n){if(this._debug(s,"error",n),ie(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),hs()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await So(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const r=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<dd;if(this._debug(s,`session has${r?"":" not"} expired with margin of ${dd}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),ud(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new fn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new jc;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new fn;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),ie(i)){const o={session:null,error:i};return ud(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await Yv(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Co(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&hs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),zr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/zr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${zr}ms, refresh threshold is ${Lu} ticks`),r<=Lu&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof Jv)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!hs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await Rr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await he(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await he(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(ie(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:l}=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(ie(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ie(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=hd(r.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+I2>Date.now()))return n;const{data:r,error:i}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!r.keys||r.keys.length===0)throw new da("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),n=r.keys.find(o=>o.kid===e),!n)throw new da("No matching signing key found in JWKS");return n}async getClaims(e,s={keys:[]}){try{let n=e;if(!n){const{data:m,error:p}=await this.getSession();if(p||!m.session)return{data:null,error:p};n=m.session.access_token}const{header:r,payload:i,signature:o,raw:{header:l,payload:c}}=hd(n);if(ok(i.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:r,signature:o},error:null}}const d=lk(r.alg),u=await this.fetchJwk(r.kid,s),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,G2(`${l}.${c}`)))throw new da("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(ie(n))return{data:null,error:n};throw n}}}Oa.nextInstanceID=0;const kk=Oa;class Sk extends kk{constructor(e){super(e)}}var Ck=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class Ek{constructor(e,s,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=L2(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:N2,realtime:k2,auth:Object.assign(Object.assign({},_2),{storageKey:d}),global:j2},h=T2(n??{},u);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=P2(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new V_(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new w_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new v2(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Ck(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Sk({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new a2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Pk=(t,e,s)=>new Ek(t,e,s),Ak="https://scwyzonphgbhfirwwnov.supabase.co",Lk="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNjd3l6b25waGdiaGZpcnd3bm92Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MzQ2MTMsImV4cCI6MjA2NzQxMDYxM30.XTqP3aOLIVfyw9kpdawVfqFAiYg8USJaZVLi478wq3I",we=Pk(Ak,Lk,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0,storageKey:"supabase.auth.token",flowType:"pkce"}}),Qv="capacity-login-activity",Qs={LOGIN:"login",LOGOUT:"logout"},b0=t=>{const e=new Date(t),n=Math.floor((new Date-e)/(1e3*60));if(n<1)return"Just now";if(n<60)return`${n} min ago`;if(n<1440){const r=Math.floor(n/60);return`${r} hour${r>1?"s":""} ago`}else return e.toLocaleDateString()+" "+e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},w0=(t,e)=>{const n=Math.floor((new Date-new Date(e))/(1e3*60));return t===Qs.LOGIN?n<5?"text-green-400":n<30?"text-green-500":"text-blue-400":n<5?"text-orange-400":"text-slate-400"},Xv=()=>{try{const t=localStorage.getItem(Qv);return t?JSON.parse(t):[]}catch(t){return console.error("Error loading login activity:",t),[]}},Tk=t=>{try{localStorage.setItem(Qv,JSON.stringify(t))}catch(e){console.error("Error saving login activity:",e)}},j0=(t,e,s=null)=>{const n=Xv(),r={id:Date.now()+Math.random(),type:t,userEmail:e,userName:(s==null?void 0:s.name)||e.split("@")[0],userRole:(s==null?void 0:s.role)||"Unknown",timestamp:new Date().toISOString(),sessionId:Mk()};n.unshift(r);const i=n.slice(0,50);return Tk(i),window.dispatchEvent(new CustomEvent("loginActivityUpdate",{detail:r})),r},Mk=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),Zv=(t={})=>{let s=Xv();if(t.type&&(s=s.filter(n=>n.type===t.type)),t.userEmail&&(s=s.filter(n=>n.userEmail===t.userEmail)),t.limit&&(s=s.slice(0,t.limit)),t.hoursBack){const n=new Date;n.setHours(n.getHours()-t.hoursBack),s=s.filter(r=>new Date(r.timestamp)>n)}return s},Dk=(t=24)=>{const e=Zv({hoursBack:t});return{totalLogins:e.filter(n=>n.type===Qs.LOGIN).length,totalLogouts:e.filter(n=>n.type===Qs.LOGOUT).length,uniqueUsers:new Set(e.map(n=>n.userEmail)).size,recentActivity:e.slice(0,10)}},eb=w.createContext(),Fs=()=>{const t=w.useContext(eb);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},Ok=({children:t})=>{const[e,s]=w.useState(null),[n,r]=w.useState(null),[i,o]=w.useState(!0),[l,c]=w.useState(!1),d=_=>{var M,B,$,U;if(!_)return null;const C=_.email,N=C.split("@")[0],L=C.split("@")[1];let P="Employee";return L==="capacity.com"||C.includes("admin")?P="Capacity Admin":L==="nsight-inc.com"&&(P="NSight Admin"),{id:_.id,email:C,first_name:((M=_.user_metadata)==null?void 0:M.first_name)||N,last_name:((B=_.user_metadata)==null?void 0:B.last_name)||"",role:(($=_.user_metadata)==null?void 0:$.role)||P,department:((U=_.user_metadata)==null?void 0:U.department)||"",created_at:_.created_at,updated_at:_.updated_at||new Date().toISOString()}},u=async(_,C=null)=>{var N;try{console.log("🔍 Fetching user profile for ID:",_);const L=localStorage.getItem(`deleted_user_${_}`);if(L){const U=parseInt(L),ee=Date.now()-10*60*1e3;if(console.log("🔒 Checking deletion marker for user:",_,"deleteTime:",new Date(U),"threshold:",new Date(ee)),U>ee)return console.log("⚠️ User was recently deleted, not auto-creating profile"),null;console.log("🧹 Cleaning up expired deletion marker for user:",_),localStorage.removeItem(`deleted_user_${_}`)}const P=new Promise((U,ee)=>setTimeout(()=>ee(new Error("Profile fetch timeout")),1e3)),M=we.from("user_profiles").select("*").eq("id",_).single(),{data:B,error:$}=await Promise.race([M,P]);if($){if(console.error("❌ Database error fetching profile:",$),$.code==="PGRST116"||(N=$.message)!=null&&N.includes("No rows")){if(console.log("🔄 No profile in database for user:",_),localStorage.getItem(`deleted_user_${_}`))return console.log("🚫 User is marked as deleted, aborting profile creation"),null;console.log("🆕 Creating new profile for user:",_);try{return await h(_)}catch(O){if(console.error("❌ Database profile creation failed:",O),console.log("🚨 Falling back to auth-based profile"),C)return d(C);const{data:{user:W}}=await we.auth.getUser();return d(W)}}if(console.log("🚨 Database unavailable, using auth-based profile"),C)return d(C);const{data:{user:U}}=await we.auth.getUser();return d(U)}return console.log("✅ User profile found in database:",B),B}catch(L){L.message==="Profile fetch timeout"?console.warn("⏱️ Profile fetch timed out after 1s, using fallback"):console.error("❌ Error in getUserProfile:",L),console.log("🚨 Profile fetch failed, creating from auth data");try{if(C)return d(C);const{data:{user:P}}=await we.auth.getUser();return d(P)}catch(P){return console.error("❌ Even auth fallback failed:",P),null}}},h=async _=>{var C,N,L,P,M;try{console.log("🔄 Creating user profile in database for ID:",_);const B=localStorage.getItem(`deleted_user_${_}`);if(B){const nt=parseInt(B),rt=Date.now()-10*60*1e3;if(nt>rt)throw console.log("🚫 Aborting profile creation - user was recently deleted:",_),new Error("User was recently deleted");console.log("🧹 Create profile: Cleaning up expired deletion marker for user:",_),localStorage.removeItem(`deleted_user_${_}`)}const $=new Promise((nt,rt)=>setTimeout(()=>rt(new Error("Profile creation timeout")),1e4)),{data:{user:U},error:ee}=await we.auth.getUser();if(ee||!U)throw new Error("Could not get user info");console.log("👤 Creating profile for authenticated user:",U.email,"requested userId:",_);const O=U.email,W=O.split("@")[0],K=((C=U.user_metadata)==null?void 0:C.first_name)||W,H=((N=U.user_metadata)==null?void 0:N.last_name)||"";let T="Employee";const R=O.split("@")[1];R==="capacity.com"||O.includes("admin")?T="Capacity Admin":R==="nsight-inc.com"&&(T="NSight Admin");const Q=((L=U.user_metadata)==null?void 0:L.role)||T;console.log("🔍 Role determination for user:",O),console.log("  - Domain-based role:",T),console.log("  - User metadata role:",(P=U.user_metadata)==null?void 0:P.role),console.log("  - Final role:",Q);const ue=we.from("user_profiles").insert([{id:_,email:O,first_name:K,last_name:H,role:Q,department:((M=U.user_metadata)==null?void 0:M.department)||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single(),{data:me,error:Ae}=await Promise.race([ue,$]);if(Ae)throw console.error("❌ Error creating user profile in database:",Ae),Ae;return console.log("✅ User profile created in database:",me),me}catch(B){throw console.error("❌ Database profile creation failed:",B),B}};w.useEffect(()=>{let _=!0;(async()=>{try{console.log("🔍 Getting initial session...");const{data:{session:P},error:M}=await we.auth.getSession();if(!_)return;if(M){console.error("❌ Error getting session:",M),_&&o(!1);return}if(P!=null&&P.user){console.log("✅ Session found for user:",P.user.email);const B=localStorage.getItem(`deleted_user_${P.user.id}`);if(B){const $=parseInt(B),U=Date.now()-10*60*1e3;if($>U){console.log("🚫 Initial session: User was recently deleted, not setting profile:",P.user.email),_&&(s(null),r(null),o(!1));return}else console.log("🧹 Initial session: Cleaning up expired deletion marker"),localStorage.removeItem(`deleted_user_${P.user.id}`)}s(P.user);try{const $=await u(P.user.id,P.user);_&&r($)}catch($){if(console.error("❌ Profile loading failed completely:",$),_){const U=d(P.user);r(U)}}}else console.log("ℹ️ No active session found"),_&&(s(null),r(null))}catch(P){console.error("❌ Error in getInitialSession:",P),_&&(s(null),r(null))}finally{_&&(console.log("✅ Initial auth check complete"),o(!1))}})();const{data:{subscription:N}}=we.auth.onAuthStateChange(async(P,M)=>{var B;if(_){console.log("🔄 Auth state changed:",P,((B=M==null?void 0:M.user)==null?void 0:B.email)||"No user");try{if(M!=null&&M.user){console.log("👤 Processing auth state change for user:",M.user.id,M.user.email);const $=localStorage.getItem(`deleted_user_${M.user.id}`);if($){const U=parseInt($),ee=Date.now()-10*60*1e3;if(U>ee){console.log("🚫 Auth state change: User was recently deleted, not setting profile:",M.user.email),_&&(s(null),r(null));return}else console.log("🧹 Auth state change: Cleaning up expired deletion marker"),localStorage.removeItem(`deleted_user_${M.user.id}`)}if(s(M.user),P==="USER_UPDATED"&&n&&n.id===M.user.id){console.log("🔄 USER_UPDATED event - keeping existing profile to avoid refetch"),_&&o(!1);return}try{const U=await u(M.user.id,M.user);_&&r(U)}catch(U){if(console.error("❌ Profile loading failed in auth change:",U),_){const ee=d(M.user);r(ee)}}}else s(null),r(null)}catch($){console.error("❌ Error in auth state change handler:",$),_&&(s(null),r(null))}_&&o(!1)}}),L=setTimeout(()=>{_&&(console.log("⚠️ Auth timeout - forcing loading to false"),o(!1))},15e3);return()=>{_=!1,clearTimeout(L),N==null||N.unsubscribe()}},[]);const E={user:e,userProfile:n,loading:i,isSigningIn:l,signUp:async(_,C,N={})=>{try{c(!0);const{data:L,error:P}=await we.auth.signUp({email:_,password:C,options:{data:{first_name:N.firstName||"",last_name:N.lastName||"",department:N.department||"",role:N.role||"Employee"}}});if(P)throw P;return{data:L,error:null}}catch(L){return console.error("Sign up error:",L),{data:null,error:L}}finally{c(!1)}},adminCreateUser:async(_,C,N={})=>{try{c(!0),console.log("🔧 Admin creating user:",_),console.log("📋 UserData being sent to API:",N);const L={email:_,password:C,userData:{first_name:N.firstName||"",last_name:N.lastName||"",department:N.department||"",role:N.role||"Employee"}};console.log("📤 Request body being sent:",L);const P=await fetch("/api/admin/users?action=create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)}),M=await P.json();if(console.log("📥 API response:",M),!P.ok)throw new Error(M.error||"Failed to create user");return console.log("✅ Admin user creation successful:",M),{data:M.user,error:null}}catch(L){return console.error("❌ Admin user creation error:",L),{data:null,error:L}}finally{c(!1)}},signIn:async(_,C)=>{try{c(!0);const{data:N,error:L}=await we.auth.signInWithPassword({email:_,password:C});if(L)throw L;if(N.user){console.log("✅ Authentication successful, checking if account exists...");const P=localStorage.getItem(`deleted_user_${N.user.id}`);if(P){const $=parseInt(P),U=Date.now()-10*60*1e3;if($>U)throw console.log("🚫 Attempted login with deleted account:",N.user.email),await we.auth.signOut(),new Error("This account has been deleted and is no longer available. Please contact your administrator if you believe this is an error.");console.log("🧹 Cleaning up expired deletion marker during login"),localStorage.removeItem(`deleted_user_${N.user.id}`)}const M=await u(N.user.id,N.user),B={name:M!=null&&M.first_name&&(M!=null&&M.last_name)?`${M.first_name} ${M.last_name}`:N.user.email.split("@")[0],role:(M==null?void 0:M.role)||"Employee"};j0(Qs.LOGIN,N.user.email,B);try{const $=window.location.hostname==="localhost"?"http://localhost:3001/api/login-events":"/api/login-events";await fetch($,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:N.user.email,userName:B.name,userRole:B.role,eventType:"login"})}),console.log("📝 Login event stored in database for:",N.user.email)}catch($){console.warn("⚠️ Failed to store login event in database:",$.message)}console.log("📝 Login activity recorded for:",N.user.email)}return{data:N,error:null}}catch(N){return console.error("Sign in error:",N),{data:null,error:N}}finally{c(!1)}},signOut:async()=>{var _,C;try{if(e&&n){const L={name:n.first_name&&n.last_name?`${n.first_name} ${n.last_name}`:e.email.split("@")[0],role:n.role||"Employee"};j0(Qs.LOGOUT,e.email,L);try{const P=window.location.hostname==="localhost"?"http://localhost:3001/api/login-events":"/api/login-events";await fetch(P,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:e.email,userName:L.name,userRole:L.role,eventType:"logout"})}),console.log("📝 Logout event stored in database for:",e.email)}catch(P){console.warn("⚠️ Failed to store logout event in database:",P.message)}console.log("📝 Logout activity recorded for:",e.email)}const{error:N}=await we.auth.signOut();if(N)if((_=N.message)!=null&&_.includes("Auth session missing")||N.name==="AuthSessionMissingError")console.log("⚠️ Session already missing, clearing local state");else throw N}catch(N){if(console.error("Sign out error:",N),(C=N.message)!=null&&C.includes("Auth session missing")||N.name==="AuthSessionMissingError")console.log("⚠️ Session missing error caught, clearing local state anyway");else throw s(null),r(null),N}finally{console.log("🚪 Clearing local auth state"),s(null),r(null)}},updateProfile:async _=>{try{if(!e)throw new Error("No user logged in");try{const{data:C,error:N}=await we.from("user_profiles").update({first_name:_.first_name,last_name:_.last_name,role:_.role,department:_.department,updated_at:new Date().toISOString()}).eq("id",e.id).select().single();if(N)throw N;return r(C),{data:C,error:null}}catch(C){console.error("❌ Database update failed, updating auth metadata:",C);const{data:N,error:L}=await we.auth.updateUser({data:{first_name:_.first_name,last_name:_.last_name,role:_.role,department:_.department}});if(L)throw L;const P=d(N.user);return r(P),{data:P,error:null}}}catch(C){return console.error("Update profile error:",C),{data:null,error:C}}},changePassword:async _=>{try{const{data:C,error:N}=await we.auth.updateUser({password:_});if(N)throw N;return{data:C,error:null}}catch(C){return console.error("Change password error:",C),{data:null,error:C}}},resetPassword:async _=>{try{const{data:C,error:N}=await we.auth.resetPasswordForEmail(_,{redirectTo:`${window.location.origin}/reset-password`});if(N)throw N;return{data:C,error:null}}catch(C){return console.error("Reset password error:",C),{data:null,error:C}}},getAllUsers:async()=>{try{console.log("🔍 Fetching all users from database...");const _=new Promise((P,M)=>setTimeout(()=>M(new Error("Get users timeout")),1e4)),C=we.from("user_profiles").select("*").order("created_at",{ascending:!1}),{data:N,error:L}=await Promise.race([C,_]);if(L)throw L;return console.log("✅ Users fetched from database:",N.length),{data:N,error:null}}catch(_){return console.error("❌ Database users fetch failed:",_),console.log("🚨 Falling back to current user only"),{data:n?[n]:[],error:null}}},updateUserProfile:async(_,C)=>{try{const N=new Promise((B,$)=>setTimeout(()=>$(new Error("Update timeout")),1e4)),L=we.from("user_profiles").update({first_name:C.first_name,last_name:C.last_name,role:C.role,department:C.department,updated_at:new Date().toISOString()}).eq("id",_).select().single(),{data:P,error:M}=await Promise.race([L,N]);if(M)throw M;return{data:P,error:null}}catch(N){return console.error("❌ Update user profile failed:",N),{data:n,error:null}}},deleteUserProfile:async _=>{try{console.log("🗑️ Deleting user profile for ID:",_),localStorage.setItem(`deleted_user_${_}`,Date.now().toString()),console.log("🔒 Set deletion marker for user BEFORE deletion:",_);const C=new Promise((P,M)=>setTimeout(()=>M(new Error("Delete timeout")),1e4));console.log("🗃️ Deleting from user_profiles table...");const N=we.from("user_profiles").delete().eq("id",_),{error:L}=await Promise.race([N,C]);return L?(console.error("❌ Error deleting user profile:",L),console.log("🔒 Keeping deletion marker due to database error"),{data:null,error:L}):(console.log("✅ User profile deleted from database"),console.log("✅ Delete successful - deletion marker will prevent auto-recreation"),{data:!0,error:null})}catch(C){return console.error("❌ Delete operation failed:",C),C.message==="Delete timeout"?(console.log("⏱️ Delete operation timed out - database may be unavailable"),console.log("🔒 Keeping deletion marker due to timeout"),{data:null,error:new Error("Delete operation timed out. Please try again.")}):(console.log("🔒 Keeping deletion marker due to error"),{data:null,error:C})}},assignUser:async(_,C,N)=>{try{const L=new Promise(($,U)=>setTimeout(()=>U(new Error("Assign timeout")),1e4)),P=we.from(_).update({assigned_to:N}).eq("id",C).select().single(),{data:M,error:B}=await Promise.race([P,L]);if(B)throw B;return{data:M,error:null}}catch(L){return console.error("❌ Assign user failed:",L),{data:null,error:L}}},isAuthenticated:!!e,isCapacityAdmin:(n==null?void 0:n.role)==="Capacity Admin",isNSightAdmin:(n==null?void 0:n.role)==="NSight Admin",isEmployee:(n==null?void 0:n.role)==="Employee",getDashboardRoute:()=>{if(!n)return"/dashboard";switch(n.role){case"Capacity Admin":return"/dashboard";case"NSight Admin":return"/dashboard";case"Employee":return"/dashboard";default:return"/dashboard"}},canEdit:_=>!e||!n?!1:n.role==="Capacity Admin"||n.role==="NSight Admin"?!0:(_==null?void 0:_.created_by)===e.id||(_==null?void 0:_.assigned_to)===e.id,canDelete:_=>!e||!n?!1:n.role==="Capacity Admin"?!0:(_==null?void 0:_.created_by)===e.id};return a.jsx(eb.Provider,{value:E,children:t})},tb=w.createContext(),Rk=()=>{const t=w.useContext(tb);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},Ik=({children:t})=>{const[e,s]=w.useState("dark"),[n,r]=w.useState(!1);w.useEffect(()=>{const c=localStorage.getItem("app-theme");c&&["light","dark","system"].includes(c)&&s(c)},[]),w.useEffect(()=>{const c=document.documentElement;c.classList.remove("light","dark");let d=e;if(e==="system"&&(d=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),c.classList.add(d),n){c.classList.add("theme-transitioning");const u=setTimeout(()=>{c.classList.remove("theme-transitioning"),r(!1)},300);return()=>clearTimeout(u)}},[e,n]),w.useEffect(()=>{if(e!=="system")return;const c=window.matchMedia("(prefers-color-scheme: dark)"),d=()=>{r(!0)};return c.addEventListener("change",d),()=>c.removeEventListener("change",d)},[e]);const i=c=>{c!==e&&(r(!0),s(c),localStorage.setItem("app-theme",c))},l={theme:e,currentTheme:(()=>e==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)(),changeTheme:i,isTransitioning:n};return a.jsx(tb.Provider,{value:l,children:t})},tf=()=>(console.log("🧹 Clearing all mock authentication data..."),["capacity-auth","capacity-users","capacity-users-version","capacity-passwords","capacity-login-activity","formulas_data","materials_data"].forEach(e=>{localStorage.getItem(e)&&(localStorage.removeItem(e),console.log(`✅ Removed: ${e}`))}),Object.keys(localStorage).forEach(e=>{(e.startsWith("capacity-")||e.includes("mock")||e.includes("demo"))&&(localStorage.removeItem(e),console.log(`✅ Removed additional key: ${e}`))}),Object.keys(sessionStorage).forEach(e=>{(e.startsWith("capacity-")||e.includes("mock")||e.includes("demo"))&&(sessionStorage.removeItem(e),console.log(`✅ Removed from session storage: ${e}`))}),console.log("🎉 All mock data cleared! Please refresh the page."),console.log("🔐 You can now use your actual Supabase credentials to log in."),!0);typeof window<"u"&&(window.clearAllMockData=tf);tf();var Fk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const $k=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),zk=(t,e)=>{const s=w.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},d)=>w.createElement("svg",{ref:d,...Fk,width:r,height:r,stroke:n,strokeWidth:o?Number(i)*24/Number(r):i,className:`lucide lucide-${$k(t)}`,...c},[...e.map(([u,h])=>w.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return s.displayName=`${t}`,s};var X=zk;const gs=X("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),ha=X("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),ks=X("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),kt=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),Uk=X("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Bk=X("Atom",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]]),Eo=X("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),tn=X("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Po=X("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Fi=X("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Ra=X("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),$n=X("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),Hk=X("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),Ia=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),N0=X("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Ao=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Si=X("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Wk=X("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),As=X("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),_0=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Vk=X("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),ol=X("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ll=X("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),qk=X("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),sf=X("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Nc=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Ds=X("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]),Rs=X("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),Gk=X("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),sb=X("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),nb=X("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),k0=X("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),rb=X("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),nf=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Kk=X("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),rf=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Yk=X("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),S0=X("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),Jk=X("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),Qk=X("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),Xk=X("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),Zk=X("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),Du=X("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),af=X("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),yr=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),ib=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),eS=X("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Lo=X("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Bl=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),tS=X("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),sS=X("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),Fa=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),nS=X("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),$i=X("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),ab=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),ob=X("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),rS=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),lt=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),iS=X("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),md=X("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ut=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),Ou=X("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),Se=({children:t,variant:e="primary",size:s="md",className:n="",...r})=>{const i="font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",o={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-200 focus:ring-slate-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},l={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return a.jsx("button",{className:`${i} ${o[e]} ${l[s]} ${n}`,...r,children:t})},C0=({label:t,type:e="text",className:s="",rightIcon:n,onRightIconClick:r,...i})=>a.jsxs("div",{className:"w-full",children:[t&&a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:t}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:e,className:`w-full px-3 py-2 border border-slate-600 bg-slate-700 text-slate-100 rounded-md shadow-sm 
                     placeholder-slate-400 focus:outline-none focus:ring-2 
                     focus:ring-primary-500 focus:border-primary-500 
                     transition-colors duration-200 ${n?"pr-10":""} ${s}`,...i}),n&&a.jsx("button",{type:"button",onClick:r,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-300 transition-colors",children:n})]})]}),aS=({className:t=""})=>{const e=()=>{window.confirm("This will clear all cached mock data and refresh the page. Are you sure?")&&(tf(),window.location.reload())};return a.jsx("button",{onClick:e,className:`px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors ${t}`,title:"Clear mock data that might be interfering with Supabase authentication",children:"Clear Mock Data"})},oS=()=>{var p,v;const t=ft(),e=$t(),{signIn:s,isSigningIn:n}=Fs(),[r,i]=w.useState(!1),[o,l]=w.useState({email:"",password:""}),[c,d]=w.useState({}),u=((v=(p=e.state)==null?void 0:p.from)==null?void 0:v.pathname)||"/dashboard",h=()=>{const x={};return o.email?/\S+@\S+\.\S+/.test(o.email)||(x.email="Email is invalid"):x.email="Email is required",o.password?o.password.length<6&&(x.password="Password must be at least 6 characters"):x.password="Password is required",d(x),Object.keys(x).length===0},f=async x=>{if(x.preventDefault(),d({}),!!h())try{const{error:g}=await s(o.email,o.password);g?d({submit:g.message}):t(u,{replace:!0})}catch{d({submit:"An unexpected error occurred. Please try again."})}},m=(x,g)=>{l(y=>({...y,[x]:g})),c[x]&&d(y=>({...y,[x]:""}))};return a.jsx("div",{className:"dark min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("img",{src:"/chemformation-logo.png",alt:"Chemformation",className:"w-16 h-16 mx-auto mb-4"}),a.jsx("h1",{className:"text-3xl font-bold text-white",children:"Capacity Chemicals"}),a.jsx("p",{className:"text-slate-400 mt-2",children:"Chemical Management System"})]}),a.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg shadow-xl p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Welcome back"}),a.jsx("p",{className:"text-slate-400 text-center mt-2",children:"Sign in to your account to continue"})]}),c.submit&&a.jsxs("div",{className:"mb-4 p-3 bg-red-600/20 border border-red-600/30 rounded-lg flex items-center space-x-2",children:[a.jsx(ha,{className:"h-5 w-5 text-red-400"}),a.jsx("span",{className:"text-red-400 text-sm",children:c.submit})]}),a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(Yk,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),a.jsx(C0,{type:"email",value:o.email,onChange:x=>m("email",x.target.value),className:`pl-10 ${c.email?"border-red-500":""}`,placeholder:"your.email@company.com"})]}),c.email&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:c.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(nf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),a.jsx(C0,{type:r?"text":"password",value:o.password,onChange:x=>m("password",x.target.value),className:`pl-10 pr-10 ${c.password?"border-red-500":""}`,placeholder:"Enter your password"}),a.jsx("button",{type:"button",onClick:()=>i(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200",children:r?a.jsx(ol,{className:"h-5 w-5"}):a.jsx(ll,{className:"h-5 w-5"})})]}),c.password&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:c.password})]}),a.jsx(Se,{type:"submit",disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2.5 flex items-center justify-center space-x-2",children:n?a.jsxs(a.Fragment,{children:[a.jsx(rb,{className:"h-5 w-5 animate-spin"}),a.jsx("span",{children:"Signing in..."})]}):a.jsx("span",{children:"Sign in"})})]}),a.jsxs("div",{className:"mt-6 p-4 bg-slate-700/50 border border-slate-600 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"🎮 Demo Accounts"}),a.jsx("p",{className:"text-xs text-slate-400 mb-3",children:"Use these demo accounts to test different dashboard types:"}),a.jsxs("div",{className:"space-y-2 text-xs",children:[a.jsxs("div",{className:"p-2 bg-slate-600/50 rounded",children:[a.jsx("p",{className:"text-blue-300 font-medium",children:"capacity.admin@capacitychemicals.com"}),a.jsx("p",{className:"text-slate-400",children:"password123 • Capacity Admin Dashboard"})]}),a.jsxs("div",{className:"p-2 bg-slate-600/50 rounded",children:[a.jsx("p",{className:"text-green-300 font-medium",children:"nsight.admin@capacitychemicals.com"}),a.jsx("p",{className:"text-slate-400",children:"password123 • Nsight Admin Dashboard"})]}),a.jsxs("div",{className:"p-2 bg-slate-600/50 rounded",children:[a.jsx("p",{className:"text-yellow-300 font-medium",children:"employee@capacitychemicals.com"}),a.jsx("p",{className:"text-slate-400",children:"password123 • Employee Dashboard"})]})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Contact your administrator to create a new account."}),a.jsx("div",{className:"mt-3 flex justify-center",children:a.jsx(aS,{className:"text-xs px-2 py-1"})})]})]}),a.jsx("div",{className:"text-center mt-8 text-slate-500 text-sm",children:a.jsx("p",{children:"© 2024 Chemformation. All rights reserved."})})]})})},lS=({isCollapsed:t,onToggleCollapse:e})=>{const{signOut:s,userProfile:n}=Fs(),r=ft(),i=f=>{console.log("Navigating to:",f),r(f)},o=async()=>{try{await s(),r("/auth")}catch(f){console.error("Logout error:",f)}},l=[{icon:k0,label:"Dashboard",action:()=>i("/dashboard")}],c=[...l,{icon:Bk,label:"Chemformation",action:()=>console.log("Chemformation - No dedicated page yet")},{icon:lt,label:"User Management",action:()=>i("/user-management")},{icon:gs,label:"System Health",action:()=>i("/system-health")}],d=[{icon:k0,label:"NSight Dashboard",action:()=>i("/dashboard")},{icon:Si,label:"Developer Tools",action:()=>console.log("Developer Tools clicked")},{icon:tn,label:"Company Management",action:()=>console.log("Company Management clicked")},{icon:lt,label:"Global User Management",action:()=>console.log("Global User Management clicked")},{icon:gs,label:"Platform Health",action:()=>console.log("Platform Health clicked")}],h=(()=>{if(!n)return l;switch(n.role){case"Capacity Admin":return c;case"NSight Admin":return d;case"Employee":default:return l}})();return a.jsxs("div",{className:`bg-slate-800 border-r border-slate-600 h-screen flex flex-col fixed left-0 top-0 z-50 transition-all duration-300 ${t?"w-20":"w-64"}`,children:[a.jsxs("div",{className:`h-16 px-4 border-b border-slate-600 flex items-center justify-between ${t?"px-2":""}`,children:[!t&&a.jsx("div",{className:"flex items-center",children:a.jsx("span",{className:"text-lg font-semibold text-slate-100",children:"Menu"})}),a.jsx("button",{onClick:e,className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-700 rounded-md transition-colors duration-200",title:t?"Expand sidebar":"Collapse sidebar",children:t?a.jsx(Ia,{className:"h-5 w-5"}):a.jsx(Hk,{className:"h-5 w-5"})})]}),a.jsx("nav",{className:"flex-1 p-4",children:a.jsx("ul",{className:"space-y-2",children:h.map((f,m)=>a.jsx("li",{children:a.jsxs("button",{onClick:p=>{p.preventDefault(),p.stopPropagation(),console.log("Button clicked:",f.label),f.action()},className:`flex items-center w-full px-3 py-2 text-slate-200 hover:bg-slate-700 
                         rounded-md transition-colors duration-200 group relative text-left`,title:t?f.label:"",children:[a.jsx(f.icon,{className:`h-5 w-5 text-slate-400 group-hover:text-slate-200 ${t?"mx-auto":"mr-2"}`}),!t&&a.jsx("span",{className:"transition-opacity duration-200 flex-1 text-left whitespace-nowrap overflow-hidden text-ellipsis",children:f.label}),t&&a.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-slate-700 text-slate-200 text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:f.label})]})},m))})}),a.jsxs("div",{className:"border-t border-slate-600",children:[a.jsx("div",{className:"p-4 pb-2",children:a.jsxs("button",{onClick:()=>i("/settings"),className:`flex items-center w-full px-3 py-2 text-slate-200 hover:bg-slate-700 
                     rounded-md transition-colors duration-200 group relative`,title:t?"Settings":"",children:[a.jsx(Bl,{className:`h-5 w-5 text-slate-400 group-hover:text-slate-200 ${t?"mx-auto":"mr-2"}`}),!t&&a.jsx("span",{className:"transition-opacity duration-200",children:"Settings"}),t&&a.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-slate-700 text-slate-200 text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:"Settings"})]})}),a.jsx("div",{className:"p-4 pt-0",children:a.jsxs("button",{onClick:o,className:`flex items-center w-full px-3 py-2 text-slate-200 hover:bg-slate-700 
                     rounded-md transition-colors duration-200 group relative`,title:t?"Logout":"",children:[a.jsx(rf,{className:`h-5 w-5 text-slate-400 group-hover:text-slate-200 ${t?"mx-auto":"mr-2"}`}),!t&&a.jsx("span",{className:"transition-opacity duration-200",children:"Logout"}),t&&a.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-slate-700 text-slate-200 text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:"Logout"})]})})]})]})},ce=({children:t,className:e="",...s})=>a.jsx("div",{className:`bg-slate-800 rounded-lg border border-slate-600 shadow-sm ${e}`,...s,children:t}),of=async()=>{const{data:{user:t}}=await we.auth.getUser();return t},lb=async()=>{try{const{data:t,error:e}=await we.from("raw_materials").select("*").order("id",{ascending:!0});if(e)throw e;return t.map(s=>({id:s.id,materialName:s.material_name,supplierName:s.supplier_name,manufacture:s.manufacture,tradeName:s.trade_name,supplierCost:s.supplier_cost,casNumber:s.cas_number,weightVolume:s.weight_volume,activityPercentage:s.activity_percentage,density:s.density,viscosity:s.viscosity,cost:s.cost,country:s.country,description:s.description,physicalForm:s.physical_form,purity:s.purity,storageConditions:s.storage_conditions,hazardClass:s.hazard_class,shelfLife:s.shelf_life,created_by:s.created_by,assigned_to:s.assigned_to,created_at:s.created_at,updated_at:s.updated_at,createdByUser:null,assignedToUser:null,dataSourceNotes:s.data_source_notes,confidenceLevel:s.confidence_level,verificationSources:s.verification_sources,lastVerified:s.last_verified,molecularFormula:s.molecular_formula,molecularWeight:s.molecular_weight,iupacName:s.iupac_name,pubchemCID:s.pubchem_cid,canonicalSMILES:s.canonical_smiles}))}catch(t){return console.error("Error fetching materials:",t),[]}},cS=async(t,e)=>{try{const s=await of(),n={material_name:e.materialName,supplier_name:e.supplierName,manufacture:e.manufacture,trade_name:e.tradeName,supplier_cost:e.supplierCost,cas_number:e.casNumber,weight_volume:e.weightVolume,activity_percentage:e.activityPercentage,density:e.density,viscosity:e.viscosity,cost:e.cost,country:e.country,description:e.description,physical_form:e.physicalForm,purity:e.purity,storage_conditions:e.storageConditions,hazard_class:e.hazardClass,shelf_life:e.shelfLife,updated_at:new Date().toISOString()};e.assigned_to!==void 0&&(n.assigned_to=e.assigned_to);const{data:r,error:i}=await we.from("raw_materials").update(n).eq("id",t).select("*").single();if(i)throw i;return{id:r.id,materialName:r.material_name,supplierName:r.supplier_name,manufacture:r.manufacture,tradeName:r.trade_name,supplierCost:r.supplier_cost,casNumber:r.cas_number,weightVolume:r.weight_volume,activityPercentage:r.activity_percentage,density:r.density,viscosity:r.viscosity,cost:r.cost,country:r.country,description:r.description,physicalForm:r.physical_form,purity:r.purity,storageConditions:r.storage_conditions,hazardClass:r.hazard_class,shelfLife:r.shelf_life,created_by:r.created_by,assigned_to:r.assigned_to,created_at:r.created_at,updated_at:r.updated_at,createdByUser:null,assignedToUser:null}}catch(s){return console.error("Error updating material:",s),null}},E0=async t=>{try{const e=await of();if(!e)throw new Error("User not authenticated");const s={material_name:t.materialName,supplier_name:t.supplierName,manufacture:t.manufacture,trade_name:t.tradeName,supplier_cost:t.supplierCost,cas_number:t.casNumber,weight_volume:t.weightVolume,activity_percentage:t.activityPercentage,density:t.density,viscosity:t.viscosity,cost:t.cost,country:t.country,description:t.description,physical_form:t.physicalForm,purity:t.purity,storage_conditions:t.storageConditions,hazard_class:t.hazardClass,shelf_life:t.shelfLife,created_by:e.id,assigned_to:t.assigned_to||e.id,data_source_notes:t.dataSourceNotes,confidence_level:t.confidenceLevel,verification_sources:t.verificationSources,last_verified:t.lastVerified||new Date().toISOString(),molecular_formula:t.molecularFormula,molecular_weight:t.molecularWeight,iupac_name:t.iupacName,pubchem_cid:t.pubchemCID,canonical_smiles:t.canonicalSMILES},{data:n,error:r}=await we.from("raw_materials").insert([s]).select("*").single();if(r)throw r;return{id:n.id,materialName:n.material_name,supplierName:n.supplier_name,manufacture:n.manufacture,tradeName:n.trade_name,supplierCost:n.supplier_cost,casNumber:n.cas_number,weightVolume:n.weight_volume,activityPercentage:n.activity_percentage,density:n.density,viscosity:n.viscosity,cost:n.cost,country:n.country,description:n.description,physicalForm:n.physical_form,purity:n.purity,storageConditions:n.storage_conditions,hazardClass:n.hazard_class,shelfLife:n.shelf_life,created_by:n.created_by,assigned_to:n.assigned_to,created_at:n.created_at,updated_at:n.updated_at,createdByUser:null,assignedToUser:null,dataSourceNotes:n.data_source_notes,confidenceLevel:n.confidence_level,verificationSources:n.verification_sources,lastVerified:n.last_verified,molecularFormula:n.molecular_formula,molecularWeight:n.molecular_weight,iupacName:n.iupac_name,pubchemCID:n.pubchem_cid,canonicalSMILES:n.canonical_smiles}}catch(e){return console.error("Error adding material:",e),null}},dS=async()=>{try{const{data:t,error:e}=await we.from("formulas").select("*").order("id",{ascending:!0});if(e)throw e;return t.map(s=>({id:s.id,name:s.name,totalCost:s.total_cost,finalSalePriceDrum:s.final_sale_price_drum,finalSalePriceTote:s.final_sale_price_tote,ingredients:s.ingredients||[],created_by:s.created_by,assigned_to:s.assigned_to,created_at:s.created_at,updated_at:s.updated_at,createdByUser:null,assignedToUser:null}))}catch(t){return console.error("Error fetching formulas:",t),[]}},uS=async t=>{try{const{data:e,error:s}=await we.from("formulas").select("*").eq("id",t).single();if(s)throw s;return{id:e.id,name:e.name,totalCost:e.total_cost,finalSalePriceDrum:e.final_sale_price_drum,finalSalePriceTote:e.final_sale_price_tote,ingredients:e.ingredients||[],created_by:e.created_by,assigned_to:e.assigned_to,created_at:e.created_at,updated_at:e.updated_at,createdByUser:null,assignedToUser:null}}catch(e){return console.error("Error fetching formula:",e),null}},hS=async(t,e)=>{try{const s=await of(),n={name:e.name,total_cost:e.totalCost,final_sale_price_drum:e.finalSalePriceDrum,final_sale_price_tote:e.finalSalePriceTote,ingredients:e.ingredients,updated_at:new Date().toISOString()};e.assigned_to!==void 0&&(n.assigned_to=e.assigned_to);const{data:r,error:i}=await we.from("formulas").update(n).eq("id",t).select("*").single();if(i)throw i;return{id:r.id,name:r.name,totalCost:r.total_cost,finalSalePriceDrum:r.final_sale_price_drum,finalSalePriceTote:r.final_sale_price_tote,ingredients:r.ingredients||[],created_by:r.created_by,assigned_to:r.assigned_to,created_at:r.created_at,updated_at:r.updated_at,createdByUser:null,assignedToUser:null}}catch(s){return console.error("Error updating formula:",s),null}},fS=async()=>{try{const{data:t,error:e}=await we.from("suppliers").select("*").order("id",{ascending:!0});if(e)throw e;return t.map(s=>({id:s.id,supplierName:s.supplier_name,supplierId:s.supplier_id,supplierEmail:s.supplier_email,supplierContact:s.supplier_contact,packagingCode:s.packaging_code,standardCost:s.standard_cost,created_by:s.created_by,assigned_to:s.assigned_to,created_at:s.created_at,updated_at:s.updated_at,createdByUser:s.created_by_profile?`${s.created_by_profile.first_name} ${s.created_by_profile.last_name}`:null,assignedToUser:s.assigned_to_profile?`${s.assigned_to_profile.first_name} ${s.assigned_to_profile.last_name}`:null}))}catch(t){return console.error("Error fetching suppliers:",t),[]}},mS=async t=>{try{const{error:e}=await we.from("formulas").delete().eq("id",t);if(e)throw e;return!0}catch(e){return console.error("Error deleting formula:",e),!1}},pS=async t=>{try{const{error:e}=await we.from("raw_materials").delete().eq("id",t);if(e)throw e;return!0}catch(e){return console.error("Error deleting material:",e),!1}},cb=t=>t.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");class gS{constructor(){this.pubchemBaseUrl="https://pubchem.ncbi.nlm.nih.gov/rest/pug",this.chemspiderApiKey={}.VITE_CHEMSPIDER_API_KEY,this.nistApiKey={}.VITE_NIST_API_KEY}async getPubChemData(e,s=null){try{let n;s?n=`${this.pubchemBaseUrl}/compound/name/${encodeURIComponent(s)}/property/MolecularFormula,MolecularWeight,IUPACName,CanonicalSMILES/JSON`:n=`${this.pubchemBaseUrl}/compound/name/${encodeURIComponent(e)}/property/MolecularFormula,MolecularWeight,IUPACName,CanonicalSMILES/JSON`;const r=await fetch(n);if(!r.ok)throw new Error(`PubChem API error: ${r.status}`);const i=await r.json();if(i.PropertyTable&&i.PropertyTable.Properties.length>0){const o=i.PropertyTable.Properties[0];return{source:"PubChem",confidence:"HIGH",data:{molecularFormula:o.MolecularFormula,molecularWeight:o.MolecularWeight,iupacName:o.IUPACName,canonicalSMILES:o.CanonicalSMILES,cid:o.CID}}}return null}catch(n){return console.error("PubChem lookup error:",n),null}}async getPubChemProperties(e){var s,n;try{const r=`${this.pubchemBaseUrl}/compound/cid/${e}/property/HeavyAtomCount,ExactMass,MonoisotopicMass,Charge,Complexity/JSON`,i=await fetch(r);return i.ok&&((n=(s=(await i.json()).PropertyTable)==null?void 0:s.Properties)==null?void 0:n[0])||null}catch(r){return console.error("PubChem properties error:",r),null}}async getPubChemSafetyData(e){var s;try{const n=`${this.pubchemBaseUrl}/compound/cid/${e}/record/JSON`,r=await fetch(n);if(!r.ok)return null;const o=(s=(await r.json()).PC_Compounds)==null?void 0:s[0];return o?{source:"PubChem",confidence:"HIGH",data:this.extractSafetyFromRecord(o)}:null}catch(n){return console.error("PubChem safety data error:",n),null}}extractSafetyFromRecord(e){return{hazardClasses:[],storageConditions:[],handlingPrecautions:[]}}async getEnhancedChemicalData(e,s=null){const n={name:e,casNumber:s,sources:[],confidence:{},properties:{},safety:{}},r=await this.getPubChemData(e,s);if(r){n.sources.push("PubChem"),n.confidence.basic="HIGH",n.properties={...n.properties,...r.data};const i=await this.getPubChemProperties(r.data.cid);i&&(n.properties={...n.properties,...i});const o=await this.getPubChemSafetyData(r.data.cid);o&&(n.safety=o.data,n.confidence.safety="HIGH")}if(this.chemspiderApiKey&&await this.getChemSpiderData(e)&&n.sources.push("ChemSpider"),this.nistApiKey){const i=await this.getNISTData(e);i&&(n.sources.push("NIST"),n.properties.thermodynamic=i,n.confidence.thermodynamic="HIGH")}return n}formatForMaterialAddition(e,s){return{materialName:e.name,casNumber:e.casNumber||s.casNumber,molecularFormula:e.properties.molecularFormula,molecularWeight:e.properties.molecularWeight,supplierName:s.supplierName,supplierCost:s.supplierCost,manufacture:s.manufacture,density:e.properties.density||s.density,physicalForm:this.determinePhysicalForm(e.properties),hazardClass:this.determineHazardClass(e.safety),dataSourceNotes:`Verified via ${e.sources.join(", ")}. Pricing and supplier info estimated.`,confidenceLevel:this.calculateOverallConfidence(e),lastVerified:new Date().toISOString(),verificationSources:e.sources}}determinePhysicalForm(e){return"Unknown"}determineHazardClass(e){return"Unknown"}calculateOverallConfidence(e){const s=e.sources.length;return s>=2?"HIGH":s===1?"MEDIUM":"LOW"}}class xS{constructor(){this.isDevelopment=!1,this.apiEndpoint="/api/ai-chat",this.chemicalDB=new gS,this.isDevelopment&&Nr(()=>import("./index-ecc4caf6.js"),[]).then(({default:e})=>{this.openai=new e({apiKey:"your_openai_api_key_here",dangerouslyAllowBrowser:!0})}),this.systemPrompt=`You are a specialized AI assistant for Capacity Chemical's internal platform. You ONLY answer questions related to chemistry, chemical engineering, and chemical safety.

    Your expertise includes:
    - Chemical formulas and molecular structures
    - Chemical reactions and mechanisms
    - Chemical safety protocols and regulations
    - Material properties and specifications
    - Laboratory procedures and best practices
    - Chemical process engineering
    - Regulatory compliance (OSHA, EPA, etc.)
    - Chemical supplier information and sourcing
    - Industrial chemistry applications

    SPECIAL FEATURE - RAW MATERIAL ADDITION WITH CONFIDENCE LEVELS:
    When adding materials, you must include confidence levels for each field:

    HIGH CONFIDENCE (✅): Well-established chemical properties from training data
    - CAS numbers for common chemicals
    - Basic physical properties (density, melting point)
    - Standard safety classifications
    - Molecular formulas and structures

    MEDIUM CONFIDENCE (🟡): Industry-standard values that may vary
    - Typical purity grades
    - Standard storage conditions
    - Common applications and uses
    - General manufacturer information

    LOW CONFIDENCE (⚠️): Estimated values that should be verified
    - Supplier pricing (always estimated)
    - Specific supplier availability
    - Regional sourcing information
    - Activity percentages for solutions
    - Viscosity values

    CRITICAL: When a user asks you to add a chemical or raw material to their database using phrases like:
    - "Add [chemical name] to my raw materials"
    - "I need to add [chemical name] to the database"
    - "Add [chemical name] to our materials"
    - "Please add [chemical name]"
    - "Add [chemical name] to the system"
    
    YOU MUST:
    1. Provide helpful information about the chemical
    2. ALWAYS include the special marker: **[ADD_MATERIAL]**
    3. Include all known details about the material with confidence indicators in this exact JSON format after the marker:
    {
      "materialName": "Chemical Name (keep under 100 chars)",
      "casNumber": "CAS Number if known (keep under 50 chars)", // ✅ HIGH or ⚠️ LOW
      "supplierName": "Supplier name (keep under 50 chars, use abbreviations if needed)", // ⚠️ LOW - Please verify
      "manufacture": "Manufacturer (keep under 50 chars, use abbreviations)", // 🟡 MEDIUM
      "tradeName": "Trade name (keep under 50 chars)",
      "supplierCost": "Supplier cost per unit (numeric value only, e.g. 25.50)", // ⚠️ LOW - Market estimate only
      "weightVolume": "Weight/Volume in lbs/gallon (keep under 50 chars, e.g. '8.34 lbs/gal')",
      "activityPercentage": "% Activity/concentration (keep under 50 chars, e.g. '12.5%')", // ⚠️ LOW - Estimate
      "density": "Density value (keep under 50 chars, e.g. '1.2 g/mL')", // ✅ HIGH
      "viscosity": "Viscosity measurement (keep under 50 chars, e.g. '10 cP')", // ⚠️ LOW - Estimate
      "cost": "Cost per unit in USD (numeric value only, e.g. 45.75)", // ⚠️ LOW - Market estimate only
      "physicalForm": "Solid/Liquid/Gas (keep under 50 chars)", // ✅ HIGH
      "hazardClass": "Hazard class (keep under 50 chars, e.g. 'Corrosive')", // ✅ HIGH
      "purity": "Purity % (keep under 50 chars, e.g. '99%')", // 🟡 MEDIUM - Typical grade
      "country": "Country of origin (keep under 50 chars)", // ⚠️ LOW - Please verify
      "description": "Brief description of the chemical and its uses with confidence notes",
      "storageConditions": "Storage requirements and safety precautions",
      "shelfLife": "Shelf life (keep under 50 chars, e.g. '2 years')",
      "dataSourceNotes": "Explain the reliability of the information provided. Example: CAS and density from chemical databases. Pricing estimated from historical data. Please verify supplier information.",
      "confidenceLevel": "MIXED" // Overall confidence: HIGH, MEDIUM, LOW, or MIXED
    }

    EXAMPLE MATERIAL ADDITION RESPONSE:
    When user says "Add sodium chloride to my raw materials", respond exactly like this:
    
    "I'll add sodium chloride (NaCl) to your raw materials database. Sodium chloride is commonly used in chemical processes as a reagent, preservative, and for ionic strength adjustment. It's generally safe to handle but should be stored in a dry environment.
    
    **[ADD_MATERIAL]**
    {
      "materialName": "Sodium Chloride",
      "casNumber": "7647-14-5", // ✅ HIGH - Well-known CAS number
      "supplierName": "ChemSupply Co.", // ⚠️ LOW - Please verify with your preferred suppliers
      "manufacture": "Sigma-Aldrich", // 🟡 MEDIUM - Common manufacturer for this chemical
      "tradeName": "NaCl",
      "supplierCost": "15.50", // ⚠️ LOW - Market estimate only, verify current pricing
      "weightVolume": "2.16 lbs/gal",
      "activityPercentage": "99%", // 🟡 MEDIUM - Typical for reagent grade
      "density": "2.17 g/cm³", // ✅ HIGH - Standard physical property
      "viscosity": "N/A",
      "cost": "18.75", // ⚠️ LOW - Market estimate only
      "physicalForm": "Crystalline Solid", // ✅ HIGH - Well-established
      "hazardClass": "Non-hazardous", // ✅ HIGH - Established safety classification
      "purity": "99.5%", // 🟡 MEDIUM - Typical reagent grade purity
      "country": "USA", // ⚠️ LOW - Please verify supplier location
      "description": "High purity sodium chloride for industrial and laboratory applications. CAS number and physical properties verified from chemical databases.",
      "storageConditions": "Store in dry place, avoid moisture", // ✅ HIGH - Standard storage requirements
      "shelfLife": "5 years", // 🟡 MEDIUM - Typical for dry salts
      "dataSourceNotes": "CAS number, density, and safety data verified from chemical databases. Pricing estimated from market data. Please verify supplier information and current pricing.",
      "confidenceLevel": "MIXED" // Mix of high-confidence chemical data and low-confidence commercial data
    }
    
    IMPORTANT: 
    - Research and provide accurate chemical data including CAS numbers, densities, hazard classifications, and typical uses
    - Include supplier cost and cost information when possible (use reasonable estimates based on market data)
    - For % Activity, provide the active ingredient concentration if it's a solution or mixture
    - Keep short fields (marked with character limits) concise to fit database constraints
    - Use abbreviations when necessary for field length limits
    - Always prioritize safety information in hazard class and storage conditions

    IMPORTANT INSTRUCTIONS:
    - If a question is NOT related to chemistry, chemical engineering, or chemical safety, politely decline to answer
    - Respond with: "I'm a specialized chemistry assistant and can only help with chemistry-related questions. Please ask me about chemical formulas, reactions, safety protocols, or other chemistry topics."
    - Always prioritize safety in your chemical responses
    - Provide accurate, professional information relevant to chemical engineering and manufacturing
    - When users upload files, only analyze them for chemical data, safety information, formulas, or specifications
    - For material addition requests, be thorough and include safety information

    Stay focused on your chemistry specialty and politely redirect non-chemistry questions.`}async generateResponse(e,s=null,n=[]){try{if(!this.isDevelopment)return await this.generateResponseFromAPI(e,s,n);if(!this.openai)throw new Error("OpenAI client not initialized. Check your API key.");const r=[{role:"system",content:this.systemPrompt},...n,{role:"user",content:this.buildUserMessage(e,s)}],o=(await this.openai.chat.completions.create({model:"gpt-4o",messages:r,max_tokens:1e3,temperature:.7,stream:!1})).choices[0].message.content;return await this.processResponse(o)}catch(r){throw console.error("AI Service Error:",r),new Error("Failed to generate AI response. Please try again.")}}async processResponse(e){if(e.includes("**[ADD_MATERIAL]**"))try{const s=e.split("**[ADD_MATERIAL]**"),n=s[0].trim(),i=s[1].trim().match(/\{[\s\S]*?\}/);if(i){const o=i[0].replace(/\/\/[^\r\n]*/g,"").trim(),l=JSON.parse(o),c=await this.enhanceWithChemicalVerification(l),d=this.validateMaterialData(c),u=await E0(d);return u?{response:n,materialAdded:!0,materialData:u,successMessage:`✅ Successfully added "${d.materialName}" with ${d.confidenceLevel} confidence verification!`}:{response:n,materialAdded:!1,errorMessage:"❌ Failed to save the material to the database. Please try again or add it manually."}}}catch(s){return console.error("Error processing material addition:",s),{response:e.replace("**[ADD_MATERIAL]**",""),materialAdded:!1,errorMessage:"❌ Error processing material addition. Please try again."}}return{response:e}}async enhanceWithChemicalVerification(e){try{console.log("🔍 Verifying chemical data with PubChem for:",e.materialName);const s=await this.chemicalDB.getEnhancedChemicalData(e.materialName,e.casNumber);return s&&s.sources.length>0?(console.log("✅ PubChem verification successful:",s.sources),{...e,casNumber:s.casNumber||e.casNumber,molecularFormula:s.properties.molecularFormula,molecularWeight:s.properties.molecularWeight,iupacName:s.properties.iupacName,dataSourceNotes:`Verified via ${s.sources.join(", ")} databases. Chemical properties confirmed. Pricing and supplier info estimated from AI.`,confidenceLevel:"HIGH",verificationSources:s.sources,lastVerified:new Date().toISOString(),pubchemCID:s.properties.cid,canonicalSMILES:s.properties.canonicalSMILES}):(console.log("⚠️ PubChem verification failed, using AI estimates"),{...e,dataSourceNotes:e.dataSourceNotes+" Chemical verification attempted but not found in databases.",confidenceLevel:"LOW",verificationSources:[],lastVerified:new Date().toISOString()})}catch(s){return console.error("Chemical verification error:",s),{...e,dataSourceNotes:e.dataSourceNotes+" Chemical verification failed due to network error.",confidenceLevel:"LOW",verificationSources:[],lastVerified:new Date().toISOString()}}}validateMaterialData(e){const s=(r,i)=>r&&String(r).substring(0,i),n=r=>{if(!r)return null;const i=parseFloat(String(r).replace(/[^0-9.-]/g,""));return isNaN(i)?null:i};return{materialName:s(e.materialName,100),casNumber:s(e.casNumber,50),supplierName:s(e.supplierName,50),manufacture:s(e.manufacture,50),tradeName:s(e.tradeName,50),supplierCost:n(e.supplierCost),weightVolume:s(e.weightVolume,50),activityPercentage:s(e.activityPercentage,50),density:s(e.density,50),viscosity:s(e.viscosity,50),cost:n(e.cost),physicalForm:s(e.physicalForm,50),hazardClass:s(e.hazardClass,50),purity:s(e.purity,50),country:s(e.country,50),shelfLife:s(e.shelfLife,50),description:e.description,storageConditions:e.storageConditions,assigned_to:e.assigned_to,dataSourceNotes:e.dataSourceNotes,confidenceLevel:s(e.confidenceLevel,50),verificationSources:e.verificationSources||null,lastVerified:e.lastVerified||new Date().toISOString(),molecularFormula:s(e.molecularFormula,50),molecularWeight:n(e.molecularWeight),iupacName:s(e.iupacName,200),pubchemCID:s(e.pubchemCID,50),canonicalSMILES:s(e.canonicalSMILES,200)}}async generateResponseFromAPI(e,s,n){const r=await fetch(this.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,files:s,conversationHistory:n})});if(!r.ok)throw new Error(`API request failed: ${r.status}`);const i=await r.json();if(i.materialAdded){if(console.log("📦 Frontend: Received backend verification response:",i),!i.materialData)return console.error("❌ Frontend: Backend returned materialAdded=true but no materialData"),{response:i.response,materialAdded:!1,errorMessage:i.errorMessage||"❌ Backend verification failed. Please try again."};try{const o=this.validateMaterialData(i.materialData);console.log("✅ Frontend: Material validated, saving to database:",o.materialName);const l=await E0(o);return l?{response:i.response,materialAdded:!0,materialData:l,successMessage:i.successMessage||`✅ Successfully added "${o.materialName}" with backend verification!`}:{response:i.response,materialAdded:!1,errorMessage:"❌ Failed to save the verified material to the database. Please try again."}}catch(o){return console.error("❌ Frontend: Error processing backend material data:",o),{response:i.response,materialAdded:!1,errorMessage:"❌ Error processing verified material data. Please try again."}}}return i.response}buildUserMessage(e,s){let n=e;if(s&&s.length>0){n+=`

Attached files:
`,s.forEach(i=>{n+=`- ${i.name} (${i.type}, ${this.formatFileSize(i.size)})
`});const r=s.map(i=>i.type);r.some(i=>i.includes("pdf"))&&(n+=`
Please analyze any chemical data, safety information, or formulas in the PDF documents.`),r.some(i=>i.includes("image"))&&(n+=`
Please analyze any chemical diagrams, formulas, or laboratory images.`),r.some(i=>i.includes("csv")||i.includes("excel"))&&(n+=`
Please analyze the chemical data, material properties, or test results in the spreadsheet.`)}return n}formatFileSize(e){if(e===0)return"0 Bytes";const s=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,r)).toFixed(2))+" "+n[r]}async*generateStreamingResponse(e,s=null,n=[]){var r,i;if(!this.isDevelopment||!this.openai)throw new Error("Streaming only available in development mode");try{const o=[{role:"system",content:this.systemPrompt},...n,{role:"user",content:this.buildUserMessage(e,s)}],l=await this.openai.chat.completions.create({model:"gpt-4o",messages:o,max_tokens:1e3,temperature:.7,stream:!0});for await(const c of l){const d=(i=(r=c.choices[0])==null?void 0:r.delta)==null?void 0:i.content;d&&(yield d)}}catch(o){throw console.error("AI Streaming Error:",o),new Error("Failed to generate streaming response.")}}}const yS=new xS,vS=({onMaterialAdded:t})=>{const[e,s]=w.useState(!1),[n,r]=w.useState(!1),[i,o]=w.useState([{id:1,text:"Hello! I'm your AI assistant specialized in chemical engineering and safety. I can help with chemical formulas, safety protocols, material specifications, regulatory compliance, and analyze documents you upload. How can I help you today?",sender:"bot",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}]),[l,c]=w.useState(""),[d,u]=w.useState(!1),[h,f]=w.useState([]),m=w.useRef(null),p=j=>{const E=Array.from(j.target.files).map(_=>({id:Date.now()+Math.random(),file:_,name:_.name,size:_.size,type:_.type,url:URL.createObjectURL(_)}));f(_=>[..._,...E])},v=j=>{f(S=>{const E=S.find(_=>_.id===j);return E&&E.url&&URL.revokeObjectURL(E.url),S.filter(_=>_.id!==j)})},x=j=>{if(j===0)return"0 Bytes";const S=1024,E=["Bytes","KB","MB","GB"],_=Math.floor(Math.log(j)/Math.log(S));return parseFloat((j/Math.pow(S,_)).toFixed(2))+" "+E[_]},g=j=>j.startsWith("image/")?a.jsx(sb,{className:"h-4 w-4"}):a.jsx(sf,{className:"h-4 w-4"}),y=async()=>{if(!l.trim()&&h.length===0)return;const j={id:i.length+1,text:l||(h.length>0?"Uploaded files:":""),sender:"user",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),files:h.length>0?[...h]:null};o(_=>[..._,j]);const S=l,E=[...h];c(""),f([]),u(!0);try{const _=i.map(L=>({role:L.sender==="user"?"user":"assistant",content:L.text})),C=await yS.generateResponse(S,E,_),N={id:i.length+2,text:C.response||C,sender:"bot",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),materialAdded:C.materialAdded||!1,materialData:C.materialData||null,successMessage:C.successMessage||null,errorMessage:C.errorMessage||null};o(L=>[...L,N]),N.materialAdded&&t&&t(N.materialData)}catch(_){console.error("AI Response Error:",_);const C={id:i.length+2,text:"I apologize, but I encountered an error processing your request. Please try again. If the issue persists, please contact technical support.",sender:"bot",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isError:!0};o(N=>[...N,C])}finally{u(!1)}},b=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),y())},k=(j,S=!1)=>{const E=j.type.startsWith("image/");return a.jsxs("div",{className:`flex items-center space-x-2 p-2 rounded-md ${S?"bg-slate-600 bg-opacity-50":"bg-slate-700"}`,children:[g(j.type),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-slate-200 truncate",children:j.name}),a.jsx("p",{className:"text-xs text-slate-400",children:x(j.size)})]}),E&&j.url&&a.jsx("img",{src:j.url,alt:j.name,className:"w-8 h-8 object-cover rounded"}),!S&&a.jsx("button",{onClick:()=>v(j.id),className:"text-slate-400 hover:text-red-400 transition-colors",children:a.jsx(ut,{className:"h-4 w-4"})})]},j.id)};return e?a.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:a.jsxs(ce,{className:`w-80 transition-all duration-200 ${n?"h-14":"h-[500px]"} flex flex-col`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-600 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:a.jsx(S0,{className:"h-4 w-4 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-100",children:"AI Assistant"}),a.jsx("p",{className:"text-xs text-slate-400",children:"AI-Powered • File analysis supported"})]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>r(!n),className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-slate-200",children:a.jsx(Jk,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-slate-200",children:a.jsx(ut,{className:"h-4 w-4"})})]})]}),!n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1 p-4 space-y-3 overflow-y-auto min-h-0",children:[i.map(j=>a.jsx("div",{className:`flex ${j.sender==="user"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-xs rounded-lg p-3 ${j.sender==="user"?"bg-blue-600 text-white":j.isError?"bg-red-600 text-white border border-red-500":"bg-slate-700 text-slate-100"}`,children:[j.text&&a.jsx("p",{className:"text-sm mb-2",children:j.text}),j.successMessage&&a.jsxs("div",{className:"mt-2 p-2 bg-green-600 bg-opacity-20 border border-green-500 rounded text-green-200",children:[a.jsx("p",{className:"text-sm",children:j.successMessage}),j.materialData&&a.jsxs("p",{className:"text-xs mt-1 text-green-300",children:["Added to Raw Materials • ID: ",j.materialData.id]})]}),j.errorMessage&&a.jsx("div",{className:"mt-2 p-2 bg-red-600 bg-opacity-20 border border-red-500 rounded text-red-200",children:a.jsx("p",{className:"text-sm",children:j.errorMessage})}),j.files&&a.jsx("div",{className:"space-y-2",children:j.files.map(S=>k(S,!0))}),a.jsx("p",{className:`text-xs mt-1 ${j.sender==="user"?"text-blue-100":"text-slate-400"}`,children:j.timestamp})]})},j.id)),d&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-slate-700 text-slate-100 rounded-lg p-3",children:a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),h.length>0&&a.jsx("div",{className:"px-4 py-2 border-t border-slate-600 bg-slate-800 flex-shrink-0",children:a.jsx("div",{className:"space-y-2 max-h-24 overflow-y-auto",children:h.map(j=>k(j))})}),a.jsx("div",{className:"p-4 border-t border-slate-600 flex-shrink-0",children:a.jsxs("div",{className:"flex items-end space-x-2",children:[a.jsx("input",{type:"file",ref:m,onChange:p,multiple:!0,accept:".pdf,.doc,.docx,.txt,.csv,.xlsx,.xls,.png,.jpg,.jpeg,.gif",className:"hidden"}),a.jsx("button",{onClick:()=>{var j;return(j=m.current)==null?void 0:j.click()},className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-700 rounded-md transition-colors flex-shrink-0",title:"Attach files",children:a.jsx(Zk,{className:"h-4 w-4"})}),a.jsx("div",{className:"flex-1",children:a.jsx("textarea",{value:l,onChange:j=>c(j.target.value),onKeyPress:b,placeholder:"Type your message...",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:border-slate-500 focus:ring-0 resize-none max-h-20",rows:1,style:{minHeight:"40px",height:"40px"},onInput:j=>{j.target.style.height="40px",j.target.style.height=Math.min(j.target.scrollHeight,80)+"px"}})}),a.jsx("button",{onClick:y,disabled:!l.trim()&&h.length===0,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex-shrink-0",children:a.jsx(eS,{className:"h-4 w-4"})})]})})]})]})}):a.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:a.jsx("button",{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all duration-200 hover:scale-105",children:a.jsx(S0,{className:"h-6 w-6"})})})},bS=()=>{const[t,e]=w.useState(!1),s=w.useRef(null),n=ft(),{user:r,userProfile:i,signOut:o}=Fs();w.useEffect(()=>{const f=m=>{s.current&&!s.current.contains(m.target)&&e(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[]);const l=[{name:"Formulas",icon:Rs,action:()=>n("/formulas")},{name:"Raw Materials",icon:Ds,action:()=>n("/raw-materials")},{name:"Suppliers",icon:lt,action:()=>n("/suppliers")}],c=()=>{if(i!=null&&i.first_name&&(i!=null&&i.last_name))return`${i.first_name} ${i.last_name}`;if(r!=null&&r.email){const f=r.email.split("@")[0];return f.charAt(0).toUpperCase()+f.slice(1)}return"User"},d=()=>{if(!(i!=null&&i.role))return"Employee";switch(i.role){case"Capacity Admin":return"Capacity Admin";case"NSight Admin":return"NSight Admin";case"Employee":default:return"Employee"}},u=()=>i!=null&&i.first_name&&(i!=null&&i.last_name)?`${i.first_name.charAt(0)}${i.last_name.charAt(0)}`.toUpperCase():r!=null&&r.email?r.email.split("@")[0].charAt(0).toUpperCase():"U",h=async()=>{try{await o(),n("/auth")}catch(f){console.error("Logout error:",f)}};return a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",ref:s,children:[a.jsxs("button",{onClick:()=>e(!t),className:"flex items-center space-x-2 text-slate-300 hover:text-slate-100 transition-colors p-2 rounded-lg hover:bg-slate-700",children:[a.jsx("div",{className:"grid grid-cols-3 gap-1 p-1",children:[...Array(9)].map((f,m)=>a.jsx("div",{className:"w-1 h-1 bg-slate-400 rounded-sm"},m))}),a.jsx("span",{className:"text-sm",children:"Apps"}),a.jsx($n,{className:`w-4 h-4 transition-transform duration-200 ${t?"rotate-180":""}`})]}),t&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-slate-800 border border-slate-700 rounded-lg shadow-lg z-50",children:l.map((f,m)=>{const p=f.icon;return a.jsxs("button",{onClick:()=>{f.action(),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 text-left text-slate-300 hover:text-slate-100 hover:bg-slate-700 transition-colors ${m===0?"rounded-t-lg":""} ${m===l.length-1?"rounded-b-lg":""}`,children:[a.jsx(p,{className:"w-5 h-5"}),a.jsx("span",{children:f.name})]},f.name)})})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-slate-300",children:[a.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-full flex items-center justify-center text-sm font-medium text-slate-200",children:u()}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm font-medium text-slate-200",children:c()}),a.jsx("span",{className:"text-xs text-slate-400",children:d()})]}),a.jsx("button",{onClick:h,className:"p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-700 rounded transition-colors",title:"Quick Logout (Testing)",children:a.jsx(rf,{className:"w-4 h-4"})})]})]})},Ie=({children:t,onMaterialAdded:e})=>{const{userProfile:s}=Fs(),n=$t(),r=n.pathname!=="/dashboard",[i,o]=w.useState(r);return w.useEffect(()=>{n.pathname!=="/dashboard"&&o(!0)},[n.pathname]),w.useEffect(()=>{let l=0;const c=3,d=async()=>{if(s!=null&&s.email)try{const h=window.location.hostname==="localhost"?"http://localhost:3001/api/track-activity":"/api/track-activity",f=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:s.email,userName:`${s.first_name||""} ${s.last_name||""}`.trim()||s.email.split("@")[0],userRole:s.role||"Employee",page:n.pathname,timestamp:new Date().toISOString()}),signal:AbortSignal.timeout(5e3)});if(!f.ok)throw new Error(`HTTP ${f.status}: ${f.statusText}`);l=0}catch(h){if(l++,l<=c&&(h.name==="TypeError"&&h.message.includes("Failed to fetch")?console.warn(`📡 Activity tracking server not reachable (attempt ${l}/${c})`):h.name==="TimeoutError"?console.warn(`⏱️ Activity tracking timeout (attempt ${l}/${c})`):console.warn(`⚠️ Activity tracking error (attempt ${l}/${c}):`,h.message)),l>=c)return console.warn("🚫 Activity tracking disabled after repeated failures"),!1}return!0};d();let u=setInterval(async()=>{await d()||(clearInterval(u),console.warn("🔄 Activity tracking heartbeat stopped due to repeated failures"))},3e4);return()=>{clearInterval(u)}},[s,n.pathname]),a.jsxs("div",{className:"min-h-screen bg-slate-900 flex flex-col",children:[a.jsx("header",{className:"bg-slate-800 border-b border-slate-700 h-16 flex items-center justify-end px-6 sticky top-0 z-40",children:a.jsx(bS,{})}),a.jsxs("div",{className:"flex flex-1",children:[a.jsx(lS,{isCollapsed:i,onToggleCollapse:()=>o(!i)}),a.jsx("main",{className:"flex-1 p-8 transition-all duration-300 overflow-x-auto",style:{marginLeft:i?"80px":"256px",minHeight:"calc(100vh - 64px)",position:"relative"},children:t})]}),a.jsx(vS,{onMaterialAdded:e})]})},wS=()=>{const[t,e]=w.useState([]),[s,n]=w.useState(1),[r,i]=w.useState([]),[o,l]=w.useState({}),[c,d]=w.useState(new Set),[u,h]=w.useState(new Set),f=ft(),m=20,{getAllUsers:p,userProfile:v}=Fs(),x=P=>{switch(P){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}},g=P=>{switch(P){case"formulas":return a.jsx(Rs,{className:"w-4 h-4 text-blue-500"});case"raw-materials":return a.jsx(Ds,{className:"w-4 h-4 text-blue-500"});case"suppliers":return a.jsx(lt,{className:"w-4 h-4 text-blue-500"});case"developer-mode":return a.jsx(Si,{className:"w-4 h-4 text-blue-500"});case"existing-company-mode":return a.jsx(tn,{className:"w-4 h-4 text-green-500"});default:return null}},y=async()=>{try{const{data:P,error:M}=await p();if(M){console.error("Error loading users:",M);return}const B=P.map(H=>({id:H.id,name:`${H.first_name||""} ${H.last_name||""}`.trim()||H.email.split("@")[0],email:H.email,role:H.role||"Employee",status:"Active",lastLogin:H.created_at?new Date(H.created_at).toISOString().split("T")[0]:"Never",contact:"",appAccess:x(H.role||"Employee"),department:H.department||"",created_at:H.created_at,updated_at:H.updated_at}));let $=[],U={totalLogins:0,totalLogouts:0,uniqueUsers:0},ee=[];try{const H=window.location.hostname==="localhost"?"http://localhost:3001/api/activity-summary":"/api/activity-summary",T=await fetch(H);if(T.ok){const R=await T.json();R.success&&(U=R.summary,ee=R.onlineUsers||[],$=R.summary.recentActivity||[],console.log("📊 Activity summary from API:",{summary:U,onlineCount:ee.length}))}else throw new Error(`API responded with ${T.status}`)}catch(H){console.warn("⚠️ Failed to fetch activity from API, using localStorage fallback:",H.message),$=Zv({limit:50}),U=Dk(24)}let O=new Set;if(ee.length>0)ee.forEach(H=>{O.add(H.user_email)}),console.log("👥 Online users from API:",Array.from(O));else{const H=new Date(Date.now()-18e5),T={};$.forEach(R=>{(!T[R.userEmail]||new Date(R.timestamp)>new Date(T[R.userEmail].timestamp))&&(T[R.userEmail]=R)}),Object.entries(T).forEach(([R,Q])=>{new Date(Q.timestamp)>H&&Q.type===Qs.LOGIN&&O.add(R)})}const K=B.map(H=>{const T=$.filter(Q=>Q.userEmail===H.email),R=T.find(Q=>Q.type===Qs.LOGIN);return{...H,lastLoginActivity:R,recentActivity:T.slice(0,5),isOnline:O.has(H.email)}}).sort((H,T)=>{if(H.isOnline&&!T.isOnline)return-1;if(!H.isOnline&&T.isOnline)return 1;const R=H.lastLoginActivity?new Date(H.lastLoginActivity.timestamp):new Date(0);return(T.lastLoginActivity?new Date(T.lastLoginActivity.timestamp):new Date(0))-R});e(K),i($),l(U),h(O)}catch(P){console.error("Error in loadData:",P)}};w.useEffect(()=>{y();const P=()=>{y()};return window.addEventListener("loginActivityUpdate",P),()=>{window.removeEventListener("loginActivityUpdate",P)}},[]);const b=P=>{switch(P){case"Active":return"text-green-600 bg-green-50";case"Inactive":return"text-red-600 bg-red-50";default:return"text-slate-600 bg-slate-50"}},k=P=>{switch(P){case"Admin":return"text-purple-600 bg-purple-100";case"Capacity Admin":return"text-green-600 bg-green-100";case"NSight Admin":return"text-indigo-600 bg-indigo-100";case"Employee":return"text-blue-600 bg-blue-100";default:return"text-slate-600 bg-slate-100"}},j=P=>{const M=new Set(c);M.has(P)?M.delete(P):M.add(P),d(M)},S=Math.ceil(t.length/m),E=(s-1)*m,_=E+m,C=t.slice(E,_),N=()=>{n(P=>Math.max(P-1,1))},L=()=>{n(P=>Math.min(P+1,S))};return a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(lt,{className:"h-6 w-6 text-primary-600 mr-2"}),a.jsxs("button",{onClick:()=>f("/user-management"),className:"flex items-center space-x-2 hover:text-blue-400 transition-colors group",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-100 group-hover:text-blue-400",children:"User Management & Activity"}),a.jsx(Vk,{className:"h-4 w-4 text-slate-400 group-hover:text-blue-400"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(N0,{className:"w-3 h-3 text-green-400 fill-current"}),a.jsx("span",{className:"text-green-400 font-semibold",children:u.size}),a.jsx("span",{className:"text-slate-400",children:"Online"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Kk,{className:"w-4 h-4 text-blue-400"}),a.jsx("span",{className:"text-blue-400 font-semibold",children:o.totalLogins||0}),a.jsx("span",{className:"text-slate-400",children:"Logins"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(rf,{className:"w-4 h-4 text-orange-400"}),a.jsx("span",{className:"text-orange-400 font-semibold",children:o.totalLogouts||0}),a.jsx("span",{className:"text-slate-400",children:"Logouts"})]}),a.jsx("div",{className:"text-slate-500 text-xs",children:"Last 24h"})]})]}),(v==null?void 0:v.role)==="Capacity Admin"&&a.jsx(Se,{size:"sm",onClick:()=>f("/user-management?action=add"),children:"Add User"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-slate-600",children:[a.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"User"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"Role"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"Status"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"Last Activity"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"App Access"})]})}),a.jsx("tbody",{children:C.map(P=>a.jsxs(Xl.Fragment,{children:[a.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-750 transition-colors",children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>j(P.id),className:"text-slate-400 hover:text-slate-200 transition-colors",children:c.has(P.id)?a.jsx($n,{className:"w-4 h-4"}):a.jsx(Ia,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(N0,{className:`w-2 h-2 ${P.isOnline?"text-green-400 fill-current":"text-slate-600 fill-current"}`}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-slate-100",children:P.name}),a.jsx("div",{className:"text-sm text-slate-400",children:P.email})]})]})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${k(P.role)}`,children:P.role})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${b(P.status)}`,children:P.status}),P.isOnline&&a.jsx("span",{className:"text-xs text-green-400 font-medium",children:"ONLINE"})]})}),a.jsx("td",{className:"py-3 px-4",children:P.lastLoginActivity?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(gs,{className:`w-4 h-4 ${w0(P.lastLoginActivity.type,P.lastLoginActivity.timestamp)}`}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-slate-300",children:b0(P.lastLoginActivity.timestamp)}),a.jsx("div",{className:"text-xs text-slate-500",children:P.lastLoginActivity.type===Qs.LOGIN?"Last login":"Last logout"})]})]}):a.jsx("span",{className:"text-slate-500 text-sm",children:"No recent activity"})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"flex items-center space-x-2",children:P.appAccess.map((M,B)=>a.jsx("div",{className:"w-8 h-8 bg-slate-700 rounded-md flex items-center justify-center hover:bg-slate-600 transition-colors",title:M.replace(/-/g," ").replace(/\b\w/g,$=>$.toUpperCase()),children:g(M)},B))})})]}),c.has(P.id)&&a.jsx("tr",{className:"bg-slate-800 border-b border-slate-700",children:a.jsx("td",{colSpan:"5",className:"py-4 px-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-slate-200 mb-3",children:"User Details"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"ID:"}),a.jsx("span",{className:"text-slate-300",children:P.id})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Email:"}),a.jsx("span",{className:"text-slate-300",children:P.email})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Department:"}),a.jsx("span",{className:"text-slate-300",children:P.department||"Not specified"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Created:"}),a.jsx("span",{className:"text-slate-300",children:P.created_at?new Date(P.created_at).toLocaleDateString():"Unknown"})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-slate-200 mb-3",children:"Recent Activity"}),a.jsx("div",{className:"space-y-2",children:P.recentActivity&&P.recentActivity.length>0?P.recentActivity.map((M,B)=>a.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[a.jsx(gs,{className:`w-3 h-3 ${w0(M.type,M.timestamp)}`}),a.jsx("span",{className:"text-slate-300",children:M.type===Qs.LOGIN?"Login":"Logout"}),a.jsx("span",{className:"text-slate-500",children:b0(M.timestamp)})]},B)):a.jsx("span",{className:"text-slate-500 text-sm",children:"No recent activity"})})]})]})})})]},P.id))})]})}),S>1&&a.jsxs("div",{className:"flex items-center justify-between mt-6",children:[a.jsxs("div",{className:"text-sm text-slate-400",children:["Showing ",E+1,"-",Math.min(_,t.length)," of ",t.length," users"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Se,{size:"sm",variant:"secondary",onClick:N,disabled:s===1,children:"Previous"}),a.jsxs("span",{className:"text-sm text-slate-400",children:["Page ",s," of ",S]}),a.jsx(Se,{size:"sm",variant:"secondary",onClick:L,disabled:s===S,children:"Next"})]})]}),t.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(lt,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"No users found"}),a.jsx("p",{className:"text-slate-500",children:"Users will appear here once they sign up for accounts."})]})]})},jS=({userData:t})=>{const[e,s]=w.useState(""),[n,r]=w.useState(null),[i,o]=w.useState({x:0,y:0}),[l,c]=w.useState([]),d=w.useRef({}),u=ft(),{getAllUsers:h}=Fs(),f=(x,g)=>{if(!d.current[g])return;const y=d.current[g].getBoundingClientRect(),b=(x.clientX-y.left)/y.width*100,k=(x.clientY-y.top)/y.height*100;o({x:b,y:k})},m=x=>{switch(x){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}};w.useEffect(()=>{(async()=>{try{const{data:g,error:y}=await h();if(y){console.error("Error loading users:",y);return}const b=g.map(k=>({id:k.id,name:`${k.first_name||""} ${k.last_name||""}`.trim()||k.email.split("@")[0],email:k.email,role:k.role||"Employee",status:"Active",lastLogin:k.created_at?new Date(k.created_at).toISOString().split("T")[0]:"Never",contact:"",appAccess:m(k.role||"Employee"),department:k.department||"",created_at:k.created_at,updated_at:k.updated_at}));c(b)}catch(g){console.error("Error in loadUsers:",g)}})()},[]);const p=x=>{const y={Formulas:"formulas","Raw Materials":"raw-materials",Suppliers:"suppliers"}[x];return l.filter(b=>b.appAccess&&b.appAccess.includes(y))},v=[{id:1,title:"Formulas",icon:Rs,glowColor:"rgba(59, 130, 246, 0.3)",iconBgColor:"bg-blue-900",iconColor:"text-blue-400",borderColor:"hover:border-blue-500"},{id:2,title:"Raw Materials",icon:Ds,glowColor:"rgba(249, 115, 22, 0.3)",iconBgColor:"bg-orange-900",iconColor:"text-orange-400",borderColor:"hover:border-orange-500"},{id:3,title:"Suppliers",icon:lt,glowColor:"rgba(217, 70, 239, 0.3)",iconBgColor:"bg-fuchsia-900",iconColor:"text-fuchsia-400",borderColor:"hover:border-fuchsia-500"}];return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"grid grid-cols-3 gap-1 p-2",children:[...Array(9)].map((x,g)=>a.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-sm"},g))}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Dashboard"})]})}),a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(ib,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search by Name",value:e,onChange:x=>s(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-600 rounded-md bg-slate-700 text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(x=>{const g=x.icon;return a.jsx("div",{ref:y=>d.current[x.id]=y,onMouseEnter:()=>r(x.id),onMouseLeave:()=>{r(null),o({x:50,y:50})},onMouseMove:y=>f(y,x.id),className:"relative cursor-pointer",style:{transform:n===x.id?"scale(1.05) translateY(-4px)":"scale(1)",transformOrigin:n===x.id?`${i.x}% ${i.y}%`:"center center",transition:n===x.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},onClick:()=>{x.title==="Formulas"?u("/formulas"):x.title==="Raw Materials"?u("/raw-materials"):x.title==="Suppliers"&&u("/suppliers")},children:a.jsxs(ce,{className:`p-8 hover:shadow-lg transition-all duration-300 h-full relative overflow-hidden border-2 border-transparent ${x.borderColor}`,children:[n===x.id&&a.jsx("div",{className:"absolute inset-0 opacity-20 -z-0",style:{background:`radial-gradient(circle at ${i.x}% ${i.y}%, ${x.glowColor}, transparent 70%)`}}),a.jsxs("div",{className:"flex flex-col items-center text-center space-y-6 relative z-10",children:[a.jsx("div",{className:"w-24 h-24 bg-slate-700 rounded-full flex items-center justify-center transition-all duration-300",style:{transform:n===x.id?"scale(1.1)":"scale(1)",transition:n===x.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},children:a.jsx("div",{className:`w-16 h-16 ${x.iconBgColor} rounded-full flex items-center justify-center`,children:a.jsx(g,{className:`w-8 h-8 ${x.iconColor}`})})}),a.jsx("h3",{className:"text-xl font-medium text-slate-100",children:x.title}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:y=>{y.stopPropagation();const k={Formulas:"formulas","Raw Materials":"raw-materials",Suppliers:"suppliers"}[x.title];u(`/user-management?filterApp=${k}`)},className:"text-sm text-slate-300 hover:text-blue-400 transition-colors underline decoration-dotted hover:decoration-solid",children:"Manage Access"}),a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[p(x.title).slice(0,3).map((y,b)=>a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-slate-400 transition-transform duration-300",style:{transform:n===x.id?"scale(1.05)":"scale(1)",transition:n===x.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${x.title==="Formulas"?"bg-blue-500":x.title==="Raw Materials"?"bg-orange-500":"bg-fuchsia-500"}`}),a.jsx("span",{children:y.name})]},y.id)),p(x.title).length>3&&a.jsxs("div",{className:"text-xs text-slate-500",children:["+",p(x.title).length-3," more"]}),p(x.title).length===0&&a.jsx("div",{className:"text-xs text-slate-500",children:"No users assigned"})]})]})]})]})},x.id)})}),a.jsx(wS,{})]})},z=(t=30)=>{const e=new Date;return e.setDate(e.getDate()-Math.floor(Math.random()*t)),e.toISOString().split("T")[0]},ne=()=>{const t=["formulas","suppliers","raw-materials"],e=Math.floor(Math.random()*3)+1;return t.sort(()=>.5-Math.random()).slice(0,e)},P0=[{id:1,name:"Aidan Manickam",email:"aidan@capacity.com",role:"Employee",status:"Active",lastLogin:"2024-01-15",contact:"",appAccess:["formulas","suppliers"],credentials:"user/temporary pass"},{id:81,name:"Demo Capacity Admin",email:"capacity@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:82,name:"Demo NSight Admin",email:"nsight@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:83,name:"Demo Employee",email:"employee@domain.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas"],credentials:"user/temporary pass"},{id:2,name:"Sarah Johnson",email:"sarah.johnson@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:3,name:"Michael Chen",email:"michael.chen@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:4,name:"Emma Davis",email:"emma.davis@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:5,name:"James Wilson",email:"james.wilson@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:6,name:"Ashley Rodriguez",email:"ashley.rodriguez@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:7,name:"David Thompson",email:"david.thompson@protonmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:8,name:"Jessica Martinez",email:"jessica.martinez@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:9,name:"Robert Anderson",email:"robert.anderson@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:10,name:"Lisa Garcia",email:"lisa.garcia@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:11,name:"Christopher Taylor",email:"christopher.taylor@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:12,name:"Amanda White",email:"amanda.white@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:13,name:"Matthew Brown",email:"matthew.brown@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:14,name:"Nicole Harris",email:"nicole.harris@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:15,name:"Daniel Clark",email:"daniel.clark@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:16,name:"Stephanie Lewis",email:"stephanie.lewis@protonmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:17,name:"Kevin Walker",email:"kevin.walker@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:18,name:"Rachel Hall",email:"rachel.hall@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:19,name:"Brandon Allen",email:"brandon.allen@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:20,name:"Megan Young",email:"megan.young@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:21,name:"Tyler King",email:"tyler.king@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:22,name:"Samantha Wright",email:"samantha.wright@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:23,name:"Andrew Lopez",email:"andrew.lopez@protonmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:24,name:"Lauren Hill",email:"lauren.hill@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:25,name:"Joshua Scott",email:"joshua.scott@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:26,name:"Brittany Green",email:"brittany.green@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:27,name:"Nathan Adams",email:"nathan.adams@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:28,name:"Kayla Baker",email:"kayla.baker@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:29,name:"Ryan Gonzalez",email:"ryan.gonzalez@protonmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:30,name:"Alexis Nelson",email:"alexis.nelson@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:31,name:"Jordan Carter",email:"jordan.carter@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:32,name:"Taylor Mitchell",email:"taylor.mitchell@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:33,name:"Austin Perez",email:"austin.perez@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:34,name:"Chloe Roberts",email:"chloe.roberts@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:35,name:"Marcus Turner",email:"marcus.turner@protonmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:36,name:"Jasmine Phillips",email:"jasmine.phillips@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:37,name:"Ethan Campbell",email:"ethan.campbell@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:38,name:"Victoria Parker",email:"victoria.parker@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:39,name:"Cameron Evans",email:"cameron.evans@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:40,name:"Destiny Edwards",email:"destiny.edwards@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:41,name:"Blake Collins",email:"blake.collins@protonmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:42,name:"Paige Stewart",email:"paige.stewart@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:43,name:"Hunter Sanchez",email:"hunter.sanchez@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:44,name:"Sierra Morris",email:"sierra.morris@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:45,name:"Caleb Rogers",email:"caleb.rogers@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:46,name:"Autumn Reed",email:"autumn.reed@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:47,name:"Garrett Cook",email:"garrett.cook@protonmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:48,name:"Savannah Bailey",email:"savannah.bailey@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:49,name:"Derek Rivera",email:"derek.rivera@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:50,name:"Trevor Richardson",email:"trevor.richardson@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:ne(),credentials:"user/temporary pass"},{id:51,name:"Alexandra Bennett",email:"alexandra.bennett@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:52,name:"Jonathan Martinez",email:"jonathan.martinez@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:53,name:"Michelle Thompson",email:"michelle.thompson@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:54,name:"Steven Rodriguez",email:"steven.rodriguez@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:55,name:"Rebecca Davis",email:"rebecca.davis@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:56,name:"Kenneth Wilson",email:"kenneth.wilson@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:57,name:"Patricia Moore",email:"patricia.moore@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:58,name:"Gregory Taylor",email:"gregory.taylor@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:59,name:"Diana Anderson",email:"diana.anderson@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:60,name:"Benjamin Jackson",email:"benjamin.jackson@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:61,name:"Catherine White",email:"catherine.white@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:62,name:"Philip Harris",email:"philip.harris@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:63,name:"Stephanie Martin",email:"stephanie.martin@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:64,name:"Ronald Clark",email:"ronald.clark@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:65,name:"Melissa Lewis",email:"melissa.lewis@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:66,name:"Alexander Pierce",email:"alexander.pierce@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:67,name:"Samantha Foster",email:"samantha.foster@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:68,name:"Nicholas Ward",email:"nicholas.ward@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:69,name:"Jennifer Torres",email:"jennifer.torres@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:70,name:"Gabriel Peterson",email:"gabriel.peterson@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:71,name:"Christina Gray",email:"christina.gray@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:72,name:"Lucas Ramirez",email:"lucas.ramirez@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:73,name:"Vanessa James",email:"vanessa.james@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:74,name:"Victor Watson",email:"victor.watson@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:75,name:"Monica Brooks",email:"monica.brooks@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:76,name:"Adrian Kelly",email:"adrian.kelly@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:77,name:"Natalie Sanders",email:"natalie.sanders@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:78,name:"Isaac Price",email:"isaac.price@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:79,name:"Olivia Bennett",email:"olivia.bennett@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:80,name:"Mason Powell",email:"mason.powell@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"}],NS=()=>{const t=localStorage.getItem("capacity-users"),e=localStorage.getItem("capacity-users-version"),s="1.1";return e!==s?(localStorage.removeItem("capacity-users"),localStorage.setItem("capacity-users-version",s),console.log("User data version updated, using fresh data"),[...P0]):t?JSON.parse(t):[...P0]};let _S=NS();const kS=()=>[..._S],SS=()=>{localStorage.removeItem("capacity-users"),localStorage.removeItem("capacity-users-version"),console.log("User cache cleared. Refresh the page to reload fresh data.")};typeof window<"u"&&(window.clearUserCache=SS);const Ss=t=>t.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").replace(/--+/g,"-").replace(/^-|-$/g,""),CS=[{id:Ss("CALCIUM CHLORIDE (100%)"),materialName:"CALCIUM CHLORIDE (100%)",supplierName:"ChemSupply Co.",manufacture:"Dow Chemical",tradeName:"DowFlake Xtra",supplierCost:2.15,casNumber:"10043-52-4",weightVolume:8.34,density:2.15,country:"USA",description:"High purity calcium chloride for industrial applications. Used as a desiccant, deicing agent, and concrete accelerator. Excellent solubility in water with strong exothermic reaction. Essential for oil and gas drilling operations.",physicalForm:"Flakes",purity:"100%",storageConditions:"Store in dry place, avoid moisture. Keep container tightly closed.",hazardClass:"Irritant",shelfLife:"24 months"},{id:Ss("60% HEDP Liquid Tech Grade"),materialName:"60% HEDP Liquid Tech Grade",supplierName:"Industrial Chemicals Ltd.",manufacture:"Kemira",tradeName:"Dequest 2010",supplierCost:3.45,casNumber:"2809-21-4",weightVolume:9.2,density:1.4,country:"Finland",description:"Chelating agent for water treatment applications. Excellent scale and corrosion inhibitor. Forms stable complexes with metal ions. Used in cooling water systems, boiler water treatment, and textile processing.",physicalForm:"Liquid",purity:"60%",storageConditions:"Store at room temperature. Protect from freezing.",hazardClass:"Corrosive",shelfLife:"12 months"},{id:Ss("Acetic Acid, Glacial"),materialName:"Acetic Acid, Glacial",supplierName:"Acid Solutions Inc.",manufacture:"Eastman Chemical",tradeName:"Glacial Acetic Acid",supplierCost:8.76,casNumber:"64-19-7",weightVolume:8.74,density:1.05,country:"USA",description:"Pure acetic acid for chemical synthesis and pH adjustment. High purity grade suitable for analytical and industrial applications. Used in manufacturing acetate esters, cellulose acetate, and various chemical intermediates.",physicalForm:"Liquid",purity:"99.5%",storageConditions:"Store in cool, dry place. Keep away from heat sources.",hazardClass:"Corrosive",shelfLife:"36 months"},{id:Ss("Sodium Molybdate Crystals, Tech Grade"),materialName:"Sodium Molybdate Crystals, Tech Grade",supplierName:"Specialty Metals Corp.",manufacture:"Climax Molybdenum",tradeName:"Sodium Molybdate Dihydrate",supplierCost:12.5,casNumber:"10102-40-6",weightVolume:22.4,density:3.78,country:"USA",description:"Technical grade sodium molybdate for corrosion inhibition and metal treatment. Provides excellent protection against pitting and general corrosion. Used in cooling water systems and as a corrosion inhibitor additive.",physicalForm:"Crystals",purity:"Technical Grade",storageConditions:"Store in dry conditions. Protect from moisture.",hazardClass:"Non-hazardous",shelfLife:"60 months"},{id:Ss("HPMA (homopolymer of maleic acid) 50%"),materialName:"HPMA (homopolymer of maleic acid) 50%",supplierName:"Polymer Technologies",manufacture:"Dow Chemical",tradeName:"Belclene 200",supplierCost:5.65,casNumber:"26677-99-6",weightVolume:9.8,density:1.18,country:"USA",description:"Scale inhibitor polymer for water treatment. Prevents calcium carbonate, calcium sulfate, and calcium phosphate scale formation. Effective over wide pH range. Used in cooling towers, boilers, and reverse osmosis systems.",physicalForm:"Liquid",purity:"50%",storageConditions:"Store between 5-40°C. Do not freeze.",hazardClass:"Non-hazardous",shelfLife:"24 months"},{id:Ss("PBTC Phosphonobutane Tricarboxylic Acid"),materialName:"PBTC Phosphonobutane Tricarboxylic Acid",supplierName:"Water Treatment Chemicals",manufacture:"Italmatch Chemicals",tradeName:"Dequest 7000",supplierCost:1.55,casNumber:"37971-36-1",weightVolume:10.2,density:1.25,country:"Italy",description:"Organophosphonate for scale and corrosion control. Excellent chelating properties for metal ions. Superior performance in high temperature and high pH conditions. Used in industrial water treatment and oil field applications.",physicalForm:"Liquid",purity:"50%",storageConditions:"Store at room temperature. Avoid freezing.",hazardClass:"Irritant",shelfLife:"24 months"},{id:Ss("Sodium Hypochlorite Solution 12.5%"),materialName:"Sodium Hypochlorite Solution 12.5%",supplierName:"Bleach Supply Co.",manufacture:"Olin Corporation",tradeName:"Liquid Bleach",supplierCost:2.34,casNumber:"7681-52-9",weightVolume:10.4,density:1.2,country:"USA",description:"Chlorine-based disinfectant and bleaching agent. Powerful oxidizing agent for water disinfection and surface sanitization. Effective against bacteria, viruses, and algae. Used in municipal water treatment and swimming pool maintenance.",physicalForm:"Liquid",purity:"12.5%",storageConditions:"Store in cool, dark place. Protect from light and heat.",hazardClass:"Oxidizer, Corrosive",shelfLife:"6 months"},{id:Ss("Citric Acid Anhydrous"),materialName:"Citric Acid Anhydrous",supplierName:"Food Grade Chemicals",manufacture:"Cargill",tradeName:"CitriSafe",supplierCost:3.45,casNumber:"77-92-9",weightVolume:13.9,density:1.67,country:"Brazil",description:"Food grade citric acid for pH adjustment and chelation. Natural preservative and flavoring agent. Used in food and beverage industry, cosmetics, and cleaning products. Excellent buffering capacity and metal chelation properties.",physicalForm:"Powder",purity:"99.5%",storageConditions:"Store in dry conditions. Keep away from moisture.",hazardClass:"Non-hazardous",shelfLife:"60 months"},{id:Ss("Hydrogen Peroxide 35%"),materialName:"Hydrogen Peroxide 35%",supplierName:"Peroxide Solutions LLC",manufacture:"Solvay",tradeName:"Proxitane AHP35",supplierCost:4.89,casNumber:"7722-84-1",weightVolume:9.4,density:1.13,country:"Belgium",description:"Industrial grade hydrogen peroxide for oxidation processes. Powerful oxidizing and bleaching agent. Used in pulp and paper bleaching, water treatment, and chemical synthesis. Environmentally friendly as it decomposes to water and oxygen.",physicalForm:"Liquid",purity:"35%",storageConditions:"Store in cool, ventilated area. Keep away from heat and combustibles.",hazardClass:"Oxidizer, Corrosive",shelfLife:"12 months"},{id:Ss("Potassium Hydroxide Flakes 90%"),materialName:"Potassium Hydroxide Flakes 90%",supplierName:"Caustic Supply Inc.",manufacture:"Olin Corporation",tradeName:"KOH Technical Grade",supplierCost:6.78,casNumber:"1310-58-3",weightVolume:17,density:2.04,country:"USA",description:"Technical grade potassium hydroxide for pH adjustment and chemical processing. Strong alkaline material used in soap manufacturing, biodiesel production, and water treatment. Highly soluble in water with significant heat generation.",physicalForm:"Flakes",purity:"90%",storageConditions:"Store in dry, sealed containers. Protect from moisture and CO2.",hazardClass:"Corrosive",shelfLife:"60 months"}],ES="raw_materials_data",PS=()=>{try{const t=localStorage.getItem(ES);if(t)return JSON.parse(t)}catch(t){console.warn("Failed to load materials from localStorage:",t)}return[...CS]};PS();const AS=[{id:"HDST001",name:"Heavy Duty Steam Title Placeholder",totalCost:245.67,finalSalePriceDrum:589.99,finalSalePriceTote:1249.99,ingredients:[{name:"Sodium Hydroxide",percentage:35.2,cost:87.45},{name:"Calcium Carbonate",percentage:25.8,cost:56.23},{name:"Ethylene Glycol",percentage:20.1,cost:78.12},{name:"Surfactant Blend",percentage:12.4,cost:23.87},{name:"Corrosion Inhibitor",percentage:6.5,cost:0}]},{id:"MDCL002",name:"Multi-Purpose Degreaser Compound",totalCost:156.34,finalSalePriceDrum:389.99,finalSalePriceTote:799.99,ingredients:[{name:"Isopropyl Alcohol",percentage:45,cost:78.9},{name:"Sodium Carbonate",percentage:25,cost:34.12},{name:"Citric Acid",percentage:15,cost:23.45},{name:"Non-ionic Surfactant",percentage:10,cost:19.87},{name:"Water",percentage:5,cost:0}]},{id:"INDL003",name:"Industrial Solvent Formula XP",totalCost:334.12,finalSalePriceDrum:789.99,finalSalePriceTote:1549.99,ingredients:[{name:"Methylene Chloride",percentage:40,cost:145.67},{name:"Acetone",percentage:30,cost:89.34},{name:"Toluene",percentage:20,cost:67.23},{name:"Stabilizer Blend",percentage:8,cost:31.88},{name:"Antioxidant",percentage:2,cost:0}]}],LS="formulas_data",TS=()=>{try{const t=localStorage.getItem(LS);if(t)return JSON.parse(t)}catch(t){console.warn("Failed to load formulas from localStorage:",t)}return[...AS]};TS();const A0=({userData:t})=>{const[e,s]=w.useState(""),[n,r]=w.useState(null),[i,o]=w.useState({x:0,y:0}),[l,c]=w.useState([]),d=w.useRef({}),u=ft(),h=(x,g)=>{if(!d.current[g])return;const y=d.current[g].getBoundingClientRect(),b=(x.clientX-y.left)/y.width*100,k=(x.clientY-y.top)/y.height*100;o({x:b,y:k})};w.useEffect(()=>{const x=()=>{c(kS())};x();const g=setInterval(x,2e3);return()=>clearInterval(g)},[]);const f=x=>l.filter(g=>g.appAccess&&g.appAccess.includes(x)),m=[{id:1,title:"Formulas",icon:Rs,glowColor:"rgba(59, 130, 246, 0.3)",iconBgColor:"bg-blue-900",iconColor:"text-blue-400",borderColor:"hover:border-blue-500",appKey:"formulas"},{id:2,title:"Raw Materials",icon:Ds,glowColor:"rgba(249, 115, 22, 0.3)",iconBgColor:"bg-orange-900",iconColor:"text-orange-400",borderColor:"hover:border-orange-500",appKey:"raw-materials"},{id:3,title:"Suppliers",icon:lt,glowColor:"rgba(217, 70, 239, 0.3)",iconBgColor:"bg-fuchsia-900",iconColor:"text-fuchsia-400",borderColor:"hover:border-fuchsia-500",appKey:"suppliers"}],p=t&&t.appAccess?m.filter(x=>t.appAccess.includes(x.appKey)):m,v=x=>x===1?"flex justify-center gap-6":x===2?"flex justify-center gap-6 flex-wrap":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6";return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"grid grid-cols-3 gap-1 p-2",children:[...Array(9)].map((x,g)=>a.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-sm"},g))}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Dashboard"}),t&&a.jsxs("p",{className:"text-slate-400 text-sm mt-1",children:["Welcome back, ",t.name.split(" ")[0],"!"]})]})]}),t&&a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-slate-300 font-medium",children:t.name}),a.jsx("p",{className:"text-slate-400 text-sm",children:t.email}),a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-600 mt-1",children:t.role})]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(ib,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search by Name",value:e,onChange:x=>s(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-600 rounded-md bg-slate-700 text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),a.jsx("div",{className:v(p.length),children:p.map(x=>{const g=x.icon;return a.jsx("div",{ref:y=>d.current[x.id]=y,onMouseEnter:()=>r(x.id),onMouseLeave:()=>{r(null),o({x:50,y:50})},onMouseMove:y=>h(y,x.id),className:`relative cursor-pointer ${p.length<=2?"w-80":""}`,style:{transform:n===x.id?"scale(1.05) translateY(-4px)":"scale(1)",transformOrigin:n===x.id?`${i.x}% ${i.y}%`:"center center",transition:n===x.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},onClick:()=>{x.appKey==="formulas"?u("/formulas"):x.appKey==="raw-materials"?u("/raw-materials"):x.appKey==="suppliers"&&u("/suppliers")},children:a.jsxs(ce,{className:`p-8 hover:shadow-lg transition-all duration-300 h-full relative overflow-hidden border-2 border-transparent ${x.borderColor}`,children:[n===x.id&&a.jsx("div",{className:"absolute inset-0 opacity-20 -z-0",style:{background:`radial-gradient(circle at ${i.x}% ${i.y}%, ${x.glowColor}, transparent 70%)`}}),a.jsxs("div",{className:"flex flex-col items-center text-center space-y-6 relative z-10",children:[a.jsx("div",{className:"w-24 h-24 bg-slate-700 rounded-full flex items-center justify-center transition-all duration-300",style:{transform:n===x.id?"scale(1.1)":"scale(1)",transition:n===x.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},children:a.jsx("div",{className:`w-16 h-16 ${x.iconBgColor} rounded-full flex items-center justify-center`,children:a.jsx(g,{className:`w-8 h-8 ${x.iconColor}`})})}),a.jsx("h3",{className:"text-xl font-medium text-slate-100",children:x.title}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-sm text-slate-300",children:"Request Access"}),a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[f(x.appKey).slice(0,3).map((y,b)=>a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-slate-400 transition-transform duration-300",style:{transform:n===x.id?"scale(1.05)":"scale(1)",transition:n===x.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${x.appKey==="formulas"?"bg-blue-500":x.appKey==="raw-materials"?"bg-orange-500":"bg-fuchsia-500"}`}),a.jsx("span",{children:y.name})]},y.id)),f(x.appKey).length>3&&a.jsxs("div",{className:"text-xs text-slate-500",children:["+",f(x.appKey).length-3," more"]}),f(x.appKey).length===0&&a.jsx("div",{className:"text-xs text-slate-500",children:"No users assigned"})]})]})]})]})},x.id)})})]})},MS=({isOpen:t,onClose:e,onSave:s})=>{const[n,r]=w.useState(1),[i,o]=w.useState({companyName:"",industry:"Chemical Manufacturing",companySize:"1-50",website:"",country:"United States",timezone:"America/New_York",contactName:"",contactEmail:"",contactPhone:"",contactTitle:"CEO",databaseIsolation:"schema",dataRetention:"7-years",backupFrequency:"daily",apiRateLimit:"1000",dataResidency:"us-east",complianceStandards:["ISO9001"],ssoEnabled:!1,twoFactorRequired:!1,subscriptionTier:"professional",billingContact:"",billingEmail:"",paymentMethod:"invoice",adminUserName:"",adminUserEmail:"",defaultDepartments:["Production","Quality Control","Research"],initialApps:["formulas","raw-materials"]}),l=6,c=["Chemical Manufacturing","Pharmaceuticals","Cosmetics & Personal Care","Food & Beverage","Materials Science","Petrochemicals","Specialty Chemicals","Other"],d=["1-10","11-50","51-200","201-500","501-1000","1000+"],u=[{id:"ISO9001",label:"ISO 9001 (Quality Management)"},{id:"ISO14001",label:"ISO 14001 (Environmental)"},{id:"OSHA",label:"OSHA Safety Standards"},{id:"FDA",label:"FDA Compliance"},{id:"REACH",label:"REACH Regulation (EU)"},{id:"GMP",label:"Good Manufacturing Practice"}],h=[{id:"starter",name:"Starter",price:"$99/month",features:["Up to 10 users","Basic apps","Email support"]},{id:"professional",name:"Professional",price:"$299/month",features:["Up to 50 users","All apps","Priority support","Advanced analytics"]},{id:"enterprise",name:"Enterprise",price:"Custom",features:["Unlimited users","Custom apps","Dedicated support","SSO integration"]}],f=[{id:"formulas",name:"Formulas Management",description:"Chemical formula creation and management"},{id:"raw-materials",name:"Raw Materials",description:"Inventory and supplier management"},{id:"suppliers",name:"Suppliers",description:"Supplier relationship management"},{id:"analytics",name:"Analytics",description:"Advanced reporting and insights"},{id:"compliance",name:"Compliance",description:"Safety and regulatory compliance"},{id:"quality",name:"Quality Control",description:"Quality assurance workflows"}],m=(N,L)=>{o(P=>({...P,[N]:L}))},p=(N,L)=>{o(P=>({...P,[N]:P[N].includes(L)?P[N].filter(M=>M!==L):[...P[N],L]}))},v=()=>{n<l&&r(n+1)},x=()=>{n>1&&r(n-1)},g=()=>{const P=({1:["companyName","industry"],2:["contactName","contactEmail"],3:[],4:[],5:["billingContact","billingEmail"],6:["adminUserName","adminUserEmail"]}[n]||[]).filter(M=>!i[M].trim());if(P.length>0){alert(`Please fill in all required fields: ${P.join(", ")}`);return}if(n===l){const M={id:Date.now(),...i,status:"Active",createdAt:new Date().toISOString(),setupComplete:!0};s(M),y()}else v()},y=()=>{r(1),o({companyName:"",industry:"Chemical Manufacturing",companySize:"1-50",website:"",country:"United States",timezone:"America/New_York",contactName:"",contactEmail:"",contactPhone:"",contactTitle:"CEO",databaseIsolation:"schema",dataRetention:"7-years",backupFrequency:"daily",apiRateLimit:"1000",dataResidency:"us-east",complianceStandards:["ISO9001"],ssoEnabled:!1,twoFactorRequired:!1,subscriptionTier:"professional",billingContact:"",billingEmail:"",paymentMethod:"invoice",adminUserName:"",adminUserEmail:"",defaultDepartments:["Production","Quality Control","Research"],initialApps:["formulas","raw-materials"]}),e()};if(!t)return null;const b=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(tn,{className:"w-12 h-12 text-blue-500 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Company Information"}),a.jsx("p",{className:"text-slate-400",children:"Basic details about the new client company"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Company Name *"}),a.jsx("input",{type:"text",value:i.companyName,onChange:N=>m("companyName",N.target.value),placeholder:"Enter company name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Industry *"}),a.jsx("select",{value:i.industry,onChange:N=>m("industry",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:c.map(N=>a.jsx("option",{value:N,children:N},N))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Company Size"}),a.jsx("select",{value:i.companySize,onChange:N=>m("companySize",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:d.map(N=>a.jsxs("option",{value:N,children:[N," employees"]},N))})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Website"}),a.jsx("input",{type:"url",value:i.website,onChange:N=>m("website",N.target.value),placeholder:"https://company.com",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Country"}),a.jsxs("select",{value:i.country,onChange:N=>m("country",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"United States",children:"United States"}),a.jsx("option",{value:"Canada",children:"Canada"}),a.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),a.jsx("option",{value:"Germany",children:"Germany"}),a.jsx("option",{value:"Japan",children:"Japan"}),a.jsx("option",{value:"Other",children:"Other"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Timezone"}),a.jsxs("select",{value:i.timezone,onChange:N=>m("timezone",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"America/New_York",children:"Eastern Time (UTC-5)"}),a.jsx("option",{value:"America/Chicago",children:"Central Time (UTC-6)"}),a.jsx("option",{value:"America/Denver",children:"Mountain Time (UTC-7)"}),a.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (UTC-8)"}),a.jsx("option",{value:"Europe/London",children:"London (UTC+0)"}),a.jsx("option",{value:"Europe/Berlin",children:"Berlin (UTC+1)"}),a.jsx("option",{value:"Asia/Tokyo",children:"Tokyo (UTC+9)"})]})]})]})]}),k=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(rS,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Primary Contact"}),a.jsx("p",{className:"text-slate-400",children:"Main point of contact for this company"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Contact Name *"}),a.jsx("input",{type:"text",value:i.contactName,onChange:N=>m("contactName",N.target.value),placeholder:"Full name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Title/Position"}),a.jsx("input",{type:"text",value:i.contactTitle,onChange:N=>m("contactTitle",N.target.value),placeholder:"CEO, CTO, etc.",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Email Address *"}),a.jsx("input",{type:"email",value:i.contactEmail,onChange:N=>m("contactEmail",N.target.value),placeholder:"contact@company.com",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Phone Number"}),a.jsx("input",{type:"tel",value:i.contactPhone,onChange:N=>m("contactPhone",N.target.value),placeholder:"+1 (555) 123-4567",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),j=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(As,{className:"w-12 h-12 text-purple-500 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Technical Configuration"}),a.jsx("p",{className:"text-slate-400",children:"Database and API settings"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Database Isolation"}),a.jsxs("select",{value:i.databaseIsolation,onChange:N=>m("databaseIsolation",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"schema",children:"Schema-based (Recommended)"}),a.jsx("option",{value:"database",children:"Separate Database"})]}),a.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Schema-based is more cost-effective"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Data Retention"}),a.jsxs("select",{value:i.dataRetention,onChange:N=>m("dataRetention",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"1-year",children:"1 Year"}),a.jsx("option",{value:"3-years",children:"3 Years"}),a.jsx("option",{value:"7-years",children:"7 Years (Recommended)"}),a.jsx("option",{value:"indefinite",children:"Indefinite"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Backup Frequency"}),a.jsxs("select",{value:i.backupFrequency,onChange:N=>m("backupFrequency",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"daily",children:"Daily (Recommended)"}),a.jsx("option",{value:"weekly",children:"Weekly"}),a.jsx("option",{value:"monthly",children:"Monthly"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"API Rate Limit (per hour)"}),a.jsxs("select",{value:i.apiRateLimit,onChange:N=>m("apiRateLimit",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"500",children:"500 requests/hour"}),a.jsx("option",{value:"1000",children:"1,000 requests/hour"}),a.jsx("option",{value:"5000",children:"5,000 requests/hour"}),a.jsx("option",{value:"unlimited",children:"Unlimited"})]})]})]})]}),S=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(tS,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Security & Compliance"}),a.jsx("p",{className:"text-slate-400",children:"Security settings and compliance requirements"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Data Residency"}),a.jsxs("select",{value:i.dataResidency,onChange:N=>m("dataResidency",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"us-east",children:"US East (Virginia)"}),a.jsx("option",{value:"us-west",children:"US West (California)"}),a.jsx("option",{value:"eu-central",children:"EU Central (Frankfurt)"}),a.jsx("option",{value:"asia-pacific",children:"Asia Pacific (Tokyo)"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-3",children:"Compliance Standards"}),a.jsx("div",{className:"space-y-2",children:u.map(N=>a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:i.complianceStandards.includes(N.id),onChange:()=>p("complianceStandards",N.id),className:"w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500"}),a.jsx("span",{className:"text-slate-200",children:N.label})]},N.id))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:i.ssoEnabled,onChange:N=>m("ssoEnabled",N.target.checked),className:"w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-200 font-medium",children:"Enable SSO"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Single Sign-On integration"})]})]}),a.jsxs("label",{className:"flex items-center space-x-3",children:[a.jsx("input",{type:"checkbox",checked:i.twoFactorRequired,onChange:N=>m("twoFactorRequired",N.target.checked),className:"w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500"}),a.jsxs("div",{children:[a.jsx("span",{className:"text-slate-200 font-medium",children:"Require 2FA"}),a.jsx("p",{className:"text-xs text-slate-400",children:"Two-factor authentication"})]})]})]})]})]}),E=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(Wk,{className:"w-12 h-12 text-yellow-500 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Subscription & Billing"}),a.jsx("p",{className:"text-slate-400",children:"Choose plan and billing details"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-3",children:"Subscription Tier"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:h.map(N=>a.jsx("button",{onClick:()=>m("subscriptionTier",N.id),className:`p-4 rounded-lg border transition-all ${i.subscriptionTier===N.id?"border-blue-500 bg-blue-500/10":"border-slate-600 bg-slate-700/50 hover:bg-slate-600/50"}`,children:a.jsxs("div",{className:"text-center",children:[a.jsx("h4",{className:"font-semibold text-slate-100",children:N.name}),a.jsx("p",{className:"text-blue-400 font-bold",children:N.price}),a.jsx("ul",{className:"text-xs text-slate-300 mt-2 space-y-1",children:N.features.map((L,P)=>a.jsxs("li",{children:["• ",L]},P))})]})},N.id))})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Billing Contact *"}),a.jsx("input",{type:"text",value:i.billingContact,onChange:N=>m("billingContact",N.target.value),placeholder:"Full name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Billing Email *"}),a.jsx("input",{type:"email",value:i.billingEmail,onChange:N=>m("billingEmail",N.target.value),placeholder:"billing@company.com",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Payment Method"}),a.jsxs("select",{value:i.paymentMethod,onChange:N=>m("paymentMethod",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[a.jsx("option",{value:"invoice",children:"Invoice (NET 30)"}),a.jsx("option",{value:"credit-card",children:"Credit Card"}),a.jsx("option",{value:"ach",children:"ACH Transfer"}),a.jsx("option",{value:"wire",children:"Wire Transfer"})]})]})]})]}),_=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center mb-6",children:[a.jsx(ob,{className:"w-12 h-12 text-cyan-500 mx-auto mb-3"}),a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Initial Setup"}),a.jsx("p",{className:"text-slate-400",children:"Create admin user and configure initial apps"})]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Admin User Name *"}),a.jsx("input",{type:"text",value:i.adminUserName,onChange:N=>m("adminUserName",N.target.value),placeholder:"Full name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Admin User Email *"}),a.jsx("input",{type:"email",value:i.adminUserEmail,onChange:N=>m("adminUserEmail",N.target.value),placeholder:"admin@company.com",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-3",children:"Default Departments"}),a.jsxs("div",{className:"flex flex-wrap gap-2",children:[i.defaultDepartments.map((N,L)=>a.jsxs("span",{className:"px-3 py-1 bg-blue-600 text-white rounded-full text-sm flex items-center space-x-1",children:[a.jsx("span",{children:N}),a.jsx("button",{onClick:()=>{const P=i.defaultDepartments.filter((M,B)=>B!==L);m("defaultDepartments",P)},className:"ml-1 hover:bg-blue-700 rounded-full p-0.5",children:a.jsx(ut,{className:"w-3 h-3"})})]},L)),a.jsx("input",{type:"text",placeholder:"Add department...",className:"px-3 py-1 bg-slate-700 border border-slate-600 rounded-full text-sm text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-1 focus:ring-blue-500",onKeyPress:N=>{N.key==="Enter"&&N.target.value.trim()&&(m("defaultDepartments",[...i.defaultDepartments,N.target.value.trim()]),N.target.value="")}})]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-3",children:"Initial Applications"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:f.map(N=>{const L=i.initialApps.includes(N.id);return a.jsx("button",{onClick:()=>p("initialApps",N.id),className:`p-3 rounded-lg border text-left transition-all ${L?"border-blue-500 bg-blue-500/10":"border-slate-600 bg-slate-700/50 hover:bg-slate-600/50"}`,children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"font-medium text-slate-100",children:N.name}),a.jsx("p",{className:"text-xs text-slate-400",children:N.description})]}),L&&a.jsx(Ra,{className:"w-5 h-5 text-blue-400"})]})},N.id)})})]})]})]}),C=()=>{switch(n){case 1:return b();case 2:return k();case 3:return j();case 4:return S();case 5:return E();case 6:return _();default:return b()}};return a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:y}),a.jsxs("div",{className:"relative bg-slate-800 rounded-lg shadow-xl w-full max-w-4xl mx-4 border border-slate-700 max-h-[90vh] overflow-hidden",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:"Create New Company"}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsxs("span",{className:"text-sm text-slate-400",children:["Step ",n," of ",l]}),a.jsx("div",{className:"flex space-x-1",children:Array.from({length:l},(N,L)=>a.jsx("div",{className:`w-2 h-2 rounded-full ${L+1<=n?"bg-blue-500":"bg-slate-600"}`},L))})]})]}),a.jsx("button",{onClick:y,className:"p-1 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(ut,{className:"h-5 w-5 text-slate-400"})})]}),a.jsx("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 140px)"},children:C()}),a.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-slate-700",children:[a.jsx(Se,{variant:"secondary",onClick:n===1?y:x,className:"bg-slate-700 hover:bg-slate-600 text-slate-200",children:n===1?a.jsxs(a.Fragment,{children:[a.jsx(ut,{className:"w-4 h-4 mr-2"}),"Cancel"]}):a.jsxs(a.Fragment,{children:[a.jsx(kt,{className:"w-4 h-4 mr-2"}),"Previous"]})}),a.jsx(Se,{onClick:g,className:"bg-blue-600 hover:bg-blue-500 text-white",children:n===l?a.jsxs(a.Fragment,{children:[a.jsx(Ra,{className:"w-4 h-4 mr-2"}),"Create Company"]}):a.jsxs(a.Fragment,{children:["Next",a.jsx(Uk,{className:"w-4 h-4 ml-2"})]})})]})]})]})},DS=({userData:t})=>{const e=ft(),s=$t(),[n,r]=w.useState(null),[i,o]=w.useState(!1),[l,c]=w.useState([]),[d,u]=w.useState(!0),[h,f]=w.useState(null),p=new URLSearchParams(s.search).get("mode"),v=[{id:"formulas",name:"Formulas",icon:As,description:"Chemical formula management"},{id:"suppliers",name:"Suppliers",icon:tn,description:"Supplier relationship management"},{id:"raw-materials",name:"Raw Materials",icon:Ou,description:"Raw material inventory"},{id:"analytics",name:"Analytics",icon:Bl,description:"Data analytics and reporting"}],x=async()=>{try{u(!0),f(null);const C=await fetch("/api/admin/companies"),N=await C.json();if(!C.ok)throw new Error(N.error||"Failed to fetch companies");if(N.success)c(N.companies),console.log("✅ Loaded companies from database:",N.companies.length);else throw new Error("Invalid API response")}catch(C){console.error("❌ Failed to fetch companies:",C),f(C.message),c([{id:"sample-1",name:"Capacity Chemical",users:12,apps:["Formulas","Suppliers","Raw Materials"]},{id:"sample-2",name:"Industrial Solutions Inc",users:8,apps:["Formulas","Suppliers"]}])}finally{u(!1)}};w.useEffect(()=>{x()},[]),w.useEffect(()=>{r(null)},[p]);const g=C=>{e(`/dashboard?mode=${C}`)},y=()=>{e("/dashboard")},b=C=>{r(C)},k=async C=>{try{console.log("🏢 Creating company via API:",C.companyName);const N=await fetch("/api/admin/companies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(C)}),L=await N.json();if(!N.ok)throw new Error(L.error||"Failed to create company");if(L.success)console.log("✅ Company created successfully:",L.company.company_name),await x(),alert(`Company "${L.company.company_name}" created successfully!`);else throw new Error("Invalid API response")}catch(N){console.error("❌ Failed to create company:",N),alert(`Failed to create company: ${N.message}`)}},j=()=>a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"Nsight Admin Dashboard"}),a.jsx("p",{className:"text-slate-400",children:"Choose your administrative mode"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:[a.jsx(ce,{className:"p-8 cursor-pointer hover:bg-slate-750 transition-all duration-200 border-2 border-transparent hover:border-blue-500",onClick:()=>g("developer"),children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto",children:a.jsx(Si,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"text-xl font-semibold text-slate-100",children:"Developer Mode"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Create new companies and develop custom applications for clients"}),a.jsxs("div",{className:"pt-4 space-y-2 text-xs text-slate-500",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(yr,{className:"h-3 w-3"}),a.jsx("span",{children:"Create New Company"})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(As,{className:"h-3 w-3"}),a.jsx("span",{children:"Create Apps"})]})]})]})}),a.jsx(ce,{className:"p-8 cursor-pointer hover:bg-slate-750 transition-all duration-200 border-2 border-transparent hover:border-green-500",onClick:()=>g("existing"),children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto",children:a.jsx(tn,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"text-xl font-semibold text-slate-100",children:"Existing Company Mode"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Manage existing companies, users, and applications"}),a.jsxs("div",{className:"pt-4 space-y-2 text-xs text-slate-500",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(lt,{className:"h-3 w-3"}),a.jsx("span",{children:"Manage Users"})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(Du,{className:"h-3 w-3"}),a.jsx("span",{children:"Edit/Add Apps"})]})]})]})})]})]}),S=()=>a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:y,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"Developer Mode"}),a.jsx("p",{className:"text-slate-400",children:"Create and configure new companies and applications"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(yr,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Create New Company"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Set up a new client company"})]})]}),a.jsx("button",{onClick:()=>o(!0),className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Company"})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(As,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Create Apps"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Develop custom applications"})]})]}),a.jsx("button",{className:"w-full px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create App"})]})]}),a.jsxs(ce,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100 mb-4",children:"Available App Templates"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:v.map(C=>{const N=C.icon;return a.jsxs("div",{className:"p-4 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx(N,{className:"h-5 w-5 text-blue-400"}),a.jsx("span",{className:"text-slate-200 font-medium",children:C.name})]}),a.jsx("p",{className:"text-slate-400 text-xs",children:C.description})]},C.id)})})]})]}),E=()=>a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:y,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"Existing Company Mode"}),a.jsx("p",{className:"text-slate-400",children:"Manage existing companies and their configurations"})]})]}),n?_():a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Select Company"}),h&&a.jsx("button",{onClick:x,className:"text-sm text-blue-400 hover:text-blue-300 transition-colors",children:"Retry"})]}),h&&a.jsxs("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-700 rounded-lg",children:[a.jsxs("p",{className:"text-red-300 text-sm",children:["⚠️ ",h]}),a.jsx("p",{className:"text-red-400 text-xs mt-1",children:"Showing sample data"})]}),d?a.jsxs("div",{className:"flex items-center justify-center py-8",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),a.jsx("span",{className:"ml-3 text-slate-400",children:"Loading companies..."})]}):l.length===0?a.jsxs("div",{className:"text-center py-8",children:[a.jsx(tn,{className:"h-12 w-12 text-slate-600 mx-auto mb-3"}),a.jsx("h4",{className:"text-slate-300 font-medium mb-2",children:"No Companies Found"}),a.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Create your first company to get started"}),a.jsx("button",{onClick:()=>e("/dashboard?mode=developer"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Company"})]}):a.jsx("div",{className:"space-y-3",children:l.map(C=>a.jsx("div",{onClick:()=>b(C),className:"p-4 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors cursor-pointer group",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-slate-200 font-medium",children:C.name}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[a.jsxs("span",{className:"text-slate-400 text-sm",children:[C.users," users"]}),a.jsxs("span",{className:"text-slate-400 text-sm",children:["Apps: ",Array.isArray(C.apps)?C.apps.join(", "):"None"]})]})]}),a.jsx(Ia,{className:"h-5 w-5 text-slate-400 group-hover:text-slate-200 transition-colors"})]})},C.id))})]})]}),_=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:n.name}),a.jsx("p",{className:"text-slate-400",children:"Manage users and applications"})]}),a.jsx("button",{onClick:()=>r(null),className:"px-4 py-2 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors",children:"Back to Companies"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center",children:a.jsx(lt,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Manage Users"}),a.jsxs("p",{className:"text-slate-400 text-sm",children:[n.users," active users"]})]})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(ob,{className:"h-4 w-4"}),a.jsx("span",{children:"Add New User"})]})}),a.jsx("button",{className:"w-full px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"View All Users"})]})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center",children:a.jsx(Du,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Edit/Add Apps"}),a.jsxs("p",{className:"text-slate-400 text-sm",children:[n.apps.length," apps configured"]})]})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("button",{className:"w-full px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:"Add New App"}),a.jsx("button",{className:"w-full px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"Configure Existing Apps"})]})]})]}),a.jsxs(ce,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100 mb-4",children:"Current Applications"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.apps.map((C,N)=>a.jsxs("div",{className:"p-4 bg-slate-700 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-slate-200 font-medium",children:C}),a.jsx("button",{className:"text-slate-400 hover:text-slate-200 transition-colors",children:a.jsx(Bl,{className:"h-4 w-4"})})]}),a.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"Active"})]},N))})]})]});return a.jsxs(a.Fragment,{children:[p==="developer"?S():p==="existing"?E():j(),a.jsx(MS,{isOpen:i,onClose:()=>o(!1),onSave:k})]})},OS=()=>{const{user:t,userProfile:e,loading:s}=Fs(),[n,r]=w.useState(null),[i,o]=w.useState(0);if(w.useEffect(()=>{console.log("DashboardPage - Auth State:",{user:t==null?void 0:t.email,userProfile:e,loading:s,profileRetryCount:i})},[t,e,s,i]),s)return a.jsx(Ie,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-300",children:"Loading..."})]})})});if(t&&!e)return a.jsx(Ie,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center max-w-md mx-auto",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Welcome!"}),a.jsx("p",{className:"text-slate-300 mb-4",children:"Setting up your profile... This usually takes a few moments."}),a.jsxs("p",{className:"text-slate-400 text-sm mb-4",children:["Your account: ",t.email]}),i<3?a.jsxs("button",{onClick:()=>{o(c=>c+1),window.location.reload()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 mr-2",children:["Retry (",i+1,"/3)"]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-red-400 text-sm",children:"Profile creation failed. Please contact support."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Refresh Page"})]})]})})});if(!t)return a.jsx(Ie,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center max-w-md mx-auto",children:[a.jsx("h2",{className:"text-xl font-semibold text-red-400 mb-4",children:"Authentication Error"}),a.jsx("p",{className:"text-slate-300 mb-4",children:"You are not logged in. Please refresh and try again."}),a.jsx("button",{onClick:()=>window.location.href="/auth",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go to Login"})]})})});const l=()=>{var c;try{const d=((c=e==null?void 0:e.role)==null?void 0:c.trim())||"Employee";switch(console.log("Normalized Role for Switch:",JSON.stringify(d)),d){case"Capacity Admin":return console.log("Rendering AdminDashboard"),a.jsx(jS,{});case"NSight Admin":return console.log("Rendering NsightAdminDashboard"),a.jsx(DS,{});case"Employee":return console.log("Rendering EmployeeDashboard (Employee role)"),a.jsx(A0,{});default:return console.log("Rendering EmployeeDashboard (Default fallback for role:",JSON.stringify(d)),a.jsx(A0,{})}}catch(d){return console.error("Error rendering dashboard:",d),r(d.message),a.jsxs("div",{className:"text-center py-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-red-400 mb-4",children:"Dashboard Error"}),a.jsxs("p",{className:"text-slate-300 mb-4",children:["Error: ",d]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Refresh Page"})]})}};return a.jsx(Ie,{children:l()})},lf=({isOpen:t,onClose:e})=>{const[s,n]=w.useState(!1),[r,i]=w.useState([]),[o,l]=w.useState("idle"),c=()=>{setTimeout(()=>{n(!0)},1e3)},d=m=>{const v=Array.from(m.target.files).map(x=>({id:Date.now()+Math.random(),name:x.name,size:x.size,type:x.type,file:x}));i(x=>[...x,...v])},u=()=>{l("uploading"),setTimeout(()=>{l("success"),setTimeout(()=>{l("idle"),i([])},2e3)},2e3)},h=m=>{i(p=>p.filter(v=>v.id!==m))},f=m=>{if(m===0)return"0 Bytes";const p=1024,v=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(m)/Math.log(p));return parseFloat((m/Math.pow(p,x)).toFixed(2))+" "+v[x]};return t?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:e}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 border",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("svg",{className:"w-6 h-6 text-blue-600",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Dropbox"})]}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(ut,{className:"h-5 w-5 text-gray-400"})})]}),a.jsx("div",{className:"p-6",children:s?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Upload Formula Files"}),a.jsx("p",{className:"text-gray-600",children:"Select files to upload to your Formulas folder"})]}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors",children:[a.jsx(ab,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsxs("label",{className:"cursor-pointer",children:[a.jsx("span",{className:"text-blue-600 hover:text-blue-500 font-medium",children:"Choose files"}),a.jsx("span",{className:"text-gray-600",children:" or drag and drop"}),a.jsx("input",{type:"file",multiple:!0,onChange:d,className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.txt,.csv"})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Supports PDF, DOC, XLS, TXT, CSV files"})]}),r.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"font-medium text-gray-900",children:["Selected Files (",r.length,")"]}),a.jsx("div",{className:"max-h-32 overflow-y-auto space-y-2",children:r.map(m=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(sf,{className:"w-4 h-4 text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:m.name}),a.jsx("p",{className:"text-xs text-gray-500",children:f(m.size)})]})]}),a.jsx("button",{onClick:()=>h(m.id),className:"p-1 hover:bg-gray-200 rounded",children:a.jsx(ut,{className:"w-4 h-4 text-gray-400"})})]},m.id))})]}),o!=="idle"&&a.jsxs("div",{className:"p-4 rounded-lg border",children:[o==="uploading"&&a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-blue-600",children:"Uploading files..."})]}),o==="success"&&a.jsxs("div",{className:"flex items-center space-x-3 text-green-600",children:[a.jsx(Ra,{className:"w-5 h-5"}),a.jsx("span",{children:"Files uploaded successfully!"})]}),o==="error"&&a.jsxs("div",{className:"flex items-center space-x-3 text-red-600",children:[a.jsx(ha,{className:"w-5 h-5"}),a.jsx("span",{children:"Upload failed. Please try again."})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(Se,{onClick:e,variant:"secondary",className:"flex-1",children:"Cancel"}),a.jsx(Se,{onClick:u,disabled:r.length===0||o==="uploading",className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white disabled:opacity-50",children:o==="uploading"?"Uploading...":`Upload ${r.length} file${r.length!==1?"s":""}`})]})]}):a.jsxs("div",{className:"text-center space-y-6",children:[a.jsxs("div",{children:[a.jsx("svg",{className:"w-16 h-16 text-blue-600 mx-auto mb-4",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connect to Dropbox"}),a.jsx("p",{className:"text-gray-600",children:"Upload your formula files directly to your Dropbox account"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Files will be uploaded to: ",a.jsx("strong",{children:"/Apps/Formulas/"})]})}),a.jsx(Se,{onClick:c,className:"w-full bg-blue-600 hover:bg-blue-500 text-white",children:"Connect to Dropbox"})]})]})})]})]}):null},RS=({className:t="w-6 h-6"})=>a.jsx("img",{src:"/chemformation-logo.png",alt:"Chemformation Logo",className:t}),IS=()=>{const t=ft(),[e,s]=w.useState(""),[n,r]=w.useState("all"),[i,o]=w.useState(null),[l,c]=w.useState({x:0,y:0}),[d,u]=w.useState(!1);w.useState(!1),w.useState(!1);const[h,f]=w.useState([]),[m,p]=w.useState(!0),[v,x]=w.useState(null),g=w.useRef({}),[y,b]=w.useState(!1),[k,j]=w.useState("name"),[S,E]=w.useState("asc"),[_,C]=w.useState("all"),[N,L]=w.useState("all"),[P,M]=w.useState("all"),[B,$]=w.useState("name"),[U,ee]=w.useState("asc"),[O,W]=w.useState("all"),[K,H]=w.useState("all"),[T,R]=w.useState("all");w.useEffect(()=>{(async()=>{p(!0),x(null);try{const oe=await dS();f(oe)}catch(oe){console.error("Error loading formulas:",oe),x("Failed to load formulas. Please check your database connection.")}finally{p(!1)}})()},[]),w.useEffect(()=>{const V=oe=>{y&&!oe.target.closest(".relative")&&b(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[y]);const Q=V=>{$(V)},ue=()=>{ee(U==="asc"?"desc":"asc")},me=()=>{j("name"),E("asc"),C("all"),L("all"),M("all"),s(""),$("name"),ee("asc"),W("all"),H("all"),R("all")},Ae=()=>{j(B),E(U),C(O),L(K),M(T),b(!1)},nt=()=>{$(k),ee(S),W(_),H(N),R(P),b(!1)},rt=()=>{y?nt():($(k),ee(S),W(_),H(N),R(P),b(!0))},Pt=[...h.filter(V=>{const oe=V.name.toLowerCase().includes(e.toLowerCase())||V.id.toLowerCase().includes(e.toLowerCase()),ke=_==="all"||(()=>{const ze=parseFloat(V.totalCost)||0;switch(_){case"low":return ze<100;case"medium":return ze>=100&&ze<500;case"high":return ze>=500;default:return!0}})(),Le=N==="all"||(()=>{const ze=parseFloat(V.finalSalePriceDrum)||0;switch(N){case"low":return ze<200;case"medium":return ze>=200&&ze<1e3;case"high":return ze>=1e3;default:return!0}})(),ts=P==="all"||(()=>{const ze=V.ingredients?V.ingredients.length:0;switch(P){case"few":return ze<=3;case"medium":return ze>3&&ze<=6;case"many":return ze>6;default:return!0}})();return oe&&ke&&Le&&ts})].sort((V,oe)=>{let ke,Le;switch(k){case"name":ke=V.name.toLowerCase(),Le=oe.name.toLowerCase();break;case"id":ke=V.id.toLowerCase(),Le=oe.id.toLowerCase();break;case"totalCost":ke=parseFloat(V.totalCost)||0,Le=parseFloat(oe.totalCost)||0;break;case"finalSalePriceDrum":ke=parseFloat(V.finalSalePriceDrum)||0,Le=parseFloat(oe.finalSalePriceDrum)||0;break;case"finalSalePriceTote":ke=parseFloat(V.finalSalePriceTote)||0,Le=parseFloat(oe.finalSalePriceTote)||0;break;case"ingredientCount":ke=V.ingredients?V.ingredients.length:0,Le=oe.ingredients?oe.ingredients.length:0;break;default:ke=V.name.toLowerCase(),Le=oe.name.toLowerCase()}return ke<Le?S==="asc"?-1:1:ke>Le?S==="asc"?1:-1:0}),$e=(V,oe)=>{if(!g.current[oe])return;const ke=g.current[oe].getBoundingClientRect(),Le=(V.clientX-ke.left)/ke.width*100,ts=(V.clientY-ke.top)/ke.height*100;c({x:Le,y:ts})},es=[{id:"all",label:"All Formulas"},{id:"assigned",label:"Assigned to me"},{id:"created",label:"Created by Me"}];return m?a.jsx(Ie,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Rs,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Formulas"})]})]}),a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-slate-400",children:"Loading formulas..."})})]})}):v?a.jsx(Ie,{children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsx("div",{className:"text-center py-12",children:a.jsxs("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-6 max-w-md mx-auto",children:[a.jsx("h2",{className:"text-xl font-semibold text-red-400 mb-4",children:"Database Connection Error"}),a.jsx("p",{className:"text-slate-300 mb-4",children:v}),a.jsxs("div",{className:"text-left text-sm text-slate-400 space-y-2 mb-4",children:[a.jsx("p",{children:a.jsx("strong",{className:"text-slate-300",children:"Possible solutions:"})}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[a.jsx("li",{children:"Run the database schema update script in Supabase"}),a.jsx("li",{children:"Check your Supabase connection settings"}),a.jsx("li",{children:"Verify authentication permissions"})]})]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retry"})]})})})}):a.jsx(Ie,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Rs,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Formulas"})]})]}),a.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("input",{type:"text",placeholder:"Search by Txn Id, material name",value:e,onChange:V=>s(V.target.value),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-80"})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{className:"p-3 bg-red-600 rounded-full hover:bg-red-500 transition-colors",children:a.jsx(RS,{className:"w-6 h-6"})}),a.jsx("button",{onClick:()=>u(!0),className:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors",title:"Upload to Dropbox",children:a.jsx("svg",{className:"w-5 h-5 text-slate-300",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})})})]})]})}),a.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex space-x-0",children:es.map(V=>a.jsxs("button",{ref:oe=>g.current[V.id]=oe,onClick:()=>r(V.id),onMouseEnter:()=>o(V.id),onMouseLeave:()=>o(null),onMouseMove:oe=>$e(oe,V.id),className:`relative px-6 py-2 transition-all duration-300 ease-out ${n===V.id?"bg-slate-600 text-slate-100":"bg-slate-700 text-slate-400 hover:text-slate-200 hover:bg-slate-650"} ${V.id==="all"?"rounded-l-lg":V.id==="created"?"rounded-r-lg":""}`,style:{transform:i===V.id?"scale(1.05)":"scale(1)",transition:"transform 0.2s ease-out"},children:[a.jsx("span",{className:"relative z-10 font-medium",children:V.label}),i===V.id&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-md -z-0",style:{background:`radial-gradient(circle at ${l.x}% ${l.y}%, rgba(59, 130, 246, 0.15), transparent 50%)`}})]},V.id))}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:rt,className:"flex items-center space-x-2 p-2 border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors",children:[a.jsx(Nc,{className:"h-5 w-5 text-slate-300"}),a.jsx("span",{className:"text-sm text-slate-300",children:"Filter & Sort"}),a.jsx($n,{className:"h-4 w-4 text-slate-300"})]}),y&&a.jsx("div",{className:"absolute right-0 mt-2 w-96 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200",children:"Sort By"}),a.jsxs("button",{onClick:ue,className:"flex items-center space-x-1 px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition-colors",children:[a.jsx("span",{children:U==="asc"?"Ascending":"Descending"}),a.jsx("span",{children:U==="asc"?"↑":"↓"})]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"name",label:"Formula Name"},{key:"id",label:"Formula ID"},{key:"totalCost",label:"Total Cost"},{key:"finalSalePriceDrum",label:"Sale Price (Drum)"},{key:"finalSalePriceTote",label:"Sale Price (Tote)"},{key:"ingredientCount",label:"Ingredient Count"}].map(V=>a.jsx("button",{onClick:()=>Q(V.key),className:`text-left px-3 py-2 rounded text-sm transition-colors ${B===V.key?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:V.label},V.key))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Cost"}),a.jsxs("select",{value:O,onChange:V=>W(V.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Costs"}),a.jsx("option",{value:"low",children:"Low (< $100)"}),a.jsx("option",{value:"medium",children:"Medium ($100 - $500)"}),a.jsx("option",{value:"high",children:"High (>= $500)"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Sale Price"}),a.jsxs("select",{value:K,onChange:V=>H(V.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Prices"}),a.jsx("option",{value:"low",children:"Low (< $200)"}),a.jsx("option",{value:"medium",children:"Medium ($200 - $1000)"}),a.jsx("option",{value:"high",children:"High (>= $1000)"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Ingredients"}),a.jsxs("select",{value:T,onChange:V=>R(V.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Ingredient Counts"}),a.jsx("option",{value:"few",children:"Few (≤ 3 ingredients)"}),a.jsx("option",{value:"medium",children:"Medium (4-6 ingredients)"}),a.jsx("option",{value:"many",children:"Many (> 6 ingredients)"})]})]})})]}),a.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-slate-600",children:[a.jsx("button",{onClick:me,className:"px-3 py-1 text-xs text-slate-400 hover:text-slate-200 transition-colors",children:"Clear All"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:nt,className:"px-4 py-2 text-sm text-slate-300 hover:text-slate-100 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:Ae,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Apply"})]})]})]})})]}),a.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-500 transition-colors",children:[a.jsx(yr,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-sm text-white font-medium",children:"Add Formula"})]})]})]})}),a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"bg-slate-800 rounded-lg overflow-hidden border border-slate-700",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-slate-750 border-b border-slate-700",children:[a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Item number"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Display name"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Ingredients"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Total cost"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Final sale price (Drum)"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Final sale price (Tote)"})]})}),a.jsx("tbody",{children:Pt.map((V,oe)=>a.jsxs("tr",{onClick:()=>t(`/formulas/${V.id}`),className:"border-b border-slate-700 hover:bg-slate-750 transition-colors cursor-pointer",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:V.id}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:V.name}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"w-64 overflow-x-auto ingredients-scroll",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:a.jsx("div",{className:"flex space-x-2 min-w-max",children:V.ingredients&&V.ingredients.map((ke,Le)=>a.jsxs("div",{className:"flex-shrink-0 bg-slate-700 rounded-full px-3 py-1 text-xs text-slate-300 border border-slate-600",children:[ke.name," (",ke.percentage,"%)"]},Le))})})}),a.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",V.totalCost?V.totalCost.toFixed(2):"0.00"]}),a.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",V.finalSalePriceDrum?V.finalSalePriceDrum.toFixed(2):"0.00"]}),a.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",V.finalSalePriceTote?V.finalSalePriceTote.toFixed(2):"0.00"]})]},`${V.id}-${oe}`))})]})})}),a.jsx("button",{className:"fixed bottom-6 right-6 p-4 bg-blue-600 rounded-full hover:bg-blue-500 transition-colors shadow-lg",children:a.jsx(yr,{className:"h-6 w-6 text-white"})}),a.jsx(lf,{isOpen:d,onClose:()=>u(!1)})]})})},FS=()=>{const t=ft(),{formulaId:e}=yv(),[s,n]=w.useState(!1),[r,i]=w.useState([]),[o,l]=w.useState(!1),c=w.useRef(null),[d,u]=w.useState(null),[h,f]=w.useState(null),[m,p]=w.useState([]),[v,x]=w.useState(!0),[g,y]=w.useState(null),[b,k]=w.useState(!1);if(w.useEffect(()=>{(async()=>{try{x(!0),console.log("Loading formula with ID:",e);const R=await uS(e);console.log("Found formula:",R),R?(f(R),u({name:R.name,totalCost:R.totalCost,finalSalePriceDrum:R.finalSalePriceDrum,finalSalePriceTote:R.finalSalePriceTote,ingredients:[...R.ingredients]}),console.log("Formula state set successfully")):(console.log("No formula found for ID:",e),y("Formula not found"))}catch(R){console.error("Error loading formula:",R),y("Failed to load formula")}finally{x(!1)}})()},[e]),w.useEffect(()=>(console.log("FormulaDetailPage rendered with formulaId:",e),n(!1),i([]),p([]),()=>{console.log("FormulaDetailPage cleanup")}),[e]),console.log("Current formula state:",h),console.log("Current editableFormula state:",d),v)return a.jsx(Ie,{children:a.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-slate-400",children:"Loading formula..."})})})});if(g||!h)return console.log("Rendering Formula Not Found page"),a.jsx(Ie,{children:a.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-4",children:g||"Formula Not Found"}),a.jsxs("p",{className:"text-slate-400 mb-4",children:["Formula ID: ",e]}),a.jsx("button",{onClick:()=>t("/formulas"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Back to Formulas"})]})})});const S=(T=>({HDST001:[{id:1,name:"HDST001_Safety_Data_Sheet.pdf",size:2451232,type:"application/pdf",uploadDate:new Date("2024-01-15"),uploader:"Safety Team"},{id:2,name:"Heavy_Duty_Steam_Formula_Specs.docx",size:1024567,type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",uploadDate:new Date("2024-01-10"),uploader:"R&D Team"},{id:3,name:"Manufacturing_Instructions_HDST001.pdf",size:876543,type:"application/pdf",uploadDate:new Date("2024-01-08"),uploader:"Production Team"},{id:4,name:"Quality_Control_Certificate.pdf",size:345678,type:"application/pdf",uploadDate:new Date("2024-01-05"),uploader:"QC Lab"}],MDCL002:[{id:5,name:"MDCL002_Safety_Data_Sheet.pdf",size:1876543,type:"application/pdf",uploadDate:new Date("2024-01-12"),uploader:"Safety Team"},{id:6,name:"Degreaser_Performance_Analysis.xlsx",size:567890,type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",uploadDate:new Date("2024-01-08"),uploader:"Lab Team"},{id:7,name:"EPA_Compliance_Certificate.pdf",size:234567,type:"application/pdf",uploadDate:new Date("2024-01-06"),uploader:"Compliance Team"},{id:8,name:"Customer_Usage_Guidelines.docx",size:456789,type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",uploadDate:new Date("2024-01-04"),uploader:"Technical Support"}],INDL003:[{id:9,name:"INDL003_Safety_Data_Sheet.pdf",size:3245612,type:"application/pdf",uploadDate:new Date("2024-01-05"),uploader:"Safety Team"},{id:10,name:"Industrial_Solvent_Safety_Protocol.docx",size:987654,type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",uploadDate:new Date("2024-01-03"),uploader:"Safety Team"},{id:11,name:"Lab_Test_Results_Batch_2024_001.xlsx",size:234567,type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",uploadDate:new Date("2024-01-01"),uploader:"Lab Team"},{id:12,name:"Hazmat_Transportation_Guide.pdf",size:1234567,type:"application/pdf",uploadDate:new Date("2023-12-28"),uploader:"Logistics Team"},{id:13,name:"Solvent_Storage_Requirements.pdf",size:654321,type:"application/pdf",uploadDate:new Date("2023-12-25"),uploader:"Facilities Team"}]})[T]||[])(e),E=T=>{p(R=>[...R,T]),console.log("Deleted document ID:",T)},_=S.filter(T=>!m.includes(T.id)),C=T=>{const R=Array.from(T).map(Q=>({id:Date.now()+Math.random(),file:Q,name:Q.name,size:Q.size,type:Q.type,uploadDate:new Date,formulaId:e}));i(Q=>[...Q,...R]),console.log("Uploading files for formula:",e,R)},N=T=>{T.preventDefault(),l(!0)},L=T=>{T.preventDefault(),l(!1)},P=T=>{T.preventDefault(),l(!1);const R=T.dataTransfer.files;R.length>0&&C(R)},M=T=>{T.target.files.length>0&&C(T.target.files)},B=T=>{i(R=>R.filter(Q=>Q.id!==T))},$=T=>{if(T===0)return"0 Bytes";const R=1024,Q=["Bytes","KB","MB","GB"],ue=Math.floor(Math.log(T)/Math.log(R));return parseFloat((T/Math.pow(R,ue)).toFixed(2))+" "+Q[ue]},U=T=>T.startsWith("image/")?a.jsx(sb,{className:"h-5 w-5 text-blue-400"}):a.jsx(sf,{className:"h-5 w-5 text-slate-400"}),ee=async()=>{if(s)try{if(d){const T=await hS(h.id,d);T&&(f(T),console.log("Formula saved successfully:",T))}console.log("Deleted documents:",m),n(!1)}catch(T){console.error("Error saving formula:",T)}else u({name:h.name,totalCost:h.totalCost,finalSalePriceDrum:h.finalSalePriceDrum,finalSalePriceTote:h.finalSalePriceTote,ingredients:[...h.ingredients]}),n(!0)},O=(T,R)=>{console.log("Field change:",T,R),u(Q=>({...Q,[T]:R}))},W=(T,R,Q)=>{u(ue=>({...ue,ingredients:ue.ingredients.map((me,Ae)=>Ae===T?{...me,[R]:Q}:me)}))},K=T=>{u(R=>({...R,ingredients:R.ingredients.filter((Q,ue)=>ue!==T)}))},H=async()=>{try{await mS(h.id)?t("/formulas"):console.error("Failed to delete formula")}catch(T){console.error("Error deleting formula:",T)}k(!1)};return a.jsx(Ie,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(Se,{onClick:()=>t("/formulas"),className:"bg-slate-700 hover:bg-slate-600 p-2",children:a.jsx(kt,{className:"h-4 w-4"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Rs,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Formula Details"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[s&&a.jsxs(Se,{onClick:()=>k(!0),className:"bg-red-600 hover:bg-red-700 flex items-center space-x-2",children:[a.jsx(Fa,{className:"h-4 w-4"}),a.jsx("span",{children:"Delete Formula"})]}),a.jsxs(Se,{onClick:ee,className:`${s?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:[a.jsx(Du,{className:"h-4 w-4 mr-2"}),s?"Save Changes":"Edit Formula"]})]})]}),a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6",children:[s&&d?a.jsx("input",{type:"text",value:d.name,onChange:T=>O("name",T.target.value),className:"text-2xl font-semibold text-slate-100 mb-6 bg-slate-700 border border-slate-600 rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"}):a.jsx("h2",{className:"text-2xl font-semibold text-slate-100 mb-6",children:(d==null?void 0:d.name)||h.name}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Formula ID"}),a.jsx("div",{className:"text-slate-200 font-medium",children:h.id})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Total Cost"}),s&&d?a.jsx("input",{type:"number",step:"0.01",value:d.totalCost,onChange:T=>O("totalCost",parseFloat(T.target.value)||0),className:"w-full bg-slate-700 border border-slate-600 rounded-md px-3 py-2 text-slate-200 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500"}):a.jsxs("div",{className:"text-slate-200 font-medium",children:["$",((d==null?void 0:d.totalCost)||h.totalCost).toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Final Sale Price (Drum)"}),s&&d?a.jsx("input",{type:"number",step:"0.01",value:d.finalSalePriceDrum,onChange:T=>O("finalSalePriceDrum",parseFloat(T.target.value)||0),className:"w-full bg-slate-700 border border-slate-600 rounded-md px-3 py-2 text-slate-200 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500"}):a.jsxs("div",{className:"text-slate-200 font-medium",children:["$",((d==null?void 0:d.finalSalePriceDrum)||h.finalSalePriceDrum).toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Final Sale Price (Tote)"}),s&&d?a.jsx("input",{type:"number",step:"0.01",value:d.finalSalePriceTote,onChange:T=>O("finalSalePriceTote",parseFloat(T.target.value)||0),className:"w-full bg-slate-700 border border-slate-600 rounded-md px-3 py-2 text-slate-200 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500"}):a.jsxs("div",{className:"text-slate-200 font-medium",children:["$",((d==null?void 0:d.finalSalePriceTote)||h.finalSalePriceTote).toFixed(2)]})]})]}),a.jsxs("div",{className:"border-t border-slate-700 pt-6",children:[a.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Ingredients"}),a.jsx("div",{className:"overflow-x-auto scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-800",children:a.jsx("div",{className:"flex space-x-4 pb-2 min-w-max",children:((d==null?void 0:d.ingredients)||h.ingredients).map((T,R)=>a.jsxs("div",{className:"flex-shrink-0 bg-slate-700 rounded-lg border border-slate-600 p-4 w-64 relative",children:[s&&d&&a.jsx("button",{onClick:()=>K(R),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold transition-colors z-10 shadow-lg",title:"Delete ingredient",children:a.jsx(ut,{className:"h-3 w-3"})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Ingredient"}),s&&d?a.jsx("input",{type:"text",value:T.name,onChange:Q=>W(R,"name",Q.target.value),className:"w-full bg-slate-600 border border-slate-500 rounded-md px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingredient name"}):a.jsx("div",{className:"text-slate-200 font-medium text-sm",children:T.name})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Percentage"}),s&&d?a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"number",step:"0.1",value:T.percentage,onChange:Q=>W(R,"percentage",parseFloat(Q.target.value)||0),className:"w-full bg-slate-600 border border-slate-500 rounded-md px-2 py-1 text-slate-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-slate-300 ml-1 text-sm",children:"%"})]}):a.jsxs("div",{className:"text-slate-300 font-medium text-sm",children:[T.percentage,"%"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Cost"}),s&&d?a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-slate-300 mr-1 text-sm",children:"$"}),a.jsx("input",{type:"number",step:"0.01",value:T.cost,onChange:Q=>W(R,"cost",parseFloat(Q.target.value)||0),className:"w-full bg-slate-600 border border-slate-500 rounded-md px-2 py-1 text-slate-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}):a.jsxs("div",{className:"text-slate-300 font-medium text-sm",children:["$",T.cost.toFixed(2)]})]})]})]})]},R))})}),a.jsx("div",{className:"text-xs text-slate-500 mt-2 text-center",children:"← Scroll horizontally to view all ingredients →"})]})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(Se,{className:"bg-slate-700 hover:bg-slate-600",children:"Export Data"}),a.jsx(Se,{className:"bg-green-600 hover:bg-green-700",children:"Generate Report"}),a.jsx(Se,{className:"bg-orange-600 hover:bg-orange-700",children:"Duplicate Formula"})]}),a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-6",children:"Documents & Files"}),_.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("h4",{className:"text-md font-medium text-slate-200 mb-4",children:["Existing Documents (",_.length,")"]}),a.jsx("div",{className:"space-y-2",children:_.map(T=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700 rounded-lg border border-slate-600",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[U(T.type),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-slate-200",children:T.name}),a.jsxs("div",{className:"text-xs text-slate-400",children:[$(T.size)," • Uploaded ",T.uploadDate.toLocaleDateString()," by ",T.uploader]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("button",{onClick:R=>{R.stopPropagation(),s?E(T.id):console.log("Download existing file:",T.name)},className:`p-1 transition-colors ${s?"text-slate-400 hover:text-red-400":"text-slate-400 hover:text-blue-400"}`,title:s?"Delete":"Download",children:s?a.jsx(ut,{className:"h-4 w-4"}):a.jsx(_0,{className:"h-4 w-4"})})})]},T.id))}),a.jsx("div",{className:"border-t border-slate-600 my-6"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-medium text-slate-200 mb-4",children:"Upload New Files"}),a.jsxs("div",{onDragOver:N,onDragLeave:L,onDrop:P,onClick:()=>{var T;return(T=c.current)==null?void 0:T.click()},className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200 ${o?"border-blue-400 bg-blue-400/10":"border-slate-600 hover:border-slate-500 hover:bg-slate-700/50"}`,children:[a.jsx("input",{type:"file",ref:c,onChange:M,multiple:!0,accept:".pdf,.doc,.docx,.txt,.csv,.xlsx,.xls,.png,.jpg,.jpeg,.gif",className:"hidden"}),a.jsx(ab,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-slate-200 mb-2",children:o?"Drop files here":"Drag & drop files here"}),a.jsx("p",{className:"text-slate-400 mb-4",children:"or click to browse files"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Supports: PDF, DOC, DOCX, TXT, CSV, XLSX, XLS, PNG, JPG, JPEG, GIF"})]}),r.length>0&&a.jsxs("div",{className:"mt-6",children:[a.jsxs("h4",{className:"text-md font-medium text-slate-200 mb-3",children:["Uploaded Files (",r.length,")"]}),a.jsx("div",{className:"space-y-2",children:r.map(T=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700 rounded-lg border border-slate-600",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[U(T.type),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-slate-200",children:T.name}),a.jsxs("div",{className:"text-xs text-slate-400",children:[$(T.size)," • Uploaded ",T.uploadDate.toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:R=>{R.stopPropagation(),console.log("Download file:",T.name)},className:"p-1 text-slate-400 hover:text-blue-400 transition-colors",title:"Download",children:a.jsx(_0,{className:"h-4 w-4"})}),a.jsx("button",{onClick:R=>{R.stopPropagation(),B(T.id)},className:"p-1 text-slate-400 hover:text-red-400 transition-colors",title:"Remove",children:a.jsx(ut,{className:"h-4 w-4"})})]})]},T.id))})]})]})]}),b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"bg-red-100 rounded-full p-2 mr-3",children:a.jsx(Fa,{className:"h-6 w-6 text-red-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Delete Formula"})]}),a.jsxs("p",{className:"text-slate-300 mb-6",children:["Are you sure you want to delete formula ",a.jsx("strong",{children:h==null?void 0:h.name}),"? This action cannot be undone."]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),a.jsx("button",{onClick:H,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})},`formula-${e}`)},$S=({isOpen:t,onClose:e,supplier:s})=>{const[n,r]=w.useState({supplierName:(s==null?void 0:s.supplierName)||"",supplierId:(s==null?void 0:s.supplierId)||"",supplierEmail:(s==null?void 0:s.supplierEmail)||"",supplierContact:(s==null?void 0:s.supplierContact)||"",packagingCode:(s==null?void 0:s.packagingCode)||"",standardCost:(s==null?void 0:s.standardCost)||""}),i=c=>{const{name:d,value:u}=c.target;r(h=>({...h,[d]:u}))},o=c=>{c.preventDefault(),console.log("Updated supplier data:",n),e()},l=()=>{r({supplierName:(s==null?void 0:s.supplierName)||"",supplierId:(s==null?void 0:s.supplierId)||"",supplierEmail:(s==null?void 0:s.supplierEmail)||"",supplierContact:(s==null?void 0:s.supplierContact)||"",packagingCode:(s==null?void 0:s.packagingCode)||"",standardCost:(s==null?void 0:s.standardCost)||""}),e()};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 w-full max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Edit Supplier"}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-700 rounded transition-colors",children:a.jsx(ut,{className:"h-5 w-5 text-slate-400"})})]}),a.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Name"}),a.jsx("input",{type:"text",name:"supplierName",value:n.supplierName,onChange:i,placeholder:"Enter supplier name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier ID"}),a.jsx("input",{type:"text",name:"supplierId",value:n.supplierId,onChange:i,placeholder:"Enter supplier ID",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Email"}),a.jsx("input",{type:"email",name:"supplierEmail",value:n.supplierEmail,onChange:i,placeholder:"Enter supplier email",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Contact"}),a.jsx("input",{type:"tel",name:"supplierContact",value:n.supplierContact,onChange:i,placeholder:"Enter contact number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Packaging Code"}),a.jsx("input",{type:"text",name:"packagingCode",value:n.packagingCode,onChange:i,placeholder:"Enter packaging code",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Standard Cost"}),a.jsx("input",{type:"number",step:"0.01",min:"0",name:"standardCost",value:n.standardCost,onChange:i,placeholder:"Enter standard cost",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})]})}):null},zS=({isOpen:t,onClose:e})=>{const[s,n]=w.useState({supplierName:"",supplierId:"",supplierEmail:"",supplierContact:"",packagingCode:"",standardCost:""}),r=l=>{const{name:c,value:d}=l.target;n(u=>({...u,[c]:d}))},i=l=>{l.preventDefault(),console.log("New supplier data:",s),n({supplierName:"",supplierId:"",supplierEmail:"",supplierContact:"",packagingCode:"",standardCost:""}),e()},o=()=>{n({supplierName:"",supplierId:"",supplierEmail:"",supplierContact:"",packagingCode:"",standardCost:""}),e()};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 w-full max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Add New Supplier"}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-700 rounded transition-colors",children:a.jsx(ut,{className:"h-5 w-5 text-slate-400"})})]}),a.jsxs("form",{onSubmit:i,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Name"}),a.jsx("input",{type:"text",name:"supplierName",value:s.supplierName,onChange:r,placeholder:"Enter supplier name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier ID"}),a.jsx("input",{type:"text",name:"supplierId",value:s.supplierId,onChange:r,placeholder:"Enter supplier ID",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Email"}),a.jsx("input",{type:"email",name:"supplierEmail",value:s.supplierEmail,onChange:r,placeholder:"Enter supplier email",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Contact"}),a.jsx("input",{type:"tel",name:"supplierContact",value:s.supplierContact,onChange:r,placeholder:"Enter contact number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Packaging Code"}),a.jsx("input",{type:"text",name:"packagingCode",value:s.packagingCode,onChange:r,placeholder:"Enter packaging code",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Standard Cost"}),a.jsx("input",{type:"number",step:"0.01",min:"0",name:"standardCost",value:s.standardCost,onChange:r,placeholder:"Enter standard cost",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Add Supplier"})]})]})]})}):null},US=({className:t="w-6 h-6"})=>a.jsx("img",{src:"/chemformation-logo.png",alt:"Chemformation Logo",className:t}),BS=()=>{const t=ft(),[e,s]=w.useState(""),[n,r]=w.useState("all"),[i,o]=w.useState(null),[l,c]=w.useState({x:0,y:0}),[d,u]=w.useState(!1),[h,f]=w.useState(!1),[m,p]=w.useState(!1),[v,x]=w.useState(null),[g,y]=w.useState([]),[b,k]=w.useState(!0),[j,S]=w.useState(null),E=w.useRef({}),[_,C]=w.useState(!1),[N,L]=w.useState("supplierName"),[P,M]=w.useState("asc"),[B,$]=w.useState("all"),[U,ee]=w.useState("all"),[O,W]=w.useState("supplierName"),[K,H]=w.useState("asc"),[T,R]=w.useState("all"),[Q,ue]=w.useState("all");w.useEffect(()=>{(async()=>{try{k(!0);const be=await fS();y(be),S(null)}catch(be){console.error("Error loading suppliers:",be),S("Failed to load suppliers")}finally{k(!1)}})()},[]),w.useEffect(()=>{const q=be=>{_&&!be.target.closest(".relative")&&C(!1)};return document.addEventListener("mousedown",q),()=>document.removeEventListener("mousedown",q)},[_]);const me=q=>{W(q)},Ae=()=>{H(K==="asc"?"desc":"asc")},nt=()=>{L("supplierName"),M("asc"),$("all"),ee("all"),s(""),W("supplierName"),H("asc"),R("all"),ue("all")},rt=()=>{L(O),M(K),$(T),ee(Q),C(!1)},Et=()=>{W(N),H(P),R(B),ue(U),C(!1)},Pt=()=>{_?Et():(W(N),H(P),R(B),ue(U),C(!0))},es=[...g.filter(q=>{const be=q.supplierName.toLowerCase().includes(e.toLowerCase())||q.supplierId.toLowerCase().includes(e.toLowerCase())||q.supplierEmail.toLowerCase().includes(e.toLowerCase())||q.supplierContact.toLowerCase().includes(e.toLowerCase()),Oe=B==="all"||(()=>{const zt=parseFloat(q.standardCost)||0;switch(B){case"low":return zt<50;case"medium":return zt>=50&&zt<200;case"high":return zt>=200;default:return!0}})(),Ye=U==="all"||q.packagingCode===U;return be&&Oe&&Ye})].sort((q,be)=>{let Oe,Ye;switch(N){case"supplierName":Oe=q.supplierName.toLowerCase(),Ye=be.supplierName.toLowerCase();break;case"supplierId":Oe=q.supplierId.toLowerCase(),Ye=be.supplierId.toLowerCase();break;case"supplierEmail":Oe=q.supplierEmail.toLowerCase(),Ye=be.supplierEmail.toLowerCase();break;case"standardCost":Oe=parseFloat(q.standardCost)||0,Ye=parseFloat(be.standardCost)||0;break;case"packagingCode":Oe=q.packagingCode.toLowerCase(),Ye=be.packagingCode.toLowerCase();break;case"supplierContact":Oe=q.supplierContact.toLowerCase(),Ye=be.supplierContact.toLowerCase();break;default:Oe=q.supplierName.toLowerCase(),Ye=be.supplierName.toLowerCase()}return Oe<Ye?P==="asc"?-1:1:Oe>Ye?P==="asc"?1:-1:0}),V=[...new Set(g.map(q=>q.packagingCode))].filter(Boolean).sort(),oe=(q,be)=>{if(!E.current[be])return;const Oe=E.current[be].getBoundingClientRect(),Ye=(q.clientX-Oe.left)/Oe.width*100,zt=(q.clientY-Oe.top)/Oe.height*100;c({x:Ye,y:zt})},ke=[{id:"all",label:"All suppliers"},{id:"assigned",label:"Assigned to me"},{id:"created",label:"Created by Me"}],Le=q=>{x(q),f(!0)},ts=()=>{f(!1),x(null)},ze=()=>{p(!0)},cn=()=>{p(!1)};return b?a.jsx(Ie,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(lt,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Suppliers"})]})]}),a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-slate-400",children:"Loading suppliers..."})})]})}):j?a.jsx(Ie,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(lt,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Suppliers"})]})]}),a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-red-400",children:j})})]})}):a.jsx(Ie,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(lt,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Suppliers"})]})]}),a.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("input",{type:"text",placeholder:"Search by Supplier ID, name, email",value:e,onChange:q=>s(q.target.value),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-80"})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{className:"p-3 bg-red-600 rounded-full hover:bg-red-500 transition-colors",children:a.jsx(US,{className:"w-6 h-6"})}),a.jsx("button",{onClick:()=>u(!0),className:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors",title:"Upload to Dropbox",children:a.jsx("svg",{className:"w-5 h-5 text-slate-300",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})})})]})]})}),a.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex space-x-0",children:ke.map(q=>a.jsxs("button",{ref:be=>E.current[q.id]=be,onClick:()=>r(q.id),onMouseEnter:()=>o(q.id),onMouseLeave:()=>o(null),onMouseMove:be=>oe(be,q.id),className:`relative px-6 py-2 transition-all duration-300 ease-out ${n===q.id?"bg-slate-600 text-slate-100":"bg-slate-700 text-slate-400 hover:text-slate-200 hover:bg-slate-650"} ${q.id==="all"?"rounded-l-lg":q.id==="created"?"rounded-r-lg":""}`,style:{transform:i===q.id?"scale(1.05)":"scale(1)",transition:"transform 0.2s ease-out"},children:[a.jsx("span",{className:"relative z-10 font-medium",children:q.label}),i===q.id&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-md -z-0",style:{background:`radial-gradient(circle at ${l.x}% ${l.y}%, rgba(59, 130, 246, 0.15), transparent 50%)`}})]},q.id))}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:Pt,className:"flex items-center space-x-2 p-2 border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors",children:[a.jsx(Nc,{className:"h-5 w-5 text-slate-300"}),a.jsx("span",{className:"text-sm text-slate-300",children:"Filter & Sort"}),a.jsx($n,{className:"h-4 w-4 text-slate-300"})]}),_&&a.jsx("div",{className:"absolute right-0 mt-2 w-96 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200",children:"Sort By"}),a.jsxs("button",{onClick:Ae,className:"flex items-center space-x-1 px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition-colors",children:[a.jsx("span",{children:K==="asc"?"Ascending":"Descending"}),a.jsx("span",{children:K==="asc"?"↑":"↓"})]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"supplierName",label:"Supplier Name"},{key:"supplierId",label:"Supplier ID"},{key:"supplierEmail",label:"Email"},{key:"supplierContact",label:"Contact"},{key:"packagingCode",label:"Packaging Code"},{key:"standardCost",label:"Standard Cost"}].map(q=>a.jsx("button",{onClick:()=>me(q.key),className:`text-left px-3 py-2 rounded text-sm transition-colors ${O===q.key?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:q.label},q.key))})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Cost"}),a.jsxs("select",{value:T,onChange:q=>R(q.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Costs"}),a.jsx("option",{value:"low",children:"Low (< $50)"}),a.jsx("option",{value:"medium",children:"Medium ($50 - $200)"}),a.jsx("option",{value:"high",children:"High (>= $200)"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Packaging"}),a.jsxs("select",{value:Q,onChange:q=>ue(q.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Packaging"}),V.map(q=>a.jsx("option",{value:q,children:q},q))]})]})]})}),a.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-slate-600",children:[a.jsx("button",{onClick:nt,className:"px-3 py-1 text-xs text-slate-400 hover:text-slate-200 transition-colors",children:"Clear All"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:Et,className:"px-4 py-2 text-sm text-slate-300 hover:text-slate-100 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:rt,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Apply"})]})]})]})})]}),a.jsxs("button",{onClick:ze,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-500 transition-colors",children:[a.jsx(yr,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-sm text-white font-medium",children:"Add Supplier"})]})]})]})}),a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"bg-slate-800 rounded-lg overflow-hidden border border-slate-700",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-slate-750 border-b border-slate-700",children:[a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Name"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier ID"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Email"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Contact"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Packaging code"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Standard Cost"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Actions"})]})}),a.jsx("tbody",{children:es.map((q,be)=>a.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-750 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:q.supplierName}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:q.supplierId}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:q.supplierEmail}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:q.supplierContact}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:q.packagingCode}),a.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",q.standardCost?q.standardCost.toFixed(2):"0.00"]}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:a.jsx("button",{onClick:Oe=>{Oe.stopPropagation(),Le(q)},className:"p-1 hover:bg-slate-600 rounded transition-colors",title:"Edit supplier",children:a.jsx(af,{className:"h-4 w-4 text-slate-400 hover:text-slate-200"})})})]},`${q.supplierId}-${be}`))})]})})}),a.jsx(lf,{isOpen:d,onClose:()=>u(!1)}),a.jsx($S,{isOpen:h,onClose:ts,supplier:v}),a.jsx(zS,{isOpen:m,onClose:cn})]})})},HS=({className:t="w-6 h-6"})=>a.jsx("img",{src:"/chemformation-logo.png",alt:"Chemformation Logo",className:t}),WS=()=>{const t=ft(),[e,s]=w.useState(""),[n,r]=w.useState("all"),[i,o]=w.useState(null),[l,c]=w.useState({x:0,y:0}),[d,u]=w.useState(!1),[h,f]=w.useState(!1),[m,p]=w.useState(!1),[v,x]=w.useState([]),[g,y]=w.useState(!0),[b,k]=w.useState(null),j=w.useRef({}),[S,E]=w.useState(!1),[_,C]=w.useState("materialName"),[N,L]=w.useState("asc"),[P,M]=w.useState("all"),[B,$]=w.useState("all"),[U,ee]=w.useState("all"),[O,W]=w.useState("all"),[K,H]=w.useState("materialName"),[T,R]=w.useState("asc"),[Q,ue]=w.useState("all"),[me,Ae]=w.useState("all"),[nt,rt]=w.useState("all"),[Et,Pt]=w.useState("all"),[$e,es]=w.useState({supplier:"",materialName:"",manufacturer:"",casNumber:"",weightVolume:"",activityPercentage:"",density:"",viscosity:"",cost:"",supplierCost:""}),V=async()=>{try{y(!0);const A=await lb();x(A),k(null)}catch(A){console.error("Error loading materials:",A),k("Failed to load raw materials")}finally{y(!1)}};w.useEffect(()=>{V()},[]);const oe=A=>{console.log("Material added via chat:",A),V()};w.useEffect(()=>{const A=Y=>{S&&!Y.target.closest(".relative")&&E(!1)};return document.addEventListener("mousedown",A),()=>document.removeEventListener("mousedown",A)},[S]);const ke=A=>{const Y=cb(A.materialName);t(`/raw-materials/${Y}`)},Le=A=>{H(A)},ts=()=>{R(T==="asc"?"desc":"asc")},ze=()=>{C("materialName"),L("asc"),M("all"),$("all"),ee("all"),W("all"),s(""),H("materialName"),R("asc"),ue("all"),Ae("all"),rt("all"),Pt("all")},cn=()=>{C(K),L(T),M(Q),$(me),ee(nt),W(Et),E(!1)},q=()=>{H(_),R(N),ue(P),Ae(B),rt(U),Pt(O),E(!1)},be=()=>{S?q():(H(_),R(N),ue(P),Ae(B),rt(U),Pt(O),E(!0))},Ye=[...v.filter(A=>{const Y=A.materialName.toLowerCase().includes(e.toLowerCase())||A.supplierName.toLowerCase().includes(e.toLowerCase())||A.tradeName.toLowerCase().includes(e.toLowerCase())||A.casNumber.toLowerCase().includes(e.toLowerCase())||A.manufacture.toLowerCase().includes(e.toLowerCase())||A.country.toLowerCase().includes(e.toLowerCase()),re=P==="all"||A.supplierName===P,We=B==="all"||A.physicalForm===B,dn=U==="all"||A.hazardClass===U,no=O==="all"||A.country===O;return Y&&re&&We&&dn&&no})].sort((A,Y)=>{let re,We;switch(_){case"materialName":re=A.materialName.toLowerCase(),We=Y.materialName.toLowerCase();break;case"supplierName":re=A.supplierName.toLowerCase(),We=Y.supplierName.toLowerCase();break;case"supplierCost":re=parseFloat(A.supplierCost)||0,We=parseFloat(Y.supplierCost)||0;break;case"physicalForm":re=A.physicalForm.toLowerCase(),We=Y.physicalForm.toLowerCase();break;case"hazardClass":re=A.hazardClass.toLowerCase(),We=Y.hazardClass.toLowerCase();break;case"country":re=A.country.toLowerCase(),We=Y.country.toLowerCase();break;case"purity":re=A.purity.toLowerCase(),We=Y.purity.toLowerCase();break;case"casNumber":re=A.casNumber.toLowerCase(),We=Y.casNumber.toLowerCase();break;default:re=A.materialName.toLowerCase(),We=Y.materialName.toLowerCase()}return re<We?N==="asc"?-1:1:re>We?N==="asc"?1:-1:0}),zt=[...new Set(v.map(A=>A.supplierName))].sort(),Sr=[...new Set(v.map(A=>A.physicalForm))].filter(Boolean).sort(),Cr=[...new Set(v.map(A=>A.hazardClass))].filter(Boolean).sort(),Er=[...new Set(v.map(A=>A.country))].filter(Boolean).sort(),Pr=(A,Y)=>{if(!j.current[Y])return;const re=j.current[Y].getBoundingClientRect(),We=(A.clientX-re.left)/re.width*100,dn=(A.clientY-re.top)/re.height*100;c({x:We,y:dn})},Ar=[{id:"all",label:"All Raw Materials"},{id:"assigned",label:"Assigned to me"},{id:"created",label:"Created by Me"}],mt=(A,Y)=>{es(re=>({...re,[A]:Y}))},Lr=()=>{f(!0)},Tr=()=>{p(!0)},D=()=>{console.log("Creating new material:",$e),es({supplier:"",materialName:"",manufacturer:"",casNumber:"",weightVolume:"",activityPercentage:"",density:"",viscosity:"",cost:"",supplierCost:""}),p(!1),f(!1)},te=()=>{p(!1),f(!1),es({supplier:"",materialName:"",manufacturer:"",casNumber:"",weightVolume:"",activityPercentage:"",density:"",viscosity:"",cost:"",supplierCost:""})};return g?a.jsx(Ie,{onMaterialAdded:oe,children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ds,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Raw Materials"})]})]}),a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-slate-400",children:"Loading raw materials..."})})]})}):b?a.jsx(Ie,{onMaterialAdded:oe,children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ds,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Raw Materials"})]})]}),a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-red-400",children:b})})]})}):a.jsx(Ie,{onMaterialAdded:oe,children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Ds,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Raw Materials"})]})]}),a.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("input",{type:"text",placeholder:"Search by Txn Id, Material Name, CAS Nu...",value:e,onChange:A=>s(A.target.value),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-80"})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{className:"p-3 bg-red-600 rounded-full hover:bg-red-500 transition-colors",children:a.jsx(HS,{className:"w-6 h-6"})}),a.jsx("button",{onClick:()=>u(!0),className:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors",title:"Upload to Dropbox",children:a.jsx("svg",{className:"w-5 h-5 text-slate-300",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})})})]})]})}),a.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex space-x-0",children:Ar.map(A=>a.jsxs("button",{ref:Y=>j.current[A.id]=Y,onClick:()=>r(A.id),onMouseEnter:()=>o(A.id),onMouseLeave:()=>o(null),onMouseMove:Y=>Pr(Y,A.id),className:`relative px-6 py-2 transition-all duration-300 ease-out ${n===A.id?"bg-slate-600 text-slate-100":"bg-slate-700 text-slate-400 hover:text-slate-200 hover:bg-slate-650"} ${A.id==="all"?"rounded-l-lg":A.id==="created"?"rounded-r-lg":""}`,style:{transform:i===A.id?"scale(1.05)":"scale(1)",transition:"transform 0.2s ease-out"},children:[a.jsx("span",{className:"relative z-10 font-medium",children:A.label}),i===A.id&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-md -z-0",style:{background:`radial-gradient(circle at ${l.x}% ${l.y}%, rgba(59, 130, 246, 0.15), transparent 50%)`}})]},A.id))}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:be,className:"flex items-center space-x-2 p-2 border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors",children:[a.jsx(Nc,{className:"h-5 w-5 text-slate-300"}),a.jsx("span",{className:"text-sm text-slate-300",children:"Filter & Sort"}),a.jsx($n,{className:"h-4 w-4 text-slate-300"})]}),S&&a.jsx("div",{className:"absolute right-0 mt-2 w-96 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200",children:"Sort By"}),a.jsxs("button",{onClick:ts,className:"flex items-center space-x-1 px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition-colors",children:[a.jsx("span",{children:T==="asc"?"Ascending":"Descending"}),a.jsx("span",{children:T==="asc"?"↑":"↓"})]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"materialName",label:"Material Name"},{key:"supplierName",label:"Supplier"},{key:"supplierCost",label:"Cost"},{key:"physicalForm",label:"Physical Form"},{key:"hazardClass",label:"Hazard Class"},{key:"country",label:"Country"},{key:"purity",label:"Purity"},{key:"casNumber",label:"CAS Number"}].map(A=>a.jsx("button",{onClick:()=>Le(A.key),className:`text-left px-3 py-2 rounded text-sm transition-colors ${K===A.key?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:A.label},A.key))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Supplier"}),a.jsxs("select",{value:Q,onChange:A=>ue(A.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Suppliers"}),zt.map(A=>a.jsx("option",{value:A,children:A},A))]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Form"}),a.jsxs("select",{value:me,onChange:A=>Ae(A.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Forms"}),Sr.map(A=>a.jsx("option",{value:A,children:A},A))]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Hazard"}),a.jsxs("select",{value:nt,onChange:A=>rt(A.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Hazard Classes"}),Cr.map(A=>a.jsx("option",{value:A,children:A},A))]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Country"}),a.jsxs("select",{value:Et,onChange:A=>Pt(A.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Countries"}),Er.map(A=>a.jsx("option",{value:A,children:A},A))]})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-slate-600",children:[a.jsx("button",{onClick:ze,className:"px-3 py-1 text-xs text-slate-400 hover:text-slate-200 transition-colors",children:"Clear All"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:q,className:"px-4 py-2 text-sm text-slate-300 hover:text-slate-100 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:cn,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Apply"})]})]})]})})]}),a.jsxs(Se,{onClick:Lr,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[a.jsx(yr,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Material"})]})]})]})}),a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"bg-slate-800 rounded-lg overflow-hidden border border-slate-700",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-slate-750 border-b border-slate-700",children:[a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Material Name"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Name"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Trade Name"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"CAS Number"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Manufacture"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Country"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Cost"})]})}),a.jsx("tbody",{children:Ye.map((A,Y)=>a.jsxs("tr",{onClick:()=>ke(A),className:"border-b border-slate-700 hover:bg-slate-750 transition-colors cursor-pointer",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-blue-400 hover:text-blue-300 cursor-pointer",children:A.materialName}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:A.supplierName}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:A.tradeName}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:A.casNumber}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:A.manufacture}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:A.country}),a.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",A.supplierCost?A.supplierCost.toFixed(2):"0.00"]})]},`${A.id}-${Y}`))})]})})}),a.jsx(lf,{isOpen:d,onClose:()=>u(!1)}),h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto border border-slate-700",children:[a.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 rounded-t-lg flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Raw Materials"}),a.jsx("button",{onClick:te,className:"text-white hover:text-slate-200 transition-colors",children:a.jsx(ut,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Supplier *"}),a.jsx("input",{type:"text",value:$e.supplier,onChange:A=>mt("supplier",A.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter supplier name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Material Name *"}),a.jsx("input",{type:"text",value:$e.materialName,onChange:A=>mt("materialName",A.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter material name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Manufacturer"}),a.jsx("input",{type:"text",value:$e.manufacturer,onChange:A=>mt("manufacturer",A.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter manufacturer"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"CAS Number"}),a.jsx("input",{type:"text",value:$e.casNumber,onChange:A=>mt("casNumber",A.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter CAS number"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Weight/Volume (lbs/gallon)"}),a.jsx("input",{type:"number",step:"0.01",value:$e.weightVolume,onChange:A=>mt("weightVolume",A.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"% Activity"}),a.jsx("input",{type:"number",step:"0.1",value:$e.activityPercentage,onChange:A=>mt("activityPercentage",A.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Density"}),a.jsx("input",{type:"number",step:"0.01",value:$e.density,onChange:A=>mt("density",A.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Viscosity"}),a.jsx("input",{type:"text",value:$e.viscosity,onChange:A=>mt("viscosity",A.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Text"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Cost ($USD)"}),a.jsx("input",{type:"number",step:"0.0001",value:$e.cost,onChange:A=>mt("cost",A.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.0000"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Supplier Cost"}),a.jsx("input",{type:"number",step:"0.01",value:$e.supplierCost,onChange:A=>mt("supplierCost",A.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]})]})]}),a.jsx("div",{className:"mt-8 flex justify-end",children:a.jsx("button",{onClick:Tr,className:"px-6 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-md font-medium transition-colors",children:"SUBMIT"})})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-60",children:a.jsx("div",{className:"bg-slate-800 rounded-lg shadow-xl max-w-md w-full mx-4 border border-slate-700",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-600 bg-opacity-20 rounded-full flex items-center justify-center",children:a.jsx(nb,{className:"h-6 w-6 text-blue-400"})}),a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"RAW MATERIALS"})]}),a.jsx("p",{className:"text-slate-300 mb-6",children:"Shall we go ahead and create this transaction?"}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:te,className:"px-4 py-2 text-slate-400 hover:text-slate-200 font-medium transition-colors",children:"Cancel"}),a.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium transition-colors",children:"CONFIRM"})]})]})})})]})})},VS=({isOpen:t,onClose:e,onSave:s,onDelete:n,material:r})=>{const[i,o]=w.useState({materialName:"",supplierName:"",manufacture:"",tradeName:"",casNumber:"",weightVolume:"",density:"",supplierCost:"",country:"",description:"",physicalForm:"",purity:"",storageConditions:"",hazardClass:"",shelfLife:""}),[l,c]=w.useState(!1);w.useEffect(()=>{r&&o({materialName:r.materialName||"",supplierName:r.supplierName||"",manufacture:r.manufacture||"",tradeName:r.tradeName||"",casNumber:r.casNumber||"",weightVolume:r.weightVolume||"",density:r.density||"",supplierCost:r.supplierCost||"",country:r.country||"",description:r.description||"",physicalForm:r.physicalForm||"",purity:r.purity||"",storageConditions:r.storageConditions||"",hazardClass:r.hazardClass||"",shelfLife:r.shelfLife||""})},[r]);const d=m=>{const{name:p,value:v}=m.target;o(x=>({...x,[p]:v}))},u=m=>{m.preventDefault(),s?s(i):(console.log("Updated material data:",i),e())},h=()=>{n&&r&&(n(r.id),c(!1),e())},f=()=>{r&&o({materialName:r.materialName||"",supplierName:r.supplierName||"",manufacture:r.manufacture||"",tradeName:r.tradeName||"",casNumber:r.casNumber||"",weightVolume:r.weightVolume||"",density:r.density||"",supplierCost:r.supplierCost||"",country:r.country||"",description:r.description||"",physicalForm:r.physicalForm||"",purity:r.purity||"",storageConditions:r.storageConditions||"",hazardClass:r.hazardClass||"",shelfLife:r.shelfLife||""}),c(!1),e()};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:"Edit Raw Material"}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-700 rounded transition-colors",children:a.jsx(ut,{className:"h-5 w-5 text-slate-400"})})]}),a.jsxs("form",{onSubmit:u,className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Basic Information"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Material Name *"}),a.jsx("input",{type:"text",name:"materialName",value:i.materialName,onChange:d,placeholder:"Enter material name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Trade Name"}),a.jsx("input",{type:"text",name:"tradeName",value:i.tradeName,onChange:d,placeholder:"Enter trade name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Name"}),a.jsx("input",{type:"text",name:"supplierName",value:i.supplierName,onChange:d,placeholder:"Enter supplier name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Manufacturer"}),a.jsx("input",{type:"text",name:"manufacture",value:i.manufacture,onChange:d,placeholder:"Enter manufacturer",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Country"}),a.jsx("input",{type:"text",name:"country",value:i.country,onChange:d,placeholder:"Enter country",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Technical Properties"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"CAS Number"}),a.jsx("input",{type:"text",name:"casNumber",value:i.casNumber,onChange:d,placeholder:"Enter CAS number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Physical Form"}),a.jsx("input",{type:"text",name:"physicalForm",value:i.physicalForm,onChange:d,placeholder:"e.g., Liquid, Powder, Crystals",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Purity"}),a.jsx("input",{type:"text",name:"purity",value:i.purity,onChange:d,placeholder:"e.g., 99.5%, Technical Grade",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Weight/Volume (lbs/gallon)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",name:"weightVolume",value:i.weightVolume,onChange:d,placeholder:"0.00",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Density"}),a.jsx("input",{type:"number",step:"0.01",min:"0",name:"density",value:i.density,onChange:d,placeholder:"0.00",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Cost ($)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",name:"supplierCost",value:i.supplierCost,onChange:d,placeholder:"0.00",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Safety & Notes"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Hazard Class"}),a.jsx("input",{type:"text",name:"hazardClass",value:i.hazardClass,onChange:d,placeholder:"e.g., Corrosive, Non-hazardous",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Shelf Life"}),a.jsx("input",{type:"text",name:"shelfLife",value:i.shelfLife,onChange:d,placeholder:"e.g., 24 months, 5 years",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Storage Conditions"}),a.jsx("textarea",{name:"storageConditions",value:i.storageConditions,onChange:d,placeholder:"Enter storage requirements...",rows:3,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Description & Notes"}),a.jsx("textarea",{name:"description",value:i.description,onChange:d,placeholder:"Enter detailed description, usage notes, or special handling instructions...",rows:5,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"}),a.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:[i.description.length," characters"]})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-6 mt-6 border-t border-slate-700",children:[a.jsx("div",{children:n&&a.jsxs("button",{type:"button",onClick:()=>c(!0),className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors flex items-center space-x-2",children:[a.jsx(Fa,{className:"h-4 w-4"}),a.jsx("span",{children:"Delete Material"})]})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"button",onClick:f,className:"px-6 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"bg-red-100 rounded-full p-2 mr-3",children:a.jsx(Fa,{className:"h-6 w-6 text-red-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Delete Material"})]}),a.jsxs("p",{className:"text-slate-300 mb-6",children:["Are you sure you want to delete ",a.jsx("strong",{children:r==null?void 0:r.materialName}),"? This action cannot be undone."]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),a.jsx("button",{onClick:h,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}):null},qS=()=>{const t=ft(),{materialId:e}=yv(),[s,n]=w.useState(!1),[r,i]=w.useState(null),[o,l]=w.useState(!0),[c,d]=w.useState(null);if(w.useEffect(()=>{(async()=>{try{l(!0);const x=(await lb()).find(g=>cb(g.materialName)===e);x?i(x):d("Material not found")}catch(v){console.error("Error loading material:",v),d("Failed to load material")}finally{l(!1)}})()},[e]),o)return a.jsx(Ie,{children:a.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-slate-400",children:"Loading material..."})})})});if(c||!r)return a.jsx(Ie,{children:a.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-4",children:c||"Material Not Found"}),a.jsx(Se,{onClick:()=>t("/raw-materials"),children:"Back to Raw Materials"})]})})});const u=()=>{n(!0)},h=()=>{n(!1)},f=async p=>{try{const v=await cS(r.id,p);v&&i(v),n(!1)}catch(v){console.error("Error updating material:",v)}},m=async p=>{try{await pS(p)?t("/raw-materials"):console.error("Failed to delete material")}catch(v){console.error("Error deleting material:",v)}};return a.jsx(Ie,{children:a.jsxs("div",{className:"min-h-screen bg-slate-900 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(Se,{variant:"secondary",onClick:()=>t("/raw-materials"),className:"flex items-center space-x-2",children:[a.jsx(kt,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Raw Materials"})]}),a.jsx("h1",{className:"text-2xl font-bold text-slate-100",children:"Raw Material Details"})]}),a.jsxs(Se,{onClick:u,className:"flex items-center space-x-2",children:[a.jsx(af,{className:"h-4 w-4"}),a.jsx("span",{children:"Edit Material"})]})]}),a.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 rounded-lg border border-slate-600 p-8 shadow-xl",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-4xl font-bold text-slate-100 mb-3",children:r.materialName}),a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx("span",{className:"px-3 py-1 bg-blue-600 text-white text-sm font-medium rounded-full",children:r.tradeName}),a.jsxs("span",{className:"px-3 py-1 bg-slate-600 text-slate-200 text-sm rounded-full",children:["CAS: ",r.casNumber]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Supplier Cost"}),a.jsxs("p",{className:"text-3xl font-bold text-green-400",children:["$",r.supplierCost?r.supplierCost.toFixed(2):"0.00"]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 shadow-lg",children:[a.jsxs("h3",{className:"text-xl font-semibold text-slate-200 mb-6 flex items-center",children:[a.jsx("div",{className:"w-2 h-6 bg-blue-500 rounded mr-3"}),"Technical Information"]}),a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-3",children:"Chemical Properties"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Physical Form:"}),a.jsx("span",{className:"text-slate-200",children:r.physicalForm})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Purity:"}),a.jsx("span",{className:"text-slate-200",children:r.purity})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Weight/Volume:"}),a.jsxs("span",{className:"text-slate-200",children:[r.weightVolume," lbs/gallon"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Density:"}),a.jsx("span",{className:"text-slate-200",children:r.density})]})]})]})})})]}),a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 shadow-lg",children:[a.jsxs("h3",{className:"text-xl font-semibold text-slate-200 mb-6 flex items-center",children:[a.jsx("div",{className:"w-2 h-6 bg-green-500 rounded mr-3"}),"Supplier & Safety"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-3",children:"Supplier Information"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Supplier:"}),a.jsx("span",{className:"text-slate-200",children:r.supplierName})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Manufacturer:"}),a.jsx("span",{className:"text-slate-200",children:r.manufacture})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Country:"}),a.jsx("span",{className:"text-slate-200",children:r.country})]})]})]}),a.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-3",children:"Safety & Storage"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Hazard Class:"}),a.jsx("span",{className:"text-slate-200",children:r.hazardClass})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Shelf Life:"}),a.jsx("span",{className:"text-slate-200",children:r.shelfLife})]})]}),a.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-600",children:[a.jsx("p",{className:"text-xs text-slate-400",children:"Storage Conditions:"}),a.jsx("p",{className:"text-sm text-slate-200 mt-1",children:r.storageConditions})]})]})]})]})]}),a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 shadow-lg",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"w-2 h-6 bg-purple-500 rounded mr-3"}),a.jsx("h3",{className:"text-xl font-semibold text-slate-200",children:"Description & Applications"})]}),a.jsx("div",{className:"bg-slate-700/30 rounded-lg border border-slate-600/50 p-6",children:a.jsx("p",{className:"text-slate-200 leading-relaxed",children:r.description})})]})]}),a.jsx(VS,{isOpen:s,onClose:h,onSave:f,onDelete:m,material:r})]})})},GS=({isOpen:t,onClose:e,onSave:s,currentUserEmail:n,isAdminReset:r=!1,targetUserName:i=""})=>{const[o,l]=w.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[c,d]=w.useState({old:!1,new:!1,confirm:!1}),[u,h]=w.useState({}),f=(g,y)=>{l(b=>({...b,[g]:y})),u[g]&&h(b=>({...b,[g]:""}))},m=g=>{d(y=>({...y,[g]:!y[g]}))},p=()=>{const g={};return!r&&!o.oldPassword&&(g.oldPassword="Current password is required"),o.newPassword?o.newPassword.length<6&&(g.newPassword="New password must be at least 6 characters"):g.newPassword="New password is required",o.confirmPassword?o.newPassword!==o.confirmPassword&&(g.confirmPassword="Passwords do not match"):g.confirmPassword="Please confirm your new password",!r&&o.oldPassword===o.newPassword&&(g.newPassword="New password must be different from current password"),h(g),Object.keys(g).length===0},v=()=>{p()&&s({email:n,oldPassword:o.oldPassword,newPassword:o.newPassword})},x=()=>{l({oldPassword:"",newPassword:"",confirmPassword:""}),h({}),d({old:!1,new:!1,confirm:!1}),e()};return t?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:x}),a.jsxs("div",{className:"relative bg-slate-800 rounded-lg shadow-xl w-full max-w-md mx-4 border border-slate-700",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(nf,{className:"h-5 w-5 text-white"})}),a.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:r?`Reset Password for ${i}`:"Change Password"})]}),a.jsx("button",{onClick:x,className:"p-1 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(ut,{className:"h-5 w-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[!r&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Current Password *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:c.old?"text":"password",value:o.oldPassword,onChange:g=>f("oldPassword",g.target.value),placeholder:"Enter your current password",className:`w-full px-3 py-2 pr-10 bg-slate-700 border rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.oldPassword?"border-red-500":"border-slate-600"}`}),a.jsx("button",{type:"button",onClick:()=>m("old"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200",children:c.old?a.jsx(ol,{className:"h-4 w-4"}):a.jsx(ll,{className:"h-4 w-4"})})]}),u.oldPassword&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.oldPassword})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"New Password *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:c.new?"text":"password",value:o.newPassword,onChange:g=>f("newPassword",g.target.value),placeholder:"Enter your new password",className:`w-full px-3 py-2 pr-10 bg-slate-700 border rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.newPassword?"border-red-500":"border-slate-600"}`}),a.jsx("button",{type:"button",onClick:()=>m("new"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200",children:c.new?a.jsx(ol,{className:"h-4 w-4"}):a.jsx(ll,{className:"h-4 w-4"})})]}),u.newPassword&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.newPassword}),a.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Minimum 6 characters"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Confirm New Password *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:c.confirm?"text":"password",value:o.confirmPassword,onChange:g=>f("confirmPassword",g.target.value),placeholder:"Confirm your new password",className:`w-full px-3 py-2 pr-10 bg-slate-700 border rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.confirmPassword?"border-red-500":"border-slate-600"}`}),a.jsx("button",{type:"button",onClick:()=>m("confirm"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200",children:c.confirm?a.jsx(ol,{className:"h-4 w-4"}):a.jsx(ll,{className:"h-4 w-4"})})]}),u.confirmPassword&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.confirmPassword})]})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-slate-700",children:[a.jsx(Se,{variant:"secondary",onClick:x,className:"bg-slate-700 hover:bg-slate-600 text-slate-200",children:"Cancel"}),a.jsx(Se,{onClick:v,className:"bg-blue-600 hover:bg-blue-500 text-white",children:r?"Reset Password":"Change Password"})]})]})]}):null},KS=({isOpen:t,onClose:e,user:s,onSave:n,onDelete:r,currentUserRole:i,onChangePassword:o})=>{const[l,c]=w.useState({name:"",email:"",contact:"",role:"",credentials:"",appAccess:[]}),[d,u]=w.useState(!1),h=j=>j==="NSight Admin"?[{id:"developer-mode",name:"Developer Mode",icon:Si},{id:"existing-company-mode",name:"Existing Company Mode",icon:tn}]:[{id:"formulas",name:"Formulas",icon:Rs},{id:"raw-materials",name:"Raw Materials",icon:Ds},{id:"suppliers",name:"Suppliers",icon:lt}],f=j=>{switch(j){case"Capacity Admin":return"admin/secure pass";case"NSight Admin":return"nsight-admin/enterprise pass";case"Employee":default:return"user/temporary pass"}},m=j=>{switch(j){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}};w.useEffect(()=>{s&&c({name:s.name||"",email:s.email||"",contact:s.contact||"",role:s.role||"Employee",credentials:s.credentials||f(s.role),appAccess:s.appAccess||[]})},[s]),w.useEffect(()=>{if(l.role&&s){const j=m(l.role),S=f(l.role);(JSON.stringify(l.appAccess)!==JSON.stringify(j)||l.credentials!==S)&&c(E=>({...E,appAccess:j,credentials:S}))}},[l.role,s]);const p=(j,S)=>{c(E=>({...E,[j]:S}))},v=j=>{c(S=>({...S,appAccess:S.appAccess.includes(j)?S.appAccess.filter(E=>E!==j):[...S.appAccess,j]}))},x=()=>{n({...s,...l}),e()},g=()=>{window.confirm(`Are you sure you want to delete ${s.name}? This action cannot be undone.`)&&(r(s.id),e())},y=()=>{u(!0)},b=()=>{u(!1)},k=async j=>{try{const S=await o({email:s.email,newPassword:j.newPassword,isAdminReset:!0});S&&S.success?(alert(`Password changed successfully for ${s.name}!`),u(!1)):alert(`Error: ${(S==null?void 0:S.error)||"Unknown error occurred"}`)}catch(S){console.error("Password change error:",S),alert("Error: Failed to change password. Please try again.")}};return t?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:e}),a.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-4xl mx-4 border border-gray-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-slate-700",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-slate-100",children:"Edit User"}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(ut,{className:"h-5 w-5 text-gray-400 dark:text-slate-400"})})]}),a.jsxs("div",{className:"p-6",children:[i==="Capacity Admin"&&a.jsx("div",{className:"pb-6 border-b border-slate-700 mb-6",children:a.jsxs(Se,{onClick:y,className:"bg-purple-600 hover:bg-purple-500 text-white flex items-center justify-center space-x-2 py-3 px-6",children:[a.jsx(nf,{className:"w-4 h-4"}),a.jsxs("span",{children:["Change Password for ",s==null?void 0:s.name]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-slate-100 mb-4",children:"Basic Information"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Name"}),a.jsx("input",{type:"text",value:l.name,onChange:j=>p("name",j.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:l.email,onChange:j=>p("email",j.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Contact"}),a.jsx("input",{type:"text",value:l.contact,onChange:j=>p("contact",j.target.value),placeholder:"Phone number",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-slate-100 mb-4",children:"Role & Permissions"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Role & Access Level"}),a.jsxs("select",{value:l.role,onChange:j=>p("role",j.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"Employee",className:"bg-white dark:bg-slate-700 text-gray-900 dark:text-slate-100",children:"Employee"}),a.jsx("option",{value:"Capacity Admin",className:"bg-white dark:bg-slate-700 text-gray-900 dark:text-slate-100",children:"Capacity Admin"}),a.jsx("option",{value:"NSight Admin",className:"bg-white dark:bg-slate-700 text-gray-900 dark:text-slate-100",children:"NSight Admin"})]}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:["Credentials: ",l.credentials]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-3",children:"App Access"}),a.jsx("div",{className:"space-y-3",children:h(l.role).map(j=>{const S=j.icon,E=l.appAccess.includes(j.id);return a.jsxs("button",{onClick:()=>v(j.id),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-all duration-200 ${E?"bg-blue-600 border-blue-500 text-white":"bg-slate-700 border-slate-600 text-slate-300 hover:bg-slate-600"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-md flex items-center justify-center ${E?"bg-blue-500":"bg-slate-600"}`,children:a.jsx(S,{className:"w-4 h-4"})}),a.jsx("span",{className:"font-medium",children:j.name})]}),E&&a.jsx(Ra,{className:"w-5 h-5"})]},j.id)})})]})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-slate-700",children:[a.jsxs(Se,{onClick:g,className:"bg-red-600 hover:bg-red-500 text-white flex items-center space-x-2",children:[a.jsx(Fa,{className:"w-4 h-4"}),a.jsx("span",{children:"Delete User"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Se,{variant:"secondary",onClick:e,className:"bg-slate-700 hover:bg-slate-600 text-slate-200",children:"Cancel"}),a.jsx(Se,{onClick:x,className:"bg-blue-600 hover:bg-blue-500 text-white",children:"Save Changes"})]})]})]}),a.jsx(GS,{isOpen:d,onClose:b,onSave:k,currentUserEmail:s==null?void 0:s.email,isAdminReset:!0,targetUserName:s==null?void 0:s.name})]}):null},YS=({isOpen:t,onClose:e,onSave:s})=>{const[n,r]=w.useState({name:"",email:"",contact:"",role:"Employee",credentials:"user/temporary pass",appAccess:["formulas"],password:""}),i=[{value:"Employee",label:"Employee",credentials:"user/temporary pass"},{value:"Capacity Admin",label:"Capacity Admin",credentials:"admin/secure pass"},{value:"NSight Admin",label:"NSight Admin",credentials:"nsight-admin/enterprise pass"}],o=m=>m==="NSight Admin"?[{id:"developer-mode",name:"Developer Mode",icon:Si},{id:"existing-company-mode",name:"Existing Company Mode",icon:tn}]:[{id:"formulas",name:"Formulas",icon:Rs},{id:"raw-materials",name:"Raw Materials",icon:Ds},{id:"suppliers",name:"Suppliers",icon:lt}],l=m=>{switch(m){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}},c=m=>{switch(m){case"Capacity Admin":return"admin/secure pass";case"NSight Admin":return"nsight-admin/enterprise pass";case"Employee":default:return"user/temporary pass"}},d=(m,p)=>{r(v=>{const x={...v,[m]:p};return m==="role"&&(x.appAccess=l(p),x.credentials=c(p)),x})},u=m=>{r(p=>({...p,appAccess:p.appAccess.includes(m)?p.appAccess.filter(v=>v!==m):[...p.appAccess,m]}))},h=()=>{if(!n.name.trim()||!n.email.trim()){alert("Name and email are required");return}if(!n.password.trim()){alert("Password is required");return}if(n.password.length<6){alert("Password must be at least 6 characters long");return}const m={id:Date.now(),name:n.name.trim(),email:n.email.trim(),contact:n.contact.trim(),role:n.role,credentials:n.credentials,appAccess:n.appAccess,status:"Active",lastLogin:"Never",password:n.password.trim()};s(m),r({name:"",email:"",contact:"",role:"Employee",credentials:"user/temporary pass",appAccess:["formulas"],password:""}),e()},f=()=>{r({name:"",email:"",contact:"",role:"Employee",credentials:"user/temporary pass",appAccess:["formulas"],password:""}),e()};return t?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:f}),a.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-4xl mx-4 border border-gray-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-slate-700",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-slate-100",children:"Add User"}),a.jsx("button",{onClick:f,className:"p-1 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(ut,{className:"h-5 w-5 text-gray-400 dark:text-slate-400"})})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-slate-100 mb-4",children:"Basic Information"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Name *"}),a.jsx("input",{type:"text",value:n.name,onChange:m=>d("name",m.target.value),placeholder:"Enter full name",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Email *"}),a.jsx("input",{type:"email",value:n.email,onChange:m=>d("email",m.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Contact"}),a.jsx("input",{type:"text",value:n.contact,onChange:m=>d("contact",m.target.value),placeholder:"Phone number (optional)",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Password *"}),a.jsx("input",{type:"password",value:n.password,onChange:m=>d("password",m.target.value),placeholder:"Create password for this user",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Minimum 6 characters"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-slate-100 mb-4",children:"Role & Permissions"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Role & Access Level"}),a.jsx("select",{value:n.role,onChange:m=>d("role",m.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:i.map(m=>a.jsx("option",{value:m.value,className:"bg-white dark:bg-slate-700 text-gray-900 dark:text-slate-100",children:m.label},m.value))}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:["Credentials: ",n.credentials]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-3",children:"App Access"}),a.jsx("div",{className:"space-y-3",children:o(n.role).map(m=>{const p=m.icon,v=n.appAccess.includes(m.id);return a.jsxs("button",{onClick:()=>u(m.id),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-all duration-200 ${v?"bg-blue-600 border-blue-500 text-white":"bg-slate-700 border-slate-600 text-slate-300 hover:bg-slate-600"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-md flex items-center justify-center ${v?"bg-blue-500":"bg-slate-600"}`,children:a.jsx(p,{className:"w-4 h-4"})}),a.jsx("span",{className:"font-medium",children:m.name})]}),v&&a.jsx(Ra,{className:"w-5 h-5"})]},m.id)})})]})]})]})}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-slate-700",children:[a.jsx(Se,{variant:"secondary",onClick:f,className:"bg-slate-700 hover:bg-slate-600 text-slate-200",children:"Cancel"}),a.jsx(Se,{onClick:h,className:"bg-blue-600 hover:bg-blue-500 text-white",children:"Add User"})]})]})]}):null},JS=()=>{const t=ft(),e=$t(),{user:s,userProfile:n,getAllUsers:r,updateUserProfile:i,deleteUserProfile:o,adminCreateUser:l,changePassword:c,getDashboardRoute:d,loading:u}=Fs(),[h,f]=w.useState(""),[m,p]=w.useState([]),[v,x]=w.useState(!1),[g,y]=w.useState(!1),[b,k]=w.useState(null),[j,S]=w.useState(!1),[E,_]=w.useState("name"),[C,N]=w.useState("asc"),[L,P]=w.useState("all"),[M,B]=w.useState("all"),[$,U]=w.useState("all"),[ee,O]=w.useState("all"),[W,K]=w.useState(!1),[H,T]=w.useState("name"),[R,Q]=w.useState("asc"),[ue,me]=w.useState("all"),[Ae,nt]=w.useState("all"),[rt,Et]=w.useState("all"),[Pt,$e]=w.useState("all");w.useEffect(()=>{if(!u&&n&&n.role!=="Capacity Admin"){console.log(`🚫 Access denied to user management for role: ${n.role}, redirecting to dashboard`);const D=d();t(D,{replace:!0})}},[n,u,t,d]);const es=D=>{switch(D){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}},V=D=>{switch(D){case"Capacity Admin":return"admin/secure pass";case"NSight Admin":return"nsight-admin/enterprise pass";case"Employee":return"user/temporary pass";default:return"user/temporary pass"}},oe=async()=>{if(!W)try{K(!0);const{data:D,error:te}=await r();if(te){console.error("Error loading users:",te);return}const A=D.map((Y,re)=>({id:Y.id,name:`${Y.first_name||""} ${Y.last_name||""}`.trim()||Y.email.split("@")[0],email:Y.email||"",role:Y.role||"Employee",status:"Active",lastLogin:Y.created_at?new Date(Y.created_at).toISOString().split("T")[0]:"Never",contact:"",appAccess:es(Y.role||"Employee")||[],credentials:V(Y.role||"Employee")||"",department:Y.department||"",created_at:Y.created_at,updated_at:Y.updated_at}));p(A)}catch(D){console.error("Error in loadUsers:",D)}finally{K(!1)}};if(w.useEffect(()=>{oe()},[]),u)return a.jsx(Ie,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-300",children:"Loading..."})]})})});if(n&&n.role!=="Capacity Admin")return null;w.useEffect(()=>{const D=te=>{j&&!te.target.closest(".relative")&&S(!1)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[j]),w.useEffect(()=>{const D=new URLSearchParams(e.search);D.get("action")==="add"&&(y(!0),t("/user-management",{replace:!0}));const te=D.get("filterApp");te&&(O(te),$e(te),t("/user-management",{replace:!0}))},[e.search,t]);const Le=[...m.filter(D=>{const te=(D.name||"").toLowerCase().includes(h.toLowerCase())||(D.email||"").toLowerCase().includes(h.toLowerCase())||(D.id||"").toString().includes(h),A=L==="all"||D.role===L,Y=M==="all"||D.status===M,re=(D.email||"").split("@")[1],We=$==="all"||$==="capacity.com"&&re==="capacity.com"||$==="nsight-inc.com"&&re==="nsight-inc.com"||$==="other"&&re!=="capacity.com"&&re!=="nsight-inc.com",dn=ee==="all"||(D.appAccess||[]).includes(ee);return te&&A&&Y&&We&&dn})].sort((D,te)=>{let A,Y;switch(E){case"name":A=(D.name||"").toLowerCase(),Y=(te.name||"").toLowerCase();break;case"role":const re={Employee:1,Admin:2,"NSight Admin":3};A=re[D.role]||4,Y=re[te.role]||4;break;case"lastLogin":A=new Date(D.lastLogin),Y=new Date(te.lastLogin);break;case"email":A=(D.email||"").toLowerCase(),Y=(te.email||"").toLowerCase();break;case"id":A=D.id,Y=te.id;break;case"domain":A=(D.email||"").split("@")[1],Y=(te.email||"").split("@")[1];break;case"appAccess":A=(D.appAccess||[]).length,Y=(te.appAccess||[]).length;break;case"status":A=D.status,Y=D.status;break;default:A=(D.name||"").toLowerCase(),Y=(te.name||"").toLowerCase()}return A<Y?C==="asc"?-1:1:A>Y?C==="asc"?1:-1:0}),ts=D=>{switch(D){case"formulas":return a.jsx(Rs,{className:"w-4 h-4 text-blue-500"});case"raw-materials":return a.jsx(Ds,{className:"w-4 h-4 text-blue-500"});case"suppliers":return a.jsx(lt,{className:"w-4 h-4 text-blue-500"});case"developer-mode":return a.jsx(Si,{className:"w-4 h-4 text-blue-500"});case"existing-company-mode":return a.jsx(tn,{className:"w-4 h-4 text-green-500"});default:return null}},ze=D=>{switch(D){case"Admin":return"text-purple-600 bg-purple-100";case"Capacity Admin":return"text-green-600 bg-green-100";case"NSight Admin":return"text-indigo-600 bg-indigo-100";case"Employee":return"text-blue-600 bg-blue-100";default:return"text-slate-600 bg-slate-100"}},cn=D=>{k(D),x(!0)},q=async D=>{try{const te={first_name:D.name.split(" ")[0]||"",last_name:D.name.split(" ").slice(1).join(" ")||"",role:D.role,department:D.department||""},{error:A}=await i(D.id,te);if(A){console.error("Error updating user:",A),alert("Failed to update user. Please try again.");return}await oe(),x(!1),k(null)}catch(te){console.error("Error in handleSaveUser:",te),alert("Failed to update user. Please try again.")}},be=async D=>{try{if(console.log("🔄 UserManagementPage: Deleting user with ID:",D),s&&s.id===D){alert("Cannot delete your own account while logged in. Please have another admin delete your account, or sign out first.");return}const te=m.find(re=>re.id===D);if(!te){alert("User not found in current list.");return}console.log("🔄 UserManagementPage: Deleting user:",te.email);const{data:A,error:Y}=await o(D);if(Y){console.error("❌ UserManagementPage: Delete failed:",Y),alert(`Failed to delete user: ${Y.message||Y}`);return}console.log("✅ UserManagementPage: Delete successful, refreshing user list..."),await new Promise(re=>setTimeout(re,1e3));try{await oe(),console.log("📝 UserManagementPage: Refreshed user list after deletion"),m.some(We=>We.id===D)?(console.warn("⚠️ UserManagementPage: User still exists after deletion - likely auto-recreated"),alert("User profile was deleted but may have been automatically recreated. This can happen if the user is currently authenticated in another session.")):alert("User deleted successfully!")}catch(re){console.error("❌ UserManagementPage: Error refreshing users:",re),alert("User deleted but failed to refresh list. Please reload the page.");return}x(!1),k(null)}catch(te){console.error("❌ UserManagementPage: Unexpected error in handleDeleteUser:",te),alert(`Unexpected error: ${te.message}`)}},Oe=()=>{x(!1),k(null)},Ye=()=>{y(!0)},zt=async D=>{try{console.log("🔧 Admin creating new user:",D.email);const{data:te,error:A}=await l(D.email,D.password,{firstName:D.name.split(" ")[0]||"",lastName:D.name.split(" ").slice(1).join(" ")||"",role:D.role,department:D.department||""});if(A){console.error("❌ Error creating user:",A),alert(`Failed to create user: ${A.message||A}`);return}console.log("✅ User created successfully:",te),alert(`User created successfully! Email: ${D.email}
Password: ${D.password}

Please share these credentials with the user and ask them to change their password on first login.`),await oe(),y(!1)}catch(te){console.error("❌ Error in handleSaveNewUser:",te),alert(`Unexpected error: ${te.message}`)}},Sr=()=>{y(!1)},Cr=D=>{T(D)},Er=()=>{Q(R==="asc"?"desc":"asc")},Pr=()=>{_("name"),N("asc"),P("all"),B("all"),U("all"),O("all"),f(""),T("name"),Q("asc"),me("all"),nt("all"),Et("all"),$e("all")},Ar=()=>{_(H),N(R),P(ue),B(Ae),U(rt),O(Pt),S(!1)},mt=()=>{T(E),Q(C),me(L),nt(M),Et($),$e(ee),S(!1)},Lr=()=>{j?mt():(T(E),Q(C),me(L),nt(M),Et($),$e(ee),S(!0))},Tr=async D=>{if(!D||!D.email||!D.newPassword)return console.error("Invalid password data:",D),{success:!1,error:"Invalid password data provided"};if((n==null?void 0:n.role)!=="Capacity Admin")return console.error("Insufficient permissions for password change"),{success:!1,error:"Insufficient permissions"};try{if(console.log("Password change requested for:",D.email),console.log("Admin user:",n==null?void 0:n.email),D.email===(s==null?void 0:s.email)){console.log("Admin changing own password");const{error:te}=await c(D.newPassword);return te?(console.error("Password change error:",te),{success:!1,error:te.message||"Failed to change password"}):(console.log("Password change successful for own account"),{success:!0,message:`Password successfully changed for ${D.email}`})}else{console.log("Admin changing another user's password");const{data:{session:te}}=await we.auth.getSession();if(!te)return console.error("No active session found"),{success:!1,error:"No active session found. Please log in again."};const A=await fetch("/api/admin/users?action=change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetEmail:D.email,newPassword:D.newPassword,adminToken:te.access_token})});if(!A.ok){console.error("API request failed with status:",A.status);try{const re=await A.json();return console.error("API Error:",re.error),{success:!1,error:re.error||"Failed to change password"}}catch(re){return console.error("Failed to parse error response:",re),{success:!1,error:"Failed to change password. Server error."}}}const Y=await A.json();return console.log("Password change API response:",Y),{success:!0,message:Y.message||`Password successfully changed for ${D.email}`}}}catch(te){return console.error("Password change error:",te),{success:!1,error:te.message||"Failed to change password. Please try again."}}};return a.jsxs(Ie,{children:[a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"grid grid-cols-3 gap-1 p-2",children:[...Array(9)].map((D,te)=>a.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-sm"},te))}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"User Management"})]})]})}),a.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("input",{type:"text",placeholder:"Search by Name",value:h,onChange:D=>f(D.target.value),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:Lr,className:"flex items-center space-x-2 p-2 border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors",children:[a.jsx(Nc,{className:"h-5 w-5 text-slate-300"}),a.jsx("span",{className:"text-sm text-slate-300",children:"Filter & Sort"}),a.jsx($n,{className:"h-4 w-4 text-slate-300"})]}),j&&a.jsx("div",{className:"absolute right-0 mt-2 w-96 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200",children:"Sort By"}),a.jsxs("button",{onClick:Er,className:"flex items-center space-x-1 px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition-colors",children:[a.jsx("span",{children:R==="asc"?"Ascending":"Descending"}),a.jsx("span",{children:R==="asc"?"↑":"↓"})]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"name",label:"Name"},{key:"role",label:"Role"},{key:"lastLogin",label:"Last Login"},{key:"email",label:"Email"},{key:"id",label:"ID"},{key:"domain",label:"Domain"},{key:"appAccess",label:"App Count"},{key:"status",label:"Status"}].map(D=>a.jsx("button",{onClick:()=>Cr(D.key),className:`text-left px-3 py-2 rounded text-sm transition-colors ${H===D.key?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:D.label},D.key))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Role"}),a.jsxs("select",{value:ue,onChange:D=>me(D.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"Employee",children:"Employee"}),a.jsx("option",{value:"Admin",children:"Admin"}),a.jsx("option",{value:"NSight Admin",children:"NSight Admin"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Status"}),a.jsxs("select",{value:Ae,onChange:D=>nt(D.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Domain"}),a.jsxs("select",{value:rt,onChange:D=>Et(D.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Domains"}),a.jsx("option",{value:"capacity.com",children:"@capacity.com"}),a.jsx("option",{value:"nsight-inc.com",children:"@nsight-inc.com"}),a.jsx("option",{value:"other",children:"Other Domains"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by App Access"}),a.jsxs("select",{value:Pt,onChange:D=>$e(D.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Apps"}),a.jsx("option",{value:"formulas",children:"Has Formulas Access"}),a.jsx("option",{value:"suppliers",children:"Has Suppliers Access"}),a.jsx("option",{value:"raw-materials",children:"Has Raw Materials Access"}),a.jsx("option",{value:"developer-mode",children:"Has Developer Mode Access"}),a.jsx("option",{value:"existing-company-mode",children:"Has Existing Company Mode Access"})]})]})]})]}),a.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-600 space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("button",{onClick:mt,className:"px-3 py-2 bg-slate-600 text-white rounded text-sm hover:bg-slate-700 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:Ar,className:"px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors font-medium",children:"Apply Filters"})]}),a.jsx("button",{onClick:Pr,className:"w-full px-3 py-2 bg-red-600 text-white rounded text-sm hover:bg-red-700 transition-colors",children:"Clear All Filters"})]})]})})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:oe,disabled:W,className:"flex items-center space-x-2 px-3 py-2 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-600 disabled:opacity-50 text-slate-200 rounded-lg transition-colors",title:"Refresh user list",children:[a.jsx("svg",{className:`h-4 w-4 ${W?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),a.jsx("span",{children:W?"Refreshing...":"Refresh"})]}),(n==null?void 0:n.role)==="Capacity Admin"&&a.jsxs("button",{onClick:Ye,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:[a.jsx(yr,{className:"h-4 w-4"}),a.jsx("span",{children:"Add User"})]})]})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-slate-100",children:"User Access Management"}),a.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[a.jsxs("p",{className:"text-sm text-slate-400",children:["Showing ",Le.length," of ",m.length," users"]}),(L!=="all"||M!=="all"||$!=="all"||ee!=="all"||E!=="name")&&a.jsxs("div",{className:"flex items-center space-x-2 flex-wrap",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Active filters:"}),L!=="all"&&a.jsxs("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs rounded",children:["Role: ",L]}),M!=="all"&&a.jsxs("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded",children:["Status: ",M]}),$!=="all"&&a.jsxs("span",{className:"px-2 py-1 bg-orange-600 text-white text-xs rounded",children:["Domain: ",$]}),ee!=="all"&&a.jsxs("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded",children:["App: ",ee]}),E!=="name"&&a.jsxs("span",{className:"px-2 py-1 bg-slate-600 text-white text-xs rounded",children:["Sort: ",E," (",C,")"]})]})]})]})}),a.jsx("div",{className:"bg-slate-800 rounded-lg shadow-sm overflow-hidden border border-slate-700",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full table-fixed min-w-[1240px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-slate-700 bg-slate-750",children:[a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[180px]",children:"Name"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[120px]",children:"ID"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[220px]",children:"Email"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[140px]",children:"Role"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[120px]",children:"Contact"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[160px]",children:"App Access"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[180px]",children:"Credentials"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[80px]",children:"Actions"})]})}),a.jsx("tbody",{children:Le.map((D,te)=>a.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-700 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-slate-100 font-medium truncate",title:D.name||"",children:D.name||""}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-slate-700 text-slate-200 text-xs font-mono rounded border border-slate-600",children:["#",D.id||""]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300 truncate",title:D.email||"",children:a.jsx("a",{href:`mailto:${D.email||""}`,className:"text-blue-400 hover:text-blue-300 underline truncate block",children:D.email||""})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium truncate ${ze(D.role||"Employee")}`,children:D.role||"Employee"})}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300 truncate",title:D.contact||"",children:D.contact||"-"}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex items-center space-x-1 overflow-x-auto",children:(D.appAccess||[]).map((A,Y)=>a.jsx("div",{className:"w-8 h-8 bg-slate-700 rounded-md flex items-center justify-center hover:bg-slate-600 transition-colors flex-shrink-0",title:typeof A=="string"?A.replace("-"," ").replace(/\b\w/g,re=>re.toUpperCase()):"",children:ts(A)},`${A}-${Y}`))})}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300 truncate",title:D.credentials||"",children:D.credentials||""}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("button",{onClick:()=>cn(D),className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-600 rounded-md transition-colors",title:"Edit user",children:a.jsx(af,{className:"h-4 w-4"})})})]},D.id||`user-${te}`))})]})})})]})]}),a.jsx(KS,{isOpen:v,onClose:Oe,user:b,onSave:q,onDelete:be,currentUserRole:(n==null?void 0:n.role)||"Employee",onChangePassword:Tr}),a.jsx(YS,{isOpen:g,onClose:Sr,onSave:zt})]})},QS=()=>{var o;const t=ft(),{theme:e,changeTheme:s,isTransitioning:n}=Rk(),r=[{id:"light",name:"Light Mode",icon:sS,description:"Light theme with bright colors",preview:"bg-white border-gray-200"},{id:"dark",name:"Dark Mode",icon:Xk,description:"Dark theme with muted colors",preview:"bg-slate-800 border-slate-600"},{id:"system",name:"System",icon:Qk,description:"Follow system preference",preview:"bg-gradient-to-r from-white to-slate-800 border-slate-400"}],i=l=>{s(l)};return a.jsx(Ie,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Bl,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Settings"})]})]})}),a.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-100 mb-2",children:"Appearance"}),a.jsx("p",{className:"text-slate-400",children:"Customize how the application looks and feels"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Theme"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.map(l=>{const c=l.icon,d=e===l.id;return a.jsxs("button",{onClick:()=>i(l.id),disabled:n,className:`relative p-4 rounded-lg border-2 transition-all duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed ${d?"border-blue-500 bg-blue-500/10 ring-2 ring-blue-500/20":"border-slate-600 hover:border-slate-500 bg-slate-700/50"}`,children:[a.jsx("div",{className:`w-full h-20 rounded-md mb-3 border-2 ${l.preview} transition-all duration-300`,children:a.jsx("div",{className:"p-2 h-full flex items-center justify-center",children:a.jsx(c,{className:`h-6 w-6 ${l.id==="light"?"text-gray-600":l.id==="dark"?"text-slate-300":"text-slate-500"}`})})}),a.jsxs("div",{className:"text-left",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx(c,{className:"h-4 w-4 text-slate-400"}),a.jsx("span",{className:"font-medium text-slate-200",children:l.name}),d&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),a.jsx("p",{className:"text-sm text-slate-400",children:l.description})]}),d&&a.jsx("div",{className:"absolute inset-0 rounded-lg bg-blue-500/5 animate-pulse"})]},l.id)})})]}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-700",children:[a.jsxs("div",{className:"text-sm text-slate-400",children:[a.jsx("span",{children:"Current theme: "}),a.jsx("span",{className:"text-slate-200 font-medium",children:(o=r.find(l=>l.id===e))==null?void 0:o.name}),n&&a.jsx("span",{className:"ml-2 text-blue-400 animate-pulse",children:"(Applying changes...)"})]}),a.jsx("div",{className:"text-xs text-slate-500",children:"Changes apply automatically"})]})]})]}),a.jsx(ce,{className:"p-6 opacity-50",children:a.jsxs("div",{className:"mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-100 mb-2",children:"General Settings"}),a.jsx("p",{className:"text-slate-400",children:"Coming soon..."})]})}),a.jsx(ce,{className:"p-6 opacity-50",children:a.jsxs("div",{className:"mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-100 mb-2",children:"Account Settings"}),a.jsx("p",{className:"text-slate-400",children:"Coming soon..."})]})})]})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function to(t){return t+.5|0}const jn=(t,e,s)=>Math.max(Math.min(t,s),e);function Ji(t){return jn(to(t*2.55),0,255)}function Rn(t){return jn(to(t*255),0,255)}function Ks(t){return jn(to(t/2.55)/100,0,1)}function L0(t){return jn(to(t*100),0,100)}const ss={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},Ru=[..."0123456789ABCDEF"],XS=t=>Ru[t&15],ZS=t=>Ru[(t&240)>>4]+Ru[t&15],To=t=>(t&240)>>4===(t&15),eC=t=>To(t.r)&&To(t.g)&&To(t.b)&&To(t.a);function tC(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&ss[t[1]]*17,g:255&ss[t[2]]*17,b:255&ss[t[3]]*17,a:e===5?ss[t[4]]*17:255}:(e===7||e===9)&&(s={r:ss[t[1]]<<4|ss[t[2]],g:ss[t[3]]<<4|ss[t[4]],b:ss[t[5]]<<4|ss[t[6]],a:e===9?ss[t[7]]<<4|ss[t[8]]:255})),s}const sC=(t,e)=>t<255?e(t):"";function nC(t){var e=eC(t)?XS:ZS;return t?"#"+e(t.r)+e(t.g)+e(t.b)+sC(t.a,e):void 0}const rC=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function db(t,e,s){const n=e*Math.min(s,1-s),r=(i,o=(i+t/30)%12)=>s-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function iC(t,e,s){const n=(r,i=(r+t/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function aC(t,e,s){const n=db(t,1,.5);let r;for(e+s>1&&(r=1/(e+s),e*=r,s*=r),r=0;r<3;r++)n[r]*=1-e-s,n[r]+=e;return n}function oC(t,e,s,n,r){return t===r?(e-s)/n+(e<s?6:0):e===r?(s-t)/n+2:(t-e)/n+4}function cf(t){const s=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(s,n,r),o=Math.min(s,n,r),l=(i+o)/2;let c,d,u;return i!==o&&(u=i-o,d=l>.5?u/(2-i-o):u/(i+o),c=oC(s,n,r,u,i),c=c*60+.5),[c|0,d||0,l]}function df(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Rn)}function uf(t,e,s){return df(db,t,e,s)}function lC(t,e,s){return df(aC,t,e,s)}function cC(t,e,s){return df(iC,t,e,s)}function ub(t){return(t%360+360)%360}function dC(t){const e=rC.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?Ji(+e[5]):Rn(+e[5]));const r=ub(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=lC(r,i,o):e[1]==="hsv"?n=cC(r,i,o):n=uf(r,i,o),{r:n[0],g:n[1],b:n[2],a:s}}function uC(t,e){var s=cf(t);s[0]=ub(s[0]+e),s=uf(s),t.r=s[0],t.g=s[1],t.b=s[2]}function hC(t){if(!t)return;const e=cf(t),s=e[0],n=L0(e[1]),r=L0(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${r}%, ${Ks(t.a)})`:`hsl(${s}, ${n}%, ${r}%)`}const T0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},M0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function fC(){const t={},e=Object.keys(M0),s=Object.keys(T0);let n,r,i,o,l;for(n=0;n<e.length;n++){for(o=l=e[n],r=0;r<s.length;r++)i=s[r],l=l.replace(i,T0[i]);i=parseInt(M0[o],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let Mo;function mC(t){Mo||(Mo=fC(),Mo.transparent=[0,0,0,0]);const e=Mo[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const pC=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function gC(t){const e=pC.exec(t);let s=255,n,r,i;if(e){if(e[7]!==n){const o=+e[7];s=e[8]?Ji(o):jn(o*255,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?Ji(n):jn(n,0,255)),r=255&(e[4]?Ji(r):jn(r,0,255)),i=255&(e[6]?Ji(i):jn(i,0,255)),{r:n,g:r,b:i,a:s}}}function xC(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Ks(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const pd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,$r=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function yC(t,e,s){const n=$r(Ks(t.r)),r=$r(Ks(t.g)),i=$r(Ks(t.b));return{r:Rn(pd(n+s*($r(Ks(e.r))-n))),g:Rn(pd(r+s*($r(Ks(e.g))-r))),b:Rn(pd(i+s*($r(Ks(e.b))-i))),a:t.a+s*(e.a-t.a)}}function Do(t,e,s){if(t){let n=cf(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=uf(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function hb(t,e){return t&&Object.assign(e||{},t)}function D0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Rn(t[3]))):(e=hb(t,{r:0,g:0,b:0,a:1}),e.a=Rn(e.a)),e}function vC(t){return t.charAt(0)==="r"?gC(t):dC(t)}class $a{constructor(e){if(e instanceof $a)return e;const s=typeof e;let n;s==="object"?n=D0(e):s==="string"&&(n=tC(e)||mC(e)||vC(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=hb(this._rgb);return e&&(e.a=Ks(e.a)),e}set rgb(e){this._rgb=D0(e)}rgbString(){return this._valid?xC(this._rgb):void 0}hexString(){return this._valid?nC(this._rgb):void 0}hslString(){return this._valid?hC(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,r=e.rgb;let i;const o=s===i?.5:s,l=2*o-1,c=n.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,n.r=255&d*n.r+i*r.r+.5,n.g=255&d*n.g+i*r.g+.5,n.b=255&d*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=yC(this._rgb,e._rgb,s)),this}clone(){return new $a(this.rgb)}alpha(e){return this._rgb.a=Rn(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=to(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Do(this._rgb,2,e),this}darken(e){return Do(this._rgb,2,-e),this}saturate(e){return Do(this._rgb,1,e),this}desaturate(e){return Do(this._rgb,1,-e),this}rotate(e){return uC(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function zs(){}const bC=(()=>{let t=0;return()=>t++})();function ve(t){return t==null}function Me(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ge(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function qe(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function Ht(t,e){return qe(t)?t:e}function de(t,e){return typeof t>"u"?e:t}const wC=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Ee(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function Ne(t,e,s,n){let r,i,o;if(Me(t))if(i=t.length,n)for(r=i-1;r>=0;r--)e.call(s,t[r],r);else for(r=0;r<i;r++)e.call(s,t[r],r);else if(ge(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(s,t[o[r]],o[r])}function Hl(t,e){let s,n,r,i;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(r=t[s],i=e[s],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function Wl(t){if(Me(t))return t.map(Wl);if(ge(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let r=0;for(;r<n;++r)e[s[r]]=Wl(t[s[r]]);return e}return t}function fb(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function jC(t,e,s,n){if(!fb(t))return;const r=e[t],i=s[t];ge(r)&&ge(i)?za(r,i,n):e[t]=Wl(i)}function za(t,e,s){const n=Me(e)?e:[e],r=n.length;if(!ge(t))return t;s=s||{};const i=s.merger||jC;let o;for(let l=0;l<r;++l){if(o=n[l],!ge(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)i(c[d],t,o,s)}return t}function fa(t,e){return za(t,e,{merger:NC})}function NC(t,e,s){if(!fb(t))return;const n=e[t],r=s[t];ge(n)&&ge(r)?fa(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Wl(r))}const O0={"":t=>t,x:t=>t.x,y:t=>t.y};function _C(t){const e=t.split("."),s=[];let n="";for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function kC(t){const e=_C(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function pi(t,e){return(O0[e]||(O0[e]=kC(e)))(t)}function hf(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Ua=t=>typeof t<"u",zn=t=>typeof t=="function",R0=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function SC(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Qe=Math.PI,Jt=2*Qe,CC=Jt+Qe,Vl=Number.POSITIVE_INFINITY,EC=Qe/180,Gt=Qe/2,Yn=Qe/4,I0=Qe*2/3,Nn=Math.log10,Os=Math.sign;function ma(t,e,s){return Math.abs(t-e)<s}function F0(t){const e=Math.round(t);t=ma(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(Nn(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function PC(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((r,i)=>r-i).pop(),e}function AC(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Ba(t){return!AC(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function LC(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function mb(t,e,s){let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function _n(t){return t*(Qe/180)}function ff(t){return t*(180/Qe)}function $0(t){if(!qe(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function TC(t,e){const s=e.x-t.x,n=e.y-t.y,r=Math.sqrt(s*s+n*n);let i=Math.atan2(n,s);return i<-.5*Qe&&(i+=Jt),{angle:i,distance:r}}function Iu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function MC(t,e){return(t-e+CC)%Jt-Qe}function Vt(t){return(t%Jt+Jt)%Jt}function pb(t,e,s,n){const r=Vt(t),i=Vt(e),o=Vt(s),l=Vt(i-r),c=Vt(o-r),d=Vt(r-i),u=Vt(r-o);return r===i||r===o||n&&i===o||l>c&&d<u}function Kt(t,e,s){return Math.max(e,Math.min(s,t))}function DC(t){return Kt(t,-32768,32767)}function kn(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function mf(t,e,s){s=s||(o=>t[o]<e);let n=t.length-1,r=0,i;for(;n-r>1;)i=r+n>>1,s(i)?r=i:n=i;return{lo:r,hi:n}}const lr=(t,e,s,n)=>mf(t,s,n?r=>{const i=t[r][e];return i<s||i===s&&t[r+1][e]===s}:r=>t[r][e]<s),OC=(t,e,s)=>mf(t,s,n=>t[n][e]>=s);function RC(t,e,s){let n=0,r=t.length;for(;n<r&&t[n]<e;)n++;for(;r>n&&t[r-1]>s;)r--;return n>0||r<t.length?t.slice(n,r):t}const gb=["push","pop","shift","splice","unshift"];function IC(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),gb.forEach(s=>{const n="_onData"+hf(s),r=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...i)}),o}})})}function z0(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(gb.forEach(i=>{delete t[i]}),delete t._chartjs)}function xb(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const yb=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function vb(t,e){let s=[],n=!1;return function(...r){s=r,n||(n=!0,yb.call(window,()=>{n=!1,t.apply(e,s)}))}}function FC(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const pf=t=>t==="start"?"left":t==="end"?"right":"center",vt=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,$C=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function zC(t,e,s){const n=e.length;let r=0,i=n;if(t._sorted){const{iScale:o,vScale:l,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:f,minDefined:m,maxDefined:p}=o.getUserBounds();if(m){if(r=Math.min(lr(c,u,h).lo,s?n:lr(e,u,o.getPixelForValue(h)).lo),d){const v=c.slice(0,r+1).reverse().findIndex(x=>!ve(x[l.axis]));r-=Math.max(0,v)}r=Kt(r,0,n-1)}if(p){let v=Math.max(lr(c,o.axis,f,!0).hi+1,s?0:lr(e,u,o.getPixelForValue(f),!0).hi+1);if(d){const x=c.slice(v-1).findIndex(g=>!ve(g[l.axis]));v+=Math.max(0,x)}i=Kt(v,r,n)-r}else i=n-r}return{start:r,count:i}}function UC(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,r={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=r,!0;const i=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,r),i}const Oo=t=>t===0||t===1,U0=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Jt/s)),B0=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Jt/s)+1,pa={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Gt)+1,easeOutSine:t=>Math.sin(t*Gt),easeInOutSine:t=>-.5*(Math.cos(Qe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Oo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Oo(t)?t:U0(t,.075,.3),easeOutElastic:t=>Oo(t)?t:B0(t,.075,.3),easeInOutElastic(t){return Oo(t)?t:t<.5?.5*U0(t*2,.1125,.45):.5+.5*B0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-pa.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?pa.easeInBounce(t*2)*.5:pa.easeOutBounce(t*2-1)*.5+.5};function gf(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function H0(t){return gf(t)?t:new $a(t)}function gd(t){return gf(t)?t:new $a(t).saturate(.5).darken(.1).hexString()}const BC=["x","y","borderWidth","radius","tension"],HC=["color","borderColor","backgroundColor"];function WC(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:HC},numbers:{type:"number",properties:BC}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function VC(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const W0=new Map;function qC(t,e){e=e||{};const s=t+JSON.stringify(e);let n=W0.get(s);return n||(n=new Intl.NumberFormat(t,e),W0.set(s,n)),n}function xf(t,e,s){return qC(e,s).format(t)}const bb={values(t){return Me(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let r,i=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=GC(t,s)}const o=Nn(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),xf(t,n,c)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(Nn(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?bb.numeric.call(this,t,e,s):""}};function GC(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var _c={formatters:bb};function KC(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:_c.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const vr=Object.create(null),Fu=Object.create(null);function ga(t,e){if(!e)return t;const s=e.split(".");for(let n=0,r=s.length;n<r;++n){const i=s[n];t=t[i]||(t[i]=Object.create(null))}return t}function xd(t,e,s){return typeof e=="string"?za(ga(t,e),s):za(ga(t,""),e)}class YC{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>gd(r.backgroundColor),this.hoverBorderColor=(n,r)=>gd(r.borderColor),this.hoverColor=(n,r)=>gd(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return xd(this,e,s)}get(e){return ga(this,e)}describe(e,s){return xd(Fu,e,s)}override(e,s){return xd(vr,e,s)}route(e,s,n,r){const i=ga(this,e),o=ga(this,n),l="_"+s;Object.defineProperties(i,{[l]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[l],d=o[r];return ge(c)?Object.assign({},d,c):de(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(s=>s(this))}}var Ge=new YC({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[WC,VC,KC]);function JC(t){return!t||ve(t.size)||ve(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function ql(t,e,s,n,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,s.push(r)),i>n&&(n=i),n}function QC(t,e,s,n){n=n||{};let r=n.data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},i=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let o=0;const l=s.length;let c,d,u,h,f;for(c=0;c<l;c++)if(h=s[c],h!=null&&!Me(h))o=ql(t,r,i,o,h);else if(Me(h))for(d=0,u=h.length;d<u;d++)f=h[d],f!=null&&!Me(f)&&(o=ql(t,r,i,o,f));t.restore();const m=i.length/2;if(m>s.length){for(c=0;c<m;c++)delete r[i[c]];i.splice(0,m)}return o}function Jn(t,e,s){const n=t.currentDevicePixelRatio,r=s!==0?Math.max(s/2,.5):0;return Math.round((e-r)*n)/n+r}function V0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function $u(t,e,s,n){wb(t,e,s,n,null)}function wb(t,e,s,n,r){let i,o,l,c,d,u,h,f;const m=e.pointStyle,p=e.rotation,v=e.radius;let x=(p||0)*EC;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(x),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),m){default:r?t.ellipse(s,n,r/2,v,0,0,Jt):t.arc(s,n,v,0,Jt),t.closePath();break;case"triangle":u=r?r/2:v,t.moveTo(s+Math.sin(x)*u,n-Math.cos(x)*v),x+=I0,t.lineTo(s+Math.sin(x)*u,n-Math.cos(x)*v),x+=I0,t.lineTo(s+Math.sin(x)*u,n-Math.cos(x)*v),t.closePath();break;case"rectRounded":d=v*.516,c=v-d,o=Math.cos(x+Yn)*c,h=Math.cos(x+Yn)*(r?r/2-d:c),l=Math.sin(x+Yn)*c,f=Math.sin(x+Yn)*(r?r/2-d:c),t.arc(s-h,n-l,d,x-Qe,x-Gt),t.arc(s+f,n-o,d,x-Gt,x),t.arc(s+h,n+l,d,x,x+Gt),t.arc(s-f,n+o,d,x+Gt,x+Qe),t.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*v,u=r?r/2:c,t.rect(s-u,n-c,2*u,2*c);break}x+=Yn;case"rectRot":h=Math.cos(x)*(r?r/2:v),o=Math.cos(x)*v,l=Math.sin(x)*v,f=Math.sin(x)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+f,n-o),t.lineTo(s+h,n+l),t.lineTo(s-f,n+o),t.closePath();break;case"crossRot":x+=Yn;case"cross":h=Math.cos(x)*(r?r/2:v),o=Math.cos(x)*v,l=Math.sin(x)*v,f=Math.sin(x)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o);break;case"star":h=Math.cos(x)*(r?r/2:v),o=Math.cos(x)*v,l=Math.sin(x)*v,f=Math.sin(x)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o),x+=Yn,h=Math.cos(x)*(r?r/2:v),o=Math.cos(x)*v,l=Math.sin(x)*v,f=Math.sin(x)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o);break;case"line":o=r?r/2:Math.cos(x)*v,l=Math.sin(x)*v,t.moveTo(s-o,n-l),t.lineTo(s+o,n+l);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(x)*(r?r/2:v),n+Math.sin(x)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Xs(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function kc(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Sc(t){t.restore()}function XC(t,e,s,n,r){if(!e)return t.lineTo(s.x,s.y);if(r==="middle"){const i=(e.x+s.x)/2;t.lineTo(i,e.y),t.lineTo(i,s.y)}else r==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function ZC(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function e4(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ve(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function t4(t,e,s,n,r){if(r.strikethrough||r.underline){const i=t.measureText(n),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=s-i.actualBoundingBoxAscent,d=s+i.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(l,u),t.stroke()}}function s4(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function br(t,e,s,n,r,i={}){const o=Me(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(t.save(),t.font=r.string,e4(t,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&s4(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),ve(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,s,n,i.maxWidth)),t.fillText(d,s,n,i.maxWidth),t4(t,s,n,d,i),n+=Number(r.lineHeight);t.restore()}function Ha(t,e){const{x:s,y:n,w:r,h:i,radius:o}=e;t.arc(s+o.topLeft,n+o.topLeft,o.topLeft,1.5*Qe,Qe,!0),t.lineTo(s,n+i-o.bottomLeft),t.arc(s+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,Qe,Gt,!0),t.lineTo(s+r-o.bottomRight,n+i),t.arc(s+r-o.bottomRight,n+i-o.bottomRight,o.bottomRight,Gt,0,!0),t.lineTo(s+r,n+o.topRight),t.arc(s+r-o.topRight,n+o.topRight,o.topRight,0,-Gt,!0),t.lineTo(s+o.topLeft,n)}const n4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,r4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function i4(t,e){const s=(""+t).match(n4);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const a4=t=>+t||0;function jb(t,e){const s={},n=ge(e),r=n?Object.keys(e):e,i=ge(t)?n?o=>de(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)s[o]=a4(i(o));return s}function Nb(t){return jb(t,{top:"y",right:"x",bottom:"y",left:"x"})}function ur(t){return jb(t,["topLeft","topRight","bottomLeft","bottomRight"])}function jt(t){const e=Nb(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function st(t,e){t=t||{},e=e||Ge.font;let s=de(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=de(t.style,e.style);n&&!(""+n).match(r4)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:de(t.family,e.family),lineHeight:i4(de(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:de(t.weight,e.weight),string:""};return r.string=JC(r),r}function Ro(t,e,s,n){let r=!0,i,o,l;for(i=0,o=t.length;i<o;++i)if(l=t[i],l!==void 0&&(e!==void 0&&typeof l=="function"&&(l=l(e),r=!1),s!==void 0&&Me(l)&&(l=l[s%l.length],r=!1),l!==void 0))return n&&!r&&(n.cacheable=!1),l}function o4(t,e,s){const{min:n,max:r}=t,i=wC(e,(r-n)/2),o=(l,c)=>s&&l===0?0:l+c;return{min:o(n,-Math.abs(i)),max:o(r,i)}}function Vn(t,e){return Object.assign(Object.create(t),e)}function yf(t,e=[""],s,n,r=()=>t[0]){const i=s||t;typeof n>"u"&&(n=Cb("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:r,override:l=>yf([l,...t],e,i,n)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return kb(l,c,()=>p4(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return G0(l).includes(c)},ownKeys(l){return G0(l)},set(l,c,d){const u=l._storage||(l._storage=r());return l[c]=u[c]=d,delete l._keys,!0}})}function gi(t,e,s,n){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:_b(t,n),setContext:i=>gi(t,i,s,n),override:i=>gi(t.override(i),e,s,n)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,l){return kb(i,o,()=>c4(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,l){return t[o]=l,delete i[o],!0}})}function _b(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:s,indexable:n,isScriptable:zn(s)?s:()=>s,isIndexable:zn(n)?n:()=>n}}const l4=(t,e)=>t?t+hf(e):e,vf=(t,e)=>ge(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function kb(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function c4(t,e,s){const{_proxy:n,_context:r,_subProxy:i,_descriptors:o}=t;let l=n[e];return zn(l)&&o.isScriptable(e)&&(l=d4(e,l,t,s)),Me(l)&&l.length&&(l=u4(e,l,t,o.isIndexable)),vf(e,l)&&(l=gi(l,r,i&&i[e],o)),l}function d4(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=s;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,o||n);return l.delete(t),vf(t,c)&&(c=bf(r._scopes,r,t,c)),c}function u4(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=s;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(ge(e[0])){const c=e,d=r._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=bf(d,r,t,u);e.push(gi(h,i,o&&o[t],l))}}return e}function Sb(t,e,s){return zn(t)?t(e,s):t}const h4=(t,e)=>t===!0?e:typeof t=="string"?pi(e,t):void 0;function f4(t,e,s,n,r){for(const i of e){const o=h4(s,i);if(o){t.add(o);const l=Sb(o._fallback,s,r);if(typeof l<"u"&&l!==s&&l!==n)return l}else if(o===!1&&typeof n<"u"&&s!==n)return null}return!1}function bf(t,e,s,n){const r=e._rootScopes,i=Sb(e._fallback,s,n),o=[...t,...r],l=new Set;l.add(n);let c=q0(l,o,s,i||s,n);return c===null||typeof i<"u"&&i!==s&&(c=q0(l,o,i,c,n),c===null)?!1:yf(Array.from(l),[""],r,i,()=>m4(e,s,n))}function q0(t,e,s,n,r){for(;s;)s=f4(t,e,s,n,r);return s}function m4(t,e,s){const n=t._getTarget();e in n||(n[e]={});const r=n[e];return Me(r)&&ge(s)?s:r||{}}function p4(t,e,s,n){let r;for(const i of e)if(r=Cb(l4(i,t),s),typeof r<"u")return vf(t,r)?bf(s,n,t,r):r}function Cb(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function G0(t){let e=t._keys;return e||(e=t._keys=g4(t._scopes)),e}function g4(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}const x4=Number.EPSILON||1e-14,xi=(t,e)=>e<t.length&&!t[e].skip&&t[e],Eb=t=>t==="x"?"y":"x";function y4(t,e,s,n){const r=t.skip?e:t,i=e,o=s.skip?e:s,l=Iu(i,r),c=Iu(o,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=n*d,f=n*u;return{previous:{x:i.x-h*(o.x-r.x),y:i.y-h*(o.y-r.y)},next:{x:i.x+f*(o.x-r.x),y:i.y+f*(o.y-r.y)}}}function v4(t,e,s){const n=t.length;let r,i,o,l,c,d=xi(t,0);for(let u=0;u<n-1;++u)if(c=d,d=xi(t,u+1),!(!c||!d)){if(ma(e[u],0,x4)){s[u]=s[u+1]=0;continue}r=s[u]/e[u],i=s[u+1]/e[u],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),s[u]=r*o*e[u],s[u+1]=i*o*e[u])}}function b4(t,e,s="x"){const n=Eb(s),r=t.length;let i,o,l,c=xi(t,0);for(let d=0;d<r;++d){if(o=l,l=c,c=xi(t,d+1),!l)continue;const u=l[s],h=l[n];o&&(i=(u-o[s])/3,l[`cp1${s}`]=u-i,l[`cp1${n}`]=h-i*e[d]),c&&(i=(c[s]-u)/3,l[`cp2${s}`]=u+i,l[`cp2${n}`]=h+i*e[d])}}function w4(t,e="x"){const s=Eb(e),n=t.length,r=Array(n).fill(0),i=Array(n);let o,l,c,d=xi(t,0);for(o=0;o<n;++o)if(l=c,c=d,d=xi(t,o+1),!!c){if(d){const u=d[e]-c[e];r[o]=u!==0?(d[s]-c[s])/u:0}i[o]=l?d?Os(r[o-1])!==Os(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}v4(t,r,i),b4(t,i,e)}function Io(t,e,s){return Math.max(Math.min(t,s),e)}function j4(t,e){let s,n,r,i,o,l=Xs(t[0],e);for(s=0,n=t.length;s<n;++s)o=i,i=l,l=s<n-1&&Xs(t[s+1],e),i&&(r=t[s],o&&(r.cp1x=Io(r.cp1x,e.left,e.right),r.cp1y=Io(r.cp1y,e.top,e.bottom)),l&&(r.cp2x=Io(r.cp2x,e.left,e.right),r.cp2y=Io(r.cp2y,e.top,e.bottom)))}function N4(t,e,s,n,r){let i,o,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")w4(t,r);else{let d=n?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)l=t[i],c=y4(d,l,t[Math.min(i+1,o-(n?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&j4(t,s)}function wf(){return typeof window<"u"&&typeof document<"u"}function jf(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Gl(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const Cc=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function _4(t,e){return Cc(t).getPropertyValue(e)}const k4=["top","right","bottom","left"];function hr(t,e,s){const n={};s=s?"-"+s:"";for(let r=0;r<4;r++){const i=k4[r];n[i]=parseFloat(t[e+"-"+i+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const S4=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function C4(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:r,offsetY:i}=n;let o=!1,l,c;if(S4(r,i,t.target))l=r,c=i;else{const d=e.getBoundingClientRect();l=n.clientX-d.left,c=n.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function sr(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,r=Cc(s),i=r.boxSizing==="border-box",o=hr(r,"padding"),l=hr(r,"border","width"),{x:c,y:d,box:u}=C4(t,s),h=o.left+(u&&l.left),f=o.top+(u&&l.top);let{width:m,height:p}=e;return i&&(m-=o.width+l.width,p-=o.height+l.height),{x:Math.round((c-h)/m*s.width/n),y:Math.round((d-f)/p*s.height/n)}}function E4(t,e,s){let n,r;if(e===void 0||s===void 0){const i=t&&jf(t);if(!i)e=t.clientWidth,s=t.clientHeight;else{const o=i.getBoundingClientRect(),l=Cc(i),c=hr(l,"border","width"),d=hr(l,"padding");e=o.width-d.width-c.width,s=o.height-d.height-c.height,n=Gl(l.maxWidth,i,"clientWidth"),r=Gl(l.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:n||Vl,maxHeight:r||Vl}}const Fo=t=>Math.round(t*10)/10;function P4(t,e,s,n){const r=Cc(t),i=hr(r,"margin"),o=Gl(r.maxWidth,t,"clientWidth")||Vl,l=Gl(r.maxHeight,t,"clientHeight")||Vl,c=E4(t,e,s);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const f=hr(r,"border","width"),m=hr(r,"padding");d-=m.width+f.width,u-=m.height+f.height}return d=Math.max(0,d-i.width),u=Math.max(0,n?d/n:u-i.height),d=Fo(Math.min(d,o,c.maxWidth)),u=Fo(Math.min(u,l,c.maxHeight)),d&&!u&&(u=Fo(d/2)),(e!==void 0||s!==void 0)&&n&&c.height&&u>c.height&&(u=c.height,d=Fo(Math.floor(u*n))),{width:d,height:u}}function K0(t,e,s){const n=e||1,r=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=n,o.height=r,o.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const A4=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};wf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function Y0(t,e){const s=_4(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function nr(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function L4(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function T4(t,e,s,n){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=nr(t,r,s),l=nr(r,i,s),c=nr(i,e,s),d=nr(o,l,s),u=nr(l,c,s);return nr(d,u,s)}const M4=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},D4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function ii(t,e,s){return t?M4(e,s):D4()}function Pb(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Ab(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Lb(t){return t==="angle"?{between:pb,compare:MC,normalize:Vt}:{between:kn,compare:(e,s)=>e-s,normalize:e=>e}}function J0({start:t,end:e,count:s,loop:n,style:r}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:r}}function O4(t,e,s){const{property:n,start:r,end:i}=s,{between:o,normalize:l}=Lb(n),c=e.length;let{start:d,end:u,loop:h}=t,f,m;if(h){for(d+=c,u+=c,f=0,m=c;f<m&&o(l(e[d%c][n]),r,i);++f)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:t.style}}function Tb(t,e,s){if(!s)return[t];const{property:n,start:r,end:i}=s,o=e.length,{compare:l,between:c,normalize:d}=Lb(n),{start:u,end:h,loop:f,style:m}=O4(t,e,s),p=[];let v=!1,x=null,g,y,b;const k=()=>c(r,b,g)&&l(r,b)!==0,j=()=>l(i,g)===0||c(i,b,g),S=()=>v||k(),E=()=>!v||j();for(let _=u,C=u;_<=h;++_)y=e[_%o],!y.skip&&(g=d(y[n]),g!==b&&(v=c(g,r,i),x===null&&S()&&(x=l(g,r)===0?_:C),x!==null&&E()&&(p.push(J0({start:x,end:_,loop:f,count:o,style:m})),x=null),C=_,b=g));return x!==null&&p.push(J0({start:x,end:h,loop:f,count:o,style:m})),p}function Mb(t,e){const s=[],n=t.segments;for(let r=0;r<n.length;r++){const i=Tb(n[r],t.points,e);i.length&&s.push(...i)}return s}function R4(t,e,s,n){let r=0,i=e-1;if(s&&!n)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,s&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function I4(t,e,s,n){const r=t.length,i=[];let o=e,l=t[e],c;for(c=e+1;c<=s;++c){const d=t[c%r];d.skip||d.stop?l.skip||(n=!1,i.push({start:e%r,end:(c-1)%r,loop:n}),e=o=d.stop?c:null):(o=c,l.skip&&(e=c)),l=d}return o!==null&&i.push({start:e%r,end:o%r,loop:n}),i}function F4(t,e){const s=t.points,n=t.options.spanGaps,r=s.length;if(!r)return[];const i=!!t._loop,{start:o,end:l}=R4(s,r,i,n);if(n===!0)return Q0(t,[{start:o,end:l,loop:i}],s,e);const c=l<o?l+r:l,d=!!t._fullLoop&&o===0&&l===r-1;return Q0(t,I4(s,o,c,d),s,e)}function Q0(t,e,s,n){return!n||!n.setContext||!s?e:$4(t,e,s,n)}function $4(t,e,s,n){const r=t._chart.getContext(),i=X0(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=s.length,d=[];let u=i,h=e[0].start,f=h;function m(p,v,x,g){const y=l?-1:1;if(p!==v){for(p+=c;s[p%c].skip;)p-=y;for(;s[v%c].skip;)v+=y;p%c!==v%c&&(d.push({start:p%c,end:v%c,loop:x,style:g}),u=g,h=v%c)}}for(const p of e){h=l?h:p.start;let v=s[h%c],x;for(f=h+1;f<=p.end;f++){const g=s[f%c];x=X0(n.setContext(Vn(r,{type:"segment",p0:v,p1:g,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),z4(x,u)&&m(h,f-1,p.loop,u),v=g,u=x}h<f-1&&m(h,f-1,p.loop,u)}return d}function X0(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function z4(t,e){if(!e)return!1;const s=[],n=function(r,i){return gf(i)?(s.includes(i)||s.push(i),s.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function $o(t,e,s){return t.options.clip?t[s]:e[s]}function U4(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:$o(s,e,"left"),right:$o(s,e,"right"),top:$o(n,e,"top"),bottom:$o(n,e,"bottom")}:e}function Db(t,e){const s=e._clip;if(s.disabled)return!1;const n=U4(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class B4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,r){const i=s.listeners[r],o=s.duration;i.forEach(l=>l({chart:e,initial:s.initial,numSteps:o,currentStep:Math.min(n-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=yb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Hs=new B4;const Z0="transparent",H4={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=H0(t||Z0),r=n.valid&&H0(e||Z0);return r&&r.valid?r.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class W4{constructor(e,s,n,r){const i=s[n];r=Ro([e.to,r,i,e.from]);const o=Ro([e.from,i,r]);this._active=!0,this._fn=e.fn||H4[e.type||typeof o],this._easing=pa[e.easing]||pa.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=Ro([e.to,s,r,e.from]),this._from=Ro([e.from,r,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||s<n),!this._active){this._target[r]=l,this._notify(!0);return}if(s<0){this._target[r]=i;return}c=s/n%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][s]()}}class Ob{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!ge(e))return;const s=Object.keys(Ge.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!ge(i))return;const o={};for(const l of s)o[l]=i[l];(Me(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!n.has(l))&&n.set(l,o)})})}_animateOptions(e,s){const n=s.options,r=q4(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&V4(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,s){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(s),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,s));continue}const u=s[d];let h=i[d];const f=n.get(d);if(h)if(f&&h.active()){h.update(f,u,l);continue}else h.cancel();if(!f||!f.duration){e[d]=u;continue}i[d]=h=new W4(f,e,d,u),r.push(h)}return r}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return Hs.add(this._chart,n),!0}}function V4(t,e){const s=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const i=t[n[r]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function q4(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function eg(t,e){const s=t&&t.options||{},n=s.reverse,r=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:n?i:r,end:n?r:i}}function G4(t,e,s){if(s===!1)return!1;const n=eg(t,s),r=eg(e,s);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function K4(t){let e,s,n,r;return ge(t)?(e=t.top,s=t.right,n=t.bottom,r=t.left):e=s=n=r=t,{top:e,right:s,bottom:n,left:r,disabled:t===!1}}function Rb(t,e){const s=[],n=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=n.length;r<i;++r)s.push(n[r].index);return s}function tg(t,e,s,n={}){const r=t.keys,i=n.mode==="single";let o,l,c,d;if(e===null)return;let u=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===s){if(u=!0,n.all)continue;break}d=t.values[c],qe(d)&&(i||e===0||Os(e)===Os(d))&&(e+=d)}return!u&&!n.all?0:e}function Y4(t,e){const{iScale:s,vScale:n}=e,r=s.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[r]:u,[i]:t[u]};return l}function yd(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function J4(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function Q4(t){const{min:e,max:s,minDefined:n,maxDefined:r}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?s:Number.POSITIVE_INFINITY}}function X4(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function sg(t,e,s,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const i=t[r.index];if(s&&i>0||!s&&i<0)return r.index}return null}function ng(t,e){const{chart:s,_cachedMeta:n}=t,r=s._stacks||(s._stacks={}),{iScale:i,vScale:o,index:l}=n,c=i.axis,d=o.axis,u=J4(i,o,n),h=e.length;let f;for(let m=0;m<h;++m){const p=e[m],{[c]:v,[d]:x}=p,g=p._stacks||(p._stacks={});f=g[d]=X4(r,u,v),f[l]=x,f._top=sg(f,o,!0,n.type),f._bottom=sg(f,o,!1,n.type);const y=f._visualValues||(f._visualValues={});y[l]=x}}function vd(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function Z4(t,e){return Vn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function eE(t,e,s){return Vn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function zi(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[n]===void 0||i[n][s]===void 0)return;delete i[n][s],i[n]._visualValues!==void 0&&i[n]._visualValues[s]!==void 0&&delete i[n]._visualValues[s]}}}const bd=t=>t==="reset"||t==="none",rg=(t,e)=>e?t:Object.assign({},t),tE=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:Rb(s,!0),values:null};class ai{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=yd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&zi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),r=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,i=s.xAxisID=de(n.xAxisID,vd(e,"x")),o=s.yAxisID=de(n.yAxisID,vd(e,"y")),l=s.rAxisID=de(n.rAxisID,vd(e,"r")),c=s.indexAxis,d=s.iAxisID=r(c,i,o,l),u=s.vAxisID=r(c,o,i,l);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&z0(this._data,this),e._stacked&&zi(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(ge(s)){const r=this._cachedMeta;this._data=Y4(s,r)}else if(n!==s){if(n){z0(n,this);const r=this._cachedMeta;zi(r),r._parsed=[]}s&&Object.isExtensible(s)&&IC(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=s._stacked;s._stacked=yd(s.vScale,s),s.stack!==n.stack&&(r=!0,zi(s),s.stack=n.stack),this._resyncElements(e),(r||i!==s._stacked)&&(ng(this,s._parsed),s._stacked=yd(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,l=i.axis;let c=e===0&&s===r.length?!0:n._sorted,d=e>0&&n._parsed[e-1],u,h,f;if(this._parsing===!1)n._parsed=r,n._sorted=!0,f=r;else{Me(r[e])?f=this.parseArrayData(n,r,e,s):ge(r[e])?f=this.parseObjectData(n,r,e,s):f=this.parsePrimitiveData(n,r,e,s);const m=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<s;++u)n._parsed[u+e]=h=f[u],c&&(m()&&(c=!1),d=h);n._sorted=c}o&&ng(this,f)}parsePrimitiveData(e,s,n,r){const{iScale:i,vScale:o}=e,l=i.axis,c=o.axis,d=i.getLabels(),u=i===o,h=new Array(r);let f,m,p;for(f=0,m=r;f<m;++f)p=f+n,h[f]={[l]:u||i.parse(d[p],p),[c]:o.parse(s[p],p)};return h}parseArrayData(e,s,n,r){const{xScale:i,yScale:o}=e,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=s[u],l[c]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return l}parseObjectData(e,s,n,r){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,h,f,m;for(u=0,h=r;u<h;++u)f=u+n,m=s[f],d[u]={x:i.parse(pi(m,l),f),y:o.parse(pi(m,c),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const r=this.chart,i=this._cachedMeta,o=s[e.axis],l={keys:Rb(r,!0),values:s._stacks[e.axis]._visualValues};return tg(l,o,i.index,{mode:n})}updateRangeFromParsed(e,s,n,r){const i=n[s.axis];let o=i===null?NaN:i;const l=r&&n._stacks[s.axis];r&&l&&(r.values=l,o=tg(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,s){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,o=r.length,l=this._getOtherScale(e),c=tE(s,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=Q4(l);let f,m;function p(){m=r[f];const v=m[l.axis];return!qe(m[e.axis])||u>v||h<v}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(d,e,m,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(d,e,m,c);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=s.length;r<i;++r)o=s[r][e.axis],qe(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,r=s.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=K4(de(this.options.clip,G4(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,r=n.data||[],i=s.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,i,l,c),u=l;u<l+c;++u){const h=r[u];h.hidden||(h.active&&d?o.push(h):h.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=eE(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=Z4(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const r=s==="active",i=this._cachedDataOpts,o=e+"-"+s,l=i[o],c=this.enableOptionSharing&&Ua(n);if(l)return rg(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),m=Object.keys(Ge.elements[e]),p=()=>this.getContext(n,r,s),v=d.resolveNamedOptions(f,m,p,h);return v.$shared&&(v.$shared=c,i[o]=Object.freeze(rg(v,c))),v}_resolveAnimations(e,s,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${s}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,s),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(e,n,s))}const d=new Ob(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||bd(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(s,i)||i!==r;return this.updateSharedOptions(i,s,n),{sharedOptions:i,includeOptions:o}}updateElement(e,s,n,r){bd(r)?Object.assign(e,n):this._resolveAnimations(s,r).update(e,n)}updateSharedOptions(e,s,n){e&&!bd(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,r){e.active=r;const i=this.getStyle(s,r);this._resolveAnimations(s,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=n.length,i=s.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,s,n=!0){const r=this._cachedMeta,i=r.data,o=e+s;let l;const c=d=>{for(d.length+=s,l=d.length-1;l>=o;l--)d[l]=d[l-s]};for(c(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,s),n&&this.updateElements(i,e,s,"reset")}updateElements(e,s,n,r){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,s);n._stacked&&zi(n,r)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,r]=e;this[s](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}se(ai,"defaults",{}),se(ai,"datasetElementType",null),se(ai,"dataElementType",null);function sE(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let r=0,i=s.length;r<i;r++)n=n.concat(s[r].controller.getAllParsedValues(t));t._cache.$bar=xb(n.sort((r,i)=>r-i))}return t._cache.$bar}function nE(t){const e=t.iScale,s=sE(e,t.type);let n=e._length,r,i,o,l;const c=()=>{o===32767||o===-32768||(Ua(l)&&(n=Math.min(n,Math.abs(o-l)||n)),l=o)};for(r=0,i=s.length;r<i;++r)o=e.getPixelForValue(s[r]),c();for(l=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),c();return n}function rE(t,e,s,n){const r=s.barThickness;let i,o;return ve(r)?(i=e.min*s.categoryPercentage,o=s.barPercentage):(i=r*n,o=1),{chunk:i/n,ratio:o,start:e.pixels[t]-i/2}}function iE(t,e,s,n){const r=e.pixels,i=r[t];let o=t>0?r[t-1]:null,l=t<r.length-1?r[t+1]:null;const c=s.categoryPercentage;o===null&&(o=i-(l===null?e.end-e.start:l-i)),l===null&&(l=i+i-o);const d=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/n,ratio:s.barPercentage,start:d}}function aE(t,e,s,n){const r=s.parse(t[0],n),i=s.parse(t[1],n),o=Math.min(r,i),l=Math.max(r,i);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),e[s.axis]=d,e._custom={barStart:c,barEnd:d,start:r,end:i,min:o,max:l}}function Ib(t,e,s,n){return Me(t)?aE(t,e,s,n):e[s.axis]=s.parse(t,n),e}function ig(t,e,s,n){const r=t.iScale,i=t.vScale,o=r.getLabels(),l=r===i,c=[];let d,u,h,f;for(d=s,u=s+n;d<u;++d)f=e[d],h={},h[r.axis]=l||r.parse(o[d],d),c.push(Ib(f,h,i,d));return c}function wd(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function oE(t,e,s){return t!==0?Os(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function lE(t){let e,s,n,r,i;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(r="end",i="start"):(r="start",i="end"),{start:s,end:n,reverse:e,top:r,bottom:i}}function cE(t,e,s,n){let r=e.borderSkipped;const i={};if(!r){t.borderSkipped=i;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=lE(t);r==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?r=d:(s._bottom||0)===n?r=u:(i[ag(u,o,l,c)]=!0,r=d)),i[ag(r,o,l,c)]=!0,t.borderSkipped=i}function ag(t,e,s,n){return n?(t=dE(t,e,s),t=og(t,s,e)):t=og(t,e,s),t}function dE(t,e,s){return t===e?s:t===s?e:t}function og(t,e,s){return t==="start"?e:t==="end"?s:t}function uE(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class cl extends ai{parsePrimitiveData(e,s,n,r){return ig(e,s,n,r)}parseArrayData(e,s,n,r){return ig(e,s,n,r)}parseObjectData(e,s,n,r){const{iScale:i,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,u=o.axis==="x"?l:c,h=[];let f,m,p,v;for(f=n,m=n+r;f<m;++f)v=s[f],p={},p[i.axis]=i.parse(pi(v,d),f),h.push(Ib(pi(v,u),p,o,f));return h}updateRangeFromParsed(e,s,n,r){super.updateRangeFromParsed(e,s,n,r);const i=n._custom;i&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:r}=s,i=this.getParsed(e),o=i._custom,l=wd(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(s,r);for(let m=s;m<s+n;m++){const p=this.getParsed(m),v=i||ve(p[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),x=this._calculateBarIndexPixels(m,u),g=(p._stacks||{})[l.axis],y={horizontal:d,base:v.base,enableBorderRadius:!g||wd(p._custom)||o===g._top||o===g._bottom,x:d?v.head:x.center,y:d?x.center:v.head,height:d?x.size:Math.abs(v.size),width:d?Math.abs(v.size):x.size};f&&(y.options=h||this.resolveDataElementOptions(m,e[m].active?"active":r));const b=y.options||e[m].options;cE(y,b,g,o),uE(y,b,u.ratio),this.updateElement(e[m],m,y,r)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=n.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(s),c=l&&l[n.axis],d=u=>{const h=u._parsed.find(m=>m[n.axis]===c),f=h&&h[u.vScale.axis];if(ve(f)||isNaN(f))return!0};for(const u of r)if(!(s!==void 0&&d(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[de(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,n){const r=this._getStacks(e,n),i=s!==void 0?r.indexOf(s):-1;return i===-1?r.length-1:i}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,r=[];let i,o;for(i=0,o=s.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const l=e.barThickness;return{min:l||nE(s),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:r},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(e),d=c._custom,u=wd(d);let h=c[s.axis],f=0,m=n?this.applyStack(s,c,n):h,p,v;m!==h&&(f=m-h,m=h),u&&(h=d.barStart,m=d.barEnd-d.barStart,h!==0&&Os(h)!==Os(d.barEnd)&&(f=0),f+=h);const x=!ve(i)&&!u?i:f;let g=s.getPixelForValue(x);if(this.chart.getDataVisibility(e)?p=s.getPixelForValue(f+m):p=g,v=p-g,Math.abs(v)<o){v=oE(v,s,l)*o,h===l&&(g-=v/2);const y=s.getPixelForDecimal(0),b=s.getPixelForDecimal(1),k=Math.min(y,b),j=Math.max(y,b);g=Math.max(Math.min(g,j),k),p=g+v,n&&!u&&(c._stacks[s.axis]._visualValues[r]=s.getValueForPixel(p)-s.getValueForPixel(g))}if(g===s.getPixelForValue(l)){const y=Os(v)*s.getLineWidthForValue(l)/2;g+=y,v-=y}return{size:v,base:g,head:p,center:p+v/2}}_calculateBarIndexPixels(e,s){const n=s.scale,r=this.options,i=r.skipNull,o=de(r.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(s.grouped){const u=i?this._getStackCount(e):s.stackCount,h=r.barThickness==="flex"?iE(e,s,r,u*d):rE(e,s,r,u*d),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(de(f,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+m;l=h.start+h.chunk*p+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=n.getPixelForValue(this.getParsed(e)[n.axis],e),c=Math.min(o,s.min*s.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)this.getParsed(i)[s.axis]!==null&&!n[i].hidden&&n[i].draw(this._ctx)}}se(cl,"id","bar"),se(cl,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),se(cl,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class dl extends ai{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=s,o=this.chart._animationsDisabled;let{start:l,count:c}=zC(s,r,o);this._drawStart=l,this._drawCount=c,UC(s)&&(l=0,c=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:d},e),this.updateElements(r,l,c,e)}updateElements(e,s,n,r){const i=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(s,r),f=o.axis,m=l.axis,{spanGaps:p,segment:v}=this.options,x=Ba(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||i||r==="none",y=s+n,b=e.length;let k=s>0&&this.getParsed(s-1);for(let j=0;j<b;++j){const S=e[j],E=g?S:{};if(j<s||j>=y){E.skip=!0;continue}const _=this.getParsed(j),C=ve(_[m]),N=E[f]=o.getPixelForValue(_[f],j),L=E[m]=i||C?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,_,c):_[m],j);E.skip=isNaN(N)||isNaN(L)||C,E.stop=j>0&&Math.abs(_[f]-k[f])>x,v&&(E.parsed=_,E.raw=d.data[j]),h&&(E.options=u||this.resolveDataElementOptions(j,S.active?"active":r)),g||this.updateElement(S,j,E,r),k=_}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}se(dl,"id","line"),se(dl,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),se(dl,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Qn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Nf{constructor(e){se(this,"options");this.options=e||{}}static override(e){Object.assign(Nf.prototype,e)}init(){}formats(){return Qn()}parse(){return Qn()}format(){return Qn()}add(){return Qn()}diff(){return Qn()}startOf(){return Qn()}endOf(){return Qn()}}var hE={_date:Nf};function fE(t,e,s,n){const{controller:r,data:i,_sorted:o}=t,l=r._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const d=l._reversePixels?OC:lr;if(n){if(r._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=d(i,e,s-h),m=d(i,e,s+h);return{lo:f.lo,hi:m.hi}}}}else{const u=d(i,e,s);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,u.lo+1).reverse().findIndex(v=>!ve(v[h.axis]));u.lo-=Math.max(0,m);const p=f.slice(u.hi).findIndex(v=>!ve(v[h.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:i.length-1}}function so(t,e,s,n,r){const i=t.getSortedVisibleDatasetMetas(),o=s[e];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:h,hi:f}=fE(i[l],e,o,r);for(let m=h;m<=f;++m){const p=u[m];p.skip||n(p,d,m)}}}function mE(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,r){const i=e?Math.abs(n.x-r.x):0,o=s?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function jd(t,e,s,n,r){const i=[];return!r&&!t.isPointInArea(e)||so(t,s,e,function(l,c,d){!r&&!Xs(l,t.chartArea,0)||l.inRange(e.x,e.y,n)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function pE(t,e,s,n){let r=[];function i(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],n),{angle:h}=TC(o,{x:e.x,y:e.y});pb(h,d,u)&&r.push({element:o,datasetIndex:l,index:c})}return so(t,s,e,i),r}function gE(t,e,s,n,r,i){let o=[];const l=mE(s);let c=Number.POSITIVE_INFINITY;function d(u,h,f){const m=u.inRange(e.x,e.y,r);if(n&&!m)return;const p=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(p))&&!m)return;const x=l(e,p);x<c?(o=[{element:u,datasetIndex:h,index:f}],c=x):x===c&&o.push({element:u,datasetIndex:h,index:f})}return so(t,s,e,d),o}function Nd(t,e,s,n,r,i){return!i&&!t.isPointInArea(e)?[]:s==="r"&&!n?pE(t,e,s,r):gE(t,e,s,n,r,i)}function lg(t,e,s,n,r){const i=[],o=s==="x"?"inXRange":"inYRange";let l=!1;return so(t,s,e,(c,d,u)=>{c[o]&&c[o](e[s],r)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,r))}),n&&!l?[]:i}var xE={evaluateInteractionItems:so,modes:{index(t,e,s,n){const r=sr(e,t),i=s.axis||"x",o=s.includeInvisible||!1,l=s.intersect?jd(t,r,i,n,o):Nd(t,r,i,!1,n,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,s,n){const r=sr(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;let l=s.intersect?jd(t,r,i,n,o):Nd(t,r,i,!1,n,o);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(t,e,s,n){const r=sr(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return jd(t,r,i,n,o)},nearest(t,e,s,n){const r=sr(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return Nd(t,r,i,s.intersect,n,o)},x(t,e,s,n){const r=sr(e,t);return lg(t,r,"x",s.intersect,n)},y(t,e,s,n){const r=sr(e,t);return lg(t,r,"y",s.intersect,n)}}};const Fb=["left","top","right","bottom"];function Ui(t,e){return t.filter(s=>s.pos===e)}function cg(t,e){return t.filter(s=>Fb.indexOf(s.pos)===-1&&s.box.axis===e)}function Bi(t,e){return t.sort((s,n)=>{const r=e?n:s,i=e?s:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function yE(t){const e=[];let s,n,r,i,o,l;for(s=0,n=(t||[]).length;s<n;++s)r=t[s],{position:i,options:{stack:o,stackWeight:l=1}}=r,e.push({index:s,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return e}function vE(t){const e={};for(const s of t){const{stack:n,pos:r,stackWeight:i}=s;if(!n||!Fb.includes(r))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function bE(t,e){const s=vE(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let i,o,l;for(i=0,o=t.length;i<o;++i){l=t[i];const{fullSize:c}=l.box,d=s[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*n:c&&e.availableWidth,l.height=r):(l.width=n,l.height=u?u*r:c&&e.availableHeight)}return s}function wE(t){const e=yE(t),s=Bi(e.filter(d=>d.box.fullSize),!0),n=Bi(Ui(e,"left"),!0),r=Bi(Ui(e,"right")),i=Bi(Ui(e,"top"),!0),o=Bi(Ui(e,"bottom")),l=cg(e,"x"),c=cg(e,"y");return{fullSize:s,leftAndTop:n.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Ui(e,"chartArea"),vertical:n.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function dg(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function $b(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function jE(t,e,s,n){const{pos:r,box:i}=s,o=t.maxPadding;if(!ge(r)){s.size&&(t[r]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?i.height:i.width),s.size=h.size/h.count,t[r]+=s.size}i.getPadding&&$b(o,i.getPadding());const l=Math.max(0,e.outerWidth-dg(o,t,"left","right")),c=Math.max(0,e.outerHeight-dg(o,t,"top","bottom")),d=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,s.horizontal?{same:d,other:u}:{same:u,other:d}}function NE(t){const e=t.maxPadding;function s(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function _E(t,e){const s=e.maxPadding;function n(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],s[o])}),i}return n(t?["left","right"]:["top","bottom"])}function Qi(t,e,s,n){const r=[];let i,o,l,c,d,u;for(i=0,o=t.length,d=0;i<o;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,_E(l.horizontal,e));const{same:h,other:f}=jE(e,s,l,n);d|=h&&r.length,u=u||f,c.fullSize||r.push(l)}return d&&Qi(r,e,s,n)||u}function zo(t,e,s,n,r){t.top=s,t.left=e,t.right=e+n,t.bottom=s+r,t.width=n,t.height=r}function ug(t,e,s,n){const r=s.padding;let{x:i,y:o}=e;for(const l of t){const c=l.box,d=n[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,f=d.size||c.height;Ua(d.start)&&(o=d.start),c.fullSize?zo(c,r.left,o,s.outerWidth-r.right-r.left,f):zo(c,e.left+d.placed,o,h,f),d.start=o,d.placed+=h,o=c.bottom}else{const h=e.h*u,f=d.size||c.width;Ua(d.start)&&(i=d.start),c.fullSize?zo(c,i,r.top,f,s.outerHeight-r.bottom-r.top):zo(c,i,e.top+d.placed,f,h),d.start=i,d.placed+=h,i=c.right}}e.x=i,e.y=o}var as={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const r=jt(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(s-r.height,0),l=wE(t.boxes),c=l.vertical,d=l.horizontal;Ne(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=c.reduce((v,x)=>x.box.options&&x.box.options.display===!1?v:v+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);$b(f,jt(n));const m=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),p=bE(c.concat(d),h);Qi(l.fullSize,m,h,p),Qi(c,m,h,p),Qi(d,m,h,p)&&Qi(c,m,h,p),NE(m),ug(l.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,ug(l.rightAndBottom,m,h,p),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Ne(l.chartArea,v=>{const x=v.box;Object.assign(x,t.chartArea),x.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class zb{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,r){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,r?Math.floor(s/r):n)}}isAttached(e){return!0}updateConfig(e){}}class kE extends zb{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ul="$chartjs",SE={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},hg=t=>t===null||t==="";function CE(t,e){const s=t.style,n=t.getAttribute("height"),r=t.getAttribute("width");if(t[ul]={initial:{height:n,width:r,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",hg(r)){const i=Y0(t,"width");i!==void 0&&(t.width=i)}if(hg(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=Y0(t,"height");i!==void 0&&(t.height=i)}return t}const Ub=A4?{passive:!0}:!1;function EE(t,e,s){t&&t.addEventListener(e,s,Ub)}function PE(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,Ub)}function AE(t,e){const s=SE[t.type]||t.type,{x:n,y:r}=sr(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:r!==void 0?r:null}}function Kl(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function LE(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Kl(l.addedNodes,n),o=o&&!Kl(l.removedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}function TE(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||Kl(l.removedNodes,n),o=o&&!Kl(l.addedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}const Wa=new Map;let fg=0;function Bb(){const t=window.devicePixelRatio;t!==fg&&(fg=t,Wa.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function ME(t,e){Wa.size||window.addEventListener("resize",Bb),Wa.set(t,e)}function DE(t){Wa.delete(t),Wa.size||window.removeEventListener("resize",Bb)}function OE(t,e,s){const n=t.canvas,r=n&&jf(n);if(!r)return;const i=vb((l,c)=>{const d=r.clientWidth;s(l,c),d<r.clientWidth&&s()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return o.observe(r),ME(t,i),o}function _d(t,e,s){s&&s.disconnect(),e==="resize"&&DE(t)}function RE(t,e,s){const n=t.canvas,r=vb(i=>{t.ctx!==null&&s(AE(i,t))},t);return EE(n,e,r),r}class IE extends zb{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(CE(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[ul])return!1;const n=s[ul].initial;["height","width"].forEach(i=>{const o=n[i];ve(o)?s.removeAttribute(i):s.setAttribute(i,o)});const r=n.style||{};return Object.keys(r).forEach(i=>{s.style[i]=r[i]}),s.width=s.width,delete s[ul],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const r=e.$proxies||(e.$proxies={}),o={attach:LE,detach:TE,resize:OE}[s]||RE;r[s]=o(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),r=n[s];if(!r)return;({attach:_d,detach:_d,resize:_d}[s]||PE)(e,s,r),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,r){return P4(e,s,n,r)}isAttached(e){const s=e&&jf(e);return!!(s&&s.isConnected)}}function FE(t){return!wf()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?kE:IE}class Is{constructor(){se(this,"x");se(this,"y");se(this,"active",!1);se(this,"options");se(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return Ba(this.x)&&Ba(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const r={};return e.forEach(i=>{r[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),r}}se(Is,"defaults",{}),se(Is,"defaultRoutes");function $E(t,e){const s=t.options.ticks,n=zE(t),r=Math.min(s.maxTicksLimit||n,n),i=s.major.enabled?BE(e):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>r)return HE(e,d,i,o/r),d;const u=UE(i,e,r);if(o>0){let h,f;const m=o>1?Math.round((c-l)/(o-1)):null;for(Uo(e,d,u,ve(m)?0:l-m,l),h=0,f=o-1;h<f;h++)Uo(e,d,u,i[h],i[h+1]);return Uo(e,d,u,c,ve(m)?e.length:c+m),d}return Uo(e,d,u),d}function zE(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),r=t._maxLength/s;return Math.floor(Math.min(n,r))}function UE(t,e,s){const n=WE(t),r=e.length/s;if(!n)return Math.max(r,1);const i=PC(n);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function BE(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function HE(t,e,s,n){let r=0,i=s[0],o;for(n=Math.ceil(n),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=s[r*n])}function Uo(t,e,s,n,r){const i=de(n,0),o=Math.min(de(r,t.length),t.length);let l=0,c,d,u;for(s=Math.ceil(s),r&&(c=r-n,s=c/Math.floor(c/s)),u=i;u<0;)l++,u=Math.round(i+l*s);for(d=Math.max(i,0);d<o;d++)d===u&&(e.push(t[d]),l++,u=Math.round(i+l*s))}function WE(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const VE=t=>t==="left"?"right":t==="right"?"left":t,mg=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,pg=(t,e)=>Math.min(e||t,t);function gg(t,e){const s=[],n=t.length/e,r=t.length;let i=0;for(;i<r;i+=n)s.push(t[Math.floor(i)]);return s}function qE(t,e,s){const n=t.ticks.length,r=Math.min(e,n-1),i=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(r),d;if(!(s&&(n===1?d=Math.max(c-i,o-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(r-1))/2,c+=r<e?d:-d,c<i-l||c>o+l)))return c}function GE(t,e){Ne(t,s=>{const n=s.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete s.data[n[i]];n.splice(0,r)}})}function Hi(t){return t.drawTicks?t.tickLength:0}function xg(t,e){if(!t.display)return 0;const s=st(t.font,e),n=jt(t.padding);return(Me(t.text)?t.text.length:1)*s.lineHeight+n.height}function KE(t,e){return Vn(t,{scale:e,type:"scale"})}function YE(t,e,s){return Vn(t,{tick:s,index:e,type:"tick"})}function JE(t,e,s){let n=pf(t);return(s&&e!=="right"||!s&&e==="right")&&(n=VE(n)),n}function QE(t,e,s,n){const{top:r,left:i,bottom:o,right:l,chart:c}=t,{chartArea:d,scales:u}=c;let h=0,f,m,p;const v=o-r,x=l-i;if(t.isHorizontal()){if(m=vt(n,i,l),ge(s)){const g=Object.keys(s)[0],y=s[g];p=u[g].getPixelForValue(y)+v-e}else s==="center"?p=(d.bottom+d.top)/2+v-e:p=mg(t,s,e);f=l-i}else{if(ge(s)){const g=Object.keys(s)[0],y=s[g];m=u[g].getPixelForValue(y)-x+e}else s==="center"?m=(d.left+d.right)/2-x+e:m=mg(t,s,e);p=vt(n,o,r),h=s==="left"?-Gt:Gt}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class kr extends Is{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:r}=this;return e=Ht(e,Number.POSITIVE_INFINITY),s=Ht(s,Number.NEGATIVE_INFINITY),n=Ht(n,Number.POSITIVE_INFINITY),r=Ht(r,Number.NEGATIVE_INFINITY),{min:Ht(e,n),max:Ht(s,r),minDefined:qe(e),maxDefined:qe(s)}}getMinMax(e){let{min:s,max:n,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:s,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,e),r||(s=Math.min(s,o.min)),i||(n=Math.max(n,o.max));return s=i&&s>n?n:s,n=r&&s>n?s:n,{min:Ht(s,Ht(n,s)),max:Ht(n,Ht(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Ee(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=o4(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?gg(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=$E(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Ee(this.options.afterUpdate,[this])}beforeSetDimensions(){Ee(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Ee(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Ee(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Ee(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=Ee(s.callback,[i.value,n,e],this)}afterTickToLabelConversion(){Ee(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Ee(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=pg(this.ticks.length,e.ticks.maxTicksLimit),r=s.minRotation||0,i=s.maxRotation;let o=r,l,c,d;if(!this._isVisible()||!s.display||r>=i||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,m=Kt(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/n:m/(n-1),h+6>l&&(l=m/(n-(e.offset?.5:1)),c=this.maxHeight-Hi(e.grid)-s.padding-xg(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),o=ff(Math.min(Math.asin(Kt((u.highest.height+6)/l,-1,1)),Math.asin(Kt(c/d,-1,1))-Math.asin(Kt(f/d,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){Ee(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Ee(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=xg(r,s.options.font);if(l?(e.width=this.maxWidth,e.height=Hi(i)+c):(e.height=this.maxHeight,e.width=Hi(i)+c),n.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),m=n.padding*2,p=_n(this.labelRotation),v=Math.cos(p),x=Math.sin(p);if(l){const g=n.mirror?0:x*h.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+g+m)}else{const g=n.mirror?0:v*h.width+x*f.height;e.width=Math.min(this.maxWidth,e.width+g+m)}this._calculatePadding(d,u,x,v)}}this._handleMargins(),l?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?d?(f=r*e.width,m=n*s.height):(f=n*e.height,m=r*s.width):i==="start"?m=s.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,m=s.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+o)*this.width/(this.width-h),0)}else{let u=s.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=s.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Ee(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)ve(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=gg(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(s/pg(s,n));let d=0,u=0,h,f,m,p,v,x,g,y,b,k,j;for(h=0;h<s;h+=c){if(p=e[h].label,v=this._resolveTickFontOptions(h),r.font=x=v.string,g=i[x]=i[x]||{data:{},gc:[]},y=v.lineHeight,b=k=0,!ve(p)&&!Me(p))b=ql(r,g.data,g.gc,b,p),k=y;else if(Me(p))for(f=0,m=p.length;f<m;++f)j=p[f],!ve(j)&&!Me(j)&&(b=ql(r,g.data,g.gc,b,j),k+=y);o.push(b),l.push(k),d=Math.max(b,d),u=Math.max(k,u)}GE(i,s);const S=o.indexOf(d),E=l.indexOf(u),_=C=>({width:o[C]||0,height:l[C]||0});return{first:_(0),last:_(s-1),widest:_(S),highest:_(E),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return DC(this._alignToPixels?Jn(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=YE(this.getContext(),e,n))}return this.$context||(this.$context=KE(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=_n(this.labelRotation),n=Math.abs(Math.cos(s)),r=Math.abs(Math.sin(s)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*n>l*r?l/n:c/r:c*r<l*n?c/n:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Hi(i),m=[],p=l.setContext(this.getContext()),v=p.display?p.width:0,x=v/2,g=function(U){return Jn(n,U,v)};let y,b,k,j,S,E,_,C,N,L,P,M;if(o==="top")y=g(this.bottom),E=this.bottom-f,C=y-x,L=g(e.top)+x,M=e.bottom;else if(o==="bottom")y=g(this.top),L=e.top,M=g(e.bottom)-x,E=y+x,C=this.top+f;else if(o==="left")y=g(this.right),S=this.right-f,_=y-x,N=g(e.left)+x,P=e.right;else if(o==="right")y=g(this.left),N=e.left,P=g(e.right)-x,S=y+x,_=this.left+f;else if(s==="x"){if(o==="center")y=g((e.top+e.bottom)/2+.5);else if(ge(o)){const U=Object.keys(o)[0],ee=o[U];y=g(this.chart.scales[U].getPixelForValue(ee))}L=e.top,M=e.bottom,E=y+x,C=E+f}else if(s==="y"){if(o==="center")y=g((e.left+e.right)/2);else if(ge(o)){const U=Object.keys(o)[0],ee=o[U];y=g(this.chart.scales[U].getPixelForValue(ee))}S=y-x,_=S-f,N=e.left,P=e.right}const B=de(r.ticks.maxTicksLimit,h),$=Math.max(1,Math.ceil(h/B));for(b=0;b<h;b+=$){const U=this.getContext(b),ee=i.setContext(U),O=l.setContext(U),W=ee.lineWidth,K=ee.color,H=O.dash||[],T=O.dashOffset,R=ee.tickWidth,Q=ee.tickColor,ue=ee.tickBorderDash||[],me=ee.tickBorderDashOffset;k=qE(this,b,c),k!==void 0&&(j=Jn(n,k,W),d?S=_=N=P=j:E=C=L=M=j,m.push({tx1:S,ty1:E,tx2:_,ty2:C,x1:N,y1:L,x2:P,y2:M,width:W,color:K,borderDash:H,borderDashOffset:T,tickWidth:R,tickColor:Q,tickBorderDash:ue,tickBorderDashOffset:me}))}return this._ticksLength=h,this._borderValue=y,m}_computeLabelItems(e){const s=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=i,f=Hi(n.grid),m=f+u,p=h?-u:m,v=-_n(this.labelRotation),x=[];let g,y,b,k,j,S,E,_,C,N,L,P,M="middle";if(r==="top")S=this.bottom-p,E=this._getXAxisLabelAlignment();else if(r==="bottom")S=this.top+p,E=this._getXAxisLabelAlignment();else if(r==="left"){const $=this._getYAxisLabelAlignment(f);E=$.textAlign,j=$.x}else if(r==="right"){const $=this._getYAxisLabelAlignment(f);E=$.textAlign,j=$.x}else if(s==="x"){if(r==="center")S=(e.top+e.bottom)/2+m;else if(ge(r)){const $=Object.keys(r)[0],U=r[$];S=this.chart.scales[$].getPixelForValue(U)+m}E=this._getXAxisLabelAlignment()}else if(s==="y"){if(r==="center")j=(e.left+e.right)/2-m;else if(ge(r)){const $=Object.keys(r)[0],U=r[$];j=this.chart.scales[$].getPixelForValue(U)}E=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(c==="start"?M="top":c==="end"&&(M="bottom"));const B=this._getLabelSizes();for(g=0,y=l.length;g<y;++g){b=l[g],k=b.label;const $=i.setContext(this.getContext(g));_=this.getPixelForTick(g)+i.labelOffset,C=this._resolveTickFontOptions(g),N=C.lineHeight,L=Me(k)?k.length:1;const U=L/2,ee=$.color,O=$.textStrokeColor,W=$.textStrokeWidth;let K=E;o?(j=_,E==="inner"&&(g===y-1?K=this.options.reverse?"left":"right":g===0?K=this.options.reverse?"right":"left":K="center"),r==="top"?d==="near"||v!==0?P=-L*N+N/2:d==="center"?P=-B.highest.height/2-U*N+N:P=-B.highest.height+N/2:d==="near"||v!==0?P=N/2:d==="center"?P=B.highest.height/2-U*N:P=B.highest.height-L*N,h&&(P*=-1),v!==0&&!$.showLabelBackdrop&&(j+=N/2*Math.sin(v))):(S=_,P=(1-L)*N/2);let H;if($.showLabelBackdrop){const T=jt($.backdropPadding),R=B.heights[g],Q=B.widths[g];let ue=P-T.top,me=0-T.left;switch(M){case"middle":ue-=R/2;break;case"bottom":ue-=R;break}switch(E){case"center":me-=Q/2;break;case"right":me-=Q;break;case"inner":g===y-1?me-=Q:g>0&&(me-=Q/2);break}H={left:me,top:ue,width:Q+T.width,height:R+T.height,color:$.backdropColor}}x.push({label:k,font:C,textOffset:P,options:{rotation:v,color:ee,strokeColor:O,strokeWidth:W,textAlign:K,textBaseline:M,translation:[j,S],backdrop:H}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-_n(this.labelRotation))return e==="top"?"left":"right";let r="center";return s.align==="start"?r="left":s.align==="end"?r="right":s.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,c=o.widest.width;let d,u;return s==="left"?r?(u=this.right+i,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u=this.left)):s==="right"?r?(u=this.left+i,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:r,width:i,height:o}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,r,i,o),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?s.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(c,d,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(s.display)for(i=0,o=r.length;i<o;++i){const c=r[i];s.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=Jn(e,this.left,o)-o/2,u=Jn(e,this.right,l)+l/2,h=f=c):(h=Jn(e,this.top,o)-o/2,f=Jn(e,this.bottom,l)+l/2,d=u=c),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(d,h),s.lineTo(u,f),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&kc(n,r);const i=this.getLabelItems(e);for(const o of i){const l=o.options,c=o.font,d=o.label,u=o.textOffset;br(n,d,0,u,c,l)}r&&Sc(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:r}}=this;if(!n.display)return;const i=st(n.font),o=jt(n.padding),l=n.align;let c=i.lineHeight/2;s==="bottom"||s==="center"||ge(s)?(c+=o.bottom,Me(n.text)&&(c+=i.lineHeight*(n.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=QE(this,c,s,l);br(e,n.text,0,0,i,{color:n.color,maxWidth:h,rotation:f,textAlign:JE(l,s,r),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=de(e.grid&&e.grid.z,-1),r=de(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==kr.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=s.length;i<o;++i){const l=s[i];l[n]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return st(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Bo{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;eP(s)&&(n=this.register(s));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,XE(e,o,n),this.override&&Ge.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,r=this.scope;n in s&&delete s[n],r&&n in Ge[r]&&(delete Ge[r][n],this.override&&delete vr[n])}}function XE(t,e,s){const n=za(Object.create(null),[s?Ge.get(s):{},Ge.get(e),t.defaults]);Ge.set(e,n),t.defaultRoutes&&ZE(e,t.defaultRoutes),t.descriptors&&Ge.describe(e,t.descriptors)}function ZE(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),r=n.pop(),i=[t].concat(n).join("."),o=e[s].split("."),l=o.pop(),c=o.join(".");Ge.route(i,r,c,l)})}function eP(t){return"id"in t&&"defaults"in t}class tP{constructor(){this.controllers=new Bo(ai,"datasets",!0),this.elements=new Bo(Is,"elements"),this.plugins=new Bo(Object,"plugins"),this.scales=new Bo(kr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(r=>{const i=n||this._getRegistryForType(r);n||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):Ne(r,o=>{const l=n||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,s,n){const r=hf(e);Ee(n["before"+r],[],n),s[e](n),Ee(n["after"+r],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const r=s.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var Ps=new tP;class sP{constructor(){this._init=[]}notify(e,s,n,r){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,s,n);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,s,n,r){r=r||{};for(const i of e){const o=i.plugin,l=o[n],c=[s,r,i.options];if(Ee(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ve(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,r=de(n.options&&n.options.plugins,{}),i=nP(n);return r===!1&&!s?[]:iP(e,i,r,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(s,n),e,"stop"),this._notify(r(n,s),e,"start")}}function nP(t){const e={},s=[],n=Object.keys(Ps.plugins.items);for(let i=0;i<n.length;i++)s.push(Ps.getPlugin(n[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];s.indexOf(o)===-1&&(s.push(o),e[o.id]=!0)}return{plugins:s,localIds:e}}function rP(t,e){return!e&&t===!1?null:t===!0?{}:t}function iP(t,{plugins:e,localIds:s},n,r){const i=[],o=t.getContext();for(const l of e){const c=l.id,d=rP(n[c],r);d!==null&&i.push({plugin:l,options:aP(t.config,{plugin:l,local:s[c]},d,o)})}return i}function aP(t,{plugin:e,local:s},n,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(n,i);return s&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function zu(t,e){const s=Ge.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function oP(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function lP(t,e){return t===e?"_index_":"_value_"}function yg(t){if(t==="x"||t==="y"||t==="r")return t}function cP(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Uu(t,...e){if(yg(t))return t;for(const s of e){const n=s.axis||cP(s.position)||t.length>1&&yg(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function vg(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function dP(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return vg(t,"x",s[0])||vg(t,"y",s[0])}return{}}function uP(t,e){const s=vr[t.type]||{scales:{}},n=e.scales||{},r=zu(t.type,e),i=Object.create(null);return Object.keys(n).forEach(o=>{const l=n[o];if(!ge(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Uu(o,l,dP(o,t),Ge.scales[l.type]),d=lP(c,r),u=s.scales||{};i[o]=fa(Object.create(null),[{axis:c},l,u[c],u[d]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||zu(l,e),u=(vr[l]||{}).scales||{};Object.keys(u).forEach(h=>{const f=oP(h,c),m=o[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),fa(i[m],[{axis:f},n[m],u[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];fa(l,[Ge.scales[l.type],Ge.scale])}),i}function Hb(t){const e=t.options||(t.options={});e.plugins=de(e.plugins,{}),e.scales=uP(t,e)}function Wb(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function hP(t){return t=t||{},t.data=Wb(t.data),Hb(t),t}const bg=new Map,Vb=new Set;function Ho(t,e){let s=bg.get(t);return s||(s=e(),bg.set(t,s),Vb.add(s)),s}const Wi=(t,e,s)=>{const n=pi(e,s);n!==void 0&&t.add(n)};class fP{constructor(e){this._config=hP(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Wb(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Hb(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return Ho(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return Ho(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return Ho(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return Ho(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let r=n.get(e);return(!r||s)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,s,n){const{options:r,type:i}=this,o=this._cachedScopes(e,n),l=o.get(s);if(l)return l;const c=new Set;s.forEach(u=>{e&&(c.add(e),u.forEach(h=>Wi(c,e,h))),u.forEach(h=>Wi(c,r,h)),u.forEach(h=>Wi(c,vr[i]||{},h)),u.forEach(h=>Wi(c,Ge,h)),u.forEach(h=>Wi(c,Fu,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),Vb.has(s)&&o.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,vr[s]||{},Ge.datasets[s]||{},{type:s},Ge,Fu]}resolveNamedOptions(e,s,n,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=wg(this._resolverCache,e,r);let c=o;if(pP(o,s)){i.$shared=!1,n=zn(n)?n():n;const d=this.createResolver(e,n,l);c=gi(o,n,d)}for(const d of s)i[d]=c[d];return i}createResolver(e,s,n=[""],r){const{resolver:i}=wg(this._resolverCache,e,n);return ge(s)?gi(i,s,void 0,r):i}}function wg(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const r=s.join();let i=n.get(r);return i||(i={resolver:yf(e,s),subPrefixes:s.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,i)),i}const mP=t=>ge(t)&&Object.getOwnPropertyNames(t).some(e=>zn(t[e]));function pP(t,e){const{isScriptable:s,isIndexable:n}=_b(t);for(const r of e){const i=s(r),o=n(r),l=(o||i)&&t[r];if(i&&(zn(l)||mP(l))||o&&Me(l))return!0}return!1}var gP="4.5.0";const xP=["top","bottom","left","right","chartArea"];function jg(t,e){return t==="top"||t==="bottom"||xP.indexOf(t)===-1&&e==="x"}function Ng(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function _g(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Ee(s&&s.onComplete,[t],e)}function yP(t){const e=t.chart,s=e.options.animation;Ee(s&&s.onProgress,[t],e)}function qb(t){return wf()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const hl={},kg=t=>{const e=qb(t);return Object.values(hl).filter(s=>s.canvas===e).pop()};function vP(t,e,s){const n=Object.keys(t);for(const r of n){const i=+r;if(i>=e){const o=t[r];delete t[r],(s>0||i>e)&&(t[i+s]=o)}}}function bP(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}var hn;let Ec=(hn=class{static register(...e){Ps.add(...e),Sg()}static unregister(...e){Ps.remove(...e),Sg()}constructor(e,s){const n=this.config=new fP(s),r=qb(e),i=kg(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||FE(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=bC(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new sP,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=FC(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],hl[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Hs.listen(this,"complete",_g),Hs.listen(this,"progress",yP),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:r,_aspectRatio:i}=this;return ve(e)?s&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return Ps}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():K0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return V0(this.canvas,this.ctx),this}stop(){return Hs.stop(this),this}resize(e,s){Hs.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,s,i),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,K0(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Ee(n.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};Ne(s,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,r=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let i=[];s&&(i=i.concat(Object.keys(s).map(o=>{const l=s[o],c=Uu(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),Ne(i,o=>{const l=o.options,c=l.id,d=Uu(c,l),u=de(l.type,o.dtype);(l.position===void 0||jg(l.position,d)!==jg(o.dposition))&&(l.position=o.dposition),r[c]=!0;let h=null;if(c in n&&n[c].type===u)h=n[c];else{const f=Ps.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(l,e)}),Ne(r,(o,l)=>{o||delete n[l]}),Ne(n,o=>{as.configure(this,o,o.options),as.addBox(this,o)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((r,i)=>r.index-i.index),n>s){for(let r=s;r<n;++r)this._destroyDatasetMeta(r);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(Ng("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,r)=>{s.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=s.length;n<r;n++){const i=s[n];let o=this.getDatasetMeta(n);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=i.indexAxis||zu(l,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const c=Ps.getController(l),{datasetElementType:d,dataElementType:u}=Ge.datasets[l];Object.assign(c,{dataElementType:Ps.getElement(u),datasetElementType:d&&Ps.getElement(d)}),o.controller=new c(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Ne(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||Ne(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Ng("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Ne(this.scales,e=>{as.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!R0(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of s){const o=n==="_removeElements"?-i:i;vP(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=n(0);for(let i=1;i<s;i++)if(!R0(r,n(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;as.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],Ne(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,zn(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(s),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Hs.has(this)?this.attached&&!Hs.running(this)&&Hs.start(this):(this.draw(),_g({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let r,i;for(r=0,i=s.length;r<i;++r){const o=s[r];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=Db(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&kc(s,r),e.controller.draw(),r&&Sc(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Xs(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,r){const i=xE.modes[s];return typeof i=="function"?i(this,e,n,r):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let r=n.filter(i=>i&&i._dataset===s).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Vn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);Ua(s)?(i.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),Hs.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),V0(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete hl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(i,o)=>{s.addEventListener(this,i,o),e[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};Ne(this.options.events,i=>n(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(c,d)=>{s.addEventListener(this,c,d),e[c]=d},r=(c,d)=>{e[c]&&(s.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",l)},s.isAttached(this.canvas)?l():o()}unbindEvents(){Ne(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},Ne(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const r=n?"set":"remove";let i,o,l,c;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!Hl(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const r=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(s,e),l=n?e:i(e,s);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const i=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:r=[],options:i}=this,o=s,l=this._getActiveElements(e,r,n,o),c=SC(e),d=bP(e,this._lastEvent,n,c);n&&(this._lastEvent=null,Ee(i.onHover,[e,l,this],this),c&&Ee(i.onClick,[e,l,this],this));const u=!Hl(l,r);return(u||s)&&(this._active=l,this._updateHoverStyles(l,r,s)),this._lastEvent=d,u}_getActiveElements(e,s,n,r){if(e.type==="mouseout")return[];if(!n)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},se(hn,"defaults",Ge),se(hn,"instances",hl),se(hn,"overrides",vr),se(hn,"registry",Ps),se(hn,"version",gP),se(hn,"getChart",kg),hn);function Sg(){return Ne(Ec.instances,t=>t._plugins.invalidate())}function Gb(t,e,s=e){t.lineCap=de(s.borderCapStyle,e.borderCapStyle),t.setLineDash(de(s.borderDash,e.borderDash)),t.lineDashOffset=de(s.borderDashOffset,e.borderDashOffset),t.lineJoin=de(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=de(s.borderWidth,e.borderWidth),t.strokeStyle=de(s.borderColor,e.borderColor)}function wP(t,e,s){t.lineTo(s.x,s.y)}function jP(t){return t.stepped?XC:t.tension||t.cubicInterpolationMode==="monotone"?ZC:wP}function Kb(t,e,s={}){const n=t.length,{start:r=0,end:i=n-1}=s,{start:o,end:l}=e,c=Math.max(r,o),d=Math.min(i,l),u=r<o&&i<o||r>l&&i>l;return{count:n,start:c,loop:e.loop,ilen:d<c&&!u?n+d-c:d-c}}function NP(t,e,s,n){const{points:r,options:i}=e,{count:o,start:l,loop:c,ilen:d}=Kb(r,s,n),u=jP(i);let{move:h=!0,reverse:f}=n||{},m,p,v;for(m=0;m<=d;++m)p=r[(l+(f?d-m:m))%o],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,v,p,f,i.stepped),v=p);return c&&(p=r[(l+(f?d:0))%o],u(t,v,p,f,i.stepped)),!!c}function _P(t,e,s,n){const r=e.points,{count:i,start:o,ilen:l}=Kb(r,s,n),{move:c=!0,reverse:d}=n||{};let u=0,h=0,f,m,p,v,x,g;const y=k=>(o+(d?l-k:k))%i,b=()=>{v!==x&&(t.lineTo(u,x),t.lineTo(u,v),t.lineTo(u,g))};for(c&&(m=r[y(0)],t.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=r[y(f)],m.skip)continue;const k=m.x,j=m.y,S=k|0;S===p?(j<v?v=j:j>x&&(x=j),u=(h*u+k)/++h):(b(),t.lineTo(k,j),p=S,h=0,v=x=j),g=j}b()}function Bu(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?_P:NP}function kP(t){return t.stepped?L4:t.tension||t.cubicInterpolationMode==="monotone"?T4:nr}function SP(t,e,s,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,s,n)&&r.closePath()),Gb(t,e.options),t.stroke(r)}function CP(t,e,s,n){const{segments:r,options:i}=e,o=Bu(e);for(const l of r)Gb(t,i,l.style),t.beginPath(),o(t,e,l,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const EP=typeof Path2D=="function";function PP(t,e,s,n){EP&&!e.options.segment?SP(t,e,s,n):CP(t,e,s,n)}class Sn extends Is{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;N4(this._points,n,e,r,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=F4(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,r=e[s],i=this.points,o=Mb(this,{property:s,start:r,end:r});if(!o.length)return;const l=[],c=kP(n);let d,u;for(d=0,u=o.length;d<u;++d){const{start:h,end:f}=o[d],m=i[h],p=i[f];if(m===p){l.push(m);continue}const v=Math.abs((r-m[s])/(p[s]-m[s])),x=c(m,p,v,n.stepped);x[s]=e[s],l.push(x)}return l.length===1?l[0]:l}pathSegment(e,s,n){return Bu(this)(e,this,s,n)}path(e,s,n){const r=this.segments,i=Bu(this);let o=this._loop;s=s||0,n=n||this.points.length-s;for(const l of r)o&=i(e,this,l,{start:s,end:s+n-1});return!!o}draw(e,s,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),PP(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}se(Sn,"id","line"),se(Sn,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),se(Sn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),se(Sn,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Cg(t,e,s,n){const r=t.options,{[s]:i}=t.getProps([s],n);return Math.abs(e-i)<r.radius+r.hitRadius}class fl extends Is{constructor(s){super();se(this,"parsed");se(this,"skip");se(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,r){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(s-o,2)+Math.pow(n-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(s,n){return Cg(this,s,"x",n)}inYRange(s,n){return Cg(this,s,"y",n)}getCenterPoint(s){const{x:n,y:r}=this.getProps(["x","y"],s);return{x:n,y:r}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const r=n&&s.borderWidth||0;return(n+r)*2}draw(s,n){const r=this.options;this.skip||r.radius<.1||!Xs(this,n,this.size(r)/2)||(s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.fillStyle=r.backgroundColor,$u(s,r,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}se(fl,"id","point"),se(fl,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),se(fl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function Yb(t,e){const{x:s,y:n,base:r,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let l,c,d,u,h;return t.horizontal?(h=o/2,l=Math.min(s,r),c=Math.max(s,r),d=n-h,u=n+h):(h=i/2,l=s-h,c=s+h,d=Math.min(n,r),u=Math.max(n,r)),{left:l,top:d,right:c,bottom:u}}function Cn(t,e,s,n){return t?0:Kt(e,s,n)}function AP(t,e,s){const n=t.options.borderWidth,r=t.borderSkipped,i=Nb(n);return{t:Cn(r.top,i.top,0,s),r:Cn(r.right,i.right,0,e),b:Cn(r.bottom,i.bottom,0,s),l:Cn(r.left,i.left,0,e)}}function LP(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,i=ur(r),o=Math.min(e,s),l=t.borderSkipped,c=n||ge(r);return{topLeft:Cn(!c||l.top||l.left,i.topLeft,0,o),topRight:Cn(!c||l.top||l.right,i.topRight,0,o),bottomLeft:Cn(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:Cn(!c||l.bottom||l.right,i.bottomRight,0,o)}}function TP(t){const e=Yb(t),s=e.right-e.left,n=e.bottom-e.top,r=AP(t,s/2,n/2),i=LP(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:i},inner:{x:e.left+r.l,y:e.top+r.t,w:s-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function kd(t,e,s,n){const r=e===null,i=s===null,l=t&&!(r&&i)&&Yb(t,n);return l&&(r||kn(e,l.left,l.right))&&(i||kn(s,l.top,l.bottom))}function MP(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function DP(t,e){t.rect(e.x,e.y,e.w,e.h)}function Sd(t,e,s={}){const n=t.x!==s.x?-e:0,r=t.y!==s.y?-e:0,i=(t.x+t.w!==s.x+s.w?e:0)-n,o=(t.y+t.h!==s.y+s.h?e:0)-r;return{x:t.x+n,y:t.y+r,w:t.w+i,h:t.h+o,radius:t.radius}}class ml extends Is{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=TP(this),l=MP(o.radius)?Ha:DP;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),l(e,Sd(o,s,i)),e.clip(),l(e,Sd(i,-s,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),l(e,Sd(i,s)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,s,n){return kd(this,e,s,n)}inXRange(e,s){return kd(this,e,null,s)}inYRange(e,s){return kd(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(s+r)/2:s,y:i?n:(n+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}se(ml,"id","bar"),se(ml,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),se(ml,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function OP(t,e,s){const n=t.segments,r=t.points,i=e.points,o=[];for(const l of n){let{start:c,end:d}=l;d=Pc(c,d,r);const u=Hu(s,r[c],r[d],l.loop);if(!e.segments){o.push({source:l,target:u,start:r[c],end:r[d]});continue}const h=Mb(e,u);for(const f of h){const m=Hu(s,i[f.start],i[f.end],f.loop),p=Tb(l,r,m);for(const v of p)o.push({source:v,target:f,start:{[s]:Eg(u,m,"start",Math.max)},end:{[s]:Eg(u,m,"end",Math.min)}})}}return o}function Hu(t,e,s,n){if(n)return;let r=e[t],i=s[t];return t==="angle"&&(r=Vt(r),i=Vt(i)),{property:t,start:r,end:i}}function RP(t,e){const{x:s=null,y:n=null}=t||{},r=e.points,i=[];return e.segments.forEach(({start:o,end:l})=>{l=Pc(o,l,r);const c=r[o],d=r[l];n!==null?(i.push({x:c.x,y:n}),i.push({x:d.x,y:n})):s!==null&&(i.push({x:s,y:c.y}),i.push({x:s,y:d.y}))}),i}function Pc(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function Eg(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function Jb(t,e){let s=[],n=!1;return Me(t)?(n=!0,s=t):s=RP(t,e),s.length?new Sn({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function Pg(t){return t&&t.fill!==!1}function IP(t,e,s){let r=t[e].fill;const i=[e];let o;if(!s)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!qe(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function FP(t,e,s){const n=BP(t);if(ge(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return qe(r)&&Math.floor(r)===r?$P(n[0],e,r,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function $P(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function zP(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:ge(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function UP(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:ge(t)?n=t.value:n=e.getBaseValue(),n}function BP(t){const e=t.options,s=e.fill;let n=de(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function HP(t){const{scale:e,index:s,line:n}=t,r=[],i=n.segments,o=n.points,l=WP(e,s);l.push(Jb({x:null,y:e.bottom},n));for(let c=0;c<i.length;c++){const d=i[c];for(let u=d.start;u<=d.end;u++)VP(r,o[u],l)}return new Sn({points:r,options:{}})}function WP(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const i=n[r];if(i.index===e)break;i.hidden||s.unshift(i.dataset)}return s}function VP(t,e,s){const n=[];for(let r=0;r<s.length;r++){const i=s[r],{first:o,last:l,point:c}=qP(i,e,"x");if(!(!c||o&&l)){if(o)n.unshift(c);else if(t.push(c),!l)break}}t.push(...n)}function qP(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const r=n[s],i=t.segments,o=t.points;let l=!1,c=!1;for(let d=0;d<i.length;d++){const u=i[d],h=o[u.start][s],f=o[u.end][s];if(kn(r,h,f)){l=r===h,c=r===f;break}}return{first:l,last:c,point:n}}class Qb{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:r,y:i,radius:o}=this;return s=s||{start:0,end:Jt},e.arc(r,i,o,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:r}=this,i=e.angle;return{x:s+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function GP(t){const{chart:e,fill:s,line:n}=t;if(qe(s))return KP(e,s);if(s==="stack")return HP(t);if(s==="shape")return!0;const r=YP(t);return r instanceof Qb?r:Jb(r,n)}function KP(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function YP(t){return(t.scale||{}).getPointPositionForValue?QP(t):JP(t)}function JP(t){const{scale:e={},fill:s}=t,n=zP(s,e);if(qe(n)){const r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function QP(t){const{scale:e,fill:s}=t,n=e.options,r=e.getLabels().length,i=n.reverse?e.max:e.min,o=UP(s,e,i),l=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,i);return new Qb({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)l.push(e.getPointPositionForValue(c,o));return l}function Cd(t,e,s){const n=GP(e),{chart:r,index:i,line:o,scale:l,axis:c}=e,d=o.options,u=d.fill,h=d.backgroundColor,{above:f=h,below:m=h}=u||{},p=r.getDatasetMeta(i),v=Db(r,p);n&&o.points.length&&(kc(t,s),XP(t,{line:o,target:n,above:f,below:m,area:s,scale:l,axis:c,clip:v}),Sc(t))}function XP(t,e){const{line:s,target:n,above:r,below:i,area:o,scale:l,clip:c}=e,d=s._loop?"angle":e.axis;t.save();let u=i;i!==r&&(d==="x"?(Ag(t,n,o.top),Ed(t,{line:s,target:n,color:r,scale:l,property:d,clip:c}),t.restore(),t.save(),Ag(t,n,o.bottom)):d==="y"&&(Lg(t,n,o.left),Ed(t,{line:s,target:n,color:i,scale:l,property:d,clip:c}),t.restore(),t.save(),Lg(t,n,o.right),u=r)),Ed(t,{line:s,target:n,color:u,scale:l,property:d,clip:c}),t.restore()}function Ag(t,e,s){const{segments:n,points:r}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[Pc(c,d,r)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,s),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(h.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function Lg(t,e,s){const{segments:n,points:r}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[Pc(c,d,r)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(s,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(s,h.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function Ed(t,e){const{line:s,target:n,property:r,color:i,scale:o,clip:l}=e,c=OP(s,n,r);for(const{source:d,target:u,start:h,end:f}of c){const{style:{backgroundColor:m=i}={}}=d,p=n!==!0;t.save(),t.fillStyle=m,ZP(t,o,l,p&&Hu(r,h,f)),t.beginPath();const v=!!s.pathSegment(t,d);let x;if(p){v?t.closePath():Tg(t,n,f,r);const g=!!n.pathSegment(t,u,{move:v,reverse:!0});x=v&&g,x||Tg(t,n,h,r)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function ZP(t,e,s,n){const r=e.chart.chartArea,{property:i,start:o,end:l}=n||{};if(i==="x"||i==="y"){let c,d,u,h;i==="x"?(c=o,d=r.top,u=l,h=r.bottom):(c=r.left,d=o,u=r.right,h=l),t.beginPath(),s&&(c=Math.max(c,s.left),u=Math.min(u,s.right),d=Math.max(d,s.top),h=Math.min(h,s.bottom)),t.rect(c,d,u-c,h-d),t.clip()}}function Tg(t,e,s,n){const r=e.interpolate(s,n);r&&t.lineTo(r.x,r.y)}var eA={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,r=[];let i,o,l,c;for(o=0;o<n;++o)i=t.getDatasetMeta(o),l=i.dataset,c=null,l&&l.options&&l instanceof Sn&&(c={visible:t.isDatasetVisible(o),index:o,fill:FP(l,o,n),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,r.push(c);for(o=0;o<n;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=IP(r,o,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;l&&(l.line.updateControlPoints(i,l.axis),n&&l.fill&&Cd(t.ctx,l,i))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const i=n[r].$filler;Pg(i)&&Cd(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!Pg(n)||s.drawTime!=="beforeDatasetDraw"||Cd(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Mg=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},tA=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Dg extends Is{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Ee(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=st(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=Mg(n,i);let d,u;s.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,r,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+l;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((p,v)=>{const x=n+s/2+i.measureText(p.text).width;(v===0||d[d.length-1]+x+2*l>o)&&(h+=u,d[d.length-(v>0?0:1)]=0,m+=u,f++),c[v]={left:0,top:m,row:f,width:x,height:r},d[d.length-1]+=x+l}),h}_fitCols(e,s,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-e;let h=l,f=0,m=0,p=0,v=0;return this.legendItems.forEach((x,g)=>{const{itemWidth:y,itemHeight:b}=sA(n,s,i,x,r);g>0&&m+b+2*l>u&&(h+=f+l,d.push({width:f,height:m}),p+=f+l,v++,f=m=0),c[g]={left:p,top:m,col:v,width:y,height:b},f=Math.max(f,y),m+=b+l}),h+=f,d.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:r},rtl:i}}=this,o=ii(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=vt(n,this.left+r,this.right-this.lineWidths[l]);for(const d of s)l!==d.row&&(l=d.row,c=vt(n,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+e+r,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+r}else{let l=0,c=vt(n,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const d of s)d.col!==l&&(l=d.col,c=vt(n,this.top+e+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;kc(e,this),this._draw(),Sc(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:r}=this,{align:i,labels:o}=e,l=Ge.color,c=ii(e.rtl,this.left,this.width),d=st(o.font),{padding:u}=o,h=d.size,f=h/2;let m;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:p,boxHeight:v,itemHeight:x}=Mg(o,h),g=function(S,E,_){if(isNaN(p)||p<=0||isNaN(v)||v<0)return;r.save();const C=de(_.lineWidth,1);if(r.fillStyle=de(_.fillStyle,l),r.lineCap=de(_.lineCap,"butt"),r.lineDashOffset=de(_.lineDashOffset,0),r.lineJoin=de(_.lineJoin,"miter"),r.lineWidth=C,r.strokeStyle=de(_.strokeStyle,l),r.setLineDash(de(_.lineDash,[])),o.usePointStyle){const N={radius:v*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:C},L=c.xPlus(S,p/2),P=E+f;wb(r,N,L,P,o.pointStyleWidth&&p)}else{const N=E+Math.max((h-v)/2,0),L=c.leftForLtr(S,p),P=ur(_.borderRadius);r.beginPath(),Object.values(P).some(M=>M!==0)?Ha(r,{x:L,y:N,w:p,h:v,radius:P}):r.rect(L,N,p,v),r.fill(),C!==0&&r.stroke()}r.restore()},y=function(S,E,_){br(r,_.text,S,E+x/2,d,{strikethrough:_.hidden,textAlign:c.textAlign(_.textAlign)})},b=this.isHorizontal(),k=this._computeTitleHeight();b?m={x:vt(i,this.left+u,this.right-n[0]),y:this.top+u+k,line:0}:m={x:this.left+u,y:vt(i,this.top+k+u,this.bottom-s[0].height),line:0},Pb(this.ctx,e.textDirection);const j=x+u;this.legendItems.forEach((S,E)=>{r.strokeStyle=S.fontColor,r.fillStyle=S.fontColor;const _=r.measureText(S.text).width,C=c.textAlign(S.textAlign||(S.textAlign=o.textAlign)),N=p+f+_;let L=m.x,P=m.y;c.setWidth(this.width),b?E>0&&L+N+u>this.right&&(P=m.y+=j,m.line++,L=m.x=vt(i,this.left+u,this.right-n[m.line])):E>0&&P+j>this.bottom&&(L=m.x=L+s[m.line].width+u,m.line++,P=m.y=vt(i,this.top+k+u,this.bottom-s[m.line].height));const M=c.x(L);if(g(M,P,S),L=$C(C,L+p+f,b?L+N:this.right,e.rtl),y(c.x(L),P,S),b)m.x+=N+u;else if(typeof S.text!="string"){const B=d.lineHeight;m.y+=Xb(S,B)+u}else m.y+=j}),Ab(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=st(s.font),r=jt(s.padding);if(!s.display)return;const i=ii(e.rtl,this.left,this.width),o=this.ctx,l=s.position,c=n.size/2,d=r.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=vt(e.align,h,this.right-f);else{const p=this.columnSizes.reduce((v,x)=>Math.max(v,x.height),0);u=d+vt(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const m=vt(l,h,h+f);o.textAlign=i.textAlign(pf(l)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=n.string,br(o,s.text,m,u,n)}_computeTitleHeight(){const e=this.options.title,s=st(e.font),n=jt(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,r,i;if(kn(e,this.left,this.right)&&kn(s,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],kn(e,r.left,r.left+r.width)&&kn(s,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!iA(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=tA(r,n);r&&!i&&Ee(s.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&Ee(s.onHover,[e,n,this],this)}else n&&Ee(s.onClick,[e,n,this],this)}}function sA(t,e,s,n,r){const i=nA(n,t,e,s),o=rA(r,n,e.lineHeight);return{itemWidth:i,itemHeight:o}}function nA(t,e,s,n){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+s.size/2+n.measureText(r).width}function rA(t,e,s){let n=t;return typeof e.text!="string"&&(n=Xb(e,s)),n}function Xb(t,e){const s=t.text?t.text.length:0;return e*s}function iA(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var aA={id:"legend",_element:Dg,start(t,e,s){const n=t.legend=new Dg({ctx:t.ctx,options:s,chart:t});as.configure(t,n,s),as.addBox(t,n)},stop(t){as.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;as.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,r=s.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(s?0:void 0),u=jt(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class Zb extends Is{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const r=Me(n.text)?n.text.length:1;this._padding=jt(n.padding);const i=r*st(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:r,right:i,options:o}=this,l=o.align;let c=0,d,u,h;return this.isHorizontal()?(u=vt(l,n,i),h=s+e,d=i-n):(o.position==="left"?(u=n+e,h=vt(l,r,s),c=Qe*-.5):(u=i-e,h=vt(l,s,r),c=Qe*.5),d=r-s),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=st(s.font),i=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);br(e,s.text,0,0,n,{color:s.color,maxWidth:c,rotation:d,textAlign:pf(s.align),textBaseline:"middle",translation:[o,l]})}}function oA(t,e){const s=new Zb({ctx:t.ctx,options:e,chart:t});as.configure(t,s,e),as.addBox(t,s),t.titleBlock=s}var lA={id:"title",_element:Zb,start(t,e,s){oA(t,s)},stop(t){const e=t.titleBlock;as.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;as.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Xi={average(t){if(!t.length)return!1;let e,s,n=new Set,r=0,i=0;for(e=0,s=t.length;e<s;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();n.add(c.x),r+=c.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((l,c)=>l+c)/n.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=t.length;i<o;++i){const c=t[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=Iu(e,d);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();s=c.x,n=c.y}return{x:s,y:n}}};function Cs(t,e){return e&&(Me(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function Ws(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function cA(t,e){const{element:s,datasetIndex:n,index:r}=e,i=t.getDatasetMeta(n).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:n,element:s}}function Og(t,e){const s=t.chart.ctx,{body:n,footer:r,title:i}=t,{boxWidth:o,boxHeight:l}=e,c=st(e.bodyFont),d=st(e.titleFont),u=st(e.footerFont),h=i.length,f=r.length,m=n.length,p=jt(e.padding);let v=p.height,x=0,g=n.reduce((k,j)=>k+j.before.length+j.lines.length+j.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,h&&(v+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),g){const k=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;v+=m*k+(g-m)*c.lineHeight+(g-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let y=0;const b=function(k){x=Math.max(x,s.measureText(k).width+y)};return s.save(),s.font=d.string,Ne(t.title,b),s.font=c.string,Ne(t.beforeBody.concat(t.afterBody),b),y=e.displayColors?o+2+e.boxPadding:0,Ne(n,k=>{Ne(k.before,b),Ne(k.lines,b),Ne(k.after,b)}),y=0,s.font=u.string,Ne(t.footer,b),s.restore(),x+=p.width,{width:x,height:v}}function dA(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function uA(t,e,s,n){const{x:r,width:i}=n,o=s.caretSize+s.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function hA(t,e,s,n){const{x:r,width:i}=s,{width:o,chartArea:{left:l,right:c}}=t;let d="center";return n==="center"?d=r<=(l+c)/2?"left":"right":r<=i/2?d="left":r>=o-i/2&&(d="right"),uA(d,t,e,s)&&(d="center"),d}function Rg(t,e,s){const n=s.yAlign||e.yAlign||dA(t,s);return{xAlign:s.xAlign||e.xAlign||hA(t,e,s,n),yAlign:n}}function fA(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function mA(t,e,s){let{y:n,height:r}=t;return e==="top"?n+=s:e==="bottom"?n-=r+s:n-=r/2,n}function Ig(t,e,s,n){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:l,yAlign:c}=s,d=r+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=ur(o);let p=fA(e,l);const v=mA(e,c,d);return c==="center"?l==="left"?p+=d:l==="right"&&(p-=d):l==="left"?p-=Math.max(u,f)+r:l==="right"&&(p+=Math.max(h,m)+r),{x:Kt(p,0,n.width-e.width),y:Kt(v,0,n.height-e.height)}}function Wo(t,e,s){const n=jt(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Fg(t){return Cs([],Ws(t))}function pA(t,e,s){return Vn(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function $g(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const ew={beforeTitle:zs,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:zs,beforeBody:zs,beforeLabel:zs,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return ve(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:zs,afterBody:zs,beforeFooter:zs,footer:zs,afterFooter:zs};function Lt(t,e,s,n){const r=t[e].call(s,n);return typeof r>"u"?ew[e].call(s,n):r}class Wu extends Is{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&s.options.animation&&n.animations,i=new Ob(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=pA(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,r=Lt(n,"beforeTitle",this,e),i=Lt(n,"title",this,e),o=Lt(n,"afterTitle",this,e);let l=[];return l=Cs(l,Ws(r)),l=Cs(l,Ws(i)),l=Cs(l,Ws(o)),l}getBeforeBody(e,s){return Fg(Lt(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,r=[];return Ne(e,i=>{const o={before:[],lines:[],after:[]},l=$g(n,i);Cs(o.before,Ws(Lt(l,"beforeLabel",this,i))),Cs(o.lines,Lt(l,"label",this,i)),Cs(o.after,Ws(Lt(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,s){return Fg(Lt(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,r=Lt(n,"beforeFooter",this,e),i=Lt(n,"footer",this,e),o=Lt(n,"afterFooter",this,e);let l=[];return l=Cs(l,Ws(r)),l=Cs(l,Ws(i)),l=Cs(l,Ws(o)),l}_createItems(e){const s=this._active,n=this.chart.data,r=[],i=[],o=[];let l=[],c,d;for(c=0,d=s.length;c<d;++c)l.push(cA(this.chart,s[c]));return e.filter&&(l=l.filter((u,h,f)=>e.filter(u,h,f,n))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,n))),Ne(l,u=>{const h=$g(e.callbacks,u);r.push(Lt(h,"labelColor",this,u)),i.push(Lt(h,"labelPointStyle",this,u)),o.push(Lt(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,s){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=Xi[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const c=this._size=Og(this,n),d=Object.assign({},l,c),u=Rg(this.chart,n,d),h=Ig(n,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,r){const i=this.getCaretPosition(e,n,r);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=n,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=ur(l),{x:f,y:m}=e,{width:p,height:v}=s;let x,g,y,b,k,j;return i==="center"?(k=m+v/2,r==="left"?(x=f,g=x-o,b=k+o,j=k-o):(x=f+p,g=x+o,b=k-o,j=k+o),y=x):(r==="left"?g=f+Math.max(c,u)+o:r==="right"?g=f+p-Math.max(d,h)-o:g=this.caretX,i==="top"?(b=m,k=b-o,x=g-o,y=g+o):(b=m+v,k=b+o,x=g+o,y=g-o),j=b),{x1:x,x2:g,x3:y,y1:b,y2:k,y3:j}}drawTitle(e,s,n){const r=this.title,i=r.length;let o,l,c;if(i){const d=ii(n.rtl,this.x,this.width);for(e.x=Wo(this,n.titleAlign,n),s.textAlign=d.textAlign(n.titleAlign),s.textBaseline="middle",o=st(n.titleFont),l=n.titleSpacing,s.fillStyle=n.titleColor,s.font=o.string,c=0;c<i;++c)s.fillText(r[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===i&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,s,n,r,i){const o=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:d}=i,u=st(i.bodyFont),h=Wo(this,"left",i),f=r.x(h),m=c<u.lineHeight?(u.lineHeight-c)/2:0,p=s.y+m;if(i.usePointStyle){const v={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},x=r.leftForLtr(f,d)+d/2,g=p+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,$u(e,v,x,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,$u(e,v,x,g)}else{e.lineWidth=ge(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=r.leftForLtr(f,d),x=r.leftForLtr(r.xPlus(f,1),d-2),g=ur(o.borderRadius);Object.values(g).some(y=>y!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,Ha(e,{x:v,y:p,w:d,h:c,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),Ha(e,{x,y:p+1,w:d-2,h:c-2,radius:g}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(v,p,d,c),e.strokeRect(v,p,d,c),e.fillStyle=o.backgroundColor,e.fillRect(x,p+1,d-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=n,h=st(n.bodyFont);let f=h.lineHeight,m=0;const p=ii(n.rtl,this.x,this.width),v=function(_){s.fillText(_,p.x(e.x+m),e.y+f/2),e.y+=f+i},x=p.textAlign(o);let g,y,b,k,j,S,E;for(s.textAlign=o,s.textBaseline="middle",s.font=h.string,e.x=Wo(this,x,n),s.fillStyle=n.bodyColor,Ne(this.beforeBody,v),m=l&&x!=="right"?o==="center"?d/2+u:d+2+u:0,k=0,S=r.length;k<S;++k){for(g=r[k],y=this.labelTextColors[k],s.fillStyle=y,Ne(g.before,v),b=g.lines,l&&b.length&&(this._drawColorBox(s,e,k,p,n),f=Math.max(h.lineHeight,c)),j=0,E=b.length;j<E;++j)v(b[j]),f=h.lineHeight;Ne(g.after,v)}m=0,f=h.lineHeight,Ne(this.afterBody,v),e.y-=i}drawFooter(e,s,n){const r=this.footer,i=r.length;let o,l;if(i){const c=ii(n.rtl,this.x,this.width);for(e.x=Wo(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",o=st(n.footerFont),s.fillStyle=n.footerColor,s.font=o.string,l=0;l<i;++l)s.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,s,n,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=e,{width:d,height:u}=n,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=ur(r.cornerRadius);s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.beginPath(),s.moveTo(l+h,c),o==="top"&&this.drawCaret(e,s,n,r),s.lineTo(l+d-f,c),s.quadraticCurveTo(l+d,c,l+d,c+f),o==="center"&&i==="right"&&this.drawCaret(e,s,n,r),s.lineTo(l+d,c+u-p),s.quadraticCurveTo(l+d,c+u,l+d-p,c+u),o==="bottom"&&this.drawCaret(e,s,n,r),s.lineTo(l+m,c+u),s.quadraticCurveTo(l,c+u,l,c+u-m),o==="center"&&i==="left"&&this.drawCaret(e,s,n,r),s.lineTo(l,c+h),s.quadraticCurveTo(l,c,l+h,c),s.closePath(),s.fill(),r.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const o=Xi[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=Og(this,e),c=Object.assign({},o,this._size),d=Rg(s,e,c),u=Ig(e,c,d,s);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=jt(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,s),Pb(e,s.textDirection),i.y+=o.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),Ab(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,r=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!Hl(n,r),o=this._positionChanged(r,s);(i||o)&&(this._active=r,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,s,n),l=this._positionChanged(o,e),c=s||!Hl(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,s){const{caretX:n,caretY:r,options:i}=this,o=Xi[i.position].call(this,e,s);return o!==!1&&(n!==o.x||r!==o.y)}}se(Wu,"positioners",Xi);var gA={id:"tooltip",_element:Wu,positioners:Xi,afterInit(t,e,s){s&&(t.tooltip=new Wu({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:ew},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const xA=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function yA(t,e,s,n){const r=t.indexOf(e);if(r===-1)return xA(t,e,s,n);const i=t.lastIndexOf(e);return r!==i?s:r}const vA=(t,e)=>t===null?null:Kt(Math.round(t),0,e);function zg(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Vu extends kr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:r,label:i}of s)n[r]===i&&n.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(ve(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:yA(n,e,de(s,e),this._addedLabels),vA(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=e===0&&s===i.length-1?i:i.slice(e,s+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=s;o++)r.push({value:o});return r}getLabelForValue(e){return zg.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}se(Vu,"id","category"),se(Vu,"defaults",{ticks:{callback:zg}});function bA(t,e){const s=[],{bounds:r,step:i,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=t,m=i||1,p=u-1,{min:v,max:x}=e,g=!ve(o),y=!ve(l),b=!ve(d),k=(x-v)/(h+1);let j=F0((x-v)/p/m)*m,S,E,_,C;if(j<1e-14&&!g&&!y)return[{value:v},{value:x}];C=Math.ceil(x/j)-Math.floor(v/j),C>p&&(j=F0(C*j/p/m)*m),ve(c)||(S=Math.pow(10,c),j=Math.ceil(j*S)/S),r==="ticks"?(E=Math.floor(v/j)*j,_=Math.ceil(x/j)*j):(E=v,_=x),g&&y&&i&&LC((l-o)/i,j/1e3)?(C=Math.round(Math.min((l-o)/j,u)),j=(l-o)/C,E=o,_=l):b?(E=g?o:E,_=y?l:_,C=d-1,j=(_-E)/C):(C=(_-E)/j,ma(C,Math.round(C),j/1e3)?C=Math.round(C):C=Math.ceil(C));const N=Math.max($0(j),$0(E));S=Math.pow(10,ve(c)?N:c),E=Math.round(E*S)/S,_=Math.round(_*S)/S;let L=0;for(g&&(f&&E!==o?(s.push({value:o}),E<o&&L++,ma(Math.round((E+L*j)*S)/S,o,Ug(o,k,t))&&L++):E<o&&L++);L<C;++L){const P=Math.round((E+L*j)*S)/S;if(y&&P>l)break;s.push({value:P})}return y&&f&&_!==l?s.length&&ma(s[s.length-1].value,l,Ug(l,k,t))?s[s.length-1].value=l:s.push({value:l}):(!y||_===l)&&s.push({value:_}),s}function Ug(t,e,{horizontal:s,minRotation:n}){const r=_n(n),i=(s?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class Yl extends kr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return ve(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=s?r:c,l=c=>i=n?i:c;if(e){const c=Os(r),d=Os(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||o(r-c)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),s=s||11),s&&(r=Math.min(s,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,o=bA(r,i);return e.bounds==="ticks"&&mb(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-s)/Math.max(e.length-1,1)/2;s-=r,n+=r}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return xf(e,this.chart.options.locale,this.options.ticks.format)}}class qu extends Yl{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=qe(e)?e:0,this.max=qe(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=_n(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}se(qu,"id","linear"),se(qu,"defaults",{ticks:{callback:_c.formatters.numeric}});const Va=t=>Math.floor(Nn(t)),Xn=(t,e)=>Math.pow(10,Va(t)+e);function Bg(t){return t/Math.pow(10,Va(t))===1}function Hg(t,e,s){const n=Math.pow(10,s),r=Math.floor(t/n);return Math.ceil(e/n)-r}function wA(t,e){const s=e-t;let n=Va(s);for(;Hg(t,e,n)>10;)n++;for(;Hg(t,e,n)<10;)n--;return Math.min(n,Va(t))}function jA(t,{min:e,max:s}){e=Ht(t.min,e);const n=[],r=Va(e);let i=wA(e,s),o=i<0?Math.pow(10,Math.abs(i)):1;const l=Math.pow(10,i),c=r>i?Math.pow(10,r):0,d=Math.round((e-c)*o)/o,u=Math.floor((e-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,i)),f=Ht(t.min,Math.round((c+u+h*Math.pow(10,i))*o)/o);for(;f<s;)n.push({value:f,major:Bg(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(i++,h=2,o=i>=0?1:o),f=Math.round((c+u+h*Math.pow(10,i))*o)/o;const m=Ht(t.max,f);return n.push({value:m,major:Bg(m),significand:h}),n}class Wg extends kr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,s){const n=Yl.prototype.parse.apply(this,[e,s]);if(n===0){this._zero=!0;return}return qe(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=qe(e)?Math.max(0,e):null,this.max=qe(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!qe(this._userMin)&&(this.min=e===Xn(this.min,0)?Xn(this.min,-1):Xn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let n=this.min,r=this.max;const i=l=>n=e?n:l,o=l=>r=s?r:l;n===r&&(n<=0?(i(1),o(10)):(i(Xn(n,-1)),o(Xn(r,1)))),n<=0&&i(Xn(r,-1)),r<=0&&o(Xn(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,s={min:this._userMin,max:this._userMax},n=jA(s,this);return e.bounds==="ticks"&&mb(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":xf(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=Nn(e),this._valueRange=Nn(this.max)-Nn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(Nn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const s=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+s*this._valueRange)}}se(Wg,"id","logarithmic"),se(Wg,"defaults",{ticks:{callback:_c.formatters.logarithmic,major:{enabled:!0}}});function Gu(t){const e=t.ticks;if(e.display&&t.display){const s=jt(e.backdropPadding);return de(e.font&&e.font.size,Ge.font.size)+s.height}return 0}function NA(t,e,s){return s=Me(s)?s:[s],{w:QC(t,e.string,s),h:s.length*e.lineHeight}}function Vg(t,e,s,n,r){return t===n||t===r?{start:e-s/2,end:e+s/2}:t<n||t>r?{start:e-s,end:e}:{start:e,end:e+s}}function _A(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],r=[],i=t._pointLabels.length,o=t.options.pointLabels,l=o.centerPointLabels?Qe/i:0;for(let c=0;c<i;c++){const d=o.setContext(t.getPointLabelContext(c));r[c]=d.padding;const u=t.getPointPosition(c,t.drawingArea+r[c],l),h=st(d.font),f=NA(t.ctx,h,t._pointLabels[c]);n[c]=f;const m=Vt(t.getIndexAngle(c)+l),p=Math.round(ff(m)),v=Vg(p,u.x,f.w,0,180),x=Vg(p,u.y,f.h,90,270);kA(s,e,m,v,x)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=EA(t,n,r)}function kA(t,e,s,n,r){const i=Math.abs(Math.sin(s)),o=Math.abs(Math.cos(s));let l=0,c=0;n.start<e.l?(l=(e.l-n.start)/i,t.l=Math.min(t.l,e.l-l)):n.end>e.r&&(l=(n.end-e.r)/i,t.r=Math.max(t.r,e.r+l)),r.start<e.t?(c=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function SA(t,e,s){const n=t.drawingArea,{extra:r,additionalAngle:i,padding:o,size:l}=s,c=t.getPointPosition(e,n+r+o,i),d=Math.round(ff(Vt(c.angle+Gt))),u=LA(c.y,l.h,d),h=PA(d),f=AA(c.x,l.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+l.w,bottom:u+l.h}}function CA(t,e){if(!e)return!0;const{left:s,top:n,right:r,bottom:i}=t;return!(Xs({x:s,y:n},e)||Xs({x:s,y:i},e)||Xs({x:r,y:n},e)||Xs({x:r,y:i},e))}function EA(t,e,s){const n=[],r=t._pointLabels.length,i=t.options,{centerPointLabels:o,display:l}=i.pointLabels,c={extra:Gu(i)/2,additionalAngle:o?Qe/r:0};let d;for(let u=0;u<r;u++){c.padding=s[u],c.size=e[u];const h=SA(t,u,c);n.push(h),l==="auto"&&(h.visible=CA(h,d),h.visible&&(d=h))}return n}function PA(t){return t===0||t===180?"center":t<180?"left":"right"}function AA(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function LA(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function TA(t,e,s){const{left:n,top:r,right:i,bottom:o}=s,{backdropColor:l}=e;if(!ve(l)){const c=ur(e.borderRadius),d=jt(e.backdropPadding);t.fillStyle=l;const u=n-d.left,h=r-d.top,f=i-n+d.width,m=o-r+d.height;Object.values(c).some(p=>p!==0)?(t.beginPath(),Ha(t,{x:u,y:h,w:f,h:m,radius:c}),t.fill()):t.fillRect(u,h,f,m)}}function MA(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let r=e-1;r>=0;r--){const i=t._pointLabelItems[r];if(!i.visible)continue;const o=n.setContext(t.getPointLabelContext(r));TA(s,o,i);const l=st(o.font),{x:c,y:d,textAlign:u}=i;br(s,t._pointLabels[r],c,d+l.lineHeight/2,l,{color:o.color,textAlign:u,textBaseline:"middle"})}}function tw(t,e,s,n){const{ctx:r}=t;if(s)r.arc(t.xCenter,t.yCenter,e,0,Jt);else{let i=t.getPointPosition(0,e);r.moveTo(i.x,i.y);for(let o=1;o<n;o++)i=t.getPointPosition(o,e),r.lineTo(i.x,i.y)}}function DA(t,e,s,n,r){const i=t.ctx,o=e.circular,{color:l,lineWidth:c}=e;!o&&!n||!l||!c||s<0||(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash(r.dash||[]),i.lineDashOffset=r.dashOffset,i.beginPath(),tw(t,s,o,n),i.closePath(),i.stroke(),i.restore())}function OA(t,e,s){return Vn(t,{label:s,index:e,type:"pointLabel"})}class Vo extends Yl{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=jt(Gu(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=qe(e)&&!isNaN(e)?e:0,this.max=qe(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Gu(this.options))}generateTickLabels(e){Yl.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const r=Ee(this.options.pointLabels.callback,[s,n],this);return r||r===0?r:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?_A(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,r){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,r))}getIndexAngle(e){const s=Jt/(this._pointLabels.length||1),n=this.options.startAngle||0;return Vt(e*s+_n(n))}getDistanceFromCenterForValue(e){if(ve(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(ve(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return OA(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const r=this.getIndexAngle(e)-Gt+n;return{x:Math.cos(r)*s+this.xCenter,y:Math.sin(r)*s+this.yCenter,angle:r}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:s,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),tw(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:r,border:i}=s,o=this._pointLabels.length;let l,c,d;if(s.pointLabels.display&&MA(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),m=r.setContext(f),p=i.setContext(f);DA(this,m,c,o,p)}}),n.display){for(e.save(),l=o-1;l>=0;l--){const u=n.setContext(this.getPointLabelContext(l)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!s.reverse)return;const d=n.setContext(this.getContext(c)),u=st(d.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,o=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const h=jt(d.backdropPadding);e.fillRect(-o/2-h.left,-i-u.size/2-h.top,o+h.width,u.size+h.height)}br(e,l.label,0,-i,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}se(Vo,"id","radialLinear"),se(Vo,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:_c.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),se(Vo,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),se(Vo,"descriptors",{angleLines:{_fallback:"grid"}});const Ac={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},Dt=Object.keys(Ac);function qg(t,e){return t-e}function Gg(t,e){if(ve(e))return null;const s=t._adapter,{parser:n,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),qe(o)||(o=typeof n=="string"?s.parse(o,n):s.parse(o)),o===null?null:(r&&(o=r==="week"&&(Ba(i)||i===!0)?s.startOf(o,"isoWeek",i):s.startOf(o,r)),+o)}function Kg(t,e,s,n){const r=Dt.length;for(let i=Dt.indexOf(t);i<r-1;++i){const o=Ac[Dt[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-e)/(l*o.size))<=n)return Dt[i]}return Dt[r-1]}function RA(t,e,s,n,r){for(let i=Dt.length-1;i>=Dt.indexOf(s);i--){const o=Dt[i];if(Ac[o].common&&t._adapter.diff(r,n,o)>=e-1)return o}return Dt[s?Dt.indexOf(s):0]}function IA(t){for(let e=Dt.indexOf(t)+1,s=Dt.length;e<s;++e)if(Ac[Dt[e]].common)return Dt[e]}function Yg(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:r}=mf(s,e),i=s[n]>=e?s[n]:s[r];t[i]=!0}}function FA(t,e,s,n){const r=t._adapter,i=+r.startOf(e[0].value,n),o=e[e.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,n))c=s[l],c>=0&&(e[c].major=!0);return e}function Jg(t,e,s){const n=[],r={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],r[l]=o,n.push({value:l,major:!1});return i===0||!s?n:FA(t,n,r,s)}class Jl extends kr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),r=this._adapter=new hE._date(e.adapters.date);r.init(s),fa(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Gg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=qe(r)&&!isNaN(r)?r:+s.startOf(Date.now(),n),i=qe(i)&&!isNaN(i)?i:+s.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=RC(r,i,o);return this._unit=s.unit||(n.autoSkip?Kg(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):RA(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:IA(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),Jg(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?s=1-r:s=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;s=Kt(s,0,o),n=Kt(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||Kg(i.minUnit,s,n,this._getLabelCapacity(s)),l=de(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=Ba(c)||c===!0,u={};let h=s,f,m;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":o),e.diff(n,s,o)>1e5*l)throw new Error(s+" and "+n+" are too far apart with stepSize of "+l+" "+o);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<n;f=+e.add(f,l,o),m++)Yg(u,f,p);return(f===n||r.bounds==="ticks"||m===1)&&Yg(u,f,p),Object.keys(u).sort(qg).map(v=>+v)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const r=this.options.time.displayFormats,i=this._unit,o=s||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,s,n,r){const i=this.options,o=i.ticks.callback;if(o)return Ee(o,[e,s,n],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],f=n[s],m=d&&h&&f&&f.major;return this._adapter.format(e,r||(m?h:u))}generateTickLabels(e){let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s],r.label=this._tickFormatFunction(r.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,r=_n(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*i+l*o,h:n*o+l*i}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,r=n[s.unit]||n.millisecond,i=this._tickFormatFunction(e,0,Jg(this,[e],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(s=0,n=r.length;s<n;++s)e=e.concat(r[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const r=this.getLabels();for(s=0,n=r.length;s<n;++s)e.push(Gg(this,r[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return xb(e.sort(qg))}}se(Jl,"id","time"),se(Jl,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function qo(t,e,s){let n=0,r=t.length-1,i,o,l,c;s?(e>=t[n].pos&&e<=t[r].pos&&({lo:n,hi:r}=lr(t,"pos",e)),{pos:i,time:l}=t[n],{pos:o,time:c}=t[r]):(e>=t[n].time&&e<=t[r].time&&({lo:n,hi:r}=lr(t,"time",e)),{time:i,pos:l}=t[n],{time:o,pos:c}=t[r]);const d=o-i;return d?l+(c-l)*(e-i)/d:l}class Qg extends Jl{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=qo(s,this.min),this._tableRange=qo(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,r=[],i=[];let o,l,c,d,u;for(o=0,l=e.length;o<l;++o)d=e[o],d>=s&&d<=n&&r.push(d);if(r.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)u=r[o+1],c=r[o-1],d=r[o],Math.round((u+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(qo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return qo(this._table,n*this._tableRange+this._minPos,!0)}}se(Qg,"id","timeseries"),se(Qg,"defaults",Jl.defaults);const sw="label";function Xg(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function $A(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function nw(t,e){t.labels=e}function rw(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:sw;const n=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[s]===r[s]);return!i||!r.data||n.includes(i)?{...r}:(n.push(i),Object.assign(i,r),i)})}function zA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:sw;const s={labels:[],datasets:[]};return nw(s,t.labels),rw(s,t.datasets,e),s}function UA(t,e){const{height:s=150,width:n=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...f}=t,m=w.useRef(null),p=w.useRef(null),v=()=>{m.current&&(p.current=new Ec(m.current,{type:o,data:zA(l,i),options:c&&{...c},plugins:d}),Xg(e,p.current))},x=()=>{Xg(e,null),p.current&&(p.current.destroy(),p.current=null)};return w.useEffect(()=>{!r&&p.current&&c&&$A(p.current,c)},[r,c]),w.useEffect(()=>{!r&&p.current&&nw(p.current.config.data,l.labels)},[r,l.labels]),w.useEffect(()=>{!r&&p.current&&l.datasets&&rw(p.current.config.data,l.datasets,i)},[r,l.datasets]),w.useEffect(()=>{p.current&&(r?(x(),setTimeout(v)):p.current.update(h))},[r,c,l.labels,l.datasets,h]),w.useEffect(()=>{p.current&&(x(),setTimeout(v))},[o]),w.useEffect(()=>(v(),()=>x()),[]),Xl.createElement("canvas",{ref:m,role:"img",height:s,width:n,...f},u)}const BA=w.forwardRef(UA);function iw(t,e){return Ec.register(e),w.forwardRef((s,n)=>Xl.createElement(BA,{...s,ref:n,type:t}))}const Pd=iw("line",dl),HA=iw("bar",cl);Ec.register(Vu,qu,fl,Sn,ml,lA,gA,aA,eA);const WA=()=>{var ue,me,Ae,nt,rt,Et,Pt,$e,es,V,oe,ke,Le,ts,ze,cn,q,be,Oe,Ye,zt,Sr,Cr,Er,Pr,Ar,mt,Lr,Tr,D,te,A,Y,re,We,dn,no,_f,kf,Sf,Cf,Ef,Pf,Af,Lf,Tf,Mf,Df,Of,Rf,If,Ff,$f,zf,Uf,Bf,Hf,Wf,Vf,qf,Gf,Kf,Yf,Jf,Qf,Xf,Zf,em,tm,sm,nm,rm,im,am,om,lm,cm,dm,um,hm,fm,mm,pm,gm,xm,ym;const{userProfile:t,loading:e,getDashboardRoute:s}=Fs(),n=ft(),[r,i]=w.useState(new Date),[o,l]=w.useState({serverStatus:{uptime:"--",responseTime:"--",status:"loading"},database:{queryTime:"--",connections:"Loading...",maxConnections:"Loading...",slowQueries:"0",status:"loading"},network:{latency:"Testing...",status:"loading"}}),[c,d]=w.useState({activeUsers:{current:"--",peakToday:"--",peakHourLabel:"Loading...",recentlyActive:"--"},apiCallVolume:{requestsPerMinute:"--",requestsPerHour:"--",totalRequests:"--",mostUsedEndpoints:[]},databaseOperations:{readOperations:"--",writeOperations:"--",queryCount:"--",totalUsers:"--"},storageUsage:{databaseSize:"Loading...",tableCount:"Loading...",indexSize:"Loading...",growthRate:"Loading..."},status:"loading"}),[u,h]=w.useState({errorRates:{http4xx:"--",http5xx:"--",errorTrend:"loading",totalErrorsToday:"--"},failedOperations:{loginFailures:"--",databaseTimeouts:"--",authenticationErrors:"--",apiErrors:"--"},systemAlerts:{criticalAlerts:"--",warningAlerts:"--",lastCriticalAlert:"Loading...",alertStatus:"loading"},recentErrors:[],status:"loading"}),[f,m]=w.useState({apiHealth:{responseTime:"--",rateLimits:"--",status:"loading",diagnostics:null},databaseConnections:{activeConnections:"--",connectionPoolStatus:"--",poolHealth:"loading",diagnostics:null},rowLevelSecurity:{policyPerformance:"--",accessPatterns:"--",rlsStatus:"loading",diagnostics:null},status:"loading"}),[p,v]=w.useState({userGrowth:{dailyGrowth:[],totalUsers:"--",growthRate:"--",last30Days:"--",last7Days:"--"},peakUsagePatterns:{byDayOfWeek:[],byHour:[],peakDay:"--",peakHour:"--"},growthMetrics:{userGrowthRate:"--",dataGrowthEstimate:"--",recentDataGrowth:"--",averageUsersPerDay:"--"},performanceOverTime:{avgResponseTime:[],errorRate:[]},summary:{trendsAvailable:!1,dataQuality:"loading"},status:"loading"}),[x,g]=w.useState(!1),[y,b]=w.useState({apiHealth:!1,databaseConnections:!1,rowLevelSecurity:!1}),[k,j]=w.useState({infrastructure:!0,errors:!0,supabaseMetrics:!0,userAnalytics:!1,historicalTrends:!1});if(w.useEffect(()=>{if(!e&&t&&t.role!=="Capacity Admin"){console.log(`🚫 Access denied to system health for role: ${t.role}, redirecting to dashboard`);const I=s();n(I,{replace:!0})}},[t,e,n,s]),w.useEffect(()=>{P()},[]),w.useEffect(()=>{const I=setInterval(()=>{P()},3e4);return()=>clearInterval(I)},[]),t&&t.role!=="Capacity Admin")return null;if(e)return a.jsx(Ie,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-300",children:"Loading..."})]})})});const S=()=>"/api/system",E=I=>{var ae,xe,Ze;if(!I||!I.data)return console.warn("⚠️ No historical data received from API"),_();const Z=I.data||[],le=I.summary||{},je=C(Z),pe=N(Z),Xe=L(Z);return{userGrowth:{dailyGrowth:je,totalUsers:((ae=le.totalUsers)==null?void 0:ae.toString())||"--",growthRate:le.growthRate||"+0%",last30Days:((xe=le.last30DaysUsers)==null?void 0:xe.toString())||"--",last7Days:((Ze=le.last7DaysUsers)==null?void 0:Ze.toString())||"--"},peakUsagePatterns:{byDayOfWeek:pe.byDayOfWeek,byHour:pe.byHour,peakDay:pe.peakDay,peakHour:pe.peakHour},growthMetrics:{userGrowthRate:le.growthRate||"+0%",dataGrowthEstimate:le.totalDataItems?`${Math.round(le.totalDataItems*.1)} MB/month`:"N/A",recentDataGrowth:le.last24HoursUsers?`${le.last24HoursUsers*2} KB`:"N/A",averageUsersPerDay:le.totalUsers&&le.totalUsers>0?(le.totalUsers/30).toFixed(1):"0"},performanceOverTime:{avgResponseTime:Xe.responseTime,errorRate:Xe.errorRate},summary:{trendsAvailable:!0,dataQuality:"live_data",totalDataPoints:Z.length},status:"healthy"}},_=()=>({userGrowth:{dailyGrowth:[],totalUsers:"--",growthRate:"+0%",last30Days:"--",last7Days:"--"},peakUsagePatterns:{byDayOfWeek:[],byHour:[],peakDay:"N/A",peakHour:"N/A"},growthMetrics:{userGrowthRate:"+0%",dataGrowthEstimate:"N/A",recentDataGrowth:"N/A",averageUsersPerDay:"0"},performanceOverTime:{avgResponseTime:[],errorRate:[]},summary:{trendsAvailable:!1,dataQuality:"no_data",totalDataPoints:0},status:"healthy"}),C=(I,Z)=>{if(!I||I.length===0)return[];const le=[],je=new Date;for(let pe=6;pe>=0;pe--){const ae=new Date(je.getTime()-pe*24*60*60*1e3).toISOString().split("T")[0],xe=I.filter(Ut=>new Date(Ut.timestamp).toISOString().split("T")[0]===ae),Ze=xe.length>0?Math.max(...xe.map(Ut=>Ut.activeUsers)):0,$s=Math.min(pe===6?2:1,Ze);le.push({date:ae,totalUsers:Ze,newUsers:$s})}return le},N=I=>{if(!I||I.length===0)return{byDayOfWeek:[],byHour:[],peakDay:"Monday",peakHour:"9:00 AM"};const le=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((ae,xe)=>({day:ae,registrations:Math.floor(Math.random()*5)+(xe===1?3:1)})),je=[];for(let ae=0;ae<24;ae++){const xe=ae.toString().padStart(2,"0")+":00",Ze=ae>=8&&ae<=17,$s=ae>=9&&ae<=11;let Ut=Math.floor(Math.random()*2);Ze&&(Ut+=1),$s&&(Ut+=2),je.push({hour:xe,registrations:Ut})}const pe=le.reduce((ae,xe)=>xe.registrations>ae.registrations?xe:ae),Xe=je.reduce((ae,xe)=>xe.registrations>ae.registrations?xe:ae);return{byDayOfWeek:le,byHour:je,peakDay:pe.day,peakHour:Xe.hour.replace(":00",":00 AM").replace(/(\d{2}):00 AM$/,(ae,xe)=>{const Ze=parseInt(xe);return Ze===0?"12:00 AM":Ze>12?`${Ze-12}:00 PM`:Ze===12?"12:00 PM":ae})}},L=I=>{if(!I||I.length===0)return{responseTime:[],errorRate:[]};const Z=I.slice(-12),le=Z.map(pe=>({date:new Date(pe.timestamp).toISOString(),responseTime:parseInt(pe.responseTime)||100})),je=Z.map(pe=>({date:new Date(pe.timestamp).toISOString(),errorRate:parseFloat(pe.errorRate)||0}));return{responseTime:le,errorRate:je}},P=async()=>{var Z,le,je,pe,Xe,ae,xe,Ze,$s,Ut,Mr,Ci,vm,bm,wm,jm,Nm,_m,km,Sm,Cm,Em,Pm,Am,Lm,Tm,Mm,Dm,Om,Rm,Im,Fm,$m;g(!0);const I=S();try{const[Lc,qn]=await Promise.all([fetch(`${I}/monitoring?type=server-status`),fetch(`${I}/monitoring?type=database-health`)]),[Gn,Tc]=await Promise.all([Lc.json(),qn.json()]);l(pt=>{var G;return{...pt,serverStatus:{uptime:Gn.uptime||"99.5%",responseTime:Gn.responseTime||"0ms",status:Gn.status||"healthy",lastCheck:Gn.lastCheck||Gn.timestamp,details:{actualUptimeSeconds:Gn.actualUptimeSeconds||"N/A",actualUptimeFormatted:Gn.actualUptimeFormatted||"Serverless Function"}},database:{queryTime:(G=Tc.connectionTest)!=null&&G.responseTime?`${Tc.connectionTest.responseTime}ms`:"--",connections:"Supabase Managed",maxConnections:"Auto-scaling",slowQueries:"0",status:Tc.overallHealth||"healthy",details:{realUserCount:"N/A",hasQueryError:!1,errorMessage:null}}}});try{const G=await(await fetch(`${I}/monitoring?type=network`)).json();l(Mc=>({...Mc,network:{latency:G.latency,status:G.status}}))}catch(pt){console.error("❌ Failed to fetch network metrics:",pt),l(G=>({...G,network:{latency:"unavailable",status:"error"}}))}try{const G=await(await fetch(`${I}/monitoring?type=usage-analytics`)).json();console.log("📊 Received usage analytics data:",G),d({activeUsers:{current:((Z=G.activeUsers)==null?void 0:Z.current)!==void 0?G.activeUsers.current:"--",peakToday:((le=G.activeUsers)==null?void 0:le.peakToday)!==void 0?G.activeUsers.peakToday:"--",peakHourLabel:"9:00 AM - 10:00 AM",recentlyActive:((je=G.activeUsers)==null?void 0:je.last24Hours)!==void 0?G.activeUsers.last24Hours:"--"},apiCallVolume:{requestsPerMinute:((pe=G.apiCalls)==null?void 0:pe.currentRate)!==void 0?G.apiCalls.currentRate:"--",requestsPerHour:((Xe=G.apiCalls)==null?void 0:Xe.currentRate)!==void 0?G.apiCalls.currentRate*60:"--",totalRequests:((ae=G.apiCalls)==null?void 0:ae.last24Hours)!==void 0?G.apiCalls.last24Hours:"--",mostUsedEndpoints:[{endpoint:"/api/system/monitoring",count:((xe=G.apiCalls)==null?void 0:xe.currentRate)||0}]},databaseOperations:{readOperations:((Ze=G.databaseOperations)==null?void 0:Ze.readOperations)!==void 0?G.databaseOperations.readOperations:"--",writeOperations:(($s=G.databaseOperations)==null?void 0:$s.writeOperations)!==void 0?G.databaseOperations.writeOperations:"--",queryCount:((Ut=G.databaseOperations)==null?void 0:Ut.queryCount)!==void 0?G.databaseOperations.queryCount:"--",totalUsers:((Mr=G.databaseOperations)==null?void 0:Mr.totalUsers)!==void 0?G.databaseOperations.totalUsers:"--"},storageUsage:{databaseSize:((Ci=G.storageUsage)==null?void 0:Ci.databaseSize)||"N/A",tableCount:((vm=G.storageUsage)==null?void 0:vm.tableCount)!==void 0?G.storageUsage.tableCount:"N/A",indexSize:((bm=G.storageUsage)==null?void 0:bm.indexSize)||"N/A",growthRate:((wm=G.storageUsage)==null?void 0:wm.growthRate)||"N/A"},status:"healthy"})}catch(pt){console.error("❌ Failed to fetch usage analytics:",pt),d(G=>({...G,status:"error"}))}try{const G=await(await fetch(`${I}/monitoring?type=error-monitoring`)).json();h({errorRates:{http4xx:((jm=G.errorTypes)==null?void 0:jm.http4xx)||"0",http5xx:((Nm=G.errorTypes)==null?void 0:Nm.http5xx)||"0",errorTrend:(((_m=G.last24Hours)==null?void 0:_m.totalErrors)>0,"stable"),totalErrorsToday:((km=G.last24Hours)==null?void 0:km.totalErrors)||"0"},failedOperations:{loginFailures:((Sm=G.errorTypes)==null?void 0:Sm.loginFailures)||"0",databaseTimeouts:((Cm=G.errorTypes)==null?void 0:Cm.databaseTimeouts)||"0",authenticationErrors:((Em=G.errorTypes)==null?void 0:Em.authenticationErrors)||"0",apiErrors:((Pm=G.errorTypes)==null?void 0:Pm.apiErrors)||"0"},systemAlerts:{criticalAlerts:((Am=G.last24Hours)==null?void 0:Am.criticalErrors)||"0",warningAlerts:((Lm=G.last24Hours)==null?void 0:Lm.warnings)||"0",lastCriticalAlert:(Tm=G.lastError)!=null&&Tm.timestamp?new Date(G.lastError.timestamp).toLocaleString():"--",alertStatus:((Mm=G.last24Hours)==null?void 0:Mm.criticalErrors)>0?"warning":"healthy"},recentErrors:G.lastError?[{type:G.lastError.level||"error",message:G.lastError.message||"Unknown error",timestamp:G.lastError.timestamp||new Date().toISOString()}]:[],status:"healthy"})}catch(pt){console.error("❌ Failed to fetch error monitoring data:",pt),h(G=>({...G,status:"error"}))}try{const G=await(await fetch(`${I}/monitoring?type=supabase-metrics`)).json();m({apiHealth:{responseTime:(Dm=G.queryPerformance)!=null&&Dm.avgResponseTime?`${G.queryPerformance.avgResponseTime}ms`:"--",rateLimits:"Normal",status:((Om=G.connectionPool)==null?void 0:Om.status)||"healthy",diagnostics:null},databaseConnections:{activeConnections:((Rm=G.connectionPool)==null?void 0:Rm.activeConnections)||"--",connectionPoolStatus:((Im=G.connectionPool)==null?void 0:Im.status)||"--",poolHealth:((Fm=G.connectionPool)==null?void 0:Fm.status)||"healthy",diagnostics:null},rowLevelSecurity:{policyPerformance:"Optimal",accessPatterns:"Secure",rlsStatus:"enabled",diagnostics:null},status:"healthy"})}catch(pt){console.error("❌ Failed to fetch Supabase metrics:",pt),m(G=>({...G,status:"error"}))}try{const G=await(await fetch(`${I}/monitoring?type=historical-data`)).json();console.log("📈 Received historical data:",G);const Mc=E(G);v(Mc)}catch(pt){console.error("❌ Failed to fetch historical data:",pt),v({userGrowth:{dailyGrowth:[],totalUsers:(($m=c.databaseOperations)==null?void 0:$m.totalUsers)||"--",growthRate:"+0%",last30Days:"0",last7Days:"0"},peakUsagePatterns:{byDayOfWeek:[],byHour:[],peakDay:"N/A",peakHour:"N/A"},growthMetrics:{userGrowthRate:"+0%",dataGrowthEstimate:"N/A",recentDataGrowth:"N/A",averageUsersPerDay:"0"},performanceOverTime:{avgResponseTime:[],errorRate:[]},summary:{trendsAvailable:!1,dataQuality:"error",totalDataPoints:0},status:"error"})}i(new Date)}catch(Lc){console.error("❌ Failed to fetch system metrics:",Lc),l(qn=>({serverStatus:{...qn.serverStatus,status:"error"},database:{...qn.database,status:"error"},network:qn.network})),h(qn=>({...qn,status:"error"}))}finally{g(!1)}},M=I=>{if(!I)return"text-slate-400";switch(I.toLowerCase()){case"healthy":case"good":case"normal":return"text-green-400";case"warning":return"text-yellow-400";case"critical":case"error":case"poor":return"text-red-400";default:return"text-slate-400"}},B=I=>{if(!I)return a.jsx(gs,{className:"h-5 w-5 text-slate-400"});switch(I.toLowerCase()){case"healthy":case"good":case"normal":return a.jsx(Fi,{className:"h-5 w-5 text-green-400"});case"warning":return a.jsx(ks,{className:"h-5 w-5 text-yellow-400"});case"critical":case"error":case"poor":return a.jsx(ks,{className:"h-5 w-5 text-red-400"});default:return a.jsx(gs,{className:"h-5 w-5 text-slate-400"})}},$=async I=>{const Z=y[I];b(le=>({...le,[I]:!le[I]})),Z||await U(I)},U=async I=>{const Z=S();try{console.log("🔍 Fetching diagnostics for section:",I);const je=await(await fetch(`${Z}/monitoring?type=supabase-metrics&diagnostics=true`)).json();console.log("📊 Diagnostics data received:",je.diagnostics),je.diagnostics?(m(pe=>({...pe,apiHealth:{...pe.apiHealth,diagnostics:je.diagnostics.apiHealth},databaseConnections:{...pe.databaseConnections,diagnostics:je.diagnostics.databaseConnections},rowLevelSecurity:{...pe.rowLevelSecurity,diagnostics:je.diagnostics.rowLevelSecurity}})),console.log("✅ Diagnostics updated successfully")):console.warn("⚠️ No diagnostics data in response")}catch(le){console.error("❌ Failed to fetch diagnostics:",le)}},ee=I=>{j(Z=>({...Z,[I]:!Z[I]}))},O=({sectionKey:I,title:Z,icon:le,isExpanded:je,children:pe,errorIndicator:Xe})=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>ee(I),className:"flex items-center space-x-2 hover:text-blue-300 transition-colors",children:[je?a.jsx($n,{className:"h-5 w-5 text-blue-400"}):a.jsx(Ia,{className:"h-5 w-5 text-blue-400"}),le,a.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:Z})]}),Xe]}),je&&pe]}),W=()=>{var pe,Xe,ae;const I=[(pe=o.serverStatus)==null?void 0:pe.status,(Xe=o.database)==null?void 0:Xe.status,(ae=o.network)==null?void 0:ae.status,c==null?void 0:c.status,u==null?void 0:u.status,f==null?void 0:f.status].filter(Boolean),Z=I.filter(xe=>xe==="error").length,le=I.filter(xe=>xe==="warning").length,je=I.filter(xe=>xe==="loading").length;return Z>0?"critical":le>1?"warning":je>0?"loading":"healthy"},K=I=>{switch(I){case"healthy":return"text-green-400";case"warning":return"text-yellow-400";case"critical":return"text-red-400";case"loading":return"text-blue-400";default:return"text-slate-400"}},H=I=>{switch(I){case"healthy":return a.jsx(Fi,{className:"h-12 w-12"});case"warning":return a.jsx(ks,{className:"h-12 w-12"});case"critical":return a.jsx(md,{className:"h-12 w-12"});case"loading":return a.jsx(gs,{className:"h-12 w-12 animate-pulse"});default:return a.jsx(ha,{className:"h-12 w-12"})}},T=I=>{switch(I){case"healthy":return"All systems operational";case"warning":return"Some systems need attention";case"critical":return"Critical issues detected";case"loading":return"Checking system status...";default:return"System status unknown"}},R=()=>{var Z,le,je,pe,Xe,ae,xe,Ze,$s,Ut,Mr,Ci;const I=[];return((Z=o.serverStatus)==null?void 0:Z.status)==="error"&&I.push({type:"critical",title:"Server Connection Failed",message:"Unable to connect to monitoring endpoints",icon:a.jsx(Lo,{className:"h-5 w-5"}),action:"Check server status"}),((le=o.database)==null?void 0:le.status)==="error"&&I.push({type:"critical",title:"Database Connection Issues",message:"Database health check failed",icon:a.jsx(As,{className:"h-5 w-5"}),action:"Verify database connection"}),((je=u.systemAlerts)==null?void 0:je.criticalAlerts)!=="--"&&parseInt(((pe=u.systemAlerts)==null?void 0:pe.criticalAlerts)||"0")>0&&I.push({type:"critical",title:`${(Xe=u.systemAlerts)==null?void 0:Xe.criticalAlerts} Critical System Alerts`,message:`Last critical: ${(ae=u.systemAlerts)==null?void 0:ae.lastCriticalAlert}`,icon:a.jsx(ks,{className:"h-5 w-5"}),action:"Review alert details"}),((xe=u.failedOperations)==null?void 0:xe.authenticationErrors)!=="--"&&parseInt(((Ze=u.failedOperations)==null?void 0:Ze.authenticationErrors)||"0")>5&&I.push({type:"warning",title:"High Authentication Failures",message:`${($s=u.failedOperations)==null?void 0:$s.authenticationErrors} auth errors detected`,icon:a.jsx(md,{className:"h-5 w-5"}),action:"Check authentication system"}),((Ut=u.failedOperations)==null?void 0:Ut.apiErrors)!=="--"&&parseInt(((Mr=u.failedOperations)==null?void 0:Mr.apiErrors)||"0")>10&&I.push({type:"warning",title:"High API Error Rate",message:`${(Ci=u.failedOperations)==null?void 0:Ci.apiErrors} API errors in recent period`,icon:a.jsx(Ou,{className:"h-5 w-5"}),action:"Investigate API issues"}),f&&f.status==="error"&&I.push({type:"warning",title:"Supabase Metrics Unavailable",message:"Unable to fetch Supabase-specific metrics",icon:a.jsx(As,{className:"h-5 w-5"}),action:"Check Supabase connection"}),I.slice(0,4)},Q=({title:I,diagnostics:Z,sectionKey:le})=>{const je=y[le],pe=Z!=null,Xe=je&&!pe;return a.jsxs("div",{className:"mt-4 border-t border-slate-700 pt-4",children:[a.jsxs("button",{onClick:()=>$(le),className:"flex items-center space-x-2 text-sm transition-colors text-slate-400 hover:text-slate-300",children:[je?a.jsx($n,{className:"h-4 w-4"}):a.jsx(Ia,{className:"h-4 w-4"}),a.jsx(nb,{className:"h-4 w-4"}),a.jsx("span",{children:Xe?"Loading diagnostics...":"Diagnostic Details"})]}),je&&a.jsx("div",{className:"mt-3 space-y-3",children:Xe?a.jsxs("div",{className:"flex items-center space-x-2 text-slate-500",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-400"}),a.jsx("span",{className:"text-sm",children:"Loading diagnostic data..."})]}):pe?a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"text-xs text-slate-500",children:[Z.totalTests&&`${Z.totalTests} tests performed`,Z.totalDbTests&&`${Z.totalDbTests} database tests performed`,Z.totalRlsTests&&`${Z.totalRlsTests} RLS tests performed`,Z.errorCount>0&&` • ${Z.errorCount} errors`,Z.slowTestCount>0&&` • ${Z.slowTestCount} slow tests`,Z.slowQueryCount>0&&` • ${Z.slowQueryCount} slow queries`]}),Z.issueType&&Z.issueType!=="none"&&a.jsxs("div",{className:"text-xs text-yellow-400",children:[a.jsx("span",{className:"font-semibold",children:"Issue Type:"})," ",Z.issueType]}),Z.poolHealthReason&&a.jsxs("div",{className:"text-xs text-slate-400",children:[a.jsx("span",{className:"font-semibold",children:"Pool Status:"})," ",Z.poolHealthReason]}),Z.rlsStatusReason&&a.jsxs("div",{className:"text-xs text-slate-400",children:[a.jsx("span",{className:"font-semibold",children:"RLS Status:"})," ",Z.rlsStatusReason]}),Z.individualTests&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-slate-400 mb-2",children:"Individual Test Results:"}),a.jsx("div",{className:"space-y-1",children:Z.individualTests.map((ae,xe)=>a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-slate-500",children:ae.name}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"font-mono text-slate-400",children:ae.responseTime}),a.jsx("span",{className:`px-2 py-1 rounded text-xs ${ae.status==="healthy"?"bg-green-900 text-green-300":ae.status==="slow"?"bg-yellow-900 text-yellow-300":"bg-red-900 text-red-300"}`,children:ae.status})]})]},xe))})]}),Z.roleDistribution&&Object.keys(Z.roleDistribution).length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-slate-400 mb-2",children:"Role Distribution:"}),a.jsx("div",{className:"space-y-1",children:Object.entries(Z.roleDistribution).map(([ae,xe])=>a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-slate-500",children:ae}),a.jsxs("span",{className:"text-slate-400",children:[xe," users"]})]},ae))})]})]}):a.jsx("div",{className:"text-xs text-slate-500",children:"No diagnostic data available"})})]})};return a.jsx(Ie,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(gs,{className:"h-8 w-8 text-blue-400"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"System Health"}),a.jsx("p",{className:"text-slate-400",children:"Infrastructure & Performance Monitoring"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:P,disabled:x,className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600 disabled:opacity-50 text-white rounded-lg transition-colors text-sm",title:"Refresh metrics",children:[a.jsx($i,{className:`h-4 w-4 ${x?"animate-spin":""}`}),a.jsx("span",{children:x?"Refreshing...":"Refresh"})]}),x&&a.jsxs("div",{className:"flex items-center space-x-2 text-blue-400",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-400"}),a.jsx("span",{className:"text-sm",children:"Fetching real data..."})]}),a.jsxs("div",{className:"text-sm text-slate-400",children:["Last updated: ",r.toLocaleTimeString()]})]})]}),a.jsxs("div",{className:"flex items-center justify-between bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[H(W()),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Overall System Health"}),a.jsx("p",{className:`text-sm ${K(W())}`,children:T(W())})]})]}),a.jsxs("div",{className:"text-sm text-slate-400",children:["Last checked: ",r.toLocaleTimeString()]})]}),R().length>0&&a.jsxs("div",{className:"bg-red-900/20 border border-red-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-red-400",children:[a.jsx(ha,{className:"h-5 w-5"}),a.jsxs("span",{className:"font-semibold",children:["Critical Alerts (",R().length,")"]})]}),a.jsx("div",{className:"text-xs text-red-300",children:"Requires immediate attention"})]}),a.jsx("div",{className:"space-y-3",children:R().map((I,Z)=>a.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-lg ${I.type==="critical"?"bg-red-900/30":"bg-yellow-900/30"}`,children:[a.jsx("div",{className:`flex-shrink-0 p-2 rounded-full ${I.type==="critical"?"bg-red-500 text-white":"bg-yellow-500 text-black"}`,children:I.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:`font-semibold ${I.type==="critical"?"text-red-200":"text-yellow-200"}`,children:I.title}),a.jsx("div",{className:"text-sm text-slate-300 mt-1",children:I.message}),a.jsxs("button",{className:`text-sm mt-2 hover:underline ${I.type==="critical"?"text-red-400":"text-yellow-400"}`,children:["→ ",I.action]})]})]},Z))})]}),R().length===0&&W()==="healthy"&&a.jsx("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[a.jsx(Fi,{className:"h-5 w-5"}),a.jsx("span",{className:"font-semibold",children:"No Critical Alerts"}),a.jsx("span",{className:"text-sm text-green-300",children:"• All systems operating normally"})]})}),a.jsx(O,{sectionKey:"infrastructure",title:"Infrastructure & Performance",icon:a.jsx(Lo,{className:"h-6 w-6 text-blue-400"}),isExpanded:k.infrastructure,errorIndicator:((ue=o.serverStatus)==null?void 0:ue.status)==="error"&&a.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[a.jsx(ks,{className:"h-4 w-4"}),a.jsx("span",{children:"Unable to connect to monitoring endpoints"})]}),children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Lo,{className:"h-5 w-5 text-blue-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Server Status"})]}),B((me=o.serverStatus)==null?void 0:me.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Uptime"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Ae=o.serverStatus)==null?void 0:Ae.uptime)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Response Time"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((nt=o.serverStatus)==null?void 0:nt.responseTime)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Status"}),a.jsx("span",{className:`font-semibold capitalize ${M((rt=o.serverStatus)==null?void 0:rt.status)}`,children:((Et=o.serverStatus)==null?void 0:Et.status)||"--"})]})})]})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(As,{className:"h-5 w-5 text-green-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Database Health"})]}),B((Pt=o.database)==null?void 0:Pt.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Query Time"}),a.jsx("span",{className:"text-slate-100 font-mono",children:(($e=o.database)==null?void 0:$e.queryTime)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Connections"}),a.jsx("span",{className:"text-slate-100 font-mono",children:"Managed by Platform"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Slow Queries"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((es=o.database)==null?void 0:es.slowQueries)||"--"})]})})]})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(iS,{className:"h-5 w-5 text-purple-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Network"})]}),B((V=o.network)==null?void 0:V.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Latency"}),a.jsx("span",{className:"text-slate-100 font-mono text-lg font-bold",children:((oe=o.network)==null?void 0:oe.latency)||"--"})]}),a.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${((ke=o.network)==null?void 0:ke.status)==="good"?"bg-green-400":((Le=o.network)==null?void 0:Le.status)==="warning"?"bg-yellow-400":"bg-red-400"}`,style:{width:((ts=o.network)==null?void 0:ts.status)==="good"?"25%":((ze=o.network)==null?void 0:ze.status)==="warning"?"60%":"90%"}})})]}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Status"}),a.jsx("span",{className:`font-semibold capitalize ${M((cn=o.network)==null?void 0:cn.status)}`,children:((q=o.network)==null?void 0:q.status)||"--"})]})})]})]})]})}),a.jsx(O,{sectionKey:"errors",title:"Error Monitoring",icon:a.jsx(ha,{className:"h-6 w-6 text-red-400"}),isExpanded:k.errors,errorIndicator:u.status==="error"&&a.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[a.jsx(ks,{className:"h-4 w-4"}),a.jsx("span",{children:"Unable to fetch error monitoring data"})]}),children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(nS,{className:"h-5 w-5 text-red-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Error Rates"})]}),B(u.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"4xx Errors"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((be=u.errorRates)==null?void 0:be.http4xx)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"5xx Errors"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Oe=u.errorRates)==null?void 0:Oe.http5xx)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Total Today"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Ye=u.errorRates)==null?void 0:Ye.totalErrorsToday)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Trend"}),a.jsx("span",{className:`font-mono text-xs capitalize ${((zt=u.errorRates)==null?void 0:zt.errorTrend)==="improving"?"text-green-400":((Sr=u.errorRates)==null?void 0:Sr.errorTrend)==="stable"?"text-yellow-400":"text-red-400"}`,children:((Cr=u.errorRates)==null?void 0:Cr.errorTrend)||"--"})]})})]})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(md,{className:"h-5 w-5 text-orange-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Failed Operations"})]}),B(u.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Login Failures"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Er=u.failedOperations)==null?void 0:Er.loginFailures)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"DB Timeouts"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Pr=u.failedOperations)==null?void 0:Pr.databaseTimeouts)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Auth Errors"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Ar=u.failedOperations)==null?void 0:Ar.authenticationErrors)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"API Errors"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((mt=u.failedOperations)==null?void 0:mt.apiErrors)||"--"})]})})]})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ks,{className:"h-5 w-5 text-yellow-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"System Alerts"})]}),B((Lr=u.systemAlerts)==null?void 0:Lr.alertStatus)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Critical"}),a.jsx("span",{className:"text-red-400 font-mono font-bold",children:((Tr=u.systemAlerts)==null?void 0:Tr.criticalAlerts)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Warnings"}),a.jsx("span",{className:"text-yellow-400 font-mono",children:((D=u.systemAlerts)==null?void 0:D.warningAlerts)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Status"}),a.jsx("span",{className:`font-semibold capitalize ${M((te=u.systemAlerts)==null?void 0:te.alertStatus)}`,children:((A=u.systemAlerts)==null?void 0:A.alertStatus)||"--"})]})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Last Critical:"}),a.jsx("div",{className:"text-xs text-slate-300 font-mono",children:((Y=u.systemAlerts)==null?void 0:Y.lastCriticalAlert)||"--"})]})]})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(qk,{className:"h-5 w-5 text-purple-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Recent Error Log"})]}),B(u.status)]}),a.jsxs("div",{className:"space-y-2",children:[u.recentErrors&&u.recentErrors.length>0?u.recentErrors.slice(0,4).map((I,Z)=>a.jsxs("div",{className:"border-l-2 border-red-400 pl-3 py-1",children:[a.jsx("div",{className:"text-xs text-red-400 font-mono",children:I.type}),a.jsx("div",{className:"text-xs text-slate-300 truncate",children:I.message}),a.jsx("div",{className:"text-xs text-slate-500",children:I.timestamp})]},Z)):a.jsxs("div",{className:"text-center py-4",children:[a.jsx(Fi,{className:"h-8 w-8 text-green-400 mx-auto mb-2"}),a.jsx("div",{className:"text-sm text-green-400",children:"No recent errors"}),a.jsx("div",{className:"text-xs text-slate-400",children:"System running smoothly"})]}),u.recentErrors&&u.recentErrors.length>4&&a.jsxs("div",{className:"text-xs text-slate-400 text-center pt-2 border-t border-slate-700",children:["+",u.recentErrors.length-4," more errors"]})]})]})]})}),a.jsx(O,{sectionKey:"supabaseMetrics",title:"Supabase Specific Metrics",icon:a.jsx(As,{className:"h-6 w-6 text-purple-400"}),isExpanded:k.supabaseMetrics,errorIndicator:f&&f.status==="error"&&a.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[a.jsx(ks,{className:"h-4 w-4"}),a.jsx("span",{children:"Unable to fetch Supabase metrics"})]}),children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Lo,{className:"h-5 w-5 text-purple-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Supabase API Health"})]}),B((re=f.apiHealth)==null?void 0:re.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Response Times"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((We=f.apiHealth)==null?void 0:We.responseTime)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Rate Limits"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((dn=f.apiHealth)==null?void 0:dn.rateLimits)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Status"}),a.jsx("span",{className:`font-semibold capitalize ${M((no=f.apiHealth)==null?void 0:no.status)}`,children:((_f=f.apiHealth)==null?void 0:_f.status)||"--"})]})})]}),a.jsx(Q,{title:"API Health Diagnostics",diagnostics:(kf=f.apiHealth)==null?void 0:kf.diagnostics,sectionKey:"apiHealth"})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(As,{className:"h-5 w-5 text-blue-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Database Connections"})]}),B((Sf=f.databaseConnections)==null?void 0:Sf.poolHealth)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Active Connections"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Cf=f.databaseConnections)==null?void 0:Cf.activeConnections)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Connection Pool Status"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Ef=f.databaseConnections)==null?void 0:Ef.connectionPoolStatus)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Pool Health"}),a.jsx("span",{className:`font-semibold capitalize ${M((Pf=f.databaseConnections)==null?void 0:Pf.poolHealth)}`,children:((Af=f.databaseConnections)==null?void 0:Af.poolHealth)||"--"})]})})]}),a.jsx(Q,{title:"Database Connection Diagnostics",diagnostics:(Lf=f.databaseConnections)==null?void 0:Lf.diagnostics,sectionKey:"databaseConnections"})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(gs,{className:"h-5 w-5 text-green-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Row Level Security"})]}),B((Tf=f.rowLevelSecurity)==null?void 0:Tf.rlsStatus)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Policy Performance"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Mf=f.rowLevelSecurity)==null?void 0:Mf.policyPerformance)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Access Patterns"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Df=f.rowLevelSecurity)==null?void 0:Df.accessPatterns)||"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"RLS Status"}),a.jsx("span",{className:`font-semibold capitalize ${M((Of=f.rowLevelSecurity)==null?void 0:Of.rlsStatus)}`,children:((Rf=f.rowLevelSecurity)==null?void 0:Rf.rlsStatus)||"--"})]})})]}),a.jsx(Q,{title:"RLS Diagnostics",diagnostics:(If=f.rowLevelSecurity)==null?void 0:If.diagnostics,sectionKey:"rowLevelSecurity"})]})]})}),a.jsx(O,{sectionKey:"userAnalytics",title:"Usage Analytics",icon:a.jsx(Eo,{className:"h-6 w-6 text-purple-400"}),isExpanded:k.userAnalytics,errorIndicator:c&&c.status==="error"&&a.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[a.jsx(ks,{className:"h-4 w-4"}),a.jsx("span",{children:"Unable to fetch usage analytics"})]}),children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lt,{className:"h-5 w-5 text-blue-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Active Users"})]}),B(c==null?void 0:c.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Current Online"}),a.jsx("span",{className:"text-slate-100 font-mono text-lg font-bold",children:((Ff=c.activeUsers)==null?void 0:Ff.current)!==void 0?c.activeUsers.current:"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Peak Today"}),a.jsx("span",{className:"text-slate-100 font-mono",children:(($f=c.activeUsers)==null?void 0:$f.peakToday)!==void 0?c.activeUsers.peakToday:"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Peak Hour"}),a.jsx("span",{className:"text-slate-100 font-mono text-xs",children:((zf=c.activeUsers)==null?void 0:zf.peakHourLabel)||"Loading..."})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Recently Active"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Uf=c.activeUsers)==null?void 0:Uf.recentlyActive)!==void 0?c.activeUsers.recentlyActive:"--"})]})})]})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ou,{className:"h-5 w-5 text-yellow-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"API Calls"})]}),B(c==null?void 0:c.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Per Minute"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Bf=c.apiCallVolume)==null?void 0:Bf.requestsPerMinute)!==void 0?c.apiCallVolume.requestsPerMinute:"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Per Hour"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Hf=c.apiCallVolume)==null?void 0:Hf.requestsPerHour)!==void 0?c.apiCallVolume.requestsPerHour:"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Total Today"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Wf=c.apiCallVolume)==null?void 0:Wf.totalRequests)!==void 0?c.apiCallVolume.totalRequests:"--"})]})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Most Used:"}),a.jsx("div",{className:"text-xs text-slate-300 font-mono truncate",children:((qf=(Vf=c.apiCallVolume)==null?void 0:Vf.mostUsedEndpoints)==null?void 0:qf.length)>0?((Kf=(Gf=c.apiCallVolume.mostUsedEndpoints[0])==null?void 0:Gf.endpoint)==null?void 0:Kf.split("/").pop())||"N/A":"Loading..."})]})]})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(As,{className:"h-5 w-5 text-green-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"DB Operations"})]}),B(c==null?void 0:c.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Read Ops"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Yf=c.databaseOperations)==null?void 0:Yf.readOperations)!==void 0?c.databaseOperations.readOperations:"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Write Ops"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Jf=c.databaseOperations)==null?void 0:Jf.writeOperations)!==void 0?c.databaseOperations.writeOperations:"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Total Queries"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Qf=c.databaseOperations)==null?void 0:Qf.queryCount)!==void 0?c.databaseOperations.queryCount:"--"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Total Users"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Xf=c.databaseOperations)==null?void 0:Xf.totalUsers)!==void 0?c.databaseOperations.totalUsers:"--"})]})})]})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Gk,{className:"h-5 w-5 text-orange-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Storage"})]}),B(c==null?void 0:c.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Database Size"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((Zf=c.storageUsage)==null?void 0:Zf.databaseSize)||"Loading..."})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Tables"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((em=c.storageUsage)==null?void 0:em.tableCount)||"Loading..."})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Index Size"}),a.jsx("span",{className:"text-slate-100 font-mono",children:((tm=c.storageUsage)==null?void 0:tm.indexSize)||"Loading..."})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Growth Rate"}),a.jsx("span",{className:"text-green-400 font-mono text-xs",children:((sm=c.storageUsage)==null?void 0:sm.growthRate)||"Loading..."})]})})]})]})]})}),a.jsxs(O,{sectionKey:"historicalTrends",title:"Trends & Historical Data",icon:a.jsx(Eo,{className:"h-6 w-6 text-indigo-400"}),isExpanded:k.historicalTrends,errorIndicator:p&&p.status==="error"&&a.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[a.jsx(ks,{className:"h-4 w-4"}),a.jsx("span",{children:"Unable to fetch historical data"})]}),children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(lt,{className:"h-5 w-5 text-blue-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Total Users"})]}),a.jsx($i,{className:"h-5 w-5 text-blue-400"})]}),a.jsx("div",{className:"text-2xl font-bold text-slate-100 mb-2",children:((nm=p.userGrowth)==null?void 0:nm.totalUsers)||"--"}),a.jsxs("div",{className:"text-sm text-slate-400",children:["+",((rm=p.userGrowth)==null?void 0:rm.last7Days)||"--"," this week"]})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx($i,{className:"h-5 w-5 text-green-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Growth Rate"})]}),a.jsx($i,{className:"h-5 w-5 text-green-400"})]}),a.jsx("div",{className:"text-2xl font-bold text-slate-100 mb-2",children:((im=p.userGrowth)==null?void 0:im.growthRate)||"--"}),a.jsx("div",{className:"text-sm text-slate-400",children:"Last 30 days"})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Po,{className:"h-5 w-5 text-purple-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Peak Day"})]}),a.jsx(Po,{className:"h-5 w-5 text-purple-400"})]}),a.jsx("div",{className:"text-2xl font-bold text-slate-100 mb-2",children:((am=p.peakUsagePatterns)==null?void 0:am.peakDay)||"--"}),a.jsx("div",{className:"text-sm text-slate-400",children:"Most registrations"})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ao,{className:"h-5 w-5 text-orange-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Peak Hour"})]}),a.jsx(Ao,{className:"h-5 w-5 text-orange-400"})]}),a.jsx("div",{className:"text-2xl font-bold text-slate-100 mb-2",children:((om=p.peakUsagePatterns)==null?void 0:om.peakHour)||"--"}),a.jsx("div",{className:"text-sm text-slate-400",children:"Busiest time"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[a.jsx($i,{className:"h-5 w-5 text-blue-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"User Growth Over Time"})]}),(lm=p.userGrowth)!=null&&lm.dailyGrowth&&p.userGrowth.dailyGrowth.length>0?a.jsx("div",{className:"h-64",children:a.jsx(Pd,{data:{labels:p.userGrowth.dailyGrowth.map(I=>new Date(I.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Total Users",data:p.userGrowth.dailyGrowth.map(I=>I.totalUsers),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4},{label:"New Users",data:p.userGrowth.dailyGrowth.map(I=>I.newUsers),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",fill:!1,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(148, 163, 184)"}}},scales:{x:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}},y:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}}}}})}):a.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Eo,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Loading growth data..."})]})})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[a.jsx(Po,{className:"h-5 w-5 text-purple-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Peak Usage by Day"})]}),(cm=p.peakUsagePatterns)!=null&&cm.byDayOfWeek&&p.peakUsagePatterns.byDayOfWeek.length>0?a.jsx("div",{className:"h-64",children:a.jsx(HA,{data:{labels:p.peakUsagePatterns.byDayOfWeek.map(I=>I.day),datasets:[{label:"User Registrations",data:p.peakUsagePatterns.byDayOfWeek.map(I=>I.registrations),backgroundColor:"rgba(147, 51, 234, 0.6)",borderColor:"rgb(147, 51, 234)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(148, 163, 184)"}}},scales:{x:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}},y:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}}}}})}):a.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Po,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Loading usage patterns..."})]})})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[a.jsx(gs,{className:"h-5 w-5 text-green-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Performance Over Time"})]}),(dm=p.performanceOverTime)!=null&&dm.avgResponseTime&&p.performanceOverTime.avgResponseTime.length>0?a.jsx("div",{className:"h-64",children:a.jsx(Pd,{data:{labels:p.performanceOverTime.avgResponseTime.map(I=>new Date(I.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Avg Response Time (ms)",data:p.performanceOverTime.avgResponseTime.map(I=>I.responseTime),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",fill:!1,tension:.4,yAxisID:"y"},{label:"Error Rate (%)",data:((um=p.performanceOverTime.errorRate)==null?void 0:um.map(I=>I.errorRate))||[],borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",fill:!1,tension:.4,yAxisID:"y1"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(148, 163, 184)"}}},scales:{x:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}},y:{type:"linear",display:!0,position:"left",ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}},y1:{type:"linear",display:!0,position:"right",ticks:{color:"rgb(148, 163, 184)"},grid:{drawOnChartArea:!1}}}}})}):a.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:a.jsxs("div",{className:"text-center",children:[a.jsx(gs,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Loading performance data..."})]})})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[a.jsx(Ao,{className:"h-5 w-5 text-orange-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Peak Usage by Hour"})]}),(hm=p.peakUsagePatterns)!=null&&hm.byHour&&p.peakUsagePatterns.byHour.length>0?a.jsx("div",{className:"h-64",children:a.jsx(Pd,{data:{labels:p.peakUsagePatterns.byHour.map(I=>I.hour),datasets:[{label:"User Registrations",data:p.peakUsagePatterns.byHour.map(I=>I.registrations),borderColor:"rgb(251, 146, 60)",backgroundColor:"rgba(251, 146, 60, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(148, 163, 184)"}}},scales:{x:{ticks:{color:"rgb(148, 163, 184)",maxTicksLimit:12},grid:{color:"rgba(148, 163, 184, 0.1)"}},y:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}}}}})}):a.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:a.jsxs("div",{className:"text-center",children:[a.jsx(Ao,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Loading hourly patterns..."})]})})]})]}),a.jsxs(ce,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[a.jsx(Eo,{className:"h-5 w-5 text-indigo-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Growth Metrics Summary"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Average Users Per Day"}),a.jsx("div",{className:"text-xl font-semibold text-slate-100",children:((fm=p.growthMetrics)==null?void 0:fm.averageUsersPerDay)||"--"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Data Growth Estimate"}),a.jsx("div",{className:"text-xl font-semibold text-slate-100",children:((mm=p.growthMetrics)==null?void 0:mm.dataGrowthEstimate)||"--"})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Recent Data Growth"}),a.jsx("div",{className:"text-xl font-semibold text-slate-100",children:((pm=p.growthMetrics)==null?void 0:pm.recentDataGrowth)||"--"})]})]}),((gm=p.summary)==null?void 0:gm.dataQuality)==="real_data"&&a.jsx("div",{className:"mt-4 p-3 bg-green-900/20 border border-green-700 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-2 text-green-400 text-sm",children:[a.jsx(Fi,{className:"h-4 w-4"}),a.jsxs("span",{children:["Displaying real data from ",((xm=p.summary)==null?void 0:xm.totalDataPoints)||0," data points",((ym=p.summary)==null?void 0:ym.oldestRecord)&&` • Since ${new Date(p.summary.oldestRecord).toLocaleDateString()}`]})]})})]})]})]})})},Us=({children:t})=>{const{isAuthenticated:e,loading:s}=Fs(),n=$t();return s?(console.log("🔄 ProtectedRoute - Still loading auth state..."),a.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(rb,{className:"h-8 w-8 animate-spin text-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-400",children:"Loading..."}),a.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Checking authentication..."})]})})):e?t:a.jsx(_u,{to:"/auth",state:{from:n},replace:!0})};function VA(){const{pathname:t}=$t();return w.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function qA(){return a.jsx(Ik,{children:a.jsx(Ok,{children:a.jsxs(l_,{children:[a.jsx(VA,{}),a.jsxs(IN,{children:[a.jsx(Bt,{path:"/auth",element:a.jsx(oS,{})}),a.jsx(Bt,{path:"/dashboard",element:a.jsx(Us,{children:a.jsx(OS,{})})}),a.jsx(Bt,{path:"/formulas",element:a.jsx(Us,{children:a.jsx(IS,{})})}),a.jsx(Bt,{path:"/formulas/:formulaId",element:a.jsx(Us,{children:a.jsx(FS,{})})}),a.jsx(Bt,{path:"/suppliers",element:a.jsx(Us,{children:a.jsx(BS,{})})}),a.jsx(Bt,{path:"/raw-materials",element:a.jsx(Us,{children:a.jsx(WS,{})})}),a.jsx(Bt,{path:"/raw-materials/:materialId",element:a.jsx(Us,{children:a.jsx(qS,{})})}),a.jsx(Bt,{path:"/user-management",element:a.jsx(Us,{children:a.jsx(JS,{})})}),a.jsx(Bt,{path:"/system-health",element:a.jsx(Us,{children:a.jsx(WA,{})})}),a.jsx(Bt,{path:"/settings",element:a.jsx(Us,{children:a.jsx(QS,{})})}),a.jsx(Bt,{path:"/",element:a.jsx(_u,{to:"/dashboard"})}),a.jsx(Bt,{path:"/login",element:a.jsx(_u,{to:"/auth",replace:!0})})]})]})})})}Ad.createRoot(document.getElementById("root")).render(a.jsx(Xl.StrictMode,{children:a.jsx(qA,{})}));
