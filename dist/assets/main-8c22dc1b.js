var uw=Object.defineProperty;var hw=(t,e,s)=>e in t?uw(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var ne=(t,e,s)=>(hw(t,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const a of r)if(a.type==="childList")for(const o of a.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const a={};return r.integrity&&(a.integrity=r.integrity),r.referrerPolicy&&(a.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?a.credentials="include":r.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function n(r){if(r.ep)return;r.ep=!0;const a=s(r);fetch(r.href,a)}})();var cs=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function fw(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function mw(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),s}var rx={exports:{}},ec={},ax={exports:{}},pe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Yi=Symbol.for("react.element"),pw=Symbol.for("react.portal"),gw=Symbol.for("react.fragment"),xw=Symbol.for("react.strict_mode"),yw=Symbol.for("react.profiler"),vw=Symbol.for("react.provider"),bw=Symbol.for("react.context"),ww=Symbol.for("react.forward_ref"),jw=Symbol.for("react.suspense"),Nw=Symbol.for("react.memo"),_w=Symbol.for("react.lazy"),Wm=Symbol.iterator;function kw(t){return t===null||typeof t!="object"?null:(t=Wm&&t[Wm]||t["@@iterator"],typeof t=="function"?t:null)}var ix={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},ox=Object.assign,lx={};function ka(t,e,s){this.props=t,this.context=e,this.refs=lx,this.updater=s||ix}ka.prototype.isReactComponent={};ka.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};ka.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function cx(){}cx.prototype=ka.prototype;function Xu(t,e,s){this.props=t,this.context=e,this.refs=lx,this.updater=s||ix}var Zu=Xu.prototype=new cx;Zu.constructor=Xu;ox(Zu,ka.prototype);Zu.isPureReactComponent=!0;var Vm=Array.isArray,dx=Object.prototype.hasOwnProperty,eh={current:null},ux={key:!0,ref:!0,__self:!0,__source:!0};function hx(t,e,s){var n,r={},a=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(a=""+e.key),e)dx.call(e,n)&&!ux.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(l===1)r.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:Yi,type:t,key:a,ref:o,props:r,_owner:eh.current}}function Sw(t,e){return{$$typeof:Yi,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function th(t){return typeof t=="object"&&t!==null&&t.$$typeof===Yi}function Cw(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var qm=/\/+/g;function Fc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Cw(""+t.key):e.toString(36)}function Jo(t,e,s,n,r){var a=typeof t;(a==="undefined"||a==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(a){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case Yi:case pw:o=!0}}if(o)return o=t,r=r(o),t=n===""?"."+Fc(o,0):n,Vm(r)?(s="",t!=null&&(s=t.replace(qm,"$&/")+"/"),Jo(r,e,s,"",function(d){return d})):r!=null&&(th(r)&&(r=Sw(r,s+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(qm,"$&/")+"/")+t)),e.push(r)),1;if(o=0,n=n===""?".":n+":",Vm(t))for(var l=0;l<t.length;l++){a=t[l];var c=n+Fc(a,l);o+=Jo(a,e,s,c,r)}else if(c=kw(t),typeof c=="function")for(t=c.call(t),l=0;!(a=t.next()).done;)a=a.value,c=n+Fc(a,l++),o+=Jo(a,e,s,c,r);else if(a==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function oo(t,e,s){if(t==null)return t;var n=[],r=0;return Jo(t,n,"","",function(a){return e.call(s,a,r++)}),n}function Pw(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var At={current:null},Qo={transition:null},Ew={ReactCurrentDispatcher:At,ReactCurrentBatchConfig:Qo,ReactCurrentOwner:eh};function fx(){throw Error("act(...) is not supported in production builds of React.")}pe.Children={map:oo,forEach:function(t,e,s){oo(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return oo(t,function(){e++}),e},toArray:function(t){return oo(t,function(e){return e})||[]},only:function(t){if(!th(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};pe.Component=ka;pe.Fragment=gw;pe.Profiler=yw;pe.PureComponent=Xu;pe.StrictMode=xw;pe.Suspense=jw;pe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Ew;pe.act=fx;pe.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=ox({},t.props),r=t.key,a=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(a=e.ref,o=eh.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)dx.call(e,c)&&!ux.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:Yi,type:t.type,key:r,ref:a,props:n,_owner:o}};pe.createContext=function(t){return t={$$typeof:bw,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:vw,_context:t},t.Consumer=t};pe.createElement=hx;pe.createFactory=function(t){var e=hx.bind(null,t);return e.type=t,e};pe.createRef=function(){return{current:null}};pe.forwardRef=function(t){return{$$typeof:ww,render:t}};pe.isValidElement=th;pe.lazy=function(t){return{$$typeof:_w,_payload:{_status:-1,_result:t},_init:Pw}};pe.memo=function(t,e){return{$$typeof:Nw,type:t,compare:e===void 0?null:e}};pe.startTransition=function(t){var e=Qo.transition;Qo.transition={};try{t()}finally{Qo.transition=e}};pe.unstable_act=fx;pe.useCallback=function(t,e){return At.current.useCallback(t,e)};pe.useContext=function(t){return At.current.useContext(t)};pe.useDebugValue=function(){};pe.useDeferredValue=function(t){return At.current.useDeferredValue(t)};pe.useEffect=function(t,e){return At.current.useEffect(t,e)};pe.useId=function(){return At.current.useId()};pe.useImperativeHandle=function(t,e,s){return At.current.useImperativeHandle(t,e,s)};pe.useInsertionEffect=function(t,e){return At.current.useInsertionEffect(t,e)};pe.useLayoutEffect=function(t,e){return At.current.useLayoutEffect(t,e)};pe.useMemo=function(t,e){return At.current.useMemo(t,e)};pe.useReducer=function(t,e,s){return At.current.useReducer(t,e,s)};pe.useRef=function(t){return At.current.useRef(t)};pe.useState=function(t){return At.current.useState(t)};pe.useSyncExternalStore=function(t,e,s){return At.current.useSyncExternalStore(t,e,s)};pe.useTransition=function(){return At.current.useTransition()};pe.version="18.3.1";ax.exports=pe;var w=ax.exports;const tc=fw(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Aw=w,Tw=Symbol.for("react.element"),Lw=Symbol.for("react.fragment"),Mw=Object.prototype.hasOwnProperty,Dw=Aw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Ow={key:!0,ref:!0,__self:!0,__source:!0};function mx(t,e,s){var n,r={},a=null,o=null;s!==void 0&&(a=""+s),e.key!==void 0&&(a=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Mw.call(e,n)&&!Ow.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:Tw,type:t,key:a,ref:o,props:r,_owner:Dw.current}}ec.Fragment=Lw;ec.jsx=mx;ec.jsxs=mx;rx.exports=ec;var i=rx.exports,Dd={},px={exports:{}},ts={},gx={exports:{}},xx={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(R,V){var G=R.length;R.push(V);e:for(;0<G;){var H=G-1>>>1,K=R[H];if(0<r(K,V))R[H]=V,R[G]=K,G=H;else break e}}function s(R){return R.length===0?null:R[0]}function n(R){if(R.length===0)return null;var V=R[0],G=R.pop();if(G!==V){R[0]=G;e:for(var H=0,K=R.length,ee=K>>>1;H<ee;){var ae=2*(H+1)-1,ge=R[ae],xe=ae+1,Me=R[xe];if(0>r(ge,G))xe<K&&0>r(Me,ge)?(R[H]=Me,R[xe]=G,H=xe):(R[H]=ge,R[ae]=G,H=ae);else if(xe<K&&0>r(Me,G))R[H]=Me,R[xe]=G,H=xe;else break e}}return V}function r(R,V){var G=R.sortIndex-V.sortIndex;return G!==0?G:R.id-V.id}if(typeof performance=="object"&&typeof performance.now=="function"){var a=performance;t.unstable_now=function(){return a.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,m=!1,p=!1,y=!1,x=typeof setTimeout=="function"?setTimeout:null,g=typeof clearTimeout=="function"?clearTimeout:null,v=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(R){for(var V=s(d);V!==null;){if(V.callback===null)n(d);else if(V.startTime<=R)n(d),V.sortIndex=V.expirationTime,e(c,V);else break;V=s(d)}}function k(R){if(y=!1,b(R),!p)if(s(c)!==null)p=!0,U(j);else{var V=s(d);V!==null&&Z(k,V.startTime-R)}}function j(R,V){p=!1,y&&(y=!1,g(_),_=-1),m=!0;var G=f;try{for(b(V),h=s(c);h!==null&&(!(h.expirationTime>V)||R&&!L());){var H=h.callback;if(typeof H=="function"){h.callback=null,f=h.priorityLevel;var K=H(h.expirationTime<=V);V=t.unstable_now(),typeof K=="function"?h.callback=K:h===s(c)&&n(c),b(V)}else n(c);h=s(c)}if(h!==null)var ee=!0;else{var ae=s(d);ae!==null&&Z(k,ae.startTime-V),ee=!1}return ee}finally{h=null,f=G,m=!1}}var S=!1,C=null,_=-1,P=5,N=-1;function L(){return!(t.unstable_now()-N<P)}function A(){if(C!==null){var R=t.unstable_now();N=R;var V=!0;try{V=C(!0,R)}finally{V?E():(S=!1,C=null)}}else S=!1}var E;if(typeof v=="function")E=function(){v(A)};else if(typeof MessageChannel<"u"){var D=new MessageChannel,F=D.port2;D.port1.onmessage=A,E=function(){F.postMessage(null)}}else E=function(){x(A,0)};function U(R){C=R,S||(S=!0,E())}function Z(R,V){_=x(function(){R(t.unstable_now())},V)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(R){R.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,U(j))},t.unstable_forceFrameRate=function(R){0>R||125<R?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):P=0<R?Math.floor(1e3/R):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(R){switch(f){case 1:case 2:case 3:var V=3;break;default:V=f}var G=f;f=V;try{return R()}finally{f=G}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(R,V){switch(R){case 1:case 2:case 3:case 4:case 5:break;default:R=3}var G=f;f=R;try{return V()}finally{f=G}},t.unstable_scheduleCallback=function(R,V,G){var H=t.unstable_now();switch(typeof G=="object"&&G!==null?(G=G.delay,G=typeof G=="number"&&0<G?H+G:H):G=H,R){case 1:var K=-1;break;case 2:K=250;break;case 5:K=1073741823;break;case 4:K=1e4;break;default:K=5e3}return K=G+K,R={id:u++,callback:V,priorityLevel:R,startTime:G,expirationTime:K,sortIndex:-1},G>H?(R.sortIndex=G,e(d,R),s(c)===null&&R===s(d)&&(y?(g(_),_=-1):y=!0,Z(k,G-H))):(R.sortIndex=K,e(c,R),p||m||(p=!0,U(j))),R},t.unstable_shouldYield=L,t.unstable_wrapCallback=function(R){var V=f;return function(){var G=f;f=V;try{return R.apply(this,arguments)}finally{f=G}}}})(xx);gx.exports=xx;var Iw=gx.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Rw=w,es=Iw;function z(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var yx=new Set,Ni={};function Nr(t,e){da(t,e),da(t+"Capture",e)}function da(t,e){for(Ni[t]=e,t=0;t<e.length;t++)yx.add(e[t])}var rn=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),Od=Object.prototype.hasOwnProperty,Fw=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,Gm={},Km={};function $w(t){return Od.call(Km,t)?!0:Od.call(Gm,t)?!1:Fw.test(t)?Km[t]=!0:(Gm[t]=!0,!1)}function zw(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Uw(t,e,s,n){if(e===null||typeof e>"u"||zw(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function Tt(t,e,s,n,r,a,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=a,this.removeEmptyString=o}var pt={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){pt[t]=new Tt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];pt[e]=new Tt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){pt[t]=new Tt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){pt[t]=new Tt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){pt[t]=new Tt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){pt[t]=new Tt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){pt[t]=new Tt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){pt[t]=new Tt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){pt[t]=new Tt(t,5,!1,t.toLowerCase(),null,!1,!1)});var sh=/[\-:]([a-z])/g;function nh(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(sh,nh);pt[e]=new Tt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(sh,nh);pt[e]=new Tt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(sh,nh);pt[e]=new Tt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){pt[t]=new Tt(t,1,!1,t.toLowerCase(),null,!1,!1)});pt.xlinkHref=new Tt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){pt[t]=new Tt(t,1,!1,t.toLowerCase(),null,!0,!0)});function rh(t,e,s,n){var r=pt.hasOwnProperty(e)?pt[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Uw(e,s,r,n)&&(s=null),n||r===null?$w(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):r.mustUseProperty?t[r.propertyName]=s===null?r.type===3?!1:"":s:(e=r.attributeName,n=r.attributeNamespace,s===null?t.removeAttribute(e):(r=r.type,s=r===3||r===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var un=Rw.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,lo=Symbol.for("react.element"),Hr=Symbol.for("react.portal"),Wr=Symbol.for("react.fragment"),ah=Symbol.for("react.strict_mode"),Id=Symbol.for("react.profiler"),vx=Symbol.for("react.provider"),bx=Symbol.for("react.context"),ih=Symbol.for("react.forward_ref"),Rd=Symbol.for("react.suspense"),Fd=Symbol.for("react.suspense_list"),oh=Symbol.for("react.memo"),gn=Symbol.for("react.lazy"),wx=Symbol.for("react.offscreen"),Ym=Symbol.iterator;function Oa(t){return t===null||typeof t!="object"?null:(t=Ym&&t[Ym]||t["@@iterator"],typeof t=="function"?t:null)}var He=Object.assign,$c;function Xa(t){if($c===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);$c=e&&e[1]||""}return`
`+$c+t}var zc=!1;function Uc(t,e){if(!t||zc)return"";zc=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),a=n.stack.split(`
`),o=r.length-1,l=a.length-1;1<=o&&0<=l&&r[o]!==a[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==a[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==a[l]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{zc=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?Xa(t):""}function Bw(t){switch(t.tag){case 5:return Xa(t.type);case 16:return Xa("Lazy");case 13:return Xa("Suspense");case 19:return Xa("SuspenseList");case 0:case 2:case 15:return t=Uc(t.type,!1),t;case 11:return t=Uc(t.type.render,!1),t;case 1:return t=Uc(t.type,!0),t;default:return""}}function $d(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case Wr:return"Fragment";case Hr:return"Portal";case Id:return"Profiler";case ah:return"StrictMode";case Rd:return"Suspense";case Fd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case bx:return(t.displayName||"Context")+".Consumer";case vx:return(t._context.displayName||"Context")+".Provider";case ih:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case oh:return e=t.displayName||null,e!==null?e:$d(t.type)||"Memo";case gn:e=t._payload,t=t._init;try{return $d(t(e))}catch{}}return null}function Hw(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return $d(e);case 8:return e===ah?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function $n(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function jx(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Ww(t){var e=jx(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,a=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,a.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function co(t){t._valueTracker||(t._valueTracker=Ww(t))}function Nx(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=jx(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function yl(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function zd(t,e){var s=e.checked;return He({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function Jm(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=$n(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function _x(t,e){e=e.checked,e!=null&&rh(t,"checked",e,!1)}function Ud(t,e){_x(t,e);var s=$n(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?Bd(t,e.type,s):e.hasOwnProperty("defaultValue")&&Bd(t,e.type,$n(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function Qm(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function Bd(t,e,s){(e!=="number"||yl(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var Za=Array.isArray;function ta(t,e,s,n){if(t=t.options,e){e={};for(var r=0;r<s.length;r++)e["$"+s[r]]=!0;for(s=0;s<t.length;s++)r=e.hasOwnProperty("$"+t[s].value),t[s].selected!==r&&(t[s].selected=r),r&&n&&(t[s].defaultSelected=!0)}else{for(s=""+$n(s),e=null,r=0;r<t.length;r++){if(t[r].value===s){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function Hd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(z(91));return He({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function Xm(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(z(92));if(Za(s)){if(1<s.length)throw Error(z(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:$n(s)}}function kx(t,e){var s=$n(e.value),n=$n(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function Zm(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Sx(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function Wd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Sx(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var uo,Cx=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(uo=uo||document.createElement("div"),uo.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=uo.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function _i(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var ii={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Vw=["Webkit","ms","Moz","O"];Object.keys(ii).forEach(function(t){Vw.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),ii[e]=ii[t]})});function Px(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||ii.hasOwnProperty(t)&&ii[t]?(""+e).trim():e+"px"}function Ex(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,r=Px(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,r):t[s]=r}}var qw=He({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function Vd(t,e){if(e){if(qw[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(z(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(z(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(z(61))}if(e.style!=null&&typeof e.style!="object")throw Error(z(62))}}function qd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var Gd=null;function lh(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var Kd=null,sa=null,na=null;function ep(t){if(t=Xi(t)){if(typeof Kd!="function")throw Error(z(280));var e=t.stateNode;e&&(e=ic(e),Kd(t.stateNode,t.type,e))}}function Ax(t){sa?na?na.push(t):na=[t]:sa=t}function Tx(){if(sa){var t=sa,e=na;if(na=sa=null,ep(t),e)for(t=0;t<e.length;t++)ep(e[t])}}function Lx(t,e){return t(e)}function Mx(){}var Bc=!1;function Dx(t,e,s){if(Bc)return t(e,s);Bc=!0;try{return Lx(t,e,s)}finally{Bc=!1,(sa!==null||na!==null)&&(Mx(),Tx())}}function ki(t,e){var s=t.stateNode;if(s===null)return null;var n=ic(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(z(231,e,typeof s));return s}var Yd=!1;if(rn)try{var Ia={};Object.defineProperty(Ia,"passive",{get:function(){Yd=!0}}),window.addEventListener("test",Ia,Ia),window.removeEventListener("test",Ia,Ia)}catch{Yd=!1}function Gw(t,e,s,n,r,a,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var oi=!1,vl=null,bl=!1,Jd=null,Kw={onError:function(t){oi=!0,vl=t}};function Yw(t,e,s,n,r,a,o,l,c){oi=!1,vl=null,Gw.apply(Kw,arguments)}function Jw(t,e,s,n,r,a,o,l,c){if(Yw.apply(this,arguments),oi){if(oi){var d=vl;oi=!1,vl=null}else throw Error(z(198));bl||(bl=!0,Jd=d)}}function _r(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function Ox(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function tp(t){if(_r(t)!==t)throw Error(z(188))}function Qw(t){var e=t.alternate;if(!e){if(e=_r(t),e===null)throw Error(z(188));return e!==t?null:t}for(var s=t,n=e;;){var r=s.return;if(r===null)break;var a=r.alternate;if(a===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===a.child){for(a=r.child;a;){if(a===s)return tp(r),t;if(a===n)return tp(r),e;a=a.sibling}throw Error(z(188))}if(s.return!==n.return)s=r,n=a;else{for(var o=!1,l=r.child;l;){if(l===s){o=!0,s=r,n=a;break}if(l===n){o=!0,n=r,s=a;break}l=l.sibling}if(!o){for(l=a.child;l;){if(l===s){o=!0,s=a,n=r;break}if(l===n){o=!0,n=a,s=r;break}l=l.sibling}if(!o)throw Error(z(189))}}if(s.alternate!==n)throw Error(z(190))}if(s.tag!==3)throw Error(z(188));return s.stateNode.current===s?t:e}function Ix(t){return t=Qw(t),t!==null?Rx(t):null}function Rx(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Rx(t);if(e!==null)return e;t=t.sibling}return null}var Fx=es.unstable_scheduleCallback,sp=es.unstable_cancelCallback,Xw=es.unstable_shouldYield,Zw=es.unstable_requestPaint,Ye=es.unstable_now,e1=es.unstable_getCurrentPriorityLevel,ch=es.unstable_ImmediatePriority,$x=es.unstable_UserBlockingPriority,wl=es.unstable_NormalPriority,t1=es.unstable_LowPriority,zx=es.unstable_IdlePriority,sc=null,Ds=null;function s1(t){if(Ds&&typeof Ds.onCommitFiberRoot=="function")try{Ds.onCommitFiberRoot(sc,t,void 0,(t.current.flags&128)===128)}catch{}}var vs=Math.clz32?Math.clz32:a1,n1=Math.log,r1=Math.LN2;function a1(t){return t>>>=0,t===0?32:31-(n1(t)/r1|0)|0}var ho=64,fo=4194304;function ei(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function jl(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,r=t.suspendedLanes,a=t.pingedLanes,o=s&268435455;if(o!==0){var l=o&~r;l!==0?n=ei(l):(a&=o,a!==0&&(n=ei(a)))}else o=s&~r,o!==0?n=ei(o):a!==0&&(n=ei(a));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,a=e&-e,r>=a||r===16&&(a&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-vs(e),r=1<<s,n|=t[s],e&=~r;return n}function i1(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function o1(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,a=t.pendingLanes;0<a;){var o=31-vs(a),l=1<<o,c=r[o];c===-1?(!(l&s)||l&n)&&(r[o]=i1(l,e)):c<=e&&(t.expiredLanes|=l),a&=~l}}function Qd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Ux(){var t=ho;return ho<<=1,!(ho&4194240)&&(ho=64),t}function Hc(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function Ji(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-vs(e),t[e]=s}function l1(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var r=31-vs(s),a=1<<r;e[r]=0,n[r]=-1,t[r]=-1,s&=~a}}function dh(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-vs(s),r=1<<n;r&e|t[n]&e&&(t[n]|=e),s&=~r}}var Ce=0;function Bx(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Hx,uh,Wx,Vx,qx,Xd=!1,mo=[],An=null,Tn=null,Ln=null,Si=new Map,Ci=new Map,vn=[],c1="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function np(t,e){switch(t){case"focusin":case"focusout":An=null;break;case"dragenter":case"dragleave":Tn=null;break;case"mouseover":case"mouseout":Ln=null;break;case"pointerover":case"pointerout":Si.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Ci.delete(e.pointerId)}}function Ra(t,e,s,n,r,a){return t===null||t.nativeEvent!==a?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:a,targetContainers:[r]},e!==null&&(e=Xi(e),e!==null&&uh(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function d1(t,e,s,n,r){switch(e){case"focusin":return An=Ra(An,t,e,s,n,r),!0;case"dragenter":return Tn=Ra(Tn,t,e,s,n,r),!0;case"mouseover":return Ln=Ra(Ln,t,e,s,n,r),!0;case"pointerover":var a=r.pointerId;return Si.set(a,Ra(Si.get(a)||null,t,e,s,n,r)),!0;case"gotpointercapture":return a=r.pointerId,Ci.set(a,Ra(Ci.get(a)||null,t,e,s,n,r)),!0}return!1}function Gx(t){var e=or(t.target);if(e!==null){var s=_r(e);if(s!==null){if(e=s.tag,e===13){if(e=Ox(s),e!==null){t.blockedOn=e,qx(t.priority,function(){Wx(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function Xo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Zd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);Gd=n,s.target.dispatchEvent(n),Gd=null}else return e=Xi(s),e!==null&&uh(e),t.blockedOn=s,!1;e.shift()}return!0}function rp(t,e,s){Xo(t)&&s.delete(e)}function u1(){Xd=!1,An!==null&&Xo(An)&&(An=null),Tn!==null&&Xo(Tn)&&(Tn=null),Ln!==null&&Xo(Ln)&&(Ln=null),Si.forEach(rp),Ci.forEach(rp)}function Fa(t,e){t.blockedOn===e&&(t.blockedOn=null,Xd||(Xd=!0,es.unstable_scheduleCallback(es.unstable_NormalPriority,u1)))}function Pi(t){function e(r){return Fa(r,t)}if(0<mo.length){Fa(mo[0],t);for(var s=1;s<mo.length;s++){var n=mo[s];n.blockedOn===t&&(n.blockedOn=null)}}for(An!==null&&Fa(An,t),Tn!==null&&Fa(Tn,t),Ln!==null&&Fa(Ln,t),Si.forEach(e),Ci.forEach(e),s=0;s<vn.length;s++)n=vn[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<vn.length&&(s=vn[0],s.blockedOn===null);)Gx(s),s.blockedOn===null&&vn.shift()}var ra=un.ReactCurrentBatchConfig,Nl=!0;function h1(t,e,s,n){var r=Ce,a=ra.transition;ra.transition=null;try{Ce=1,hh(t,e,s,n)}finally{Ce=r,ra.transition=a}}function f1(t,e,s,n){var r=Ce,a=ra.transition;ra.transition=null;try{Ce=4,hh(t,e,s,n)}finally{Ce=r,ra.transition=a}}function hh(t,e,s,n){if(Nl){var r=Zd(t,e,s,n);if(r===null)Zc(t,e,n,_l,s),np(t,n);else if(d1(r,t,e,s,n))n.stopPropagation();else if(np(t,n),e&4&&-1<c1.indexOf(t)){for(;r!==null;){var a=Xi(r);if(a!==null&&Hx(a),a=Zd(t,e,s,n),a===null&&Zc(t,e,n,_l,s),a===r)break;r=a}r!==null&&n.stopPropagation()}else Zc(t,e,n,null,s)}}var _l=null;function Zd(t,e,s,n){if(_l=null,t=lh(n),t=or(t),t!==null)if(e=_r(t),e===null)t=null;else if(s=e.tag,s===13){if(t=Ox(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return _l=t,null}function Kx(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(e1()){case ch:return 1;case $x:return 4;case wl:case t1:return 16;case zx:return 536870912;default:return 16}default:return 16}}var jn=null,fh=null,Zo=null;function Yx(){if(Zo)return Zo;var t,e=fh,s=e.length,n,r="value"in jn?jn.value:jn.textContent,a=r.length;for(t=0;t<s&&e[t]===r[t];t++);var o=s-t;for(n=1;n<=o&&e[s-n]===r[a-n];n++);return Zo=r.slice(t,1<n?1-n:void 0)}function el(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function po(){return!0}function ap(){return!1}function ss(t){function e(s,n,r,a,o){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=a,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(a):a[l]);return this.isDefaultPrevented=(a.defaultPrevented!=null?a.defaultPrevented:a.returnValue===!1)?po:ap,this.isPropagationStopped=ap,this}return He(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=po)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=po)},persist:function(){},isPersistent:po}),e}var Sa={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},mh=ss(Sa),Qi=He({},Sa,{view:0,detail:0}),m1=ss(Qi),Wc,Vc,$a,nc=He({},Qi,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:ph,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==$a&&($a&&t.type==="mousemove"?(Wc=t.screenX-$a.screenX,Vc=t.screenY-$a.screenY):Vc=Wc=0,$a=t),Wc)},movementY:function(t){return"movementY"in t?t.movementY:Vc}}),ip=ss(nc),p1=He({},nc,{dataTransfer:0}),g1=ss(p1),x1=He({},Qi,{relatedTarget:0}),qc=ss(x1),y1=He({},Sa,{animationName:0,elapsedTime:0,pseudoElement:0}),v1=ss(y1),b1=He({},Sa,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),w1=ss(b1),j1=He({},Sa,{data:0}),op=ss(j1),N1={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},_1={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},k1={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function S1(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=k1[t])?!!e[t]:!1}function ph(){return S1}var C1=He({},Qi,{key:function(t){if(t.key){var e=N1[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=el(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?_1[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:ph,charCode:function(t){return t.type==="keypress"?el(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?el(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),P1=ss(C1),E1=He({},nc,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),lp=ss(E1),A1=He({},Qi,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:ph}),T1=ss(A1),L1=He({},Sa,{propertyName:0,elapsedTime:0,pseudoElement:0}),M1=ss(L1),D1=He({},nc,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),O1=ss(D1),I1=[9,13,27,32],gh=rn&&"CompositionEvent"in window,li=null;rn&&"documentMode"in document&&(li=document.documentMode);var R1=rn&&"TextEvent"in window&&!li,Jx=rn&&(!gh||li&&8<li&&11>=li),cp=String.fromCharCode(32),dp=!1;function Qx(t,e){switch(t){case"keyup":return I1.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function Xx(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var Vr=!1;function F1(t,e){switch(t){case"compositionend":return Xx(e);case"keypress":return e.which!==32?null:(dp=!0,cp);case"textInput":return t=e.data,t===cp&&dp?null:t;default:return null}}function $1(t,e){if(Vr)return t==="compositionend"||!gh&&Qx(t,e)?(t=Yx(),Zo=fh=jn=null,Vr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return Jx&&e.locale!=="ko"?null:e.data;default:return null}}var z1={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function up(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!z1[t.type]:e==="textarea"}function Zx(t,e,s,n){Ax(n),e=kl(e,"onChange"),0<e.length&&(s=new mh("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var ci=null,Ei=null;function U1(t){dy(t,0)}function rc(t){var e=Kr(t);if(Nx(e))return t}function B1(t,e){if(t==="change")return e}var ey=!1;if(rn){var Gc;if(rn){var Kc="oninput"in document;if(!Kc){var hp=document.createElement("div");hp.setAttribute("oninput","return;"),Kc=typeof hp.oninput=="function"}Gc=Kc}else Gc=!1;ey=Gc&&(!document.documentMode||9<document.documentMode)}function fp(){ci&&(ci.detachEvent("onpropertychange",ty),Ei=ci=null)}function ty(t){if(t.propertyName==="value"&&rc(Ei)){var e=[];Zx(e,Ei,t,lh(t)),Dx(U1,e)}}function H1(t,e,s){t==="focusin"?(fp(),ci=e,Ei=s,ci.attachEvent("onpropertychange",ty)):t==="focusout"&&fp()}function W1(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return rc(Ei)}function V1(t,e){if(t==="click")return rc(e)}function q1(t,e){if(t==="input"||t==="change")return rc(e)}function G1(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var ws=typeof Object.is=="function"?Object.is:G1;function Ai(t,e){if(ws(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!Od.call(e,r)||!ws(t[r],e[r]))return!1}return!0}function mp(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function pp(t,e){var s=mp(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=mp(s)}}function sy(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?sy(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function ny(){for(var t=window,e=yl();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=yl(t.document)}return e}function xh(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function K1(t){var e=ny(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&sy(s.ownerDocument.documentElement,s)){if(n!==null&&xh(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=s.textContent.length,a=Math.min(n.start,r);n=n.end===void 0?a:Math.min(n.end,r),!t.extend&&a>n&&(r=n,n=a,a=r),r=pp(s,a);var o=pp(s,n);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),a>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var Y1=rn&&"documentMode"in document&&11>=document.documentMode,qr=null,eu=null,di=null,tu=!1;function gp(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;tu||qr==null||qr!==yl(n)||(n=qr,"selectionStart"in n&&xh(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),di&&Ai(di,n)||(di=n,n=kl(eu,"onSelect"),0<n.length&&(e=new mh("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=qr)))}function go(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var Gr={animationend:go("Animation","AnimationEnd"),animationiteration:go("Animation","AnimationIteration"),animationstart:go("Animation","AnimationStart"),transitionend:go("Transition","TransitionEnd")},Yc={},ry={};rn&&(ry=document.createElement("div").style,"AnimationEvent"in window||(delete Gr.animationend.animation,delete Gr.animationiteration.animation,delete Gr.animationstart.animation),"TransitionEvent"in window||delete Gr.transitionend.transition);function ac(t){if(Yc[t])return Yc[t];if(!Gr[t])return t;var e=Gr[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in ry)return Yc[t]=e[s];return t}var ay=ac("animationend"),iy=ac("animationiteration"),oy=ac("animationstart"),ly=ac("transitionend"),cy=new Map,xp="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Hn(t,e){cy.set(t,e),Nr(e,[t])}for(var Jc=0;Jc<xp.length;Jc++){var Qc=xp[Jc],J1=Qc.toLowerCase(),Q1=Qc[0].toUpperCase()+Qc.slice(1);Hn(J1,"on"+Q1)}Hn(ay,"onAnimationEnd");Hn(iy,"onAnimationIteration");Hn(oy,"onAnimationStart");Hn("dblclick","onDoubleClick");Hn("focusin","onFocus");Hn("focusout","onBlur");Hn(ly,"onTransitionEnd");da("onMouseEnter",["mouseout","mouseover"]);da("onMouseLeave",["mouseout","mouseover"]);da("onPointerEnter",["pointerout","pointerover"]);da("onPointerLeave",["pointerout","pointerover"]);Nr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));Nr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));Nr("onBeforeInput",["compositionend","keypress","textInput","paste"]);Nr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));Nr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var ti="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),X1=new Set("cancel close invalid load scroll toggle".split(" ").concat(ti));function yp(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,Jw(n,e,void 0,t),t.currentTarget=null}function dy(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],r=n.event;n=n.listeners;e:{var a=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==a&&r.isPropagationStopped())break e;yp(r,l,d),a=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==a&&r.isPropagationStopped())break e;yp(r,l,d),a=c}}}if(bl)throw t=Jd,bl=!1,Jd=null,t}function De(t,e){var s=e[iu];s===void 0&&(s=e[iu]=new Set);var n=t+"__bubble";s.has(n)||(uy(e,t,2,!1),s.add(n))}function Xc(t,e,s){var n=0;e&&(n|=4),uy(s,t,n,e)}var xo="_reactListening"+Math.random().toString(36).slice(2);function Ti(t){if(!t[xo]){t[xo]=!0,yx.forEach(function(s){s!=="selectionchange"&&(X1.has(s)||Xc(s,!1,t),Xc(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[xo]||(e[xo]=!0,Xc("selectionchange",!1,e))}}function uy(t,e,s,n){switch(Kx(e)){case 1:var r=h1;break;case 4:r=f1;break;default:r=hh}s=r.bind(null,e,s,t),r=void 0,!Yd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,s,{capture:!0,passive:r}):t.addEventListener(e,s,!0):r!==void 0?t.addEventListener(e,s,{passive:r}):t.addEventListener(e,s,!1)}function Zc(t,e,s,n,r){var a=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=or(l),o===null)return;if(c=o.tag,c===5||c===6){n=a=o;continue e}l=l.parentNode}}n=n.return}Dx(function(){var d=a,u=lh(s),h=[];e:{var f=cy.get(t);if(f!==void 0){var m=mh,p=t;switch(t){case"keypress":if(el(s)===0)break e;case"keydown":case"keyup":m=P1;break;case"focusin":p="focus",m=qc;break;case"focusout":p="blur",m=qc;break;case"beforeblur":case"afterblur":m=qc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=ip;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=g1;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=T1;break;case ay:case iy:case oy:m=v1;break;case ly:m=M1;break;case"scroll":m=m1;break;case"wheel":m=O1;break;case"copy":case"cut":case"paste":m=w1;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=lp}var y=(e&4)!==0,x=!y&&t==="scroll",g=y?f!==null?f+"Capture":null:f;y=[];for(var v=d,b;v!==null;){b=v;var k=b.stateNode;if(b.tag===5&&k!==null&&(b=k,g!==null&&(k=ki(v,g),k!=null&&y.push(Li(v,k,b)))),x)break;v=v.return}0<y.length&&(f=new m(f,p,null,s,u),h.push({event:f,listeners:y}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&s!==Gd&&(p=s.relatedTarget||s.fromElement)&&(or(p)||p[an]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=s.relatedTarget||s.toElement,m=d,p=p?or(p):null,p!==null&&(x=_r(p),p!==x||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=d),m!==p)){if(y=ip,k="onMouseLeave",g="onMouseEnter",v="mouse",(t==="pointerout"||t==="pointerover")&&(y=lp,k="onPointerLeave",g="onPointerEnter",v="pointer"),x=m==null?f:Kr(m),b=p==null?f:Kr(p),f=new y(k,v+"leave",m,s,u),f.target=x,f.relatedTarget=b,k=null,or(u)===d&&(y=new y(g,v+"enter",p,s,u),y.target=b,y.relatedTarget=x,k=y),x=k,m&&p)t:{for(y=m,g=p,v=0,b=y;b;b=Ir(b))v++;for(b=0,k=g;k;k=Ir(k))b++;for(;0<v-b;)y=Ir(y),v--;for(;0<b-v;)g=Ir(g),b--;for(;v--;){if(y===g||g!==null&&y===g.alternate)break t;y=Ir(y),g=Ir(g)}y=null}else y=null;m!==null&&vp(h,f,m,y,!1),p!==null&&x!==null&&vp(h,x,p,y,!0)}}e:{if(f=d?Kr(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var j=B1;else if(up(f))if(ey)j=q1;else{j=W1;var S=H1}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(j=V1);if(j&&(j=j(t,d))){Zx(h,j,s,u);break e}S&&S(t,f,d),t==="focusout"&&(S=f._wrapperState)&&S.controlled&&f.type==="number"&&Bd(f,"number",f.value)}switch(S=d?Kr(d):window,t){case"focusin":(up(S)||S.contentEditable==="true")&&(qr=S,eu=d,di=null);break;case"focusout":di=eu=qr=null;break;case"mousedown":tu=!0;break;case"contextmenu":case"mouseup":case"dragend":tu=!1,gp(h,s,u);break;case"selectionchange":if(Y1)break;case"keydown":case"keyup":gp(h,s,u)}var C;if(gh)e:{switch(t){case"compositionstart":var _="onCompositionStart";break e;case"compositionend":_="onCompositionEnd";break e;case"compositionupdate":_="onCompositionUpdate";break e}_=void 0}else Vr?Qx(t,s)&&(_="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(_="onCompositionStart");_&&(Jx&&s.locale!=="ko"&&(Vr||_!=="onCompositionStart"?_==="onCompositionEnd"&&Vr&&(C=Yx()):(jn=u,fh="value"in jn?jn.value:jn.textContent,Vr=!0)),S=kl(d,_),0<S.length&&(_=new op(_,t,null,s,u),h.push({event:_,listeners:S}),C?_.data=C:(C=Xx(s),C!==null&&(_.data=C)))),(C=R1?F1(t,s):$1(t,s))&&(d=kl(d,"onBeforeInput"),0<d.length&&(u=new op("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=C))}dy(h,e)})}function Li(t,e,s){return{instance:t,listener:e,currentTarget:s}}function kl(t,e){for(var s=e+"Capture",n=[];t!==null;){var r=t,a=r.stateNode;r.tag===5&&a!==null&&(r=a,a=ki(t,s),a!=null&&n.unshift(Li(t,a,r)),a=ki(t,e),a!=null&&n.push(Li(t,a,r))),t=t.return}return n}function Ir(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function vp(t,e,s,n,r){for(var a=e._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,r?(c=ki(s,a),c!=null&&o.unshift(Li(s,c,l))):r||(c=ki(s,a),c!=null&&o.push(Li(s,c,l)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var Z1=/\r\n?/g,ej=/\u0000|\uFFFD/g;function bp(t){return(typeof t=="string"?t:""+t).replace(Z1,`
`).replace(ej,"")}function yo(t,e,s){if(e=bp(e),bp(t)!==e&&s)throw Error(z(425))}function Sl(){}var su=null,nu=null;function ru(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var au=typeof setTimeout=="function"?setTimeout:void 0,tj=typeof clearTimeout=="function"?clearTimeout:void 0,wp=typeof Promise=="function"?Promise:void 0,sj=typeof queueMicrotask=="function"?queueMicrotask:typeof wp<"u"?function(t){return wp.resolve(null).then(t).catch(nj)}:au;function nj(t){setTimeout(function(){throw t})}function ed(t,e){var s=e,n=0;do{var r=s.nextSibling;if(t.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(n===0){t.removeChild(r),Pi(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=r}while(s);Pi(e)}function Mn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function jp(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var Ca=Math.random().toString(36).slice(2),Ls="__reactFiber$"+Ca,Mi="__reactProps$"+Ca,an="__reactContainer$"+Ca,iu="__reactEvents$"+Ca,rj="__reactListeners$"+Ca,aj="__reactHandles$"+Ca;function or(t){var e=t[Ls];if(e)return e;for(var s=t.parentNode;s;){if(e=s[an]||s[Ls]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=jp(t);t!==null;){if(s=t[Ls])return s;t=jp(t)}return e}t=s,s=t.parentNode}return null}function Xi(t){return t=t[Ls]||t[an],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function Kr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(z(33))}function ic(t){return t[Mi]||null}var ou=[],Yr=-1;function Wn(t){return{current:t}}function Ie(t){0>Yr||(t.current=ou[Yr],ou[Yr]=null,Yr--)}function Le(t,e){Yr++,ou[Yr]=t.current,t.current=e}var zn={},_t=Wn(zn),Ft=Wn(!1),pr=zn;function ua(t,e){var s=t.type.contextTypes;if(!s)return zn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},a;for(a in s)r[a]=e[a];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function $t(t){return t=t.childContextTypes,t!=null}function Cl(){Ie(Ft),Ie(_t)}function Np(t,e,s){if(_t.current!==zn)throw Error(z(168));Le(_t,e),Le(Ft,s)}function hy(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(z(108,Hw(t)||"Unknown",r));return He({},s,n)}function Pl(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||zn,pr=_t.current,Le(_t,t),Le(Ft,Ft.current),!0}function _p(t,e,s){var n=t.stateNode;if(!n)throw Error(z(169));s?(t=hy(t,e,pr),n.__reactInternalMemoizedMergedChildContext=t,Ie(Ft),Ie(_t),Le(_t,t)):Ie(Ft),Le(Ft,s)}var Ys=null,oc=!1,td=!1;function fy(t){Ys===null?Ys=[t]:Ys.push(t)}function ij(t){oc=!0,fy(t)}function Vn(){if(!td&&Ys!==null){td=!0;var t=0,e=Ce;try{var s=Ys;for(Ce=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}Ys=null,oc=!1}catch(r){throw Ys!==null&&(Ys=Ys.slice(t+1)),Fx(ch,Vn),r}finally{Ce=e,td=!1}}return null}var Jr=[],Qr=0,El=null,Al=0,rs=[],as=0,gr=null,Qs=1,Xs="";function tr(t,e){Jr[Qr++]=Al,Jr[Qr++]=El,El=t,Al=e}function my(t,e,s){rs[as++]=Qs,rs[as++]=Xs,rs[as++]=gr,gr=t;var n=Qs;t=Xs;var r=32-vs(n)-1;n&=~(1<<r),s+=1;var a=32-vs(e)+r;if(30<a){var o=r-r%5;a=(n&(1<<o)-1).toString(32),n>>=o,r-=o,Qs=1<<32-vs(e)+r|s<<r|n,Xs=a+t}else Qs=1<<a|s<<r|n,Xs=t}function yh(t){t.return!==null&&(tr(t,1),my(t,1,0))}function vh(t){for(;t===El;)El=Jr[--Qr],Jr[Qr]=null,Al=Jr[--Qr],Jr[Qr]=null;for(;t===gr;)gr=rs[--as],rs[as]=null,Xs=rs[--as],rs[as]=null,Qs=rs[--as],rs[as]=null}var Xt=null,Yt=null,Fe=!1,ys=null;function py(t,e){var s=is(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function kp(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Xt=t,Yt=Mn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Xt=t,Yt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=gr!==null?{id:Qs,overflow:Xs}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=is(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Xt=t,Yt=null,!0):!1;default:return!1}}function lu(t){return(t.mode&1)!==0&&(t.flags&128)===0}function cu(t){if(Fe){var e=Yt;if(e){var s=e;if(!kp(t,e)){if(lu(t))throw Error(z(418));e=Mn(s.nextSibling);var n=Xt;e&&kp(t,e)?py(n,s):(t.flags=t.flags&-4097|2,Fe=!1,Xt=t)}}else{if(lu(t))throw Error(z(418));t.flags=t.flags&-4097|2,Fe=!1,Xt=t}}}function Sp(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Xt=t}function vo(t){if(t!==Xt)return!1;if(!Fe)return Sp(t),Fe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!ru(t.type,t.memoizedProps)),e&&(e=Yt)){if(lu(t))throw gy(),Error(z(418));for(;e;)py(t,e),e=Mn(e.nextSibling)}if(Sp(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(z(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Yt=Mn(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Yt=null}}else Yt=Xt?Mn(t.stateNode.nextSibling):null;return!0}function gy(){for(var t=Yt;t;)t=Mn(t.nextSibling)}function ha(){Yt=Xt=null,Fe=!1}function bh(t){ys===null?ys=[t]:ys.push(t)}var oj=un.ReactCurrentBatchConfig;function za(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(z(309));var n=s.stateNode}if(!n)throw Error(z(147,t));var r=n,a=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===a?e.ref:(e=function(o){var l=r.refs;o===null?delete l[a]:l[a]=o},e._stringRef=a,e)}if(typeof t!="string")throw Error(z(284));if(!s._owner)throw Error(z(290,t))}return t}function bo(t,e){throw t=Object.prototype.toString.call(e),Error(z(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function Cp(t){var e=t._init;return e(t._payload)}function xy(t){function e(g,v){if(t){var b=g.deletions;b===null?(g.deletions=[v],g.flags|=16):b.push(v)}}function s(g,v){if(!t)return null;for(;v!==null;)e(g,v),v=v.sibling;return null}function n(g,v){for(g=new Map;v!==null;)v.key!==null?g.set(v.key,v):g.set(v.index,v),v=v.sibling;return g}function r(g,v){return g=Rn(g,v),g.index=0,g.sibling=null,g}function a(g,v,b){return g.index=b,t?(b=g.alternate,b!==null?(b=b.index,b<v?(g.flags|=2,v):b):(g.flags|=2,v)):(g.flags|=1048576,v)}function o(g){return t&&g.alternate===null&&(g.flags|=2),g}function l(g,v,b,k){return v===null||v.tag!==6?(v=ld(b,g.mode,k),v.return=g,v):(v=r(v,b),v.return=g,v)}function c(g,v,b,k){var j=b.type;return j===Wr?u(g,v,b.props.children,k,b.key):v!==null&&(v.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===gn&&Cp(j)===v.type)?(k=r(v,b.props),k.ref=za(g,v,b),k.return=g,k):(k=ol(b.type,b.key,b.props,null,g.mode,k),k.ref=za(g,v,b),k.return=g,k)}function d(g,v,b,k){return v===null||v.tag!==4||v.stateNode.containerInfo!==b.containerInfo||v.stateNode.implementation!==b.implementation?(v=cd(b,g.mode,k),v.return=g,v):(v=r(v,b.children||[]),v.return=g,v)}function u(g,v,b,k,j){return v===null||v.tag!==7?(v=hr(b,g.mode,k,j),v.return=g,v):(v=r(v,b),v.return=g,v)}function h(g,v,b){if(typeof v=="string"&&v!==""||typeof v=="number")return v=ld(""+v,g.mode,b),v.return=g,v;if(typeof v=="object"&&v!==null){switch(v.$$typeof){case lo:return b=ol(v.type,v.key,v.props,null,g.mode,b),b.ref=za(g,null,v),b.return=g,b;case Hr:return v=cd(v,g.mode,b),v.return=g,v;case gn:var k=v._init;return h(g,k(v._payload),b)}if(Za(v)||Oa(v))return v=hr(v,g.mode,b,null),v.return=g,v;bo(g,v)}return null}function f(g,v,b,k){var j=v!==null?v.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return j!==null?null:l(g,v,""+b,k);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case lo:return b.key===j?c(g,v,b,k):null;case Hr:return b.key===j?d(g,v,b,k):null;case gn:return j=b._init,f(g,v,j(b._payload),k)}if(Za(b)||Oa(b))return j!==null?null:u(g,v,b,k,null);bo(g,b)}return null}function m(g,v,b,k,j){if(typeof k=="string"&&k!==""||typeof k=="number")return g=g.get(b)||null,l(v,g,""+k,j);if(typeof k=="object"&&k!==null){switch(k.$$typeof){case lo:return g=g.get(k.key===null?b:k.key)||null,c(v,g,k,j);case Hr:return g=g.get(k.key===null?b:k.key)||null,d(v,g,k,j);case gn:var S=k._init;return m(g,v,b,S(k._payload),j)}if(Za(k)||Oa(k))return g=g.get(b)||null,u(v,g,k,j,null);bo(v,k)}return null}function p(g,v,b,k){for(var j=null,S=null,C=v,_=v=0,P=null;C!==null&&_<b.length;_++){C.index>_?(P=C,C=null):P=C.sibling;var N=f(g,C,b[_],k);if(N===null){C===null&&(C=P);break}t&&C&&N.alternate===null&&e(g,C),v=a(N,v,_),S===null?j=N:S.sibling=N,S=N,C=P}if(_===b.length)return s(g,C),Fe&&tr(g,_),j;if(C===null){for(;_<b.length;_++)C=h(g,b[_],k),C!==null&&(v=a(C,v,_),S===null?j=C:S.sibling=C,S=C);return Fe&&tr(g,_),j}for(C=n(g,C);_<b.length;_++)P=m(C,g,_,b[_],k),P!==null&&(t&&P.alternate!==null&&C.delete(P.key===null?_:P.key),v=a(P,v,_),S===null?j=P:S.sibling=P,S=P);return t&&C.forEach(function(L){return e(g,L)}),Fe&&tr(g,_),j}function y(g,v,b,k){var j=Oa(b);if(typeof j!="function")throw Error(z(150));if(b=j.call(b),b==null)throw Error(z(151));for(var S=j=null,C=v,_=v=0,P=null,N=b.next();C!==null&&!N.done;_++,N=b.next()){C.index>_?(P=C,C=null):P=C.sibling;var L=f(g,C,N.value,k);if(L===null){C===null&&(C=P);break}t&&C&&L.alternate===null&&e(g,C),v=a(L,v,_),S===null?j=L:S.sibling=L,S=L,C=P}if(N.done)return s(g,C),Fe&&tr(g,_),j;if(C===null){for(;!N.done;_++,N=b.next())N=h(g,N.value,k),N!==null&&(v=a(N,v,_),S===null?j=N:S.sibling=N,S=N);return Fe&&tr(g,_),j}for(C=n(g,C);!N.done;_++,N=b.next())N=m(C,g,_,N.value,k),N!==null&&(t&&N.alternate!==null&&C.delete(N.key===null?_:N.key),v=a(N,v,_),S===null?j=N:S.sibling=N,S=N);return t&&C.forEach(function(A){return e(g,A)}),Fe&&tr(g,_),j}function x(g,v,b,k){if(typeof b=="object"&&b!==null&&b.type===Wr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case lo:e:{for(var j=b.key,S=v;S!==null;){if(S.key===j){if(j=b.type,j===Wr){if(S.tag===7){s(g,S.sibling),v=r(S,b.props.children),v.return=g,g=v;break e}}else if(S.elementType===j||typeof j=="object"&&j!==null&&j.$$typeof===gn&&Cp(j)===S.type){s(g,S.sibling),v=r(S,b.props),v.ref=za(g,S,b),v.return=g,g=v;break e}s(g,S);break}else e(g,S);S=S.sibling}b.type===Wr?(v=hr(b.props.children,g.mode,k,b.key),v.return=g,g=v):(k=ol(b.type,b.key,b.props,null,g.mode,k),k.ref=za(g,v,b),k.return=g,g=k)}return o(g);case Hr:e:{for(S=b.key;v!==null;){if(v.key===S)if(v.tag===4&&v.stateNode.containerInfo===b.containerInfo&&v.stateNode.implementation===b.implementation){s(g,v.sibling),v=r(v,b.children||[]),v.return=g,g=v;break e}else{s(g,v);break}else e(g,v);v=v.sibling}v=cd(b,g.mode,k),v.return=g,g=v}return o(g);case gn:return S=b._init,x(g,v,S(b._payload),k)}if(Za(b))return p(g,v,b,k);if(Oa(b))return y(g,v,b,k);bo(g,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,v!==null&&v.tag===6?(s(g,v.sibling),v=r(v,b),v.return=g,g=v):(s(g,v),v=ld(b,g.mode,k),v.return=g,g=v),o(g)):s(g,v)}return x}var fa=xy(!0),yy=xy(!1),Tl=Wn(null),Ll=null,Xr=null,wh=null;function jh(){wh=Xr=Ll=null}function Nh(t){var e=Tl.current;Ie(Tl),t._currentValue=e}function du(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function aa(t,e){Ll=t,wh=Xr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(Rt=!0),t.firstContext=null)}function ds(t){var e=t._currentValue;if(wh!==t)if(t={context:t,memoizedValue:e,next:null},Xr===null){if(Ll===null)throw Error(z(308));Xr=t,Ll.dependencies={lanes:0,firstContext:t}}else Xr=Xr.next=t;return e}var lr=null;function _h(t){lr===null?lr=[t]:lr.push(t)}function vy(t,e,s,n){var r=e.interleaved;return r===null?(s.next=s,_h(e)):(s.next=r.next,r.next=s),e.interleaved=s,on(t,n)}function on(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var xn=!1;function kh(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function by(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function tn(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function Dn(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,we&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,on(t,s)}return r=n.interleaved,r===null?(e.next=e,_h(n)):(e.next=r.next,r.next=e),n.interleaved=e,on(t,s)}function tl(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,dh(t,s)}}function Pp(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,a=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};a===null?r=a=o:a=a.next=o,s=s.next}while(s!==null);a===null?r=a=e:a=a.next=e}else r=a=e;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:a,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function Ml(t,e,s,n){var r=t.updateQueue;xn=!1;var a=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?a=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(a!==null){var h=r.baseState;o=0,u=d=c=null,l=a;do{var f=l.lane,m=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,y=l;switch(f=e,m=s,y.tag){case 1:if(p=y.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=y.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=He({},h,f);break e;case 2:xn=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(1);if(u===null&&(c=h),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else a===null&&(r.shared.lanes=0);yr|=o,t.lanes=o,t.memoizedState=h}}function Ep(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=s,typeof r!="function")throw Error(z(191,r));r.call(n)}}}var Zi={},Os=Wn(Zi),Di=Wn(Zi),Oi=Wn(Zi);function cr(t){if(t===Zi)throw Error(z(174));return t}function Sh(t,e){switch(Le(Oi,e),Le(Di,t),Le(Os,Zi),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:Wd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=Wd(e,t)}Ie(Os),Le(Os,e)}function ma(){Ie(Os),Ie(Di),Ie(Oi)}function wy(t){cr(Oi.current);var e=cr(Os.current),s=Wd(e,t.type);e!==s&&(Le(Di,t),Le(Os,s))}function Ch(t){Di.current===t&&(Ie(Os),Ie(Di))}var Ue=Wn(0);function Dl(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var sd=[];function Ph(){for(var t=0;t<sd.length;t++)sd[t]._workInProgressVersionPrimary=null;sd.length=0}var sl=un.ReactCurrentDispatcher,nd=un.ReactCurrentBatchConfig,xr=0,Be=null,st=null,lt=null,Ol=!1,ui=!1,Ii=0,lj=0;function vt(){throw Error(z(321))}function Eh(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!ws(t[s],e[s]))return!1;return!0}function Ah(t,e,s,n,r,a){if(xr=a,Be=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,sl.current=t===null||t.memoizedState===null?hj:fj,t=s(n,r),ui){a=0;do{if(ui=!1,Ii=0,25<=a)throw Error(z(301));a+=1,lt=st=null,e.updateQueue=null,sl.current=mj,t=s(n,r)}while(ui)}if(sl.current=Il,e=st!==null&&st.next!==null,xr=0,lt=st=Be=null,Ol=!1,e)throw Error(z(300));return t}function Th(){var t=Ii!==0;return Ii=0,t}function Es(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return lt===null?Be.memoizedState=lt=t:lt=lt.next=t,lt}function us(){if(st===null){var t=Be.alternate;t=t!==null?t.memoizedState:null}else t=st.next;var e=lt===null?Be.memoizedState:lt.next;if(e!==null)lt=e,st=t;else{if(t===null)throw Error(z(310));st=t,t={memoizedState:st.memoizedState,baseState:st.baseState,baseQueue:st.baseQueue,queue:st.queue,next:null},lt===null?Be.memoizedState=lt=t:lt=lt.next=t}return lt}function Ri(t,e){return typeof e=="function"?e(t):e}function rd(t){var e=us(),s=e.queue;if(s===null)throw Error(z(311));s.lastRenderedReducer=t;var n=st,r=n.baseQueue,a=s.pending;if(a!==null){if(r!==null){var o=r.next;r.next=a.next,a.next=o}n.baseQueue=r=a,s.pending=null}if(r!==null){a=r.next,n=n.baseState;var l=o=null,c=null,d=a;do{var u=d.lane;if((xr&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Be.lanes|=u,yr|=u}d=d.next}while(d!==null&&d!==a);c===null?o=n:c.next=l,ws(n,e.memoizedState)||(Rt=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){r=t;do a=r.lane,Be.lanes|=a,yr|=a,r=r.next;while(r!==t)}else r===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function ad(t){var e=us(),s=e.queue;if(s===null)throw Error(z(311));s.lastRenderedReducer=t;var n=s.dispatch,r=s.pending,a=e.memoizedState;if(r!==null){s.pending=null;var o=r=r.next;do a=t(a,o.action),o=o.next;while(o!==r);ws(a,e.memoizedState)||(Rt=!0),e.memoizedState=a,e.baseQueue===null&&(e.baseState=a),s.lastRenderedState=a}return[a,n]}function jy(){}function Ny(t,e){var s=Be,n=us(),r=e(),a=!ws(n.memoizedState,r);if(a&&(n.memoizedState=r,Rt=!0),n=n.queue,Lh(Sy.bind(null,s,n,t),[t]),n.getSnapshot!==e||a||lt!==null&&lt.memoizedState.tag&1){if(s.flags|=2048,Fi(9,ky.bind(null,s,n,r,e),void 0,null),ct===null)throw Error(z(349));xr&30||_y(s,e,r)}return r}function _y(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function ky(t,e,s,n){e.value=s,e.getSnapshot=n,Cy(e)&&Py(t)}function Sy(t,e,s){return s(function(){Cy(e)&&Py(t)})}function Cy(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!ws(t,s)}catch{return!0}}function Py(t){var e=on(t,1);e!==null&&bs(e,t,1,-1)}function Ap(t){var e=Es();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:Ri,lastRenderedState:t},e.queue=t,t=t.dispatch=uj.bind(null,Be,t),[e.memoizedState,t]}function Fi(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=Be.updateQueue,e===null?(e={lastEffect:null,stores:null},Be.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function Ey(){return us().memoizedState}function nl(t,e,s,n){var r=Es();Be.flags|=t,r.memoizedState=Fi(1|e,s,void 0,n===void 0?null:n)}function lc(t,e,s,n){var r=us();n=n===void 0?null:n;var a=void 0;if(st!==null){var o=st.memoizedState;if(a=o.destroy,n!==null&&Eh(n,o.deps)){r.memoizedState=Fi(e,s,a,n);return}}Be.flags|=t,r.memoizedState=Fi(1|e,s,a,n)}function Tp(t,e){return nl(8390656,8,t,e)}function Lh(t,e){return lc(2048,8,t,e)}function Ay(t,e){return lc(4,2,t,e)}function Ty(t,e){return lc(4,4,t,e)}function Ly(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function My(t,e,s){return s=s!=null?s.concat([t]):null,lc(4,4,Ly.bind(null,e,t),s)}function Mh(){}function Dy(t,e){var s=us();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&Eh(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function Oy(t,e){var s=us();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&Eh(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function Iy(t,e,s){return xr&21?(ws(s,e)||(s=Ux(),Be.lanes|=s,yr|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,Rt=!0),t.memoizedState=s)}function cj(t,e){var s=Ce;Ce=s!==0&&4>s?s:4,t(!0);var n=nd.transition;nd.transition={};try{t(!1),e()}finally{Ce=s,nd.transition=n}}function Ry(){return us().memoizedState}function dj(t,e,s){var n=In(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},Fy(t))$y(e,s);else if(s=vy(t,e,s,n),s!==null){var r=Pt();bs(s,t,n,r),zy(s,e,n)}}function uj(t,e,s){var n=In(t),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(Fy(t))$y(e,r);else{var a=t.alternate;if(t.lanes===0&&(a===null||a.lanes===0)&&(a=e.lastRenderedReducer,a!==null))try{var o=e.lastRenderedState,l=a(o,s);if(r.hasEagerState=!0,r.eagerState=l,ws(l,o)){var c=e.interleaved;c===null?(r.next=r,_h(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}s=vy(t,e,r,n),s!==null&&(r=Pt(),bs(s,t,n,r),zy(s,e,n))}}function Fy(t){var e=t.alternate;return t===Be||e!==null&&e===Be}function $y(t,e){ui=Ol=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function zy(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,dh(t,s)}}var Il={readContext:ds,useCallback:vt,useContext:vt,useEffect:vt,useImperativeHandle:vt,useInsertionEffect:vt,useLayoutEffect:vt,useMemo:vt,useReducer:vt,useRef:vt,useState:vt,useDebugValue:vt,useDeferredValue:vt,useTransition:vt,useMutableSource:vt,useSyncExternalStore:vt,useId:vt,unstable_isNewReconciler:!1},hj={readContext:ds,useCallback:function(t,e){return Es().memoizedState=[t,e===void 0?null:e],t},useContext:ds,useEffect:Tp,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,nl(4194308,4,Ly.bind(null,e,t),s)},useLayoutEffect:function(t,e){return nl(4194308,4,t,e)},useInsertionEffect:function(t,e){return nl(4,2,t,e)},useMemo:function(t,e){var s=Es();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=Es();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=dj.bind(null,Be,t),[n.memoizedState,t]},useRef:function(t){var e=Es();return t={current:t},e.memoizedState=t},useState:Ap,useDebugValue:Mh,useDeferredValue:function(t){return Es().memoizedState=t},useTransition:function(){var t=Ap(!1),e=t[0];return t=cj.bind(null,t[1]),Es().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=Be,r=Es();if(Fe){if(s===void 0)throw Error(z(407));s=s()}else{if(s=e(),ct===null)throw Error(z(349));xr&30||_y(n,e,s)}r.memoizedState=s;var a={value:s,getSnapshot:e};return r.queue=a,Tp(Sy.bind(null,n,a,t),[t]),n.flags|=2048,Fi(9,ky.bind(null,n,a,s,e),void 0,null),s},useId:function(){var t=Es(),e=ct.identifierPrefix;if(Fe){var s=Xs,n=Qs;s=(n&~(1<<32-vs(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=Ii++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=lj++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},fj={readContext:ds,useCallback:Dy,useContext:ds,useEffect:Lh,useImperativeHandle:My,useInsertionEffect:Ay,useLayoutEffect:Ty,useMemo:Oy,useReducer:rd,useRef:Ey,useState:function(){return rd(Ri)},useDebugValue:Mh,useDeferredValue:function(t){var e=us();return Iy(e,st.memoizedState,t)},useTransition:function(){var t=rd(Ri)[0],e=us().memoizedState;return[t,e]},useMutableSource:jy,useSyncExternalStore:Ny,useId:Ry,unstable_isNewReconciler:!1},mj={readContext:ds,useCallback:Dy,useContext:ds,useEffect:Lh,useImperativeHandle:My,useInsertionEffect:Ay,useLayoutEffect:Ty,useMemo:Oy,useReducer:ad,useRef:Ey,useState:function(){return ad(Ri)},useDebugValue:Mh,useDeferredValue:function(t){var e=us();return st===null?e.memoizedState=t:Iy(e,st.memoizedState,t)},useTransition:function(){var t=ad(Ri)[0],e=us().memoizedState;return[t,e]},useMutableSource:jy,useSyncExternalStore:Ny,useId:Ry,unstable_isNewReconciler:!1};function ms(t,e){if(t&&t.defaultProps){e=He({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function uu(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:He({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var cc={isMounted:function(t){return(t=t._reactInternals)?_r(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=Pt(),r=In(t),a=tn(n,r);a.payload=e,s!=null&&(a.callback=s),e=Dn(t,a,r),e!==null&&(bs(e,t,r,n),tl(e,t,r))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=Pt(),r=In(t),a=tn(n,r);a.tag=1,a.payload=e,s!=null&&(a.callback=s),e=Dn(t,a,r),e!==null&&(bs(e,t,r,n),tl(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=Pt(),n=In(t),r=tn(s,n);r.tag=2,e!=null&&(r.callback=e),e=Dn(t,r,n),e!==null&&(bs(e,t,n,s),tl(e,t,n))}};function Lp(t,e,s,n,r,a,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,a,o):e.prototype&&e.prototype.isPureReactComponent?!Ai(s,n)||!Ai(r,a):!0}function Uy(t,e,s){var n=!1,r=zn,a=e.contextType;return typeof a=="object"&&a!==null?a=ds(a):(r=$t(e)?pr:_t.current,n=e.contextTypes,a=(n=n!=null)?ua(t,r):zn),e=new e(s,a),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=cc,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=a),e}function Mp(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&cc.enqueueReplaceState(e,e.state,null)}function hu(t,e,s,n){var r=t.stateNode;r.props=s,r.state=t.memoizedState,r.refs={},kh(t);var a=e.contextType;typeof a=="object"&&a!==null?r.context=ds(a):(a=$t(e)?pr:_t.current,r.context=ua(t,a)),r.state=t.memoizedState,a=e.getDerivedStateFromProps,typeof a=="function"&&(uu(t,e,a,s),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&cc.enqueueReplaceState(r,r.state,null),Ml(t,s,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function pa(t,e){try{var s="",n=e;do s+=Bw(n),n=n.return;while(n);var r=s}catch(a){r=`
Error generating stack: `+a.message+`
`+a.stack}return{value:t,source:e,stack:r,digest:null}}function id(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function fu(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var pj=typeof WeakMap=="function"?WeakMap:Map;function By(t,e,s){s=tn(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){Fl||(Fl=!0,Nu=n),fu(t,e)},s}function Hy(t,e,s){s=tn(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;s.payload=function(){return n(r)},s.callback=function(){fu(t,e)}}var a=t.stateNode;return a!==null&&typeof a.componentDidCatch=="function"&&(s.callback=function(){fu(t,e),typeof n!="function"&&(On===null?On=new Set([this]):On.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function Dp(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new pj;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(s)||(r.add(s),t=Ej.bind(null,t,e,s),e.then(t,t))}function Op(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Ip(t,e,s,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=tn(-1,1),e.tag=2,Dn(s,e,1))),s.lanes|=1),t)}var gj=un.ReactCurrentOwner,Rt=!1;function Ct(t,e,s,n){e.child=t===null?yy(e,null,s,n):fa(e,t.child,s,n)}function Rp(t,e,s,n,r){s=s.render;var a=e.ref;return aa(e,r),n=Ah(t,e,s,n,a,r),s=Th(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ln(t,e,r)):(Fe&&s&&yh(e),e.flags|=1,Ct(t,e,n,r),e.child)}function Fp(t,e,s,n,r){if(t===null){var a=s.type;return typeof a=="function"&&!Uh(a)&&a.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=a,Wy(t,e,a,n,r)):(t=ol(s.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(a=t.child,!(t.lanes&r)){var o=a.memoizedProps;if(s=s.compare,s=s!==null?s:Ai,s(o,n)&&t.ref===e.ref)return ln(t,e,r)}return e.flags|=1,t=Rn(a,n),t.ref=e.ref,t.return=e,e.child=t}function Wy(t,e,s,n,r){if(t!==null){var a=t.memoizedProps;if(Ai(a,n)&&t.ref===e.ref)if(Rt=!1,e.pendingProps=n=a,(t.lanes&r)!==0)t.flags&131072&&(Rt=!0);else return e.lanes=t.lanes,ln(t,e,r)}return mu(t,e,s,n,r)}function Vy(t,e,s){var n=e.pendingProps,r=n.children,a=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},Le(ea,Gt),Gt|=s;else{if(!(s&1073741824))return t=a!==null?a.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,Le(ea,Gt),Gt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=a!==null?a.baseLanes:s,Le(ea,Gt),Gt|=n}else a!==null?(n=a.baseLanes|s,e.memoizedState=null):n=s,Le(ea,Gt),Gt|=n;return Ct(t,e,r,s),e.child}function qy(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function mu(t,e,s,n,r){var a=$t(s)?pr:_t.current;return a=ua(e,a),aa(e,r),s=Ah(t,e,s,n,a,r),n=Th(),t!==null&&!Rt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,ln(t,e,r)):(Fe&&n&&yh(e),e.flags|=1,Ct(t,e,s,r),e.child)}function $p(t,e,s,n,r){if($t(s)){var a=!0;Pl(e)}else a=!1;if(aa(e,r),e.stateNode===null)rl(t,e),Uy(e,s,n),hu(e,s,n,r),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=ds(d):(d=$t(s)?pr:_t.current,d=ua(e,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&Mp(e,o,n,d),xn=!1;var f=e.memoizedState;o.state=f,Ml(e,n,o,r),c=e.memoizedState,l!==n||f!==c||Ft.current||xn?(typeof u=="function"&&(uu(e,s,u,n),c=e.memoizedState),(l=xn||Lp(e,s,l,n,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,by(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:ms(e.type,l),o.props=d,h=e.pendingProps,f=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=ds(c):(c=$t(s)?pr:_t.current,c=ua(e,c));var m=s.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&Mp(e,o,n,c),xn=!1,f=e.memoizedState,o.state=f,Ml(e,n,o,r);var p=e.memoizedState;l!==h||f!==p||Ft.current||xn?(typeof m=="function"&&(uu(e,s,m,n),p=e.memoizedState),(d=xn||Lp(e,s,d,n,f,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return pu(t,e,s,n,a,r)}function pu(t,e,s,n,r,a){qy(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return r&&_p(e,s,!1),ln(t,e,a);n=e.stateNode,gj.current=e;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=fa(e,t.child,null,a),e.child=fa(e,null,l,a)):Ct(t,e,l,a),e.memoizedState=n.state,r&&_p(e,s,!0),e.child}function Gy(t){var e=t.stateNode;e.pendingContext?Np(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Np(t,e.context,!1),Sh(t,e.containerInfo)}function zp(t,e,s,n,r){return ha(),bh(r),e.flags|=256,Ct(t,e,s,n),e.child}var gu={dehydrated:null,treeContext:null,retryLane:0};function xu(t){return{baseLanes:t,cachePool:null,transitions:null}}function Ky(t,e,s){var n=e.pendingProps,r=Ue.current,a=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(a=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),Le(Ue,r&1),t===null)return cu(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,a?(n=e.mode,a=e.child,o={mode:"hidden",children:o},!(n&1)&&a!==null?(a.childLanes=0,a.pendingProps=o):a=hc(o,n,0,null),t=hr(t,n,s,null),a.return=e,t.return=e,a.sibling=t,e.child=a,e.child.memoizedState=xu(s),e.memoizedState=gu,t):Dh(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return xj(t,e,o,n,l,r,s);if(a){a=n.fallback,o=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=Rn(r,c),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?a=Rn(l,a):(a=hr(a,o,s,null),a.flags|=2),a.return=e,n.return=e,n.sibling=a,e.child=n,n=a,a=e.child,o=t.child.memoizedState,o=o===null?xu(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},a.memoizedState=o,a.childLanes=t.childLanes&~s,e.memoizedState=gu,n}return a=t.child,t=a.sibling,n=Rn(a,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function Dh(t,e){return e=hc({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function wo(t,e,s,n){return n!==null&&bh(n),fa(e,t.child,null,s),t=Dh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function xj(t,e,s,n,r,a,o){if(s)return e.flags&256?(e.flags&=-257,n=id(Error(z(422))),wo(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(a=n.fallback,r=e.mode,n=hc({mode:"visible",children:n.children},r,0,null),a=hr(a,r,o,null),a.flags|=2,n.return=e,a.return=e,n.sibling=a,e.child=n,e.mode&1&&fa(e,t.child,null,o),e.child.memoizedState=xu(o),e.memoizedState=gu,a);if(!(e.mode&1))return wo(t,e,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,a=Error(z(419)),n=id(a,n,void 0),wo(t,e,o,n)}if(l=(o&t.childLanes)!==0,Rt||l){if(n=ct,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==a.retryLane&&(a.retryLane=r,on(t,r),bs(n,t,r,-1))}return zh(),n=id(Error(z(421))),wo(t,e,o,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Aj.bind(null,t),r._reactRetry=e,null):(t=a.treeContext,Yt=Mn(r.nextSibling),Xt=e,Fe=!0,ys=null,t!==null&&(rs[as++]=Qs,rs[as++]=Xs,rs[as++]=gr,Qs=t.id,Xs=t.overflow,gr=e),e=Dh(e,n.children),e.flags|=4096,e)}function Up(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),du(t.return,e,s)}function od(t,e,s,n,r){var a=t.memoizedState;a===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(a.isBackwards=e,a.rendering=null,a.renderingStartTime=0,a.last=n,a.tail=s,a.tailMode=r)}function Yy(t,e,s){var n=e.pendingProps,r=n.revealOrder,a=n.tail;if(Ct(t,e,n.children,s),n=Ue.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&Up(t,s,e);else if(t.tag===19)Up(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(Le(Ue,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(s=e.child,r=null;s!==null;)t=s.alternate,t!==null&&Dl(t)===null&&(r=s),s=s.sibling;s=r,s===null?(r=e.child,e.child=null):(r=s.sibling,s.sibling=null),od(e,!1,r,s,a);break;case"backwards":for(s=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&Dl(t)===null){e.child=r;break}t=r.sibling,r.sibling=s,s=r,r=t}od(e,!0,s,null,a);break;case"together":od(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function rl(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function ln(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),yr|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(z(153));if(e.child!==null){for(t=e.child,s=Rn(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=Rn(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function yj(t,e,s){switch(e.tag){case 3:Gy(e),ha();break;case 5:wy(e);break;case 1:$t(e.type)&&Pl(e);break;case 4:Sh(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;Le(Tl,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(Le(Ue,Ue.current&1),e.flags|=128,null):s&e.child.childLanes?Ky(t,e,s):(Le(Ue,Ue.current&1),t=ln(t,e,s),t!==null?t.sibling:null);Le(Ue,Ue.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return Yy(t,e,s);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),Le(Ue,Ue.current),n)break;return null;case 22:case 23:return e.lanes=0,Vy(t,e,s)}return ln(t,e,s)}var Jy,yu,Qy,Xy;Jy=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};yu=function(){};Qy=function(t,e,s,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,cr(Os.current);var a=null;switch(s){case"input":r=zd(t,r),n=zd(t,n),a=[];break;case"select":r=He({},r,{value:void 0}),n=He({},n,{value:void 0}),a=[];break;case"textarea":r=Hd(t,r),n=Hd(t,n),a=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Sl)}Vd(s,n);var o;s=null;for(d in r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ni.hasOwnProperty(d)?a||(a=[]):(a=a||[]).push(d,null));for(d in n){var c=n[d];if(l=r!=null?r[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(a||(a=[]),a.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(a=a||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(a=a||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ni.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&De("scroll",t),a||l===c||(a=[])):(a=a||[]).push(d,c))}s&&(a=a||[]).push("style",s);var d=a;(e.updateQueue=d)&&(e.flags|=4)}};Xy=function(t,e,s,n){s!==n&&(e.flags|=4)};function Ua(t,e){if(!Fe)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function bt(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function vj(t,e,s){var n=e.pendingProps;switch(vh(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return bt(e),null;case 1:return $t(e.type)&&Cl(),bt(e),null;case 3:return n=e.stateNode,ma(),Ie(Ft),Ie(_t),Ph(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(vo(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ys!==null&&(Su(ys),ys=null))),yu(t,e),bt(e),null;case 5:Ch(e);var r=cr(Oi.current);if(s=e.type,t!==null&&e.stateNode!=null)Qy(t,e,s,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(z(166));return bt(e),null}if(t=cr(Os.current),vo(e)){n=e.stateNode,s=e.type;var a=e.memoizedProps;switch(n[Ls]=e,n[Mi]=a,t=(e.mode&1)!==0,s){case"dialog":De("cancel",n),De("close",n);break;case"iframe":case"object":case"embed":De("load",n);break;case"video":case"audio":for(r=0;r<ti.length;r++)De(ti[r],n);break;case"source":De("error",n);break;case"img":case"image":case"link":De("error",n),De("load",n);break;case"details":De("toggle",n);break;case"input":Jm(n,a),De("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!a.multiple},De("invalid",n);break;case"textarea":Xm(n,a),De("invalid",n)}Vd(s,a),r=null;for(var o in a)if(a.hasOwnProperty(o)){var l=a[o];o==="children"?typeof l=="string"?n.textContent!==l&&(a.suppressHydrationWarning!==!0&&yo(n.textContent,l,t),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(a.suppressHydrationWarning!==!0&&yo(n.textContent,l,t),r=["children",""+l]):Ni.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&De("scroll",n)}switch(s){case"input":co(n),Qm(n,a,!0);break;case"textarea":co(n),Zm(n);break;case"select":case"option":break;default:typeof a.onClick=="function"&&(n.onclick=Sl)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Sx(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(s,{is:n.is}):(t=o.createElement(s),s==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,s),t[Ls]=e,t[Mi]=n,Jy(t,e,!1,!1),e.stateNode=t;e:{switch(o=qd(s,n),s){case"dialog":De("cancel",t),De("close",t),r=n;break;case"iframe":case"object":case"embed":De("load",t),r=n;break;case"video":case"audio":for(r=0;r<ti.length;r++)De(ti[r],t);r=n;break;case"source":De("error",t),r=n;break;case"img":case"image":case"link":De("error",t),De("load",t),r=n;break;case"details":De("toggle",t),r=n;break;case"input":Jm(t,n),r=zd(t,n),De("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=He({},n,{value:void 0}),De("invalid",t);break;case"textarea":Xm(t,n),r=Hd(t,n),De("invalid",t);break;default:r=n}Vd(s,r),l=r;for(a in l)if(l.hasOwnProperty(a)){var c=l[a];a==="style"?Ex(t,c):a==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Cx(t,c)):a==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&_i(t,c):typeof c=="number"&&_i(t,""+c):a!=="suppressContentEditableWarning"&&a!=="suppressHydrationWarning"&&a!=="autoFocus"&&(Ni.hasOwnProperty(a)?c!=null&&a==="onScroll"&&De("scroll",t):c!=null&&rh(t,a,c,o))}switch(s){case"input":co(t),Qm(t,n,!1);break;case"textarea":co(t),Zm(t);break;case"option":n.value!=null&&t.setAttribute("value",""+$n(n.value));break;case"select":t.multiple=!!n.multiple,a=n.value,a!=null?ta(t,!!n.multiple,a,!1):n.defaultValue!=null&&ta(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Sl)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return bt(e),null;case 6:if(t&&e.stateNode!=null)Xy(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(z(166));if(s=cr(Oi.current),cr(Os.current),vo(e)){if(n=e.stateNode,s=e.memoizedProps,n[Ls]=e,(a=n.nodeValue!==s)&&(t=Xt,t!==null))switch(t.tag){case 3:yo(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&yo(n.nodeValue,s,(t.mode&1)!==0)}a&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[Ls]=e,e.stateNode=n}return bt(e),null;case 13:if(Ie(Ue),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Fe&&Yt!==null&&e.mode&1&&!(e.flags&128))gy(),ha(),e.flags|=98560,a=!1;else if(a=vo(e),n!==null&&n.dehydrated!==null){if(t===null){if(!a)throw Error(z(318));if(a=e.memoizedState,a=a!==null?a.dehydrated:null,!a)throw Error(z(317));a[Ls]=e}else ha(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;bt(e),a=!1}else ys!==null&&(Su(ys),ys=null),a=!0;if(!a)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Ue.current&1?nt===0&&(nt=3):zh())),e.updateQueue!==null&&(e.flags|=4),bt(e),null);case 4:return ma(),yu(t,e),t===null&&Ti(e.stateNode.containerInfo),bt(e),null;case 10:return Nh(e.type._context),bt(e),null;case 17:return $t(e.type)&&Cl(),bt(e),null;case 19:if(Ie(Ue),a=e.memoizedState,a===null)return bt(e),null;if(n=(e.flags&128)!==0,o=a.rendering,o===null)if(n)Ua(a,!1);else{if(nt!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=Dl(t),o!==null){for(e.flags|=128,Ua(a,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)a=s,t=n,a.flags&=14680066,o=a.alternate,o===null?(a.childLanes=0,a.lanes=t,a.child=null,a.subtreeFlags=0,a.memoizedProps=null,a.memoizedState=null,a.updateQueue=null,a.dependencies=null,a.stateNode=null):(a.childLanes=o.childLanes,a.lanes=o.lanes,a.child=o.child,a.subtreeFlags=0,a.deletions=null,a.memoizedProps=o.memoizedProps,a.memoizedState=o.memoizedState,a.updateQueue=o.updateQueue,a.type=o.type,t=o.dependencies,a.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return Le(Ue,Ue.current&1|2),e.child}t=t.sibling}a.tail!==null&&Ye()>ga&&(e.flags|=128,n=!0,Ua(a,!1),e.lanes=4194304)}else{if(!n)if(t=Dl(o),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),Ua(a,!0),a.tail===null&&a.tailMode==="hidden"&&!o.alternate&&!Fe)return bt(e),null}else 2*Ye()-a.renderingStartTime>ga&&s!==1073741824&&(e.flags|=128,n=!0,Ua(a,!1),e.lanes=4194304);a.isBackwards?(o.sibling=e.child,e.child=o):(s=a.last,s!==null?s.sibling=o:e.child=o,a.last=o)}return a.tail!==null?(e=a.tail,a.rendering=e,a.tail=e.sibling,a.renderingStartTime=Ye(),e.sibling=null,s=Ue.current,Le(Ue,n?s&1|2:s&1),e):(bt(e),null);case 22:case 23:return $h(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Gt&1073741824&&(bt(e),e.subtreeFlags&6&&(e.flags|=8192)):bt(e),null;case 24:return null;case 25:return null}throw Error(z(156,e.tag))}function bj(t,e){switch(vh(e),e.tag){case 1:return $t(e.type)&&Cl(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return ma(),Ie(Ft),Ie(_t),Ph(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return Ch(e),null;case 13:if(Ie(Ue),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(z(340));ha()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ie(Ue),null;case 4:return ma(),null;case 10:return Nh(e.type._context),null;case 22:case 23:return $h(),null;case 24:return null;default:return null}}var jo=!1,Nt=!1,wj=typeof WeakSet=="function"?WeakSet:Set,Q=null;function Zr(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){qe(t,e,n)}else s.current=null}function vu(t,e,s){try{s()}catch(n){qe(t,e,n)}}var Bp=!1;function jj(t,e){if(su=Nl,t=ny(),xh(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,a=n.focusNode;n=n.focusOffset;try{s.nodeType,a.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==s||r!==0&&h.nodeType!==3||(l=o+r),h!==a||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===s&&++d===r&&(l=o),f===a&&++u===n&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(nu={focusedElem:t,selectionRange:s},Nl=!1,Q=e;Q!==null;)if(e=Q,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,Q=t;else for(;Q!==null;){e=Q;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var y=p.memoizedProps,x=p.memoizedState,g=e.stateNode,v=g.getSnapshotBeforeUpdate(e.elementType===e.type?y:ms(e.type,y),x);g.__reactInternalSnapshotBeforeUpdate=v}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(z(163))}}catch(k){qe(e,e.return,k)}if(t=e.sibling,t!==null){t.return=e.return,Q=t;break}Q=e.return}return p=Bp,Bp=!1,p}function hi(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var a=r.destroy;r.destroy=void 0,a!==void 0&&vu(e,s,a)}r=r.next}while(r!==n)}}function dc(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function bu(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function Zy(t){var e=t.alternate;e!==null&&(t.alternate=null,Zy(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[Ls],delete e[Mi],delete e[iu],delete e[rj],delete e[aj])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function ev(t){return t.tag===5||t.tag===3||t.tag===4}function Hp(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||ev(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function wu(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Sl));else if(n!==4&&(t=t.child,t!==null))for(wu(t,e,s),t=t.sibling;t!==null;)wu(t,e,s),t=t.sibling}function ju(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(ju(t,e,s),t=t.sibling;t!==null;)ju(t,e,s),t=t.sibling}var ft=null,ps=!1;function fn(t,e,s){for(s=s.child;s!==null;)tv(t,e,s),s=s.sibling}function tv(t,e,s){if(Ds&&typeof Ds.onCommitFiberUnmount=="function")try{Ds.onCommitFiberUnmount(sc,s)}catch{}switch(s.tag){case 5:Nt||Zr(s,e);case 6:var n=ft,r=ps;ft=null,fn(t,e,s),ft=n,ps=r,ft!==null&&(ps?(t=ft,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):ft.removeChild(s.stateNode));break;case 18:ft!==null&&(ps?(t=ft,s=s.stateNode,t.nodeType===8?ed(t.parentNode,s):t.nodeType===1&&ed(t,s),Pi(t)):ed(ft,s.stateNode));break;case 4:n=ft,r=ps,ft=s.stateNode.containerInfo,ps=!0,fn(t,e,s),ft=n,ps=r;break;case 0:case 11:case 14:case 15:if(!Nt&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var a=r,o=a.destroy;a=a.tag,o!==void 0&&(a&2||a&4)&&vu(s,e,o),r=r.next}while(r!==n)}fn(t,e,s);break;case 1:if(!Nt&&(Zr(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){qe(s,e,l)}fn(t,e,s);break;case 21:fn(t,e,s);break;case 22:s.mode&1?(Nt=(n=Nt)||s.memoizedState!==null,fn(t,e,s),Nt=n):fn(t,e,s);break;default:fn(t,e,s)}}function Wp(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new wj),e.forEach(function(n){var r=Tj.bind(null,t,n);s.has(n)||(s.add(n),n.then(r,r))})}}function hs(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];try{var a=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:ft=l.stateNode,ps=!1;break e;case 3:ft=l.stateNode.containerInfo,ps=!0;break e;case 4:ft=l.stateNode.containerInfo,ps=!0;break e}l=l.return}if(ft===null)throw Error(z(160));tv(a,o,r),ft=null,ps=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){qe(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)sv(e,t),e=e.sibling}function sv(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(hs(e,t),ks(t),n&4){try{hi(3,t,t.return),dc(3,t)}catch(y){qe(t,t.return,y)}try{hi(5,t,t.return)}catch(y){qe(t,t.return,y)}}break;case 1:hs(e,t),ks(t),n&512&&s!==null&&Zr(s,s.return);break;case 5:if(hs(e,t),ks(t),n&512&&s!==null&&Zr(s,s.return),t.flags&32){var r=t.stateNode;try{_i(r,"")}catch(y){qe(t,t.return,y)}}if(n&4&&(r=t.stateNode,r!=null)){var a=t.memoizedProps,o=s!==null?s.memoizedProps:a,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&a.type==="radio"&&a.name!=null&&_x(r,a),qd(l,o);var d=qd(l,a);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?Ex(r,h):u==="dangerouslySetInnerHTML"?Cx(r,h):u==="children"?_i(r,h):rh(r,u,h,d)}switch(l){case"input":Ud(r,a);break;case"textarea":kx(r,a);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!a.multiple;var m=a.value;m!=null?ta(r,!!a.multiple,m,!1):f!==!!a.multiple&&(a.defaultValue!=null?ta(r,!!a.multiple,a.defaultValue,!0):ta(r,!!a.multiple,a.multiple?[]:"",!1))}r[Mi]=a}catch(y){qe(t,t.return,y)}}break;case 6:if(hs(e,t),ks(t),n&4){if(t.stateNode===null)throw Error(z(162));r=t.stateNode,a=t.memoizedProps;try{r.nodeValue=a}catch(y){qe(t,t.return,y)}}break;case 3:if(hs(e,t),ks(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Pi(e.containerInfo)}catch(y){qe(t,t.return,y)}break;case 4:hs(e,t),ks(t);break;case 13:hs(e,t),ks(t),r=t.child,r.flags&8192&&(a=r.memoizedState!==null,r.stateNode.isHidden=a,!a||r.alternate!==null&&r.alternate.memoizedState!==null||(Rh=Ye())),n&4&&Wp(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(Nt=(d=Nt)||u,hs(e,t),Nt=d):hs(e,t),ks(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(Q=t,u=t.child;u!==null;){for(h=Q=u;Q!==null;){switch(f=Q,m=f.child,f.tag){case 0:case 11:case 14:case 15:hi(4,f,f.return);break;case 1:Zr(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(y){qe(n,s,y)}}break;case 5:Zr(f,f.return);break;case 22:if(f.memoizedState!==null){qp(h);continue}}m!==null?(m.return=f,Q=m):qp(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,d?(a=r.style,typeof a.setProperty=="function"?a.setProperty("display","none","important"):a.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Px("display",o))}catch(y){qe(t,t.return,y)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(y){qe(t,t.return,y)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:hs(e,t),ks(t),n&4&&Wp(t);break;case 21:break;default:hs(e,t),ks(t)}}function ks(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(ev(s)){var n=s;break e}s=s.return}throw Error(z(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(_i(r,""),n.flags&=-33);var a=Hp(t);ju(t,a,r);break;case 3:case 4:var o=n.stateNode.containerInfo,l=Hp(t);wu(t,l,o);break;default:throw Error(z(161))}}catch(c){qe(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Nj(t,e,s){Q=t,nv(t)}function nv(t,e,s){for(var n=(t.mode&1)!==0;Q!==null;){var r=Q,a=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||jo;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||Nt;l=jo;var d=Nt;if(jo=o,(Nt=c)&&!d)for(Q=r;Q!==null;)o=Q,c=o.child,o.tag===22&&o.memoizedState!==null?Gp(r):c!==null?(c.return=o,Q=c):Gp(r);for(;a!==null;)Q=a,nv(a),a=a.sibling;Q=r,jo=l,Nt=d}Vp(t)}else r.subtreeFlags&8772&&a!==null?(a.return=r,Q=a):Vp(t)}}function Vp(t){for(;Q!==null;){var e=Q;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:Nt||dc(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!Nt)if(s===null)n.componentDidMount();else{var r=e.elementType===e.type?s.memoizedProps:ms(e.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var a=e.updateQueue;a!==null&&Ep(e,a,n);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Ep(e,o,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Pi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(z(163))}Nt||e.flags&512&&bu(e)}catch(f){qe(e,e.return,f)}}if(e===t){Q=null;break}if(s=e.sibling,s!==null){s.return=e.return,Q=s;break}Q=e.return}}function qp(t){for(;Q!==null;){var e=Q;if(e===t){Q=null;break}var s=e.sibling;if(s!==null){s.return=e.return,Q=s;break}Q=e.return}}function Gp(t){for(;Q!==null;){var e=Q;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{dc(4,e)}catch(c){qe(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(c){qe(e,r,c)}}var a=e.return;try{bu(e)}catch(c){qe(e,a,c)}break;case 5:var o=e.return;try{bu(e)}catch(c){qe(e,o,c)}}}catch(c){qe(e,e.return,c)}if(e===t){Q=null;break}var l=e.sibling;if(l!==null){l.return=e.return,Q=l;break}Q=e.return}}var _j=Math.ceil,Rl=un.ReactCurrentDispatcher,Oh=un.ReactCurrentOwner,ls=un.ReactCurrentBatchConfig,we=0,ct=null,Qe=null,mt=0,Gt=0,ea=Wn(0),nt=0,$i=null,yr=0,uc=0,Ih=0,fi=null,Dt=null,Rh=0,ga=1/0,Gs=null,Fl=!1,Nu=null,On=null,No=!1,Nn=null,$l=0,mi=0,_u=null,al=-1,il=0;function Pt(){return we&6?Ye():al!==-1?al:al=Ye()}function In(t){return t.mode&1?we&2&&mt!==0?mt&-mt:oj.transition!==null?(il===0&&(il=Ux()),il):(t=Ce,t!==0||(t=window.event,t=t===void 0?16:Kx(t.type)),t):1}function bs(t,e,s,n){if(50<mi)throw mi=0,_u=null,Error(z(185));Ji(t,s,n),(!(we&2)||t!==ct)&&(t===ct&&(!(we&2)&&(uc|=s),nt===4&&bn(t,mt)),zt(t,n),s===1&&we===0&&!(e.mode&1)&&(ga=Ye()+500,oc&&Vn()))}function zt(t,e){var s=t.callbackNode;o1(t,e);var n=jl(t,t===ct?mt:0);if(n===0)s!==null&&sp(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&sp(s),e===1)t.tag===0?ij(Kp.bind(null,t)):fy(Kp.bind(null,t)),sj(function(){!(we&6)&&Vn()}),s=null;else{switch(Bx(n)){case 1:s=ch;break;case 4:s=$x;break;case 16:s=wl;break;case 536870912:s=zx;break;default:s=wl}s=uv(s,rv.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function rv(t,e){if(al=-1,il=0,we&6)throw Error(z(327));var s=t.callbackNode;if(ia()&&t.callbackNode!==s)return null;var n=jl(t,t===ct?mt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=zl(t,n);else{e=n;var r=we;we|=2;var a=iv();(ct!==t||mt!==e)&&(Gs=null,ga=Ye()+500,ur(t,e));do try{Cj();break}catch(l){av(t,l)}while(1);jh(),Rl.current=a,we=r,Qe!==null?e=0:(ct=null,mt=0,e=nt)}if(e!==0){if(e===2&&(r=Qd(t),r!==0&&(n=r,e=ku(t,r))),e===1)throw s=$i,ur(t,0),bn(t,n),zt(t,Ye()),s;if(e===6)bn(t,n);else{if(r=t.current.alternate,!(n&30)&&!kj(r)&&(e=zl(t,n),e===2&&(a=Qd(t),a!==0&&(n=a,e=ku(t,a))),e===1))throw s=$i,ur(t,0),bn(t,n),zt(t,Ye()),s;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(z(345));case 2:sr(t,Dt,Gs);break;case 3:if(bn(t,n),(n&130023424)===n&&(e=Rh+500-Ye(),10<e)){if(jl(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){Pt(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=au(sr.bind(null,t,Dt,Gs),e);break}sr(t,Dt,Gs);break;case 4:if(bn(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var o=31-vs(n);a=1<<o,o=e[o],o>r&&(r=o),n&=~a}if(n=r,n=Ye()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*_j(n/1960))-n,10<n){t.timeoutHandle=au(sr.bind(null,t,Dt,Gs),n);break}sr(t,Dt,Gs);break;case 5:sr(t,Dt,Gs);break;default:throw Error(z(329))}}}return zt(t,Ye()),t.callbackNode===s?rv.bind(null,t):null}function ku(t,e){var s=fi;return t.current.memoizedState.isDehydrated&&(ur(t,e).flags|=256),t=zl(t,e),t!==2&&(e=Dt,Dt=s,e!==null&&Su(e)),t}function Su(t){Dt===null?Dt=t:Dt.push.apply(Dt,t)}function kj(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var r=s[n],a=r.getSnapshot;r=r.value;try{if(!ws(a(),r))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function bn(t,e){for(e&=~Ih,e&=~uc,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-vs(e),n=1<<s;t[s]=-1,e&=~n}}function Kp(t){if(we&6)throw Error(z(327));ia();var e=jl(t,0);if(!(e&1))return zt(t,Ye()),null;var s=zl(t,e);if(t.tag!==0&&s===2){var n=Qd(t);n!==0&&(e=n,s=ku(t,n))}if(s===1)throw s=$i,ur(t,0),bn(t,e),zt(t,Ye()),s;if(s===6)throw Error(z(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,sr(t,Dt,Gs),zt(t,Ye()),null}function Fh(t,e){var s=we;we|=1;try{return t(e)}finally{we=s,we===0&&(ga=Ye()+500,oc&&Vn())}}function vr(t){Nn!==null&&Nn.tag===0&&!(we&6)&&ia();var e=we;we|=1;var s=ls.transition,n=Ce;try{if(ls.transition=null,Ce=1,t)return t()}finally{Ce=n,ls.transition=s,we=e,!(we&6)&&Vn()}}function $h(){Gt=ea.current,Ie(ea)}function ur(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,tj(s)),Qe!==null)for(s=Qe.return;s!==null;){var n=s;switch(vh(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Cl();break;case 3:ma(),Ie(Ft),Ie(_t),Ph();break;case 5:Ch(n);break;case 4:ma();break;case 13:Ie(Ue);break;case 19:Ie(Ue);break;case 10:Nh(n.type._context);break;case 22:case 23:$h()}s=s.return}if(ct=t,Qe=t=Rn(t.current,null),mt=Gt=e,nt=0,$i=null,Ih=uc=yr=0,Dt=fi=null,lr!==null){for(e=0;e<lr.length;e++)if(s=lr[e],n=s.interleaved,n!==null){s.interleaved=null;var r=n.next,a=s.pending;if(a!==null){var o=a.next;a.next=r,n.next=o}s.pending=n}lr=null}return t}function av(t,e){do{var s=Qe;try{if(jh(),sl.current=Il,Ol){for(var n=Be.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}Ol=!1}if(xr=0,lt=st=Be=null,ui=!1,Ii=0,Oh.current=null,s===null||s.return===null){nt=1,$i=e,Qe=null;break}e:{var a=t,o=s.return,l=s,c=e;if(e=mt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Op(o);if(m!==null){m.flags&=-257,Ip(m,o,l,a,e),m.mode&1&&Dp(a,d,e),e=m,c=d;var p=e.updateQueue;if(p===null){var y=new Set;y.add(c),e.updateQueue=y}else p.add(c);break e}else{if(!(e&1)){Dp(a,d,e),zh();break e}c=Error(z(426))}}else if(Fe&&l.mode&1){var x=Op(o);if(x!==null){!(x.flags&65536)&&(x.flags|=256),Ip(x,o,l,a,e),bh(pa(c,l));break e}}a=c=pa(c,l),nt!==4&&(nt=2),fi===null?fi=[a]:fi.push(a),a=o;do{switch(a.tag){case 3:a.flags|=65536,e&=-e,a.lanes|=e;var g=By(a,c,e);Pp(a,g);break e;case 1:l=c;var v=a.type,b=a.stateNode;if(!(a.flags&128)&&(typeof v.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(On===null||!On.has(b)))){a.flags|=65536,e&=-e,a.lanes|=e;var k=Hy(a,l,e);Pp(a,k);break e}}a=a.return}while(a!==null)}lv(s)}catch(j){e=j,Qe===s&&s!==null&&(Qe=s=s.return);continue}break}while(1)}function iv(){var t=Rl.current;return Rl.current=Il,t===null?Il:t}function zh(){(nt===0||nt===3||nt===2)&&(nt=4),ct===null||!(yr&268435455)&&!(uc&268435455)||bn(ct,mt)}function zl(t,e){var s=we;we|=2;var n=iv();(ct!==t||mt!==e)&&(Gs=null,ur(t,e));do try{Sj();break}catch(r){av(t,r)}while(1);if(jh(),we=s,Rl.current=n,Qe!==null)throw Error(z(261));return ct=null,mt=0,nt}function Sj(){for(;Qe!==null;)ov(Qe)}function Cj(){for(;Qe!==null&&!Xw();)ov(Qe)}function ov(t){var e=dv(t.alternate,t,Gt);t.memoizedProps=t.pendingProps,e===null?lv(t):Qe=e,Oh.current=null}function lv(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=bj(s,e),s!==null){s.flags&=32767,Qe=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{nt=6,Qe=null;return}}else if(s=vj(s,e,Gt),s!==null){Qe=s;return}if(e=e.sibling,e!==null){Qe=e;return}Qe=e=t}while(e!==null);nt===0&&(nt=5)}function sr(t,e,s){var n=Ce,r=ls.transition;try{ls.transition=null,Ce=1,Pj(t,e,s,n)}finally{ls.transition=r,Ce=n}return null}function Pj(t,e,s,n){do ia();while(Nn!==null);if(we&6)throw Error(z(327));s=t.finishedWork;var r=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(z(177));t.callbackNode=null,t.callbackPriority=0;var a=s.lanes|s.childLanes;if(l1(t,a),t===ct&&(Qe=ct=null,mt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||No||(No=!0,uv(wl,function(){return ia(),null})),a=(s.flags&15990)!==0,s.subtreeFlags&15990||a){a=ls.transition,ls.transition=null;var o=Ce;Ce=1;var l=we;we|=4,Oh.current=null,jj(t,s),sv(s,t),K1(nu),Nl=!!su,nu=su=null,t.current=s,Nj(s),Zw(),we=l,Ce=o,ls.transition=a}else t.current=s;if(No&&(No=!1,Nn=t,$l=r),a=t.pendingLanes,a===0&&(On=null),s1(s.stateNode),zt(t,Ye()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)r=e[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(Fl)throw Fl=!1,t=Nu,Nu=null,t;return $l&1&&t.tag!==0&&ia(),a=t.pendingLanes,a&1?t===_u?mi++:(mi=0,_u=t):mi=0,Vn(),null}function ia(){if(Nn!==null){var t=Bx($l),e=ls.transition,s=Ce;try{if(ls.transition=null,Ce=16>t?16:t,Nn===null)var n=!1;else{if(t=Nn,Nn=null,$l=0,we&6)throw Error(z(331));var r=we;for(we|=4,Q=t.current;Q!==null;){var a=Q,o=a.child;if(Q.flags&16){var l=a.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(Q=d;Q!==null;){var u=Q;switch(u.tag){case 0:case 11:case 15:hi(8,u,a)}var h=u.child;if(h!==null)h.return=u,Q=h;else for(;Q!==null;){u=Q;var f=u.sibling,m=u.return;if(Zy(u),u===d){Q=null;break}if(f!==null){f.return=m,Q=f;break}Q=m}}}var p=a.alternate;if(p!==null){var y=p.child;if(y!==null){p.child=null;do{var x=y.sibling;y.sibling=null,y=x}while(y!==null)}}Q=a}}if(a.subtreeFlags&2064&&o!==null)o.return=a,Q=o;else e:for(;Q!==null;){if(a=Q,a.flags&2048)switch(a.tag){case 0:case 11:case 15:hi(9,a,a.return)}var g=a.sibling;if(g!==null){g.return=a.return,Q=g;break e}Q=a.return}}var v=t.current;for(Q=v;Q!==null;){o=Q;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,Q=b;else e:for(o=v;Q!==null;){if(l=Q,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:dc(9,l)}}catch(j){qe(l,l.return,j)}if(l===o){Q=null;break e}var k=l.sibling;if(k!==null){k.return=l.return,Q=k;break e}Q=l.return}}if(we=r,Vn(),Ds&&typeof Ds.onPostCommitFiberRoot=="function")try{Ds.onPostCommitFiberRoot(sc,t)}catch{}n=!0}return n}finally{Ce=s,ls.transition=e}}return!1}function Yp(t,e,s){e=pa(s,e),e=By(t,e,1),t=Dn(t,e,1),e=Pt(),t!==null&&(Ji(t,1,e),zt(t,e))}function qe(t,e,s){if(t.tag===3)Yp(t,t,s);else for(;e!==null;){if(e.tag===3){Yp(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(On===null||!On.has(n))){t=pa(s,t),t=Hy(e,t,1),e=Dn(e,t,1),t=Pt(),e!==null&&(Ji(e,1,t),zt(e,t));break}}e=e.return}}function Ej(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=Pt(),t.pingedLanes|=t.suspendedLanes&s,ct===t&&(mt&s)===s&&(nt===4||nt===3&&(mt&130023424)===mt&&500>Ye()-Rh?ur(t,0):Ih|=s),zt(t,e)}function cv(t,e){e===0&&(t.mode&1?(e=fo,fo<<=1,!(fo&130023424)&&(fo=4194304)):e=1);var s=Pt();t=on(t,e),t!==null&&(Ji(t,e,s),zt(t,s))}function Aj(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),cv(t,s)}function Tj(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(z(314))}n!==null&&n.delete(e),cv(t,s)}var dv;dv=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||Ft.current)Rt=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return Rt=!1,yj(t,e,s);Rt=!!(t.flags&131072)}else Rt=!1,Fe&&e.flags&1048576&&my(e,Al,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;rl(t,e),t=e.pendingProps;var r=ua(e,_t.current);aa(e,s),r=Ah(null,e,n,t,r,s);var a=Th();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,$t(n)?(a=!0,Pl(e)):a=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,kh(e),r.updater=cc,e.stateNode=r,r._reactInternals=e,hu(e,n,t,s),e=pu(null,e,n,!0,a,s)):(e.tag=0,Fe&&a&&yh(e),Ct(null,e,r,s),e=e.child),e;case 16:n=e.elementType;e:{switch(rl(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=Mj(n),t=ms(n,t),r){case 0:e=mu(null,e,n,t,s);break e;case 1:e=$p(null,e,n,t,s);break e;case 11:e=Rp(null,e,n,t,s);break e;case 14:e=Fp(null,e,n,ms(n.type,t),s);break e}throw Error(z(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:ms(n,r),mu(t,e,n,r,s);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:ms(n,r),$p(t,e,n,r,s);case 3:e:{if(Gy(e),t===null)throw Error(z(387));n=e.pendingProps,a=e.memoizedState,r=a.element,by(t,e),Ml(e,n,null,s);var o=e.memoizedState;if(n=o.element,a.isDehydrated)if(a={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=a,e.memoizedState=a,e.flags&256){r=pa(Error(z(423)),e),e=zp(t,e,n,s,r);break e}else if(n!==r){r=pa(Error(z(424)),e),e=zp(t,e,n,s,r);break e}else for(Yt=Mn(e.stateNode.containerInfo.firstChild),Xt=e,Fe=!0,ys=null,s=yy(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(ha(),n===r){e=ln(t,e,s);break e}Ct(t,e,n,s)}e=e.child}return e;case 5:return wy(e),t===null&&cu(e),n=e.type,r=e.pendingProps,a=t!==null?t.memoizedProps:null,o=r.children,ru(n,r)?o=null:a!==null&&ru(n,a)&&(e.flags|=32),qy(t,e),Ct(t,e,o,s),e.child;case 6:return t===null&&cu(e),null;case 13:return Ky(t,e,s);case 4:return Sh(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=fa(e,null,n,s):Ct(t,e,n,s),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:ms(n,r),Rp(t,e,n,r,s);case 7:return Ct(t,e,e.pendingProps,s),e.child;case 8:return Ct(t,e,e.pendingProps.children,s),e.child;case 12:return Ct(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,a=e.memoizedProps,o=r.value,Le(Tl,n._currentValue),n._currentValue=o,a!==null)if(ws(a.value,o)){if(a.children===r.children&&!Ft.current){e=ln(t,e,s);break e}}else for(a=e.child,a!==null&&(a.return=e);a!==null;){var l=a.dependencies;if(l!==null){o=a.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(a.tag===1){c=tn(-1,s&-s),c.tag=2;var d=a.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}a.lanes|=s,c=a.alternate,c!==null&&(c.lanes|=s),du(a.return,s,e),l.lanes|=s;break}c=c.next}}else if(a.tag===10)o=a.type===e.type?null:a.child;else if(a.tag===18){if(o=a.return,o===null)throw Error(z(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),du(o,s,e),o=a.sibling}else o=a.child;if(o!==null)o.return=a;else for(o=a;o!==null;){if(o===e){o=null;break}if(a=o.sibling,a!==null){a.return=o.return,o=a;break}o=o.return}a=o}Ct(t,e,r.children,s),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,aa(e,s),r=ds(r),n=n(r),e.flags|=1,Ct(t,e,n,s),e.child;case 14:return n=e.type,r=ms(n,e.pendingProps),r=ms(n.type,r),Fp(t,e,n,r,s);case 15:return Wy(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:ms(n,r),rl(t,e),e.tag=1,$t(n)?(t=!0,Pl(e)):t=!1,aa(e,s),Uy(e,n,r),hu(e,n,r,s),pu(null,e,n,!0,t,s);case 19:return Yy(t,e,s);case 22:return Vy(t,e,s)}throw Error(z(156,e.tag))};function uv(t,e){return Fx(t,e)}function Lj(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function is(t,e,s,n){return new Lj(t,e,s,n)}function Uh(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Mj(t){if(typeof t=="function")return Uh(t)?1:0;if(t!=null){if(t=t.$$typeof,t===ih)return 11;if(t===oh)return 14}return 2}function Rn(t,e){var s=t.alternate;return s===null?(s=is(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function ol(t,e,s,n,r,a){var o=2;if(n=t,typeof t=="function")Uh(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case Wr:return hr(s.children,r,a,e);case ah:o=8,r|=8;break;case Id:return t=is(12,s,e,r|2),t.elementType=Id,t.lanes=a,t;case Rd:return t=is(13,s,e,r),t.elementType=Rd,t.lanes=a,t;case Fd:return t=is(19,s,e,r),t.elementType=Fd,t.lanes=a,t;case wx:return hc(s,r,a,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case vx:o=10;break e;case bx:o=9;break e;case ih:o=11;break e;case oh:o=14;break e;case gn:o=16,n=null;break e}throw Error(z(130,t==null?t:typeof t,""))}return e=is(o,s,e,r),e.elementType=t,e.type=n,e.lanes=a,e}function hr(t,e,s,n){return t=is(7,t,n,e),t.lanes=s,t}function hc(t,e,s,n){return t=is(22,t,n,e),t.elementType=wx,t.lanes=s,t.stateNode={isHidden:!1},t}function ld(t,e,s){return t=is(6,t,null,e),t.lanes=s,t}function cd(t,e,s){return e=is(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Dj(t,e,s,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=Hc(0),this.expirationTimes=Hc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=Hc(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function Bh(t,e,s,n,r,a,o,l,c){return t=new Dj(t,e,s,l,c),e===1?(e=1,a===!0&&(e|=8)):e=0,a=is(3,null,null,e),t.current=a,a.stateNode=t,a.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},kh(a),t}function Oj(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:Hr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function hv(t){if(!t)return zn;t=t._reactInternals;e:{if(_r(t)!==t||t.tag!==1)throw Error(z(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if($t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(z(171))}if(t.tag===1){var s=t.type;if($t(s))return hy(t,s,e)}return e}function fv(t,e,s,n,r,a,o,l,c){return t=Bh(s,n,!0,t,r,a,o,l,c),t.context=hv(null),s=t.current,n=Pt(),r=In(s),a=tn(n,r),a.callback=e??null,Dn(s,a,r),t.current.lanes=r,Ji(t,r,n),zt(t,n),t}function fc(t,e,s,n){var r=e.current,a=Pt(),o=In(r);return s=hv(s),e.context===null?e.context=s:e.pendingContext=s,e=tn(a,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=Dn(r,e,o),t!==null&&(bs(t,r,o,a),tl(t,r,o)),o}function Ul(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function Jp(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function Hh(t,e){Jp(t,e),(t=t.alternate)&&Jp(t,e)}function Ij(){return null}var mv=typeof reportError=="function"?reportError:function(t){console.error(t)};function Wh(t){this._internalRoot=t}mc.prototype.render=Wh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(z(409));fc(t,e,null,null)};mc.prototype.unmount=Wh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;vr(function(){fc(null,t,null,null)}),e[an]=null}};function mc(t){this._internalRoot=t}mc.prototype.unstable_scheduleHydration=function(t){if(t){var e=Vx();t={blockedOn:null,target:t,priority:e};for(var s=0;s<vn.length&&e!==0&&e<vn[s].priority;s++);vn.splice(s,0,t),s===0&&Gx(t)}};function Vh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function pc(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function Qp(){}function Rj(t,e,s,n,r){if(r){if(typeof n=="function"){var a=n;n=function(){var d=Ul(o);a.call(d)}}var o=fv(e,n,t,0,null,!1,!1,"",Qp);return t._reactRootContainer=o,t[an]=o.current,Ti(t.nodeType===8?t.parentNode:t),vr(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var d=Ul(c);l.call(d)}}var c=Bh(t,0,!1,null,null,!1,!1,"",Qp);return t._reactRootContainer=c,t[an]=c.current,Ti(t.nodeType===8?t.parentNode:t),vr(function(){fc(e,c,s,n)}),c}function gc(t,e,s,n,r){var a=s._reactRootContainer;if(a){var o=a;if(typeof r=="function"){var l=r;r=function(){var c=Ul(o);l.call(c)}}fc(e,o,t,r)}else o=Rj(s,e,t,r,n);return Ul(o)}Hx=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=ei(e.pendingLanes);s!==0&&(dh(e,s|1),zt(e,Ye()),!(we&6)&&(ga=Ye()+500,Vn()))}break;case 13:vr(function(){var n=on(t,1);if(n!==null){var r=Pt();bs(n,t,1,r)}}),Hh(t,1)}};uh=function(t){if(t.tag===13){var e=on(t,134217728);if(e!==null){var s=Pt();bs(e,t,134217728,s)}Hh(t,134217728)}};Wx=function(t){if(t.tag===13){var e=In(t),s=on(t,e);if(s!==null){var n=Pt();bs(s,t,e,n)}Hh(t,e)}};Vx=function(){return Ce};qx=function(t,e){var s=Ce;try{return Ce=t,e()}finally{Ce=s}};Kd=function(t,e,s){switch(e){case"input":if(Ud(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var r=ic(n);if(!r)throw Error(z(90));Nx(n),Ud(n,r)}}}break;case"textarea":kx(t,s);break;case"select":e=s.value,e!=null&&ta(t,!!s.multiple,e,!1)}};Lx=Fh;Mx=vr;var Fj={usingClientEntryPoint:!1,Events:[Xi,Kr,ic,Ax,Tx,Fh]},Ba={findFiberByHostInstance:or,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},$j={bundleType:Ba.bundleType,version:Ba.version,rendererPackageName:Ba.rendererPackageName,rendererConfig:Ba.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:un.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=Ix(t),t===null?null:t.stateNode},findFiberByHostInstance:Ba.findFiberByHostInstance||Ij,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var _o=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!_o.isDisabled&&_o.supportsFiber)try{sc=_o.inject($j),Ds=_o}catch{}}ts.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Fj;ts.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!Vh(e))throw Error(z(200));return Oj(t,e,null,s)};ts.createRoot=function(t,e){if(!Vh(t))throw Error(z(299));var s=!1,n="",r=mv;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=Bh(t,1,!1,null,null,s,!1,n,r),t[an]=e.current,Ti(t.nodeType===8?t.parentNode:t),new Wh(e)};ts.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(z(188)):(t=Object.keys(t).join(","),Error(z(268,t)));return t=Ix(e),t=t===null?null:t.stateNode,t};ts.flushSync=function(t){return vr(t)};ts.hydrate=function(t,e,s){if(!pc(e))throw Error(z(200));return gc(null,t,e,!0,s)};ts.hydrateRoot=function(t,e,s){if(!Vh(t))throw Error(z(405));var n=s!=null&&s.hydratedSources||null,r=!1,a="",o=mv;if(s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(a=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=fv(e,null,t,1,s??null,r,!1,a,o),t[an]=e.current,Ti(t),n)for(t=0;t<n.length;t++)s=n[t],r=s._getVersion,r=r(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,r]:e.mutableSourceEagerHydrationData.push(s,r);return new mc(e)};ts.render=function(t,e,s){if(!pc(e))throw Error(z(200));return gc(null,t,e,!1,s)};ts.unmountComponentAtNode=function(t){if(!pc(t))throw Error(z(40));return t._reactRootContainer?(vr(function(){gc(null,null,t,!1,function(){t._reactRootContainer=null,t[an]=null})}),!0):!1};ts.unstable_batchedUpdates=Fh;ts.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!pc(s))throw Error(z(200));if(t==null||t._reactInternals===void 0)throw Error(z(38));return gc(t,e,s,!1,n)};ts.version="18.3.1-next-f1338f8080-20240426";function pv(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(pv)}catch(t){console.error(t)}}pv(),px.exports=ts;var zj=px.exports,Xp=zj;Dd.createRoot=Xp.createRoot,Dd.hydrateRoot=Xp.hydrateRoot;const Uj="modulepreload",Bj=function(t){return"/"+t},Zp={},kr=function(e,s,n){if(!s||s.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(s.map(a=>{if(a=Bj(a),a in Zp)return;Zp[a]=!0;const o=a.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let u=r.length-1;u>=0;u--){const h=r[u];if(h.href===a&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":Uj,o||(d.as="script",d.crossOrigin=""),d.href=a,document.head.appendChild(d),o)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>e()).catch(a=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=a,window.dispatchEvent(o),!o.defaultPrevented)throw a})};var qh={};Object.defineProperty(qh,"__esModule",{value:!0});qh.parse=Yj;qh.serialize=Jj;const Hj=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Wj=/^[\u0021-\u003A\u003C-\u007E]*$/,Vj=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,qj=/^[\u0020-\u003A\u003D-\u007E]*$/,Gj=Object.prototype.toString,Kj=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function Yj(t,e){const s=new Kj,n=t.length;if(n<2)return s;const r=(e==null?void 0:e.decode)||Qj;let a=0;do{const o=t.indexOf("=",a);if(o===-1)break;const l=t.indexOf(";",a),c=l===-1?n:l;if(o>c){a=t.lastIndexOf(";",o-1)+1;continue}const d=e0(t,a,o),u=t0(t,o,d),h=t.slice(d,u);if(s[h]===void 0){let f=e0(t,o+1,c),m=t0(t,c,f);const p=r(t.slice(f,m));s[h]=p}a=c+1}while(a<n);return s}function e0(t,e,s){do{const n=t.charCodeAt(e);if(n!==32&&n!==9)return e}while(++e<s);return s}function t0(t,e,s){for(;e>s;){const n=t.charCodeAt(--e);if(n!==32&&n!==9)return e+1}return s}function Jj(t,e,s){const n=(s==null?void 0:s.encode)||encodeURIComponent;if(!Hj.test(t))throw new TypeError(`argument name is invalid: ${t}`);const r=n(e);if(!Wj.test(r))throw new TypeError(`argument val is invalid: ${e}`);let a=t+"="+r;if(!s)return a;if(s.maxAge!==void 0){if(!Number.isInteger(s.maxAge))throw new TypeError(`option maxAge is invalid: ${s.maxAge}`);a+="; Max-Age="+s.maxAge}if(s.domain){if(!Vj.test(s.domain))throw new TypeError(`option domain is invalid: ${s.domain}`);a+="; Domain="+s.domain}if(s.path){if(!qj.test(s.path))throw new TypeError(`option path is invalid: ${s.path}`);a+="; Path="+s.path}if(s.expires){if(!Xj(s.expires)||!Number.isFinite(s.expires.valueOf()))throw new TypeError(`option expires is invalid: ${s.expires}`);a+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(a+="; HttpOnly"),s.secure&&(a+="; Secure"),s.partitioned&&(a+="; Partitioned"),s.priority)switch(typeof s.priority=="string"?s.priority.toLowerCase():void 0){case"low":a+="; Priority=Low";break;case"medium":a+="; Priority=Medium";break;case"high":a+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${s.priority}`)}if(s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":a+="; SameSite=Strict";break;case"lax":a+="; SameSite=Lax";break;case"none":a+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${s.sameSite}`)}return a}function Qj(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function Xj(t){return Gj.call(t)==="[object Date]"}var s0="popstate";function Zj(t={}){function e(n,r){let{pathname:a,search:o,hash:l}=n.location;return Cu("",{pathname:a,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function s(n,r){return typeof r=="string"?r:zi(r)}return tN(e,s,null,t)}function ze(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function js(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function eN(){return Math.random().toString(36).substring(2,10)}function n0(t,e){return{usr:t.state,key:t.key,idx:e}}function Cu(t,e,s=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Pa(e):e,state:s,key:e&&e.key||n||eN()}}function zi({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Pa(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function tN(t,e,s,n={}){let{window:r=document.defaultView,v5Compat:a=!1}=n,o=r.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let x=u(),g=x==null?null:x-d;d=x,c&&c({action:l,location:y.location,delta:g})}function f(x,g){l="PUSH";let v=Cu(y.location,x,g);s&&s(v,x),d=u()+1;let b=n0(v,d),k=y.createHref(v);try{o.pushState(b,"",k)}catch(j){if(j instanceof DOMException&&j.name==="DataCloneError")throw j;r.location.assign(k)}a&&c&&c({action:l,location:y.location,delta:1})}function m(x,g){l="REPLACE";let v=Cu(y.location,x,g);s&&s(v,x),d=u();let b=n0(v,d),k=y.createHref(v);o.replaceState(b,"",k),a&&c&&c({action:l,location:y.location,delta:0})}function p(x){return sN(x)}let y={get action(){return l},get location(){return t(r,o)},listen(x){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(s0,h),c=x,()=>{r.removeEventListener(s0,h),c=null}},createHref(x){return e(r,x)},createURL:p,encodeLocation(x){let g=p(x);return{pathname:g.pathname,search:g.search,hash:g.hash}},push:f,replace:m,go(x){return o.go(x)}};return y}function sN(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),ze(s,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:zi(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=s+n),new URL(n,s)}function gv(t,e,s="/"){return nN(t,e,s,!1)}function nN(t,e,s,n){let r=typeof e=="string"?Pa(e):e,a=cn(r.pathname||"/",s);if(a==null)return null;let o=xv(t);rN(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=pN(a);l=fN(o[c],d,n)}return l}function xv(t,e=[],s=[],n=""){let r=(a,o,l)=>{let c={relativePath:l===void 0?a.path||"":l,caseSensitive:a.caseSensitive===!0,childrenIndex:o,route:a};c.relativePath.startsWith("/")&&(ze(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let d=sn([n,c.relativePath]),u=s.concat(c);a.children&&a.children.length>0&&(ze(a.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),xv(a.children,e,u,d)),!(a.path==null&&!a.index)&&e.push({path:d,score:uN(d,a.index),routesMeta:u})};return t.forEach((a,o)=>{var l;if(a.path===""||!((l=a.path)!=null&&l.includes("?")))r(a,o);else for(let c of yv(a.path))r(a,o,c)}),e}function yv(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,r=s.endsWith("?"),a=s.replace(/\?$/,"");if(n.length===0)return r?[a,""]:[a];let o=yv(n.join("/")),l=[];return l.push(...o.map(c=>c===""?a:[a,c].join("/"))),r&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function rN(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:hN(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}var aN=/^:[\w-]+$/,iN=3,oN=2,lN=1,cN=10,dN=-2,r0=t=>t==="*";function uN(t,e){let s=t.split("/"),n=s.length;return s.some(r0)&&(n+=dN),e&&(n+=oN),s.filter(r=>!r0(r)).reduce((r,a)=>r+(aN.test(a)?iN:a===""?lN:cN),n)}function hN(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function fN(t,e,s=!1){let{routesMeta:n}=t,r={},a="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=a==="/"?e:e.slice(a.length)||"/",h=Bl({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&s&&!n[n.length-1].route.index&&(h=Bl({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:sn([a,h.pathname]),pathnameBase:vN(sn([a,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(a=sn([a,h.pathnameBase]))}return o}function Bl(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=mN(t.path,t.caseSensitive,t.end),r=e.match(s);if(!r)return null;let a=r[0],o=a.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((d,{paramName:u,isOptional:h},f)=>{if(u==="*"){let p=l[f]||"";o=a.slice(0,a.length-p.length).replace(/(.)\/+$/,"$1")}const m=l[f];return h&&!m?d[u]=void 0:d[u]=(m||"").replace(/%2F/g,"/"),d},{}),pathname:a,pathnameBase:o,pattern:t}}function mN(t,e=!1,s=!0){js(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function pN(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return js(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function cn(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function gN(t,e="/"){let{pathname:s,search:n="",hash:r=""}=typeof t=="string"?Pa(t):t;return{pathname:s?s.startsWith("/")?s:xN(s,e):e,search:bN(n),hash:wN(r)}}function xN(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?s.length>1&&s.pop():r!=="."&&s.push(r)}),s.length>1?s.join("/"):"/"}function dd(t,e,s,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function yN(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function Gh(t){let e=yN(t);return e.map((s,n)=>n===e.length-1?s.pathname:s.pathnameBase)}function Kh(t,e,s,n=!1){let r;typeof t=="string"?r=Pa(t):(r={...t},ze(!r.pathname||!r.pathname.includes("?"),dd("?","pathname","search",r)),ze(!r.pathname||!r.pathname.includes("#"),dd("#","pathname","hash",r)),ze(!r.search||!r.search.includes("#"),dd("#","search","hash",r)));let a=t===""||r.pathname==="",o=a?"/":r.pathname,l;if(o==null)l=s;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=gN(r,l),d=o&&o!=="/"&&o.endsWith("/"),u=(a||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var sn=t=>t.join("/").replace(/\/\/+/g,"/"),vN=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),bN=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,wN=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function jN(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var vv=["POST","PUT","PATCH","DELETE"];new Set(vv);var NN=["GET",...vv];new Set(NN);var Ea=w.createContext(null);Ea.displayName="DataRouter";var xc=w.createContext(null);xc.displayName="DataRouterState";var bv=w.createContext({isTransitioning:!1});bv.displayName="ViewTransition";var _N=w.createContext(new Map);_N.displayName="Fetchers";var kN=w.createContext(null);kN.displayName="Await";var Ns=w.createContext(null);Ns.displayName="Navigation";var eo=w.createContext(null);eo.displayName="Location";var _s=w.createContext({outlet:null,matches:[],isDataRoute:!1});_s.displayName="Route";var Yh=w.createContext(null);Yh.displayName="RouteError";function SN(t,{relative:e}={}){ze(Aa(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=w.useContext(Ns),{hash:r,pathname:a,search:o}=to(t,{relative:e}),l=a;return s!=="/"&&(l=a==="/"?s:sn([s,a])),n.createHref({pathname:l,search:o,hash:r})}function Aa(){return w.useContext(eo)!=null}function Ut(){return ze(Aa(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(eo).location}var wv="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function jv(t){w.useContext(Ns).static||w.useLayoutEffect(t)}function gt(){let{isDataRoute:t}=w.useContext(_s);return t?$N():CN()}function CN(){ze(Aa(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(Ea),{basename:e,navigator:s}=w.useContext(Ns),{matches:n}=w.useContext(_s),{pathname:r}=Ut(),a=JSON.stringify(Gh(n)),o=w.useRef(!1);return jv(()=>{o.current=!0}),w.useCallback((c,d={})=>{if(js(o.current,wv),!o.current)return;if(typeof c=="number"){s.go(c);return}let u=Kh(c,JSON.parse(a),r,d.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:sn([e,u.pathname])),(d.replace?s.replace:s.push)(u,d.state,d)},[e,s,a,r,t])}w.createContext(null);function Nv(){let{matches:t}=w.useContext(_s),e=t[t.length-1];return e?e.params:{}}function to(t,{relative:e}={}){let{matches:s}=w.useContext(_s),{pathname:n}=Ut(),r=JSON.stringify(Gh(s));return w.useMemo(()=>Kh(t,JSON.parse(r),n,e==="path"),[t,r,n,e])}function PN(t,e){return _v(t,e)}function _v(t,e,s,n){var g;ze(Aa(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=w.useContext(Ns),{matches:a}=w.useContext(_s),o=a[a.length-1],l=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",u=o&&o.route;{let v=u&&u.path||"";kv(c,!u||v.endsWith("*")||v.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${v}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${v}"> to <Route path="${v==="/"?"*":`${v}/*`}">.`)}let h=Ut(),f;if(e){let v=typeof e=="string"?Pa(e):e;ze(d==="/"||((g=v.pathname)==null?void 0:g.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${v.pathname}" was given in the \`location\` prop.`),f=v}else f=h;let m=f.pathname||"/",p=m;if(d!=="/"){let v=d.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(v.length).join("/")}let y=gv(t,{pathname:p});js(u||y!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),js(y==null||y[y.length-1].route.element!==void 0||y[y.length-1].route.Component!==void 0||y[y.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let x=MN(y&&y.map(v=>Object.assign({},v,{params:Object.assign({},l,v.params),pathname:sn([d,r.encodeLocation?r.encodeLocation(v.pathname).pathname:v.pathname]),pathnameBase:v.pathnameBase==="/"?d:sn([d,r.encodeLocation?r.encodeLocation(v.pathnameBase).pathname:v.pathnameBase])})),a,s,n);return e&&x?w.createElement(eo.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},x):x}function EN(){let t=FN(),e=jN(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},a={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=w.createElement(w.Fragment,null,w.createElement("p",null,"💿 Hey developer 👋"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:a},"ErrorBoundary")," or"," ",w.createElement("code",{style:a},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),s?w.createElement("pre",{style:r},s):null,o)}var AN=w.createElement(EN,null),TN=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?w.createElement(_s.Provider,{value:this.props.routeContext},w.createElement(Yh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function LN({routeContext:t,match:e,children:s}){let n=w.useContext(Ea);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(_s.Provider,{value:t},s)}function MN(t,e=[],s=null,n=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let r=t,a=s==null?void 0:s.errors;if(a!=null){let c=r.findIndex(d=>d.route.id&&(a==null?void 0:a[d.route.id])!==void 0);ze(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(a).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let o=!1,l=-1;if(s)for(let c=0;c<r.length;c++){let d=r[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:u,errors:h}=s,f=d.route.loader&&!u.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||f){o=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((c,d,u)=>{let h,f=!1,m=null,p=null;s&&(h=a&&d.route.id?a[d.route.id]:void 0,m=d.route.errorElement||AN,o&&(l<0&&u===0?(kv("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,p=null):l===u&&(f=!0,p=d.route.hydrateFallbackElement||null)));let y=e.concat(r.slice(0,u+1)),x=()=>{let g;return h?g=m:f?g=p:d.route.Component?g=w.createElement(d.route.Component,null):d.route.element?g=d.route.element:g=c,w.createElement(LN,{match:d,routeContext:{outlet:c,matches:y,isDataRoute:s!=null},children:g})};return s&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?w.createElement(TN,{location:s.location,revalidation:s.revalidation,component:m,error:h,children:x(),routeContext:{outlet:null,matches:y,isDataRoute:!0}}):x()},null)}function Jh(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function DN(t){let e=w.useContext(Ea);return ze(e,Jh(t)),e}function ON(t){let e=w.useContext(xc);return ze(e,Jh(t)),e}function IN(t){let e=w.useContext(_s);return ze(e,Jh(t)),e}function Qh(t){let e=IN(t),s=e.matches[e.matches.length-1];return ze(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function RN(){return Qh("useRouteId")}function FN(){var n;let t=w.useContext(Yh),e=ON("useRouteError"),s=Qh("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[s]}function $N(){let{router:t}=DN("useNavigate"),e=Qh("useNavigate"),s=w.useRef(!1);return jv(()=>{s.current=!0}),w.useCallback(async(r,a={})=>{js(s.current,wv),s.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...a}))},[t,e])}var a0={};function kv(t,e,s){!e&&!a0[t]&&(a0[t]=!0,js(!1,s))}w.memo(zN);function zN({routes:t,future:e,state:s}){return _v(t,void 0,s,e)}function Pu({to:t,replace:e,state:s,relative:n}){ze(Aa(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=w.useContext(Ns);js(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:a}=w.useContext(_s),{pathname:o}=Ut(),l=gt(),c=Kh(t,Gh(a),o,n==="path"),d=JSON.stringify(c);return w.useEffect(()=>{l(JSON.parse(d),{replace:e,state:s,relative:n})},[l,d,n,e,s]),null}function Vt(t){ze(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function UN({basename:t="/",children:e=null,location:s,navigationType:n="POP",navigator:r,static:a=!1}){ze(!Aa(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=w.useMemo(()=>({basename:o,navigator:r,static:a,future:{}}),[o,r,a]);typeof s=="string"&&(s=Pa(s));let{pathname:c="/",search:d="",hash:u="",state:h=null,key:f="default"}=s,m=w.useMemo(()=>{let p=cn(c,o);return p==null?null:{location:{pathname:p,search:d,hash:u,state:h,key:f},navigationType:n}},[o,c,d,u,h,f,n]);return js(m!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:w.createElement(Ns.Provider,{value:l},w.createElement(eo.Provider,{children:e,value:m}))}function BN({children:t,location:e}){return PN(Eu(t),e)}function Eu(t,e=[]){let s=[];return w.Children.forEach(t,(n,r)=>{if(!w.isValidElement(n))return;let a=[...e,r];if(n.type===w.Fragment){s.push.apply(s,Eu(n.props.children,a));return}ze(n.type===Vt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),ze(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||a.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=Eu(n.props.children,a)),s.push(o)}),s}var ll="get",cl="application/x-www-form-urlencoded";function yc(t){return t!=null&&typeof t.tagName=="string"}function HN(t){return yc(t)&&t.tagName.toLowerCase()==="button"}function WN(t){return yc(t)&&t.tagName.toLowerCase()==="form"}function VN(t){return yc(t)&&t.tagName.toLowerCase()==="input"}function qN(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function GN(t,e){return t.button===0&&(!e||e==="_self")&&!qN(t)}var ko=null;function KN(){if(ko===null)try{new FormData(document.createElement("form"),0),ko=!1}catch{ko=!0}return ko}var YN=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function ud(t){return t!=null&&!YN.has(t)?(js(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${cl}"`),null):t}function JN(t,e){let s,n,r,a,o;if(WN(t)){let l=t.getAttribute("action");n=l?cn(l,e):null,s=t.getAttribute("method")||ll,r=ud(t.getAttribute("enctype"))||cl,a=new FormData(t)}else if(HN(t)||VN(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?cn(c,e):null,s=t.getAttribute("formmethod")||l.getAttribute("method")||ll,r=ud(t.getAttribute("formenctype"))||ud(l.getAttribute("enctype"))||cl,a=new FormData(l,t),!KN()){let{name:d,type:u,value:h}=t;if(u==="image"){let f=d?`${d}.`:"";a.append(`${f}x`,"0"),a.append(`${f}y`,"0")}else d&&a.append(d,h)}}else{if(yc(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=ll,n=null,r=cl,o=t}return a&&r==="text/plain"&&(o=a,a=void 0),{action:n,method:s.toLowerCase(),encType:r,formData:a,body:o}}function Xh(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function QN(t,e){if(t.id in e)return e[t.id];try{let s=await kr(()=>import(t.module),[]);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function XN(t){return t!=null&&typeof t.page=="string"}function ZN(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function e_(t,e,s){let n=await Promise.all(t.map(async r=>{let a=e.routes[r.route.id];if(a){let o=await QN(a,s);return o.links?o.links():[]}return[]}));return r_(n.flat(1).filter(ZN).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function i0(t,e,s,n,r,a){let o=(c,d)=>s[d]?c.route.id!==s[d].route.id:!0,l=(c,d)=>{var u;return s[d].pathname!==c.pathname||((u=s[d].route.path)==null?void 0:u.endsWith("*"))&&s[d].params["*"]!==c.params["*"]};return a==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):a==="data"?e.filter((c,d)=>{var h;let u=n.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((h=s[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function t_(t,e,{includeHydrateFallback:s}={}){return s_(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let a=[r.module];return r.clientActionModule&&(a=a.concat(r.clientActionModule)),r.clientLoaderModule&&(a=a.concat(r.clientLoaderModule)),s&&r.hydrateFallbackModule&&(a=a.concat(r.hydrateFallbackModule)),r.imports&&(a=a.concat(r.imports)),a}).flat(1))}function s_(t){return[...new Set(t)]}function n_(t){let e={},s=Object.keys(t).sort();for(let n of s)e[n]=t[n];return e}function r_(t,e){let s=new Set,n=new Set(e);return t.reduce((r,a)=>{if(e&&!XN(a)&&a.as==="script"&&a.href&&n.has(a.href))return r;let l=JSON.stringify(n_(a));return s.has(l)||(s.add(l),r.push({key:l,link:a})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var a_=new Set([100,101,204,205]);function i_(t,e){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname="_root.data":e&&cn(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}function Sv(){let t=w.useContext(Ea);return Xh(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function o_(){let t=w.useContext(xc);return Xh(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Zh=w.createContext(void 0);Zh.displayName="FrameworkContext";function Cv(){let t=w.useContext(Zh);return Xh(t,"You must render this element inside a <HydratedRouter> element"),t}function l_(t,e){let s=w.useContext(Zh),[n,r]=w.useState(!1),[a,o]=w.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=e,f=w.useRef(null);w.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let y=g=>{g.forEach(v=>{o(v.isIntersecting)})},x=new IntersectionObserver(y,{threshold:.5});return f.current&&x.observe(f.current),()=>{x.disconnect()}}},[t]),w.useEffect(()=>{if(n){let y=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(y)}}},[n]);let m=()=>{r(!0)},p=()=>{r(!1),o(!1)};return s?t!=="intent"?[a,f,{}]:[a,f,{onFocus:Ha(l,m),onBlur:Ha(c,p),onMouseEnter:Ha(d,m),onMouseLeave:Ha(u,p),onTouchStart:Ha(h,m)}]:[!1,f,{}]}function Ha(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function c_({page:t,...e}){let{router:s}=Sv(),n=w.useMemo(()=>gv(s.routes,t,s.basename),[s.routes,t,s.basename]);return n?w.createElement(u_,{page:t,matches:n,...e}):null}function d_(t){let{manifest:e,routeModules:s}=Cv(),[n,r]=w.useState([]);return w.useEffect(()=>{let a=!1;return e_(t,e,s).then(o=>{a||r(o)}),()=>{a=!0}},[t,e,s]),n}function u_({page:t,matches:e,...s}){let n=Ut(),{manifest:r,routeModules:a}=Cv(),{basename:o}=Sv(),{loaderData:l,matches:c}=o_(),d=w.useMemo(()=>i0(t,e,c,r,n,"data"),[t,e,c,r,n]),u=w.useMemo(()=>i0(t,e,c,r,n,"assets"),[t,e,c,r,n]),h=w.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let p=new Set,y=!1;if(e.forEach(g=>{var b;let v=r.routes[g.route.id];!v||!v.hasLoader||(!d.some(k=>k.route.id===g.route.id)&&g.route.id in l&&((b=a[g.route.id])!=null&&b.shouldRevalidate)||v.hasClientLoader?y=!0:p.add(g.route.id))}),p.size===0)return[];let x=i_(t,o);return y&&p.size>0&&x.searchParams.set("_routes",e.filter(g=>p.has(g.route.id)).map(g=>g.route.id).join(",")),[x.pathname+x.search]},[o,l,n,r,d,e,t,a]),f=w.useMemo(()=>t_(u,r),[u,r]),m=d_(u);return w.createElement(w.Fragment,null,h.map(p=>w.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...s})),f.map(p=>w.createElement("link",{key:p,rel:"modulepreload",href:p,...s})),m.map(({key:p,link:y})=>w.createElement("link",{key:p,...y})))}function h_(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var Pv=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Pv&&(window.__reactRouterVersion="7.6.2")}catch{}function f_({basename:t,children:e,window:s}){let n=w.useRef();n.current==null&&(n.current=Zj({window:s,v5Compat:!0}));let r=n.current,[a,o]=w.useState({action:r.action,location:r.location}),l=w.useCallback(c=>{w.startTransition(()=>o(c))},[o]);return w.useLayoutEffect(()=>r.listen(l),[r,l]),w.createElement(UN,{basename:t,children:e,location:a.location,navigationType:a.action,navigator:r})}var Ev=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,Av=w.forwardRef(function({onClick:e,discover:s="render",prefetch:n="none",relative:r,reloadDocument:a,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,...f},m){let{basename:p}=w.useContext(Ns),y=typeof d=="string"&&Ev.test(d),x,g=!1;if(typeof d=="string"&&y&&(x=d,Pv))try{let P=new URL(window.location.href),N=d.startsWith("//")?new URL(P.protocol+d):new URL(d),L=cn(N.pathname,p);N.origin===P.origin&&L!=null?d=L+N.search+N.hash:g=!0}catch{js(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let v=SN(d,{relative:r}),[b,k,j]=l_(n,f),S=x_(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:r,viewTransition:h});function C(P){e&&e(P),P.defaultPrevented||S(P)}let _=w.createElement("a",{...f,...j,href:x||v,onClick:g||a?e:C,ref:h_(m,k),target:c,"data-discover":!y&&s==="render"?"true":void 0});return b&&!y?w.createElement(w.Fragment,null,_,w.createElement(c_,{page:v})):_});Av.displayName="Link";var m_=w.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:n="",end:r=!1,style:a,to:o,viewTransition:l,children:c,...d},u){let h=to(o,{relative:d.relative}),f=Ut(),m=w.useContext(xc),{navigator:p,basename:y}=w.useContext(Ns),x=m!=null&&j_(h)&&l===!0,g=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,v=f.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(v=v.toLowerCase(),b=b?b.toLowerCase():null,g=g.toLowerCase()),b&&y&&(b=cn(b,y)||b);const k=g!=="/"&&g.endsWith("/")?g.length-1:g.length;let j=v===g||!r&&v.startsWith(g)&&v.charAt(k)==="/",S=b!=null&&(b===g||!r&&b.startsWith(g)&&b.charAt(g.length)==="/"),C={isActive:j,isPending:S,isTransitioning:x},_=j?e:void 0,P;typeof n=="function"?P=n(C):P=[n,j?"active":null,S?"pending":null,x?"transitioning":null].filter(Boolean).join(" ");let N=typeof a=="function"?a(C):a;return w.createElement(Av,{...d,"aria-current":_,className:P,ref:u,style:N,to:o,viewTransition:l},typeof c=="function"?c(C):c)});m_.displayName="NavLink";var p_=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:n,replace:r,state:a,method:o=ll,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,...f},m)=>{let p=b_(),y=w_(l,{relative:d}),x=o.toLowerCase()==="get"?"get":"post",g=typeof l=="string"&&Ev.test(l),v=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let k=b.nativeEvent.submitter,j=(k==null?void 0:k.getAttribute("formmethod"))||o;p(k||b.currentTarget,{fetcherKey:e,method:j,navigate:s,replace:r,state:a,relative:d,preventScrollReset:u,viewTransition:h})};return w.createElement("form",{ref:m,method:x,action:y,onSubmit:n?c:v,...f,"data-discover":!g&&t==="render"?"true":void 0})});p_.displayName="Form";function g_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Tv(t){let e=w.useContext(Ea);return ze(e,g_(t)),e}function x_(t,{target:e,replace:s,state:n,preventScrollReset:r,relative:a,viewTransition:o}={}){let l=gt(),c=Ut(),d=to(t,{relative:a});return w.useCallback(u=>{if(GN(u,e)){u.preventDefault();let h=s!==void 0?s:zi(c)===zi(d);l(t,{replace:h,state:n,preventScrollReset:r,relative:a,viewTransition:o})}},[c,l,d,s,n,e,t,r,a,o])}var y_=0,v_=()=>`__${String(++y_)}__`;function b_(){let{router:t}=Tv("useSubmit"),{basename:e}=w.useContext(Ns),s=RN();return w.useCallback(async(n,r={})=>{let{action:a,method:o,encType:l,formData:c,body:d}=JN(n,e);if(r.navigate===!1){let u=r.fetcherKey||v_();await t.fetch(u,s,r.action||a,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||o,formEncType:r.encType||l,flushSync:r.flushSync})}else await t.navigate(r.action||a,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||o,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:s,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,s])}function w_(t,{relative:e}={}){let{basename:s}=w.useContext(Ns),n=w.useContext(_s);ze(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),a={...to(t||".",{relative:e})},o=Ut();if(t==null){a.search=o.search;let l=new URLSearchParams(a.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();a.search=u?`?${u}`:""}}return(!t||t===".")&&r.route.index&&(a.search=a.search?a.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(a.pathname=a.pathname==="/"?s:sn([s,a.pathname])),zi(a)}function j_(t,e={}){let s=w.useContext(bv);ze(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Tv("useViewTransitionState"),r=to(t,{relative:e.relative});if(!s.isTransitioning)return!1;let a=cn(s.currentLocation.pathname,n)||s.currentLocation.pathname,o=cn(s.nextLocation.pathname,n)||s.nextLocation.pathname;return Bl(r.pathname,o)!=null||Bl(r.pathname,a)!=null}[...a_];const N_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>kr(()=>Promise.resolve().then(()=>Ta),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class ef extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class __ extends ef{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class o0 extends ef{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class l0 extends ef{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var Au;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(Au||(Au={}));var k_=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class S_{constructor(e,{headers:s={},customFetch:n,region:r=Au.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=N_(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return k_(this,void 0,void 0,function*(){try{const{headers:r,method:a,body:o}=s;let l={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:a||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:u}).catch(y=>{throw new __(y)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new o0(h);if(!h.ok)throw new l0(h);let m=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return m==="application/json"?p=yield h.json():m==="application/octet-stream"?p=yield h.blob():m==="text/event-stream"?p=h:m==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null,response:h}}catch(r){return{data:null,error:r,response:r instanceof l0||r instanceof o0?r.context:void 0}}})}}var Ot={},tf={},vc={},so={},bc={},wc={},C_=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},xa=C_();const P_=xa.fetch,Lv=xa.fetch.bind(xa),Mv=xa.Headers,E_=xa.Request,A_=xa.Response,Ta=Object.freeze(Object.defineProperty({__proto__:null,Headers:Mv,Request:E_,Response:A_,default:Lv,fetch:P_},Symbol.toStringTag,{value:"Module"})),T_=mw(Ta);var jc={};Object.defineProperty(jc,"__esModule",{value:!0});let L_=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};jc.default=L_;var Dv=cs&&cs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(wc,"__esModule",{value:!0});const M_=Dv(T_),D_=Dv(jc);let O_=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=M_.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async a=>{var o,l,c;let d=null,u=null,h=null,f=a.status,m=a.statusText;if(a.ok){if(this.method!=="HEAD"){const g=await a.text();g===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=g:u=JSON.parse(g))}const y=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),x=(l=a.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");y&&x&&x.length>1&&(h=parseInt(x[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const y=await a.text();try{d=JSON.parse(y),Array.isArray(d)&&a.status===404&&(u=[],d=null,f=200,m="OK")}catch{a.status===404&&y===""?(f=204,m="No Content"):d={message:y}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new D_.default(d)}return{error:d,data:u,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(r=r.catch(a=>{var o,l,c;return{error:{message:`${(o=a==null?void 0:a.name)!==null&&o!==void 0?o:"FetchError"}: ${a==null?void 0:a.message}`,details:`${(l=a==null?void 0:a.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=a==null?void 0:a.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,s)}returns(){return this}overrideTypes(){return this}};wc.default=O_;var I_=cs&&cs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(bc,"__esModule",{value:!0});const R_=I_(wc);let F_=class extends R_.default{select(e){let s=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:r,referencedTable:a=r}={}){const o=a?`${a}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:r=n}={}){const a=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(a,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:r=!1,wal:a=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,r?"buffers":null,a?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};bc.default=F_;var $_=cs&&cs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(so,"__esModule",{value:!0});const z_=$_(bc);let U_=class extends z_.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:r}={}){let a="";r==="plain"?a="pl":r==="phrase"?a="ph":r==="websearch"&&(a="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${a}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};so.default=U_;var B_=cs&&cs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(vc,"__esModule",{value:!0});const Wa=B_(so);let H_=class{constructor(e,{headers:s={},schema:n,fetch:r}){this.url=e,this.headers=s,this.schema=n,this.fetch=r}select(e,{head:s=!1,count:n}={}){const r=s?"HEAD":"GET";let a=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!a?"":(l==='"'&&(a=!a),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new Wa.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const r="POST",a=[];if(this.headers.Prefer&&a.push(this.headers.Prefer),s&&a.push(`count=${s}`),n||a.push("missing=default"),this.headers.Prefer=a.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new Wa.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:r,defaultToNull:a=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),a||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new Wa.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),this.headers.Prefer=r.join(","),new Wa.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new Wa.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};vc.default=H_;var Nc={},_c={};Object.defineProperty(_c,"__esModule",{value:!0});_c.version=void 0;_c.version="0.0.0-automated";Object.defineProperty(Nc,"__esModule",{value:!0});Nc.DEFAULT_HEADERS=void 0;const W_=_c;Nc.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${W_.version}`};var Ov=cs&&cs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(tf,"__esModule",{value:!0});const V_=Ov(vc),q_=Ov(so),G_=Nc;let K_=class Iv{constructor(e,{headers:s={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},G_.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=r}from(e){const s=new URL(`${this.url}/${e}`);return new V_.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new Iv(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:r=!1,count:a}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||r?(o=n?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=s);const d=Object.assign({},this.headers);return a&&(d.Prefer=`count=${a}`),new q_.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};tf.default=K_;var La=cs&&cs.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ot,"__esModule",{value:!0});Ot.PostgrestError=Ot.PostgrestBuilder=Ot.PostgrestTransformBuilder=Ot.PostgrestFilterBuilder=Ot.PostgrestQueryBuilder=Ot.PostgrestClient=void 0;const Rv=La(tf);Ot.PostgrestClient=Rv.default;const Fv=La(vc);Ot.PostgrestQueryBuilder=Fv.default;const $v=La(so);Ot.PostgrestFilterBuilder=$v.default;const zv=La(bc);Ot.PostgrestTransformBuilder=zv.default;const Uv=La(wc);Ot.PostgrestBuilder=Uv.default;const Bv=La(jc);Ot.PostgrestError=Bv.default;var Y_=Ot.default={PostgrestClient:Rv.default,PostgrestQueryBuilder:Fv.default,PostgrestFilterBuilder:$v.default,PostgrestTransformBuilder:zv.default,PostgrestBuilder:Uv.default,PostgrestError:Bv.default};const{PostgrestClient:J_,PostgrestQueryBuilder:nT,PostgrestFilterBuilder:rT,PostgrestTransformBuilder:aT,PostgrestBuilder:iT,PostgrestError:oT}=Y_;function Q_(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const X_=Q_(),Z_="2.11.15",e2=`realtime-js/${Z_}`,t2="1.0.0",Hv=1e4,s2=1e3;var pi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(pi||(pi={}));var wt;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(wt||(wt={}));var gs;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(gs||(gs={}));var Tu;(function(t){t.websocket="websocket"})(Tu||(Tu={}));var ir;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})(ir||(ir={}));class n2{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),a=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+r));o=o+r;const c=n.decode(e.slice(o,o+a));o=o+a;const d=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class Wv{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var Ae;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(Ae||(Ae={}));const c0=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((a,o)=>(a[o]=r2(o,t,e,r),a),{})},r2=(t,e,s,n)=>{const r=e.find(l=>l.name===t),a=r==null?void 0:r.type,o=s[t];return a&&!n.includes(a)?Vv(a,o):Lu(o)},Vv=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return l2(e,s)}switch(t){case Ae.bool:return a2(e);case Ae.float4:case Ae.float8:case Ae.int2:case Ae.int4:case Ae.int8:case Ae.numeric:case Ae.oid:return i2(e);case Ae.json:case Ae.jsonb:return o2(e);case Ae.timestamp:return c2(e);case Ae.abstime:case Ae.date:case Ae.daterange:case Ae.int4range:case Ae.int8range:case Ae.money:case Ae.reltime:case Ae.text:case Ae.time:case Ae.timestamptz:case Ae.timetz:case Ae.tsrange:case Ae.tstzrange:return Lu(e);default:return Lu(e)}},Lu=t=>t,a2=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},i2=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},o2=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},l2=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let a;const o=t.slice(1,s);try{a=JSON.parse("["+o+"]")}catch{a=o?o.split(","):[]}return a.map(l=>Vv(e,l))}return t},c2=t=>typeof t=="string"?t.replace(" ","T"):t,qv=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class hd{constructor(e,s,n={},r=Hv){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var d0;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(d0||(d0={}));class gi{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=gi.syncState(this.state,r,a,o),this.pendingDiffs.forEach(c=>{this.state=gi.syncDiff(this.state,c,a,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:a,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=gi.syncDiff(this.state,r,a,o),l())}),this.onJoin((r,a,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:a,newPresences:o})}),this.onLeave((r,a,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:a,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const a=this.cloneDeep(e),o=this.transformState(s),l={},c={};return this.map(a,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=a[d];if(h){const f=u.map(x=>x.presence_ref),m=h.map(x=>x.presence_ref),p=u.filter(x=>m.indexOf(x.presence_ref)<0),y=h.filter(x=>f.indexOf(x.presence_ref)<0);p.length>0&&(l[d]=p),y.length>0&&(c[d]=y)}else l[d]=u}),this.syncDiff(a,{joins:l,leaves:c},n,r)}static syncDiff(e,s,n,r){const{joins:a,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(a,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,r(l,d,c),d.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(a=>(a.presence_ref=a.phx_ref,delete a.phx_ref,delete a.phx_ref_prev,a)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var u0;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(u0||(u0={}));var h0;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(h0||(h0={}));var Ks;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ks||(Ks={}));class sf{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=wt.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new hd(this,gs.join,this.params,this.timeout),this.rejoinTimer=new Wv(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=wt.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=wt.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=wt.errored,this.rejoinTimer.scheduleTimeout())}),this._on(gs.reply,{},(r,a)=>{this._trigger(this._replyEventName(a),r)}),this.presence=new gi(this),this.broadcastEndpointURL=qv(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==wt.closed){const{config:{broadcast:a,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(Ks.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Ks.CLOSED));const c={},d={broadcast:a,presence:o,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(Ks.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,p=[];for(let y=0;y<m;y++){const x=f[y],{filter:{event:g,schema:v,table:b,filter:k}}=x,j=u&&u[y];if(j&&j.event===g&&j.schema===v&&j.table===b&&j.filter===k)p.push(Object.assign(Object.assign({},x),{id:j.id}));else{this.unsubscribe(),this.state=wt.errored,e==null||e(Ks.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Ks.SUBSCRIBED);return}}).receive("error",u=>{this.state=wt.errored,e==null||e(Ks.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ks.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:a,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:a,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=d.body)===null||r===void 0?void 0:r.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(a=>{var o,l,c;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&a("ok"),d.receive("ok",()=>a("ok")),d.receive("error",()=>a("error")),d.receive("timeout",()=>a("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=wt.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(gs.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new hd(this,gs.leave,{},e),n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,n){const r=new AbortController,a=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(a),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new hd(this,e,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,a;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=gs;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var p,y,x;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((x=(y=m.filter)===null||y===void 0?void 0:y.event)===null||x===void 0?void 0:x.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(a=this.bindings[o])===null||a===void 0||a.filter(m=>{var p,y,x,g,v,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const k=m.id,j=(p=m.filter)===null||p===void 0?void 0:p.event;return k&&((y=s.ids)===null||y===void 0?void 0:y.includes(k))&&(j==="*"||(j==null?void 0:j.toLocaleLowerCase())===((x=s.data)===null||x===void 0?void 0:x.type.toLocaleLowerCase()))}else{const k=(v=(g=m==null?void 0:m.filter)===null||g===void 0?void 0:g.event)===null||v===void 0?void 0:v.toLocaleLowerCase();return k==="*"||k===((b=s==null?void 0:s.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:y,table:x,commit_timestamp:g,type:v,errors:b}=p;f=Object.assign(Object.assign({},{schema:y,table:x,commit_timestamp:g,eventType:v,new:{},old:{},errors:b}),this._getPayloadRecords(p))}m.callback(f,n)})}_isClosed(){return this.state===wt.closed}_isJoined(){return this.state===wt.joined}_isJoining(){return this.state===wt.joining}_isLeaving(){return this.state===wt.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),a={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(a):this.bindings[r]=[a],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var a;return!(((a=r.type)===null||a===void 0?void 0:a.toLocaleLowerCase())===n&&sf.isEqual(r.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(gs.close,{},e)}_onError(e){this._on(gs.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=wt.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=c0(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=c0(e.columns,e.old_record)),s}}const f0=()=>{},d2=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class u2{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Hv,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=f0,this.ref=0,this.logger=f0,this.conn=null,this.sendBuffer=[],this.serializer=new n2,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=a=>{let o;return a?o=a:typeof fetch>"u"?o=(...l)=>kr(()=>Promise.resolve().then(()=>Ta),void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${Tu.websocket}`,this.httpEndpoint=qv(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:a=>[1e3,2e3,5e3,1e4][a-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(a,o)=>o(JSON.stringify(a)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new Wv(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=X_),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:t2}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case pi.connecting:return ir.Connecting;case pi.open:return ir.Open;case pi.closing:return ir.Closing;default:return ir.Closed}}isConnected(){return this.connectionState()===ir.Open}channel(e,s={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(a=>a.topic===n);if(r)return r;{const a=new sf(`realtime:${e}`,s,this);return this.channels.push(a),a}}push(e){const{topic:s,event:n,payload:r,ref:a}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${a})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const r={access_token:s,version:e2};s&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(gs.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(s2,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:r,payload:a,ref:o}=s;n==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${a.status||""} ${n} ${r} ${o&&"("+o+")"||""}`,a),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(r,a,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(gs.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([d2],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class nf extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function ot(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class h2 extends nf{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class Mu extends nf{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var f2=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Gv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>kr(()=>Promise.resolve().then(()=>Ta),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},m2=()=>f2(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield kr(()=>Promise.resolve().then(()=>Ta),void 0)).Response:Response}),Du=t=>{if(Array.isArray(t))return t.map(s=>Du(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,a=>a.toUpperCase().replace(/[-_]/g,""));e[r]=Du(n)}),e};var Sr=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const fd=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),p2=(t,e,s)=>Sr(void 0,void 0,void 0,function*(){const n=yield m2();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{e(new h2(fd(r),t.status||500))}).catch(r=>{e(new Mu(fd(r),r))}):e(new Mu(fd(t),t))}),g2=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),s))};function no(t,e,s,n,r,a){return Sr(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(s,g2(e,n,r,a)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>p2(c,l,n))})})}function Hl(t,e,s,n){return Sr(this,void 0,void 0,function*(){return no(t,"GET",e,s,n)})}function yn(t,e,s,n,r){return Sr(this,void 0,void 0,function*(){return no(t,"POST",e,n,r,s)})}function x2(t,e,s,n,r){return Sr(this,void 0,void 0,function*(){return no(t,"PUT",e,n,r,s)})}function y2(t,e,s,n){return Sr(this,void 0,void 0,function*(){return no(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function Kv(t,e,s,n,r){return Sr(this,void 0,void 0,function*(){return no(t,"DELETE",e,n,r,s)})}var Lt=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const v2={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},m0={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class b2{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=Gv(r)}uploadOrUpdate(e,s,n,r){return Lt(this,void 0,void 0,function*(){try{let a;const o=Object.assign(Object.assign({},m0),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(a=new FormData,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c)),a.append("",n)):typeof FormData<"u"&&n instanceof FormData?(a=n,a.append("cacheControl",o.cacheControl),c&&a.append("metadata",this.encodeMetadata(c))):(a=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:a,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(a){if(ot(a))return{data:null,error:a};throw a}})}upload(e,s,n){return Lt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return Lt(this,void 0,void 0,function*(){const a=this._removeEmptyFolders(e),o=this._getFinalPath(a),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:m0.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:a,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(ot(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return Lt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const a=yield yn(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+a.url),l=o.searchParams.get("token");if(!l)throw new nf("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}})}update(e,s,n){return Lt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return Lt(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}})}copy(e,s,n){return Lt(this,void 0,void 0,function*(){try{return{data:{path:(yield yn(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return Lt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),a=yield yn(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return a={signedUrl:encodeURI(`${this.url}${a.signedURL}${o}`)},{data:a,error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return Lt(this,void 0,void 0,function*(){try{const r=yield yn(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),a=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${a}`):null})),error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}})}download(e,s){return Lt(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",a=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=a?`?${a}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield Hl(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(ot(l))return{data:null,error:l};throw l}})}info(e){return Lt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield Hl(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:Du(n),error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}})}exists(e){return Lt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield y2(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(ot(n)&&n instanceof Mu){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],a=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";a!==""&&r.push(a);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&r.push(c);let d=r.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return Lt(this,void 0,void 0,function*(){try{return{data:yield Kv(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(ot(s))return{data:null,error:s};throw s}})}list(e,s,n){return Lt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},v2),s),{prefix:e||""});return{data:yield yn(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(ot(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const w2="2.7.1",j2={"X-Client-Info":`storage-js/${w2}`};var Rr=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class N2{constructor(e,s={},n){this.url=e,this.headers=Object.assign(Object.assign({},j2),s),this.fetch=Gv(n)}listBuckets(){return Rr(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(ot(e))return{data:null,error:e};throw e}})}getBucket(e){return Rr(this,void 0,void 0,function*(){try{return{data:yield Hl(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(ot(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return Rr(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return Rr(this,void 0,void 0,function*(){try{return{data:yield x2(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(ot(n))return{data:null,error:n};throw n}})}emptyBucket(e){return Rr(this,void 0,void 0,function*(){try{return{data:yield yn(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(ot(s))return{data:null,error:s};throw s}})}deleteBucket(e){return Rr(this,void 0,void 0,function*(){try{return{data:yield Kv(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(ot(s))return{data:null,error:s};throw s}})}}class _2 extends N2{constructor(e,s={},n){super(e,s,n)}from(e){return new b2(this.url,this.headers,e,this.fetch)}}const k2="2.50.3";let si="";typeof Deno<"u"?si="deno":typeof document<"u"?si="web":typeof navigator<"u"&&navigator.product==="ReactNative"?si="react-native":si="node";const S2={"X-Client-Info":`supabase-js-${si}/${k2}`},C2={headers:S2},P2={schema:"public"},E2={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},A2={};var T2=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const L2=t=>{let e;return t?e=t:typeof fetch>"u"?e=Lv:e=fetch,(...s)=>e(...s)},M2=()=>typeof Headers>"u"?Mv:Headers,D2=(t,e,s)=>{const n=L2(s),r=M2();return(a,o)=>T2(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new r(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(a,Object.assign(Object.assign({},o),{headers:d}))})};var O2=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};function I2(t){return t.endsWith("/")?t:t+"/"}function R2(t,e){var s,n;const{db:r,auth:a,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},d),a),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>O2(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const Yv="2.70.0",Br=30*1e3,Ou=3,md=Ou*Br,F2="http://localhost:9999",$2="supabase.auth.token",z2={"X-Client-Info":`gotrue-js/${Yv}`},Iu="X-Supabase-Api-Version",Jv={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},U2=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,B2=6e5;class rf extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function le(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class H2 extends rf{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function W2(t){return le(t)&&t.name==="AuthApiError"}class Qv extends rf{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class qn extends rf{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class pn extends qn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function V2(t){return le(t)&&t.name==="AuthSessionMissingError"}class So extends qn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Co extends qn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Po extends qn{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function q2(t){return le(t)&&t.name==="AuthImplicitGrantRedirectError"}class p0 extends qn{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class Ru extends qn{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function pd(t){return le(t)&&t.name==="AuthRetryableFetchError"}class g0 extends qn{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class xi extends qn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const Wl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),x0=` 	
\r=`.split(""),G2=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<x0.length;e+=1)t[x0[e].charCodeAt(0)]=-2;for(let e=0;e<Wl.length;e+=1)t[Wl[e].charCodeAt(0)]=e;return t})();function y0(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Wl[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(Wl[n]),e.queuedBits-=6}}function Xv(t,e,s){const n=G2[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function v0(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},a=o=>{J2(o,n,s)};for(let o=0;o<t.length;o+=1)Xv(t.charCodeAt(o),r,a);return e.join("")}function K2(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function Y2(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}K2(n,e)}}function J2(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function Q2(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)Xv(t.charCodeAt(r),s,n);return new Uint8Array(e)}function X2(t){const e=[];return Y2(t,s=>e.push(s)),new Uint8Array(e)}function Z2(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};return t.forEach(r=>y0(r,s,n)),y0(null,s,n),e.join("")}function ek(t){return Math.round(Date.now()/1e3)+t}function tk(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const fs=()=>typeof window<"u"&&typeof document<"u",Jn={tested:!1,writable:!1},yi=()=>{if(!fs())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Jn.tested)return Jn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Jn.tested=!0,Jn.writable=!0}catch{Jn.tested=!0,Jn.writable=!1}return Jn.writable};function sk(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,a)=>{e[a]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const Zv=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>kr(()=>Promise.resolve().then(()=>Ta),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},nk=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",eb=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Eo=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},Ao=async(t,e)=>{await t.removeItem(e)};class kc{constructor(){this.promise=new kc.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}kc.promiseConstructor=Promise;function gd(t){const e=t.split(".");if(e.length!==3)throw new xi("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!U2.test(e[n]))throw new xi("JWT not in base64url format");return{header:JSON.parse(v0(e[0])),payload:JSON.parse(v0(e[1])),signature:Q2(e[2]),raw:{header:e[0],payload:e[1]}}}async function rk(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function ak(t,e){return new Promise((n,r)=>{(async()=>{for(let a=0;a<1/0;a++)try{const o=await t(a);if(!e(a,null,o)){n(o);return}}catch(o){if(!e(a,o)){r(o);return}}})()})}function ik(t){return("0"+t.toString(16)).substr(-2)}function ok(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let a=0;a<56;a++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,ik).join("")}async function lk(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(a=>String.fromCharCode(a)).join("")}async function ck(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await lk(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function Fr(t,e,s=!1){const n=ok();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await eb(t,`${e}-code-verifier`,r);const a=await ck(n);return[a,n===a?"plain":"s256"]}const dk=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function uk(t){const e=t.headers.get(Iu);if(!e||!e.match(dk))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function hk(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function fk(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const mk=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function $r(t){if(!mk.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var pk=globalThis&&globalThis.__rest||function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const nr=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),gk=[502,503,504];async function b0(t){var e;if(!nk(t))throw new Ru(nr(t),0);if(gk.includes(t.status))throw new Ru(nr(t),t.status);let s;try{s=await t.json()}catch(a){throw new Qv(nr(a),a)}let n;const r=uk(t);if(r&&r.getTime()>=Jv["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new g0(nr(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new pn}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((a,o)=>a&&typeof o=="string",!0))throw new g0(nr(s),t.status,s.weak_password.reasons);throw new H2(nr(s),t.status||500,n)}const xk=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function me(t,e,s,n){var r;const a=Object.assign({},n==null?void 0:n.headers);a[Iu]||(a[Iu]=Jv["2024-01-01"].name),n!=null&&n.jwt&&(a.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await yk(t,e,s+l,{headers:a,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function yk(t,e,s,n,r,a){const o=xk(e,n,r,a);let l;try{l=await t(s,Object.assign({},o))}catch(c){throw console.error(c),new Ru(nr(c),0)}if(l.ok||await b0(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await b0(c)}}function Ws(t){var e;let s=null;jk(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=ek(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function w0(t){const e=Ws(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function wn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function vk(t){return{data:t,error:null}}function bk(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:a}=t,o=pk(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:a},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function wk(t){return t}function jk(t){return t.access_token&&t.refresh_token&&t.expires_in}const xd=["global","local","others"];var Nk=globalThis&&globalThis.__rest||function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class _k{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=Zv(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=xd[0]){if(xd.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${xd.join(", ")}`);try{return await me(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await me(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:wn})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=Nk(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await me(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:bk,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(le(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await me(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:wn})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,a,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await me(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(a=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&a!==void 0?a:""},xform:wk});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(p=>{const y=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),x=JSON.parse(p.split(";")[1].split("=")[1]);d[`${x}Page`]=y}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(le(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){$r(e);try{return await me(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:wn})}catch(s){if(le(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){$r(e);try{return await me(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:wn})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){$r(e);try{return await me(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:wn})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){$r(e.userId);try{const{data:s,error:n}=await me(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(le(s))return{data:null,error:s};throw s}}async _deleteFactor(e){$r(e.userId),$r(e.id);try{return{data:await me(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}}const kk={getItem:t=>yi()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{yi()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{yi()&&globalThis.localStorage.removeItem(t)}};function j0(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function Sk(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const zr={debug:!!(globalThis&&yi()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class tb extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class Ck extends tb{}async function Pk(t,e,s){zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),zr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw zr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new Ck(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(zr.debug)try{const a=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(a,null,"  "))}catch(a){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",a)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}Sk();const Ek={url:F2,storageKey:$2,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:z2,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function N0(t,e,s){return await s()}class Ui{constructor(e){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=Ui.nextInstanceID,Ui.nextInstanceID+=1,this.instanceID>0&&fs()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},Ek),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new _k({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=Zv(r.fetch),this.lock=r.lock||N0,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:fs()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=Pk:this.lock=N0,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:yi()?this.storage=kk:(this.memoryStorage={},this.storage=j0(this.memoryStorage)):(this.memoryStorage={},this.storage=j0(this.memoryStorage)),fs()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(a){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",a)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async a=>{this._debug("received broadcast notification from other tab or client",a),await this._notifyAllSubscribers(a.data.event,a.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${Yv}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=sk(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),fs()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:a}=await this._getSessionFromURL(s,n);if(a){if(this._debug("#_initialize()","error detecting session from URL",a),q2(a)){const c=(e=a.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:a}}return await this._removeSession(),{error:a}}const{session:o,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return le(s)?{error:s}:{error:new Qv("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const a=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Ws}),{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(le(a))return{data:{user:null,session:null},error:a};throw a}}async signUp(e){var s,n,r;try{let a;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await Fr(this.storage,this.storageKey)),a=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:Ws})}else if("phone"in e){const{phone:u,password:h,options:f}=e;a=await me(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Ws})}else throw new Co("You must provide either an email or phone number and a password");const{data:o,error:l}=a;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(a){if(le(a))return{data:{user:null,session:null},error:a};throw a}}async signInWithPassword(e){try{let s;if("email"in e){const{email:a,password:o,options:l}=e;s=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:w0})}else if("phone"in e){const{phone:a,password:o,options:l}=e;s=await me(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:a,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:w0})}else throw new Co("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new So}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(le(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,a;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(a=e.options)===null||a===void 0?void 0:a.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,r,a,o,l,c,d,u,h,f,m;let p,y;if("message"in e)p=e.message,y=e.signature;else{const{chain:x,wallet:g,statement:v,options:b}=e;let k;if(fs())if(typeof g=="object")k=g;else{const S=window;if("solana"in S&&typeof S.solana=="object"&&("signIn"in S.solana&&typeof S.solana.signIn=="function"||"signMessage"in S.solana&&typeof S.solana.signMessage=="function"))k=S.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof g!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");k=g}const j=new URL((s=b==null?void 0:b.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in k&&k.signIn){const S=await k.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:j.host,uri:j.href}),v?{statement:v}:null));let C;if(Array.isArray(S)&&S[0]&&typeof S[0]=="object")C=S[0];else if(S&&typeof S=="object"&&"signedMessage"in S&&"signature"in S)C=S;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in C&&"signature"in C&&(typeof C.signedMessage=="string"||C.signedMessage instanceof Uint8Array)&&C.signature instanceof Uint8Array)p=typeof C.signedMessage=="string"?C.signedMessage:new TextDecoder().decode(C.signedMessage),y=C.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in k)||typeof k.signMessage!="function"||!("publicKey"in k)||typeof k!="object"||!k.publicKey||!("toBase58"in k.publicKey)||typeof k.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${j.host} wants you to sign in with your Solana account:`,k.publicKey.toBase58(),...v?["",v,""]:[""],"Version: 1",`URI: ${j.href}`,`Issued At: ${(r=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((a=b==null?void 0:b.signInWithSolana)===null||a===void 0)&&a.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(C=>`- ${C}`)]:[]].join(`
`);const S=await k.signMessage(new TextEncoder().encode(p),"utf8");if(!S||!(S instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");y=S}}try{const{data:x,error:g}=await me(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:Z2(y)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Ws});if(g)throw g;return!x||!x.session||!x.user?{data:{user:null,session:null},error:new So}:(x.session&&(await this._saveSession(x.session),await this._notifyAllSubscribers("SIGNED_IN",x.session)),{data:Object.assign({},x),error:g})}catch(x){if(le(x))return{data:{user:null,session:null},error:x};throw x}}async _exchangeCodeForSession(e){const s=await Eo(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:a,error:o}=await me(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Ws});if(await Ao(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!a||!a.session||!a.user?{data:{user:null,session:null,redirectType:null},error:new So}:(a.session&&(await this._saveSession(a.session),await this._notifyAllSubscribers("SIGNED_IN",a.session)),{data:Object.assign(Object.assign({},a),{redirectType:r??null}),error:o})}catch(a){if(le(a))return{data:{user:null,session:null,redirectType:null},error:a};throw a}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:a,nonce:o}=e,l=await me(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:a,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Ws}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new So}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(le(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,a,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await Fr(this.storage,this.storageKey));const{error:h}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await me(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(a=c==null?void 0:c.shouldCreateUser)!==null&&a!==void 0?a:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Co("You must provide either an email or phone number.")}catch(l){if(le(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,n;try{let r,a;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,a=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await me(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:a}}),redirectTo:r,xform:Ws});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(r){if(le(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let a=null,o=null;return this.flowType==="pkce"&&([a,o]=await Fr(this.storage,this.storageKey)),await me(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:a,code_challenge_method:o}),headers:this.headers,xform:vk})}catch(a){if(le(a))return{data:null,error:a};throw a}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new pn;const{error:r}=await me(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(le(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:a}=e,{error:o}=await me(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}},redirectTo:a==null?void 0:a.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:a}=e,{data:o,error:l}=await me(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:a==null?void 0:a.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Co("You must provide either an email or phone number and a type")}catch(s){if(le(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Eo(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<md:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{session:null},error:a}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:wn}):await this._useSession(async s=>{var n,r,a;const{data:o,error:l}=s;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new pn}:await me(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(a=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&a!==void 0?a:void 0,xform:wn})})}catch(s){if(le(s))return V2(s)&&(await this._removeSession(),await Ao(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:a}=n;if(a)throw a;if(!r.session)throw new pn;const o=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await Fr(this.storage,this.storageKey));const{data:d,error:u}=await me(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:wn});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(le(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new pn;const s=Date.now()/1e3;let n=s,r=!0,a=null;const{payload:o}=gd(e.access_token);if(o.exp&&(n=o.exp,r=n<=s),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};a=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;a={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(a),await this._notifyAllSubscribers("SIGNED_IN",a)}return{data:{user:a.user,session:a},error:null}}catch(s){if(le(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:l}=s;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new pn;const{session:r,error:a}=await this._callRefreshToken(e.refresh_token);return a?{data:{user:null,session:null},error:a}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(le(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!fs())throw new Po("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Po(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new p0("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Po("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new p0("No code detected.");const{data:v,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const k=new URL(window.location.href);return k.searchParams.delete("code"),window.history.replaceState(window.history.state,"",k.toString()),{data:{session:v.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:a,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!a||!l||!o||!d)throw new Po("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=Br&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const p=f-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,u);const{data:y,error:x}=await this._getUser(a);if(x)throw x;const g={provider_token:n,provider_refresh_token:r,access_token:a,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:y.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:g,redirectType:e.type},error:null}}catch(n){if(le(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Eo(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:a}=s;if(a)return{error:a};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(W2(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await Ao(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=tk(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:a},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",a)),this._debug("INITIAL_SESSION","callback id",e,"session",a)}catch(a){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",a),console.error(a)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await Fr(this.storage,this.storageKey,!0));try{return await me(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(a){if(le(a))return{data:null,error:a};throw a}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(le(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async a=>{var o,l,c,d,u;const{data:h,error:f}=a;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await me(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return fs()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(le(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:a,error:o}=s;if(o)throw o;return await me(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=a.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(le(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await ak(async r=>(r>0&&await rk(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await me(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Ws})),(r,a)=>{const o=200*Math.pow(2,r);return a&&pd(a)&&Date.now()+o-n<Br})}catch(n){if(this._debug(s,"error",n),le(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),fs()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Eo(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const r=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<md;if(this._debug(s,`session has${r?"":" not"} expired with margin of ${md}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:a}=await this._callRefreshToken(n.refresh_token);a&&(console.error(a),pd(a)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",a),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new pn;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new kc;const{data:a,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!a.session)throw new pn;await this._saveSession(a.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",a.session);const l={session:a.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(a){if(this._debug(r,"error",a),le(a)){const o={session:null,error:a};return pd(a)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(a),a}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const a=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(c){a.push(c)}});if(await Promise.all(o),a.length>0){for(let l=0;l<a.length;l+=1)console.error(a[l]);throw a[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await eb(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await Ao(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&fs()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),Br);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/Br);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${Br}ms, refresh threshold is ${Ou} ticks`),r<=Ou&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof tb)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!fs()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[a,o]=await Fr(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(a)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const a=new URLSearchParams(n.queryParams);r.push(a.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:a}=s;return a?{data:null,error:a}:await me(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(le(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:a,error:o}=s;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await me(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=a==null?void 0:a.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(le(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:a}=s;if(a)return{data:null,error:a};const{data:o,error:l}=await me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(le(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:a}=s;return a?{data:null,error:a}:await me(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(le(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),a=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:a},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:a}=e;if(a)return{data:null,error:a};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=gd(r.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+B2>Date.now()))return n;const{data:r,error:a}=await me(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(a)throw a;if(!r.keys||r.keys.length===0)throw new xi("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),n=r.keys.find(o=>o.kid===e),!n)throw new xi("No matching signing key found in JWKS");return n}async getClaims(e,s={keys:[]}){try{let n=e;if(!n){const{data:m,error:p}=await this.getSession();if(p||!m.session)return{data:null,error:p};n=m.session.access_token}const{header:r,payload:a,signature:o,raw:{header:l,payload:c}}=gd(n);if(hk(a.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:a,header:r,signature:o},error:null}}const d=fk(r.alg),u=await this.fetchJwk(r.kid,s),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,X2(`${l}.${c}`)))throw new xi("Invalid JWT signature");return{data:{claims:a,header:r,signature:o},error:null}}catch(n){if(le(n))return{data:null,error:n};throw n}}}Ui.nextInstanceID=0;const Ak=Ui;class Tk extends Ak{constructor(e){super(e)}}var Lk=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(a){return a instanceof s?a:new s(function(o){o(a)})}return new(s||(s=Promise))(function(a,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?a(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class Mk{constructor(e,s,n){var r,a,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=I2(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:P2,realtime:A2,auth:Object.assign(Object.assign({},E2),{storageKey:d}),global:C2},h=R2(n??{},u);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(a=h.global.headers)!==null&&a!==void 0?a:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=D2(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new J_(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new S_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new _2(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return Lk(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:a,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new Tk({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:a,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new u2(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const Dk=(t,e,s)=>new Mk(t,e,s),Ok="https://scwyzonphgbhfirwwnov.supabase.co",Ik="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNjd3l6b25waGdiaGZpcnd3bm92Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MzQ2MTMsImV4cCI6MjA2NzQxMDYxM30.XTqP3aOLIVfyw9kpdawVfqFAiYg8USJaZVLi478wq3I",Ne=Dk(Ok,Ik,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0,storageKey:"supabase.auth.token",flowType:"pkce"}}),sb="capacity-login-activity",Zs={LOGIN:"login",LOGOUT:"logout"},_0=t=>{const e=new Date(t),n=Math.floor((new Date-e)/(1e3*60));if(n<1)return"Just now";if(n<60)return`${n} min ago`;if(n<1440){const r=Math.floor(n/60);return`${r} hour${r>1?"s":""} ago`}else return e.toLocaleDateString()+" "+e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},k0=(t,e)=>{const n=Math.floor((new Date-new Date(e))/(1e3*60));return t===Zs.LOGIN?n<5?"text-green-400":n<30?"text-green-500":"text-blue-400":n<5?"text-orange-400":"text-slate-400"},nb=()=>{try{const t=localStorage.getItem(sb);return t?JSON.parse(t):[]}catch(t){return console.error("Error loading login activity:",t),[]}},Rk=t=>{try{localStorage.setItem(sb,JSON.stringify(t))}catch(e){console.error("Error saving login activity:",e)}},S0=(t,e,s=null)=>{const n=nb(),r={id:Date.now()+Math.random(),type:t,userEmail:e,userName:(s==null?void 0:s.name)||e.split("@")[0],userRole:(s==null?void 0:s.role)||"Unknown",timestamp:new Date().toISOString(),sessionId:Fk()};n.unshift(r);const a=n.slice(0,50);return Rk(a),window.dispatchEvent(new CustomEvent("loginActivityUpdate",{detail:r})),r},Fk=()=>Date.now().toString(36)+Math.random().toString(36).substr(2),rb=(t={})=>{let s=nb();if(t.type&&(s=s.filter(n=>n.type===t.type)),t.userEmail&&(s=s.filter(n=>n.userEmail===t.userEmail)),t.limit&&(s=s.slice(0,t.limit)),t.hoursBack){const n=new Date;n.setHours(n.getHours()-t.hoursBack),s=s.filter(r=>new Date(r.timestamp)>n)}return s},$k=(t=24)=>{const e=rb({hoursBack:t});return{totalLogins:e.filter(n=>n.type===Zs.LOGIN).length,totalLogouts:e.filter(n=>n.type===Zs.LOGOUT).length,uniqueUsers:new Set(e.map(n=>n.userEmail)).size,recentActivity:e.slice(0,10)}},ab=w.createContext(),zs=()=>{const t=w.useContext(ab);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},zk=({children:t})=>{const[e,s]=w.useState(null),[n,r]=w.useState(null),[a,o]=w.useState(!0),[l,c]=w.useState(!1),d=_=>{var E,D,F,U;if(!_)return null;const P=_.email,N=P.split("@")[0],L=P.split("@")[1];let A="Employee";return L==="capacity.com"||P.includes("admin")?A="Capacity Admin":L==="nsight-inc.com"&&(A="NSight Admin"),{id:_.id,email:P,first_name:((E=_.user_metadata)==null?void 0:E.first_name)||N,last_name:((D=_.user_metadata)==null?void 0:D.last_name)||"",role:((F=_.user_metadata)==null?void 0:F.role)||A,department:((U=_.user_metadata)==null?void 0:U.department)||"",created_at:_.created_at,updated_at:_.updated_at||new Date().toISOString()}},u=async(_,P=null)=>{var N;try{console.log("🔍 Fetching user profile for ID:",_);const L=localStorage.getItem(`deleted_user_${_}`);if(L){const U=parseInt(L),Z=Date.now()-10*60*1e3;if(console.log("🔒 Checking deletion marker for user:",_,"deleteTime:",new Date(U),"threshold:",new Date(Z)),U>Z)return console.log("⚠️ User was recently deleted, not auto-creating profile"),null;console.log("🧹 Cleaning up expired deletion marker for user:",_),localStorage.removeItem(`deleted_user_${_}`)}const A=new Promise((U,Z)=>setTimeout(()=>Z(new Error("Profile fetch timeout")),1e3)),E=Ne.from("user_profiles").select("*").eq("id",_).single(),{data:D,error:F}=await Promise.race([E,A]);if(F){if(console.error("❌ Database error fetching profile:",F),F.code==="PGRST116"||(N=F.message)!=null&&N.includes("No rows")){if(console.log("🔄 No profile in database for user:",_),localStorage.getItem(`deleted_user_${_}`))return console.log("🚫 User is marked as deleted, aborting profile creation"),null;console.log("🆕 Creating new profile for user:",_);try{return await h(_)}catch(R){if(console.error("❌ Database profile creation failed:",R),console.log("🚨 Falling back to auth-based profile"),P)return d(P);const{data:{user:V}}=await Ne.auth.getUser();return d(V)}}if(console.log("🚨 Database unavailable, using auth-based profile"),P)return d(P);const{data:{user:U}}=await Ne.auth.getUser();return d(U)}return console.log("✅ User profile found in database:",D),D}catch(L){L.message==="Profile fetch timeout"?console.warn("⏱️ Profile fetch timed out after 1s, using fallback"):console.error("❌ Error in getUserProfile:",L),console.log("🚨 Profile fetch failed, creating from auth data");try{if(P)return d(P);const{data:{user:A}}=await Ne.auth.getUser();return d(A)}catch(A){return console.error("❌ Even auth fallback failed:",A),null}}},h=async _=>{var P,N,L,A,E;try{console.log("🔄 Creating user profile in database for ID:",_);const D=localStorage.getItem(`deleted_user_${_}`);if(D){const Ze=parseInt(D),We=Date.now()-10*60*1e3;if(Ze>We)throw console.log("🚫 Aborting profile creation - user was recently deleted:",_),new Error("User was recently deleted");console.log("🧹 Create profile: Cleaning up expired deletion marker for user:",_),localStorage.removeItem(`deleted_user_${_}`)}const F=new Promise((Ze,We)=>setTimeout(()=>We(new Error("Profile creation timeout")),1e4)),{data:{user:U},error:Z}=await Ne.auth.getUser();if(Z||!U)throw new Error("Could not get user info");console.log("👤 Creating profile for authenticated user:",U.email,"requested userId:",_);const R=U.email,V=R.split("@")[0],G=((P=U.user_metadata)==null?void 0:P.first_name)||V,H=((N=U.user_metadata)==null?void 0:N.last_name)||"";let K="Employee";const ee=R.split("@")[1];ee==="capacity.com"||R.includes("admin")?K="Capacity Admin":ee==="nsight-inc.com"&&(K="NSight Admin");const ae=((L=U.user_metadata)==null?void 0:L.role)||K;console.log("🔍 Role determination for user:",R),console.log("  - Domain-based role:",K),console.log("  - User metadata role:",(A=U.user_metadata)==null?void 0:A.role),console.log("  - Final role:",ae);const ge=Ne.from("user_profiles").insert([{id:_,email:R,first_name:G,last_name:H,role:ae,department:((E=U.user_metadata)==null?void 0:E.department)||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single(),{data:xe,error:Me}=await Promise.race([ge,F]);if(Me)throw console.error("❌ Error creating user profile in database:",Me),Me;return console.log("✅ User profile created in database:",xe),xe}catch(D){throw console.error("❌ Database profile creation failed:",D),D}};w.useEffect(()=>{let _=!0;(async()=>{try{console.log("🔍 Getting initial session...");const{data:{session:A},error:E}=await Ne.auth.getSession();if(!_)return;if(E){console.error("❌ Error getting session:",E),_&&o(!1);return}if(A!=null&&A.user){console.log("✅ Session found for user:",A.user.email);const D=localStorage.getItem(`deleted_user_${A.user.id}`);if(D){const F=parseInt(D),U=Date.now()-10*60*1e3;if(F>U){console.log("🚫 Initial session: User was recently deleted, not setting profile:",A.user.email),_&&(s(null),r(null),o(!1));return}else console.log("🧹 Initial session: Cleaning up expired deletion marker"),localStorage.removeItem(`deleted_user_${A.user.id}`)}s(A.user);try{const F=await u(A.user.id,A.user);_&&r(F)}catch(F){if(console.error("❌ Profile loading failed completely:",F),_){const U=d(A.user);r(U)}}}else console.log("ℹ️ No active session found"),_&&(s(null),r(null))}catch(A){console.error("❌ Error in getInitialSession:",A),_&&(s(null),r(null))}finally{_&&(console.log("✅ Initial auth check complete"),o(!1))}})();const{data:{subscription:N}}=Ne.auth.onAuthStateChange(async(A,E)=>{var D;if(_){console.log("🔄 Auth state changed:",A,((D=E==null?void 0:E.user)==null?void 0:D.email)||"No user");try{if(E!=null&&E.user){console.log("👤 Processing auth state change for user:",E.user.id,E.user.email);const F=localStorage.getItem(`deleted_user_${E.user.id}`);if(F){const U=parseInt(F),Z=Date.now()-10*60*1e3;if(U>Z){console.log("🚫 Auth state change: User was recently deleted, not setting profile:",E.user.email),_&&(s(null),r(null));return}else console.log("🧹 Auth state change: Cleaning up expired deletion marker"),localStorage.removeItem(`deleted_user_${E.user.id}`)}if(s(E.user),A==="USER_UPDATED"&&n&&n.id===E.user.id){console.log("🔄 USER_UPDATED event - keeping existing profile to avoid refetch"),_&&o(!1);return}try{const U=await u(E.user.id,E.user);_&&r(U)}catch(U){if(console.error("❌ Profile loading failed in auth change:",U),_){const Z=d(E.user);r(Z)}}}else s(null),r(null)}catch(F){console.error("❌ Error in auth state change handler:",F),_&&(s(null),r(null))}_&&o(!1)}}),L=setTimeout(()=>{_&&(console.log("⚠️ Auth timeout - forcing loading to false"),o(!1))},15e3);return()=>{_=!1,clearTimeout(L),N==null||N.unsubscribe()}},[]);const C={user:e,userProfile:n,loading:a,isSigningIn:l,signUp:async(_,P,N={})=>{try{c(!0);const{data:L,error:A}=await Ne.auth.signUp({email:_,password:P,options:{data:{first_name:N.firstName||"",last_name:N.lastName||"",department:N.department||"",role:N.role||"Employee"}}});if(A)throw A;return{data:L,error:null}}catch(L){return console.error("Sign up error:",L),{data:null,error:L}}finally{c(!1)}},adminCreateUser:async(_,P,N={})=>{try{c(!0),console.log("🔧 Admin creating user:",_),console.log("📋 UserData being sent to API:",N);const L={email:_,password:P,userData:{first_name:N.firstName||"",last_name:N.lastName||"",department:N.department||"",role:N.role||"Employee"}};console.log("📤 Request body being sent:",L);const A=await fetch("/api/admin/users?action=create",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(L)}),E=await A.json();if(console.log("📥 API response:",E),!A.ok)throw new Error(E.error||"Failed to create user");return console.log("✅ Admin user creation successful:",E),{data:E.user,error:null}}catch(L){return console.error("❌ Admin user creation error:",L),{data:null,error:L}}finally{c(!1)}},signIn:async(_,P)=>{try{c(!0);const{data:N,error:L}=await Ne.auth.signInWithPassword({email:_,password:P});if(L)throw L;if(N.user){console.log("✅ Authentication successful, checking if account exists...");const A=localStorage.getItem(`deleted_user_${N.user.id}`);if(A){const F=parseInt(A),U=Date.now()-10*60*1e3;if(F>U)throw console.log("🚫 Attempted login with deleted account:",N.user.email),await Ne.auth.signOut(),new Error("This account has been deleted and is no longer available. Please contact your administrator if you believe this is an error.");console.log("🧹 Cleaning up expired deletion marker during login"),localStorage.removeItem(`deleted_user_${N.user.id}`)}const E=await u(N.user.id,N.user),D={name:E!=null&&E.first_name&&(E!=null&&E.last_name)?`${E.first_name} ${E.last_name}`:N.user.email.split("@")[0],role:(E==null?void 0:E.role)||"Employee"};S0(Zs.LOGIN,N.user.email,D);try{const F=window.location.hostname==="localhost"?"http://localhost:3001/api/login-events":"/api/login-events";await fetch(F,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:N.user.email,userName:D.name,userRole:D.role,eventType:"login"})}),console.log("📝 Login event stored in database for:",N.user.email)}catch(F){console.warn("⚠️ Failed to store login event in database:",F.message)}console.log("📝 Login activity recorded for:",N.user.email)}return{data:N,error:null}}catch(N){return console.error("Sign in error:",N),{data:null,error:N}}finally{c(!1)}},signOut:async()=>{var _,P;try{if(e&&n){const L={name:n.first_name&&n.last_name?`${n.first_name} ${n.last_name}`:e.email.split("@")[0],role:n.role||"Employee"};S0(Zs.LOGOUT,e.email,L);try{const A=window.location.hostname==="localhost"?"http://localhost:3001/api/login-events":"/api/login-events";await fetch(A,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:e.email,userName:L.name,userRole:L.role,eventType:"logout"})}),console.log("📝 Logout event stored in database for:",e.email)}catch(A){console.warn("⚠️ Failed to store logout event in database:",A.message)}console.log("📝 Logout activity recorded for:",e.email)}const{error:N}=await Ne.auth.signOut();if(N)if((_=N.message)!=null&&_.includes("Auth session missing")||N.name==="AuthSessionMissingError")console.log("⚠️ Session already missing, clearing local state");else throw N}catch(N){if(console.error("Sign out error:",N),(P=N.message)!=null&&P.includes("Auth session missing")||N.name==="AuthSessionMissingError")console.log("⚠️ Session missing error caught, clearing local state anyway");else throw s(null),r(null),N}finally{console.log("🚪 Clearing local auth state"),s(null),r(null)}},updateProfile:async _=>{try{if(!e)throw new Error("No user logged in");try{const{data:P,error:N}=await Ne.from("user_profiles").update({first_name:_.first_name,last_name:_.last_name,role:_.role,department:_.department,updated_at:new Date().toISOString()}).eq("id",e.id).select().single();if(N)throw N;return r(P),{data:P,error:null}}catch(P){console.error("❌ Database update failed, updating auth metadata:",P);const{data:N,error:L}=await Ne.auth.updateUser({data:{first_name:_.first_name,last_name:_.last_name,role:_.role,department:_.department}});if(L)throw L;const A=d(N.user);return r(A),{data:A,error:null}}}catch(P){return console.error("Update profile error:",P),{data:null,error:P}}},changePassword:async _=>{try{const{data:P,error:N}=await Ne.auth.updateUser({password:_});if(N)throw N;return{data:P,error:null}}catch(P){return console.error("Change password error:",P),{data:null,error:P}}},resetPassword:async _=>{try{const{data:P,error:N}=await Ne.auth.resetPasswordForEmail(_,{redirectTo:`${window.location.origin}/reset-password`});if(N)throw N;return{data:P,error:null}}catch(P){return console.error("Reset password error:",P),{data:null,error:P}}},getAllUsers:async()=>{try{console.log("🔍 Fetching all users from database...");const _=new Promise((A,E)=>setTimeout(()=>E(new Error("Get users timeout")),1e4)),P=Ne.from("user_profiles").select("*").order("created_at",{ascending:!1}),{data:N,error:L}=await Promise.race([P,_]);if(L)throw L;return console.log("✅ Users fetched from database:",N.length),{data:N,error:null}}catch(_){return console.error("❌ Database users fetch failed:",_),console.log("🚨 Falling back to current user only"),{data:n?[n]:[],error:null}}},updateUserProfile:async(_,P)=>{try{const N=new Promise((D,F)=>setTimeout(()=>F(new Error("Update timeout")),1e4)),L=Ne.from("user_profiles").update({first_name:P.first_name,last_name:P.last_name,role:P.role,department:P.department,updated_at:new Date().toISOString()}).eq("id",_).select().single(),{data:A,error:E}=await Promise.race([L,N]);if(E)throw E;return{data:A,error:null}}catch(N){return console.error("❌ Update user profile failed:",N),{data:n,error:null}}},deleteUserProfile:async _=>{try{console.log("🗑️ Deleting user profile for ID:",_),localStorage.setItem(`deleted_user_${_}`,Date.now().toString()),console.log("🔒 Set deletion marker for user BEFORE deletion:",_);const P=new Promise((A,E)=>setTimeout(()=>E(new Error("Delete timeout")),1e4));console.log("🗃️ Deleting from user_profiles table...");const N=Ne.from("user_profiles").delete().eq("id",_),{error:L}=await Promise.race([N,P]);return L?(console.error("❌ Error deleting user profile:",L),console.log("🔒 Keeping deletion marker due to database error"),{data:null,error:L}):(console.log("✅ User profile deleted from database"),console.log("✅ Delete successful - deletion marker will prevent auto-recreation"),{data:!0,error:null})}catch(P){return console.error("❌ Delete operation failed:",P),P.message==="Delete timeout"?(console.log("⏱️ Delete operation timed out - database may be unavailable"),console.log("🔒 Keeping deletion marker due to timeout"),{data:null,error:new Error("Delete operation timed out. Please try again.")}):(console.log("🔒 Keeping deletion marker due to error"),{data:null,error:P})}},assignUser:async(_,P,N)=>{try{const L=new Promise((F,U)=>setTimeout(()=>U(new Error("Assign timeout")),1e4)),A=Ne.from(_).update({assigned_to:N}).eq("id",P).select().single(),{data:E,error:D}=await Promise.race([A,L]);if(D)throw D;return{data:E,error:null}}catch(L){return console.error("❌ Assign user failed:",L),{data:null,error:L}}},isAuthenticated:!!e,isCapacityAdmin:(n==null?void 0:n.role)==="Capacity Admin",isNSightAdmin:(n==null?void 0:n.role)==="NSight Admin",isEmployee:(n==null?void 0:n.role)==="Employee",getDashboardRoute:()=>{if(!n)return"/dashboard";switch(n.role){case"Capacity Admin":return"/dashboard";case"NSight Admin":return"/dashboard";case"Employee":return"/dashboard";default:return"/dashboard"}},canEdit:_=>!e||!n?!1:n.role==="Capacity Admin"||n.role==="NSight Admin"?!0:(_==null?void 0:_.created_by)===e.id||(_==null?void 0:_.assigned_to)===e.id,canDelete:_=>!e||!n?!1:n.role==="Capacity Admin"?!0:(_==null?void 0:_.created_by)===e.id};return i.jsx(ab.Provider,{value:C,children:t})},ib=w.createContext(),Uk=()=>{const t=w.useContext(ib);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},Bk=({children:t})=>{const[e,s]=w.useState("dark"),[n,r]=w.useState(!1);w.useEffect(()=>{const c=localStorage.getItem("app-theme");c&&["light","dark","system"].includes(c)&&s(c)},[]),w.useEffect(()=>{const c=document.documentElement;c.classList.remove("light","dark");let d=e;if(e==="system"&&(d=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),c.classList.add(d),n){c.classList.add("theme-transitioning");const u=setTimeout(()=>{c.classList.remove("theme-transitioning"),r(!1)},300);return()=>clearTimeout(u)}},[e,n]),w.useEffect(()=>{if(e!=="system")return;const c=window.matchMedia("(prefers-color-scheme: dark)"),d=()=>{r(!0)};return c.addEventListener("change",d),()=>c.removeEventListener("change",d)},[e]);const a=c=>{c!==e&&(r(!0),s(c),localStorage.setItem("app-theme",c))},l={theme:e,currentTheme:(()=>e==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)(),changeTheme:a,isTransitioning:n};return i.jsx(ib.Provider,{value:l,children:t})},af=()=>(console.log("🧹 Clearing all mock authentication data..."),["capacity-auth","capacity-users","capacity-users-version","capacity-passwords","capacity-login-activity","formulas_data","materials_data"].forEach(e=>{localStorage.getItem(e)&&(localStorage.removeItem(e),console.log(`✅ Removed: ${e}`))}),Object.keys(localStorage).forEach(e=>{(e.startsWith("capacity-")||e.includes("mock")||e.includes("demo"))&&(localStorage.removeItem(e),console.log(`✅ Removed additional key: ${e}`))}),Object.keys(sessionStorage).forEach(e=>{(e.startsWith("capacity-")||e.includes("mock")||e.includes("demo"))&&(sessionStorage.removeItem(e),console.log(`✅ Removed from session storage: ${e}`))}),console.log("🎉 All mock data cleared! Please refresh the page."),console.log("🔐 You can now use your actual Supabase credentials to log in."),!0);typeof window<"u"&&(window.clearAllMockData=af);af();var Hk={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const Wk=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),Vk=(t,e)=>{const s=w.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:a=2,absoluteStrokeWidth:o,children:l,...c},d)=>w.createElement("svg",{ref:d,...Hk,width:r,height:r,stroke:n,strokeWidth:o?Number(a)*24/Number(r):a,className:`lucide lucide-${Wk(t)}`,...c},[...e.map(([u,h])=>w.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return s.displayName=`${t}`,s};var X=Vk;const xs=X("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Ms=X("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),Ss=X("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Et=X("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),qk=X("ArrowRight",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"m12 5 7 7-7 7",key:"xquz4c"}]]),Gk=X("Atom",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]]),To=X("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),oa=X("Bot",[["rect",{width:"18",height:"10",x:"3",y:"11",rx:"2",key:"1ofdy3"}],["circle",{cx:"12",cy:"5",r:"2",key:"f1ur92"}],["path",{d:"M12 7v4",key:"xawao1"}],["line",{x1:"8",x2:"8",y1:"16",y2:"16",key:"h6x27f"}],["line",{x1:"16",x2:"16",y1:"16",y2:"16",key:"5lty7f"}]]),nn=X("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),Lo=X("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),Va=X("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),br=X("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),Un=X("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),ob=X("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ya=X("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),C0=X("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),Mo=X("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),Ma=X("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Kk=X("CreditCard",[["rect",{width:"20",height:"14",x:"2",y:"5",rx:"2",key:"ynyp8z"}],["line",{x1:"2",x2:"22",y1:"10",y2:"10",key:"1b3vmo"}]]),Ts=X("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),P0=X("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),Yk=X("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),dl=X("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),ul=X("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),Jk=X("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),of=X("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Sc=X("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),Is=X("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]),Fs=X("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),Qk=X("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),lb=X("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),cb=X("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),E0=X("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),db=X("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),lf=X("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),Xk=X("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),cf=X("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),Zk=X("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),A0=X("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),eS=X("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),tS=X("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),sS=X("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),nS=X("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),Fu=X("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),df=X("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),dn=X("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),va=X("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),rS=X("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),Do=X("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),Vl=X("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),aS=X("Shield",[["path",{d:"M12 22s8-4 8-10V5l-8-3-8 3v7c0 6 8 10 8 10z",key:"3xmgem"}]]),ub=X("Sparkles",[["path",{d:"m12 3-1.912 5.813a2 2 0 0 1-1.275 1.275L3 12l5.813 1.912a2 2 0 0 1 1.275 1.275L12 21l1.912-5.813a2 2 0 0 1 1.275-1.275L21 12l-5.813-1.912a2 2 0 0 1-1.275-1.275L12 3Z",key:"17u4zn"}],["path",{d:"M5 3v4",key:"bklmnn"}],["path",{d:"M19 17v4",key:"iiml17"}],["path",{d:"M3 5h4",key:"nem4j1"}],["path",{d:"M17 19h4",key:"lbex7p"}]]),iS=X("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),ba=X("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),oS=X("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),qa=X("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),hb=X("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),fb=X("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),lS=X("User",[["path",{d:"M19 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2",key:"975kel"}],["circle",{cx:"12",cy:"7",r:"4",key:"17ys0d"}]]),dt=X("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),cS=X("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),yd=X("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),ut=X("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),$u=X("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),_e=({children:t,variant:e="primary",size:s="md",className:n="",...r})=>{const a="font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",o={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-200 focus:ring-slate-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},l={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return i.jsx("button",{className:`${a} ${o[e]} ${l[s]} ${n}`,...r,children:t})},T0=({label:t,type:e="text",className:s="",rightIcon:n,onRightIconClick:r,...a})=>i.jsxs("div",{className:"w-full",children:[t&&i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:t}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:e,className:`w-full px-3 py-2 border border-slate-600 bg-slate-700 text-slate-100 rounded-md shadow-sm 
                     placeholder-slate-400 focus:outline-none focus:ring-2 
                     focus:ring-primary-500 focus:border-primary-500 
                     transition-colors duration-200 ${n?"pr-10":""} ${s}`,...a}),n&&i.jsx("button",{type:"button",onClick:r,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-300 transition-colors",children:n})]})]}),dS=({className:t=""})=>{const e=()=>{window.confirm("This will clear all cached mock data and refresh the page. Are you sure?")&&(af(),window.location.reload())};return i.jsx("button",{onClick:e,className:`px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors ${t}`,title:"Clear mock data that might be interfering with Supabase authentication",children:"Clear Mock Data"})},uS=()=>{var p,y;const t=gt(),e=Ut(),{signIn:s,isSigningIn:n}=zs(),[r,a]=w.useState(!1),[o,l]=w.useState({email:"",password:""}),[c,d]=w.useState({}),u=((y=(p=e.state)==null?void 0:p.from)==null?void 0:y.pathname)||"/dashboard",h=()=>{const x={};return o.email?/\S+@\S+\.\S+/.test(o.email)||(x.email="Email is invalid"):x.email="Email is required",o.password?o.password.length<6&&(x.password="Password must be at least 6 characters"):x.password="Password is required",d(x),Object.keys(x).length===0},f=async x=>{if(x.preventDefault(),d({}),!!h())try{const{error:g}=await s(o.email,o.password);g?d({submit:g.message}):t(u,{replace:!0})}catch{d({submit:"An unexpected error occurred. Please try again."})}},m=(x,g)=>{l(v=>({...v,[x]:g})),c[x]&&d(v=>({...v,[x]:""}))};return i.jsx("div",{className:"dark min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:i.jsxs("div",{className:"w-full max-w-md",children:[i.jsxs("div",{className:"text-center mb-8",children:[i.jsx("img",{src:"/chemformation-logo.png",alt:"Chemformation",className:"w-16 h-16 mx-auto mb-4"}),i.jsx("h1",{className:"text-3xl font-bold text-white",children:"Capacity Chemicals"}),i.jsx("p",{className:"text-slate-400 mt-2",children:"Chemical Management System"})]}),i.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg shadow-xl p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Welcome back"}),i.jsx("p",{className:"text-slate-400 text-center mt-2",children:"Sign in to your account to continue"})]}),c.submit&&i.jsxs("div",{className:"mb-4 p-3 bg-red-600/20 border border-red-600/30 rounded-lg flex items-center space-x-2",children:[i.jsx(Ms,{className:"h-5 w-5 text-red-400"}),i.jsx("span",{className:"text-red-400 text-sm",children:c.submit})]}),i.jsxs("form",{onSubmit:f,className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Email"}),i.jsxs("div",{className:"relative",children:[i.jsx(Zk,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),i.jsx(T0,{type:"email",value:o.email,onChange:x=>m("email",x.target.value),className:`pl-10 ${c.email?"border-red-500":""}`,placeholder:"your.email@company.com"})]}),c.email&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:c.email})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Password"}),i.jsxs("div",{className:"relative",children:[i.jsx(lf,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),i.jsx(T0,{type:r?"text":"password",value:o.password,onChange:x=>m("password",x.target.value),className:`pl-10 pr-10 ${c.password?"border-red-500":""}`,placeholder:"Enter your password"}),i.jsx("button",{type:"button",onClick:()=>a(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200",children:r?i.jsx(dl,{className:"h-5 w-5"}):i.jsx(ul,{className:"h-5 w-5"})})]}),c.password&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:c.password})]}),i.jsx(_e,{type:"submit",disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2.5 flex items-center justify-center space-x-2",children:n?i.jsxs(i.Fragment,{children:[i.jsx(db,{className:"h-5 w-5 animate-spin"}),i.jsx("span",{children:"Signing in..."})]}):i.jsx("span",{children:"Sign in"})})]}),i.jsxs("div",{className:"mt-6 p-4 bg-slate-700/50 border border-slate-600 rounded-lg",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"🎮 Demo Accounts"}),i.jsx("p",{className:"text-xs text-slate-400 mb-3",children:"Use these demo accounts to test different dashboard types:"}),i.jsxs("div",{className:"space-y-2 text-xs",children:[i.jsxs("div",{className:"p-2 bg-slate-600/50 rounded",children:[i.jsx("p",{className:"text-blue-300 font-medium",children:"capacity.admin@capacitychemicals.com"}),i.jsx("p",{className:"text-slate-400",children:"password123 • Capacity Admin Dashboard"})]}),i.jsxs("div",{className:"p-2 bg-slate-600/50 rounded",children:[i.jsx("p",{className:"text-green-300 font-medium",children:"nsight.admin@capacitychemicals.com"}),i.jsx("p",{className:"text-slate-400",children:"password123 • Nsight Admin Dashboard"})]}),i.jsxs("div",{className:"p-2 bg-slate-600/50 rounded",children:[i.jsx("p",{className:"text-yellow-300 font-medium",children:"employee@capacitychemicals.com"}),i.jsx("p",{className:"text-slate-400",children:"password123 • Employee Dashboard"})]})]}),i.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Contact your administrator to create a new account."}),i.jsx("div",{className:"mt-3 flex justify-center",children:i.jsx(dS,{className:"text-xs px-2 py-1"})})]})]}),i.jsx("div",{className:"text-center mt-8 text-slate-500 text-sm",children:i.jsx("p",{children:"© 2024 Chemformation. All rights reserved."})})]})})},hS=({isCollapsed:t,onToggleCollapse:e})=>{const{signOut:s,userProfile:n}=zs(),r=gt(),a=f=>{console.log("Navigating to:",f),r(f)},o=async()=>{try{await s(),r("/auth")}catch(f){console.error("Logout error:",f)}},l=[{icon:E0,label:"Dashboard",action:()=>a("/dashboard")}],c=[...l,{icon:Gk,label:"Chemformation",action:()=>console.log("Chemformation - No dedicated page yet")},{icon:dt,label:"User Management",action:()=>a("/user-management")},{icon:xs,label:"System Health",action:()=>a("/system-health")}],d=[{icon:E0,label:"NSight Dashboard",action:()=>a("/dashboard")},{icon:Ma,label:"Developer Tools",action:()=>console.log("Developer Tools clicked")},{icon:nn,label:"Company Management",action:()=>console.log("Company Management clicked")},{icon:dt,label:"Global User Management",action:()=>console.log("Global User Management clicked")},{icon:xs,label:"Platform Health",action:()=>console.log("Platform Health clicked")}],h=(()=>{if(!n)return l;switch(n.role){case"Capacity Admin":return c;case"NSight Admin":return d;case"Employee":default:return l}})();return i.jsxs("div",{className:`bg-slate-800 border-r border-slate-600 h-screen flex flex-col fixed left-0 top-0 z-50 transition-all duration-300 ${t?"w-20":"w-64"}`,children:[i.jsxs("div",{className:`h-16 px-4 border-b border-slate-600 flex items-center justify-between ${t?"px-2":""}`,children:[!t&&i.jsx("div",{className:"flex items-center",children:i.jsx("span",{className:"text-lg font-semibold text-slate-100",children:"Menu"})}),i.jsx("button",{onClick:e,className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-700 rounded-md transition-colors duration-200",title:t?"Expand sidebar":"Collapse sidebar",children:t?i.jsx(ya,{className:"h-5 w-5"}):i.jsx(ob,{className:"h-5 w-5"})})]}),i.jsx("nav",{className:"flex-1 p-4",children:i.jsx("ul",{className:"space-y-2",children:h.map((f,m)=>i.jsx("li",{children:i.jsxs("button",{onClick:p=>{p.preventDefault(),p.stopPropagation(),console.log("Button clicked:",f.label),f.action()},className:`flex items-center w-full px-3 py-2 text-slate-200 hover:bg-slate-700 
                         rounded-md transition-colors duration-200 group relative text-left`,title:t?f.label:"",children:[i.jsx(f.icon,{className:`h-5 w-5 text-slate-400 group-hover:text-slate-200 ${t?"mx-auto":"mr-2"}`}),!t&&i.jsx("span",{className:"transition-opacity duration-200 flex-1 text-left whitespace-nowrap overflow-hidden text-ellipsis",children:f.label}),t&&i.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-slate-700 text-slate-200 text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:f.label})]})},m))})}),i.jsxs("div",{className:"border-t border-slate-600",children:[i.jsx("div",{className:"p-4 pb-2",children:i.jsxs("button",{onClick:()=>a("/settings"),className:`flex items-center w-full px-3 py-2 text-slate-200 hover:bg-slate-700 
                     rounded-md transition-colors duration-200 group relative`,title:t?"Settings":"",children:[i.jsx(Vl,{className:`h-5 w-5 text-slate-400 group-hover:text-slate-200 ${t?"mx-auto":"mr-2"}`}),!t&&i.jsx("span",{className:"transition-opacity duration-200",children:"Settings"}),t&&i.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-slate-700 text-slate-200 text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:"Settings"})]})}),i.jsx("div",{className:"p-4 pt-0",children:i.jsxs("button",{onClick:o,className:`flex items-center w-full px-3 py-2 text-slate-200 hover:bg-slate-700 
                     rounded-md transition-colors duration-200 group relative`,title:t?"Logout":"",children:[i.jsx(cf,{className:`h-5 w-5 text-slate-400 group-hover:text-slate-200 ${t?"mx-auto":"mr-2"}`}),!t&&i.jsx("span",{className:"transition-opacity duration-200",children:"Logout"}),t&&i.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-slate-700 text-slate-200 text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:"Logout"})]})})]})]})},he=({children:t,className:e="",...s})=>i.jsx("div",{className:`bg-slate-800 rounded-lg border border-slate-600 shadow-sm ${e}`,...s,children:t}),Cc=async()=>{const{data:{user:t}}=await Ne.auth.getUser();return t},wa=async()=>{try{const{data:t,error:e}=await Ne.from("raw_materials").select("*").order("id",{ascending:!0});if(e)throw e;return t.map(s=>({id:s.id,materialName:s.material_name,supplierName:s.supplier_name,manufacture:s.manufacture,tradeName:s.trade_name,supplierCost:s.supplier_cost,casNumber:s.cas_number,weightVolume:s.weight_volume,activityPercentage:s.activity_percentage,density:s.density,viscosity:s.viscosity,cost:s.cost,country:s.country,description:s.description,physicalForm:s.physical_form,purity:s.purity,storageConditions:s.storage_conditions,hazardClass:s.hazard_class,shelfLife:s.shelf_life,created_by:s.created_by,assigned_to:s.assigned_to,created_at:s.created_at,updated_at:s.updated_at,createdByUser:null,assignedToUser:null,dataSourceNotes:s.data_source_notes,confidenceLevel:s.confidence_level,verificationSources:s.verification_sources,lastVerified:s.last_verified,molecularFormula:s.molecular_formula,molecularWeight:s.molecular_weight,iupacName:s.iupac_name,pubchemCID:s.pubchem_cid,canonicalSMILES:s.canonical_smiles}))}catch(t){return console.error("Error fetching materials:",t),[]}},fS=async(t,e)=>{try{const s=await Cc(),n={material_name:e.materialName,supplier_name:e.supplierName,manufacture:e.manufacture,trade_name:e.tradeName,supplier_cost:e.supplierCost,cas_number:e.casNumber,weight_volume:e.weightVolume,activity_percentage:e.activityPercentage,density:e.density,viscosity:e.viscosity,cost:e.cost,country:e.country,description:e.description,physical_form:e.physicalForm,purity:e.purity,storage_conditions:e.storageConditions,hazard_class:e.hazardClass,shelf_life:e.shelfLife,updated_at:new Date().toISOString()};e.assigned_to!==void 0&&(n.assigned_to=e.assigned_to);const{data:r,error:a}=await Ne.from("raw_materials").update(n).eq("id",t).select("*").single();if(a)throw a;return{id:r.id,materialName:r.material_name,supplierName:r.supplier_name,manufacture:r.manufacture,tradeName:r.trade_name,supplierCost:r.supplier_cost,casNumber:r.cas_number,weightVolume:r.weight_volume,activityPercentage:r.activity_percentage,density:r.density,viscosity:r.viscosity,cost:r.cost,country:r.country,description:r.description,physicalForm:r.physical_form,purity:r.purity,storageConditions:r.storage_conditions,hazardClass:r.hazard_class,shelfLife:r.shelf_life,created_by:r.created_by,assigned_to:r.assigned_to,created_at:r.created_at,updated_at:r.updated_at,createdByUser:null,assignedToUser:null}}catch(s){return console.error("Error updating material:",s),null}},L0=async t=>{try{const e=await Cc();if(!e)throw new Error("User not authenticated");const s={material_name:t.materialName,supplier_name:t.supplierName,manufacture:t.manufacture,trade_name:t.tradeName,supplier_cost:t.supplierCost,cas_number:t.casNumber,weight_volume:t.weightVolume,activity_percentage:t.activityPercentage,density:t.density,viscosity:t.viscosity,cost:t.cost,country:t.country,description:t.description,physical_form:t.physicalForm,purity:t.purity,storage_conditions:t.storageConditions,hazard_class:t.hazardClass,shelf_life:t.shelfLife,created_by:e.id,assigned_to:t.assigned_to||e.id,data_source_notes:t.dataSourceNotes,confidence_level:t.confidenceLevel,verification_sources:t.verificationSources,last_verified:t.lastVerified||new Date().toISOString(),molecular_formula:t.molecularFormula,molecular_weight:t.molecularWeight,iupac_name:t.iupacName,pubchem_cid:t.pubchemCID,canonical_smiles:t.canonicalSMILES},{data:n,error:r}=await Ne.from("raw_materials").insert([s]).select("*").single();if(r)throw r;return{id:n.id,materialName:n.material_name,supplierName:n.supplier_name,manufacture:n.manufacture,tradeName:n.trade_name,supplierCost:n.supplier_cost,casNumber:n.cas_number,weightVolume:n.weight_volume,activityPercentage:n.activity_percentage,density:n.density,viscosity:n.viscosity,cost:n.cost,country:n.country,description:n.description,physicalForm:n.physical_form,purity:n.purity,storageConditions:n.storage_conditions,hazardClass:n.hazard_class,shelfLife:n.shelf_life,created_by:n.created_by,assigned_to:n.assigned_to,created_at:n.created_at,updated_at:n.updated_at,createdByUser:null,assignedToUser:null,dataSourceNotes:n.data_source_notes,confidenceLevel:n.confidence_level,verificationSources:n.verification_sources,lastVerified:n.last_verified,molecularFormula:n.molecular_formula,molecularWeight:n.molecular_weight,iupacName:n.iupac_name,pubchemCID:n.pubchem_cid,canonicalSMILES:n.canonical_smiles}}catch(e){return console.error("Error adding material:",e),null}},M0=async()=>{try{const{data:t,error:e}=await Ne.from("formulas").select("*").order("id",{ascending:!0});if(e)throw e;return t.map(s=>({id:s.id,name:s.name,totalCost:s.total_cost,finalSalePriceDrum:s.final_sale_price_drum,finalSalePriceTote:s.final_sale_price_tote,ingredients:s.ingredients||[],created_by:s.created_by,assigned_to:s.assigned_to,created_at:s.created_at,updated_at:s.updated_at,createdByUser:null,assignedToUser:null}))}catch(t){return console.error("Error fetching formulas:",t),[]}},mS=async t=>{try{const{data:e,error:s}=await Ne.from("formulas").select("*").eq("id",t).single();if(s)throw s;return{id:e.id,name:e.name,totalCost:e.total_cost,finalSalePriceDrum:e.final_sale_price_drum,finalSalePriceTote:e.final_sale_price_tote,ingredients:e.ingredients||[],created_by:e.created_by,assigned_to:e.assigned_to,created_at:e.created_at,updated_at:e.updated_at,createdByUser:null,assignedToUser:null}}catch(e){return console.error("Error fetching formula:",e),null}},pS=async(t,e)=>{try{const s=await Cc(),n={name:e.name,total_cost:e.totalCost,final_sale_price_drum:e.finalSalePriceDrum,final_sale_price_tote:e.finalSalePriceTote,ingredients:e.ingredients,updated_at:new Date().toISOString()};e.assigned_to!==void 0&&(n.assigned_to=e.assigned_to);const{data:r,error:a}=await Ne.from("formulas").update(n).eq("id",t).select("*").single();if(a)throw a;return{id:r.id,name:r.name,totalCost:r.total_cost,finalSalePriceDrum:r.final_sale_price_drum,finalSalePriceTote:r.final_sale_price_tote,ingredients:r.ingredients||[],created_by:r.created_by,assigned_to:r.assigned_to,created_at:r.created_at,updated_at:r.updated_at,createdByUser:null,assignedToUser:null}}catch(s){return console.error("Error updating formula:",s),null}},gS=async t=>{try{const e=await Cc();if(!e)throw new Error("User not authenticated");const s={id:t.id||`FORM${Date.now()}`,name:t.name,total_cost:t.totalCost,final_sale_price_drum:t.finalSalePriceDrum,final_sale_price_tote:t.finalSalePriceTote,ingredients:t.ingredients||[],created_by:e.id,assigned_to:t.assigned_to||e.id},{data:n,error:r}=await Ne.from("formulas").insert([s]).select("*").single();if(r)throw r;return{id:n.id,name:n.name,totalCost:n.total_cost,finalSalePriceDrum:n.final_sale_price_drum,finalSalePriceTote:n.final_sale_price_tote,ingredients:n.ingredients||[],created_by:n.created_by,assigned_to:n.assigned_to,created_at:n.created_at,updated_at:n.updated_at,createdByUser:null,assignedToUser:null}}catch(e){return console.error("Error adding formula:",e),null}},xS=async()=>{try{const{data:t,error:e}=await Ne.from("suppliers").select("*").order("id",{ascending:!0});if(e)throw e;return t.map(s=>({id:s.id,supplierName:s.supplier_name,supplierId:s.supplier_id,supplierEmail:s.supplier_email,supplierContact:s.supplier_contact,packagingCode:s.packaging_code,standardCost:s.standard_cost,created_by:s.created_by,assigned_to:s.assigned_to,created_at:s.created_at,updated_at:s.updated_at,createdByUser:s.created_by_profile?`${s.created_by_profile.first_name} ${s.created_by_profile.last_name}`:null,assignedToUser:s.assigned_to_profile?`${s.assigned_to_profile.first_name} ${s.assigned_to_profile.last_name}`:null}))}catch(t){return console.error("Error fetching suppliers:",t),[]}},yS=async t=>{try{const{error:e}=await Ne.from("formulas").delete().eq("id",t);if(e)throw e;return!0}catch(e){return console.error("Error deleting formula:",e),!1}},vS=async t=>{try{const{error:e}=await Ne.from("raw_materials").delete().eq("id",t);if(e)throw e;return!0}catch(e){return console.error("Error deleting material:",e),!1}},mb=t=>t.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");class bS{constructor(){this.pubchemBaseUrl="https://pubchem.ncbi.nlm.nih.gov/rest/pug",this.chemspiderApiKey={}.VITE_CHEMSPIDER_API_KEY,this.nistApiKey={}.VITE_NIST_API_KEY}async getPubChemData(e,s=null){try{let n;s?n=`${this.pubchemBaseUrl}/compound/name/${encodeURIComponent(s)}/property/MolecularFormula,MolecularWeight,IUPACName,CanonicalSMILES/JSON`:n=`${this.pubchemBaseUrl}/compound/name/${encodeURIComponent(e)}/property/MolecularFormula,MolecularWeight,IUPACName,CanonicalSMILES/JSON`;const r=await fetch(n);if(!r.ok)throw new Error(`PubChem API error: ${r.status}`);const a=await r.json();if(a.PropertyTable&&a.PropertyTable.Properties.length>0){const o=a.PropertyTable.Properties[0];return{source:"PubChem",confidence:"HIGH",data:{molecularFormula:o.MolecularFormula,molecularWeight:o.MolecularWeight,iupacName:o.IUPACName,canonicalSMILES:o.CanonicalSMILES,cid:o.CID}}}return null}catch(n){return console.error("PubChem lookup error:",n),null}}async getPubChemProperties(e){var s,n;try{const r=`${this.pubchemBaseUrl}/compound/cid/${e}/property/HeavyAtomCount,ExactMass,MonoisotopicMass,Charge,Complexity/JSON`,a=await fetch(r);return a.ok&&((n=(s=(await a.json()).PropertyTable)==null?void 0:s.Properties)==null?void 0:n[0])||null}catch(r){return console.error("PubChem properties error:",r),null}}async getPubChemSafetyData(e){var s;try{const n=`${this.pubchemBaseUrl}/compound/cid/${e}/record/JSON`,r=await fetch(n);if(!r.ok)return null;const o=(s=(await r.json()).PC_Compounds)==null?void 0:s[0];return o?{source:"PubChem",confidence:"HIGH",data:this.extractSafetyFromRecord(o)}:null}catch(n){return console.error("PubChem safety data error:",n),null}}extractSafetyFromRecord(e){return{hazardClasses:[],storageConditions:[],handlingPrecautions:[]}}async getEnhancedChemicalData(e,s=null){const n={name:e,casNumber:s,sources:[],confidence:{},properties:{},safety:{}},r=await this.getPubChemData(e,s);if(r){n.sources.push("PubChem"),n.confidence.basic="HIGH",n.properties={...n.properties,...r.data};const a=await this.getPubChemProperties(r.data.cid);a&&(n.properties={...n.properties,...a});const o=await this.getPubChemSafetyData(r.data.cid);o&&(n.safety=o.data,n.confidence.safety="HIGH")}if(this.chemspiderApiKey&&await this.getChemSpiderData(e)&&n.sources.push("ChemSpider"),this.nistApiKey){const a=await this.getNISTData(e);a&&(n.sources.push("NIST"),n.properties.thermodynamic=a,n.confidence.thermodynamic="HIGH")}return n}formatForMaterialAddition(e,s){return{materialName:e.name,casNumber:e.casNumber||s.casNumber,molecularFormula:e.properties.molecularFormula,molecularWeight:e.properties.molecularWeight,supplierName:s.supplierName,supplierCost:s.supplierCost,manufacture:s.manufacture,density:e.properties.density||s.density,physicalForm:this.determinePhysicalForm(e.properties),hazardClass:this.determineHazardClass(e.safety),dataSourceNotes:`Verified via ${e.sources.join(", ")}. Pricing and supplier info estimated.`,confidenceLevel:this.calculateOverallConfidence(e),lastVerified:new Date().toISOString(),verificationSources:e.sources}}determinePhysicalForm(e){return"Unknown"}determineHazardClass(e){return"Unknown"}calculateOverallConfidence(e){const s=e.sources.length;return s>=2?"HIGH":s===1?"MEDIUM":"LOW"}}class wS{constructor(){this.isDevelopment=!1,this.apiEndpoint="/api/ai-chat",this.chemicalDB=new bS,this.isDevelopment&&kr(()=>import("./index-ecc4caf6.js"),[]).then(({default:e})=>{this.openai=new e({apiKey:"your_openai_api_key_here",dangerouslyAllowBrowser:!0})}),this.systemPrompt=`You are a specialized AI assistant for Capacity Chemical's internal platform. You ONLY answer questions related to chemistry, chemical engineering, and chemical safety.

    Your expertise includes:
    - Chemical formulas and molecular structures
    - Chemical reactions and mechanisms
    - Chemical safety protocols and regulations
    - Material properties and specifications
    - Laboratory procedures and best practices
    - Chemical process engineering
    - Regulatory compliance (OSHA, EPA, etc.)
    - Chemical supplier information and sourcing
    - Industrial chemistry applications

    SPECIAL FEATURE - RAW MATERIAL ADDITION WITH CONFIDENCE LEVELS:
    When adding materials, you must include confidence levels for each field:

    HIGH CONFIDENCE (✅): Well-established chemical properties from training data
    - CAS numbers for common chemicals
    - Basic physical properties (density, melting point)
    - Standard safety classifications
    - Molecular formulas and structures

    MEDIUM CONFIDENCE (🟡): Industry-standard values that may vary
    - Typical purity grades
    - Standard storage conditions
    - Common applications and uses
    - General manufacturer information

    LOW CONFIDENCE (⚠️): Estimated values that should be verified
    - Supplier pricing (always estimated)
    - Specific supplier availability
    - Regional sourcing information
    - Activity percentages for solutions
    - Viscosity values

    CRITICAL: When a user asks you to add a chemical or raw material to their database using phrases like:
    - "Add [chemical name] to my raw materials"
    - "I need to add [chemical name] to the database"
    - "Add [chemical name] to our materials"
    - "Please add [chemical name]"
    - "Add [chemical name] to the system"
    
    YOU MUST:
    1. Provide helpful information about the chemical
    2. ALWAYS include the special marker: **[ADD_MATERIAL]**
    3. Include all known details about the material with confidence indicators in this exact JSON format after the marker:
    {
      "materialName": "Chemical Name (keep under 100 chars)",
      "casNumber": "CAS Number if known (keep under 50 chars)", // ✅ HIGH or ⚠️ LOW
      "supplierName": "Supplier name (keep under 50 chars, use abbreviations if needed)", // ⚠️ LOW - Please verify
      "manufacture": "Manufacturer (keep under 50 chars, use abbreviations)", // 🟡 MEDIUM
      "tradeName": "Trade name (keep under 50 chars)",
      "supplierCost": "Supplier cost per unit (numeric value only, e.g. 25.50)", // ⚠️ LOW - Market estimate only
      "weightVolume": "Weight/Volume in lbs/gallon (keep under 50 chars, e.g. '8.34 lbs/gal')",
      "activityPercentage": "% Activity/concentration (keep under 50 chars, e.g. '12.5%')", // ⚠️ LOW - Estimate
      "density": "Density value (keep under 50 chars, e.g. '1.2 g/mL')", // ✅ HIGH
      "viscosity": "Viscosity measurement (keep under 50 chars, e.g. '10 cP')", // ⚠️ LOW - Estimate
      "cost": "Cost per unit in USD (numeric value only, e.g. 45.75)", // ⚠️ LOW - Market estimate only
      "physicalForm": "Solid/Liquid/Gas (keep under 50 chars)", // ✅ HIGH
      "hazardClass": "Hazard class (keep under 50 chars, e.g. 'Corrosive')", // ✅ HIGH
      "purity": "Purity % (keep under 50 chars, e.g. '99%')", // 🟡 MEDIUM - Typical grade
      "country": "Country of origin (keep under 50 chars)", // ⚠️ LOW - Please verify
      "description": "Brief description of the chemical and its uses with confidence notes",
      "storageConditions": "Storage requirements and safety precautions",
      "shelfLife": "Shelf life (keep under 50 chars, e.g. '2 years')",
      "dataSourceNotes": "Explain the reliability of the information provided. Example: CAS and density from chemical databases. Pricing estimated from historical data. Please verify supplier information.",
      "confidenceLevel": "MIXED" // Overall confidence: HIGH, MEDIUM, LOW, or MIXED
    }

    EXAMPLE MATERIAL ADDITION RESPONSE:
    When user says "Add sodium chloride to my raw materials", respond exactly like this:
    
    "I'll add sodium chloride (NaCl) to your raw materials database. Sodium chloride is commonly used in chemical processes as a reagent, preservative, and for ionic strength adjustment. It's generally safe to handle but should be stored in a dry environment.
    
    **[ADD_MATERIAL]**
    {
      "materialName": "Sodium Chloride",
      "casNumber": "7647-14-5", // ✅ HIGH - Well-known CAS number
      "supplierName": "ChemSupply Co.", // ⚠️ LOW - Please verify with your preferred suppliers
      "manufacture": "Sigma-Aldrich", // 🟡 MEDIUM - Common manufacturer for this chemical
      "tradeName": "NaCl",
      "supplierCost": "15.50", // ⚠️ LOW - Market estimate only, verify current pricing
      "weightVolume": "2.16 lbs/gal",
      "activityPercentage": "99%", // 🟡 MEDIUM - Typical for reagent grade
      "density": "2.17 g/cm³", // ✅ HIGH - Standard physical property
      "viscosity": "N/A",
      "cost": "18.75", // ⚠️ LOW - Market estimate only
      "physicalForm": "Crystalline Solid", // ✅ HIGH - Well-established
      "hazardClass": "Non-hazardous", // ✅ HIGH - Established safety classification
      "purity": "99.5%", // 🟡 MEDIUM - Typical reagent grade purity
      "country": "USA", // ⚠️ LOW - Please verify supplier location
      "description": "High purity sodium chloride for industrial and laboratory applications. CAS number and physical properties verified from chemical databases.",
      "storageConditions": "Store in dry place, avoid moisture", // ✅ HIGH - Standard storage requirements
      "shelfLife": "5 years", // 🟡 MEDIUM - Typical for dry salts
      "dataSourceNotes": "CAS number, density, and safety data verified from chemical databases. Pricing estimated from market data. Please verify supplier information and current pricing.",
      "confidenceLevel": "MIXED" // Mix of high-confidence chemical data and low-confidence commercial data
    }
    
    IMPORTANT: 
    - Research and provide accurate chemical data including CAS numbers, densities, hazard classifications, and typical uses
    - Include supplier cost and cost information when possible (use reasonable estimates based on market data)
    - For % Activity, provide the active ingredient concentration if it's a solution or mixture
    - Keep short fields (marked with character limits) concise to fit database constraints
    - Use abbreviations when necessary for field length limits
    - Always prioritize safety information in hazard class and storage conditions

    IMPORTANT INSTRUCTIONS:
    - If a question is NOT related to chemistry, chemical engineering, or chemical safety, politely decline to answer
    - Respond with: "I'm a specialized chemistry assistant and can only help with chemistry-related questions. Please ask me about chemical formulas, reactions, safety protocols, or other chemistry topics."
    - Always prioritize safety in your chemical responses
    - Provide accurate, professional information relevant to chemical engineering and manufacturing
    - When users upload files, only analyze them for chemical data, safety information, formulas, or specifications
    - For material addition requests, be thorough and include safety information

    Stay focused on your chemistry specialty and politely redirect non-chemistry questions.`}async generateResponse(e,s=null,n=[]){try{if(!this.isDevelopment)return await this.generateResponseFromAPI(e,s,n);if(!this.openai)throw new Error("OpenAI client not initialized. Check your API key.");const r=[{role:"system",content:this.systemPrompt},...n,{role:"user",content:this.buildUserMessage(e,s)}],o=(await this.openai.chat.completions.create({model:"gpt-4o",messages:r,max_tokens:1e3,temperature:.7,stream:!1})).choices[0].message.content;return await this.processResponse(o)}catch(r){throw console.error("AI Service Error:",r),new Error("Failed to generate AI response. Please try again.")}}async processResponse(e){if(e.includes("**[ADD_MATERIAL]**"))try{const s=e.split("**[ADD_MATERIAL]**"),n=s[0].trim(),a=s[1].trim().match(/\{[\s\S]*?\}/);if(a){const o=a[0].replace(/\/\/[^\r\n]*/g,"").trim(),l=JSON.parse(o),c=await this.enhanceWithChemicalVerification(l),d=this.validateMaterialData(c),u=await L0(d);return u?{response:n,materialAdded:!0,materialData:u,successMessage:`✅ Successfully added "${d.materialName}" with ${d.confidenceLevel} confidence verification!`}:{response:n,materialAdded:!1,errorMessage:"❌ Failed to save the material to the database. Please try again or add it manually."}}}catch(s){return console.error("Error processing material addition:",s),{response:e.replace("**[ADD_MATERIAL]**",""),materialAdded:!1,errorMessage:"❌ Error processing material addition. Please try again."}}return{response:e}}async enhanceWithChemicalVerification(e){try{console.log("🔍 Verifying chemical data with PubChem for:",e.materialName);const s=await this.chemicalDB.getEnhancedChemicalData(e.materialName,e.casNumber);return s&&s.sources.length>0?(console.log("✅ PubChem verification successful:",s.sources),{...e,casNumber:s.casNumber||e.casNumber,molecularFormula:s.properties.molecularFormula,molecularWeight:s.properties.molecularWeight,iupacName:s.properties.iupacName,dataSourceNotes:`Verified via ${s.sources.join(", ")} databases. Chemical properties confirmed. Pricing and supplier info estimated from AI.`,confidenceLevel:"HIGH",verificationSources:s.sources,lastVerified:new Date().toISOString(),pubchemCID:s.properties.cid,canonicalSMILES:s.properties.canonicalSMILES}):(console.log("⚠️ PubChem verification failed, using AI estimates"),{...e,dataSourceNotes:e.dataSourceNotes+" Chemical verification attempted but not found in databases.",confidenceLevel:"LOW",verificationSources:[],lastVerified:new Date().toISOString()})}catch(s){return console.error("Chemical verification error:",s),{...e,dataSourceNotes:e.dataSourceNotes+" Chemical verification failed due to network error.",confidenceLevel:"LOW",verificationSources:[],lastVerified:new Date().toISOString()}}}validateMaterialData(e){const s=(r,a)=>r&&String(r).substring(0,a),n=r=>{if(!r)return null;const a=parseFloat(String(r).replace(/[^0-9.-]/g,""));return isNaN(a)?null:a};return{materialName:s(e.materialName,100),casNumber:s(e.casNumber,50),supplierName:s(e.supplierName,50),manufacture:s(e.manufacture,50),tradeName:s(e.tradeName,50),supplierCost:n(e.supplierCost),weightVolume:s(e.weightVolume,50),activityPercentage:s(e.activityPercentage,50),density:s(e.density,50),viscosity:s(e.viscosity,50),cost:n(e.cost),physicalForm:s(e.physicalForm,50),hazardClass:s(e.hazardClass,50),purity:s(e.purity,50),country:s(e.country,50),shelfLife:s(e.shelfLife,50),description:e.description,storageConditions:e.storageConditions,assigned_to:e.assigned_to,dataSourceNotes:e.dataSourceNotes,confidenceLevel:s(e.confidenceLevel,50),verificationSources:e.verificationSources||null,lastVerified:e.lastVerified||new Date().toISOString(),molecularFormula:s(e.molecularFormula,50),molecularWeight:n(e.molecularWeight),iupacName:s(e.iupacName,200),pubchemCID:s(e.pubchemCID,50),canonicalSMILES:s(e.canonicalSMILES,200)}}async generateResponseFromAPI(e,s,n){const r=await fetch(this.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,files:s,conversationHistory:n})});if(!r.ok)throw new Error(`API request failed: ${r.status}`);const a=await r.json();if(a.materialAdded){if(console.log("📦 Frontend: Received backend verification response:",a),!a.materialData)return console.error("❌ Frontend: Backend returned materialAdded=true but no materialData"),{response:a.response,materialAdded:!1,errorMessage:a.errorMessage||"❌ Backend verification failed. Please try again."};try{const o=this.validateMaterialData(a.materialData);console.log("✅ Frontend: Material validated, saving to database:",o.materialName);const l=await L0(o);return l?{response:a.response,materialAdded:!0,materialData:l,successMessage:a.successMessage||`✅ Successfully added "${o.materialName}" with backend verification!`}:{response:a.response,materialAdded:!1,errorMessage:"❌ Failed to save the verified material to the database. Please try again."}}catch(o){return console.error("❌ Frontend: Error processing backend material data:",o),{response:a.response,materialAdded:!1,errorMessage:"❌ Error processing verified material data. Please try again."}}}return a.response}buildUserMessage(e,s){let n=e;if(s&&s.length>0){n+=`

Attached files:
`,s.forEach(a=>{n+=`- ${a.name} (${a.type}, ${this.formatFileSize(a.size)})
`});const r=s.map(a=>a.type);r.some(a=>a.includes("pdf"))&&(n+=`
Please analyze any chemical data, safety information, or formulas in the PDF documents.`),r.some(a=>a.includes("image"))&&(n+=`
Please analyze any chemical diagrams, formulas, or laboratory images.`),r.some(a=>a.includes("csv")||a.includes("excel"))&&(n+=`
Please analyze the chemical data, material properties, or test results in the spreadsheet.`)}return n}formatFileSize(e){if(e===0)return"0 Bytes";const s=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,r)).toFixed(2))+" "+n[r]}async*generateStreamingResponse(e,s=null,n=[]){var r,a;if(!this.isDevelopment||!this.openai)throw new Error("Streaming only available in development mode");try{const o=[{role:"system",content:this.systemPrompt},...n,{role:"user",content:this.buildUserMessage(e,s)}],l=await this.openai.chat.completions.create({model:"gpt-4o",messages:o,max_tokens:1e3,temperature:.7,stream:!0});for await(const c of l){const d=(a=(r=c.choices[0])==null?void 0:r.delta)==null?void 0:a.content;d&&(yield d)}}catch(o){throw console.error("AI Streaming Error:",o),new Error("Failed to generate streaming response.")}}}const uf=new wS,jS=({onMaterialAdded:t})=>{const[e,s]=w.useState(!1),[n,r]=w.useState(!1),[a,o]=w.useState([{id:1,text:"Hello! I'm your AI assistant specialized in chemical engineering and safety. I can help with chemical formulas, safety protocols, material specifications, regulatory compliance, and analyze documents you upload. How can I help you today?",sender:"bot",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}]),[l,c]=w.useState(""),[d,u]=w.useState(!1),[h,f]=w.useState([]),m=w.useRef(null),p=j=>{const C=Array.from(j.target.files).map(_=>({id:Date.now()+Math.random(),file:_,name:_.name,size:_.size,type:_.type,url:URL.createObjectURL(_)}));f(_=>[..._,...C])},y=j=>{f(S=>{const C=S.find(_=>_.id===j);return C&&C.url&&URL.revokeObjectURL(C.url),S.filter(_=>_.id!==j)})},x=j=>{if(j===0)return"0 Bytes";const S=1024,C=["Bytes","KB","MB","GB"],_=Math.floor(Math.log(j)/Math.log(S));return parseFloat((j/Math.pow(S,_)).toFixed(2))+" "+C[_]},g=j=>j.startsWith("image/")?i.jsx(lb,{className:"h-4 w-4"}):i.jsx(of,{className:"h-4 w-4"}),v=async()=>{if(!l.trim()&&h.length===0)return;const j={id:a.length+1,text:l||(h.length>0?"Uploaded files:":""),sender:"user",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),files:h.length>0?[...h]:null};o(_=>[..._,j]);const S=l,C=[...h];c(""),f([]),u(!0);try{const _=a.map(L=>({role:L.sender==="user"?"user":"assistant",content:L.text})),P=await uf.generateResponse(S,C,_),N={id:a.length+2,text:P.response||P,sender:"bot",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),materialAdded:P.materialAdded||!1,materialData:P.materialData||null,successMessage:P.successMessage||null,errorMessage:P.errorMessage||null};o(L=>[...L,N]),N.materialAdded&&t&&t(N.materialData)}catch(_){console.error("AI Response Error:",_);const P={id:a.length+2,text:"I apologize, but I encountered an error processing your request. Please try again. If the issue persists, please contact technical support.",sender:"bot",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isError:!0};o(N=>[...N,P])}finally{u(!1)}},b=j=>{j.key==="Enter"&&!j.shiftKey&&(j.preventDefault(),v())},k=(j,S=!1)=>{const C=j.type.startsWith("image/");return i.jsxs("div",{className:`flex items-center space-x-2 p-2 rounded-md ${S?"bg-slate-600 bg-opacity-50":"bg-slate-700"}`,children:[g(j.type),i.jsxs("div",{className:"flex-1 min-w-0",children:[i.jsx("p",{className:"text-sm text-slate-200 truncate",children:j.name}),i.jsx("p",{className:"text-xs text-slate-400",children:x(j.size)})]}),C&&j.url&&i.jsx("img",{src:j.url,alt:j.name,className:"w-8 h-8 object-cover rounded"}),!S&&i.jsx("button",{onClick:()=>y(j.id),className:"text-slate-400 hover:text-red-400 transition-colors",children:i.jsx(ut,{className:"h-4 w-4"})})]},j.id)};return e?i.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:i.jsxs(he,{className:`w-80 transition-all duration-200 ${n?"h-14":"h-[500px]"} flex flex-col`,children:[i.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-600 flex-shrink-0",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:i.jsx(A0,{className:"h-4 w-4 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-100",children:"AI Assistant"}),i.jsx("p",{className:"text-xs text-slate-400",children:"AI-Powered • File analysis supported"})]})]}),i.jsxs("div",{className:"flex items-center space-x-1",children:[i.jsx("button",{onClick:()=>r(!n),className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-slate-200",children:i.jsx(eS,{className:"h-4 w-4"})}),i.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-slate-200",children:i.jsx(ut,{className:"h-4 w-4"})})]})]}),!n&&i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"flex-1 p-4 space-y-3 overflow-y-auto min-h-0",children:[a.map(j=>i.jsx("div",{className:`flex ${j.sender==="user"?"justify-end":"justify-start"}`,children:i.jsxs("div",{className:`max-w-xs rounded-lg p-3 ${j.sender==="user"?"bg-blue-600 text-white":j.isError?"bg-red-600 text-white border border-red-500":"bg-slate-700 text-slate-100"}`,children:[j.text&&i.jsx("p",{className:"text-sm mb-2",children:j.text}),j.successMessage&&i.jsxs("div",{className:"mt-2 p-2 bg-green-600 bg-opacity-20 border border-green-500 rounded text-green-200",children:[i.jsx("p",{className:"text-sm",children:j.successMessage}),j.materialData&&i.jsxs("p",{className:"text-xs mt-1 text-green-300",children:["Added to Raw Materials • ID: ",j.materialData.id]})]}),j.errorMessage&&i.jsx("div",{className:"mt-2 p-2 bg-red-600 bg-opacity-20 border border-red-500 rounded text-red-200",children:i.jsx("p",{className:"text-sm",children:j.errorMessage})}),j.files&&i.jsx("div",{className:"space-y-2",children:j.files.map(S=>k(S,!0))}),i.jsx("p",{className:`text-xs mt-1 ${j.sender==="user"?"text-blue-100":"text-slate-400"}`,children:j.timestamp})]})},j.id)),d&&i.jsx("div",{className:"flex justify-start",children:i.jsx("div",{className:"bg-slate-700 text-slate-100 rounded-lg p-3",children:i.jsxs("div",{className:"flex space-x-1",children:[i.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),i.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),i.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),h.length>0&&i.jsx("div",{className:"px-4 py-2 border-t border-slate-600 bg-slate-800 flex-shrink-0",children:i.jsx("div",{className:"space-y-2 max-h-24 overflow-y-auto",children:h.map(j=>k(j))})}),i.jsx("div",{className:"p-4 border-t border-slate-600 flex-shrink-0",children:i.jsxs("div",{className:"flex items-end space-x-2",children:[i.jsx("input",{type:"file",ref:m,onChange:p,multiple:!0,accept:".pdf,.doc,.docx,.txt,.csv,.xlsx,.xls,.png,.jpg,.jpeg,.gif",className:"hidden"}),i.jsx("button",{onClick:()=>{var j;return(j=m.current)==null?void 0:j.click()},className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-700 rounded-md transition-colors flex-shrink-0",title:"Attach files",children:i.jsx(nS,{className:"h-4 w-4"})}),i.jsx("div",{className:"flex-1",children:i.jsx("textarea",{value:l,onChange:j=>c(j.target.value),onKeyPress:b,placeholder:"Type your message...",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:border-slate-500 focus:ring-0 resize-none max-h-20",rows:1,style:{minHeight:"40px",height:"40px"},onInput:j=>{j.target.style.height="40px",j.target.style.height=Math.min(j.target.scrollHeight,80)+"px"}})}),i.jsx("button",{onClick:v,disabled:!l.trim()&&h.length===0,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex-shrink-0",children:i.jsx(rS,{className:"h-4 w-4"})})]})})]})]})}):i.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:i.jsx("button",{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all duration-200 hover:scale-105",children:i.jsx(A0,{className:"h-6 w-6"})})})},NS=()=>{const[t,e]=w.useState(!1),s=w.useRef(null),n=gt(),{user:r,userProfile:a,signOut:o}=zs();w.useEffect(()=>{const f=m=>{s.current&&!s.current.contains(m.target)&&e(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[]);const l=[{name:"Formulas",icon:Fs,action:()=>n("/formulas")},{name:"Raw Materials",icon:Is,action:()=>n("/raw-materials")},{name:"Suppliers",icon:dt,action:()=>n("/suppliers")}],c=()=>{if(a!=null&&a.first_name&&(a!=null&&a.last_name))return`${a.first_name} ${a.last_name}`;if(r!=null&&r.email){const f=r.email.split("@")[0];return f.charAt(0).toUpperCase()+f.slice(1)}return"User"},d=()=>{if(!(a!=null&&a.role))return"Employee";switch(a.role){case"Capacity Admin":return"Capacity Admin";case"NSight Admin":return"NSight Admin";case"Employee":default:return"Employee"}},u=()=>a!=null&&a.first_name&&(a!=null&&a.last_name)?`${a.first_name.charAt(0)}${a.last_name.charAt(0)}`.toUpperCase():r!=null&&r.email?r.email.split("@")[0].charAt(0).toUpperCase():"U",h=async()=>{try{await o(),n("/auth")}catch(f){console.error("Logout error:",f)}};return i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"relative",ref:s,children:[i.jsxs("button",{onClick:()=>e(!t),className:"flex items-center space-x-2 text-slate-300 hover:text-slate-100 transition-colors p-2 rounded-lg hover:bg-slate-700",children:[i.jsx("div",{className:"grid grid-cols-3 gap-1 p-1",children:[...Array(9)].map((f,m)=>i.jsx("div",{className:"w-1 h-1 bg-slate-400 rounded-sm"},m))}),i.jsx("span",{className:"text-sm",children:"Apps"}),i.jsx(Un,{className:`w-4 h-4 transition-transform duration-200 ${t?"rotate-180":""}`})]}),t&&i.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-slate-800 border border-slate-700 rounded-lg shadow-lg z-50",children:l.map((f,m)=>{const p=f.icon;return i.jsxs("button",{onClick:()=>{f.action(),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 text-left text-slate-300 hover:text-slate-100 hover:bg-slate-700 transition-colors ${m===0?"rounded-t-lg":""} ${m===l.length-1?"rounded-b-lg":""}`,children:[i.jsx(p,{className:"w-5 h-5"}),i.jsx("span",{children:f.name})]},f.name)})})]}),i.jsxs("div",{className:"flex items-center space-x-2 text-slate-300",children:[i.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-full flex items-center justify-center text-sm font-medium text-slate-200",children:u()}),i.jsxs("div",{className:"flex flex-col",children:[i.jsx("span",{className:"text-sm font-medium text-slate-200",children:c()}),i.jsx("span",{className:"text-xs text-slate-400",children:d()})]}),i.jsx("button",{onClick:h,className:"p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-700 rounded transition-colors",title:"Quick Logout (Testing)",children:i.jsx(cf,{className:"w-4 h-4"})})]})]})},$e=({children:t,onMaterialAdded:e})=>{const{userProfile:s}=zs(),n=Ut(),r=n.pathname!=="/dashboard",[a,o]=w.useState(r);return w.useEffect(()=>{n.pathname!=="/dashboard"&&o(!0)},[n.pathname]),w.useEffect(()=>{let l=0;const c=3,d=async()=>{if(s!=null&&s.email)try{const h=window.location.hostname==="localhost"?"http://localhost:3001/api/track-activity":"/api/track-activity",f=await fetch(h,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:s.email,userName:`${s.first_name||""} ${s.last_name||""}`.trim()||s.email.split("@")[0],userRole:s.role||"Employee",page:n.pathname,timestamp:new Date().toISOString()}),signal:AbortSignal.timeout(5e3)});if(!f.ok)throw new Error(`HTTP ${f.status}: ${f.statusText}`);l=0}catch(h){if(l++,l<=c&&(h.name==="TypeError"&&h.message.includes("Failed to fetch")?console.warn(`📡 Activity tracking server not reachable (attempt ${l}/${c})`):h.name==="TimeoutError"?console.warn(`⏱️ Activity tracking timeout (attempt ${l}/${c})`):console.warn(`⚠️ Activity tracking error (attempt ${l}/${c}):`,h.message)),l>=c)return console.warn("🚫 Activity tracking disabled after repeated failures"),!1}return!0};d();let u=setInterval(async()=>{await d()||(clearInterval(u),console.warn("🔄 Activity tracking heartbeat stopped due to repeated failures"))},3e4);return()=>{clearInterval(u)}},[s,n.pathname]),i.jsxs("div",{className:"min-h-screen bg-slate-900 flex flex-col",children:[i.jsx("header",{className:"bg-slate-800 border-b border-slate-700 h-16 flex items-center justify-end px-6 sticky top-0 z-40",children:i.jsx(NS,{})}),i.jsxs("div",{className:"flex flex-1",children:[i.jsx(hS,{isCollapsed:a,onToggleCollapse:()=>o(!a)}),i.jsx("main",{className:"flex-1 p-8 transition-all duration-300 overflow-x-auto",style:{marginLeft:a?"80px":"256px",minHeight:"calc(100vh - 64px)",position:"relative"},children:t})]}),i.jsx(jS,{onMaterialAdded:e})]})},_S=()=>{const[t,e]=w.useState([]),[s,n]=w.useState(1),[r,a]=w.useState([]),[o,l]=w.useState({}),[c,d]=w.useState(new Set),[u,h]=w.useState(new Set),f=gt(),m=20,{getAllUsers:p,userProfile:y}=zs(),x=A=>{switch(A){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}},g=A=>{switch(A){case"formulas":return i.jsx(Fs,{className:"w-4 h-4 text-blue-500"});case"raw-materials":return i.jsx(Is,{className:"w-4 h-4 text-blue-500"});case"suppliers":return i.jsx(dt,{className:"w-4 h-4 text-blue-500"});case"developer-mode":return i.jsx(Ma,{className:"w-4 h-4 text-blue-500"});case"existing-company-mode":return i.jsx(nn,{className:"w-4 h-4 text-green-500"});default:return null}},v=async()=>{try{const{data:A,error:E}=await p();if(E){console.error("Error loading users:",E);return}const D=A.map(H=>({id:H.id,name:`${H.first_name||""} ${H.last_name||""}`.trim()||H.email.split("@")[0],email:H.email,role:H.role||"Employee",status:"Active",lastLogin:H.created_at?new Date(H.created_at).toISOString().split("T")[0]:"Never",contact:"",appAccess:x(H.role||"Employee"),department:H.department||"",created_at:H.created_at,updated_at:H.updated_at}));let F=[],U={totalLogins:0,totalLogouts:0,uniqueUsers:0},Z=[];try{const H=window.location.hostname==="localhost"?"http://localhost:3001/api/activity-summary":"/api/activity-summary",K=await fetch(H);if(K.ok){const ee=await K.json();ee.success&&(U=ee.summary,Z=ee.onlineUsers||[],F=ee.summary.recentActivity||[],console.log("📊 Activity summary from API:",{summary:U,onlineCount:Z.length}))}else throw new Error(`API responded with ${K.status}`)}catch(H){console.warn("⚠️ Failed to fetch activity from API, using localStorage fallback:",H.message),F=rb({limit:50}),U=$k(24)}let R=new Set;if(Z.length>0)Z.forEach(H=>{R.add(H.user_email)}),console.log("👥 Online users from API:",Array.from(R));else{const H=new Date(Date.now()-18e5),K={};F.forEach(ee=>{(!K[ee.userEmail]||new Date(ee.timestamp)>new Date(K[ee.userEmail].timestamp))&&(K[ee.userEmail]=ee)}),Object.entries(K).forEach(([ee,ae])=>{new Date(ae.timestamp)>H&&ae.type===Zs.LOGIN&&R.add(ee)})}const G=D.map(H=>{const K=F.filter(ae=>ae.userEmail===H.email),ee=K.find(ae=>ae.type===Zs.LOGIN);return{...H,lastLoginActivity:ee,recentActivity:K.slice(0,5),isOnline:R.has(H.email)}}).sort((H,K)=>{if(H.isOnline&&!K.isOnline)return-1;if(!H.isOnline&&K.isOnline)return 1;const ee=H.lastLoginActivity?new Date(H.lastLoginActivity.timestamp):new Date(0);return(K.lastLoginActivity?new Date(K.lastLoginActivity.timestamp):new Date(0))-ee});e(G),a(F),l(U),h(R)}catch(A){console.error("Error in loadData:",A)}};w.useEffect(()=>{v();const A=()=>{v()};return window.addEventListener("loginActivityUpdate",A),()=>{window.removeEventListener("loginActivityUpdate",A)}},[]);const b=A=>{switch(A){case"Active":return"text-green-600 bg-green-50";case"Inactive":return"text-red-600 bg-red-50";default:return"text-slate-600 bg-slate-50"}},k=A=>{switch(A){case"Admin":return"text-purple-600 bg-purple-100";case"Capacity Admin":return"text-green-600 bg-green-100";case"NSight Admin":return"text-indigo-600 bg-indigo-100";case"Employee":return"text-blue-600 bg-blue-100";default:return"text-slate-600 bg-slate-100"}},j=A=>{const E=new Set(c);E.has(A)?E.delete(A):E.add(A),d(E)},S=Math.ceil(t.length/m),C=(s-1)*m,_=C+m,P=t.slice(C,_),N=()=>{n(A=>Math.max(A-1,1))},L=()=>{n(A=>Math.min(A+1,S))};return i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-6",children:[i.jsxs("div",{className:"flex items-center space-x-6",children:[i.jsxs("div",{className:"flex items-center",children:[i.jsx(dt,{className:"h-6 w-6 text-primary-600 mr-2"}),i.jsxs("button",{onClick:()=>f("/user-management"),className:"flex items-center space-x-2 hover:text-blue-400 transition-colors group",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-100 group-hover:text-blue-400",children:"User Management & Activity"}),i.jsx(Yk,{className:"h-4 w-4 text-slate-400 group-hover:text-blue-400"})]})]}),i.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(C0,{className:"w-3 h-3 text-green-400 fill-current"}),i.jsx("span",{className:"text-green-400 font-semibold",children:u.size}),i.jsx("span",{className:"text-slate-400",children:"Online"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Xk,{className:"w-4 h-4 text-blue-400"}),i.jsx("span",{className:"text-blue-400 font-semibold",children:o.totalLogins||0}),i.jsx("span",{className:"text-slate-400",children:"Logins"})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(cf,{className:"w-4 h-4 text-orange-400"}),i.jsx("span",{className:"text-orange-400 font-semibold",children:o.totalLogouts||0}),i.jsx("span",{className:"text-slate-400",children:"Logouts"})]}),i.jsx("div",{className:"text-slate-500 text-xs",children:"Last 24h"})]})]}),(y==null?void 0:y.role)==="Capacity Admin"&&i.jsx(_e,{size:"sm",onClick:()=>f("/user-management?action=add"),children:"Add User"})]}),i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-slate-600",children:[i.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"User"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"Role"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"Status"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"Last Activity"}),i.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"App Access"})]})}),i.jsx("tbody",{children:P.map(A=>i.jsxs(tc.Fragment,{children:[i.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-750 transition-colors",children:[i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("button",{onClick:()=>j(A.id),className:"text-slate-400 hover:text-slate-200 transition-colors",children:c.has(A.id)?i.jsx(Un,{className:"w-4 h-4"}):i.jsx(ya,{className:"w-4 h-4"})}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(C0,{className:`w-2 h-2 ${A.isOnline?"text-green-400 fill-current":"text-slate-600 fill-current"}`}),i.jsxs("div",{children:[i.jsx("div",{className:"font-medium text-slate-100",children:A.name}),i.jsx("div",{className:"text-sm text-slate-400",children:A.email})]})]})]})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${k(A.role)}`,children:A.role})}),i.jsx("td",{className:"py-3 px-4",children:i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${b(A.status)}`,children:A.status}),A.isOnline&&i.jsx("span",{className:"text-xs text-green-400 font-medium",children:"ONLINE"})]})}),i.jsx("td",{className:"py-3 px-4",children:A.lastLoginActivity?i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(xs,{className:`w-4 h-4 ${k0(A.lastLoginActivity.type,A.lastLoginActivity.timestamp)}`}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-slate-300",children:_0(A.lastLoginActivity.timestamp)}),i.jsx("div",{className:"text-xs text-slate-500",children:A.lastLoginActivity.type===Zs.LOGIN?"Last login":"Last logout"})]})]}):i.jsx("span",{className:"text-slate-500 text-sm",children:"No recent activity"})}),i.jsx("td",{className:"py-3 px-4",children:i.jsx("div",{className:"flex items-center space-x-2",children:A.appAccess.map((E,D)=>i.jsx("div",{className:"w-8 h-8 bg-slate-700 rounded-md flex items-center justify-center hover:bg-slate-600 transition-colors",title:E.replace(/-/g," ").replace(/\b\w/g,F=>F.toUpperCase()),children:g(E)},D))})})]}),c.has(A.id)&&i.jsx("tr",{className:"bg-slate-800 border-b border-slate-700",children:i.jsx("td",{colSpan:"5",className:"py-4 px-4",children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-slate-200 mb-3",children:"User Details"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-400",children:"ID:"}),i.jsx("span",{className:"text-slate-300",children:A.id})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-400",children:"Email:"}),i.jsx("span",{className:"text-slate-300",children:A.email})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-400",children:"Department:"}),i.jsx("span",{className:"text-slate-300",children:A.department||"Not specified"})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-400",children:"Created:"}),i.jsx("span",{className:"text-slate-300",children:A.created_at?new Date(A.created_at).toLocaleDateString():"Unknown"})]})]})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-sm font-medium text-slate-200 mb-3",children:"Recent Activity"}),i.jsx("div",{className:"space-y-2",children:A.recentActivity&&A.recentActivity.length>0?A.recentActivity.map((E,D)=>i.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[i.jsx(xs,{className:`w-3 h-3 ${k0(E.type,E.timestamp)}`}),i.jsx("span",{className:"text-slate-300",children:E.type===Zs.LOGIN?"Login":"Logout"}),i.jsx("span",{className:"text-slate-500",children:_0(E.timestamp)})]},D)):i.jsx("span",{className:"text-slate-500 text-sm",children:"No recent activity"})})]})]})})})]},A.id))})]})}),S>1&&i.jsxs("div",{className:"flex items-center justify-between mt-6",children:[i.jsxs("div",{className:"text-sm text-slate-400",children:["Showing ",C+1,"-",Math.min(_,t.length)," of ",t.length," users"]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(_e,{size:"sm",variant:"secondary",onClick:N,disabled:s===1,children:"Previous"}),i.jsxs("span",{className:"text-sm text-slate-400",children:["Page ",s," of ",S]}),i.jsx(_e,{size:"sm",variant:"secondary",onClick:L,disabled:s===S,children:"Next"})]})]}),t.length===0&&i.jsxs("div",{className:"text-center py-8",children:[i.jsx(dt,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),i.jsx("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"No users found"}),i.jsx("p",{className:"text-slate-500",children:"Users will appear here once they sign up for accounts."})]})]})},kS=({userData:t})=>{const[e,s]=w.useState(""),[n,r]=w.useState(null),[a,o]=w.useState({x:0,y:0}),[l,c]=w.useState([]),d=w.useRef({}),u=gt(),{getAllUsers:h}=zs(),f=(x,g)=>{if(!d.current[g])return;const v=d.current[g].getBoundingClientRect(),b=(x.clientX-v.left)/v.width*100,k=(x.clientY-v.top)/v.height*100;o({x:b,y:k})},m=x=>{switch(x){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}};w.useEffect(()=>{(async()=>{try{const{data:g,error:v}=await h();if(v){console.error("Error loading users:",v);return}const b=g.map(k=>({id:k.id,name:`${k.first_name||""} ${k.last_name||""}`.trim()||k.email.split("@")[0],email:k.email,role:k.role||"Employee",status:"Active",lastLogin:k.created_at?new Date(k.created_at).toISOString().split("T")[0]:"Never",contact:"",appAccess:m(k.role||"Employee"),department:k.department||"",created_at:k.created_at,updated_at:k.updated_at}));c(b)}catch(g){console.error("Error in loadUsers:",g)}})()},[]);const p=x=>{const v={Formulas:"formulas","Raw Materials":"raw-materials",Suppliers:"suppliers"}[x];return l.filter(b=>b.appAccess&&b.appAccess.includes(v))},y=[{id:1,title:"Formulas",icon:Fs,glowColor:"rgba(59, 130, 246, 0.3)",iconBgColor:"bg-blue-900",iconColor:"text-blue-400",borderColor:"hover:border-blue-500"},{id:2,title:"Raw Materials",icon:Is,glowColor:"rgba(249, 115, 22, 0.3)",iconBgColor:"bg-orange-900",iconColor:"text-orange-400",borderColor:"hover:border-orange-500"},{id:3,title:"Suppliers",icon:dt,glowColor:"rgba(217, 70, 239, 0.3)",iconBgColor:"bg-fuchsia-900",iconColor:"text-fuchsia-400",borderColor:"hover:border-fuchsia-500"}];return i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"grid grid-cols-3 gap-1 p-2",children:[...Array(9)].map((x,g)=>i.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-sm"},g))}),i.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Dashboard"})]})}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),i.jsx("input",{type:"text",placeholder:"Search by Name",value:e,onChange:x=>s(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-600 rounded-md bg-slate-700 text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:y.map(x=>{const g=x.icon;return i.jsx("div",{ref:v=>d.current[x.id]=v,onMouseEnter:()=>r(x.id),onMouseLeave:()=>{r(null),o({x:50,y:50})},onMouseMove:v=>f(v,x.id),className:"relative cursor-pointer",style:{transform:n===x.id?"scale(1.05) translateY(-4px)":"scale(1)",transformOrigin:n===x.id?`${a.x}% ${a.y}%`:"center center",transition:n===x.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},onClick:()=>{x.title==="Formulas"?u("/formulas"):x.title==="Raw Materials"?u("/raw-materials"):x.title==="Suppliers"&&u("/suppliers")},children:i.jsxs(he,{className:`p-8 hover:shadow-lg transition-all duration-300 h-full relative overflow-hidden border-2 border-transparent ${x.borderColor}`,children:[n===x.id&&i.jsx("div",{className:"absolute inset-0 opacity-20 -z-0",style:{background:`radial-gradient(circle at ${a.x}% ${a.y}%, ${x.glowColor}, transparent 70%)`}}),i.jsxs("div",{className:"flex flex-col items-center text-center space-y-6 relative z-10",children:[i.jsx("div",{className:"w-24 h-24 bg-slate-700 rounded-full flex items-center justify-center transition-all duration-300",style:{transform:n===x.id?"scale(1.1)":"scale(1)",transition:n===x.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},children:i.jsx("div",{className:`w-16 h-16 ${x.iconBgColor} rounded-full flex items-center justify-center`,children:i.jsx(g,{className:`w-8 h-8 ${x.iconColor}`})})}),i.jsx("h3",{className:"text-xl font-medium text-slate-100",children:x.title}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("button",{onClick:v=>{v.stopPropagation();const k={Formulas:"formulas","Raw Materials":"raw-materials",Suppliers:"suppliers"}[x.title];u(`/user-management?filterApp=${k}`)},className:"text-sm text-slate-300 hover:text-blue-400 transition-colors underline decoration-dotted hover:decoration-solid",children:"Manage Access"}),i.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[p(x.title).slice(0,3).map((v,b)=>i.jsxs("div",{className:"flex items-center space-x-2 text-xs text-slate-400 transition-transform duration-300",style:{transform:n===x.id?"scale(1.05)":"scale(1)",transition:n===x.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${x.title==="Formulas"?"bg-blue-500":x.title==="Raw Materials"?"bg-orange-500":"bg-fuchsia-500"}`}),i.jsx("span",{children:v.name})]},v.id)),p(x.title).length>3&&i.jsxs("div",{className:"text-xs text-slate-500",children:["+",p(x.title).length-3," more"]}),p(x.title).length===0&&i.jsx("div",{className:"text-xs text-slate-500",children:"No users assigned"})]})]})]})]})},x.id)})}),i.jsx(_S,{})]})},B=(t=30)=>{const e=new Date;return e.setDate(e.getDate()-Math.floor(Math.random()*t)),e.toISOString().split("T")[0]},re=()=>{const t=["formulas","suppliers","raw-materials"],e=Math.floor(Math.random()*3)+1;return t.sort(()=>.5-Math.random()).slice(0,e)},D0=[{id:1,name:"Aidan Manickam",email:"aidan@capacity.com",role:"Employee",status:"Active",lastLogin:"2024-01-15",contact:"",appAccess:["formulas","suppliers"],credentials:"user/temporary pass"},{id:81,name:"Demo Capacity Admin",email:"capacity@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:82,name:"Demo NSight Admin",email:"nsight@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:83,name:"Demo Employee",email:"employee@domain.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas"],credentials:"user/temporary pass"},{id:2,name:"Sarah Johnson",email:"sarah.johnson@gmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:3,name:"Michael Chen",email:"michael.chen@yahoo.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:4,name:"Emma Davis",email:"emma.davis@outlook.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:5,name:"James Wilson",email:"james.wilson@hotmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:6,name:"Ashley Rodriguez",email:"ashley.rodriguez@icloud.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:7,name:"David Thompson",email:"david.thompson@protonmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:8,name:"Jessica Martinez",email:"jessica.martinez@gmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:9,name:"Robert Anderson",email:"robert.anderson@yahoo.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:10,name:"Lisa Garcia",email:"lisa.garcia@outlook.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:11,name:"Christopher Taylor",email:"christopher.taylor@hotmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:12,name:"Amanda White",email:"amanda.white@icloud.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:13,name:"Matthew Brown",email:"matthew.brown@gmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:14,name:"Nicole Harris",email:"nicole.harris@yahoo.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:15,name:"Daniel Clark",email:"daniel.clark@outlook.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:16,name:"Stephanie Lewis",email:"stephanie.lewis@protonmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:17,name:"Kevin Walker",email:"kevin.walker@gmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:18,name:"Rachel Hall",email:"rachel.hall@hotmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:19,name:"Brandon Allen",email:"brandon.allen@icloud.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:20,name:"Megan Young",email:"megan.young@yahoo.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:21,name:"Tyler King",email:"tyler.king@outlook.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:22,name:"Samantha Wright",email:"samantha.wright@gmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:23,name:"Andrew Lopez",email:"andrew.lopez@protonmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:24,name:"Lauren Hill",email:"lauren.hill@hotmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:25,name:"Joshua Scott",email:"joshua.scott@icloud.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:26,name:"Brittany Green",email:"brittany.green@gmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:27,name:"Nathan Adams",email:"nathan.adams@yahoo.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:28,name:"Kayla Baker",email:"kayla.baker@outlook.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:29,name:"Ryan Gonzalez",email:"ryan.gonzalez@protonmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:30,name:"Alexis Nelson",email:"alexis.nelson@hotmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:31,name:"Jordan Carter",email:"jordan.carter@icloud.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:32,name:"Taylor Mitchell",email:"taylor.mitchell@gmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:33,name:"Austin Perez",email:"austin.perez@yahoo.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:34,name:"Chloe Roberts",email:"chloe.roberts@outlook.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:35,name:"Marcus Turner",email:"marcus.turner@protonmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:36,name:"Jasmine Phillips",email:"jasmine.phillips@hotmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:37,name:"Ethan Campbell",email:"ethan.campbell@icloud.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:38,name:"Victoria Parker",email:"victoria.parker@gmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:39,name:"Cameron Evans",email:"cameron.evans@yahoo.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:40,name:"Destiny Edwards",email:"destiny.edwards@outlook.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:41,name:"Blake Collins",email:"blake.collins@protonmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:42,name:"Paige Stewart",email:"paige.stewart@hotmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:43,name:"Hunter Sanchez",email:"hunter.sanchez@icloud.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:44,name:"Sierra Morris",email:"sierra.morris@gmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:45,name:"Caleb Rogers",email:"caleb.rogers@yahoo.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:46,name:"Autumn Reed",email:"autumn.reed@outlook.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:47,name:"Garrett Cook",email:"garrett.cook@protonmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:48,name:"Savannah Bailey",email:"savannah.bailey@hotmail.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:49,name:"Derek Rivera",email:"derek.rivera@icloud.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:50,name:"Trevor Richardson",email:"trevor.richardson@yahoo.com",role:"Employee",status:"Active",lastLogin:B(),contact:"",appAccess:re(),credentials:"user/temporary pass"},{id:51,name:"Alexandra Bennett",email:"alexandra.bennett@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:52,name:"Jonathan Martinez",email:"jonathan.martinez@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:53,name:"Michelle Thompson",email:"michelle.thompson@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:54,name:"Steven Rodriguez",email:"steven.rodriguez@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:55,name:"Rebecca Davis",email:"rebecca.davis@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:56,name:"Kenneth Wilson",email:"kenneth.wilson@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:57,name:"Patricia Moore",email:"patricia.moore@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:58,name:"Gregory Taylor",email:"gregory.taylor@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:59,name:"Diana Anderson",email:"diana.anderson@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:60,name:"Benjamin Jackson",email:"benjamin.jackson@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:61,name:"Catherine White",email:"catherine.white@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:62,name:"Philip Harris",email:"philip.harris@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:63,name:"Stephanie Martin",email:"stephanie.martin@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:64,name:"Ronald Clark",email:"ronald.clark@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:65,name:"Melissa Lewis",email:"melissa.lewis@capacity.com",role:"Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:66,name:"Alexander Pierce",email:"alexander.pierce@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:67,name:"Samantha Foster",email:"samantha.foster@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:68,name:"Nicholas Ward",email:"nicholas.ward@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:69,name:"Jennifer Torres",email:"jennifer.torres@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:70,name:"Gabriel Peterson",email:"gabriel.peterson@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:71,name:"Christina Gray",email:"christina.gray@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:72,name:"Lucas Ramirez",email:"lucas.ramirez@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:73,name:"Vanessa James",email:"vanessa.james@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:74,name:"Victor Watson",email:"victor.watson@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:75,name:"Monica Brooks",email:"monica.brooks@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:76,name:"Adrian Kelly",email:"adrian.kelly@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:77,name:"Natalie Sanders",email:"natalie.sanders@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:78,name:"Isaac Price",email:"isaac.price@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:79,name:"Olivia Bennett",email:"olivia.bennett@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:80,name:"Mason Powell",email:"mason.powell@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:B(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"}],SS=()=>{const t=localStorage.getItem("capacity-users"),e=localStorage.getItem("capacity-users-version"),s="1.1";return e!==s?(localStorage.removeItem("capacity-users"),localStorage.setItem("capacity-users-version",s),console.log("User data version updated, using fresh data"),[...D0]):t?JSON.parse(t):[...D0]};let CS=SS();const PS=()=>[...CS],ES=()=>{localStorage.removeItem("capacity-users"),localStorage.removeItem("capacity-users-version"),console.log("User cache cleared. Refresh the page to reload fresh data.")};typeof window<"u"&&(window.clearUserCache=ES);const Cs=t=>t.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").replace(/--+/g,"-").replace(/^-|-$/g,""),AS=[{id:Cs("CALCIUM CHLORIDE (100%)"),materialName:"CALCIUM CHLORIDE (100%)",supplierName:"ChemSupply Co.",manufacture:"Dow Chemical",tradeName:"DowFlake Xtra",supplierCost:2.15,casNumber:"10043-52-4",weightVolume:8.34,density:2.15,country:"USA",description:"High purity calcium chloride for industrial applications. Used as a desiccant, deicing agent, and concrete accelerator. Excellent solubility in water with strong exothermic reaction. Essential for oil and gas drilling operations.",physicalForm:"Flakes",purity:"100%",storageConditions:"Store in dry place, avoid moisture. Keep container tightly closed.",hazardClass:"Irritant",shelfLife:"24 months"},{id:Cs("60% HEDP Liquid Tech Grade"),materialName:"60% HEDP Liquid Tech Grade",supplierName:"Industrial Chemicals Ltd.",manufacture:"Kemira",tradeName:"Dequest 2010",supplierCost:3.45,casNumber:"2809-21-4",weightVolume:9.2,density:1.4,country:"Finland",description:"Chelating agent for water treatment applications. Excellent scale and corrosion inhibitor. Forms stable complexes with metal ions. Used in cooling water systems, boiler water treatment, and textile processing.",physicalForm:"Liquid",purity:"60%",storageConditions:"Store at room temperature. Protect from freezing.",hazardClass:"Corrosive",shelfLife:"12 months"},{id:Cs("Acetic Acid, Glacial"),materialName:"Acetic Acid, Glacial",supplierName:"Acid Solutions Inc.",manufacture:"Eastman Chemical",tradeName:"Glacial Acetic Acid",supplierCost:8.76,casNumber:"64-19-7",weightVolume:8.74,density:1.05,country:"USA",description:"Pure acetic acid for chemical synthesis and pH adjustment. High purity grade suitable for analytical and industrial applications. Used in manufacturing acetate esters, cellulose acetate, and various chemical intermediates.",physicalForm:"Liquid",purity:"99.5%",storageConditions:"Store in cool, dry place. Keep away from heat sources.",hazardClass:"Corrosive",shelfLife:"36 months"},{id:Cs("Sodium Molybdate Crystals, Tech Grade"),materialName:"Sodium Molybdate Crystals, Tech Grade",supplierName:"Specialty Metals Corp.",manufacture:"Climax Molybdenum",tradeName:"Sodium Molybdate Dihydrate",supplierCost:12.5,casNumber:"10102-40-6",weightVolume:22.4,density:3.78,country:"USA",description:"Technical grade sodium molybdate for corrosion inhibition and metal treatment. Provides excellent protection against pitting and general corrosion. Used in cooling water systems and as a corrosion inhibitor additive.",physicalForm:"Crystals",purity:"Technical Grade",storageConditions:"Store in dry conditions. Protect from moisture.",hazardClass:"Non-hazardous",shelfLife:"60 months"},{id:Cs("HPMA (homopolymer of maleic acid) 50%"),materialName:"HPMA (homopolymer of maleic acid) 50%",supplierName:"Polymer Technologies",manufacture:"Dow Chemical",tradeName:"Belclene 200",supplierCost:5.65,casNumber:"26677-99-6",weightVolume:9.8,density:1.18,country:"USA",description:"Scale inhibitor polymer for water treatment. Prevents calcium carbonate, calcium sulfate, and calcium phosphate scale formation. Effective over wide pH range. Used in cooling towers, boilers, and reverse osmosis systems.",physicalForm:"Liquid",purity:"50%",storageConditions:"Store between 5-40°C. Do not freeze.",hazardClass:"Non-hazardous",shelfLife:"24 months"},{id:Cs("PBTC Phosphonobutane Tricarboxylic Acid"),materialName:"PBTC Phosphonobutane Tricarboxylic Acid",supplierName:"Water Treatment Chemicals",manufacture:"Italmatch Chemicals",tradeName:"Dequest 7000",supplierCost:1.55,casNumber:"37971-36-1",weightVolume:10.2,density:1.25,country:"Italy",description:"Organophosphonate for scale and corrosion control. Excellent chelating properties for metal ions. Superior performance in high temperature and high pH conditions. Used in industrial water treatment and oil field applications.",physicalForm:"Liquid",purity:"50%",storageConditions:"Store at room temperature. Avoid freezing.",hazardClass:"Irritant",shelfLife:"24 months"},{id:Cs("Sodium Hypochlorite Solution 12.5%"),materialName:"Sodium Hypochlorite Solution 12.5%",supplierName:"Bleach Supply Co.",manufacture:"Olin Corporation",tradeName:"Liquid Bleach",supplierCost:2.34,casNumber:"7681-52-9",weightVolume:10.4,density:1.2,country:"USA",description:"Chlorine-based disinfectant and bleaching agent. Powerful oxidizing agent for water disinfection and surface sanitization. Effective against bacteria, viruses, and algae. Used in municipal water treatment and swimming pool maintenance.",physicalForm:"Liquid",purity:"12.5%",storageConditions:"Store in cool, dark place. Protect from light and heat.",hazardClass:"Oxidizer, Corrosive",shelfLife:"6 months"},{id:Cs("Citric Acid Anhydrous"),materialName:"Citric Acid Anhydrous",supplierName:"Food Grade Chemicals",manufacture:"Cargill",tradeName:"CitriSafe",supplierCost:3.45,casNumber:"77-92-9",weightVolume:13.9,density:1.67,country:"Brazil",description:"Food grade citric acid for pH adjustment and chelation. Natural preservative and flavoring agent. Used in food and beverage industry, cosmetics, and cleaning products. Excellent buffering capacity and metal chelation properties.",physicalForm:"Powder",purity:"99.5%",storageConditions:"Store in dry conditions. Keep away from moisture.",hazardClass:"Non-hazardous",shelfLife:"60 months"},{id:Cs("Hydrogen Peroxide 35%"),materialName:"Hydrogen Peroxide 35%",supplierName:"Peroxide Solutions LLC",manufacture:"Solvay",tradeName:"Proxitane AHP35",supplierCost:4.89,casNumber:"7722-84-1",weightVolume:9.4,density:1.13,country:"Belgium",description:"Industrial grade hydrogen peroxide for oxidation processes. Powerful oxidizing and bleaching agent. Used in pulp and paper bleaching, water treatment, and chemical synthesis. Environmentally friendly as it decomposes to water and oxygen.",physicalForm:"Liquid",purity:"35%",storageConditions:"Store in cool, ventilated area. Keep away from heat and combustibles.",hazardClass:"Oxidizer, Corrosive",shelfLife:"12 months"},{id:Cs("Potassium Hydroxide Flakes 90%"),materialName:"Potassium Hydroxide Flakes 90%",supplierName:"Caustic Supply Inc.",manufacture:"Olin Corporation",tradeName:"KOH Technical Grade",supplierCost:6.78,casNumber:"1310-58-3",weightVolume:17,density:2.04,country:"USA",description:"Technical grade potassium hydroxide for pH adjustment and chemical processing. Strong alkaline material used in soap manufacturing, biodiesel production, and water treatment. Highly soluble in water with significant heat generation.",physicalForm:"Flakes",purity:"90%",storageConditions:"Store in dry, sealed containers. Protect from moisture and CO2.",hazardClass:"Corrosive",shelfLife:"60 months"}],TS="raw_materials_data",LS=()=>{try{const t=localStorage.getItem(TS);if(t)return JSON.parse(t)}catch(t){console.warn("Failed to load materials from localStorage:",t)}return[...AS]};LS();const MS=[{id:"HDST001",name:"Heavy Duty Steam Title Placeholder",totalCost:245.67,finalSalePriceDrum:589.99,finalSalePriceTote:1249.99,ingredients:[{name:"Sodium Hydroxide",percentage:35.2,cost:87.45},{name:"Calcium Carbonate",percentage:25.8,cost:56.23},{name:"Ethylene Glycol",percentage:20.1,cost:78.12},{name:"Surfactant Blend",percentage:12.4,cost:23.87},{name:"Corrosion Inhibitor",percentage:6.5,cost:0}]},{id:"MDCL002",name:"Multi-Purpose Degreaser Compound",totalCost:156.34,finalSalePriceDrum:389.99,finalSalePriceTote:799.99,ingredients:[{name:"Isopropyl Alcohol",percentage:45,cost:78.9},{name:"Sodium Carbonate",percentage:25,cost:34.12},{name:"Citric Acid",percentage:15,cost:23.45},{name:"Non-ionic Surfactant",percentage:10,cost:19.87},{name:"Water",percentage:5,cost:0}]},{id:"INDL003",name:"Industrial Solvent Formula XP",totalCost:334.12,finalSalePriceDrum:789.99,finalSalePriceTote:1549.99,ingredients:[{name:"Methylene Chloride",percentage:40,cost:145.67},{name:"Acetone",percentage:30,cost:89.34},{name:"Toluene",percentage:20,cost:67.23},{name:"Stabilizer Blend",percentage:8,cost:31.88},{name:"Antioxidant",percentage:2,cost:0}]}],DS="formulas_data",OS=()=>{try{const t=localStorage.getItem(DS);if(t)return JSON.parse(t)}catch(t){console.warn("Failed to load formulas from localStorage:",t)}return[...MS]};OS();const O0=({userData:t})=>{const[e,s]=w.useState(""),[n,r]=w.useState(null),[a,o]=w.useState({x:0,y:0}),[l,c]=w.useState([]),d=w.useRef({}),u=gt(),h=(x,g)=>{if(!d.current[g])return;const v=d.current[g].getBoundingClientRect(),b=(x.clientX-v.left)/v.width*100,k=(x.clientY-v.top)/v.height*100;o({x:b,y:k})};w.useEffect(()=>{const x=()=>{c(PS())};x();const g=setInterval(x,2e3);return()=>clearInterval(g)},[]);const f=x=>l.filter(g=>g.appAccess&&g.appAccess.includes(x)),m=[{id:1,title:"Formulas",icon:Fs,glowColor:"rgba(59, 130, 246, 0.3)",iconBgColor:"bg-blue-900",iconColor:"text-blue-400",borderColor:"hover:border-blue-500",appKey:"formulas"},{id:2,title:"Raw Materials",icon:Is,glowColor:"rgba(249, 115, 22, 0.3)",iconBgColor:"bg-orange-900",iconColor:"text-orange-400",borderColor:"hover:border-orange-500",appKey:"raw-materials"},{id:3,title:"Suppliers",icon:dt,glowColor:"rgba(217, 70, 239, 0.3)",iconBgColor:"bg-fuchsia-900",iconColor:"text-fuchsia-400",borderColor:"hover:border-fuchsia-500",appKey:"suppliers"}],p=t&&t.appAccess?m.filter(x=>t.appAccess.includes(x.appKey)):m,y=x=>x===1?"flex justify-center gap-6":x===2?"flex justify-center gap-6 flex-wrap":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6";return i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("div",{className:"grid grid-cols-3 gap-1 p-2",children:[...Array(9)].map((x,g)=>i.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-sm"},g))}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Dashboard"}),t&&i.jsxs("p",{className:"text-slate-400 text-sm mt-1",children:["Welcome back, ",t.name.split(" ")[0],"!"]})]})]}),t&&i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-slate-300 font-medium",children:t.name}),i.jsx("p",{className:"text-slate-400 text-sm",children:t.email}),i.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-600 mt-1",children:t.role})]})]}),i.jsx("div",{className:"flex justify-center",children:i.jsxs("div",{className:"relative max-w-md",children:[i.jsx(va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),i.jsx("input",{type:"text",placeholder:"Search by Name",value:e,onChange:x=>s(x.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-600 rounded-md bg-slate-700 text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),i.jsx("div",{className:y(p.length),children:p.map(x=>{const g=x.icon;return i.jsx("div",{ref:v=>d.current[x.id]=v,onMouseEnter:()=>r(x.id),onMouseLeave:()=>{r(null),o({x:50,y:50})},onMouseMove:v=>h(v,x.id),className:`relative cursor-pointer ${p.length<=2?"w-80":""}`,style:{transform:n===x.id?"scale(1.05) translateY(-4px)":"scale(1)",transformOrigin:n===x.id?`${a.x}% ${a.y}%`:"center center",transition:n===x.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},onClick:()=>{x.appKey==="formulas"?u("/formulas"):x.appKey==="raw-materials"?u("/raw-materials"):x.appKey==="suppliers"&&u("/suppliers")},children:i.jsxs(he,{className:`p-8 hover:shadow-lg transition-all duration-300 h-full relative overflow-hidden border-2 border-transparent ${x.borderColor}`,children:[n===x.id&&i.jsx("div",{className:"absolute inset-0 opacity-20 -z-0",style:{background:`radial-gradient(circle at ${a.x}% ${a.y}%, ${x.glowColor}, transparent 70%)`}}),i.jsxs("div",{className:"flex flex-col items-center text-center space-y-6 relative z-10",children:[i.jsx("div",{className:"w-24 h-24 bg-slate-700 rounded-full flex items-center justify-center transition-all duration-300",style:{transform:n===x.id?"scale(1.1)":"scale(1)",transition:n===x.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},children:i.jsx("div",{className:`w-16 h-16 ${x.iconBgColor} rounded-full flex items-center justify-center`,children:i.jsx(g,{className:`w-8 h-8 ${x.iconColor}`})})}),i.jsx("h3",{className:"text-xl font-medium text-slate-100",children:x.title}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("p",{className:"text-sm text-slate-300",children:"Request Access"}),i.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[f(x.appKey).slice(0,3).map((v,b)=>i.jsxs("div",{className:"flex items-center space-x-2 text-xs text-slate-400 transition-transform duration-300",style:{transform:n===x.id?"scale(1.05)":"scale(1)",transition:n===x.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},children:[i.jsx("div",{className:`w-2 h-2 rounded-full ${x.appKey==="formulas"?"bg-blue-500":x.appKey==="raw-materials"?"bg-orange-500":"bg-fuchsia-500"}`}),i.jsx("span",{children:v.name})]},v.id)),f(x.appKey).length>3&&i.jsxs("div",{className:"text-xs text-slate-500",children:["+",f(x.appKey).length-3," more"]}),f(x.appKey).length===0&&i.jsx("div",{className:"text-xs text-slate-500",children:"No users assigned"})]})]})]})]})},x.id)})})]})},IS=({isOpen:t,onClose:e,onSave:s})=>{const[n,r]=w.useState(1),[a,o]=w.useState({companyName:"",industry:"Chemical Manufacturing",companySize:"1-50",website:"",country:"United States",timezone:"America/New_York",contactName:"",contactEmail:"",contactPhone:"",contactTitle:"CEO",databaseIsolation:"schema",dataRetention:"7-years",backupFrequency:"daily",apiRateLimit:"1000",dataResidency:"us-east",complianceStandards:["ISO9001"],ssoEnabled:!1,twoFactorRequired:!1,subscriptionTier:"professional",billingContact:"",billingEmail:"",paymentMethod:"invoice",adminUserName:"",adminUserEmail:"",defaultDepartments:["Production","Quality Control","Research"],initialApps:["formulas","raw-materials"]}),l=6,c=["Chemical Manufacturing","Pharmaceuticals","Cosmetics & Personal Care","Food & Beverage","Materials Science","Petrochemicals","Specialty Chemicals","Other"],d=["1-10","11-50","51-200","201-500","501-1000","1000+"],u=[{id:"ISO9001",label:"ISO 9001 (Quality Management)"},{id:"ISO14001",label:"ISO 14001 (Environmental)"},{id:"OSHA",label:"OSHA Safety Standards"},{id:"FDA",label:"FDA Compliance"},{id:"REACH",label:"REACH Regulation (EU)"},{id:"GMP",label:"Good Manufacturing Practice"}],h=[{id:"starter",name:"Starter",price:"$99/month",features:["Up to 10 users","Basic apps","Email support"]},{id:"professional",name:"Professional",price:"$299/month",features:["Up to 50 users","All apps","Priority support","Advanced analytics"]},{id:"enterprise",name:"Enterprise",price:"Custom",features:["Unlimited users","Custom apps","Dedicated support","SSO integration"]}],f=[{id:"formulas",name:"Formulas Management",description:"Chemical formula creation and management"},{id:"raw-materials",name:"Raw Materials",description:"Inventory and supplier management"},{id:"suppliers",name:"Suppliers",description:"Supplier relationship management"},{id:"analytics",name:"Analytics",description:"Advanced reporting and insights"},{id:"compliance",name:"Compliance",description:"Safety and regulatory compliance"},{id:"quality",name:"Quality Control",description:"Quality assurance workflows"}],m=(N,L)=>{o(A=>({...A,[N]:L}))},p=(N,L)=>{o(A=>({...A,[N]:A[N].includes(L)?A[N].filter(E=>E!==L):[...A[N],L]}))},y=()=>{n<l&&r(n+1)},x=()=>{n>1&&r(n-1)},g=()=>{const A=({1:["companyName","industry"],2:["contactName","contactEmail"],3:[],4:[],5:["billingContact","billingEmail"],6:["adminUserName","adminUserEmail"]}[n]||[]).filter(E=>!a[E].trim());if(A.length>0){alert(`Please fill in all required fields: ${A.join(", ")}`);return}if(n===l){const E={id:Date.now(),...a,status:"Active",createdAt:new Date().toISOString(),setupComplete:!0};s(E),v()}else y()},v=()=>{r(1),o({companyName:"",industry:"Chemical Manufacturing",companySize:"1-50",website:"",country:"United States",timezone:"America/New_York",contactName:"",contactEmail:"",contactPhone:"",contactTitle:"CEO",databaseIsolation:"schema",dataRetention:"7-years",backupFrequency:"daily",apiRateLimit:"1000",dataResidency:"us-east",complianceStandards:["ISO9001"],ssoEnabled:!1,twoFactorRequired:!1,subscriptionTier:"professional",billingContact:"",billingEmail:"",paymentMethod:"invoice",adminUserName:"",adminUserEmail:"",defaultDepartments:["Production","Quality Control","Research"],initialApps:["formulas","raw-materials"]}),e()};if(!t)return null;const b=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx(nn,{className:"w-12 h-12 text-blue-500 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Company Information"}),i.jsx("p",{className:"text-slate-400",children:"Basic details about the new client company"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Company Name *"}),i.jsx("input",{type:"text",value:a.companyName,onChange:N=>m("companyName",N.target.value),placeholder:"Enter company name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Industry *"}),i.jsx("select",{value:a.industry,onChange:N=>m("industry",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:c.map(N=>i.jsx("option",{value:N,children:N},N))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Company Size"}),i.jsx("select",{value:a.companySize,onChange:N=>m("companySize",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:d.map(N=>i.jsxs("option",{value:N,children:[N," employees"]},N))})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Website"}),i.jsx("input",{type:"url",value:a.website,onChange:N=>m("website",N.target.value),placeholder:"https://company.com",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Country"}),i.jsxs("select",{value:a.country,onChange:N=>m("country",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"United States",children:"United States"}),i.jsx("option",{value:"Canada",children:"Canada"}),i.jsx("option",{value:"United Kingdom",children:"United Kingdom"}),i.jsx("option",{value:"Germany",children:"Germany"}),i.jsx("option",{value:"Japan",children:"Japan"}),i.jsx("option",{value:"Other",children:"Other"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Timezone"}),i.jsxs("select",{value:a.timezone,onChange:N=>m("timezone",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"America/New_York",children:"Eastern Time (UTC-5)"}),i.jsx("option",{value:"America/Chicago",children:"Central Time (UTC-6)"}),i.jsx("option",{value:"America/Denver",children:"Mountain Time (UTC-7)"}),i.jsx("option",{value:"America/Los_Angeles",children:"Pacific Time (UTC-8)"}),i.jsx("option",{value:"Europe/London",children:"London (UTC+0)"}),i.jsx("option",{value:"Europe/Berlin",children:"Berlin (UTC+1)"}),i.jsx("option",{value:"Asia/Tokyo",children:"Tokyo (UTC+9)"})]})]})]})]}),k=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx(lS,{className:"w-12 h-12 text-green-500 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Primary Contact"}),i.jsx("p",{className:"text-slate-400",children:"Main point of contact for this company"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Contact Name *"}),i.jsx("input",{type:"text",value:a.contactName,onChange:N=>m("contactName",N.target.value),placeholder:"Full name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Title/Position"}),i.jsx("input",{type:"text",value:a.contactTitle,onChange:N=>m("contactTitle",N.target.value),placeholder:"CEO, CTO, etc.",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Email Address *"}),i.jsx("input",{type:"email",value:a.contactEmail,onChange:N=>m("contactEmail",N.target.value),placeholder:"contact@company.com",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Phone Number"}),i.jsx("input",{type:"tel",value:a.contactPhone,onChange:N=>m("contactPhone",N.target.value),placeholder:"+1 (555) 123-4567",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]})]}),j=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx(Ts,{className:"w-12 h-12 text-purple-500 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Technical Configuration"}),i.jsx("p",{className:"text-slate-400",children:"Database and API settings"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Database Isolation"}),i.jsxs("select",{value:a.databaseIsolation,onChange:N=>m("databaseIsolation",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"schema",children:"Schema-based (Recommended)"}),i.jsx("option",{value:"database",children:"Separate Database"})]}),i.jsx("p",{className:"text-xs text-slate-400 mt-1",children:"Schema-based is more cost-effective"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Data Retention"}),i.jsxs("select",{value:a.dataRetention,onChange:N=>m("dataRetention",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"1-year",children:"1 Year"}),i.jsx("option",{value:"3-years",children:"3 Years"}),i.jsx("option",{value:"7-years",children:"7 Years (Recommended)"}),i.jsx("option",{value:"indefinite",children:"Indefinite"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Backup Frequency"}),i.jsxs("select",{value:a.backupFrequency,onChange:N=>m("backupFrequency",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"daily",children:"Daily (Recommended)"}),i.jsx("option",{value:"weekly",children:"Weekly"}),i.jsx("option",{value:"monthly",children:"Monthly"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"API Rate Limit (per hour)"}),i.jsxs("select",{value:a.apiRateLimit,onChange:N=>m("apiRateLimit",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"500",children:"500 requests/hour"}),i.jsx("option",{value:"1000",children:"1,000 requests/hour"}),i.jsx("option",{value:"5000",children:"5,000 requests/hour"}),i.jsx("option",{value:"unlimited",children:"Unlimited"})]})]})]})]}),S=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx(aS,{className:"w-12 h-12 text-red-500 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Security & Compliance"}),i.jsx("p",{className:"text-slate-400",children:"Security settings and compliance requirements"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Data Residency"}),i.jsxs("select",{value:a.dataResidency,onChange:N=>m("dataResidency",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"us-east",children:"US East (Virginia)"}),i.jsx("option",{value:"us-west",children:"US West (California)"}),i.jsx("option",{value:"eu-central",children:"EU Central (Frankfurt)"}),i.jsx("option",{value:"asia-pacific",children:"Asia Pacific (Tokyo)"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-3",children:"Compliance Standards"}),i.jsx("div",{className:"space-y-2",children:u.map(N=>i.jsxs("label",{className:"flex items-center space-x-3",children:[i.jsx("input",{type:"checkbox",checked:a.complianceStandards.includes(N.id),onChange:()=>p("complianceStandards",N.id),className:"w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500"}),i.jsx("span",{className:"text-slate-200",children:N.label})]},N.id))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("label",{className:"flex items-center space-x-3",children:[i.jsx("input",{type:"checkbox",checked:a.ssoEnabled,onChange:N=>m("ssoEnabled",N.target.checked),className:"w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-200 font-medium",children:"Enable SSO"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Single Sign-On integration"})]})]}),i.jsxs("label",{className:"flex items-center space-x-3",children:[i.jsx("input",{type:"checkbox",checked:a.twoFactorRequired,onChange:N=>m("twoFactorRequired",N.target.checked),className:"w-4 h-4 text-blue-600 bg-slate-700 border-slate-600 rounded focus:ring-blue-500"}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-200 font-medium",children:"Require 2FA"}),i.jsx("p",{className:"text-xs text-slate-400",children:"Two-factor authentication"})]})]})]})]})]}),C=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx(Kk,{className:"w-12 h-12 text-yellow-500 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Subscription & Billing"}),i.jsx("p",{className:"text-slate-400",children:"Choose plan and billing details"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-3",children:"Subscription Tier"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:h.map(N=>i.jsx("button",{onClick:()=>m("subscriptionTier",N.id),className:`p-4 rounded-lg border transition-all ${a.subscriptionTier===N.id?"border-blue-500 bg-blue-500/10":"border-slate-600 bg-slate-700/50 hover:bg-slate-600/50"}`,children:i.jsxs("div",{className:"text-center",children:[i.jsx("h4",{className:"font-semibold text-slate-100",children:N.name}),i.jsx("p",{className:"text-blue-400 font-bold",children:N.price}),i.jsx("ul",{className:"text-xs text-slate-300 mt-2 space-y-1",children:N.features.map((L,A)=>i.jsxs("li",{children:["• ",L]},A))})]})},N.id))})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Billing Contact *"}),i.jsx("input",{type:"text",value:a.billingContact,onChange:N=>m("billingContact",N.target.value),placeholder:"Full name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Billing Email *"}),i.jsx("input",{type:"email",value:a.billingEmail,onChange:N=>m("billingEmail",N.target.value),placeholder:"billing@company.com",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Payment Method"}),i.jsxs("select",{value:a.paymentMethod,onChange:N=>m("paymentMethod",N.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500",children:[i.jsx("option",{value:"invoice",children:"Invoice (NET 30)"}),i.jsx("option",{value:"credit-card",children:"Credit Card"}),i.jsx("option",{value:"ach",children:"ACH Transfer"}),i.jsx("option",{value:"wire",children:"Wire Transfer"})]})]})]})]}),_=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center mb-6",children:[i.jsx(fb,{className:"w-12 h-12 text-cyan-500 mx-auto mb-3"}),i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Initial Setup"}),i.jsx("p",{className:"text-slate-400",children:"Create admin user and configure initial apps"})]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Admin User Name *"}),i.jsx("input",{type:"text",value:a.adminUserName,onChange:N=>m("adminUserName",N.target.value),placeholder:"Full name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Admin User Email *"}),i.jsx("input",{type:"email",value:a.adminUserEmail,onChange:N=>m("adminUserEmail",N.target.value),placeholder:"admin@company.com",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500"})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-3",children:"Default Departments"}),i.jsxs("div",{className:"flex flex-wrap gap-2",children:[a.defaultDepartments.map((N,L)=>i.jsxs("span",{className:"px-3 py-1 bg-blue-600 text-white rounded-full text-sm flex items-center space-x-1",children:[i.jsx("span",{children:N}),i.jsx("button",{onClick:()=>{const A=a.defaultDepartments.filter((E,D)=>D!==L);m("defaultDepartments",A)},className:"ml-1 hover:bg-blue-700 rounded-full p-0.5",children:i.jsx(ut,{className:"w-3 h-3"})})]},L)),i.jsx("input",{type:"text",placeholder:"Add department...",className:"px-3 py-1 bg-slate-700 border border-slate-600 rounded-full text-sm text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-1 focus:ring-blue-500",onKeyPress:N=>{N.key==="Enter"&&N.target.value.trim()&&(m("defaultDepartments",[...a.defaultDepartments,N.target.value.trim()]),N.target.value="")}})]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-3",children:"Initial Applications"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-3",children:f.map(N=>{const L=a.initialApps.includes(N.id);return i.jsx("button",{onClick:()=>p("initialApps",N.id),className:`p-3 rounded-lg border text-left transition-all ${L?"border-blue-500 bg-blue-500/10":"border-slate-600 bg-slate-700/50 hover:bg-slate-600/50"}`,children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-slate-100",children:N.name}),i.jsx("p",{className:"text-xs text-slate-400",children:N.description})]}),L&&i.jsx(br,{className:"w-5 h-5 text-blue-400"})]})},N.id)})})]})]})]}),P=()=>{switch(n){case 1:return b();case 2:return k();case 3:return j();case 4:return S();case 5:return C();case 6:return _();default:return b()}};return i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:v}),i.jsxs("div",{className:"relative bg-slate-800 rounded-lg shadow-xl w-full max-w-4xl mx-4 border border-slate-700 max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:"Create New Company"}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsxs("span",{className:"text-sm text-slate-400",children:["Step ",n," of ",l]}),i.jsx("div",{className:"flex space-x-1",children:Array.from({length:l},(N,L)=>i.jsx("div",{className:`w-2 h-2 rounded-full ${L+1<=n?"bg-blue-500":"bg-slate-600"}`},L))})]})]}),i.jsx("button",{onClick:v,className:"p-1 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(ut,{className:"h-5 w-5 text-slate-400"})})]}),i.jsx("div",{className:"p-6 overflow-y-auto",style:{maxHeight:"calc(90vh - 140px)"},children:P()}),i.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-slate-700",children:[i.jsx(_e,{variant:"secondary",onClick:n===1?v:x,className:"bg-slate-700 hover:bg-slate-600 text-slate-200",children:n===1?i.jsxs(i.Fragment,{children:[i.jsx(ut,{className:"w-4 h-4 mr-2"}),"Cancel"]}):i.jsxs(i.Fragment,{children:[i.jsx(Et,{className:"w-4 h-4 mr-2"}),"Previous"]})}),i.jsx(_e,{onClick:g,className:"bg-blue-600 hover:bg-blue-500 text-white",children:n===l?i.jsxs(i.Fragment,{children:[i.jsx(br,{className:"w-4 h-4 mr-2"}),"Create Company"]}):i.jsxs(i.Fragment,{children:["Next",i.jsx(qk,{className:"w-4 h-4 ml-2"})]})})]})]})]})},RS=({userData:t})=>{const e=gt(),s=Ut(),[n,r]=w.useState(null),[a,o]=w.useState(!1),[l,c]=w.useState([]),[d,u]=w.useState(!0),[h,f]=w.useState(null),p=new URLSearchParams(s.search).get("mode"),y=[{id:"formulas",name:"Formulas",icon:Ts,description:"Chemical formula management"},{id:"suppliers",name:"Suppliers",icon:nn,description:"Supplier relationship management"},{id:"raw-materials",name:"Raw Materials",icon:$u,description:"Raw material inventory"},{id:"analytics",name:"Analytics",icon:Vl,description:"Data analytics and reporting"}],x=async()=>{try{u(!0),f(null);const P=await fetch("/api/admin/companies"),N=await P.json();if(!P.ok)throw new Error(N.error||"Failed to fetch companies");if(N.success)c(N.companies),console.log("✅ Loaded companies from database:",N.companies.length);else throw new Error("Invalid API response")}catch(P){console.error("❌ Failed to fetch companies:",P),f(P.message),c([{id:"sample-1",name:"Capacity Chemical",users:12,apps:["Formulas","Suppliers","Raw Materials"]},{id:"sample-2",name:"Industrial Solutions Inc",users:8,apps:["Formulas","Suppliers"]}])}finally{u(!1)}};w.useEffect(()=>{x()},[]),w.useEffect(()=>{r(null)},[p]);const g=P=>{e(`/dashboard?mode=${P}`)},v=()=>{e("/dashboard")},b=P=>{r(P)},k=async P=>{try{console.log("🏢 Creating company via API:",P.companyName);const N=await fetch("/api/admin/companies",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(P)}),L=await N.json();if(!N.ok)throw new Error(L.error||"Failed to create company");if(L.success)console.log("✅ Company created successfully:",L.company.company_name),await x(),alert(`Company "${L.company.company_name}" created successfully!`);else throw new Error("Invalid API response")}catch(N){console.error("❌ Failed to create company:",N),alert(`Failed to create company: ${N.message}`)}},j=()=>i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"Nsight Admin Dashboard"}),i.jsx("p",{className:"text-slate-400",children:"Choose your administrative mode"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:[i.jsx(he,{className:"p-8 cursor-pointer hover:bg-slate-750 transition-all duration-200 border-2 border-transparent hover:border-blue-500",onClick:()=>g("developer"),children:i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto",children:i.jsx(Ma,{className:"h-8 w-8 text-white"})}),i.jsx("h3",{className:"text-xl font-semibold text-slate-100",children:"Developer Mode"}),i.jsx("p",{className:"text-slate-400 text-sm",children:"Create new companies and develop custom applications for clients"}),i.jsxs("div",{className:"pt-4 space-y-2 text-xs text-slate-500",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(dn,{className:"h-3 w-3"}),i.jsx("span",{children:"Create New Company"})]}),i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(Ts,{className:"h-3 w-3"}),i.jsx("span",{children:"Create Apps"})]})]})]})}),i.jsx(he,{className:"p-8 cursor-pointer hover:bg-slate-750 transition-all duration-200 border-2 border-transparent hover:border-green-500",onClick:()=>g("existing"),children:i.jsxs("div",{className:"text-center space-y-4",children:[i.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto",children:i.jsx(nn,{className:"h-8 w-8 text-white"})}),i.jsx("h3",{className:"text-xl font-semibold text-slate-100",children:"Existing Company Mode"}),i.jsx("p",{className:"text-slate-400 text-sm",children:"Manage existing companies, users, and applications"}),i.jsxs("div",{className:"pt-4 space-y-2 text-xs text-slate-500",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(dt,{className:"h-3 w-3"}),i.jsx("span",{children:"Manage Users"})]}),i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(Fu,{className:"h-3 w-3"}),i.jsx("span",{children:"Edit/Add Apps"})]})]})]})})]})]}),S=()=>i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:v,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(Et,{className:"h-5 w-5 text-slate-400"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"Developer Mode"}),i.jsx("p",{className:"text-slate-400",children:"Create and configure new companies and applications"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:i.jsx(dn,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Create New Company"}),i.jsx("p",{className:"text-slate-400 text-sm",children:"Set up a new client company"})]})]}),i.jsx("button",{onClick:()=>o(!0),className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Company"})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center",children:i.jsx(Ts,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Create Apps"}),i.jsx("p",{className:"text-slate-400 text-sm",children:"Develop custom applications"})]})]}),i.jsx("button",{className:"w-full px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create App"})]})]}),i.jsxs(he,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-100 mb-4",children:"Available App Templates"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:y.map(P=>{const N=P.icon;return i.jsxs("div",{className:"p-4 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[i.jsx(N,{className:"h-5 w-5 text-blue-400"}),i.jsx("span",{className:"text-slate-200 font-medium",children:P.name})]}),i.jsx("p",{className:"text-slate-400 text-xs",children:P.description})]},P.id)})})]})]}),C=()=>i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:v,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(Et,{className:"h-5 w-5 text-slate-400"})}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"Existing Company Mode"}),i.jsx("p",{className:"text-slate-400",children:"Manage existing companies and their configurations"})]})]}),n?_():i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Select Company"}),h&&i.jsx("button",{onClick:x,className:"text-sm text-blue-400 hover:text-blue-300 transition-colors",children:"Retry"})]}),h&&i.jsxs("div",{className:"mb-4 p-3 bg-red-900/50 border border-red-700 rounded-lg",children:[i.jsxs("p",{className:"text-red-300 text-sm",children:["⚠️ ",h]}),i.jsx("p",{className:"text-red-400 text-xs mt-1",children:"Showing sample data"})]}),d?i.jsxs("div",{className:"flex items-center justify-center py-8",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500"}),i.jsx("span",{className:"ml-3 text-slate-400",children:"Loading companies..."})]}):l.length===0?i.jsxs("div",{className:"text-center py-8",children:[i.jsx(nn,{className:"h-12 w-12 text-slate-600 mx-auto mb-3"}),i.jsx("h4",{className:"text-slate-300 font-medium mb-2",children:"No Companies Found"}),i.jsx("p",{className:"text-slate-400 text-sm mb-4",children:"Create your first company to get started"}),i.jsx("button",{onClick:()=>e("/dashboard?mode=developer"),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Company"})]}):i.jsx("div",{className:"space-y-3",children:l.map(P=>i.jsx("div",{onClick:()=>b(P),className:"p-4 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors cursor-pointer group",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"text-slate-200 font-medium",children:P.name}),i.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[i.jsxs("span",{className:"text-slate-400 text-sm",children:[P.users," users"]}),i.jsxs("span",{className:"text-slate-400 text-sm",children:["Apps: ",Array.isArray(P.apps)?P.apps.join(", "):"None"]})]})]}),i.jsx(ya,{className:"h-5 w-5 text-slate-400 group-hover:text-slate-200 transition-colors"})]})},P.id))})]})]}),_=()=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:n.name}),i.jsx("p",{className:"text-slate-400",children:"Manage users and applications"})]}),i.jsx("button",{onClick:()=>r(null),className:"px-4 py-2 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors",children:"Back to Companies"})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center",children:i.jsx(dt,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Manage Users"}),i.jsxs("p",{className:"text-slate-400 text-sm",children:[n.users," active users"]})]})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsx("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:i.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[i.jsx(fb,{className:"h-4 w-4"}),i.jsx("span",{children:"Add New User"})]})}),i.jsx("button",{className:"w-full px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"View All Users"})]})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center",children:i.jsx(Fu,{className:"h-6 w-6 text-white"})}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Edit/Add Apps"}),i.jsxs("p",{className:"text-slate-400 text-sm",children:[n.apps.length," apps configured"]})]})]}),i.jsxs("div",{className:"space-y-2 mb-4",children:[i.jsx("button",{className:"w-full px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:"Add New App"}),i.jsx("button",{className:"w-full px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"Configure Existing Apps"})]})]})]}),i.jsxs(he,{className:"p-6",children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-100 mb-4",children:"Current Applications"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.apps.map((P,N)=>i.jsxs("div",{className:"p-4 bg-slate-700 rounded-lg",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("span",{className:"text-slate-200 font-medium",children:P}),i.jsx("button",{className:"text-slate-400 hover:text-slate-200 transition-colors",children:i.jsx(Vl,{className:"h-4 w-4"})})]}),i.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"Active"})]},N))})]})]});return i.jsxs(i.Fragment,{children:[p==="developer"?S():p==="existing"?C():j(),i.jsx(IS,{isOpen:a,onClose:()=>o(!1),onSave:k})]})},FS=()=>{const{user:t,userProfile:e,loading:s}=zs(),[n,r]=w.useState(null),[a,o]=w.useState(0);if(w.useEffect(()=>{console.log("DashboardPage - Auth State:",{user:t==null?void 0:t.email,userProfile:e,loading:s,profileRetryCount:a})},[t,e,s,a]),s)return i.jsx($e,{children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-300",children:"Loading..."})]})})});if(t&&!e)return i.jsx($e,{children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center max-w-md mx-auto",children:[i.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Welcome!"}),i.jsx("p",{className:"text-slate-300 mb-4",children:"Setting up your profile... This usually takes a few moments."}),i.jsxs("p",{className:"text-slate-400 text-sm mb-4",children:["Your account: ",t.email]}),a<3?i.jsxs("button",{onClick:()=>{o(c=>c+1),window.location.reload()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 mr-2",children:["Retry (",a+1,"/3)"]}):i.jsxs("div",{className:"space-y-2",children:[i.jsx("p",{className:"text-red-400 text-sm",children:"Profile creation failed. Please contact support."}),i.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Refresh Page"})]})]})})});if(!t)return i.jsx($e,{children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center max-w-md mx-auto",children:[i.jsx("h2",{className:"text-xl font-semibold text-red-400 mb-4",children:"Authentication Error"}),i.jsx("p",{className:"text-slate-300 mb-4",children:"You are not logged in. Please refresh and try again."}),i.jsx("button",{onClick:()=>window.location.href="/auth",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go to Login"})]})})});const l=()=>{var c;try{const d=((c=e==null?void 0:e.role)==null?void 0:c.trim())||"Employee";switch(console.log("Normalized Role for Switch:",JSON.stringify(d)),d){case"Capacity Admin":return console.log("Rendering AdminDashboard"),i.jsx(kS,{});case"NSight Admin":return console.log("Rendering NsightAdminDashboard"),i.jsx(RS,{});case"Employee":return console.log("Rendering EmployeeDashboard (Employee role)"),i.jsx(O0,{});default:return console.log("Rendering EmployeeDashboard (Default fallback for role:",JSON.stringify(d)),i.jsx(O0,{})}}catch(d){return console.error("Error rendering dashboard:",d),r(d.message),i.jsxs("div",{className:"text-center py-8",children:[i.jsx("h2",{className:"text-xl font-semibold text-red-400 mb-4",children:"Dashboard Error"}),i.jsxs("p",{className:"text-slate-300 mb-4",children:["Error: ",d]}),i.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Refresh Page"})]})}};return i.jsx($e,{children:l()})},hf=({isOpen:t,onClose:e})=>{const[s,n]=w.useState(!1),[r,a]=w.useState([]),[o,l]=w.useState("idle"),c=()=>{setTimeout(()=>{n(!0)},1e3)},d=m=>{const y=Array.from(m.target.files).map(x=>({id:Date.now()+Math.random(),name:x.name,size:x.size,type:x.type,file:x}));a(x=>[...x,...y])},u=()=>{l("uploading"),setTimeout(()=>{l("success"),setTimeout(()=>{l("idle"),a([])},2e3)},2e3)},h=m=>{a(p=>p.filter(y=>y.id!==m))},f=m=>{if(m===0)return"0 Bytes";const p=1024,y=["Bytes","KB","MB","GB"],x=Math.floor(Math.log(m)/Math.log(p));return parseFloat((m/Math.pow(p,x)).toFixed(2))+" "+y[x]};return t?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:e}),i.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 border",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("svg",{className:"w-6 h-6 text-blue-600",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})}),i.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Dropbox"})]}),i.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:i.jsx(ut,{className:"h-5 w-5 text-gray-400"})})]}),i.jsx("div",{className:"p-6",children:s?i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"text-center",children:[i.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Upload Formula Files"}),i.jsx("p",{className:"text-gray-600",children:"Select files to upload to your Formulas folder"})]}),i.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors",children:[i.jsx(hb,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),i.jsxs("label",{className:"cursor-pointer",children:[i.jsx("span",{className:"text-blue-600 hover:text-blue-500 font-medium",children:"Choose files"}),i.jsx("span",{className:"text-gray-600",children:" or drag and drop"}),i.jsx("input",{type:"file",multiple:!0,onChange:d,className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.txt,.csv"})]}),i.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Supports PDF, DOC, XLS, TXT, CSV files"})]}),r.length>0&&i.jsxs("div",{className:"space-y-3",children:[i.jsxs("h4",{className:"font-medium text-gray-900",children:["Selected Files (",r.length,")"]}),i.jsx("div",{className:"max-h-32 overflow-y-auto space-y-2",children:r.map(m=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(of,{className:"w-4 h-4 text-gray-500"}),i.jsxs("div",{children:[i.jsx("p",{className:"text-sm font-medium text-gray-900",children:m.name}),i.jsx("p",{className:"text-xs text-gray-500",children:f(m.size)})]})]}),i.jsx("button",{onClick:()=>h(m.id),className:"p-1 hover:bg-gray-200 rounded",children:i.jsx(ut,{className:"w-4 h-4 text-gray-400"})})]},m.id))})]}),o!=="idle"&&i.jsxs("div",{className:"p-4 rounded-lg border",children:[o==="uploading"&&i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),i.jsx("span",{className:"text-blue-600",children:"Uploading files..."})]}),o==="success"&&i.jsxs("div",{className:"flex items-center space-x-3 text-green-600",children:[i.jsx(br,{className:"w-5 h-5"}),i.jsx("span",{children:"Files uploaded successfully!"})]}),o==="error"&&i.jsxs("div",{className:"flex items-center space-x-3 text-red-600",children:[i.jsx(Ms,{className:"w-5 h-5"}),i.jsx("span",{children:"Upload failed. Please try again."})]})]}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx(_e,{onClick:e,variant:"secondary",className:"flex-1",children:"Cancel"}),i.jsx(_e,{onClick:u,disabled:r.length===0||o==="uploading",className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white disabled:opacity-50",children:o==="uploading"?"Uploading...":`Upload ${r.length} file${r.length!==1?"s":""}`})]})]}):i.jsxs("div",{className:"text-center space-y-6",children:[i.jsxs("div",{children:[i.jsx("svg",{className:"w-16 h-16 text-blue-600 mx-auto mb-4",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})}),i.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connect to Dropbox"}),i.jsx("p",{className:"text-gray-600",children:"Upload your formula files directly to your Dropbox account"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:i.jsxs("p",{className:"text-sm text-gray-700",children:["Files will be uploaded to: ",i.jsx("strong",{children:"/Apps/Formulas/"})]})}),i.jsx(_e,{onClick:c,className:"w-full bg-blue-600 hover:bg-blue-500 text-white",children:"Connect to Dropbox"})]})]})})]})]}):null},$S=({isOpen:t,onClose:e,onSave:s})=>{const[n,r]=w.useState(1),[a,o]=w.useState([]),[l,c]=w.useState(""),[d,u]=w.useState({}),[h,f]=w.useState(!1),[m,p]=w.useState(""),[y,x]=w.useState({name:"",targetDrumPrice:"",targetTotePrice:"",ingredients:[]});w.useEffect(()=>{t&&(g(),r(1),x({name:"",targetDrumPrice:"",targetTotePrice:"",ingredients:[]}),u({}),c(""))},[t]);const g=async()=>{try{const E=await wa();o(E)}catch(E){console.error("Error loading raw materials:",E)}},v=a.filter(E=>E.materialName.toLowerCase().includes(l.toLowerCase())||E.supplierName.toLowerCase().includes(l.toLowerCase())||E.casNumber.toLowerCase().includes(l.toLowerCase())),b={totalPercentage:y.ingredients.reduce((E,D)=>E+parseFloat(D.percentage||0),0),totalCost:y.ingredients.reduce((E,D)=>{const F=parseFloat(D.percentage||0),U=parseFloat(D.cost||0);return E+F/100*U},0)},k=E=>{const D={};return E===1&&(y.name.trim()||(D.name="Formula name is required"),(!y.targetDrumPrice||parseFloat(y.targetDrumPrice)<=0)&&(D.targetDrumPrice="Valid drum price is required"),(!y.targetTotePrice||parseFloat(y.targetTotePrice)<=0)&&(D.targetTotePrice="Valid tote price is required")),E===2&&(y.ingredients.length===0&&(D.ingredients="At least one ingredient is required"),Math.abs(b.totalPercentage-100)>.1&&(D.percentageTotal="Ingredients must total 100%"),y.ingredients.forEach((F,U)=>{(!F.percentage||parseFloat(F.percentage)<=0)&&(D[`ingredient_${U}_percentage`]="Valid percentage required")})),u(D),Object.keys(D).length===0},j=(E,D)=>{x(F=>({...F,[E]:D})),d[E]&&u(F=>({...F,[E]:void 0}))},S=E=>{const D={id:Date.now(),name:E.materialName,materialId:E.id,percentage:"",cost:E.supplierCost||0,supplierName:E.supplierName,casNumber:E.casNumber};x(F=>({...F,ingredients:[...F.ingredients,D]})),c("")},C=(E,D,F)=>{x(U=>({...U,ingredients:U.ingredients.map(Z=>Z.id===E?{...Z,[D]:F}:Z)}))},_=E=>{x(D=>({...D,ingredients:D.ingredients.filter(F=>F.id!==E)}))},P=async E=>{f(!0),p("");try{const D=await uf.generateResponse(`Add ${E} to my raw materials database`,null,[]);if(p(D.response||D),D.materialAdded&&D.materialData){const F=await wa();o(F);const U=D.materialData;S(U),c(""),setTimeout(()=>{p(""),f(!1)},3e3)}else setTimeout(()=>{f(!1)},5e3)}catch(D){console.error("Error adding material with AI:",D),p("❌ Failed to add material with AI. Please try again."),setTimeout(()=>{f(!1)},5e3)}},N=()=>{k(n)&&r(E=>E+1)},L=()=>{r(E=>E-1)},A=()=>{if(k(2)){const E={name:y.name,totalCost:b.totalCost,finalSalePriceDrum:parseFloat(y.targetDrumPrice),finalSalePriceTote:parseFloat(y.targetTotePrice),ingredients:y.ingredients.map(D=>({name:D.name,percentage:parseFloat(D.percentage),cost:parseFloat(D.cost)}))};s(E),e()}};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50 p-4",children:i.jsxs("div",{className:"bg-slate-800 rounded-lg w-full max-w-4xl max-h-[90vh] overflow-hidden",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:"Add New Formula"}),i.jsxs("p",{className:"text-slate-400 mt-1",children:["Step ",n," of 2: ",n===1?"Basic Information":"Ingredients & Composition"]})]}),i.jsx("button",{onClick:e,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(ut,{className:"h-5 w-5 text-slate-400"})})]}),i.jsx("div",{className:"px-6 py-4 border-b border-slate-700",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n>=1?"bg-blue-600 text-white":"bg-slate-600 text-slate-400"}`,children:n>1?i.jsx(br,{className:"h-4 w-4"}):"1"}),i.jsx("span",{className:n>=1?"text-slate-200":"text-slate-400",children:"Basic Info"})]}),i.jsx("div",{className:`flex-1 h-1 ${n>1?"bg-blue-600":"bg-slate-600"}`}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("div",{className:`w-8 h-8 rounded-full flex items-center justify-center ${n>=2?"bg-blue-600 text-white":"bg-slate-600 text-slate-400"}`,children:"2"}),i.jsx("span",{className:n>=2?"text-slate-200":"text-slate-400",children:"Ingredients"})]})]})}),i.jsxs("div",{className:"p-6 overflow-y-auto max-h-[60vh]",children:[n===1&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Formula Name *"}),i.jsx("input",{type:"text",value:y.name,onChange:E=>j("name",E.target.value),className:`w-full px-3 py-2 bg-slate-700 border rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.name?"border-red-500":"border-slate-600"}`,placeholder:"e.g., Heavy Duty Degreaser Pro"}),d.name&&i.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center",children:[i.jsx(Ms,{className:"h-4 w-4 mr-1"}),d.name]})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Target Drum Price (USD) *"}),i.jsx("input",{type:"number",step:"0.01",value:y.targetDrumPrice,onChange:E=>j("targetDrumPrice",E.target.value),className:`w-full px-3 py-2 bg-slate-700 border rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.targetDrumPrice?"border-red-500":"border-slate-600"}`,placeholder:"589.99"}),d.targetDrumPrice&&i.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center",children:[i.jsx(Ms,{className:"h-4 w-4 mr-1"}),d.targetDrumPrice]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Target Tote Price (USD) *"}),i.jsx("input",{type:"number",step:"0.01",value:y.targetTotePrice,onChange:E=>j("targetTotePrice",E.target.value),className:`w-full px-3 py-2 bg-slate-700 border rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 ${d.targetTotePrice?"border-red-500":"border-slate-600"}`,placeholder:"1249.99"}),d.targetTotePrice&&i.jsxs("p",{className:"text-red-400 text-sm mt-1 flex items-center",children:[i.jsx(Ms,{className:"h-4 w-4 mr-1"}),d.targetTotePrice]})]})]}),i.jsxs("div",{className:"bg-slate-750 rounded-lg p-4",children:[i.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-2",children:"What's Next?"}),i.jsx("p",{className:"text-slate-400",children:"In the next step, you'll select ingredients from your raw materials database and specify their percentages. The system will automatically calculate costs based on your material pricing."})]})]}),n===2&&i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"border border-slate-700 rounded-lg p-4",children:[i.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Add Ingredients"}),i.jsxs("div",{className:"relative mb-4",children:[i.jsx(va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),i.jsx("input",{type:"text",value:l,onChange:E=>c(E.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Search raw materials..."})]}),l&&i.jsxs("div",{className:"border border-slate-600 rounded-lg",children:[h&&m&&i.jsx("div",{className:"p-3 bg-blue-900/20 border-b border-slate-600",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(oa,{className:"h-4 w-4 text-blue-400 mt-0.5 flex-shrink-0"}),i.jsx("div",{className:"text-sm text-slate-300",children:m})]})}),i.jsxs("div",{className:"max-h-40 overflow-y-auto",children:[v.slice(0,5).map(E=>i.jsxs("button",{onClick:()=>S(E),className:"w-full p-3 text-left hover:bg-slate-700 border-b border-slate-600 last:border-b-0 transition-colors",disabled:h,children:[i.jsx("div",{className:"font-medium text-slate-200",children:E.materialName}),i.jsxs("div",{className:"text-sm text-slate-400",children:[E.supplierName," • $",E.supplierCost?E.supplierCost.toFixed(2):"0.00","/unit • ",E.casNumber]})]},E.id)),v.length===0&&l&&!h&&i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"text-center text-slate-400 mb-4",children:[i.jsx(va,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),i.jsxs("p",{className:"text-sm",children:['No materials found for "',i.jsx("span",{className:"font-medium",children:l}),'"']})]}),i.jsxs("button",{onClick:()=>P(l),className:"w-full flex items-center justify-center space-x-2 p-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-105",children:[i.jsx(ub,{className:"h-4 w-4"}),i.jsxs("span",{className:"font-medium",children:['Add "',l,'" with AI']}),i.jsx(oa,{className:"h-4 w-4"})]}),i.jsx("p",{className:"text-xs text-slate-500 text-center mt-2",children:"AI will research and add this chemical with complete specifications"})]}),h&&i.jsxs("div",{className:"p-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-400",children:[i.jsx(oa,{className:"h-5 w-5 animate-pulse"}),i.jsxs("span",{className:"text-sm font-medium",children:['AI is researching "',l,'"...']})]}),i.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"This may take a few seconds while we gather chemical data"})]})]})]})]}),i.jsxs("div",{children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-slate-200",children:"Formula Composition"}),i.jsxs("div",{className:"text-sm",children:[i.jsxs("span",{className:`${Math.abs(b.totalPercentage-100)<.1?"text-green-400":"text-yellow-400"}`,children:["Total: ",b.totalPercentage.toFixed(1),"%"]}),i.jsxs("span",{className:"text-slate-400 ml-4",children:["Cost: $",b.totalCost.toFixed(2)]})]})]}),d.ingredients&&i.jsxs("p",{className:"text-red-400 text-sm mb-4 flex items-center",children:[i.jsx(Ms,{className:"h-4 w-4 mr-1"}),d.ingredients]}),d.percentageTotal&&i.jsxs("p",{className:"text-red-400 text-sm mb-4 flex items-center",children:[i.jsx(Ms,{className:"h-4 w-4 mr-1"}),d.percentageTotal]}),y.ingredients.length===0?i.jsxs("div",{className:"text-center py-8 text-slate-400",children:[i.jsx(dn,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),i.jsx("p",{children:"No ingredients added yet"}),i.jsx("p",{className:"text-sm",children:"Search and select materials above to get started"})]}):i.jsx("div",{className:"space-y-3",children:y.ingredients.map((E,D)=>i.jsxs("div",{className:"bg-slate-750 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsxs("div",{children:[i.jsx("h4",{className:"font-medium text-slate-200",children:E.name}),i.jsxs("p",{className:"text-sm text-slate-400",children:[E.supplierName," • ",E.casNumber," • $",E.cost,"/unit"]})]}),i.jsx("button",{onClick:()=>_(E.id),className:"p-2 hover:bg-slate-600 rounded-lg transition-colors text-red-400",children:i.jsx(ba,{className:"h-4 w-4"})})]}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs("div",{className:"flex-1",children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Percentage"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:"number",step:"0.1",min:"0",max:"100",value:E.percentage,onChange:F=>C(E.id,"percentage",F.target.value),className:`w-full px-3 py-2 bg-slate-700 border rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 ${d[`ingredient_${D}_percentage`]?"border-red-500":"border-slate-600"}`,placeholder:"0.0"}),i.jsx("span",{className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400",children:"%"})]}),d[`ingredient_${D}_percentage`]&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:d[`ingredient_${D}_percentage`]})]}),i.jsxs("div",{className:"w-24",children:[i.jsx("label",{className:"block text-xs text-slate-400 mb-1",children:"Cost Impact"}),i.jsxs("div",{className:"px-3 py-2 bg-slate-700 rounded-lg text-slate-300 text-sm",children:["$",((parseFloat(E.percentage)||0)/100*parseFloat(E.cost)).toFixed(2)]})]})]})]},E.id))})]}),y.ingredients.length>0&&i.jsxs("div",{className:"bg-blue-900/20 border border-blue-500/30 rounded-lg p-4",children:[i.jsx("h3",{className:"text-lg font-medium text-blue-300 mb-2",children:"Formula Summary"}),i.jsxs("div",{className:"grid grid-cols-3 gap-4 text-sm",children:[i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-400",children:"Total Percentage:"}),i.jsxs("div",{className:`font-medium ${Math.abs(b.totalPercentage-100)<.1?"text-green-400":"text-yellow-400"}`,children:[b.totalPercentage.toFixed(1),"%"]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-400",children:"Total Cost:"}),i.jsxs("div",{className:"font-medium text-slate-200",children:["$",b.totalCost.toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("span",{className:"text-slate-400",children:"Profit Margin (Drum):"}),i.jsx("div",{className:"font-medium text-slate-200",children:y.targetDrumPrice?`${((parseFloat(y.targetDrumPrice)-b.totalCost)/parseFloat(y.targetDrumPrice)*100).toFixed(1)}%`:"N/A"})]})]})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-slate-700",children:[i.jsx("div",{className:"flex space-x-3",children:n>1&&i.jsxs(_e,{onClick:L,variant:"secondary",className:"flex items-center space-x-2",children:[i.jsx(ob,{className:"h-4 w-4"}),i.jsx("span",{children:"Previous"})]})}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx(_e,{onClick:e,variant:"secondary",children:"Cancel"}),n<2?i.jsxs(_e,{onClick:N,className:"flex items-center space-x-2",children:[i.jsx("span",{children:"Next"}),i.jsx(ya,{className:"h-4 w-4"})]}):i.jsxs(_e,{onClick:A,className:"flex items-center space-x-2",disabled:Object.keys(d).length>0||Math.abs(b.totalPercentage-100)>.1,children:[i.jsx(br,{className:"h-4 w-4"}),i.jsx("span",{children:"Save Formula"})]})]})]})]})}):null},zS=({className:t="w-6 h-6"})=>i.jsx("img",{src:"/chemformation-logo.png",alt:"Chemformation Logo",className:t}),US=()=>{const t=gt(),[e,s]=w.useState(""),[n,r]=w.useState("all"),[a,o]=w.useState(null),[l,c]=w.useState({x:0,y:0}),[d,u]=w.useState(!1),[h,f]=w.useState(!1);w.useState(!1);const[m,p]=w.useState([]),[y,x]=w.useState(!0),[g,v]=w.useState(null),b=w.useRef({}),[k,j]=w.useState(!1),[S,C]=w.useState("name"),[_,P]=w.useState("asc"),[N,L]=w.useState("all"),[A,E]=w.useState("all"),[D,F]=w.useState("all"),[U,Z]=w.useState("name"),[R,V]=w.useState("asc"),[G,H]=w.useState("all"),[K,ee]=w.useState("all"),[ae,ge]=w.useState("all");w.useEffect(()=>{(async()=>{x(!0),v(null);try{const J=await M0();p(J)}catch(J){console.error("Error loading formulas:",J),v("Failed to load formulas. Please check your database connection.")}finally{x(!1)}})()},[]);const xe=async M=>{try{console.log("Adding new formula:",M);const J=await gS(M);if(J){const de=await M0();p(de),console.log("Formula added successfully:",J)}}catch(J){console.error("Error adding formula:",J),v("Failed to add formula. Please try again.")}};w.useEffect(()=>{const M=J=>{k&&!J.target.closest(".relative")&&j(!1)};return document.addEventListener("mousedown",M),()=>document.removeEventListener("mousedown",M)},[k]);const Me=M=>{Z(M)},Ze=()=>{V(R==="asc"?"desc":"asc")},We=()=>{C("name"),P("asc"),L("all"),E("all"),F("all"),s(""),Z("name"),V("asc"),H("all"),ee("all"),ge("all")},at=()=>{C(U),P(R),L(G),E(K),F(ae),j(!1)},ht=()=>{Z(S),V(_),H(N),ee(A),ge(D),j(!1)},Pe=()=>{k?ht():(Z(S),V(_),H(N),ee(A),ge(D),j(!0))},Bt=[...m.filter(M=>{const J=M.name.toLowerCase().includes(e.toLowerCase())||M.id.toLowerCase().includes(e.toLowerCase()),de=N==="all"||(()=>{const ie=parseFloat(M.totalCost)||0;switch(N){case"low":return ie<100;case"medium":return ie>=100&&ie<500;case"high":return ie>=500;default:return!0}})(),Ee=A==="all"||(()=>{const ie=parseFloat(M.finalSalePriceDrum)||0;switch(A){case"low":return ie<200;case"medium":return ie>=200&&ie<1e3;case"high":return ie>=1e3;default:return!0}})(),W=D==="all"||(()=>{const ie=M.ingredients?M.ingredients.length:0;switch(D){case"few":return ie<=3;case"medium":return ie>3&&ie<=6;case"many":return ie>6;default:return!0}})();return J&&de&&Ee&&W})].sort((M,J)=>{let de,Ee;switch(S){case"name":de=M.name.toLowerCase(),Ee=J.name.toLowerCase();break;case"id":de=M.id.toLowerCase(),Ee=J.id.toLowerCase();break;case"totalCost":de=parseFloat(M.totalCost)||0,Ee=parseFloat(J.totalCost)||0;break;case"finalSalePriceDrum":de=parseFloat(M.finalSalePriceDrum)||0,Ee=parseFloat(J.finalSalePriceDrum)||0;break;case"finalSalePriceTote":de=parseFloat(M.finalSalePriceTote)||0,Ee=parseFloat(J.finalSalePriceTote)||0;break;case"ingredientCount":de=M.ingredients?M.ingredients.length:0,Ee=J.ingredients?J.ingredients.length:0;break;default:de=M.name.toLowerCase(),Ee=J.name.toLowerCase()}return de<Ee?_==="asc"?-1:1:de>Ee?_==="asc"?1:-1:0}),it=(M,J)=>{if(!b.current[J])return;const de=b.current[J].getBoundingClientRect(),Ee=(M.clientX-de.left)/de.width*100,W=(M.clientY-de.top)/de.height*100;c({x:Ee,y:W})},I=[{id:"all",label:"All Formulas"},{id:"assigned",label:"Assigned to me"},{id:"created",label:"Created by Me"}];return y?i.jsx($e,{children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(Et,{className:"h-5 w-5 text-slate-400"})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Fs,{className:"h-8 w-8 text-blue-500"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Formulas"})]})]}),i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"text-slate-400",children:"Loading formulas..."})})]})}):g?i.jsx($e,{children:i.jsx("div",{className:"max-w-4xl mx-auto",children:i.jsx("div",{className:"text-center py-12",children:i.jsxs("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-6 max-w-md mx-auto",children:[i.jsx("h2",{className:"text-xl font-semibold text-red-400 mb-4",children:"Database Connection Error"}),i.jsx("p",{className:"text-slate-300 mb-4",children:g}),i.jsxs("div",{className:"text-left text-sm text-slate-400 space-y-2 mb-4",children:[i.jsx("p",{children:i.jsx("strong",{className:"text-slate-300",children:"Possible solutions:"})}),i.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[i.jsx("li",{children:"Run the database schema update script in Supabase"}),i.jsx("li",{children:"Check your Supabase connection settings"}),i.jsx("li",{children:"Verify authentication permissions"})]})]}),i.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retry"})]})})})}):i.jsx($e,{children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(Et,{className:"h-5 w-5 text-slate-400"})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Fs,{className:"h-8 w-8 text-blue-500"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Formulas"})]})]}),i.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center space-x-4",children:i.jsx("input",{type:"text",placeholder:"Search by Txn Id, material name",value:e,onChange:M=>s(M.target.value),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-80"})}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{className:"p-3 bg-red-600 rounded-full hover:bg-red-500 transition-colors",children:i.jsx(zS,{className:"w-6 h-6"})}),i.jsx("button",{onClick:()=>u(!0),className:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors",title:"Upload to Dropbox",children:i.jsx("svg",{className:"w-5 h-5 text-slate-300",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})})})]})]})}),i.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex space-x-0",children:I.map(M=>i.jsxs("button",{ref:J=>b.current[M.id]=J,onClick:()=>r(M.id),onMouseEnter:()=>o(M.id),onMouseLeave:()=>o(null),onMouseMove:J=>it(J,M.id),className:`relative px-6 py-2 transition-all duration-300 ease-out ${n===M.id?"bg-slate-600 text-slate-100":"bg-slate-700 text-slate-400 hover:text-slate-200 hover:bg-slate-650"} ${M.id==="all"?"rounded-l-lg":M.id==="created"?"rounded-r-lg":""}`,style:{transform:a===M.id?"scale(1.05)":"scale(1)",transition:"transform 0.2s ease-out"},children:[i.jsx("span",{className:"relative z-10 font-medium",children:M.label}),a===M.id&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-md -z-0",style:{background:`radial-gradient(circle at ${l.x}% ${l.y}%, rgba(59, 130, 246, 0.15), transparent 50%)`}})]},M.id))}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:Pe,className:"flex items-center space-x-2 p-2 border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors",children:[i.jsx(Sc,{className:"h-5 w-5 text-slate-300"}),i.jsx("span",{className:"text-sm text-slate-300",children:"Filter & Sort"}),i.jsx(Un,{className:"h-4 w-4 text-slate-300"})]}),k&&i.jsx("div",{className:"absolute right-0 mt-2 w-96 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50",children:i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200",children:"Sort By"}),i.jsxs("button",{onClick:Ze,className:"flex items-center space-x-1 px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition-colors",children:[i.jsx("span",{children:R==="asc"?"Ascending":"Descending"}),i.jsx("span",{children:R==="asc"?"↑":"↓"})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"name",label:"Formula Name"},{key:"id",label:"Formula ID"},{key:"totalCost",label:"Total Cost"},{key:"finalSalePriceDrum",label:"Sale Price (Drum)"},{key:"finalSalePriceTote",label:"Sale Price (Tote)"},{key:"ingredientCount",label:"Ingredient Count"}].map(M=>i.jsx("button",{onClick:()=>Me(M.key),className:`text-left px-3 py-2 rounded text-sm transition-colors ${U===M.key?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:M.label},M.key))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Cost"}),i.jsxs("select",{value:G,onChange:M=>H(M.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[i.jsx("option",{value:"all",children:"All Costs"}),i.jsx("option",{value:"low",children:"Low (< $100)"}),i.jsx("option",{value:"medium",children:"Medium ($100 - $500)"}),i.jsx("option",{value:"high",children:"High (>= $500)"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Sale Price"}),i.jsxs("select",{value:K,onChange:M=>ee(M.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[i.jsx("option",{value:"all",children:"All Prices"}),i.jsx("option",{value:"low",children:"Low (< $200)"}),i.jsx("option",{value:"medium",children:"Medium ($200 - $1000)"}),i.jsx("option",{value:"high",children:"High (>= $1000)"})]})]})]}),i.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Ingredients"}),i.jsxs("select",{value:ae,onChange:M=>ge(M.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[i.jsx("option",{value:"all",children:"All Ingredient Counts"}),i.jsx("option",{value:"few",children:"Few (≤ 3 ingredients)"}),i.jsx("option",{value:"medium",children:"Medium (4-6 ingredients)"}),i.jsx("option",{value:"many",children:"Many (> 6 ingredients)"})]})]})})]}),i.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-slate-600",children:[i.jsx("button",{onClick:We,className:"px-3 py-1 text-xs text-slate-400 hover:text-slate-200 transition-colors",children:"Clear All"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:ht,className:"px-4 py-2 text-sm text-slate-300 hover:text-slate-100 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:at,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Apply"})]})]})]})})]}),i.jsxs("button",{onClick:()=>f(!0),className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-500 transition-colors",children:[i.jsx(dn,{className:"w-4 h-4 text-white"}),i.jsx("span",{className:"text-sm text-white font-medium",children:"Add Formula"})]})]})]})}),i.jsx("div",{className:"space-y-6",children:i.jsx("div",{className:"bg-slate-800 rounded-lg overflow-hidden border border-slate-700",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-750 border-b border-slate-700",children:[i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Item number"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Display name"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Ingredients"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Total cost"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Final sale price (Drum)"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Final sale price (Tote)"})]})}),i.jsx("tbody",{children:Bt.map((M,J)=>i.jsxs("tr",{onClick:()=>t(`/formulas/${M.id}`),className:"border-b border-slate-700 hover:bg-slate-750 transition-colors cursor-pointer",children:[i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:M.id}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:M.name}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"w-64 overflow-x-auto ingredients-scroll",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:i.jsx("div",{className:"flex space-x-2 min-w-max",children:M.ingredients&&M.ingredients.map((de,Ee)=>i.jsxs("div",{className:"flex-shrink-0 bg-slate-700 rounded-full px-3 py-1 text-xs text-slate-300 border border-slate-600",children:[de.name," (",de.percentage,"%)"]},Ee))})})}),i.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",M.totalCost?M.totalCost.toFixed(2):"0.00"]}),i.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",M.finalSalePriceDrum?M.finalSalePriceDrum.toFixed(2):"0.00"]}),i.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",M.finalSalePriceTote?M.finalSalePriceTote.toFixed(2):"0.00"]})]},`${M.id}-${J}`))})]})})}),i.jsx("button",{className:"fixed bottom-6 right-6 p-4 bg-blue-600 rounded-full hover:bg-blue-500 transition-colors shadow-lg",children:i.jsx(dn,{className:"h-6 w-6 text-white"})}),i.jsx(hf,{isOpen:d,onClose:()=>u(!1)}),i.jsx($S,{isOpen:h,onClose:()=>f(!1),onSave:xe})]})})},BS=()=>{const t=gt(),{formulaId:e}=Nv(),[s,n]=w.useState(!1),[r,a]=w.useState([]),[o,l]=w.useState(!1),c=w.useRef(null),[d,u]=w.useState(null),[h,f]=w.useState(null),[m,p]=w.useState([]),[y,x]=w.useState(!0),[g,v]=w.useState(null),[b,k]=w.useState(!1),[j,S]=w.useState([]),[C,_]=w.useState(""),[P,N]=w.useState(!1),[L,A]=w.useState(!1),[E,D]=w.useState("");if(w.useEffect(()=>{(async()=>{try{x(!0),console.log("Loading formula with ID:",e);const M=await mS(e);console.log("Found formula:",M),M?(f(M),u({name:M.name,totalCost:M.totalCost,finalSalePriceDrum:M.finalSalePriceDrum,finalSalePriceTote:M.finalSalePriceTote,ingredients:[...M.ingredients]}),console.log("Formula state set successfully")):(console.log("No formula found for ID:",e),v("Formula not found"))}catch(M){console.error("Error loading formula:",M),v("Failed to load formula")}finally{x(!1)}})()},[e]),w.useEffect(()=>(console.log("FormulaDetailPage rendered with formulaId:",e),n(!1),a([]),p([]),()=>{console.log("FormulaDetailPage cleanup")}),[e]),console.log("Current formula state:",h),console.log("Current editableFormula state:",d),y)return i.jsx($e,{children:i.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:i.jsx("div",{className:"text-center",children:i.jsx("div",{className:"text-slate-400",children:"Loading formula..."})})})});if(g||!h)return console.log("Rendering Formula Not Found page"),i.jsx($e,{children:i.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-4",children:g||"Formula Not Found"}),i.jsxs("p",{className:"text-slate-400 mb-4",children:["Formula ID: ",e]}),i.jsx("button",{onClick:()=>t("/formulas"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Back to Formulas"})]})})});const U=(I=>({HDST001:[{id:1,name:"HDST001_Safety_Data_Sheet.pdf",size:2451232,type:"application/pdf",uploadDate:new Date("2024-01-15"),uploader:"Safety Team"},{id:2,name:"Heavy_Duty_Steam_Formula_Specs.docx",size:1024567,type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",uploadDate:new Date("2024-01-10"),uploader:"R&D Team"},{id:3,name:"Manufacturing_Instructions_HDST001.pdf",size:876543,type:"application/pdf",uploadDate:new Date("2024-01-08"),uploader:"Production Team"},{id:4,name:"Quality_Control_Certificate.pdf",size:345678,type:"application/pdf",uploadDate:new Date("2024-01-05"),uploader:"QC Lab"}],MDCL002:[{id:5,name:"MDCL002_Safety_Data_Sheet.pdf",size:1876543,type:"application/pdf",uploadDate:new Date("2024-01-12"),uploader:"Safety Team"},{id:6,name:"Degreaser_Performance_Analysis.xlsx",size:567890,type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",uploadDate:new Date("2024-01-08"),uploader:"Lab Team"},{id:7,name:"EPA_Compliance_Certificate.pdf",size:234567,type:"application/pdf",uploadDate:new Date("2024-01-06"),uploader:"Compliance Team"},{id:8,name:"Customer_Usage_Guidelines.docx",size:456789,type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",uploadDate:new Date("2024-01-04"),uploader:"Technical Support"}],INDL003:[{id:9,name:"INDL003_Safety_Data_Sheet.pdf",size:3245612,type:"application/pdf",uploadDate:new Date("2024-01-05"),uploader:"Safety Team"},{id:10,name:"Industrial_Solvent_Safety_Protocol.docx",size:987654,type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",uploadDate:new Date("2024-01-03"),uploader:"Safety Team"},{id:11,name:"Lab_Test_Results_Batch_2024_001.xlsx",size:234567,type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",uploadDate:new Date("2024-01-01"),uploader:"Lab Team"},{id:12,name:"Hazmat_Transportation_Guide.pdf",size:1234567,type:"application/pdf",uploadDate:new Date("2023-12-28"),uploader:"Logistics Team"},{id:13,name:"Solvent_Storage_Requirements.pdf",size:654321,type:"application/pdf",uploadDate:new Date("2023-12-25"),uploader:"Facilities Team"}]})[I]||[])(e),Z=I=>{p(M=>[...M,I]),console.log("Deleted document ID:",I)},R=U.filter(I=>!m.includes(I.id)),V=I=>{const M=Array.from(I).map(J=>({id:Date.now()+Math.random(),file:J,name:J.name,size:J.size,type:J.type,uploadDate:new Date,formulaId:e}));a(J=>[...J,...M]),console.log("Uploading files for formula:",e,M)},G=I=>{I.preventDefault(),l(!0)},H=I=>{I.preventDefault(),l(!1)},K=I=>{I.preventDefault(),l(!1);const M=I.dataTransfer.files;M.length>0&&V(M)},ee=I=>{I.target.files.length>0&&V(I.target.files)},ae=I=>{a(M=>M.filter(J=>J.id!==I))},ge=I=>{if(I===0)return"0 Bytes";const M=1024,J=["Bytes","KB","MB","GB"],de=Math.floor(Math.log(I)/Math.log(M));return parseFloat((I/Math.pow(M,de)).toFixed(2))+" "+J[de]},xe=I=>I.startsWith("image/")?i.jsx(lb,{className:"h-5 w-5 text-blue-400"}):i.jsx(of,{className:"h-5 w-5 text-slate-400"}),Me=async()=>{if(s)try{if(d){const I=await pS(h.id,d);I&&(f(I),console.log("Formula saved successfully:",I))}console.log("Deleted documents:",m),n(!1),N(!1),_(""),A(!1),D("")}catch(I){console.error("Error saving formula:",I)}else u({name:h.name,totalCost:h.totalCost,finalSalePriceDrum:h.finalSalePriceDrum,finalSalePriceTote:h.finalSalePriceTote,ingredients:[...h.ingredients]}),n(!0),Ze()},Ze=async()=>{try{const I=await wa();S(I)}catch(I){console.error("Error loading raw materials:",I)}},We=j.filter(I=>I.materialName.toLowerCase().includes(C.toLowerCase())||I.supplierName.toLowerCase().includes(C.toLowerCase())||I.casNumber.toLowerCase().includes(C.toLowerCase())),at=I=>{const M={name:I.materialName,percentage:0,cost:I.supplierCost||0};u(J=>({...J,ingredients:[...J.ingredients,M]})),_(""),N(!1)},ht=async I=>{A(!0),D("");try{const M=await uf.generateResponse(`Add ${I} to my raw materials database`,null,[]);if(D(M.response||M),M.materialAdded&&M.materialData){const J=await wa();S(J);const de=M.materialData;at(de),_(""),setTimeout(()=>{D(""),A(!1)},3e3)}else setTimeout(()=>{A(!1)},5e3)}catch(M){console.error("Error adding material with AI:",M),D("❌ Failed to add material with AI. Please try again."),setTimeout(()=>{A(!1)},5e3)}},Pe=(I,M)=>{console.log("Field change:",I,M),u(J=>({...J,[I]:M}))},St=(I,M,J)=>{u(de=>({...de,ingredients:de.ingredients.map((Ee,W)=>W===I?{...Ee,[M]:J}:Ee)}))},Bt=I=>{u(M=>({...M,ingredients:M.ingredients.filter((J,de)=>de!==I)}))},it=async()=>{try{await yS(h.id)?t("/formulas"):console.error("Failed to delete formula")}catch(I){console.error("Error deleting formula:",I)}k(!1)};return i.jsx($e,{children:i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(_e,{onClick:()=>t("/formulas"),className:"bg-slate-700 hover:bg-slate-600 p-2",children:i.jsx(Et,{className:"h-4 w-4"})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Fs,{className:"h-8 w-8 text-blue-500"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Formula Details"})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[s&&i.jsxs(_e,{onClick:()=>k(!0),className:"bg-red-600 hover:bg-red-700 flex items-center space-x-2",children:[i.jsx(ba,{className:"h-4 w-4"}),i.jsx("span",{children:"Delete Formula"})]}),i.jsxs(_e,{onClick:Me,className:`${s?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:[i.jsx(Fu,{className:"h-4 w-4 mr-2"}),s?"Save Changes":"Edit Formula"]})]})]}),i.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6",children:[s&&d?i.jsx("input",{type:"text",value:d.name,onChange:I=>Pe("name",I.target.value),className:"text-2xl font-semibold text-slate-100 mb-6 bg-slate-700 border border-slate-600 rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"}):i.jsx("h2",{className:"text-2xl font-semibold text-slate-100 mb-6",children:(d==null?void 0:d.name)||h.name}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Formula ID"}),i.jsx("div",{className:"text-slate-200 font-medium",children:h.id})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Total Cost"}),s&&d?i.jsx("input",{type:"number",step:"0.01",value:d.totalCost,onChange:I=>Pe("totalCost",parseFloat(I.target.value)||0),className:"w-full bg-slate-700 border border-slate-600 rounded-md px-3 py-2 text-slate-200 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500"}):i.jsxs("div",{className:"text-slate-200 font-medium",children:["$",((d==null?void 0:d.totalCost)||h.totalCost).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Final Sale Price (Drum)"}),s&&d?i.jsx("input",{type:"number",step:"0.01",value:d.finalSalePriceDrum,onChange:I=>Pe("finalSalePriceDrum",parseFloat(I.target.value)||0),className:"w-full bg-slate-700 border border-slate-600 rounded-md px-3 py-2 text-slate-200 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500"}):i.jsxs("div",{className:"text-slate-200 font-medium",children:["$",((d==null?void 0:d.finalSalePriceDrum)||h.finalSalePriceDrum).toFixed(2)]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Final Sale Price (Tote)"}),s&&d?i.jsx("input",{type:"number",step:"0.01",value:d.finalSalePriceTote,onChange:I=>Pe("finalSalePriceTote",parseFloat(I.target.value)||0),className:"w-full bg-slate-700 border border-slate-600 rounded-md px-3 py-2 text-slate-200 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500"}):i.jsxs("div",{className:"text-slate-200 font-medium",children:["$",((d==null?void 0:d.finalSalePriceTote)||h.finalSalePriceTote).toFixed(2)]})]})]}),i.jsxs("div",{className:"border-t border-slate-700 pt-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsx("h3",{className:"text-lg font-medium text-slate-200",children:"Ingredients"}),s&&i.jsxs("button",{onClick:()=>N(!P),className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors text-sm",children:[i.jsx(dn,{className:"h-4 w-4"}),i.jsx("span",{children:"Add Ingredient"})]})]}),s&&P&&i.jsxs("div",{className:"mb-6 p-4 bg-slate-750 rounded-lg border border-slate-600",children:[i.jsx("h4",{className:"text-md font-medium text-slate-200 mb-3",children:"Add Ingredient from Raw Materials"}),i.jsxs("div",{className:"relative mb-4",children:[i.jsx(va,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-4 w-4 text-slate-400"}),i.jsx("input",{type:"text",value:C,onChange:I=>_(I.target.value),className:"w-full pl-10 pr-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Search raw materials by name, supplier, or CAS number..."})]}),C&&i.jsxs("div",{className:"border border-slate-600 rounded-lg",children:[L&&E&&i.jsx("div",{className:"p-3 bg-blue-900/20 border-b border-slate-600",children:i.jsxs("div",{className:"flex items-start space-x-2",children:[i.jsx(oa,{className:"h-4 w-4 text-blue-400 mt-0.5 flex-shrink-0"}),i.jsx("div",{className:"text-sm text-slate-300",children:E})]})}),i.jsxs("div",{className:"max-h-48 overflow-y-auto",children:[We.slice(0,8).map(I=>i.jsxs("button",{onClick:()=>at(I),className:"w-full p-3 text-left hover:bg-slate-700 border-b border-slate-600 last:border-b-0 transition-colors",disabled:L,children:[i.jsx("div",{className:"font-medium text-slate-200",children:I.materialName}),i.jsxs("div",{className:"text-sm text-slate-400",children:[I.supplierName," • $",I.supplierCost?I.supplierCost.toFixed(2):"0.00","/unit • ",I.casNumber]})]},I.id)),We.length>8&&!L&&i.jsx("div",{className:"p-2 text-slate-400 text-center text-xs bg-slate-750",children:"Showing first 8 results. Refine search for more specific results."}),We.length===0&&C&&!L&&i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"text-center text-slate-400 mb-4",children:[i.jsx(va,{className:"h-8 w-8 mx-auto mb-2 opacity-50"}),i.jsxs("p",{className:"text-sm",children:['No materials found for "',i.jsx("span",{className:"font-medium",children:C}),'"']})]}),i.jsxs("button",{onClick:()=>ht(C),className:"w-full flex items-center justify-center space-x-2 p-3 bg-gradient-to-r from-blue-600 to-purple-600 text-white rounded-lg hover:from-blue-700 hover:to-purple-700 transition-all duration-200 transform hover:scale-105",children:[i.jsx(ub,{className:"h-4 w-4"}),i.jsxs("span",{className:"font-medium",children:['Add "',C,'" with AI']}),i.jsx(oa,{className:"h-4 w-4"})]}),i.jsx("p",{className:"text-xs text-slate-500 text-center mt-2",children:"AI will research and add this chemical with complete specifications"})]}),L&&i.jsxs("div",{className:"p-4 text-center",children:[i.jsxs("div",{className:"flex items-center justify-center space-x-2 text-blue-400",children:[i.jsx(oa,{className:"h-5 w-5 animate-pulse"}),i.jsxs("span",{className:"text-sm font-medium",children:['AI is researching "',C,'"...']})]}),i.jsx("div",{className:"mt-2 text-xs text-slate-500",children:"This may take a few seconds while we gather chemical data"})]})]})]}),!C&&i.jsxs("div",{className:"text-slate-400 text-sm text-center py-4",children:["Start typing to search through ",j.length," available raw materials"]})]}),i.jsx("div",{className:"overflow-x-auto scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-800",children:i.jsx("div",{className:"flex space-x-4 pb-2 min-w-max",children:((d==null?void 0:d.ingredients)||h.ingredients).map((I,M)=>i.jsxs("div",{className:"flex-shrink-0 bg-slate-700 rounded-lg border border-slate-600 p-4 w-64 relative",children:[s&&d&&i.jsx("button",{onClick:()=>Bt(M),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold transition-colors z-10 shadow-lg",title:"Delete ingredient",children:i.jsx(ut,{className:"h-3 w-3"})}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Ingredient"}),s&&d?i.jsx("input",{type:"text",value:I.name,onChange:J=>St(M,"name",J.target.value),className:"w-full bg-slate-600 border border-slate-500 rounded-md px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingredient name"}):i.jsx("div",{className:"text-slate-200 font-medium text-sm",children:I.name})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Percentage"}),s&&d?i.jsxs("div",{className:"flex items-center",children:[i.jsx("input",{type:"number",step:"0.1",value:I.percentage,onChange:J=>St(M,"percentage",parseFloat(J.target.value)||0),className:"w-full bg-slate-600 border border-slate-500 rounded-md px-2 py-1 text-slate-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),i.jsx("span",{className:"text-slate-300 ml-1 text-sm",children:"%"})]}):i.jsxs("div",{className:"text-slate-300 font-medium text-sm",children:[I.percentage,"%"]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Cost"}),s&&d?i.jsxs("div",{className:"flex items-center",children:[i.jsx("span",{className:"text-slate-300 mr-1 text-sm",children:"$"}),i.jsx("input",{type:"number",step:"0.01",value:I.cost,onChange:J=>St(M,"cost",parseFloat(J.target.value)||0),className:"w-full bg-slate-600 border border-slate-500 rounded-md px-2 py-1 text-slate-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}):i.jsxs("div",{className:"text-slate-300 font-medium text-sm",children:["$",I.cost.toFixed(2)]})]})]})]})]},M))})}),i.jsx("div",{className:"text-xs text-slate-500 mt-2 text-center",children:"← Scroll horizontally to view all ingredients →"})]})]}),i.jsxs("div",{className:"flex space-x-4",children:[i.jsx(_e,{className:"bg-slate-700 hover:bg-slate-600",children:"Export Data"}),i.jsx(_e,{className:"bg-green-600 hover:bg-green-700",children:"Generate Report"}),i.jsx(_e,{className:"bg-orange-600 hover:bg-orange-700",children:"Duplicate Formula"})]}),i.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6",children:[i.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-6",children:"Documents & Files"}),R.length>0&&i.jsxs("div",{className:"mb-8",children:[i.jsxs("h4",{className:"text-md font-medium text-slate-200 mb-4",children:["Existing Documents (",R.length,")"]}),i.jsx("div",{className:"space-y-2",children:R.map(I=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700 rounded-lg border border-slate-600",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[xe(I.type),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-slate-200",children:I.name}),i.jsxs("div",{className:"text-xs text-slate-400",children:[ge(I.size)," • Uploaded ",I.uploadDate.toLocaleDateString()," by ",I.uploader]})]})]}),i.jsx("div",{className:"flex items-center space-x-2",children:i.jsx("button",{onClick:M=>{M.stopPropagation(),s?Z(I.id):console.log("Download existing file:",I.name)},className:`p-1 transition-colors ${s?"text-slate-400 hover:text-red-400":"text-slate-400 hover:text-blue-400"}`,title:s?"Delete":"Download",children:s?i.jsx(ut,{className:"h-4 w-4"}):i.jsx(P0,{className:"h-4 w-4"})})})]},I.id))}),i.jsx("div",{className:"border-t border-slate-600 my-6"})]}),i.jsxs("div",{children:[i.jsx("h4",{className:"text-md font-medium text-slate-200 mb-4",children:"Upload New Files"}),i.jsxs("div",{onDragOver:G,onDragLeave:H,onDrop:K,onClick:()=>{var I;return(I=c.current)==null?void 0:I.click()},className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200 ${o?"border-blue-400 bg-blue-400/10":"border-slate-600 hover:border-slate-500 hover:bg-slate-700/50"}`,children:[i.jsx("input",{type:"file",ref:c,onChange:ee,multiple:!0,accept:".pdf,.doc,.docx,.txt,.csv,.xlsx,.xls,.png,.jpg,.jpeg,.gif",className:"hidden"}),i.jsx(hb,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),i.jsx("h4",{className:"text-lg font-medium text-slate-200 mb-2",children:o?"Drop files here":"Drag & drop files here"}),i.jsx("p",{className:"text-slate-400 mb-4",children:"or click to browse files"}),i.jsx("p",{className:"text-sm text-slate-500",children:"Supports: PDF, DOC, DOCX, TXT, CSV, XLSX, XLS, PNG, JPG, JPEG, GIF"})]}),r.length>0&&i.jsxs("div",{className:"mt-6",children:[i.jsxs("h4",{className:"text-md font-medium text-slate-200 mb-3",children:["Uploaded Files (",r.length,")"]}),i.jsx("div",{className:"space-y-2",children:r.map(I=>i.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700 rounded-lg border border-slate-600",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[xe(I.type),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm font-medium text-slate-200",children:I.name}),i.jsxs("div",{className:"text-xs text-slate-400",children:[ge(I.size)," • Uploaded ",I.uploadDate.toLocaleDateString()]})]})]}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("button",{onClick:M=>{M.stopPropagation(),console.log("Download file:",I.name)},className:"p-1 text-slate-400 hover:text-blue-400 transition-colors",title:"Download",children:i.jsx(P0,{className:"h-4 w-4"})}),i.jsx("button",{onClick:M=>{M.stopPropagation(),ae(I.id)},className:"p-1 text-slate-400 hover:text-red-400 transition-colors",title:"Remove",children:i.jsx(ut,{className:"h-4 w-4"})})]})]},I.id))})]})]})]}),b&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 max-w-md mx-4",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("div",{className:"bg-red-100 rounded-full p-2 mr-3",children:i.jsx(ba,{className:"h-6 w-6 text-red-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Delete Formula"})]}),i.jsxs("p",{className:"text-slate-300 mb-6",children:["Are you sure you want to delete formula ",i.jsx("strong",{children:h==null?void 0:h.name}),"? This action cannot be undone."]}),i.jsxs("div",{className:"flex justify-end space-x-3",children:[i.jsx("button",{onClick:()=>k(!1),className:"px-4 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),i.jsx("button",{onClick:it,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})},`formula-${e}`)},HS=({isOpen:t,onClose:e,supplier:s})=>{const[n,r]=w.useState({supplierName:(s==null?void 0:s.supplierName)||"",supplierId:(s==null?void 0:s.supplierId)||"",supplierEmail:(s==null?void 0:s.supplierEmail)||"",supplierContact:(s==null?void 0:s.supplierContact)||"",packagingCode:(s==null?void 0:s.packagingCode)||"",standardCost:(s==null?void 0:s.standardCost)||""}),a=c=>{const{name:d,value:u}=c.target;r(h=>({...h,[d]:u}))},o=c=>{c.preventDefault(),console.log("Updated supplier data:",n),e()},l=()=>{r({supplierName:(s==null?void 0:s.supplierName)||"",supplierId:(s==null?void 0:s.supplierId)||"",supplierEmail:(s==null?void 0:s.supplierEmail)||"",supplierContact:(s==null?void 0:s.supplierContact)||"",packagingCode:(s==null?void 0:s.packagingCode)||"",standardCost:(s==null?void 0:s.standardCost)||""}),e()};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 w-full max-w-md mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Edit Supplier"}),i.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-700 rounded transition-colors",children:i.jsx(ut,{className:"h-5 w-5 text-slate-400"})})]}),i.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Name"}),i.jsx("input",{type:"text",name:"supplierName",value:n.supplierName,onChange:a,placeholder:"Enter supplier name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier ID"}),i.jsx("input",{type:"text",name:"supplierId",value:n.supplierId,onChange:a,placeholder:"Enter supplier ID",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Email"}),i.jsx("input",{type:"email",name:"supplierEmail",value:n.supplierEmail,onChange:a,placeholder:"Enter supplier email",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Contact"}),i.jsx("input",{type:"tel",name:"supplierContact",value:n.supplierContact,onChange:a,placeholder:"Enter contact number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Packaging Code"}),i.jsx("input",{type:"text",name:"packagingCode",value:n.packagingCode,onChange:a,placeholder:"Enter packaging code",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Standard Cost"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"standardCost",value:n.standardCost,onChange:a,placeholder:"Enter standard cost",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})]})}):null},WS=({isOpen:t,onClose:e})=>{const[s,n]=w.useState({supplierName:"",supplierId:"",supplierEmail:"",supplierContact:"",packagingCode:"",standardCost:""}),r=l=>{const{name:c,value:d}=l.target;n(u=>({...u,[c]:d}))},a=l=>{l.preventDefault(),console.log("New supplier data:",s),n({supplierName:"",supplierId:"",supplierEmail:"",supplierContact:"",packagingCode:"",standardCost:""}),e()},o=()=>{n({supplierName:"",supplierId:"",supplierEmail:"",supplierContact:"",packagingCode:"",standardCost:""}),e()};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 w-full max-w-md mx-4",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[i.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Add New Supplier"}),i.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-700 rounded transition-colors",children:i.jsx(ut,{className:"h-5 w-5 text-slate-400"})})]}),i.jsxs("form",{onSubmit:a,className:"p-6 space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Name"}),i.jsx("input",{type:"text",name:"supplierName",value:s.supplierName,onChange:r,placeholder:"Enter supplier name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier ID"}),i.jsx("input",{type:"text",name:"supplierId",value:s.supplierId,onChange:r,placeholder:"Enter supplier ID",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Email"}),i.jsx("input",{type:"email",name:"supplierEmail",value:s.supplierEmail,onChange:r,placeholder:"Enter supplier email",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Contact"}),i.jsx("input",{type:"tel",name:"supplierContact",value:s.supplierContact,onChange:r,placeholder:"Enter contact number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Packaging Code"}),i.jsx("input",{type:"text",name:"packagingCode",value:s.packagingCode,onChange:r,placeholder:"Enter packaging code",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Standard Cost"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"standardCost",value:s.standardCost,onChange:r,placeholder:"Enter standard cost",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[i.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Add Supplier"})]})]})]})}):null},VS=({className:t="w-6 h-6"})=>i.jsx("img",{src:"/chemformation-logo.png",alt:"Chemformation Logo",className:t}),qS=()=>{const t=gt(),[e,s]=w.useState(""),[n,r]=w.useState("all"),[a,o]=w.useState(null),[l,c]=w.useState({x:0,y:0}),[d,u]=w.useState(!1),[h,f]=w.useState(!1),[m,p]=w.useState(!1),[y,x]=w.useState(null),[g,v]=w.useState([]),[b,k]=w.useState(!0),[j,S]=w.useState(null),C=w.useRef({}),[_,P]=w.useState(!1),[N,L]=w.useState("supplierName"),[A,E]=w.useState("asc"),[D,F]=w.useState("all"),[U,Z]=w.useState("all"),[R,V]=w.useState("supplierName"),[G,H]=w.useState("asc"),[K,ee]=w.useState("all"),[ae,ge]=w.useState("all");w.useEffect(()=>{(async()=>{try{k(!0);const ie=await xS();v(ie),S(null)}catch(ie){console.error("Error loading suppliers:",ie),S("Failed to load suppliers")}finally{k(!1)}})()},[]),w.useEffect(()=>{const W=ie=>{_&&!ie.target.closest(".relative")&&P(!1)};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[_]);const xe=W=>{V(W)},Me=()=>{H(G==="asc"?"desc":"asc")},Ze=()=>{L("supplierName"),E("asc"),F("all"),Z("all"),s(""),V("supplierName"),H("asc"),ee("all"),ge("all")},We=()=>{L(R),E(G),F(K),Z(ae),P(!1)},at=()=>{V(N),H(A),ee(D),ge(U),P(!1)},ht=()=>{_?at():(V(N),H(A),ee(D),ge(U),P(!0))},St=[...g.filter(W=>{const ie=W.supplierName.toLowerCase().includes(e.toLowerCase())||W.supplierId.toLowerCase().includes(e.toLowerCase())||W.supplierEmail.toLowerCase().includes(e.toLowerCase())||W.supplierContact.toLowerCase().includes(e.toLowerCase()),Re=D==="all"||(()=>{const Ht=parseFloat(W.standardCost)||0;switch(D){case"low":return Ht<50;case"medium":return Ht>=50&&Ht<200;case"high":return Ht>=200;default:return!0}})(),Je=U==="all"||W.packagingCode===U;return ie&&Re&&Je})].sort((W,ie)=>{let Re,Je;switch(N){case"supplierName":Re=W.supplierName.toLowerCase(),Je=ie.supplierName.toLowerCase();break;case"supplierId":Re=W.supplierId.toLowerCase(),Je=ie.supplierId.toLowerCase();break;case"supplierEmail":Re=W.supplierEmail.toLowerCase(),Je=ie.supplierEmail.toLowerCase();break;case"standardCost":Re=parseFloat(W.standardCost)||0,Je=parseFloat(ie.standardCost)||0;break;case"packagingCode":Re=W.packagingCode.toLowerCase(),Je=ie.packagingCode.toLowerCase();break;case"supplierContact":Re=W.supplierContact.toLowerCase(),Je=ie.supplierContact.toLowerCase();break;default:Re=W.supplierName.toLowerCase(),Je=ie.supplierName.toLowerCase()}return Re<Je?A==="asc"?-1:1:Re>Je?A==="asc"?1:-1:0}),Bt=[...new Set(g.map(W=>W.packagingCode))].filter(Boolean).sort(),it=(W,ie)=>{if(!C.current[ie])return;const Re=C.current[ie].getBoundingClientRect(),Je=(W.clientX-Re.left)/Re.width*100,Ht=(W.clientY-Re.top)/Re.height*100;c({x:Je,y:Ht})},I=[{id:"all",label:"All suppliers"},{id:"assigned",label:"Assigned to me"},{id:"created",label:"Created by Me"}],M=W=>{x(W),f(!0)},J=()=>{f(!1),x(null)},de=()=>{p(!0)},Ee=()=>{p(!1)};return b?i.jsx($e,{children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(Et,{className:"h-5 w-5 text-slate-400"})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(dt,{className:"h-8 w-8 text-blue-500"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Suppliers"})]})]}),i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"text-slate-400",children:"Loading suppliers..."})})]})}):j?i.jsx($e,{children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(Et,{className:"h-5 w-5 text-slate-400"})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(dt,{className:"h-8 w-8 text-blue-500"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Suppliers"})]})]}),i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"text-red-400",children:j})})]})}):i.jsx($e,{children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(Et,{className:"h-5 w-5 text-slate-400"})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(dt,{className:"h-8 w-8 text-blue-500"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Suppliers"})]})]}),i.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center space-x-4",children:i.jsx("input",{type:"text",placeholder:"Search by Supplier ID, name, email",value:e,onChange:W=>s(W.target.value),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-80"})}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{className:"p-3 bg-red-600 rounded-full hover:bg-red-500 transition-colors",children:i.jsx(VS,{className:"w-6 h-6"})}),i.jsx("button",{onClick:()=>u(!0),className:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors",title:"Upload to Dropbox",children:i.jsx("svg",{className:"w-5 h-5 text-slate-300",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})})})]})]})}),i.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex space-x-0",children:I.map(W=>i.jsxs("button",{ref:ie=>C.current[W.id]=ie,onClick:()=>r(W.id),onMouseEnter:()=>o(W.id),onMouseLeave:()=>o(null),onMouseMove:ie=>it(ie,W.id),className:`relative px-6 py-2 transition-all duration-300 ease-out ${n===W.id?"bg-slate-600 text-slate-100":"bg-slate-700 text-slate-400 hover:text-slate-200 hover:bg-slate-650"} ${W.id==="all"?"rounded-l-lg":W.id==="created"?"rounded-r-lg":""}`,style:{transform:a===W.id?"scale(1.05)":"scale(1)",transition:"transform 0.2s ease-out"},children:[i.jsx("span",{className:"relative z-10 font-medium",children:W.label}),a===W.id&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-md -z-0",style:{background:`radial-gradient(circle at ${l.x}% ${l.y}%, rgba(59, 130, 246, 0.15), transparent 50%)`}})]},W.id))}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:ht,className:"flex items-center space-x-2 p-2 border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors",children:[i.jsx(Sc,{className:"h-5 w-5 text-slate-300"}),i.jsx("span",{className:"text-sm text-slate-300",children:"Filter & Sort"}),i.jsx(Un,{className:"h-4 w-4 text-slate-300"})]}),_&&i.jsx("div",{className:"absolute right-0 mt-2 w-96 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50",children:i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200",children:"Sort By"}),i.jsxs("button",{onClick:Me,className:"flex items-center space-x-1 px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition-colors",children:[i.jsx("span",{children:G==="asc"?"Ascending":"Descending"}),i.jsx("span",{children:G==="asc"?"↑":"↓"})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"supplierName",label:"Supplier Name"},{key:"supplierId",label:"Supplier ID"},{key:"supplierEmail",label:"Email"},{key:"supplierContact",label:"Contact"},{key:"packagingCode",label:"Packaging Code"},{key:"standardCost",label:"Standard Cost"}].map(W=>i.jsx("button",{onClick:()=>xe(W.key),className:`text-left px-3 py-2 rounded text-sm transition-colors ${R===W.key?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:W.label},W.key))})]}),i.jsx("div",{className:"space-y-4",children:i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Cost"}),i.jsxs("select",{value:K,onChange:W=>ee(W.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[i.jsx("option",{value:"all",children:"All Costs"}),i.jsx("option",{value:"low",children:"Low (< $50)"}),i.jsx("option",{value:"medium",children:"Medium ($50 - $200)"}),i.jsx("option",{value:"high",children:"High (>= $200)"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Packaging"}),i.jsxs("select",{value:ae,onChange:W=>ge(W.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[i.jsx("option",{value:"all",children:"All Packaging"}),Bt.map(W=>i.jsx("option",{value:W,children:W},W))]})]})]})}),i.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-slate-600",children:[i.jsx("button",{onClick:Ze,className:"px-3 py-1 text-xs text-slate-400 hover:text-slate-200 transition-colors",children:"Clear All"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:at,className:"px-4 py-2 text-sm text-slate-300 hover:text-slate-100 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:We,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Apply"})]})]})]})})]}),i.jsxs("button",{onClick:de,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-500 transition-colors",children:[i.jsx(dn,{className:"w-4 h-4 text-white"}),i.jsx("span",{className:"text-sm text-white font-medium",children:"Add Supplier"})]})]})]})}),i.jsx("div",{className:"space-y-6",children:i.jsx("div",{className:"bg-slate-800 rounded-lg overflow-hidden border border-slate-700",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-750 border-b border-slate-700",children:[i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Name"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier ID"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Email"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Contact"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Packaging code"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Standard Cost"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Actions"})]})}),i.jsx("tbody",{children:St.map((W,ie)=>i.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-750 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:W.supplierName}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:W.supplierId}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:W.supplierEmail}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:W.supplierContact}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:W.packagingCode}),i.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",W.standardCost?W.standardCost.toFixed(2):"0.00"]}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:i.jsx("button",{onClick:Re=>{Re.stopPropagation(),M(W)},className:"p-1 hover:bg-slate-600 rounded transition-colors",title:"Edit supplier",children:i.jsx(df,{className:"h-4 w-4 text-slate-400 hover:text-slate-200"})})})]},`${W.supplierId}-${ie}`))})]})})}),i.jsx(hf,{isOpen:d,onClose:()=>u(!1)}),i.jsx(HS,{isOpen:h,onClose:J,supplier:y}),i.jsx(WS,{isOpen:m,onClose:Ee})]})})},GS=({className:t="w-6 h-6"})=>i.jsx("img",{src:"/chemformation-logo.png",alt:"Chemformation Logo",className:t}),KS=()=>{const t=gt(),[e,s]=w.useState(""),[n,r]=w.useState("all"),[a,o]=w.useState(null),[l,c]=w.useState({x:0,y:0}),[d,u]=w.useState(!1),[h,f]=w.useState(!1),[m,p]=w.useState(!1),[y,x]=w.useState([]),[g,v]=w.useState(!0),[b,k]=w.useState(null),j=w.useRef({}),[S,C]=w.useState(!1),[_,P]=w.useState("materialName"),[N,L]=w.useState("asc"),[A,E]=w.useState("all"),[D,F]=w.useState("all"),[U,Z]=w.useState("all"),[R,V]=w.useState("all"),[G,H]=w.useState("materialName"),[K,ee]=w.useState("asc"),[ae,ge]=w.useState("all"),[xe,Me]=w.useState("all"),[Ze,We]=w.useState("all"),[at,ht]=w.useState("all"),[Pe,St]=w.useState({supplier:"",materialName:"",manufacturer:"",casNumber:"",weightVolume:"",activityPercentage:"",density:"",viscosity:"",cost:"",supplierCost:""}),Bt=async()=>{try{v(!0);const T=await wa();x(T),k(null)}catch(T){console.error("Error loading materials:",T),k("Failed to load raw materials")}finally{v(!1)}};w.useEffect(()=>{Bt()},[]);const it=T=>{console.log("Material added via chat:",T),Bt()};w.useEffect(()=>{const T=Y=>{S&&!Y.target.closest(".relative")&&C(!1)};return document.addEventListener("mousedown",T),()=>document.removeEventListener("mousedown",T)},[S]);const I=T=>{const Y=mb(T.materialName);t(`/raw-materials/${Y}`)},M=T=>{H(T)},J=()=>{ee(K==="asc"?"desc":"asc")},de=()=>{P("materialName"),L("asc"),E("all"),F("all"),Z("all"),V("all"),s(""),H("materialName"),ee("asc"),ge("all"),Me("all"),We("all"),ht("all")},Ee=()=>{P(G),L(K),E(ae),F(xe),Z(Ze),V(at),C(!1)},W=()=>{H(_),ee(N),ge(A),Me(D),We(U),ht(R),C(!1)},ie=()=>{S?W():(H(_),ee(N),ge(A),Me(D),We(U),ht(R),C(!0))},Je=[...y.filter(T=>{const Y=T.materialName.toLowerCase().includes(e.toLowerCase())||T.supplierName.toLowerCase().includes(e.toLowerCase())||T.tradeName.toLowerCase().includes(e.toLowerCase())||T.casNumber.toLowerCase().includes(e.toLowerCase())||T.manufacture.toLowerCase().includes(e.toLowerCase())||T.country.toLowerCase().includes(e.toLowerCase()),oe=A==="all"||T.supplierName===A,Ve=D==="all"||T.physicalForm===D,hn=U==="all"||T.hazardClass===U,io=R==="all"||T.country===R;return Y&&oe&&Ve&&hn&&io})].sort((T,Y)=>{let oe,Ve;switch(_){case"materialName":oe=T.materialName.toLowerCase(),Ve=Y.materialName.toLowerCase();break;case"supplierName":oe=T.supplierName.toLowerCase(),Ve=Y.supplierName.toLowerCase();break;case"supplierCost":oe=parseFloat(T.supplierCost)||0,Ve=parseFloat(Y.supplierCost)||0;break;case"physicalForm":oe=T.physicalForm.toLowerCase(),Ve=Y.physicalForm.toLowerCase();break;case"hazardClass":oe=T.hazardClass.toLowerCase(),Ve=Y.hazardClass.toLowerCase();break;case"country":oe=T.country.toLowerCase(),Ve=Y.country.toLowerCase();break;case"purity":oe=T.purity.toLowerCase(),Ve=Y.purity.toLowerCase();break;case"casNumber":oe=T.casNumber.toLowerCase(),Ve=Y.casNumber.toLowerCase();break;default:oe=T.materialName.toLowerCase(),Ve=Y.materialName.toLowerCase()}return oe<Ve?N==="asc"?-1:1:oe>Ve?N==="asc"?1:-1:0}),Ht=[...new Set(y.map(T=>T.supplierName))].sort(),Pr=[...new Set(y.map(T=>T.physicalForm))].filter(Boolean).sort(),Er=[...new Set(y.map(T=>T.hazardClass))].filter(Boolean).sort(),Ar=[...new Set(y.map(T=>T.country))].filter(Boolean).sort(),Tr=(T,Y)=>{if(!j.current[Y])return;const oe=j.current[Y].getBoundingClientRect(),Ve=(T.clientX-oe.left)/oe.width*100,hn=(T.clientY-oe.top)/oe.height*100;c({x:Ve,y:hn})},Lr=[{id:"all",label:"All Raw Materials"},{id:"assigned",label:"Assigned to me"},{id:"created",label:"Created by Me"}],xt=(T,Y)=>{St(oe=>({...oe,[T]:Y}))},Mr=()=>{f(!0)},Dr=()=>{p(!0)},O=()=>{console.log("Creating new material:",Pe),St({supplier:"",materialName:"",manufacturer:"",casNumber:"",weightVolume:"",activityPercentage:"",density:"",viscosity:"",cost:"",supplierCost:""}),p(!1),f(!1)},se=()=>{p(!1),f(!1),St({supplier:"",materialName:"",manufacturer:"",casNumber:"",weightVolume:"",activityPercentage:"",density:"",viscosity:"",cost:"",supplierCost:""})};return g?i.jsx($e,{onMaterialAdded:it,children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(Et,{className:"h-5 w-5 text-slate-400"})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Is,{className:"h-8 w-8 text-blue-500"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Raw Materials"})]})]}),i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"text-slate-400",children:"Loading raw materials..."})})]})}):b?i.jsx($e,{onMaterialAdded:it,children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(Et,{className:"h-5 w-5 text-slate-400"})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Is,{className:"h-8 w-8 text-blue-500"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Raw Materials"})]})]}),i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsx("div",{className:"text-red-400",children:b})})]})}):i.jsx($e,{onMaterialAdded:it,children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(Et,{className:"h-5 w-5 text-slate-400"})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Is,{className:"h-8 w-8 text-blue-500"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Raw Materials"})]})]}),i.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex items-center space-x-4",children:i.jsx("input",{type:"text",placeholder:"Search by Txn Id, Material Name, CAS Nu...",value:e,onChange:T=>s(T.target.value),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-80"})}),i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{className:"p-3 bg-red-600 rounded-full hover:bg-red-500 transition-colors",children:i.jsx(GS,{className:"w-6 h-6"})}),i.jsx("button",{onClick:()=>u(!0),className:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors",title:"Upload to Dropbox",children:i.jsx("svg",{className:"w-5 h-5 text-slate-300",viewBox:"0 0 24 24",fill:"currentColor",children:i.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})})})]})]})}),i.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsx("div",{className:"flex space-x-0",children:Lr.map(T=>i.jsxs("button",{ref:Y=>j.current[T.id]=Y,onClick:()=>r(T.id),onMouseEnter:()=>o(T.id),onMouseLeave:()=>o(null),onMouseMove:Y=>Tr(Y,T.id),className:`relative px-6 py-2 transition-all duration-300 ease-out ${n===T.id?"bg-slate-600 text-slate-100":"bg-slate-700 text-slate-400 hover:text-slate-200 hover:bg-slate-650"} ${T.id==="all"?"rounded-l-lg":T.id==="created"?"rounded-r-lg":""}`,style:{transform:a===T.id?"scale(1.05)":"scale(1)",transition:"transform 0.2s ease-out"},children:[i.jsx("span",{className:"relative z-10 font-medium",children:T.label}),a===T.id&&i.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-md -z-0",style:{background:`radial-gradient(circle at ${l.x}% ${l.y}%, rgba(59, 130, 246, 0.15), transparent 50%)`}})]},T.id))}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:ie,className:"flex items-center space-x-2 p-2 border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors",children:[i.jsx(Sc,{className:"h-5 w-5 text-slate-300"}),i.jsx("span",{className:"text-sm text-slate-300",children:"Filter & Sort"}),i.jsx(Un,{className:"h-4 w-4 text-slate-300"})]}),S&&i.jsx("div",{className:"absolute right-0 mt-2 w-96 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50",children:i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200",children:"Sort By"}),i.jsxs("button",{onClick:J,className:"flex items-center space-x-1 px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition-colors",children:[i.jsx("span",{children:K==="asc"?"Ascending":"Descending"}),i.jsx("span",{children:K==="asc"?"↑":"↓"})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"materialName",label:"Material Name"},{key:"supplierName",label:"Supplier"},{key:"supplierCost",label:"Cost"},{key:"physicalForm",label:"Physical Form"},{key:"hazardClass",label:"Hazard Class"},{key:"country",label:"Country"},{key:"purity",label:"Purity"},{key:"casNumber",label:"CAS Number"}].map(T=>i.jsx("button",{onClick:()=>M(T.key),className:`text-left px-3 py-2 rounded text-sm transition-colors ${G===T.key?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:T.label},T.key))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Supplier"}),i.jsxs("select",{value:ae,onChange:T=>ge(T.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[i.jsx("option",{value:"all",children:"All Suppliers"}),Ht.map(T=>i.jsx("option",{value:T,children:T},T))]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Form"}),i.jsxs("select",{value:xe,onChange:T=>Me(T.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[i.jsx("option",{value:"all",children:"All Forms"}),Pr.map(T=>i.jsx("option",{value:T,children:T},T))]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Hazard"}),i.jsxs("select",{value:Ze,onChange:T=>We(T.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[i.jsx("option",{value:"all",children:"All Hazard Classes"}),Er.map(T=>i.jsx("option",{value:T,children:T},T))]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Country"}),i.jsxs("select",{value:at,onChange:T=>ht(T.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[i.jsx("option",{value:"all",children:"All Countries"}),Ar.map(T=>i.jsx("option",{value:T,children:T},T))]})]})]})]}),i.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-slate-600",children:[i.jsx("button",{onClick:de,className:"px-3 py-1 text-xs text-slate-400 hover:text-slate-200 transition-colors",children:"Clear All"}),i.jsxs("div",{className:"flex space-x-2",children:[i.jsx("button",{onClick:W,className:"px-4 py-2 text-sm text-slate-300 hover:text-slate-100 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:Ee,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Apply"})]})]})]})})]}),i.jsxs(_e,{onClick:Mr,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[i.jsx(dn,{className:"w-4 h-4"}),i.jsx("span",{children:"Add Material"})]})]})]})}),i.jsx("div",{className:"space-y-6",children:i.jsx("div",{className:"bg-slate-800 rounded-lg overflow-hidden border border-slate-700",children:i.jsxs("table",{className:"w-full",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"bg-slate-750 border-b border-slate-700",children:[i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Material Name"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Name"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Trade Name"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"CAS Number"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Manufacture"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Country"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Cost"})]})}),i.jsx("tbody",{children:Je.map((T,Y)=>i.jsxs("tr",{onClick:()=>I(T),className:"border-b border-slate-700 hover:bg-slate-750 transition-colors cursor-pointer",children:[i.jsx("td",{className:"px-6 py-4 text-sm text-blue-400 hover:text-blue-300 cursor-pointer",children:T.materialName}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:T.supplierName}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:T.tradeName}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:T.casNumber}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:T.manufacture}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:T.country}),i.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",T.supplierCost?T.supplierCost.toFixed(2):"0.00"]})]},`${T.id}-${Y}`))})]})})}),i.jsx(hf,{isOpen:d,onClose:()=>u(!1)}),h&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto border border-slate-700",children:[i.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 rounded-t-lg flex items-center justify-between",children:[i.jsx("h2",{className:"text-xl font-semibold",children:"Raw Materials"}),i.jsx("button",{onClick:se,className:"text-white hover:text-slate-200 transition-colors",children:i.jsx(ut,{className:"h-6 w-6"})})]}),i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Supplier *"}),i.jsx("input",{type:"text",value:Pe.supplier,onChange:T=>xt("supplier",T.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter supplier name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Material Name *"}),i.jsx("input",{type:"text",value:Pe.materialName,onChange:T=>xt("materialName",T.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter material name"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Manufacturer"}),i.jsx("input",{type:"text",value:Pe.manufacturer,onChange:T=>xt("manufacturer",T.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter manufacturer"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"CAS Number"}),i.jsx("input",{type:"text",value:Pe.casNumber,onChange:T=>xt("casNumber",T.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter CAS number"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Weight/Volume (lbs/gallon)"}),i.jsx("input",{type:"number",step:"0.01",value:Pe.weightVolume,onChange:T=>xt("weightVolume",T.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"% Activity"}),i.jsx("input",{type:"number",step:"0.1",value:Pe.activityPercentage,onChange:T=>xt("activityPercentage",T.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Density"}),i.jsx("input",{type:"number",step:"0.01",value:Pe.density,onChange:T=>xt("density",T.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Viscosity"}),i.jsx("input",{type:"text",value:Pe.viscosity,onChange:T=>xt("viscosity",T.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Text"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Cost ($USD)"}),i.jsx("input",{type:"number",step:"0.0001",value:Pe.cost,onChange:T=>xt("cost",T.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.0000"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Supplier Cost"}),i.jsx("input",{type:"number",step:"0.01",value:Pe.supplierCost,onChange:T=>xt("supplierCost",T.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]})]})]}),i.jsx("div",{className:"mt-8 flex justify-end",children:i.jsx("button",{onClick:Dr,className:"px-6 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-md font-medium transition-colors",children:"SUBMIT"})})]})]})}),m&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-60",children:i.jsx("div",{className:"bg-slate-800 rounded-lg shadow-xl max-w-md w-full mx-4 border border-slate-700",children:i.jsxs("div",{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-600 bg-opacity-20 rounded-full flex items-center justify-center",children:i.jsx(cb,{className:"h-6 w-6 text-blue-400"})}),i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"RAW MATERIALS"})]}),i.jsx("p",{className:"text-slate-300 mb-6",children:"Shall we go ahead and create this transaction?"}),i.jsxs("div",{className:"flex justify-end space-x-3",children:[i.jsx("button",{onClick:se,className:"px-4 py-2 text-slate-400 hover:text-slate-200 font-medium transition-colors",children:"Cancel"}),i.jsx("button",{onClick:O,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium transition-colors",children:"CONFIRM"})]})]})})})]})})},YS=({isOpen:t,onClose:e,onSave:s,onDelete:n,material:r})=>{const[a,o]=w.useState({materialName:"",supplierName:"",manufacture:"",tradeName:"",casNumber:"",weightVolume:"",density:"",supplierCost:"",country:"",description:"",physicalForm:"",purity:"",storageConditions:"",hazardClass:"",shelfLife:""}),[l,c]=w.useState(!1);w.useEffect(()=>{r&&o({materialName:r.materialName||"",supplierName:r.supplierName||"",manufacture:r.manufacture||"",tradeName:r.tradeName||"",casNumber:r.casNumber||"",weightVolume:r.weightVolume||"",density:r.density||"",supplierCost:r.supplierCost||"",country:r.country||"",description:r.description||"",physicalForm:r.physicalForm||"",purity:r.purity||"",storageConditions:r.storageConditions||"",hazardClass:r.hazardClass||"",shelfLife:r.shelfLife||""})},[r]);const d=m=>{const{name:p,value:y}=m.target;o(x=>({...x,[p]:y}))},u=m=>{m.preventDefault(),s?s(a):(console.log("Updated material data:",a),e())},h=()=>{n&&r&&(n(r.id),c(!1),e())},f=()=>{r&&o({materialName:r.materialName||"",supplierName:r.supplierName||"",manufacture:r.manufacture||"",tradeName:r.tradeName||"",casNumber:r.casNumber||"",weightVolume:r.weightVolume||"",density:r.density||"",supplierCost:r.supplierCost||"",country:r.country||"",description:r.description||"",physicalForm:r.physicalForm||"",purity:r.purity||"",storageConditions:r.storageConditions||"",hazardClass:r.hazardClass||"",shelfLife:r.shelfLife||""}),c(!1),e()};return t?i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:"Edit Raw Material"}),i.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-700 rounded transition-colors",children:i.jsx(ut,{className:"h-5 w-5 text-slate-400"})})]}),i.jsxs("form",{onSubmit:u,className:"p-6",children:[i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Basic Information"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Material Name *"}),i.jsx("input",{type:"text",name:"materialName",value:a.materialName,onChange:d,placeholder:"Enter material name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Trade Name"}),i.jsx("input",{type:"text",name:"tradeName",value:a.tradeName,onChange:d,placeholder:"Enter trade name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Name"}),i.jsx("input",{type:"text",name:"supplierName",value:a.supplierName,onChange:d,placeholder:"Enter supplier name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Manufacturer"}),i.jsx("input",{type:"text",name:"manufacture",value:a.manufacture,onChange:d,placeholder:"Enter manufacturer",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Country"}),i.jsx("input",{type:"text",name:"country",value:a.country,onChange:d,placeholder:"Enter country",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Technical Properties"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"CAS Number"}),i.jsx("input",{type:"text",name:"casNumber",value:a.casNumber,onChange:d,placeholder:"Enter CAS number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Physical Form"}),i.jsx("input",{type:"text",name:"physicalForm",value:a.physicalForm,onChange:d,placeholder:"e.g., Liquid, Powder, Crystals",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Purity"}),i.jsx("input",{type:"text",name:"purity",value:a.purity,onChange:d,placeholder:"e.g., 99.5%, Technical Grade",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Weight/Volume (lbs/gallon)"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"weightVolume",value:a.weightVolume,onChange:d,placeholder:"0.00",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Density"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"density",value:a.density,onChange:d,placeholder:"0.00",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Cost ($)"}),i.jsx("input",{type:"number",step:"0.01",min:"0",name:"supplierCost",value:a.supplierCost,onChange:d,placeholder:"0.00",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Safety & Notes"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Hazard Class"}),i.jsx("input",{type:"text",name:"hazardClass",value:a.hazardClass,onChange:d,placeholder:"e.g., Corrosive, Non-hazardous",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Shelf Life"}),i.jsx("input",{type:"text",name:"shelfLife",value:a.shelfLife,onChange:d,placeholder:"e.g., 24 months, 5 years",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Storage Conditions"}),i.jsx("textarea",{name:"storageConditions",value:a.storageConditions,onChange:d,placeholder:"Enter storage requirements...",rows:3,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Description & Notes"}),i.jsx("textarea",{name:"description",value:a.description,onChange:d,placeholder:"Enter detailed description, usage notes, or special handling instructions...",rows:5,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"}),i.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:[a.description.length," characters"]})]})]})]}),i.jsxs("div",{className:"flex justify-between items-center pt-6 mt-6 border-t border-slate-700",children:[i.jsx("div",{children:n&&i.jsxs("button",{type:"button",onClick:()=>c(!0),className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors flex items-center space-x-2",children:[i.jsx(ba,{className:"h-4 w-4"}),i.jsx("span",{children:"Delete Material"})]})}),i.jsxs("div",{className:"flex space-x-3",children:[i.jsx("button",{type:"button",onClick:f,className:"px-6 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),i.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})]}),l&&i.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:i.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 max-w-md mx-4",children:[i.jsxs("div",{className:"flex items-center mb-4",children:[i.jsx("div",{className:"bg-red-100 rounded-full p-2 mr-3",children:i.jsx(ba,{className:"h-6 w-6 text-red-600"})}),i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Delete Material"})]}),i.jsxs("p",{className:"text-slate-300 mb-6",children:["Are you sure you want to delete ",i.jsx("strong",{children:r==null?void 0:r.materialName}),"? This action cannot be undone."]}),i.jsxs("div",{className:"flex justify-end space-x-3",children:[i.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),i.jsx("button",{onClick:h,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}):null},JS=()=>{const t=gt(),{materialId:e}=Nv(),[s,n]=w.useState(!1),[r,a]=w.useState(null),[o,l]=w.useState(!0),[c,d]=w.useState(null);if(w.useEffect(()=>{(async()=>{try{l(!0);const x=(await wa()).find(g=>mb(g.materialName)===e);x?a(x):d("Material not found")}catch(y){console.error("Error loading material:",y),d("Failed to load material")}finally{l(!1)}})()},[e]),o)return i.jsx($e,{children:i.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:i.jsx("div",{className:"text-center",children:i.jsx("div",{className:"text-slate-400",children:"Loading material..."})})})});if(c||!r)return i.jsx($e,{children:i.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-4",children:c||"Material Not Found"}),i.jsx(_e,{onClick:()=>t("/raw-materials"),children:"Back to Raw Materials"})]})})});const u=()=>{n(!0)},h=()=>{n(!1)},f=async p=>{try{const y=await fS(r.id,p);y&&a(y),n(!1)}catch(y){console.error("Error updating material:",y)}},m=async p=>{try{await vS(p)?t("/raw-materials"):console.error("Failed to delete material")}catch(y){console.error("Error deleting material:",y)}};return i.jsx($e,{children:i.jsxs("div",{className:"min-h-screen bg-slate-900 p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-8",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsxs(_e,{variant:"secondary",onClick:()=>t("/raw-materials"),className:"flex items-center space-x-2",children:[i.jsx(Et,{className:"h-4 w-4"}),i.jsx("span",{children:"Back to Raw Materials"})]}),i.jsx("h1",{className:"text-2xl font-bold text-slate-100",children:"Raw Material Details"})]}),i.jsxs(_e,{onClick:u,className:"flex items-center space-x-2",children:[i.jsx(df,{className:"h-4 w-4"}),i.jsx("span",{children:"Edit Material"})]})]}),i.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[i.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 rounded-lg border border-slate-600 p-8 shadow-xl",children:i.jsxs("div",{className:"flex items-start justify-between",children:[i.jsxs("div",{children:[i.jsx("h2",{className:"text-4xl font-bold text-slate-100 mb-3",children:r.materialName}),i.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[i.jsx("span",{className:"px-3 py-1 bg-blue-600 text-white text-sm font-medium rounded-full",children:r.tradeName}),i.jsxs("span",{className:"px-3 py-1 bg-slate-600 text-slate-200 text-sm rounded-full",children:["CAS: ",r.casNumber]})]})]}),i.jsxs("div",{className:"text-right",children:[i.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Supplier Cost"}),i.jsxs("p",{className:"text-3xl font-bold text-green-400",children:["$",r.supplierCost?r.supplierCost.toFixed(2):"0.00"]})]})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 shadow-lg",children:[i.jsxs("h3",{className:"text-xl font-semibold text-slate-200 mb-6 flex items-center",children:[i.jsx("div",{className:"w-2 h-6 bg-blue-500 rounded mr-3"}),"Technical Information"]}),i.jsx("div",{className:"space-y-6",children:i.jsx("div",{className:"grid grid-cols-1 gap-4",children:i.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-4",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-3",children:"Chemical Properties"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-400",children:"Physical Form:"}),i.jsx("span",{className:"text-slate-200",children:r.physicalForm})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-400",children:"Purity:"}),i.jsx("span",{className:"text-slate-200",children:r.purity})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-400",children:"Weight/Volume:"}),i.jsxs("span",{className:"text-slate-200",children:[r.weightVolume," lbs/gallon"]})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-400",children:"Density:"}),i.jsx("span",{className:"text-slate-200",children:r.density})]})]})]})})})]}),i.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 shadow-lg",children:[i.jsxs("h3",{className:"text-xl font-semibold text-slate-200 mb-6 flex items-center",children:[i.jsx("div",{className:"w-2 h-6 bg-green-500 rounded mr-3"}),"Supplier & Safety"]}),i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-4",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-3",children:"Supplier Information"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-400",children:"Supplier:"}),i.jsx("span",{className:"text-slate-200",children:r.supplierName})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-400",children:"Manufacturer:"}),i.jsx("span",{className:"text-slate-200",children:r.manufacture})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-400",children:"Country:"}),i.jsx("span",{className:"text-slate-200",children:r.country})]})]})]}),i.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-4",children:[i.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-3",children:"Safety & Storage"}),i.jsxs("div",{className:"space-y-2 text-sm",children:[i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-400",children:"Hazard Class:"}),i.jsx("span",{className:"text-slate-200",children:r.hazardClass})]}),i.jsxs("div",{className:"flex justify-between",children:[i.jsx("span",{className:"text-slate-400",children:"Shelf Life:"}),i.jsx("span",{className:"text-slate-200",children:r.shelfLife})]})]}),i.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-600",children:[i.jsx("p",{className:"text-xs text-slate-400",children:"Storage Conditions:"}),i.jsx("p",{className:"text-sm text-slate-200 mt-1",children:r.storageConditions})]})]})]})]})]}),i.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 shadow-lg",children:[i.jsxs("div",{className:"flex items-center mb-6",children:[i.jsx("div",{className:"w-2 h-6 bg-purple-500 rounded mr-3"}),i.jsx("h3",{className:"text-xl font-semibold text-slate-200",children:"Description & Applications"})]}),i.jsx("div",{className:"bg-slate-700/30 rounded-lg border border-slate-600/50 p-6",children:i.jsx("p",{className:"text-slate-200 leading-relaxed",children:r.description})})]})]}),i.jsx(YS,{isOpen:s,onClose:h,onSave:f,onDelete:m,material:r})]})})},QS=({isOpen:t,onClose:e,onSave:s,currentUserEmail:n,isAdminReset:r=!1,targetUserName:a=""})=>{const[o,l]=w.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[c,d]=w.useState({old:!1,new:!1,confirm:!1}),[u,h]=w.useState({}),f=(g,v)=>{l(b=>({...b,[g]:v})),u[g]&&h(b=>({...b,[g]:""}))},m=g=>{d(v=>({...v,[g]:!v[g]}))},p=()=>{const g={};return!r&&!o.oldPassword&&(g.oldPassword="Current password is required"),o.newPassword?o.newPassword.length<6&&(g.newPassword="New password must be at least 6 characters"):g.newPassword="New password is required",o.confirmPassword?o.newPassword!==o.confirmPassword&&(g.confirmPassword="Passwords do not match"):g.confirmPassword="Please confirm your new password",!r&&o.oldPassword===o.newPassword&&(g.newPassword="New password must be different from current password"),h(g),Object.keys(g).length===0},y=()=>{p()&&s({email:n,oldPassword:o.oldPassword,newPassword:o.newPassword})},x=()=>{l({oldPassword:"",newPassword:"",confirmPassword:""}),h({}),d({old:!1,new:!1,confirm:!1}),e()};return t?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:x}),i.jsxs("div",{className:"relative bg-slate-800 rounded-lg shadow-xl w-full max-w-md mx-4 border border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:i.jsx(lf,{className:"h-5 w-5 text-white"})}),i.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:r?`Reset Password for ${a}`:"Change Password"})]}),i.jsx("button",{onClick:x,className:"p-1 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(ut,{className:"h-5 w-5 text-slate-400"})})]}),i.jsxs("div",{className:"p-6 space-y-4",children:[!r&&i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Current Password *"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:c.old?"text":"password",value:o.oldPassword,onChange:g=>f("oldPassword",g.target.value),placeholder:"Enter your current password",className:`w-full px-3 py-2 pr-10 bg-slate-700 border rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.oldPassword?"border-red-500":"border-slate-600"}`}),i.jsx("button",{type:"button",onClick:()=>m("old"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200",children:c.old?i.jsx(dl,{className:"h-4 w-4"}):i.jsx(ul,{className:"h-4 w-4"})})]}),u.oldPassword&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.oldPassword})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"New Password *"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:c.new?"text":"password",value:o.newPassword,onChange:g=>f("newPassword",g.target.value),placeholder:"Enter your new password",className:`w-full px-3 py-2 pr-10 bg-slate-700 border rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.newPassword?"border-red-500":"border-slate-600"}`}),i.jsx("button",{type:"button",onClick:()=>m("new"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200",children:c.new?i.jsx(dl,{className:"h-4 w-4"}):i.jsx(ul,{className:"h-4 w-4"})})]}),u.newPassword&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.newPassword}),i.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Minimum 6 characters"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Confirm New Password *"}),i.jsxs("div",{className:"relative",children:[i.jsx("input",{type:c.confirm?"text":"password",value:o.confirmPassword,onChange:g=>f("confirmPassword",g.target.value),placeholder:"Confirm your new password",className:`w-full px-3 py-2 pr-10 bg-slate-700 border rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.confirmPassword?"border-red-500":"border-slate-600"}`}),i.jsx("button",{type:"button",onClick:()=>m("confirm"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200",children:c.confirm?i.jsx(dl,{className:"h-4 w-4"}):i.jsx(ul,{className:"h-4 w-4"})})]}),u.confirmPassword&&i.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.confirmPassword})]})]}),i.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-slate-700",children:[i.jsx(_e,{variant:"secondary",onClick:x,className:"bg-slate-700 hover:bg-slate-600 text-slate-200",children:"Cancel"}),i.jsx(_e,{onClick:y,className:"bg-blue-600 hover:bg-blue-500 text-white",children:r?"Reset Password":"Change Password"})]})]})]}):null},XS=({isOpen:t,onClose:e,user:s,onSave:n,onDelete:r,currentUserRole:a,onChangePassword:o})=>{const[l,c]=w.useState({name:"",email:"",contact:"",role:"",credentials:"",appAccess:[]}),[d,u]=w.useState(!1),h=j=>j==="NSight Admin"?[{id:"developer-mode",name:"Developer Mode",icon:Ma},{id:"existing-company-mode",name:"Existing Company Mode",icon:nn}]:[{id:"formulas",name:"Formulas",icon:Fs},{id:"raw-materials",name:"Raw Materials",icon:Is},{id:"suppliers",name:"Suppliers",icon:dt}],f=j=>{switch(j){case"Capacity Admin":return"admin/secure pass";case"NSight Admin":return"nsight-admin/enterprise pass";case"Employee":default:return"user/temporary pass"}},m=j=>{switch(j){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}};w.useEffect(()=>{s&&c({name:s.name||"",email:s.email||"",contact:s.contact||"",role:s.role||"Employee",credentials:s.credentials||f(s.role),appAccess:s.appAccess||[]})},[s]),w.useEffect(()=>{if(l.role&&s){const j=m(l.role),S=f(l.role);(JSON.stringify(l.appAccess)!==JSON.stringify(j)||l.credentials!==S)&&c(C=>({...C,appAccess:j,credentials:S}))}},[l.role,s]);const p=(j,S)=>{c(C=>({...C,[j]:S}))},y=j=>{c(S=>({...S,appAccess:S.appAccess.includes(j)?S.appAccess.filter(C=>C!==j):[...S.appAccess,j]}))},x=()=>{n({...s,...l}),e()},g=()=>{window.confirm(`Are you sure you want to delete ${s.name}? This action cannot be undone.`)&&(r(s.id),e())},v=()=>{u(!0)},b=()=>{u(!1)},k=async j=>{try{const S=await o({email:s.email,newPassword:j.newPassword,isAdminReset:!0});S&&S.success?(alert(`Password changed successfully for ${s.name}!`),u(!1)):alert(`Error: ${(S==null?void 0:S.error)||"Unknown error occurred"}`)}catch(S){console.error("Password change error:",S),alert("Error: Failed to change password. Please try again.")}};return t?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:e}),i.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-4xl mx-4 border border-gray-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-slate-100",children:"Edit User"}),i.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(ut,{className:"h-5 w-5 text-gray-400 dark:text-slate-400"})})]}),i.jsxs("div",{className:"p-6",children:[a==="Capacity Admin"&&i.jsx("div",{className:"pb-6 border-b border-slate-700 mb-6",children:i.jsxs(_e,{onClick:v,className:"bg-purple-600 hover:bg-purple-500 text-white flex items-center justify-center space-x-2 py-3 px-6",children:[i.jsx(lf,{className:"w-4 h-4"}),i.jsxs("span",{children:["Change Password for ",s==null?void 0:s.name]})]})}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-slate-100 mb-4",children:"Basic Information"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Name"}),i.jsx("input",{type:"text",value:l.name,onChange:j=>p("name",j.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Email"}),i.jsx("input",{type:"email",value:l.email,onChange:j=>p("email",j.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Contact"}),i.jsx("input",{type:"text",value:l.contact,onChange:j=>p("contact",j.target.value),placeholder:"Phone number",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-slate-100 mb-4",children:"Role & Permissions"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Role & Access Level"}),i.jsxs("select",{value:l.role,onChange:j=>p("role",j.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[i.jsx("option",{value:"Employee",className:"bg-white dark:bg-slate-700 text-gray-900 dark:text-slate-100",children:"Employee"}),i.jsx("option",{value:"Capacity Admin",className:"bg-white dark:bg-slate-700 text-gray-900 dark:text-slate-100",children:"Capacity Admin"}),i.jsx("option",{value:"NSight Admin",className:"bg-white dark:bg-slate-700 text-gray-900 dark:text-slate-100",children:"NSight Admin"})]}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:["Credentials: ",l.credentials]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-3",children:"App Access"}),i.jsx("div",{className:"space-y-3",children:h(l.role).map(j=>{const S=j.icon,C=l.appAccess.includes(j.id);return i.jsxs("button",{onClick:()=>y(j.id),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-all duration-200 ${C?"bg-blue-600 border-blue-500 text-white":"bg-slate-700 border-slate-600 text-slate-300 hover:bg-slate-600"}`,children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-md flex items-center justify-center ${C?"bg-blue-500":"bg-slate-600"}`,children:i.jsx(S,{className:"w-4 h-4"})}),i.jsx("span",{className:"font-medium",children:j.name})]}),C&&i.jsx(br,{className:"w-5 h-5"})]},j.id)})})]})]})]})]}),i.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-slate-700",children:[i.jsxs(_e,{onClick:g,className:"bg-red-600 hover:bg-red-500 text-white flex items-center space-x-2",children:[i.jsx(ba,{className:"w-4 h-4"}),i.jsx("span",{children:"Delete User"})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(_e,{variant:"secondary",onClick:e,className:"bg-slate-700 hover:bg-slate-600 text-slate-200",children:"Cancel"}),i.jsx(_e,{onClick:x,className:"bg-blue-600 hover:bg-blue-500 text-white",children:"Save Changes"})]})]})]}),i.jsx(QS,{isOpen:d,onClose:b,onSave:k,currentUserEmail:s==null?void 0:s.email,isAdminReset:!0,targetUserName:s==null?void 0:s.name})]}):null},ZS=({isOpen:t,onClose:e,onSave:s})=>{const[n,r]=w.useState({name:"",email:"",contact:"",role:"Employee",credentials:"user/temporary pass",appAccess:["formulas"],password:""}),a=[{value:"Employee",label:"Employee",credentials:"user/temporary pass"},{value:"Capacity Admin",label:"Capacity Admin",credentials:"admin/secure pass"},{value:"NSight Admin",label:"NSight Admin",credentials:"nsight-admin/enterprise pass"}],o=m=>m==="NSight Admin"?[{id:"developer-mode",name:"Developer Mode",icon:Ma},{id:"existing-company-mode",name:"Existing Company Mode",icon:nn}]:[{id:"formulas",name:"Formulas",icon:Fs},{id:"raw-materials",name:"Raw Materials",icon:Is},{id:"suppliers",name:"Suppliers",icon:dt}],l=m=>{switch(m){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}},c=m=>{switch(m){case"Capacity Admin":return"admin/secure pass";case"NSight Admin":return"nsight-admin/enterprise pass";case"Employee":default:return"user/temporary pass"}},d=(m,p)=>{r(y=>{const x={...y,[m]:p};return m==="role"&&(x.appAccess=l(p),x.credentials=c(p)),x})},u=m=>{r(p=>({...p,appAccess:p.appAccess.includes(m)?p.appAccess.filter(y=>y!==m):[...p.appAccess,m]}))},h=()=>{if(!n.name.trim()||!n.email.trim()){alert("Name and email are required");return}if(!n.password.trim()){alert("Password is required");return}if(n.password.length<6){alert("Password must be at least 6 characters long");return}const m={id:Date.now(),name:n.name.trim(),email:n.email.trim(),contact:n.contact.trim(),role:n.role,credentials:n.credentials,appAccess:n.appAccess,status:"Active",lastLogin:"Never",password:n.password.trim()};s(m),r({name:"",email:"",contact:"",role:"Employee",credentials:"user/temporary pass",appAccess:["formulas"],password:""}),e()},f=()=>{r({name:"",email:"",contact:"",role:"Employee",credentials:"user/temporary pass",appAccess:["formulas"],password:""}),e()};return t?i.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[i.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:f}),i.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-4xl mx-4 border border-gray-200 dark:border-slate-700",children:[i.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-slate-700",children:[i.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-slate-100",children:"Add User"}),i.jsx("button",{onClick:f,className:"p-1 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(ut,{className:"h-5 w-5 text-gray-400 dark:text-slate-400"})})]}),i.jsx("div",{className:"p-6",children:i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-slate-100 mb-4",children:"Basic Information"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Name *"}),i.jsx("input",{type:"text",value:n.name,onChange:m=>d("name",m.target.value),placeholder:"Enter full name",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Email *"}),i.jsx("input",{type:"email",value:n.email,onChange:m=>d("email",m.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Contact"}),i.jsx("input",{type:"text",value:n.contact,onChange:m=>d("contact",m.target.value),placeholder:"Phone number (optional)",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Password *"}),i.jsx("input",{type:"password",value:n.password,onChange:m=>d("password",m.target.value),placeholder:"Create password for this user",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),i.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Minimum 6 characters"})]})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-slate-100 mb-4",children:"Role & Permissions"}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Role & Access Level"}),i.jsx("select",{value:n.role,onChange:m=>d("role",m.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:a.map(m=>i.jsx("option",{value:m.value,className:"bg-white dark:bg-slate-700 text-gray-900 dark:text-slate-100",children:m.label},m.value))}),i.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:["Credentials: ",n.credentials]})]}),i.jsxs("div",{children:[i.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-3",children:"App Access"}),i.jsx("div",{className:"space-y-3",children:o(n.role).map(m=>{const p=m.icon,y=n.appAccess.includes(m.id);return i.jsxs("button",{onClick:()=>u(m.id),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-all duration-200 ${y?"bg-blue-600 border-blue-500 text-white":"bg-slate-700 border-slate-600 text-slate-300 hover:bg-slate-600"}`,children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:`w-8 h-8 rounded-md flex items-center justify-center ${y?"bg-blue-500":"bg-slate-600"}`,children:i.jsx(p,{className:"w-4 h-4"})}),i.jsx("span",{className:"font-medium",children:m.name})]}),y&&i.jsx(br,{className:"w-5 h-5"})]},m.id)})})]})]})]})}),i.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-slate-700",children:[i.jsx(_e,{variant:"secondary",onClick:f,className:"bg-slate-700 hover:bg-slate-600 text-slate-200",children:"Cancel"}),i.jsx(_e,{onClick:h,className:"bg-blue-600 hover:bg-blue-500 text-white",children:"Add User"})]})]})]}):null},eC=()=>{const t=gt(),e=Ut(),{user:s,userProfile:n,getAllUsers:r,updateUserProfile:a,deleteUserProfile:o,adminCreateUser:l,changePassword:c,getDashboardRoute:d,loading:u}=zs(),[h,f]=w.useState(""),[m,p]=w.useState([]),[y,x]=w.useState(!1),[g,v]=w.useState(!1),[b,k]=w.useState(null),[j,S]=w.useState(!1),[C,_]=w.useState("name"),[P,N]=w.useState("asc"),[L,A]=w.useState("all"),[E,D]=w.useState("all"),[F,U]=w.useState("all"),[Z,R]=w.useState("all"),[V,G]=w.useState(!1),[H,K]=w.useState("name"),[ee,ae]=w.useState("asc"),[ge,xe]=w.useState("all"),[Me,Ze]=w.useState("all"),[We,at]=w.useState("all"),[ht,Pe]=w.useState("all");w.useEffect(()=>{if(!u&&n&&n.role!=="Capacity Admin"){console.log(`🚫 Access denied to user management for role: ${n.role}, redirecting to dashboard`);const O=d();t(O,{replace:!0})}},[n,u,t,d]);const St=O=>{switch(O){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}},Bt=O=>{switch(O){case"Capacity Admin":return"admin/secure pass";case"NSight Admin":return"nsight-admin/enterprise pass";case"Employee":return"user/temporary pass";default:return"user/temporary pass"}},it=async()=>{if(!V)try{G(!0);const{data:O,error:se}=await r();if(se){console.error("Error loading users:",se);return}const T=O.map((Y,oe)=>({id:Y.id,name:`${Y.first_name||""} ${Y.last_name||""}`.trim()||Y.email.split("@")[0],email:Y.email||"",role:Y.role||"Employee",status:"Active",lastLogin:Y.created_at?new Date(Y.created_at).toISOString().split("T")[0]:"Never",contact:"",appAccess:St(Y.role||"Employee")||[],credentials:Bt(Y.role||"Employee")||"",department:Y.department||"",created_at:Y.created_at,updated_at:Y.updated_at}));p(T)}catch(O){console.error("Error in loadUsers:",O)}finally{G(!1)}};if(w.useEffect(()=>{it()},[]),u)return i.jsx($e,{children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-300",children:"Loading..."})]})})});if(n&&n.role!=="Capacity Admin")return null;w.useEffect(()=>{const O=se=>{j&&!se.target.closest(".relative")&&S(!1)};return document.addEventListener("mousedown",O),()=>document.removeEventListener("mousedown",O)},[j]),w.useEffect(()=>{const O=new URLSearchParams(e.search);O.get("action")==="add"&&(v(!0),t("/user-management",{replace:!0}));const se=O.get("filterApp");se&&(R(se),Pe(se),t("/user-management",{replace:!0}))},[e.search,t]);const M=[...m.filter(O=>{const se=(O.name||"").toLowerCase().includes(h.toLowerCase())||(O.email||"").toLowerCase().includes(h.toLowerCase())||(O.id||"").toString().includes(h),T=L==="all"||O.role===L,Y=E==="all"||O.status===E,oe=(O.email||"").split("@")[1],Ve=F==="all"||F==="capacity.com"&&oe==="capacity.com"||F==="nsight-inc.com"&&oe==="nsight-inc.com"||F==="other"&&oe!=="capacity.com"&&oe!=="nsight-inc.com",hn=Z==="all"||(O.appAccess||[]).includes(Z);return se&&T&&Y&&Ve&&hn})].sort((O,se)=>{let T,Y;switch(C){case"name":T=(O.name||"").toLowerCase(),Y=(se.name||"").toLowerCase();break;case"role":const oe={Employee:1,Admin:2,"NSight Admin":3};T=oe[O.role]||4,Y=oe[se.role]||4;break;case"lastLogin":T=new Date(O.lastLogin),Y=new Date(se.lastLogin);break;case"email":T=(O.email||"").toLowerCase(),Y=(se.email||"").toLowerCase();break;case"id":T=O.id,Y=se.id;break;case"domain":T=(O.email||"").split("@")[1],Y=(se.email||"").split("@")[1];break;case"appAccess":T=(O.appAccess||[]).length,Y=(se.appAccess||[]).length;break;case"status":T=O.status,Y=O.status;break;default:T=(O.name||"").toLowerCase(),Y=(se.name||"").toLowerCase()}return T<Y?P==="asc"?-1:1:T>Y?P==="asc"?1:-1:0}),J=O=>{switch(O){case"formulas":return i.jsx(Fs,{className:"w-4 h-4 text-blue-500"});case"raw-materials":return i.jsx(Is,{className:"w-4 h-4 text-blue-500"});case"suppliers":return i.jsx(dt,{className:"w-4 h-4 text-blue-500"});case"developer-mode":return i.jsx(Ma,{className:"w-4 h-4 text-blue-500"});case"existing-company-mode":return i.jsx(nn,{className:"w-4 h-4 text-green-500"});default:return null}},de=O=>{switch(O){case"Admin":return"text-purple-600 bg-purple-100";case"Capacity Admin":return"text-green-600 bg-green-100";case"NSight Admin":return"text-indigo-600 bg-indigo-100";case"Employee":return"text-blue-600 bg-blue-100";default:return"text-slate-600 bg-slate-100"}},Ee=O=>{k(O),x(!0)},W=async O=>{try{const se={first_name:O.name.split(" ")[0]||"",last_name:O.name.split(" ").slice(1).join(" ")||"",role:O.role,department:O.department||""},{error:T}=await a(O.id,se);if(T){console.error("Error updating user:",T),alert("Failed to update user. Please try again.");return}await it(),x(!1),k(null)}catch(se){console.error("Error in handleSaveUser:",se),alert("Failed to update user. Please try again.")}},ie=async O=>{try{if(console.log("🔄 UserManagementPage: Deleting user with ID:",O),s&&s.id===O){alert("Cannot delete your own account while logged in. Please have another admin delete your account, or sign out first.");return}const se=m.find(oe=>oe.id===O);if(!se){alert("User not found in current list.");return}console.log("🔄 UserManagementPage: Deleting user:",se.email);const{data:T,error:Y}=await o(O);if(Y){console.error("❌ UserManagementPage: Delete failed:",Y),alert(`Failed to delete user: ${Y.message||Y}`);return}console.log("✅ UserManagementPage: Delete successful, refreshing user list..."),await new Promise(oe=>setTimeout(oe,1e3));try{await it(),console.log("📝 UserManagementPage: Refreshed user list after deletion"),m.some(Ve=>Ve.id===O)?(console.warn("⚠️ UserManagementPage: User still exists after deletion - likely auto-recreated"),alert("User profile was deleted but may have been automatically recreated. This can happen if the user is currently authenticated in another session.")):alert("User deleted successfully!")}catch(oe){console.error("❌ UserManagementPage: Error refreshing users:",oe),alert("User deleted but failed to refresh list. Please reload the page.");return}x(!1),k(null)}catch(se){console.error("❌ UserManagementPage: Unexpected error in handleDeleteUser:",se),alert(`Unexpected error: ${se.message}`)}},Re=()=>{x(!1),k(null)},Je=()=>{v(!0)},Ht=async O=>{try{console.log("🔧 Admin creating new user:",O.email);const{data:se,error:T}=await l(O.email,O.password,{firstName:O.name.split(" ")[0]||"",lastName:O.name.split(" ").slice(1).join(" ")||"",role:O.role,department:O.department||""});if(T){console.error("❌ Error creating user:",T),alert(`Failed to create user: ${T.message||T}`);return}console.log("✅ User created successfully:",se),alert(`User created successfully! Email: ${O.email}
Password: ${O.password}

Please share these credentials with the user and ask them to change their password on first login.`),await it(),v(!1)}catch(se){console.error("❌ Error in handleSaveNewUser:",se),alert(`Unexpected error: ${se.message}`)}},Pr=()=>{v(!1)},Er=O=>{K(O)},Ar=()=>{ae(ee==="asc"?"desc":"asc")},Tr=()=>{_("name"),N("asc"),A("all"),D("all"),U("all"),R("all"),f(""),K("name"),ae("asc"),xe("all"),Ze("all"),at("all"),Pe("all")},Lr=()=>{_(H),N(ee),A(ge),D(Me),U(We),R(ht),S(!1)},xt=()=>{K(C),ae(P),xe(L),Ze(E),at(F),Pe(Z),S(!1)},Mr=()=>{j?xt():(K(C),ae(P),xe(L),Ze(E),at(F),Pe(Z),S(!0))},Dr=async O=>{if(!O||!O.email||!O.newPassword)return console.error("Invalid password data:",O),{success:!1,error:"Invalid password data provided"};if((n==null?void 0:n.role)!=="Capacity Admin")return console.error("Insufficient permissions for password change"),{success:!1,error:"Insufficient permissions"};try{if(console.log("Password change requested for:",O.email),console.log("Admin user:",n==null?void 0:n.email),O.email===(s==null?void 0:s.email)){console.log("Admin changing own password");const{error:se}=await c(O.newPassword);return se?(console.error("Password change error:",se),{success:!1,error:se.message||"Failed to change password"}):(console.log("Password change successful for own account"),{success:!0,message:`Password successfully changed for ${O.email}`})}else{console.log("Admin changing another user's password");const{data:{session:se}}=await Ne.auth.getSession();if(!se)return console.error("No active session found"),{success:!1,error:"No active session found. Please log in again."};const T=await fetch("/api/admin/users?action=change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetEmail:O.email,newPassword:O.newPassword,adminToken:se.access_token})});if(!T.ok){console.error("API request failed with status:",T.status);try{const oe=await T.json();return console.error("API Error:",oe.error),{success:!1,error:oe.error||"Failed to change password"}}catch(oe){return console.error("Failed to parse error response:",oe),{success:!1,error:"Failed to change password. Server error."}}}const Y=await T.json();return console.log("Password change API response:",Y),{success:!0,message:Y.message||`Password successfully changed for ${O.email}`}}}catch(se){return console.error("Password change error:",se),{success:!1,error:se.message||"Failed to change password. Please try again."}}};return i.jsxs($e,{children:[i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(Et,{className:"h-5 w-5 text-slate-400"})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx("div",{className:"grid grid-cols-3 gap-1 p-2",children:[...Array(9)].map((O,se)=>i.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-sm"},se))}),i.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"User Management"})]})]})}),i.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("input",{type:"text",placeholder:"Search by Name",value:h,onChange:O=>f(O.target.value),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"}),i.jsxs("div",{className:"relative",children:[i.jsxs("button",{onClick:Mr,className:"flex items-center space-x-2 p-2 border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors",children:[i.jsx(Sc,{className:"h-5 w-5 text-slate-300"}),i.jsx("span",{className:"text-sm text-slate-300",children:"Filter & Sort"}),i.jsx(Un,{className:"h-4 w-4 text-slate-300"})]}),j&&i.jsx("div",{className:"absolute right-0 mt-2 w-96 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50",children:i.jsxs("div",{className:"p-4",children:[i.jsxs("div",{className:"mb-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-2",children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200",children:"Sort By"}),i.jsxs("button",{onClick:Ar,className:"flex items-center space-x-1 px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition-colors",children:[i.jsx("span",{children:ee==="asc"?"Ascending":"Descending"}),i.jsx("span",{children:ee==="asc"?"↑":"↓"})]})]}),i.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"name",label:"Name"},{key:"role",label:"Role"},{key:"lastLogin",label:"Last Login"},{key:"email",label:"Email"},{key:"id",label:"ID"},{key:"domain",label:"Domain"},{key:"appAccess",label:"App Count"},{key:"status",label:"Status"}].map(O=>i.jsx("button",{onClick:()=>Er(O.key),className:`text-left px-3 py-2 rounded text-sm transition-colors ${H===O.key?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:O.label},O.key))})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Role"}),i.jsxs("select",{value:ge,onChange:O=>xe(O.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[i.jsx("option",{value:"all",children:"All Roles"}),i.jsx("option",{value:"Employee",children:"Employee"}),i.jsx("option",{value:"Admin",children:"Admin"}),i.jsx("option",{value:"NSight Admin",children:"NSight Admin"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Status"}),i.jsxs("select",{value:Me,onChange:O=>Ze(O.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[i.jsx("option",{value:"all",children:"All Status"}),i.jsx("option",{value:"Active",children:"Active"}),i.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]}),i.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Domain"}),i.jsxs("select",{value:We,onChange:O=>at(O.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[i.jsx("option",{value:"all",children:"All Domains"}),i.jsx("option",{value:"capacity.com",children:"@capacity.com"}),i.jsx("option",{value:"nsight-inc.com",children:"@nsight-inc.com"}),i.jsx("option",{value:"other",children:"Other Domains"})]})]}),i.jsxs("div",{children:[i.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by App Access"}),i.jsxs("select",{value:ht,onChange:O=>Pe(O.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[i.jsx("option",{value:"all",children:"All Apps"}),i.jsx("option",{value:"formulas",children:"Has Formulas Access"}),i.jsx("option",{value:"suppliers",children:"Has Suppliers Access"}),i.jsx("option",{value:"raw-materials",children:"Has Raw Materials Access"}),i.jsx("option",{value:"developer-mode",children:"Has Developer Mode Access"}),i.jsx("option",{value:"existing-company-mode",children:"Has Existing Company Mode Access"})]})]})]})]}),i.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-600 space-y-2",children:[i.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[i.jsx("button",{onClick:xt,className:"px-3 py-2 bg-slate-600 text-white rounded text-sm hover:bg-slate-700 transition-colors",children:"Cancel"}),i.jsx("button",{onClick:Lr,className:"px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors font-medium",children:"Apply Filters"})]}),i.jsx("button",{onClick:Tr,className:"w-full px-3 py-2 bg-red-600 text-white rounded text-sm hover:bg-red-700 transition-colors",children:"Clear All Filters"})]})]})})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("button",{onClick:it,disabled:V,className:"flex items-center space-x-2 px-3 py-2 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-600 disabled:opacity-50 text-slate-200 rounded-lg transition-colors",title:"Refresh user list",children:[i.jsx("svg",{className:`h-4 w-4 ${V?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:i.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),i.jsx("span",{children:V?"Refreshing...":"Refresh"})]}),(n==null?void 0:n.role)==="Capacity Admin"&&i.jsxs("button",{onClick:Je,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:[i.jsx(dn,{className:"h-4 w-4"}),i.jsx("span",{children:"Add User"})]})]})]})}),i.jsxs("div",{className:"space-y-6",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{children:[i.jsx("h2",{className:"text-2xl font-semibold text-slate-100",children:"User Access Management"}),i.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[i.jsxs("p",{className:"text-sm text-slate-400",children:["Showing ",M.length," of ",m.length," users"]}),(L!=="all"||E!=="all"||F!=="all"||Z!=="all"||C!=="name")&&i.jsxs("div",{className:"flex items-center space-x-2 flex-wrap",children:[i.jsx("span",{className:"text-xs text-slate-500",children:"Active filters:"}),L!=="all"&&i.jsxs("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs rounded",children:["Role: ",L]}),E!=="all"&&i.jsxs("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded",children:["Status: ",E]}),F!=="all"&&i.jsxs("span",{className:"px-2 py-1 bg-orange-600 text-white text-xs rounded",children:["Domain: ",F]}),Z!=="all"&&i.jsxs("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded",children:["App: ",Z]}),C!=="name"&&i.jsxs("span",{className:"px-2 py-1 bg-slate-600 text-white text-xs rounded",children:["Sort: ",C," (",P,")"]})]})]})]})}),i.jsx("div",{className:"bg-slate-800 rounded-lg shadow-sm overflow-hidden border border-slate-700",children:i.jsx("div",{className:"overflow-x-auto",children:i.jsxs("table",{className:"w-full table-fixed min-w-[1240px]",children:[i.jsx("thead",{children:i.jsxs("tr",{className:"border-b border-slate-700 bg-slate-750",children:[i.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[180px]",children:"Name"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[120px]",children:"ID"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[220px]",children:"Email"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[140px]",children:"Role"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[120px]",children:"Contact"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[160px]",children:"App Access"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[180px]",children:"Credentials"}),i.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[80px]",children:"Actions"})]})}),i.jsx("tbody",{children:M.map((O,se)=>i.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-700 transition-colors",children:[i.jsx("td",{className:"px-6 py-4 text-sm text-slate-100 font-medium truncate",title:O.name||"",children:O.name||""}),i.jsx("td",{className:"px-6 py-4",children:i.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-slate-700 text-slate-200 text-xs font-mono rounded border border-slate-600",children:["#",O.id||""]})}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300 truncate",title:O.email||"",children:i.jsx("a",{href:`mailto:${O.email||""}`,className:"text-blue-400 hover:text-blue-300 underline truncate block",children:O.email||""})}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium truncate ${de(O.role||"Employee")}`,children:O.role||"Employee"})}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300 truncate",title:O.contact||"",children:O.contact||"-"}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("div",{className:"flex items-center space-x-1 overflow-x-auto",children:(O.appAccess||[]).map((T,Y)=>i.jsx("div",{className:"w-8 h-8 bg-slate-700 rounded-md flex items-center justify-center hover:bg-slate-600 transition-colors flex-shrink-0",title:typeof T=="string"?T.replace("-"," ").replace(/\b\w/g,oe=>oe.toUpperCase()):"",children:J(T)},`${T}-${Y}`))})}),i.jsx("td",{className:"px-6 py-4 text-sm text-slate-300 truncate",title:O.credentials||"",children:O.credentials||""}),i.jsx("td",{className:"px-6 py-4",children:i.jsx("button",{onClick:()=>Ee(O),className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-600 rounded-md transition-colors",title:"Edit user",children:i.jsx(df,{className:"h-4 w-4"})})})]},O.id||`user-${se}`))})]})})})]})]}),i.jsx(XS,{isOpen:y,onClose:Re,user:b,onSave:W,onDelete:ie,currentUserRole:(n==null?void 0:n.role)||"Employee",onChangePassword:Dr}),i.jsx(ZS,{isOpen:g,onClose:Pr,onSave:Ht})]})},tC=()=>{var o;const t=gt(),{theme:e,changeTheme:s,isTransitioning:n}=Uk(),r=[{id:"light",name:"Light Mode",icon:iS,description:"Light theme with bright colors",preview:"bg-white border-gray-200"},{id:"dark",name:"Dark Mode",icon:sS,description:"Dark theme with muted colors",preview:"bg-slate-800 border-slate-600"},{id:"system",name:"System",icon:tS,description:"Follow system preference",preview:"bg-gradient-to-r from-white to-slate-800 border-slate-400"}],a=l=>{s(l)};return i.jsx($e,{children:i.jsxs("div",{className:"space-y-8",children:[i.jsx("div",{className:"flex items-center justify-between",children:i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:i.jsx(Et,{className:"h-5 w-5 text-slate-400"})}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsx(Vl,{className:"h-8 w-8 text-blue-500"}),i.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Settings"})]})]})}),i.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"mb-6",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-100 mb-2",children:"Appearance"}),i.jsx("p",{className:"text-slate-400",children:"Customize how the application looks and feels"})]}),i.jsxs("div",{className:"space-y-4",children:[i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Theme"}),i.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.map(l=>{const c=l.icon,d=e===l.id;return i.jsxs("button",{onClick:()=>a(l.id),disabled:n,className:`relative p-4 rounded-lg border-2 transition-all duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed ${d?"border-blue-500 bg-blue-500/10 ring-2 ring-blue-500/20":"border-slate-600 hover:border-slate-500 bg-slate-700/50"}`,children:[i.jsx("div",{className:`w-full h-20 rounded-md mb-3 border-2 ${l.preview} transition-all duration-300`,children:i.jsx("div",{className:"p-2 h-full flex items-center justify-center",children:i.jsx(c,{className:`h-6 w-6 ${l.id==="light"?"text-gray-600":l.id==="dark"?"text-slate-300":"text-slate-500"}`})})}),i.jsxs("div",{className:"text-left",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[i.jsx(c,{className:"h-4 w-4 text-slate-400"}),i.jsx("span",{className:"font-medium text-slate-200",children:l.name}),d&&i.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),i.jsx("p",{className:"text-sm text-slate-400",children:l.description})]}),d&&i.jsx("div",{className:"absolute inset-0 rounded-lg bg-blue-500/5 animate-pulse"})]},l.id)})})]}),i.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-700",children:[i.jsxs("div",{className:"text-sm text-slate-400",children:[i.jsx("span",{children:"Current theme: "}),i.jsx("span",{className:"text-slate-200 font-medium",children:(o=r.find(l=>l.id===e))==null?void 0:o.name}),n&&i.jsx("span",{className:"ml-2 text-blue-400 animate-pulse",children:"(Applying changes...)"})]}),i.jsx("div",{className:"text-xs text-slate-500",children:"Changes apply automatically"})]})]})]}),i.jsx(he,{className:"p-6 opacity-50",children:i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-100 mb-2",children:"General Settings"}),i.jsx("p",{className:"text-slate-400",children:"Coming soon..."})]})}),i.jsx(he,{className:"p-6 opacity-50",children:i.jsxs("div",{className:"mb-4",children:[i.jsx("h2",{className:"text-xl font-semibold text-slate-100 mb-2",children:"Account Settings"}),i.jsx("p",{className:"text-slate-400",children:"Coming soon..."})]})})]})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function ro(t){return t+.5|0}const _n=(t,e,s)=>Math.max(Math.min(t,s),e);function ni(t){return _n(ro(t*2.55),0,255)}function Fn(t){return _n(ro(t*255),0,255)}function Js(t){return _n(ro(t/2.55)/100,0,1)}function I0(t){return _n(ro(t*100),0,100)}const ns={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},zu=[..."0123456789ABCDEF"],sC=t=>zu[t&15],nC=t=>zu[(t&240)>>4]+zu[t&15],Oo=t=>(t&240)>>4===(t&15),rC=t=>Oo(t.r)&&Oo(t.g)&&Oo(t.b)&&Oo(t.a);function aC(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&ns[t[1]]*17,g:255&ns[t[2]]*17,b:255&ns[t[3]]*17,a:e===5?ns[t[4]]*17:255}:(e===7||e===9)&&(s={r:ns[t[1]]<<4|ns[t[2]],g:ns[t[3]]<<4|ns[t[4]],b:ns[t[5]]<<4|ns[t[6]],a:e===9?ns[t[7]]<<4|ns[t[8]]:255})),s}const iC=(t,e)=>t<255?e(t):"";function oC(t){var e=rC(t)?sC:nC;return t?"#"+e(t.r)+e(t.g)+e(t.b)+iC(t.a,e):void 0}const lC=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function pb(t,e,s){const n=e*Math.min(s,1-s),r=(a,o=(a+t/30)%12)=>s-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function cC(t,e,s){const n=(r,a=(r+t/60)%6)=>s-s*e*Math.max(Math.min(a,4-a,1),0);return[n(5),n(3),n(1)]}function dC(t,e,s){const n=pb(t,1,.5);let r;for(e+s>1&&(r=1/(e+s),e*=r,s*=r),r=0;r<3;r++)n[r]*=1-e-s,n[r]+=e;return n}function uC(t,e,s,n,r){return t===r?(e-s)/n+(e<s?6:0):e===r?(s-t)/n+2:(t-e)/n+4}function ff(t){const s=t.r/255,n=t.g/255,r=t.b/255,a=Math.max(s,n,r),o=Math.min(s,n,r),l=(a+o)/2;let c,d,u;return a!==o&&(u=a-o,d=l>.5?u/(2-a-o):u/(a+o),c=uC(s,n,r,u,a),c=c*60+.5),[c|0,d||0,l]}function mf(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(Fn)}function pf(t,e,s){return mf(pb,t,e,s)}function hC(t,e,s){return mf(dC,t,e,s)}function fC(t,e,s){return mf(cC,t,e,s)}function gb(t){return(t%360+360)%360}function mC(t){const e=lC.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?ni(+e[5]):Fn(+e[5]));const r=gb(+e[2]),a=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=hC(r,a,o):e[1]==="hsv"?n=fC(r,a,o):n=pf(r,a,o),{r:n[0],g:n[1],b:n[2],a:s}}function pC(t,e){var s=ff(t);s[0]=gb(s[0]+e),s=pf(s),t.r=s[0],t.g=s[1],t.b=s[2]}function gC(t){if(!t)return;const e=ff(t),s=e[0],n=I0(e[1]),r=I0(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${r}%, ${Js(t.a)})`:`hsl(${s}, ${n}%, ${r}%)`}const R0={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},F0={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function xC(){const t={},e=Object.keys(F0),s=Object.keys(R0);let n,r,a,o,l;for(n=0;n<e.length;n++){for(o=l=e[n],r=0;r<s.length;r++)a=s[r],l=l.replace(a,R0[a]);a=parseInt(F0[o],16),t[l]=[a>>16&255,a>>8&255,a&255]}return t}let Io;function yC(t){Io||(Io=xC(),Io.transparent=[0,0,0,0]);const e=Io[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const vC=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function bC(t){const e=vC.exec(t);let s=255,n,r,a;if(e){if(e[7]!==n){const o=+e[7];s=e[8]?ni(o):_n(o*255,0,255)}return n=+e[1],r=+e[3],a=+e[5],n=255&(e[2]?ni(n):_n(n,0,255)),r=255&(e[4]?ni(r):_n(r,0,255)),a=255&(e[6]?ni(a):_n(a,0,255)),{r:n,g:r,b:a,a:s}}}function wC(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Js(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const vd=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,Ur=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function jC(t,e,s){const n=Ur(Js(t.r)),r=Ur(Js(t.g)),a=Ur(Js(t.b));return{r:Fn(vd(n+s*(Ur(Js(e.r))-n))),g:Fn(vd(r+s*(Ur(Js(e.g))-r))),b:Fn(vd(a+s*(Ur(Js(e.b))-a))),a:t.a+s*(e.a-t.a)}}function Ro(t,e,s){if(t){let n=ff(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=pf(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function xb(t,e){return t&&Object.assign(e||{},t)}function $0(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=Fn(t[3]))):(e=xb(t,{r:0,g:0,b:0,a:1}),e.a=Fn(e.a)),e}function NC(t){return t.charAt(0)==="r"?bC(t):mC(t)}class Bi{constructor(e){if(e instanceof Bi)return e;const s=typeof e;let n;s==="object"?n=$0(e):s==="string"&&(n=aC(e)||yC(e)||NC(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=xb(this._rgb);return e&&(e.a=Js(e.a)),e}set rgb(e){this._rgb=$0(e)}rgbString(){return this._valid?wC(this._rgb):void 0}hexString(){return this._valid?oC(this._rgb):void 0}hslString(){return this._valid?gC(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,r=e.rgb;let a;const o=s===a?.5:s,l=2*o-1,c=n.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;a=1-d,n.r=255&d*n.r+a*r.r+.5,n.g=255&d*n.g+a*r.g+.5,n.b=255&d*n.b+a*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=jC(this._rgb,e._rgb,s)),this}clone(){return new Bi(this.rgb)}alpha(e){return this._rgb.a=Fn(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=ro(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return Ro(this._rgb,2,e),this}darken(e){return Ro(this._rgb,2,-e),this}saturate(e){return Ro(this._rgb,1,e),this}desaturate(e){return Ro(this._rgb,1,-e),this}rotate(e){return pC(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Bs(){}const _C=(()=>{let t=0;return()=>t++})();function je(t){return t==null}function Oe(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function ve(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ge(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function qt(t,e){return Ge(t)?t:e}function fe(t,e){return typeof t>"u"?e:t}const kC=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function Te(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function Se(t,e,s,n){let r,a,o;if(Oe(t))if(a=t.length,n)for(r=a-1;r>=0;r--)e.call(s,t[r],r);else for(r=0;r<a;r++)e.call(s,t[r],r);else if(ve(t))for(o=Object.keys(t),a=o.length,r=0;r<a;r++)e.call(s,t[o[r]],o[r])}function ql(t,e){let s,n,r,a;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(r=t[s],a=e[s],r.datasetIndex!==a.datasetIndex||r.index!==a.index)return!1;return!0}function Gl(t){if(Oe(t))return t.map(Gl);if(ve(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let r=0;for(;r<n;++r)e[s[r]]=Gl(t[s[r]]);return e}return t}function yb(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function SC(t,e,s,n){if(!yb(t))return;const r=e[t],a=s[t];ve(r)&&ve(a)?Hi(r,a,n):e[t]=Gl(a)}function Hi(t,e,s){const n=Oe(e)?e:[e],r=n.length;if(!ve(t))return t;s=s||{};const a=s.merger||SC;let o;for(let l=0;l<r;++l){if(o=n[l],!ve(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)a(c[d],t,o,s)}return t}function vi(t,e){return Hi(t,e,{merger:CC})}function CC(t,e,s){if(!yb(t))return;const n=e[t],r=s[t];ve(n)&&ve(r)?vi(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=Gl(r))}const z0={"":t=>t,x:t=>t.x,y:t=>t.y};function PC(t){const e=t.split("."),s=[];let n="";for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function EC(t){const e=PC(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function ja(t,e){return(z0[e]||(z0[e]=EC(e)))(t)}function gf(t){return t.charAt(0).toUpperCase()+t.slice(1)}const Wi=t=>typeof t<"u",Bn=t=>typeof t=="function",U0=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function AC(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Xe=Math.PI,Zt=2*Xe,TC=Zt+Xe,Kl=Number.POSITIVE_INFINITY,LC=Xe/180,Jt=Xe/2,Qn=Xe/4,B0=Xe*2/3,kn=Math.log10,Rs=Math.sign;function bi(t,e,s){return Math.abs(t-e)<s}function H0(t){const e=Math.round(t);t=bi(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(kn(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function MC(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((r,a)=>r-a).pop(),e}function DC(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function Vi(t){return!DC(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function OC(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function vb(t,e,s){let n,r,a;for(n=0,r=t.length;n<r;n++)a=t[n][s],isNaN(a)||(e.min=Math.min(e.min,a),e.max=Math.max(e.max,a))}function Sn(t){return t*(Xe/180)}function xf(t){return t*(180/Xe)}function W0(t){if(!Ge(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function IC(t,e){const s=e.x-t.x,n=e.y-t.y,r=Math.sqrt(s*s+n*n);let a=Math.atan2(n,s);return a<-.5*Xe&&(a+=Zt),{angle:a,distance:r}}function Uu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function RC(t,e){return(t-e+TC)%Zt-Xe}function Kt(t){return(t%Zt+Zt)%Zt}function bb(t,e,s,n){const r=Kt(t),a=Kt(e),o=Kt(s),l=Kt(a-r),c=Kt(o-r),d=Kt(r-a),u=Kt(r-o);return r===a||r===o||n&&a===o||l>c&&d<u}function Qt(t,e,s){return Math.max(e,Math.min(s,t))}function FC(t){return Qt(t,-32768,32767)}function Cn(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function yf(t,e,s){s=s||(o=>t[o]<e);let n=t.length-1,r=0,a;for(;n-r>1;)a=r+n>>1,s(a)?r=a:n=a;return{lo:r,hi:n}}const dr=(t,e,s,n)=>yf(t,s,n?r=>{const a=t[r][e];return a<s||a===s&&t[r+1][e]===s}:r=>t[r][e]<s),$C=(t,e,s)=>yf(t,s,n=>t[n][e]>=s);function zC(t,e,s){let n=0,r=t.length;for(;n<r&&t[n]<e;)n++;for(;r>n&&t[r-1]>s;)r--;return n>0||r<t.length?t.slice(n,r):t}const wb=["push","pop","shift","splice","unshift"];function UC(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),wb.forEach(s=>{const n="_onData"+gf(s),r=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...a){const o=r.apply(this,a);return t._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...a)}),o}})})}function V0(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(wb.forEach(a=>{delete t[a]}),delete t._chartjs)}function jb(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Nb=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function _b(t,e){let s=[],n=!1;return function(...r){s=r,n||(n=!0,Nb.call(window,()=>{n=!1,t.apply(e,s)}))}}function BC(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const vf=t=>t==="start"?"left":t==="end"?"right":"center",jt=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,HC=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function WC(t,e,s){const n=e.length;let r=0,a=n;if(t._sorted){const{iScale:o,vScale:l,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:f,minDefined:m,maxDefined:p}=o.getUserBounds();if(m){if(r=Math.min(dr(c,u,h).lo,s?n:dr(e,u,o.getPixelForValue(h)).lo),d){const y=c.slice(0,r+1).reverse().findIndex(x=>!je(x[l.axis]));r-=Math.max(0,y)}r=Qt(r,0,n-1)}if(p){let y=Math.max(dr(c,o.axis,f,!0).hi+1,s?0:dr(e,u,o.getPixelForValue(f),!0).hi+1);if(d){const x=c.slice(y-1).findIndex(g=>!je(g[l.axis]));y+=Math.max(0,x)}a=Qt(y,r,n)-r}else a=n-r}return{start:r,count:a}}function VC(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,r={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=r,!0;const a=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,r),a}const Fo=t=>t===0||t===1,q0=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*Zt/s)),G0=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*Zt/s)+1,wi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Jt)+1,easeOutSine:t=>Math.sin(t*Jt),easeInOutSine:t=>-.5*(Math.cos(Xe*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>Fo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>Fo(t)?t:q0(t,.075,.3),easeOutElastic:t=>Fo(t)?t:G0(t,.075,.3),easeInOutElastic(t){return Fo(t)?t:t<.5?.5*q0(t*2,.1125,.45):.5+.5*G0(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-wi.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?wi.easeInBounce(t*2)*.5:wi.easeOutBounce(t*2-1)*.5+.5};function bf(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function K0(t){return bf(t)?t:new Bi(t)}function bd(t){return bf(t)?t:new Bi(t).saturate(.5).darken(.1).hexString()}const qC=["x","y","borderWidth","radius","tension"],GC=["color","borderColor","backgroundColor"];function KC(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:GC},numbers:{type:"number",properties:qC}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function YC(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const Y0=new Map;function JC(t,e){e=e||{};const s=t+JSON.stringify(e);let n=Y0.get(s);return n||(n=new Intl.NumberFormat(t,e),Y0.set(s,n)),n}function wf(t,e,s){return JC(e,s).format(t)}const kb={values(t){return Oe(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let r,a=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),a=QC(t,s)}const o=kn(Math.abs(a)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),wf(t,n,c)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(kn(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?kb.numeric.call(this,t,e,s):""}};function QC(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var Pc={formatters:kb};function XC(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Pc.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const wr=Object.create(null),Bu=Object.create(null);function ji(t,e){if(!e)return t;const s=e.split(".");for(let n=0,r=s.length;n<r;++n){const a=s[n];t=t[a]||(t[a]=Object.create(null))}return t}function wd(t,e,s){return typeof e=="string"?Hi(ji(t,e),s):Hi(ji(t,""),e)}class ZC{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>bd(r.backgroundColor),this.hoverBorderColor=(n,r)=>bd(r.borderColor),this.hoverColor=(n,r)=>bd(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return wd(this,e,s)}get(e){return ji(this,e)}describe(e,s){return wd(Bu,e,s)}override(e,s){return wd(wr,e,s)}route(e,s,n,r){const a=ji(this,e),o=ji(this,n),l="_"+s;Object.defineProperties(a,{[l]:{value:a[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[l],d=o[r];return ve(c)?Object.assign({},d,c):fe(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(s=>s(this))}}var Ke=new ZC({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[KC,YC,XC]);function e4(t){return!t||je(t.size)||je(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function Yl(t,e,s,n,r){let a=e[r];return a||(a=e[r]=t.measureText(r).width,s.push(r)),a>n&&(n=a),n}function t4(t,e,s,n){n=n||{};let r=n.data=n.data||{},a=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},a=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let o=0;const l=s.length;let c,d,u,h,f;for(c=0;c<l;c++)if(h=s[c],h!=null&&!Oe(h))o=Yl(t,r,a,o,h);else if(Oe(h))for(d=0,u=h.length;d<u;d++)f=h[d],f!=null&&!Oe(f)&&(o=Yl(t,r,a,o,f));t.restore();const m=a.length/2;if(m>s.length){for(c=0;c<m;c++)delete r[a[c]];a.splice(0,m)}return o}function Xn(t,e,s){const n=t.currentDevicePixelRatio,r=s!==0?Math.max(s/2,.5):0;return Math.round((e-r)*n)/n+r}function J0(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function Hu(t,e,s,n){Sb(t,e,s,n,null)}function Sb(t,e,s,n,r){let a,o,l,c,d,u,h,f;const m=e.pointStyle,p=e.rotation,y=e.radius;let x=(p||0)*LC;if(m&&typeof m=="object"&&(a=m.toString(),a==="[object HTMLImageElement]"||a==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(x),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(y)||y<=0)){switch(t.beginPath(),m){default:r?t.ellipse(s,n,r/2,y,0,0,Zt):t.arc(s,n,y,0,Zt),t.closePath();break;case"triangle":u=r?r/2:y,t.moveTo(s+Math.sin(x)*u,n-Math.cos(x)*y),x+=B0,t.lineTo(s+Math.sin(x)*u,n-Math.cos(x)*y),x+=B0,t.lineTo(s+Math.sin(x)*u,n-Math.cos(x)*y),t.closePath();break;case"rectRounded":d=y*.516,c=y-d,o=Math.cos(x+Qn)*c,h=Math.cos(x+Qn)*(r?r/2-d:c),l=Math.sin(x+Qn)*c,f=Math.sin(x+Qn)*(r?r/2-d:c),t.arc(s-h,n-l,d,x-Xe,x-Jt),t.arc(s+f,n-o,d,x-Jt,x),t.arc(s+h,n+l,d,x,x+Jt),t.arc(s-f,n+o,d,x+Jt,x+Xe),t.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*y,u=r?r/2:c,t.rect(s-u,n-c,2*u,2*c);break}x+=Qn;case"rectRot":h=Math.cos(x)*(r?r/2:y),o=Math.cos(x)*y,l=Math.sin(x)*y,f=Math.sin(x)*(r?r/2:y),t.moveTo(s-h,n-l),t.lineTo(s+f,n-o),t.lineTo(s+h,n+l),t.lineTo(s-f,n+o),t.closePath();break;case"crossRot":x+=Qn;case"cross":h=Math.cos(x)*(r?r/2:y),o=Math.cos(x)*y,l=Math.sin(x)*y,f=Math.sin(x)*(r?r/2:y),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o);break;case"star":h=Math.cos(x)*(r?r/2:y),o=Math.cos(x)*y,l=Math.sin(x)*y,f=Math.sin(x)*(r?r/2:y),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o),x+=Qn,h=Math.cos(x)*(r?r/2:y),o=Math.cos(x)*y,l=Math.sin(x)*y,f=Math.sin(x)*(r?r/2:y),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o);break;case"line":o=r?r/2:Math.cos(x)*y,l=Math.sin(x)*y,t.moveTo(s-o,n-l),t.lineTo(s+o,n+l);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(x)*(r?r/2:y),n+Math.sin(x)*y);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function en(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function Ec(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function Ac(t){t.restore()}function s4(t,e,s,n,r){if(!e)return t.lineTo(s.x,s.y);if(r==="middle"){const a=(e.x+s.x)/2;t.lineTo(a,e.y),t.lineTo(a,s.y)}else r==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function n4(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function r4(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),je(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function a4(t,e,s,n,r){if(r.strikethrough||r.underline){const a=t.measureText(n),o=e-a.actualBoundingBoxLeft,l=e+a.actualBoundingBoxRight,c=s-a.actualBoundingBoxAscent,d=s+a.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(l,u),t.stroke()}}function i4(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function jr(t,e,s,n,r,a={}){const o=Oe(e)?e:[e],l=a.strokeWidth>0&&a.strokeColor!=="";let c,d;for(t.save(),t.font=r.string,r4(t,a),c=0;c<o.length;++c)d=o[c],a.backdrop&&i4(t,a.backdrop),l&&(a.strokeColor&&(t.strokeStyle=a.strokeColor),je(a.strokeWidth)||(t.lineWidth=a.strokeWidth),t.strokeText(d,s,n,a.maxWidth)),t.fillText(d,s,n,a.maxWidth),a4(t,s,n,d,a),n+=Number(r.lineHeight);t.restore()}function qi(t,e){const{x:s,y:n,w:r,h:a,radius:o}=e;t.arc(s+o.topLeft,n+o.topLeft,o.topLeft,1.5*Xe,Xe,!0),t.lineTo(s,n+a-o.bottomLeft),t.arc(s+o.bottomLeft,n+a-o.bottomLeft,o.bottomLeft,Xe,Jt,!0),t.lineTo(s+r-o.bottomRight,n+a),t.arc(s+r-o.bottomRight,n+a-o.bottomRight,o.bottomRight,Jt,0,!0),t.lineTo(s+r,n+o.topRight),t.arc(s+r-o.topRight,n+o.topRight,o.topRight,0,-Jt,!0),t.lineTo(s+o.topLeft,n)}const o4=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,l4=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function c4(t,e){const s=(""+t).match(o4);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const d4=t=>+t||0;function Cb(t,e){const s={},n=ve(e),r=n?Object.keys(e):e,a=ve(t)?n?o=>fe(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)s[o]=d4(a(o));return s}function Pb(t){return Cb(t,{top:"y",right:"x",bottom:"y",left:"x"})}function fr(t){return Cb(t,["topLeft","topRight","bottomLeft","bottomRight"])}function kt(t){const e=Pb(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function rt(t,e){t=t||{},e=e||Ke.font;let s=fe(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=fe(t.style,e.style);n&&!(""+n).match(l4)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:fe(t.family,e.family),lineHeight:c4(fe(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:fe(t.weight,e.weight),string:""};return r.string=e4(r),r}function $o(t,e,s,n){let r=!0,a,o,l;for(a=0,o=t.length;a<o;++a)if(l=t[a],l!==void 0&&(e!==void 0&&typeof l=="function"&&(l=l(e),r=!1),s!==void 0&&Oe(l)&&(l=l[s%l.length],r=!1),l!==void 0))return n&&!r&&(n.cacheable=!1),l}function u4(t,e,s){const{min:n,max:r}=t,a=kC(e,(r-n)/2),o=(l,c)=>s&&l===0?0:l+c;return{min:o(n,-Math.abs(a)),max:o(r,a)}}function Gn(t,e){return Object.assign(Object.create(t),e)}function jf(t,e=[""],s,n,r=()=>t[0]){const a=s||t;typeof n>"u"&&(n=Lb("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:a,_fallback:n,_getTarget:r,override:l=>jf([l,...t],e,a,n)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return Ab(l,c,()=>v4(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return X0(l).includes(c)},ownKeys(l){return X0(l)},set(l,c,d){const u=l._storage||(l._storage=r());return l[c]=u[c]=d,delete l._keys,!0}})}function Na(t,e,s,n){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:Eb(t,n),setContext:a=>Na(t,a,s,n),override:a=>Na(t.override(a),e,s,n)};return new Proxy(r,{deleteProperty(a,o){return delete a[o],delete t[o],!0},get(a,o,l){return Ab(a,o,()=>f4(a,o,l))},getOwnPropertyDescriptor(a,o){return a._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(a,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(a,o,l){return t[o]=l,delete a[o],!0}})}function Eb(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:s,indexable:n,isScriptable:Bn(s)?s:()=>s,isIndexable:Bn(n)?n:()=>n}}const h4=(t,e)=>t?t+gf(e):e,Nf=(t,e)=>ve(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Ab(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function f4(t,e,s){const{_proxy:n,_context:r,_subProxy:a,_descriptors:o}=t;let l=n[e];return Bn(l)&&o.isScriptable(e)&&(l=m4(e,l,t,s)),Oe(l)&&l.length&&(l=p4(e,l,t,o.isIndexable)),Nf(e,l)&&(l=Na(l,r,a&&a[e],o)),l}function m4(t,e,s,n){const{_proxy:r,_context:a,_subProxy:o,_stack:l}=s;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(a,o||n);return l.delete(t),Nf(t,c)&&(c=_f(r._scopes,r,t,c)),c}function p4(t,e,s,n){const{_proxy:r,_context:a,_subProxy:o,_descriptors:l}=s;if(typeof a.index<"u"&&n(t))return e[a.index%e.length];if(ve(e[0])){const c=e,d=r._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=_f(d,r,t,u);e.push(Na(h,a,o&&o[t],l))}}return e}function Tb(t,e,s){return Bn(t)?t(e,s):t}const g4=(t,e)=>t===!0?e:typeof t=="string"?ja(e,t):void 0;function x4(t,e,s,n,r){for(const a of e){const o=g4(s,a);if(o){t.add(o);const l=Tb(o._fallback,s,r);if(typeof l<"u"&&l!==s&&l!==n)return l}else if(o===!1&&typeof n<"u"&&s!==n)return null}return!1}function _f(t,e,s,n){const r=e._rootScopes,a=Tb(e._fallback,s,n),o=[...t,...r],l=new Set;l.add(n);let c=Q0(l,o,s,a||s,n);return c===null||typeof a<"u"&&a!==s&&(c=Q0(l,o,a,c,n),c===null)?!1:jf(Array.from(l),[""],r,a,()=>y4(e,s,n))}function Q0(t,e,s,n,r){for(;s;)s=x4(t,e,s,n,r);return s}function y4(t,e,s){const n=t._getTarget();e in n||(n[e]={});const r=n[e];return Oe(r)&&ve(s)?s:r||{}}function v4(t,e,s,n){let r;for(const a of e)if(r=Lb(h4(a,t),s),typeof r<"u")return Nf(t,r)?_f(s,n,t,r):r}function Lb(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function X0(t){let e=t._keys;return e||(e=t._keys=b4(t._scopes)),e}function b4(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}const w4=Number.EPSILON||1e-14,_a=(t,e)=>e<t.length&&!t[e].skip&&t[e],Mb=t=>t==="x"?"y":"x";function j4(t,e,s,n){const r=t.skip?e:t,a=e,o=s.skip?e:s,l=Uu(a,r),c=Uu(o,a);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=n*d,f=n*u;return{previous:{x:a.x-h*(o.x-r.x),y:a.y-h*(o.y-r.y)},next:{x:a.x+f*(o.x-r.x),y:a.y+f*(o.y-r.y)}}}function N4(t,e,s){const n=t.length;let r,a,o,l,c,d=_a(t,0);for(let u=0;u<n-1;++u)if(c=d,d=_a(t,u+1),!(!c||!d)){if(bi(e[u],0,w4)){s[u]=s[u+1]=0;continue}r=s[u]/e[u],a=s[u+1]/e[u],l=Math.pow(r,2)+Math.pow(a,2),!(l<=9)&&(o=3/Math.sqrt(l),s[u]=r*o*e[u],s[u+1]=a*o*e[u])}}function _4(t,e,s="x"){const n=Mb(s),r=t.length;let a,o,l,c=_a(t,0);for(let d=0;d<r;++d){if(o=l,l=c,c=_a(t,d+1),!l)continue;const u=l[s],h=l[n];o&&(a=(u-o[s])/3,l[`cp1${s}`]=u-a,l[`cp1${n}`]=h-a*e[d]),c&&(a=(c[s]-u)/3,l[`cp2${s}`]=u+a,l[`cp2${n}`]=h+a*e[d])}}function k4(t,e="x"){const s=Mb(e),n=t.length,r=Array(n).fill(0),a=Array(n);let o,l,c,d=_a(t,0);for(o=0;o<n;++o)if(l=c,c=d,d=_a(t,o+1),!!c){if(d){const u=d[e]-c[e];r[o]=u!==0?(d[s]-c[s])/u:0}a[o]=l?d?Rs(r[o-1])!==Rs(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}N4(t,r,a),_4(t,a,e)}function zo(t,e,s){return Math.max(Math.min(t,s),e)}function S4(t,e){let s,n,r,a,o,l=en(t[0],e);for(s=0,n=t.length;s<n;++s)o=a,a=l,l=s<n-1&&en(t[s+1],e),a&&(r=t[s],o&&(r.cp1x=zo(r.cp1x,e.left,e.right),r.cp1y=zo(r.cp1y,e.top,e.bottom)),l&&(r.cp2x=zo(r.cp2x,e.left,e.right),r.cp2y=zo(r.cp2y,e.top,e.bottom)))}function C4(t,e,s,n,r){let a,o,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")k4(t,r);else{let d=n?t[t.length-1]:t[0];for(a=0,o=t.length;a<o;++a)l=t[a],c=j4(d,l,t[Math.min(a+1,o-(n?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&S4(t,s)}function kf(){return typeof window<"u"&&typeof document<"u"}function Sf(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function Jl(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const Tc=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function P4(t,e){return Tc(t).getPropertyValue(e)}const E4=["top","right","bottom","left"];function mr(t,e,s){const n={};s=s?"-"+s:"";for(let r=0;r<4;r++){const a=E4[r];n[a]=parseFloat(t[e+"-"+a+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const A4=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function T4(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:r,offsetY:a}=n;let o=!1,l,c;if(A4(r,a,t.target))l=r,c=a;else{const d=e.getBoundingClientRect();l=n.clientX-d.left,c=n.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function rr(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,r=Tc(s),a=r.boxSizing==="border-box",o=mr(r,"padding"),l=mr(r,"border","width"),{x:c,y:d,box:u}=T4(t,s),h=o.left+(u&&l.left),f=o.top+(u&&l.top);let{width:m,height:p}=e;return a&&(m-=o.width+l.width,p-=o.height+l.height),{x:Math.round((c-h)/m*s.width/n),y:Math.round((d-f)/p*s.height/n)}}function L4(t,e,s){let n,r;if(e===void 0||s===void 0){const a=t&&Sf(t);if(!a)e=t.clientWidth,s=t.clientHeight;else{const o=a.getBoundingClientRect(),l=Tc(a),c=mr(l,"border","width"),d=mr(l,"padding");e=o.width-d.width-c.width,s=o.height-d.height-c.height,n=Jl(l.maxWidth,a,"clientWidth"),r=Jl(l.maxHeight,a,"clientHeight")}}return{width:e,height:s,maxWidth:n||Kl,maxHeight:r||Kl}}const Uo=t=>Math.round(t*10)/10;function M4(t,e,s,n){const r=Tc(t),a=mr(r,"margin"),o=Jl(r.maxWidth,t,"clientWidth")||Kl,l=Jl(r.maxHeight,t,"clientHeight")||Kl,c=L4(t,e,s);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const f=mr(r,"border","width"),m=mr(r,"padding");d-=m.width+f.width,u-=m.height+f.height}return d=Math.max(0,d-a.width),u=Math.max(0,n?d/n:u-a.height),d=Uo(Math.min(d,o,c.maxWidth)),u=Uo(Math.min(u,l,c.maxHeight)),d&&!u&&(u=Uo(d/2)),(e!==void 0||s!==void 0)&&n&&c.height&&u>c.height&&(u=c.height,d=Uo(Math.floor(u*n))),{width:d,height:u}}function Z0(t,e,s){const n=e||1,r=Math.floor(t.height*n),a=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||o.height!==r||o.width!==a?(t.currentDevicePixelRatio=n,o.height=r,o.width=a,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const D4=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};kf()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function eg(t,e){const s=P4(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function ar(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function O4(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function I4(t,e,s,n){const r={x:t.cp2x,y:t.cp2y},a={x:e.cp1x,y:e.cp1y},o=ar(t,r,s),l=ar(r,a,s),c=ar(a,e,s),d=ar(o,l,s),u=ar(l,c,s);return ar(d,u,s)}const R4=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},F4=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function la(t,e,s){return t?R4(e,s):F4()}function Db(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function Ob(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Ib(t){return t==="angle"?{between:bb,compare:RC,normalize:Kt}:{between:Cn,compare:(e,s)=>e-s,normalize:e=>e}}function tg({start:t,end:e,count:s,loop:n,style:r}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:r}}function $4(t,e,s){const{property:n,start:r,end:a}=s,{between:o,normalize:l}=Ib(n),c=e.length;let{start:d,end:u,loop:h}=t,f,m;if(h){for(d+=c,u+=c,f=0,m=c;f<m&&o(l(e[d%c][n]),r,a);++f)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:t.style}}function Rb(t,e,s){if(!s)return[t];const{property:n,start:r,end:a}=s,o=e.length,{compare:l,between:c,normalize:d}=Ib(n),{start:u,end:h,loop:f,style:m}=$4(t,e,s),p=[];let y=!1,x=null,g,v,b;const k=()=>c(r,b,g)&&l(r,b)!==0,j=()=>l(a,g)===0||c(a,b,g),S=()=>y||k(),C=()=>!y||j();for(let _=u,P=u;_<=h;++_)v=e[_%o],!v.skip&&(g=d(v[n]),g!==b&&(y=c(g,r,a),x===null&&S()&&(x=l(g,r)===0?_:P),x!==null&&C()&&(p.push(tg({start:x,end:_,loop:f,count:o,style:m})),x=null),P=_,b=g));return x!==null&&p.push(tg({start:x,end:h,loop:f,count:o,style:m})),p}function Fb(t,e){const s=[],n=t.segments;for(let r=0;r<n.length;r++){const a=Rb(n[r],t.points,e);a.length&&s.push(...a)}return s}function z4(t,e,s,n){let r=0,a=e-1;if(s&&!n)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,s&&(a+=r);a>r&&t[a%e].skip;)a--;return a%=e,{start:r,end:a}}function U4(t,e,s,n){const r=t.length,a=[];let o=e,l=t[e],c;for(c=e+1;c<=s;++c){const d=t[c%r];d.skip||d.stop?l.skip||(n=!1,a.push({start:e%r,end:(c-1)%r,loop:n}),e=o=d.stop?c:null):(o=c,l.skip&&(e=c)),l=d}return o!==null&&a.push({start:e%r,end:o%r,loop:n}),a}function B4(t,e){const s=t.points,n=t.options.spanGaps,r=s.length;if(!r)return[];const a=!!t._loop,{start:o,end:l}=z4(s,r,a,n);if(n===!0)return sg(t,[{start:o,end:l,loop:a}],s,e);const c=l<o?l+r:l,d=!!t._fullLoop&&o===0&&l===r-1;return sg(t,U4(s,o,c,d),s,e)}function sg(t,e,s,n){return!n||!n.setContext||!s?e:H4(t,e,s,n)}function H4(t,e,s,n){const r=t._chart.getContext(),a=ng(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=s.length,d=[];let u=a,h=e[0].start,f=h;function m(p,y,x,g){const v=l?-1:1;if(p!==y){for(p+=c;s[p%c].skip;)p-=v;for(;s[y%c].skip;)y+=v;p%c!==y%c&&(d.push({start:p%c,end:y%c,loop:x,style:g}),u=g,h=y%c)}}for(const p of e){h=l?h:p.start;let y=s[h%c],x;for(f=h+1;f<=p.end;f++){const g=s[f%c];x=ng(n.setContext(Gn(r,{type:"segment",p0:y,p1:g,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),W4(x,u)&&m(h,f-1,p.loop,u),y=g,u=x}h<f-1&&m(h,f-1,p.loop,u)}return d}function ng(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function W4(t,e){if(!e)return!1;const s=[],n=function(r,a){return bf(a)?(s.includes(a)||s.push(a),s.indexOf(a)):a};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function Bo(t,e,s){return t.options.clip?t[s]:e[s]}function V4(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:Bo(s,e,"left"),right:Bo(s,e,"right"),top:Bo(n,e,"top"),bottom:Bo(n,e,"bottom")}:e}function $b(t,e){const s=e._clip;if(s.disabled)return!1;const n=V4(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class q4{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,r){const a=s.listeners[r],o=s.duration;a.forEach(l=>l({chart:e,initial:s.initial,numSteps:o,currentStep:Math.min(n-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Nb.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const a=n.items;let o=a.length-1,l=!1,c;for(;o>=0;--o)c=a[o],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),l=!0):(a[o]=a[a.length-1],a.pop());l&&(r.draw(),this._notify(r,n,e,"progress")),a.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),s+=a.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Vs=new q4;const rg="transparent",G4={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=K0(t||rg),r=n.valid&&K0(e||rg);return r&&r.valid?r.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class K4{constructor(e,s,n,r){const a=s[n];r=$o([e.to,r,a,e.from]);const o=$o([e.from,a,r]);this._active=!0,this._fn=e.fn||G4[e.type||typeof o],this._easing=wi[e.easing]||wi.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const r=this._target[this._prop],a=n-this._start,o=this._duration-a;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=a,this._loop=!!e.loop,this._to=$o([e.to,s,r,e.from]),this._from=$o([e.from,r,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,r=this._prop,a=this._from,o=this._loop,l=this._to;let c;if(this._active=a!==l&&(o||s<n),!this._active){this._target[r]=l,this._notify(!0);return}if(s<0){this._target[r]=a;return}c=s/n%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(a,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][s]()}}class zb{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!ve(e))return;const s=Object.keys(Ke.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const a=e[r];if(!ve(a))return;const o={};for(const l of s)o[l]=a[l];(Oe(a.properties)&&a.properties||[r]).forEach(l=>{(l===r||!n.has(l))&&n.set(l,o)})})}_animateOptions(e,s){const n=s.options,r=J4(e,n);if(!r)return[];const a=this._createAnimations(r,n);return n.$shared&&Y4(e.options.$animations,n).then(()=>{e.options=n},()=>{}),a}_createAnimations(e,s){const n=this._properties,r=[],a=e.$animations||(e.$animations={}),o=Object.keys(s),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,s));continue}const u=s[d];let h=a[d];const f=n.get(d);if(h)if(f&&h.active()){h.update(f,u,l);continue}else h.cancel();if(!f||!f.duration){e[d]=u;continue}a[d]=h=new K4(f,e,d,u),r.push(h)}return r}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return Vs.add(this._chart,n),!0}}function Y4(t,e){const s=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const a=t[n[r]];a&&a.active()&&s.push(a.wait())}return Promise.all(s)}function J4(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function ag(t,e){const s=t&&t.options||{},n=s.reverse,r=s.min===void 0?e:0,a=s.max===void 0?e:0;return{start:n?a:r,end:n?r:a}}function Q4(t,e,s){if(s===!1)return!1;const n=ag(t,s),r=ag(e,s);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function X4(t){let e,s,n,r;return ve(t)?(e=t.top,s=t.right,n=t.bottom,r=t.left):e=s=n=r=t,{top:e,right:s,bottom:n,left:r,disabled:t===!1}}function Ub(t,e){const s=[],n=t._getSortedDatasetMetas(e);let r,a;for(r=0,a=n.length;r<a;++r)s.push(n[r].index);return s}function ig(t,e,s,n={}){const r=t.keys,a=n.mode==="single";let o,l,c,d;if(e===null)return;let u=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===s){if(u=!0,n.all)continue;break}d=t.values[c],Ge(d)&&(a||e===0||Rs(e)===Rs(d))&&(e+=d)}return!u&&!n.all?0:e}function Z4(t,e){const{iScale:s,vScale:n}=e,r=s.axis==="x"?"x":"y",a=n.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[r]:u,[a]:t[u]};return l}function jd(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function eP(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function tP(t){const{min:e,max:s,minDefined:n,maxDefined:r}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?s:Number.POSITIVE_INFINITY}}function sP(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function og(t,e,s,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const a=t[r.index];if(s&&a>0||!s&&a<0)return r.index}return null}function lg(t,e){const{chart:s,_cachedMeta:n}=t,r=s._stacks||(s._stacks={}),{iScale:a,vScale:o,index:l}=n,c=a.axis,d=o.axis,u=eP(a,o,n),h=e.length;let f;for(let m=0;m<h;++m){const p=e[m],{[c]:y,[d]:x}=p,g=p._stacks||(p._stacks={});f=g[d]=sP(r,u,y),f[l]=x,f._top=og(f,o,!0,n.type),f._bottom=og(f,o,!1,n.type);const v=f._visualValues||(f._visualValues={});v[l]=x}}function Nd(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function nP(t,e){return Gn(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function rP(t,e,s){return Gn(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function Ga(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const r of e){const a=r._stacks;if(!a||a[n]===void 0||a[n][s]===void 0)return;delete a[n][s],a[n]._visualValues!==void 0&&a[n]._visualValues[s]!==void 0&&delete a[n]._visualValues[s]}}}const _d=t=>t==="reset"||t==="none",cg=(t,e)=>e?t:Object.assign({},t),aP=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:Ub(s,!0),values:null};class ca{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=jd(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&Ga(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),r=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,a=s.xAxisID=fe(n.xAxisID,Nd(e,"x")),o=s.yAxisID=fe(n.yAxisID,Nd(e,"y")),l=s.rAxisID=fe(n.rAxisID,Nd(e,"r")),c=s.indexAxis,d=s.iAxisID=r(c,a,o,l),u=s.vAxisID=r(c,o,a,l);s.xScale=this.getScaleForId(a),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&V0(this._data,this),e._stacked&&Ga(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(ve(s)){const r=this._cachedMeta;this._data=Z4(s,r)}else if(n!==s){if(n){V0(n,this);const r=this._cachedMeta;Ga(r),r._parsed=[]}s&&Object.isExtensible(s)&&UC(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const a=s._stacked;s._stacked=jd(s.vScale,s),s.stack!==n.stack&&(r=!0,Ga(s),s.stack=n.stack),this._resyncElements(e),(r||a!==s._stacked)&&(lg(this,s._parsed),s._stacked=jd(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:r}=this,{iScale:a,_stacked:o}=n,l=a.axis;let c=e===0&&s===r.length?!0:n._sorted,d=e>0&&n._parsed[e-1],u,h,f;if(this._parsing===!1)n._parsed=r,n._sorted=!0,f=r;else{Oe(r[e])?f=this.parseArrayData(n,r,e,s):ve(r[e])?f=this.parseObjectData(n,r,e,s):f=this.parsePrimitiveData(n,r,e,s);const m=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<s;++u)n._parsed[u+e]=h=f[u],c&&(m()&&(c=!1),d=h);n._sorted=c}o&&lg(this,f)}parsePrimitiveData(e,s,n,r){const{iScale:a,vScale:o}=e,l=a.axis,c=o.axis,d=a.getLabels(),u=a===o,h=new Array(r);let f,m,p;for(f=0,m=r;f<m;++f)p=f+n,h[f]={[l]:u||a.parse(d[p],p),[c]:o.parse(s[p],p)};return h}parseArrayData(e,s,n,r){const{xScale:a,yScale:o}=e,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=s[u],l[c]={x:a.parse(h[0],u),y:o.parse(h[1],u)};return l}parseObjectData(e,s,n,r){const{xScale:a,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,h,f,m;for(u=0,h=r;u<h;++u)f=u+n,m=s[f],d[u]={x:a.parse(ja(m,l),f),y:o.parse(ja(m,c),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const r=this.chart,a=this._cachedMeta,o=s[e.axis],l={keys:Ub(r,!0),values:s._stacks[e.axis]._visualValues};return ig(l,o,a.index,{mode:n})}updateRangeFromParsed(e,s,n,r){const a=n[s.axis];let o=a===null?NaN:a;const l=r&&n._stacks[s.axis];r&&l&&(r.values=l,o=ig(r,a,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,s){const n=this._cachedMeta,r=n._parsed,a=n._sorted&&e===n.iScale,o=r.length,l=this._getOtherScale(e),c=aP(s,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=tP(l);let f,m;function p(){m=r[f];const y=m[l.axis];return!Ge(m[e.axis])||u>y||h<y}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(d,e,m,c),a));++f);if(a){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(d,e,m,c);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let r,a,o;for(r=0,a=s.length;r<a;++r)o=s[r][e.axis],Ge(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,r=s.vScale,a=this.getParsed(e);return{label:n?""+n.getLabelForValue(a[n.axis]):"",value:r?""+r.getLabelForValue(a[r.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=X4(fe(this.options.clip,Q4(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,r=n.data||[],a=s.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,a,l,c),u=l;u<l+c;++u){const h=r[u];h.hidden||(h.active&&d?o.push(h):h.draw(e,a))}for(u=0;u<o.length;++u)o[u].draw(e,a)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const r=this.getDataset();let a;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];a=o.$context||(o.$context=rP(this.getContext(),e,o)),a.parsed=this.getParsed(e),a.raw=r.data[e],a.index=a.dataIndex=e}else a=this.$context||(this.$context=nP(this.chart.getContext(),this.index)),a.dataset=r,a.index=a.datasetIndex=this.index;return a.active=!!s,a.mode=n,a}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const r=s==="active",a=this._cachedDataOpts,o=e+"-"+s,l=a[o],c=this.enableOptionSharing&&Wi(n);if(l)return cg(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),m=Object.keys(Ke.elements[e]),p=()=>this.getContext(n,r,s),y=d.resolveNamedOptions(f,m,p,h);return y.$shared&&(y.$shared=c,a[o]=Object.freeze(cg(y,c))),y}_resolveAnimations(e,s,n){const r=this.chart,a=this._cachedDataOpts,o=`animation-${s}`,l=a[o];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,s),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(e,n,s))}const d=new zb(r,c&&c.animations);return c&&c._cacheable&&(a[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||_d(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),r=this._sharedOptions,a=this.getSharedOptions(n),o=this.includeOptions(s,a)||a!==r;return this.updateSharedOptions(a,s,n),{sharedOptions:a,includeOptions:o}}updateElement(e,s,n,r){_d(r)?Object.assign(e,n):this._resolveAnimations(s,r).update(e,n)}updateSharedOptions(e,s,n){e&&!_d(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,r){e.active=r;const a=this.getStyle(s,r);this._resolveAnimations(s,n,r).update(e,{options:!r&&this.getSharedOptions(a)||a})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=n.length,a=s.length,o=Math.min(a,r);o&&this.parse(0,o),a>r?this._insertElements(r,a-r,e):a<r&&this._removeElements(a,r-a)}_insertElements(e,s,n=!0){const r=this._cachedMeta,a=r.data,o=e+s;let l;const c=d=>{for(d.length+=s,l=d.length-1;l>=o;l--)d[l]=d[l-s]};for(c(a),l=e;l<o;++l)a[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,s),n&&this.updateElements(a,e,s,"reset")}updateElements(e,s,n,r){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,s);n._stacked&&Ga(n,r)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,r]=e;this[s](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}ne(ca,"defaults",{}),ne(ca,"datasetElementType",null),ne(ca,"dataElementType",null);function iP(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let r=0,a=s.length;r<a;r++)n=n.concat(s[r].controller.getAllParsedValues(t));t._cache.$bar=jb(n.sort((r,a)=>r-a))}return t._cache.$bar}function oP(t){const e=t.iScale,s=iP(e,t.type);let n=e._length,r,a,o,l;const c=()=>{o===32767||o===-32768||(Wi(l)&&(n=Math.min(n,Math.abs(o-l)||n)),l=o)};for(r=0,a=s.length;r<a;++r)o=e.getPixelForValue(s[r]),c();for(l=void 0,r=0,a=e.ticks.length;r<a;++r)o=e.getPixelForTick(r),c();return n}function lP(t,e,s,n){const r=s.barThickness;let a,o;return je(r)?(a=e.min*s.categoryPercentage,o=s.barPercentage):(a=r*n,o=1),{chunk:a/n,ratio:o,start:e.pixels[t]-a/2}}function cP(t,e,s,n){const r=e.pixels,a=r[t];let o=t>0?r[t-1]:null,l=t<r.length-1?r[t+1]:null;const c=s.categoryPercentage;o===null&&(o=a-(l===null?e.end-e.start:l-a)),l===null&&(l=a+a-o);const d=a-(a-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/n,ratio:s.barPercentage,start:d}}function dP(t,e,s,n){const r=s.parse(t[0],n),a=s.parse(t[1],n),o=Math.min(r,a),l=Math.max(r,a);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),e[s.axis]=d,e._custom={barStart:c,barEnd:d,start:r,end:a,min:o,max:l}}function Bb(t,e,s,n){return Oe(t)?dP(t,e,s,n):e[s.axis]=s.parse(t,n),e}function dg(t,e,s,n){const r=t.iScale,a=t.vScale,o=r.getLabels(),l=r===a,c=[];let d,u,h,f;for(d=s,u=s+n;d<u;++d)f=e[d],h={},h[r.axis]=l||r.parse(o[d],d),c.push(Bb(f,h,a,d));return c}function kd(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function uP(t,e,s){return t!==0?Rs(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function hP(t){let e,s,n,r,a;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(r="end",a="start"):(r="start",a="end"),{start:s,end:n,reverse:e,top:r,bottom:a}}function fP(t,e,s,n){let r=e.borderSkipped;const a={};if(!r){t.borderSkipped=a;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=hP(t);r==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?r=d:(s._bottom||0)===n?r=u:(a[ug(u,o,l,c)]=!0,r=d)),a[ug(r,o,l,c)]=!0,t.borderSkipped=a}function ug(t,e,s,n){return n?(t=mP(t,e,s),t=hg(t,s,e)):t=hg(t,e,s),t}function mP(t,e,s){return t===e?s:t===s?e:t}function hg(t,e,s){return t==="start"?e:t==="end"?s:t}function pP(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class hl extends ca{parsePrimitiveData(e,s,n,r){return dg(e,s,n,r)}parseArrayData(e,s,n,r){return dg(e,s,n,r)}parseObjectData(e,s,n,r){const{iScale:a,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=a.axis==="x"?l:c,u=o.axis==="x"?l:c,h=[];let f,m,p,y;for(f=n,m=n+r;f<m;++f)y=s[f],p={},p[a.axis]=a.parse(ja(y,d),f),h.push(Bb(ja(y,u),p,o,f));return h}updateRangeFromParsed(e,s,n,r){super.updateRangeFromParsed(e,s,n,r);const a=n._custom;a&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,a.min),e.max=Math.max(e.max,a.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:r}=s,a=this.getParsed(e),o=a._custom,l=kd(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(a[r.axis]);return{label:""+n.getLabelForValue(a[n.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,r){const a=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(s,r);for(let m=s;m<s+n;m++){const p=this.getParsed(m),y=a||je(p[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),x=this._calculateBarIndexPixels(m,u),g=(p._stacks||{})[l.axis],v={horizontal:d,base:y.base,enableBorderRadius:!g||kd(p._custom)||o===g._top||o===g._bottom,x:d?y.head:x.center,y:d?x.center:y.head,height:d?x.size:Math.abs(y.size),width:d?Math.abs(y.size):x.size};f&&(v.options=h||this.resolveDataElementOptions(m,e[m].active?"active":r));const b=v.options||e[m].options;fP(v,b,g,o),pP(v,b,u.ratio),this.updateElement(e[m],m,v,r)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),a=n.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(s),c=l&&l[n.axis],d=u=>{const h=u._parsed.find(m=>m[n.axis]===c),f=h&&h[u.vScale.axis];if(je(f)||isNaN(f))return!0};for(const u of r)if(!(s!==void 0&&d(u))&&((a===!1||o.indexOf(u.stack)===-1||a===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[fe(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,n){const r=this._getStacks(e,n),a=s!==void 0?r.indexOf(s):-1;return a===-1?r.length-1:a}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,r=[];let a,o;for(a=0,o=s.data.length;a<o;++a)r.push(n.getPixelForValue(this.getParsed(a)[n.axis],a));const l=e.barThickness;return{min:l||oP(s),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:r},options:{base:a,minBarLength:o}}=this,l=a||0,c=this.getParsed(e),d=c._custom,u=kd(d);let h=c[s.axis],f=0,m=n?this.applyStack(s,c,n):h,p,y;m!==h&&(f=m-h,m=h),u&&(h=d.barStart,m=d.barEnd-d.barStart,h!==0&&Rs(h)!==Rs(d.barEnd)&&(f=0),f+=h);const x=!je(a)&&!u?a:f;let g=s.getPixelForValue(x);if(this.chart.getDataVisibility(e)?p=s.getPixelForValue(f+m):p=g,y=p-g,Math.abs(y)<o){y=uP(y,s,l)*o,h===l&&(g-=y/2);const v=s.getPixelForDecimal(0),b=s.getPixelForDecimal(1),k=Math.min(v,b),j=Math.max(v,b);g=Math.max(Math.min(g,j),k),p=g+y,n&&!u&&(c._stacks[s.axis]._visualValues[r]=s.getValueForPixel(p)-s.getValueForPixel(g))}if(g===s.getPixelForValue(l)){const v=Rs(y)*s.getLineWidthForValue(l)/2;g+=v,y-=v}return{size:y,base:g,head:p,center:p+y/2}}_calculateBarIndexPixels(e,s){const n=s.scale,r=this.options,a=r.skipNull,o=fe(r.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(s.grouped){const u=a?this._getStackCount(e):s.stackCount,h=r.barThickness==="flex"?cP(e,s,r,u*d):lP(e,s,r,u*d),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(fe(f,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,a?e:void 0)+m;l=h.start+h.chunk*p+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=n.getPixelForValue(this.getParsed(e)[n.axis],e),c=Math.min(o,s.min*s.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,r=n.length;let a=0;for(;a<r;++a)this.getParsed(a)[s.axis]!==null&&!n[a].hidden&&n[a].draw(this._ctx)}}ne(hl,"id","bar"),ne(hl,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),ne(hl,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class fl extends ca{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:r=[],_dataset:a}=s,o=this.chart._animationsDisabled;let{start:l,count:c}=WC(s,r,o);this._drawStart=l,this._drawCount=c,VC(s)&&(l=0,c=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!a._decimated,n.points=r;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:d},e),this.updateElements(r,l,c,e)}updateElements(e,s,n,r){const a=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(s,r),f=o.axis,m=l.axis,{spanGaps:p,segment:y}=this.options,x=Vi(p)?p:Number.POSITIVE_INFINITY,g=this.chart._animationsDisabled||a||r==="none",v=s+n,b=e.length;let k=s>0&&this.getParsed(s-1);for(let j=0;j<b;++j){const S=e[j],C=g?S:{};if(j<s||j>=v){C.skip=!0;continue}const _=this.getParsed(j),P=je(_[m]),N=C[f]=o.getPixelForValue(_[f],j),L=C[m]=a||P?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,_,c):_[m],j);C.skip=isNaN(N)||isNaN(L)||P,C.stop=j>0&&Math.abs(_[f]-k[f])>x,y&&(C.parsed=_,C.raw=d.data[j]),h&&(C.options=u||this.resolveDataElementOptions(j,S.active?"active":r)),g||this.updateElement(S,j,C,r),k=_}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const a=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,a,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}ne(fl,"id","line"),ne(fl,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),ne(fl,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Zn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class Cf{constructor(e){ne(this,"options");this.options=e||{}}static override(e){Object.assign(Cf.prototype,e)}init(){}formats(){return Zn()}parse(){return Zn()}format(){return Zn()}add(){return Zn()}diff(){return Zn()}startOf(){return Zn()}endOf(){return Zn()}}var gP={_date:Cf};function xP(t,e,s,n){const{controller:r,data:a,_sorted:o}=t,l=r._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&a.length){const d=l._reversePixels?$C:dr;if(n){if(r._sharedOptions){const u=a[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=d(a,e,s-h),m=d(a,e,s+h);return{lo:f.lo,hi:m.hi}}}}else{const u=d(a,e,s);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,u.lo+1).reverse().findIndex(y=>!je(y[h.axis]));u.lo-=Math.max(0,m);const p=f.slice(u.hi).findIndex(y=>!je(y[h.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:a.length-1}}function ao(t,e,s,n,r){const a=t.getSortedVisibleDatasetMetas(),o=s[e];for(let l=0,c=a.length;l<c;++l){const{index:d,data:u}=a[l],{lo:h,hi:f}=xP(a[l],e,o,r);for(let m=h;m<=f;++m){const p=u[m];p.skip||n(p,d,m)}}}function yP(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,r){const a=e?Math.abs(n.x-r.x):0,o=s?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(a,2)+Math.pow(o,2))}}function Sd(t,e,s,n,r){const a=[];return!r&&!t.isPointInArea(e)||ao(t,s,e,function(l,c,d){!r&&!en(l,t.chartArea,0)||l.inRange(e.x,e.y,n)&&a.push({element:l,datasetIndex:c,index:d})},!0),a}function vP(t,e,s,n){let r=[];function a(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],n),{angle:h}=IC(o,{x:e.x,y:e.y});bb(h,d,u)&&r.push({element:o,datasetIndex:l,index:c})}return ao(t,s,e,a),r}function bP(t,e,s,n,r,a){let o=[];const l=yP(s);let c=Number.POSITIVE_INFINITY;function d(u,h,f){const m=u.inRange(e.x,e.y,r);if(n&&!m)return;const p=u.getCenterPoint(r);if(!(!!a||t.isPointInArea(p))&&!m)return;const x=l(e,p);x<c?(o=[{element:u,datasetIndex:h,index:f}],c=x):x===c&&o.push({element:u,datasetIndex:h,index:f})}return ao(t,s,e,d),o}function Cd(t,e,s,n,r,a){return!a&&!t.isPointInArea(e)?[]:s==="r"&&!n?vP(t,e,s,r):bP(t,e,s,n,r,a)}function fg(t,e,s,n,r){const a=[],o=s==="x"?"inXRange":"inYRange";let l=!1;return ao(t,s,e,(c,d,u)=>{c[o]&&c[o](e[s],r)&&(a.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,r))}),n&&!l?[]:a}var wP={evaluateInteractionItems:ao,modes:{index(t,e,s,n){const r=rr(e,t),a=s.axis||"x",o=s.includeInvisible||!1,l=s.intersect?Sd(t,r,a,n,o):Cd(t,r,a,!1,n,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,s,n){const r=rr(e,t),a=s.axis||"xy",o=s.includeInvisible||!1;let l=s.intersect?Sd(t,r,a,n,o):Cd(t,r,a,!1,n,o);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(t,e,s,n){const r=rr(e,t),a=s.axis||"xy",o=s.includeInvisible||!1;return Sd(t,r,a,n,o)},nearest(t,e,s,n){const r=rr(e,t),a=s.axis||"xy",o=s.includeInvisible||!1;return Cd(t,r,a,s.intersect,n,o)},x(t,e,s,n){const r=rr(e,t);return fg(t,r,"x",s.intersect,n)},y(t,e,s,n){const r=rr(e,t);return fg(t,r,"y",s.intersect,n)}}};const Hb=["left","top","right","bottom"];function Ka(t,e){return t.filter(s=>s.pos===e)}function mg(t,e){return t.filter(s=>Hb.indexOf(s.pos)===-1&&s.box.axis===e)}function Ya(t,e){return t.sort((s,n)=>{const r=e?n:s,a=e?s:n;return r.weight===a.weight?r.index-a.index:r.weight-a.weight})}function jP(t){const e=[];let s,n,r,a,o,l;for(s=0,n=(t||[]).length;s<n;++s)r=t[s],{position:a,options:{stack:o,stackWeight:l=1}}=r,e.push({index:s,box:r,pos:a,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&a+o,stackWeight:l});return e}function NP(t){const e={};for(const s of t){const{stack:n,pos:r,stackWeight:a}=s;if(!n||!Hb.includes(r))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=a}return e}function _P(t,e){const s=NP(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let a,o,l;for(a=0,o=t.length;a<o;++a){l=t[a];const{fullSize:c}=l.box,d=s[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*n:c&&e.availableWidth,l.height=r):(l.width=n,l.height=u?u*r:c&&e.availableHeight)}return s}function kP(t){const e=jP(t),s=Ya(e.filter(d=>d.box.fullSize),!0),n=Ya(Ka(e,"left"),!0),r=Ya(Ka(e,"right")),a=Ya(Ka(e,"top"),!0),o=Ya(Ka(e,"bottom")),l=mg(e,"x"),c=mg(e,"y");return{fullSize:s,leftAndTop:n.concat(a),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:Ka(e,"chartArea"),vertical:n.concat(r).concat(c),horizontal:a.concat(o).concat(l)}}function pg(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function Wb(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function SP(t,e,s,n){const{pos:r,box:a}=s,o=t.maxPadding;if(!ve(r)){s.size&&(t[r]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?a.height:a.width),s.size=h.size/h.count,t[r]+=s.size}a.getPadding&&Wb(o,a.getPadding());const l=Math.max(0,e.outerWidth-pg(o,t,"left","right")),c=Math.max(0,e.outerHeight-pg(o,t,"top","bottom")),d=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,s.horizontal?{same:d,other:u}:{same:u,other:d}}function CP(t){const e=t.maxPadding;function s(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function PP(t,e){const s=e.maxPadding;function n(r){const a={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{a[o]=Math.max(e[o],s[o])}),a}return n(t?["left","right"]:["top","bottom"])}function ri(t,e,s,n){const r=[];let a,o,l,c,d,u;for(a=0,o=t.length,d=0;a<o;++a){l=t[a],c=l.box,c.update(l.width||e.w,l.height||e.h,PP(l.horizontal,e));const{same:h,other:f}=SP(e,s,l,n);d|=h&&r.length,u=u||f,c.fullSize||r.push(l)}return d&&ri(r,e,s,n)||u}function Ho(t,e,s,n,r){t.top=s,t.left=e,t.right=e+n,t.bottom=s+r,t.width=n,t.height=r}function gg(t,e,s,n){const r=s.padding;let{x:a,y:o}=e;for(const l of t){const c=l.box,d=n[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,f=d.size||c.height;Wi(d.start)&&(o=d.start),c.fullSize?Ho(c,r.left,o,s.outerWidth-r.right-r.left,f):Ho(c,e.left+d.placed,o,h,f),d.start=o,d.placed+=h,o=c.bottom}else{const h=e.h*u,f=d.size||c.width;Wi(d.start)&&(a=d.start),c.fullSize?Ho(c,a,r.top,f,s.outerHeight-r.bottom-r.top):Ho(c,a,e.top+d.placed,f,h),d.start=a,d.placed+=h,a=c.right}}e.x=a,e.y=o}var os={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const r=kt(t.options.layout.padding),a=Math.max(e-r.width,0),o=Math.max(s-r.height,0),l=kP(t.boxes),c=l.vertical,d=l.horizontal;Se(t.boxes,y=>{typeof y.beforeLayout=="function"&&y.beforeLayout()});const u=c.reduce((y,x)=>x.box.options&&x.box.options.display===!1?y:y+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:r,availableWidth:a,availableHeight:o,vBoxMaxWidth:a/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);Wb(f,kt(n));const m=Object.assign({maxPadding:f,w:a,h:o,x:r.left,y:r.top},r),p=_P(c.concat(d),h);ri(l.fullSize,m,h,p),ri(c,m,h,p),ri(d,m,h,p)&&ri(c,m,h,p),CP(m),gg(l.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,gg(l.rightAndBottom,m,h,p),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},Se(l.chartArea,y=>{const x=y.box;Object.assign(x,t.chartArea),x.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Vb{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,r){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,r?Math.floor(s/r):n)}}isAttached(e){return!0}updateConfig(e){}}class EP extends Vb{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const ml="$chartjs",AP={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},xg=t=>t===null||t==="";function TP(t,e){const s=t.style,n=t.getAttribute("height"),r=t.getAttribute("width");if(t[ml]={initial:{height:n,width:r,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",xg(r)){const a=eg(t,"width");a!==void 0&&(t.width=a)}if(xg(n))if(t.style.height==="")t.height=t.width/(e||2);else{const a=eg(t,"height");a!==void 0&&(t.height=a)}return t}const qb=D4?{passive:!0}:!1;function LP(t,e,s){t&&t.addEventListener(e,s,qb)}function MP(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,qb)}function DP(t,e){const s=AP[t.type]||t.type,{x:n,y:r}=rr(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:r!==void 0?r:null}}function Ql(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function OP(t,e,s){const n=t.canvas,r=new MutationObserver(a=>{let o=!1;for(const l of a)o=o||Ql(l.addedNodes,n),o=o&&!Ql(l.removedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}function IP(t,e,s){const n=t.canvas,r=new MutationObserver(a=>{let o=!1;for(const l of a)o=o||Ql(l.removedNodes,n),o=o&&!Ql(l.addedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}const Gi=new Map;let yg=0;function Gb(){const t=window.devicePixelRatio;t!==yg&&(yg=t,Gi.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function RP(t,e){Gi.size||window.addEventListener("resize",Gb),Gi.set(t,e)}function FP(t){Gi.delete(t),Gi.size||window.removeEventListener("resize",Gb)}function $P(t,e,s){const n=t.canvas,r=n&&Sf(n);if(!r)return;const a=_b((l,c)=>{const d=r.clientWidth;s(l,c),d<r.clientWidth&&s()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||a(d,u)});return o.observe(r),RP(t,a),o}function Pd(t,e,s){s&&s.disconnect(),e==="resize"&&FP(t)}function zP(t,e,s){const n=t.canvas,r=_b(a=>{t.ctx!==null&&s(DP(a,t))},t);return LP(n,e,r),r}class UP extends Vb{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(TP(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[ml])return!1;const n=s[ml].initial;["height","width"].forEach(a=>{const o=n[a];je(o)?s.removeAttribute(a):s.setAttribute(a,o)});const r=n.style||{};return Object.keys(r).forEach(a=>{s.style[a]=r[a]}),s.width=s.width,delete s[ml],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const r=e.$proxies||(e.$proxies={}),o={attach:OP,detach:IP,resize:$P}[s]||zP;r[s]=o(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),r=n[s];if(!r)return;({attach:Pd,detach:Pd,resize:Pd}[s]||MP)(e,s,r),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,r){return M4(e,s,n,r)}isAttached(e){const s=e&&Sf(e);return!!(s&&s.isConnected)}}function BP(t){return!kf()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?EP:UP}class $s{constructor(){ne(this,"x");ne(this,"y");ne(this,"active",!1);ne(this,"options");ne(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return Vi(this.x)&&Vi(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const r={};return e.forEach(a=>{r[a]=n[a]&&n[a].active()?n[a]._to:this[a]}),r}}ne($s,"defaults",{}),ne($s,"defaultRoutes");function HP(t,e){const s=t.options.ticks,n=WP(t),r=Math.min(s.maxTicksLimit||n,n),a=s.major.enabled?qP(e):[],o=a.length,l=a[0],c=a[o-1],d=[];if(o>r)return GP(e,d,a,o/r),d;const u=VP(a,e,r);if(o>0){let h,f;const m=o>1?Math.round((c-l)/(o-1)):null;for(Wo(e,d,u,je(m)?0:l-m,l),h=0,f=o-1;h<f;h++)Wo(e,d,u,a[h],a[h+1]);return Wo(e,d,u,c,je(m)?e.length:c+m),d}return Wo(e,d,u),d}function WP(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),r=t._maxLength/s;return Math.floor(Math.min(n,r))}function VP(t,e,s){const n=KP(t),r=e.length/s;if(!n)return Math.max(r,1);const a=MC(n);for(let o=0,l=a.length-1;o<l;o++){const c=a[o];if(c>r)return c}return Math.max(r,1)}function qP(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function GP(t,e,s,n){let r=0,a=s[0],o;for(n=Math.ceil(n),o=0;o<t.length;o++)o===a&&(e.push(t[o]),r++,a=s[r*n])}function Wo(t,e,s,n,r){const a=fe(n,0),o=Math.min(fe(r,t.length),t.length);let l=0,c,d,u;for(s=Math.ceil(s),r&&(c=r-n,s=c/Math.floor(c/s)),u=a;u<0;)l++,u=Math.round(a+l*s);for(d=Math.max(a,0);d<o;d++)d===u&&(e.push(t[d]),l++,u=Math.round(a+l*s))}function KP(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const YP=t=>t==="left"?"right":t==="right"?"left":t,vg=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,bg=(t,e)=>Math.min(e||t,t);function wg(t,e){const s=[],n=t.length/e,r=t.length;let a=0;for(;a<r;a+=n)s.push(t[Math.floor(a)]);return s}function JP(t,e,s){const n=t.ticks.length,r=Math.min(e,n-1),a=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(r),d;if(!(s&&(n===1?d=Math.max(c-a,o-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(r-1))/2,c+=r<e?d:-d,c<a-l||c>o+l)))return c}function QP(t,e){Se(t,s=>{const n=s.gc,r=n.length/2;let a;if(r>e){for(a=0;a<r;++a)delete s.data[n[a]];n.splice(0,r)}})}function Ja(t){return t.drawTicks?t.tickLength:0}function jg(t,e){if(!t.display)return 0;const s=rt(t.font,e),n=kt(t.padding);return(Oe(t.text)?t.text.length:1)*s.lineHeight+n.height}function XP(t,e){return Gn(t,{scale:e,type:"scale"})}function ZP(t,e,s){return Gn(t,{tick:s,index:e,type:"tick"})}function eE(t,e,s){let n=vf(t);return(s&&e!=="right"||!s&&e==="right")&&(n=YP(n)),n}function tE(t,e,s,n){const{top:r,left:a,bottom:o,right:l,chart:c}=t,{chartArea:d,scales:u}=c;let h=0,f,m,p;const y=o-r,x=l-a;if(t.isHorizontal()){if(m=jt(n,a,l),ve(s)){const g=Object.keys(s)[0],v=s[g];p=u[g].getPixelForValue(v)+y-e}else s==="center"?p=(d.bottom+d.top)/2+y-e:p=vg(t,s,e);f=l-a}else{if(ve(s)){const g=Object.keys(s)[0],v=s[g];m=u[g].getPixelForValue(v)-x+e}else s==="center"?m=(d.left+d.right)/2-x+e:m=vg(t,s,e);p=jt(n,o,r),h=s==="left"?-Jt:Jt}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class Cr extends $s{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:r}=this;return e=qt(e,Number.POSITIVE_INFINITY),s=qt(s,Number.NEGATIVE_INFINITY),n=qt(n,Number.POSITIVE_INFINITY),r=qt(r,Number.NEGATIVE_INFINITY),{min:qt(e,n),max:qt(s,r),minDefined:Ge(e),maxDefined:Ge(s)}}getMinMax(e){let{min:s,max:n,minDefined:r,maxDefined:a}=this.getUserBounds(),o;if(r&&a)return{min:s,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,e),r||(s=Math.min(s,o.min)),a||(n=Math.max(n,o.max));return s=a&&s>n?n:s,n=r&&s>n?s:n,{min:qt(s,qt(n,s)),max:qt(n,qt(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){Te(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:r,grace:a,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=u4(this,a,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?wg(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=HP(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){Te(this.options.afterUpdate,[this])}beforeSetDimensions(){Te(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){Te(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),Te(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){Te(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,r,a;for(n=0,r=e.length;n<r;n++)a=e[n],a.label=Te(s.callback,[a.value,n,e],this)}afterTickToLabelConversion(){Te(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){Te(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=bg(this.ticks.length,e.ticks.maxTicksLimit),r=s.minRotation||0,a=s.maxRotation;let o=r,l,c,d;if(!this._isVisible()||!s.display||r>=a||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,m=Qt(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/n:m/(n-1),h+6>l&&(l=m/(n-(e.offset?.5:1)),c=this.maxHeight-Ja(e.grid)-s.padding-jg(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),o=xf(Math.min(Math.asin(Qt((u.highest.height+6)/l,-1,1)),Math.asin(Qt(c/d,-1,1))-Math.asin(Qt(f/d,-1,1)))),o=Math.max(r,Math.min(a,o))),this.labelRotation=o}afterCalculateLabelRotation(){Te(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){Te(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:r,grid:a}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=jg(r,s.options.font);if(l?(e.width=this.maxWidth,e.height=Ja(a)+c):(e.height=this.maxHeight,e.width=Ja(a)+c),n.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),m=n.padding*2,p=Sn(this.labelRotation),y=Math.cos(p),x=Math.sin(p);if(l){const g=n.mirror?0:x*h.width+y*f.height;e.height=Math.min(this.maxHeight,e.height+g+m)}else{const g=n.mirror?0:y*h.width+x*f.height;e.width=Math.min(this.maxWidth,e.width+g+m)}this._calculatePadding(d,u,x,y)}}this._handleMargins(),l?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,r){const{ticks:{align:a,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?d?(f=r*e.width,m=n*s.height):(f=n*e.height,m=r*s.width):a==="start"?m=s.width:a==="end"?f=e.width:a!=="inner"&&(f=e.width/2,m=s.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+o)*this.width/(this.width-h),0)}else{let u=s.height/2,h=e.height/2;a==="start"?(u=0,h=e.height):a==="end"&&(u=s.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){Te(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)je(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=wg(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:r,_longestTextCache:a}=this,o=[],l=[],c=Math.floor(s/bg(s,n));let d=0,u=0,h,f,m,p,y,x,g,v,b,k,j;for(h=0;h<s;h+=c){if(p=e[h].label,y=this._resolveTickFontOptions(h),r.font=x=y.string,g=a[x]=a[x]||{data:{},gc:[]},v=y.lineHeight,b=k=0,!je(p)&&!Oe(p))b=Yl(r,g.data,g.gc,b,p),k=v;else if(Oe(p))for(f=0,m=p.length;f<m;++f)j=p[f],!je(j)&&!Oe(j)&&(b=Yl(r,g.data,g.gc,b,j),k+=v);o.push(b),l.push(k),d=Math.max(b,d),u=Math.max(k,u)}QP(a,s);const S=o.indexOf(d),C=l.indexOf(u),_=P=>({width:o[P]||0,height:l[P]||0});return{first:_(0),last:_(s-1),widest:_(S),highest:_(C),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return FC(this._alignToPixels?Xn(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=ZP(this.getContext(),e,n))}return this.$context||(this.$context=XP(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=Sn(this.labelRotation),n=Math.abs(Math.cos(s)),r=Math.abs(Math.sin(s)),a=this._getLabelSizes(),o=e.autoSkipPadding||0,l=a?a.widest.width+o:0,c=a?a.highest.height+o:0;return this.isHorizontal()?c*n>l*r?l/n:c/r:c*r<l*n?c/n:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,r=this.options,{grid:a,position:o,border:l}=r,c=a.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=Ja(a),m=[],p=l.setContext(this.getContext()),y=p.display?p.width:0,x=y/2,g=function(U){return Xn(n,U,y)};let v,b,k,j,S,C,_,P,N,L,A,E;if(o==="top")v=g(this.bottom),C=this.bottom-f,P=v-x,L=g(e.top)+x,E=e.bottom;else if(o==="bottom")v=g(this.top),L=e.top,E=g(e.bottom)-x,C=v+x,P=this.top+f;else if(o==="left")v=g(this.right),S=this.right-f,_=v-x,N=g(e.left)+x,A=e.right;else if(o==="right")v=g(this.left),N=e.left,A=g(e.right)-x,S=v+x,_=this.left+f;else if(s==="x"){if(o==="center")v=g((e.top+e.bottom)/2+.5);else if(ve(o)){const U=Object.keys(o)[0],Z=o[U];v=g(this.chart.scales[U].getPixelForValue(Z))}L=e.top,E=e.bottom,C=v+x,P=C+f}else if(s==="y"){if(o==="center")v=g((e.left+e.right)/2);else if(ve(o)){const U=Object.keys(o)[0],Z=o[U];v=g(this.chart.scales[U].getPixelForValue(Z))}S=v-x,_=S-f,N=e.left,A=e.right}const D=fe(r.ticks.maxTicksLimit,h),F=Math.max(1,Math.ceil(h/D));for(b=0;b<h;b+=F){const U=this.getContext(b),Z=a.setContext(U),R=l.setContext(U),V=Z.lineWidth,G=Z.color,H=R.dash||[],K=R.dashOffset,ee=Z.tickWidth,ae=Z.tickColor,ge=Z.tickBorderDash||[],xe=Z.tickBorderDashOffset;k=JP(this,b,c),k!==void 0&&(j=Xn(n,k,V),d?S=_=N=A=j:C=P=L=E=j,m.push({tx1:S,ty1:C,tx2:_,ty2:P,x1:N,y1:L,x2:A,y2:E,width:V,color:G,borderDash:H,borderDashOffset:K,tickWidth:ee,tickColor:ae,tickBorderDash:ge,tickBorderDashOffset:xe}))}return this._ticksLength=h,this._borderValue=v,m}_computeLabelItems(e){const s=this.axis,n=this.options,{position:r,ticks:a}=n,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=a,f=Ja(n.grid),m=f+u,p=h?-u:m,y=-Sn(this.labelRotation),x=[];let g,v,b,k,j,S,C,_,P,N,L,A,E="middle";if(r==="top")S=this.bottom-p,C=this._getXAxisLabelAlignment();else if(r==="bottom")S=this.top+p,C=this._getXAxisLabelAlignment();else if(r==="left"){const F=this._getYAxisLabelAlignment(f);C=F.textAlign,j=F.x}else if(r==="right"){const F=this._getYAxisLabelAlignment(f);C=F.textAlign,j=F.x}else if(s==="x"){if(r==="center")S=(e.top+e.bottom)/2+m;else if(ve(r)){const F=Object.keys(r)[0],U=r[F];S=this.chart.scales[F].getPixelForValue(U)+m}C=this._getXAxisLabelAlignment()}else if(s==="y"){if(r==="center")j=(e.left+e.right)/2-m;else if(ve(r)){const F=Object.keys(r)[0],U=r[F];j=this.chart.scales[F].getPixelForValue(U)}C=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(c==="start"?E="top":c==="end"&&(E="bottom"));const D=this._getLabelSizes();for(g=0,v=l.length;g<v;++g){b=l[g],k=b.label;const F=a.setContext(this.getContext(g));_=this.getPixelForTick(g)+a.labelOffset,P=this._resolveTickFontOptions(g),N=P.lineHeight,L=Oe(k)?k.length:1;const U=L/2,Z=F.color,R=F.textStrokeColor,V=F.textStrokeWidth;let G=C;o?(j=_,C==="inner"&&(g===v-1?G=this.options.reverse?"left":"right":g===0?G=this.options.reverse?"right":"left":G="center"),r==="top"?d==="near"||y!==0?A=-L*N+N/2:d==="center"?A=-D.highest.height/2-U*N+N:A=-D.highest.height+N/2:d==="near"||y!==0?A=N/2:d==="center"?A=D.highest.height/2-U*N:A=D.highest.height-L*N,h&&(A*=-1),y!==0&&!F.showLabelBackdrop&&(j+=N/2*Math.sin(y))):(S=_,A=(1-L)*N/2);let H;if(F.showLabelBackdrop){const K=kt(F.backdropPadding),ee=D.heights[g],ae=D.widths[g];let ge=A-K.top,xe=0-K.left;switch(E){case"middle":ge-=ee/2;break;case"bottom":ge-=ee;break}switch(C){case"center":xe-=ae/2;break;case"right":xe-=ae;break;case"inner":g===v-1?xe-=ae:g>0&&(xe-=ae/2);break}H={left:xe,top:ge,width:ae+K.width,height:ee+K.height,color:F.backdropColor}}x.push({label:k,font:P,textOffset:A,options:{rotation:y,color:Z,strokeColor:R,strokeWidth:V,textAlign:G,textBaseline:E,translation:[j,S],backdrop:H}})}return x}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-Sn(this.labelRotation))return e==="top"?"left":"right";let r="center";return s.align==="start"?r="left":s.align==="end"?r="right":s.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:r,padding:a}}=this.options,o=this._getLabelSizes(),l=e+a,c=o.widest.width;let d,u;return s==="left"?r?(u=this.right+a,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u=this.left)):s==="right"?r?(u=this.left+a,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:r,width:a,height:o}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,r,a,o),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const r=this.ticks.findIndex(a=>a.value===e);return r>=0?s.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let a,o;const l=(c,d,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(s.display)for(a=0,o=r.length;a<o;++a){const c=r[a];s.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:r}}=this,a=n.setContext(this.getContext()),o=n.display?a.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=Xn(e,this.left,o)-o/2,u=Xn(e,this.right,l)+l/2,h=f=c):(h=Xn(e,this.top,o)-o/2,f=Xn(e,this.bottom,l)+l/2,d=u=c),s.save(),s.lineWidth=a.width,s.strokeStyle=a.color,s.beginPath(),s.moveTo(d,h),s.lineTo(u,f),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&Ec(n,r);const a=this.getLabelItems(e);for(const o of a){const l=o.options,c=o.font,d=o.label,u=o.textOffset;jr(n,d,0,u,c,l)}r&&Ac(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:r}}=this;if(!n.display)return;const a=rt(n.font),o=kt(n.padding),l=n.align;let c=a.lineHeight/2;s==="bottom"||s==="center"||ve(s)?(c+=o.bottom,Oe(n.text)&&(c+=a.lineHeight*(n.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=tE(this,c,s,l);jr(e,n.text,0,0,a,{color:n.color,maxWidth:h,rotation:f,textAlign:eE(l,s,r),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=fe(e.grid&&e.grid.z,-1),r=fe(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==Cr.prototype.draw?[{z:s,draw:a=>{this.draw(a)}}]:[{z:n,draw:a=>{this.drawBackground(),this.drawGrid(a),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:s,draw:a=>{this.drawLabels(a)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let a,o;for(a=0,o=s.length;a<o;++a){const l=s[a];l[n]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return rt(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class Vo{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;rE(s)&&(n=this.register(s));const r=this.items,a=e.id,o=this.scope+"."+a;if(!a)throw new Error("class does not have id: "+e);return a in r||(r[a]=e,sE(e,o,n),this.override&&Ke.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,r=this.scope;n in s&&delete s[n],r&&n in Ke[r]&&(delete Ke[r][n],this.override&&delete wr[n])}}function sE(t,e,s){const n=Hi(Object.create(null),[s?Ke.get(s):{},Ke.get(e),t.defaults]);Ke.set(e,n),t.defaultRoutes&&nE(e,t.defaultRoutes),t.descriptors&&Ke.describe(e,t.descriptors)}function nE(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),r=n.pop(),a=[t].concat(n).join("."),o=e[s].split("."),l=o.pop(),c=o.join(".");Ke.route(a,r,c,l)})}function rE(t){return"id"in t&&"defaults"in t}class aE{constructor(){this.controllers=new Vo(ca,"datasets",!0),this.elements=new Vo($s,"elements"),this.plugins=new Vo(Object,"plugins"),this.scales=new Vo(Cr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(r=>{const a=n||this._getRegistryForType(r);n||a.isForType(r)||a===this.plugins&&r.id?this._exec(e,a,r):Se(r,o=>{const l=n||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,s,n){const r=gf(e);Te(n["before"+r],[],n),s[e](n),Te(n["after"+r],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const r=s.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var As=new aE;class iE{constructor(){this._init=[]}notify(e,s,n,r){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const a=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(a,e,s,n);return s==="afterDestroy"&&(this._notify(a,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,s,n,r){r=r||{};for(const a of e){const o=a.plugin,l=o[n],c=[s,r,a.options];if(Te(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){je(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,r=fe(n.options&&n.options.plugins,{}),a=oE(n);return r===!1&&!s?[]:cE(e,a,r,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,r=(a,o)=>a.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(s,n),e,"stop"),this._notify(r(n,s),e,"start")}}function oE(t){const e={},s=[],n=Object.keys(As.plugins.items);for(let a=0;a<n.length;a++)s.push(As.getPlugin(n[a]));const r=t.plugins||[];for(let a=0;a<r.length;a++){const o=r[a];s.indexOf(o)===-1&&(s.push(o),e[o.id]=!0)}return{plugins:s,localIds:e}}function lE(t,e){return!e&&t===!1?null:t===!0?{}:t}function cE(t,{plugins:e,localIds:s},n,r){const a=[],o=t.getContext();for(const l of e){const c=l.id,d=lE(n[c],r);d!==null&&a.push({plugin:l,options:dE(t.config,{plugin:l,local:s[c]},d,o)})}return a}function dE(t,{plugin:e,local:s},n,r){const a=t.pluginScopeKeys(e),o=t.getOptionScopes(n,a);return s&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function Wu(t,e){const s=Ke.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function uE(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function hE(t,e){return t===e?"_index_":"_value_"}function Ng(t){if(t==="x"||t==="y"||t==="r")return t}function fE(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function Vu(t,...e){if(Ng(t))return t;for(const s of e){const n=s.axis||fE(s.position)||t.length>1&&Ng(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function _g(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function mE(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return _g(t,"x",s[0])||_g(t,"y",s[0])}return{}}function pE(t,e){const s=wr[t.type]||{scales:{}},n=e.scales||{},r=Wu(t.type,e),a=Object.create(null);return Object.keys(n).forEach(o=>{const l=n[o];if(!ve(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=Vu(o,l,mE(o,t),Ke.scales[l.type]),d=hE(c,r),u=s.scales||{};a[o]=vi(Object.create(null),[{axis:c},l,u[c],u[d]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||Wu(l,e),u=(wr[l]||{}).scales||{};Object.keys(u).forEach(h=>{const f=uE(h,c),m=o[f+"AxisID"]||f;a[m]=a[m]||Object.create(null),vi(a[m],[{axis:f},n[m],u[h]])})}),Object.keys(a).forEach(o=>{const l=a[o];vi(l,[Ke.scales[l.type],Ke.scale])}),a}function Kb(t){const e=t.options||(t.options={});e.plugins=fe(e.plugins,{}),e.scales=pE(t,e)}function Yb(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function gE(t){return t=t||{},t.data=Yb(t.data),Kb(t),t}const kg=new Map,Jb=new Set;function qo(t,e){let s=kg.get(t);return s||(s=e(),kg.set(t,s),Jb.add(s)),s}const Qa=(t,e,s)=>{const n=ja(e,s);n!==void 0&&t.add(n)};class xE{constructor(e){this._config=gE(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=Yb(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),Kb(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return qo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return qo(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return qo(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return qo(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let r=n.get(e);return(!r||s)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,s,n){const{options:r,type:a}=this,o=this._cachedScopes(e,n),l=o.get(s);if(l)return l;const c=new Set;s.forEach(u=>{e&&(c.add(e),u.forEach(h=>Qa(c,e,h))),u.forEach(h=>Qa(c,r,h)),u.forEach(h=>Qa(c,wr[a]||{},h)),u.forEach(h=>Qa(c,Ke,h)),u.forEach(h=>Qa(c,Bu,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),Jb.has(s)&&o.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,wr[s]||{},Ke.datasets[s]||{},{type:s},Ke,Bu]}resolveNamedOptions(e,s,n,r=[""]){const a={$shared:!0},{resolver:o,subPrefixes:l}=Sg(this._resolverCache,e,r);let c=o;if(vE(o,s)){a.$shared=!1,n=Bn(n)?n():n;const d=this.createResolver(e,n,l);c=Na(o,n,d)}for(const d of s)a[d]=c[d];return a}createResolver(e,s,n=[""],r){const{resolver:a}=Sg(this._resolverCache,e,n);return ve(s)?Na(a,s,void 0,r):a}}function Sg(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const r=s.join();let a=n.get(r);return a||(a={resolver:jf(e,s),subPrefixes:s.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,a)),a}const yE=t=>ve(t)&&Object.getOwnPropertyNames(t).some(e=>Bn(t[e]));function vE(t,e){const{isScriptable:s,isIndexable:n}=Eb(t);for(const r of e){const a=s(r),o=n(r),l=(o||a)&&t[r];if(a&&(Bn(l)||yE(l))||o&&Oe(l))return!0}return!1}var bE="4.5.0";const wE=["top","bottom","left","right","chartArea"];function Cg(t,e){return t==="top"||t==="bottom"||wE.indexOf(t)===-1&&e==="x"}function Pg(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function Eg(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),Te(s&&s.onComplete,[t],e)}function jE(t){const e=t.chart,s=e.options.animation;Te(s&&s.onProgress,[t],e)}function Qb(t){return kf()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const pl={},Ag=t=>{const e=Qb(t);return Object.values(pl).filter(s=>s.canvas===e).pop()};function NE(t,e,s){const n=Object.keys(t);for(const r of n){const a=+r;if(a>=e){const o=t[r];delete t[r],(s>0||a>e)&&(t[a+s]=o)}}}function _E(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}var mn;let Lc=(mn=class{static register(...e){As.add(...e),Tg()}static unregister(...e){As.remove(...e),Tg()}constructor(e,s){const n=this.config=new xE(s),r=Qb(e),a=Ag(r);if(a)throw new Error("Canvas is already in use. Chart with ID '"+a.id+"' must be destroyed before the canvas with ID '"+a.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||BP(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=_C(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new iE,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=BC(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],pl[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Vs.listen(this,"complete",Eg),Vs.listen(this,"progress",jE),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:r,_aspectRatio:a}=this;return je(e)?s&&a?a:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return As}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():Z0(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return J0(this.canvas,this.ctx),this}stop(){return Vs.stop(this),this}resize(e,s){Vs.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,r=this.canvas,a=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,s,a),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,Z0(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),Te(n.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};Se(s,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,r=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let a=[];s&&(a=a.concat(Object.keys(s).map(o=>{const l=s[o],c=Vu(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),Se(a,o=>{const l=o.options,c=l.id,d=Vu(c,l),u=fe(l.type,o.dtype);(l.position===void 0||Cg(l.position,d)!==Cg(o.dposition))&&(l.position=o.dposition),r[c]=!0;let h=null;if(c in n&&n[c].type===u)h=n[c];else{const f=As.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(l,e)}),Se(r,(o,l)=>{o||delete n[l]}),Se(n,o=>{os.configure(this,o,o.options),os.addBox(this,o)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((r,a)=>r.index-a.index),n>s){for(let r=s;r<n;++r)this._destroyDatasetMeta(r);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(Pg("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,r)=>{s.filter(a=>a===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=s.length;n<r;n++){const a=s[n];let o=this.getDatasetMeta(n);const l=a.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=a.indexAxis||Wu(l,this.options),o.order=a.order||0,o.index=n,o.label=""+a.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const c=As.getController(l),{datasetElementType:d,dataElementType:u}=Ke.datasets[l];Object.assign(c,{dataElementType:As.getElement(u),datasetElementType:d&&As.getElement(d)}),o.controller=new c(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){Se(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const a=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!r&&a.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||Se(a,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Pg("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){Se(this.scales,e=>{os.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!U0(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:a}of s){const o=n==="_removeElements"?-a:a;NE(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=a=>new Set(e.filter(o=>o[0]===a).map((o,l)=>l+","+o.splice(1).join(","))),r=n(0);for(let a=1;a<s;a++)if(!U0(r,n(a)))return;return Array.from(r).map(a=>a.split(",")).map(a=>({method:a[1],start:+a[2],count:+a[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;os.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],Se(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,a)=>{r._idx=a}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,Bn(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(s),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Vs.has(this)?this.attached&&!Vs.running(this)&&Vs.start(this):(this.draw(),Eg({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let r,a;for(r=0,a=s.length;r<a;++r){const o=s[r];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=$b(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&Ec(s,r),e.controller.draw(),r&&Ac(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return en(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,r){const a=wP.modes[s];return typeof a=="function"?a(this,e,n,r):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let r=n.filter(a=>a&&a._dataset===s).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=Gn(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const r=n?"show":"hide",a=this.getDatasetMeta(e),o=a.controller._resolveAnimations(void 0,r);Wi(s)?(a.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(a,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),Vs.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),J0(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete pl[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(a,o)=>{s.addEventListener(this,a,o),e[a]=o},r=(a,o,l)=>{a.offsetX=o,a.offsetY=l,this._eventHandler(a)};Se(this.options.events,a=>n(a,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(c,d)=>{s.addEventListener(this,c,d),e[c]=d},r=(c,d)=>{e[c]&&(s.removeEventListener(this,c,d),delete e[c])},a=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",a),n("detach",o)};o=()=>{this.attached=!1,r("resize",a),this._stop(),this._resize(0,0),n("attach",l)},s.isAttached(this.canvas)?l():o()}unbindEvents(){Se(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},Se(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const r=n?"set":"remove";let a,o,l,c;for(s==="dataset"&&(a=this.getDatasetMeta(e[0].datasetIndex),a.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:a,index:o})=>{const l=this.getDatasetMeta(a);if(!l)throw new Error("No dataset found at index "+a);return{datasetIndex:a,element:l.data[o],index:o}});!ql(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const r=this.options.hover,a=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=a(s,e),l=n?e:a(e,s);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const a=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(a||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:r=[],options:a}=this,o=s,l=this._getActiveElements(e,r,n,o),c=AC(e),d=_E(e,this._lastEvent,n,c);n&&(this._lastEvent=null,Te(a.onHover,[e,l,this],this),c&&Te(a.onClick,[e,l,this],this));const u=!ql(l,r);return(u||s)&&(this._active=l,this._updateHoverStyles(l,r,s)),this._lastEvent=d,u}_getActiveElements(e,s,n,r){if(e.type==="mouseout")return[];if(!n)return s;const a=this.options.hover;return this.getElementsAtEventForMode(e,a.mode,a,r)}},ne(mn,"defaults",Ke),ne(mn,"instances",pl),ne(mn,"overrides",wr),ne(mn,"registry",As),ne(mn,"version",bE),ne(mn,"getChart",Ag),mn);function Tg(){return Se(Lc.instances,t=>t._plugins.invalidate())}function Xb(t,e,s=e){t.lineCap=fe(s.borderCapStyle,e.borderCapStyle),t.setLineDash(fe(s.borderDash,e.borderDash)),t.lineDashOffset=fe(s.borderDashOffset,e.borderDashOffset),t.lineJoin=fe(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=fe(s.borderWidth,e.borderWidth),t.strokeStyle=fe(s.borderColor,e.borderColor)}function kE(t,e,s){t.lineTo(s.x,s.y)}function SE(t){return t.stepped?s4:t.tension||t.cubicInterpolationMode==="monotone"?n4:kE}function Zb(t,e,s={}){const n=t.length,{start:r=0,end:a=n-1}=s,{start:o,end:l}=e,c=Math.max(r,o),d=Math.min(a,l),u=r<o&&a<o||r>l&&a>l;return{count:n,start:c,loop:e.loop,ilen:d<c&&!u?n+d-c:d-c}}function CE(t,e,s,n){const{points:r,options:a}=e,{count:o,start:l,loop:c,ilen:d}=Zb(r,s,n),u=SE(a);let{move:h=!0,reverse:f}=n||{},m,p,y;for(m=0;m<=d;++m)p=r[(l+(f?d-m:m))%o],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,y,p,f,a.stepped),y=p);return c&&(p=r[(l+(f?d:0))%o],u(t,y,p,f,a.stepped)),!!c}function PE(t,e,s,n){const r=e.points,{count:a,start:o,ilen:l}=Zb(r,s,n),{move:c=!0,reverse:d}=n||{};let u=0,h=0,f,m,p,y,x,g;const v=k=>(o+(d?l-k:k))%a,b=()=>{y!==x&&(t.lineTo(u,x),t.lineTo(u,y),t.lineTo(u,g))};for(c&&(m=r[v(0)],t.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=r[v(f)],m.skip)continue;const k=m.x,j=m.y,S=k|0;S===p?(j<y?y=j:j>x&&(x=j),u=(h*u+k)/++h):(b(),t.lineTo(k,j),p=S,h=0,y=x=j),g=j}b()}function qu(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?PE:CE}function EE(t){return t.stepped?O4:t.tension||t.cubicInterpolationMode==="monotone"?I4:ar}function AE(t,e,s,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,s,n)&&r.closePath()),Xb(t,e.options),t.stroke(r)}function TE(t,e,s,n){const{segments:r,options:a}=e,o=qu(e);for(const l of r)Xb(t,a,l.style),t.beginPath(),o(t,e,l,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const LE=typeof Path2D=="function";function ME(t,e,s,n){LE&&!e.options.segment?AE(t,e,s,n):TE(t,e,s,n)}class Pn extends $s{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;C4(this._points,n,e,r,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=B4(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,r=e[s],a=this.points,o=Fb(this,{property:s,start:r,end:r});if(!o.length)return;const l=[],c=EE(n);let d,u;for(d=0,u=o.length;d<u;++d){const{start:h,end:f}=o[d],m=a[h],p=a[f];if(m===p){l.push(m);continue}const y=Math.abs((r-m[s])/(p[s]-m[s])),x=c(m,p,y,n.stepped);x[s]=e[s],l.push(x)}return l.length===1?l[0]:l}pathSegment(e,s,n){return qu(this)(e,this,s,n)}path(e,s,n){const r=this.segments,a=qu(this);let o=this._loop;s=s||0,n=n||this.points.length-s;for(const l of r)o&=a(e,this,l,{start:s,end:s+n-1});return!!o}draw(e,s,n,r){const a=this.options||{};(this.points||[]).length&&a.borderWidth&&(e.save(),ME(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}ne(Pn,"id","line"),ne(Pn,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),ne(Pn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),ne(Pn,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Lg(t,e,s,n){const r=t.options,{[s]:a}=t.getProps([s],n);return Math.abs(e-a)<r.radius+r.hitRadius}class gl extends $s{constructor(s){super();ne(this,"parsed");ne(this,"skip");ne(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,r){const a=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(s-o,2)+Math.pow(n-l,2)<Math.pow(a.hitRadius+a.radius,2)}inXRange(s,n){return Lg(this,s,"x",n)}inYRange(s,n){return Lg(this,s,"y",n)}getCenterPoint(s){const{x:n,y:r}=this.getProps(["x","y"],s);return{x:n,y:r}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const r=n&&s.borderWidth||0;return(n+r)*2}draw(s,n){const r=this.options;this.skip||r.radius<.1||!en(this,n,this.size(r)/2)||(s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.fillStyle=r.backgroundColor,Hu(s,r,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}ne(gl,"id","point"),ne(gl,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),ne(gl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ew(t,e){const{x:s,y:n,base:r,width:a,height:o}=t.getProps(["x","y","base","width","height"],e);let l,c,d,u,h;return t.horizontal?(h=o/2,l=Math.min(s,r),c=Math.max(s,r),d=n-h,u=n+h):(h=a/2,l=s-h,c=s+h,d=Math.min(n,r),u=Math.max(n,r)),{left:l,top:d,right:c,bottom:u}}function En(t,e,s,n){return t?0:Qt(e,s,n)}function DE(t,e,s){const n=t.options.borderWidth,r=t.borderSkipped,a=Pb(n);return{t:En(r.top,a.top,0,s),r:En(r.right,a.right,0,e),b:En(r.bottom,a.bottom,0,s),l:En(r.left,a.left,0,e)}}function OE(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,a=fr(r),o=Math.min(e,s),l=t.borderSkipped,c=n||ve(r);return{topLeft:En(!c||l.top||l.left,a.topLeft,0,o),topRight:En(!c||l.top||l.right,a.topRight,0,o),bottomLeft:En(!c||l.bottom||l.left,a.bottomLeft,0,o),bottomRight:En(!c||l.bottom||l.right,a.bottomRight,0,o)}}function IE(t){const e=ew(t),s=e.right-e.left,n=e.bottom-e.top,r=DE(t,s/2,n/2),a=OE(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:a},inner:{x:e.left+r.l,y:e.top+r.t,w:s-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,a.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,a.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,a.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,a.bottomRight-Math.max(r.b,r.r))}}}}function Ed(t,e,s,n){const r=e===null,a=s===null,l=t&&!(r&&a)&&ew(t,n);return l&&(r||Cn(e,l.left,l.right))&&(a||Cn(s,l.top,l.bottom))}function RE(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function FE(t,e){t.rect(e.x,e.y,e.w,e.h)}function Ad(t,e,s={}){const n=t.x!==s.x?-e:0,r=t.y!==s.y?-e:0,a=(t.x+t.w!==s.x+s.w?e:0)-n,o=(t.y+t.h!==s.y+s.h?e:0)-r;return{x:t.x+n,y:t.y+r,w:t.w+a,h:t.h+o,radius:t.radius}}class xl extends $s{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:r}}=this,{inner:a,outer:o}=IE(this),l=RE(o.radius)?qi:FE;e.save(),(o.w!==a.w||o.h!==a.h)&&(e.beginPath(),l(e,Ad(o,s,a)),e.clip(),l(e,Ad(a,-s,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),l(e,Ad(a,s)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,s,n){return Ed(this,e,s,n)}inXRange(e,s){return Ed(this,e,null,s)}inYRange(e,s){return Ed(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:r,horizontal:a}=this.getProps(["x","y","base","horizontal"],e);return{x:a?(s+r)/2:s,y:a?n:(n+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}ne(xl,"id","bar"),ne(xl,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),ne(xl,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function $E(t,e,s){const n=t.segments,r=t.points,a=e.points,o=[];for(const l of n){let{start:c,end:d}=l;d=Mc(c,d,r);const u=Gu(s,r[c],r[d],l.loop);if(!e.segments){o.push({source:l,target:u,start:r[c],end:r[d]});continue}const h=Fb(e,u);for(const f of h){const m=Gu(s,a[f.start],a[f.end],f.loop),p=Rb(l,r,m);for(const y of p)o.push({source:y,target:f,start:{[s]:Mg(u,m,"start",Math.max)},end:{[s]:Mg(u,m,"end",Math.min)}})}}return o}function Gu(t,e,s,n){if(n)return;let r=e[t],a=s[t];return t==="angle"&&(r=Kt(r),a=Kt(a)),{property:t,start:r,end:a}}function zE(t,e){const{x:s=null,y:n=null}=t||{},r=e.points,a=[];return e.segments.forEach(({start:o,end:l})=>{l=Mc(o,l,r);const c=r[o],d=r[l];n!==null?(a.push({x:c.x,y:n}),a.push({x:d.x,y:n})):s!==null&&(a.push({x:s,y:c.y}),a.push({x:s,y:d.y}))}),a}function Mc(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function Mg(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function tw(t,e){let s=[],n=!1;return Oe(t)?(n=!0,s=t):s=zE(t,e),s.length?new Pn({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function Dg(t){return t&&t.fill!==!1}function UE(t,e,s){let r=t[e].fill;const a=[e];let o;if(!s)return r;for(;r!==!1&&a.indexOf(r)===-1;){if(!Ge(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;a.push(r),r=o.fill}return!1}function BE(t,e,s){const n=qE(t);if(ve(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return Ge(r)&&Math.floor(r)===r?HE(n[0],e,r,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function HE(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function WE(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:ve(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function VE(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:ve(t)?n=t.value:n=e.getBaseValue(),n}function qE(t){const e=t.options,s=e.fill;let n=fe(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function GE(t){const{scale:e,index:s,line:n}=t,r=[],a=n.segments,o=n.points,l=KE(e,s);l.push(tw({x:null,y:e.bottom},n));for(let c=0;c<a.length;c++){const d=a[c];for(let u=d.start;u<=d.end;u++)YE(r,o[u],l)}return new Pn({points:r,options:{}})}function KE(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const a=n[r];if(a.index===e)break;a.hidden||s.unshift(a.dataset)}return s}function YE(t,e,s){const n=[];for(let r=0;r<s.length;r++){const a=s[r],{first:o,last:l,point:c}=JE(a,e,"x");if(!(!c||o&&l)){if(o)n.unshift(c);else if(t.push(c),!l)break}}t.push(...n)}function JE(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const r=n[s],a=t.segments,o=t.points;let l=!1,c=!1;for(let d=0;d<a.length;d++){const u=a[d],h=o[u.start][s],f=o[u.end][s];if(Cn(r,h,f)){l=r===h,c=r===f;break}}return{first:l,last:c,point:n}}class sw{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:r,y:a,radius:o}=this;return s=s||{start:0,end:Zt},e.arc(r,a,o,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:r}=this,a=e.angle;return{x:s+Math.cos(a)*r,y:n+Math.sin(a)*r,angle:a}}}function QE(t){const{chart:e,fill:s,line:n}=t;if(Ge(s))return XE(e,s);if(s==="stack")return GE(t);if(s==="shape")return!0;const r=ZE(t);return r instanceof sw?r:tw(r,n)}function XE(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function ZE(t){return(t.scale||{}).getPointPositionForValue?tA(t):eA(t)}function eA(t){const{scale:e={},fill:s}=t,n=WE(s,e);if(Ge(n)){const r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function tA(t){const{scale:e,fill:s}=t,n=e.options,r=e.getLabels().length,a=n.reverse?e.max:e.min,o=VE(s,e,a),l=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,a);return new sw({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)l.push(e.getPointPositionForValue(c,o));return l}function Td(t,e,s){const n=QE(e),{chart:r,index:a,line:o,scale:l,axis:c}=e,d=o.options,u=d.fill,h=d.backgroundColor,{above:f=h,below:m=h}=u||{},p=r.getDatasetMeta(a),y=$b(r,p);n&&o.points.length&&(Ec(t,s),sA(t,{line:o,target:n,above:f,below:m,area:s,scale:l,axis:c,clip:y}),Ac(t))}function sA(t,e){const{line:s,target:n,above:r,below:a,area:o,scale:l,clip:c}=e,d=s._loop?"angle":e.axis;t.save();let u=a;a!==r&&(d==="x"?(Og(t,n,o.top),Ld(t,{line:s,target:n,color:r,scale:l,property:d,clip:c}),t.restore(),t.save(),Og(t,n,o.bottom)):d==="y"&&(Ig(t,n,o.left),Ld(t,{line:s,target:n,color:a,scale:l,property:d,clip:c}),t.restore(),t.save(),Ig(t,n,o.right),u=r)),Ld(t,{line:s,target:n,color:u,scale:l,property:d,clip:c}),t.restore()}function Og(t,e,s){const{segments:n,points:r}=e;let a=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[Mc(c,d,r)];a?(t.moveTo(u.x,u.y),a=!1):(t.lineTo(u.x,s),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(h.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function Ig(t,e,s){const{segments:n,points:r}=e;let a=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[Mc(c,d,r)];a?(t.moveTo(u.x,u.y),a=!1):(t.lineTo(s,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(s,h.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function Ld(t,e){const{line:s,target:n,property:r,color:a,scale:o,clip:l}=e,c=$E(s,n,r);for(const{source:d,target:u,start:h,end:f}of c){const{style:{backgroundColor:m=a}={}}=d,p=n!==!0;t.save(),t.fillStyle=m,nA(t,o,l,p&&Gu(r,h,f)),t.beginPath();const y=!!s.pathSegment(t,d);let x;if(p){y?t.closePath():Rg(t,n,f,r);const g=!!n.pathSegment(t,u,{move:y,reverse:!0});x=y&&g,x||Rg(t,n,h,r)}t.closePath(),t.fill(x?"evenodd":"nonzero"),t.restore()}}function nA(t,e,s,n){const r=e.chart.chartArea,{property:a,start:o,end:l}=n||{};if(a==="x"||a==="y"){let c,d,u,h;a==="x"?(c=o,d=r.top,u=l,h=r.bottom):(c=r.left,d=o,u=r.right,h=l),t.beginPath(),s&&(c=Math.max(c,s.left),u=Math.min(u,s.right),d=Math.max(d,s.top),h=Math.min(h,s.bottom)),t.rect(c,d,u-c,h-d),t.clip()}}function Rg(t,e,s,n){const r=e.interpolate(s,n);r&&t.lineTo(r.x,r.y)}var rA={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,r=[];let a,o,l,c;for(o=0;o<n;++o)a=t.getDatasetMeta(o),l=a.dataset,c=null,l&&l.options&&l instanceof Pn&&(c={visible:t.isDatasetVisible(o),index:o,fill:BE(l,o,n),chart:t,axis:a.controller.options.indexAxis,scale:a.vScale,line:l}),a.$filler=c,r.push(c);for(o=0;o<n;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=UE(r,o,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),a=t.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;l&&(l.line.updateControlPoints(a,l.axis),n&&l.fill&&Td(t.ctx,l,a))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const a=n[r].$filler;Dg(a)&&Td(t.ctx,a,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!Dg(n)||s.drawTime!=="beforeDatasetDraw"||Td(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Fg=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},aA=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class $g extends $s{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=Te(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=rt(n.font),a=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=Fg(n,a);let d,u;s.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,a,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,r,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,r){const{ctx:a,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+l;let h=e;a.textAlign="left",a.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((p,y)=>{const x=n+s/2+a.measureText(p.text).width;(y===0||d[d.length-1]+x+2*l>o)&&(h+=u,d[d.length-(y>0?0:1)]=0,m+=u,f++),c[y]={left:0,top:m,row:f,width:x,height:r},d[d.length-1]+=x+l}),h}_fitCols(e,s,n,r){const{ctx:a,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-e;let h=l,f=0,m=0,p=0,y=0;return this.legendItems.forEach((x,g)=>{const{itemWidth:v,itemHeight:b}=iA(n,s,a,x,r);g>0&&m+b+2*l>u&&(h+=f+l,d.push({width:f,height:m}),p+=f+l,y++,f=m=0),c[g]={left:p,top:m,col:y,width:v,height:b},f=Math.max(f,v),m+=b+l}),h+=f,d.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:r},rtl:a}}=this,o=la(a,this.left,this.width);if(this.isHorizontal()){let l=0,c=jt(n,this.left+r,this.right-this.lineWidths[l]);for(const d of s)l!==d.row&&(l=d.row,c=jt(n,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+e+r,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+r}else{let l=0,c=jt(n,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const d of s)d.col!==l&&(l=d.col,c=jt(n,this.top+e+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Ec(e,this),this._draw(),Ac(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:r}=this,{align:a,labels:o}=e,l=Ke.color,c=la(e.rtl,this.left,this.width),d=rt(o.font),{padding:u}=o,h=d.size,f=h/2;let m;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:p,boxHeight:y,itemHeight:x}=Fg(o,h),g=function(S,C,_){if(isNaN(p)||p<=0||isNaN(y)||y<0)return;r.save();const P=fe(_.lineWidth,1);if(r.fillStyle=fe(_.fillStyle,l),r.lineCap=fe(_.lineCap,"butt"),r.lineDashOffset=fe(_.lineDashOffset,0),r.lineJoin=fe(_.lineJoin,"miter"),r.lineWidth=P,r.strokeStyle=fe(_.strokeStyle,l),r.setLineDash(fe(_.lineDash,[])),o.usePointStyle){const N={radius:y*Math.SQRT2/2,pointStyle:_.pointStyle,rotation:_.rotation,borderWidth:P},L=c.xPlus(S,p/2),A=C+f;Sb(r,N,L,A,o.pointStyleWidth&&p)}else{const N=C+Math.max((h-y)/2,0),L=c.leftForLtr(S,p),A=fr(_.borderRadius);r.beginPath(),Object.values(A).some(E=>E!==0)?qi(r,{x:L,y:N,w:p,h:y,radius:A}):r.rect(L,N,p,y),r.fill(),P!==0&&r.stroke()}r.restore()},v=function(S,C,_){jr(r,_.text,S,C+x/2,d,{strikethrough:_.hidden,textAlign:c.textAlign(_.textAlign)})},b=this.isHorizontal(),k=this._computeTitleHeight();b?m={x:jt(a,this.left+u,this.right-n[0]),y:this.top+u+k,line:0}:m={x:this.left+u,y:jt(a,this.top+k+u,this.bottom-s[0].height),line:0},Db(this.ctx,e.textDirection);const j=x+u;this.legendItems.forEach((S,C)=>{r.strokeStyle=S.fontColor,r.fillStyle=S.fontColor;const _=r.measureText(S.text).width,P=c.textAlign(S.textAlign||(S.textAlign=o.textAlign)),N=p+f+_;let L=m.x,A=m.y;c.setWidth(this.width),b?C>0&&L+N+u>this.right&&(A=m.y+=j,m.line++,L=m.x=jt(a,this.left+u,this.right-n[m.line])):C>0&&A+j>this.bottom&&(L=m.x=L+s[m.line].width+u,m.line++,A=m.y=jt(a,this.top+k+u,this.bottom-s[m.line].height));const E=c.x(L);if(g(E,A,S),L=HC(P,L+p+f,b?L+N:this.right,e.rtl),v(c.x(L),A,S),b)m.x+=N+u;else if(typeof S.text!="string"){const D=d.lineHeight;m.y+=nw(S,D)+u}else m.y+=j}),Ob(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=rt(s.font),r=kt(s.padding);if(!s.display)return;const a=la(e.rtl,this.left,this.width),o=this.ctx,l=s.position,c=n.size/2,d=r.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=jt(e.align,h,this.right-f);else{const p=this.columnSizes.reduce((y,x)=>Math.max(y,x.height),0);u=d+jt(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const m=jt(l,h,h+f);o.textAlign=a.textAlign(vf(l)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=n.string,jr(o,s.text,m,u,n)}_computeTitleHeight(){const e=this.options.title,s=rt(e.font),n=kt(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,r,a;if(Cn(e,this.left,this.right)&&Cn(s,this.top,this.bottom)){for(a=this.legendHitBoxes,n=0;n<a.length;++n)if(r=a[n],Cn(e,r.left,r.left+r.width)&&Cn(s,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!cA(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,a=aA(r,n);r&&!a&&Te(s.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!a&&Te(s.onHover,[e,n,this],this)}else n&&Te(s.onClick,[e,n,this],this)}}function iA(t,e,s,n,r){const a=oA(n,t,e,s),o=lA(r,n,e.lineHeight);return{itemWidth:a,itemHeight:o}}function oA(t,e,s,n){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((a,o)=>a.length>o.length?a:o)),e+s.size/2+n.measureText(r).width}function lA(t,e,s){let n=t;return typeof e.text!="string"&&(n=nw(e,s)),n}function nw(t,e){const s=t.text?t.text.length:0;return e*s}function cA(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var dA={id:"legend",_element:$g,start(t,e,s){const n=t.legend=new $g({ctx:t.ctx,options:s,chart:t});os.configure(t,n,s),os.addBox(t,n)},stop(t){os.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;os.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,r=s.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:r,color:a,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(s?0:void 0),u=kt(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:a,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class rw extends $s{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const r=Oe(n.text)?n.text.length:1;this._padding=kt(n.padding);const a=r*rt(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=a:this.width=a}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:r,right:a,options:o}=this,l=o.align;let c=0,d,u,h;return this.isHorizontal()?(u=jt(l,n,a),h=s+e,d=a-n):(o.position==="left"?(u=n+e,h=jt(l,r,s),c=Xe*-.5):(u=a-e,h=jt(l,s,r),c=Xe*.5),d=r-s),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=rt(s.font),a=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(a);jr(e,s.text,0,0,n,{color:s.color,maxWidth:c,rotation:d,textAlign:vf(s.align),textBaseline:"middle",translation:[o,l]})}}function uA(t,e){const s=new rw({ctx:t.ctx,options:e,chart:t});os.configure(t,s,e),os.addBox(t,s),t.titleBlock=s}var hA={id:"title",_element:rw,start(t,e,s){uA(t,s)},stop(t){const e=t.titleBlock;os.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;os.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const ai={average(t){if(!t.length)return!1;let e,s,n=new Set,r=0,a=0;for(e=0,s=t.length;e<s;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();n.add(c.x),r+=c.y,++a}}return a===0||n.size===0?!1:{x:[...n].reduce((l,c)=>l+c)/n.size,y:r/a}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,r=Number.POSITIVE_INFINITY,a,o,l;for(a=0,o=t.length;a<o;++a){const c=t[a].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=Uu(e,d);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();s=c.x,n=c.y}return{x:s,y:n}}};function Ps(t,e){return e&&(Oe(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function qs(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function fA(t,e){const{element:s,datasetIndex:n,index:r}=e,a=t.getDatasetMeta(n).controller,{label:o,value:l}=a.getLabelAndValue(r);return{chart:t,label:o,parsed:a.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:l,dataset:a.getDataset(),dataIndex:r,datasetIndex:n,element:s}}function zg(t,e){const s=t.chart.ctx,{body:n,footer:r,title:a}=t,{boxWidth:o,boxHeight:l}=e,c=rt(e.bodyFont),d=rt(e.titleFont),u=rt(e.footerFont),h=a.length,f=r.length,m=n.length,p=kt(e.padding);let y=p.height,x=0,g=n.reduce((k,j)=>k+j.before.length+j.lines.length+j.after.length,0);if(g+=t.beforeBody.length+t.afterBody.length,h&&(y+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),g){const k=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;y+=m*k+(g-m)*c.lineHeight+(g-1)*e.bodySpacing}f&&(y+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let v=0;const b=function(k){x=Math.max(x,s.measureText(k).width+v)};return s.save(),s.font=d.string,Se(t.title,b),s.font=c.string,Se(t.beforeBody.concat(t.afterBody),b),v=e.displayColors?o+2+e.boxPadding:0,Se(n,k=>{Se(k.before,b),Se(k.lines,b),Se(k.after,b)}),v=0,s.font=u.string,Se(t.footer,b),s.restore(),x+=p.width,{width:x,height:y}}function mA(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function pA(t,e,s,n){const{x:r,width:a}=n,o=s.caretSize+s.caretPadding;if(t==="left"&&r+a+o>e.width||t==="right"&&r-a-o<0)return!0}function gA(t,e,s,n){const{x:r,width:a}=s,{width:o,chartArea:{left:l,right:c}}=t;let d="center";return n==="center"?d=r<=(l+c)/2?"left":"right":r<=a/2?d="left":r>=o-a/2&&(d="right"),pA(d,t,e,s)&&(d="center"),d}function Ug(t,e,s){const n=s.yAlign||e.yAlign||mA(t,s);return{xAlign:s.xAlign||e.xAlign||gA(t,e,s,n),yAlign:n}}function xA(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function yA(t,e,s){let{y:n,height:r}=t;return e==="top"?n+=s:e==="bottom"?n-=r+s:n-=r/2,n}function Bg(t,e,s,n){const{caretSize:r,caretPadding:a,cornerRadius:o}=t,{xAlign:l,yAlign:c}=s,d=r+a,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=fr(o);let p=xA(e,l);const y=yA(e,c,d);return c==="center"?l==="left"?p+=d:l==="right"&&(p-=d):l==="left"?p-=Math.max(u,f)+r:l==="right"&&(p+=Math.max(h,m)+r),{x:Qt(p,0,n.width-e.width),y:Qt(y,0,n.height-e.height)}}function Go(t,e,s){const n=kt(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Hg(t){return Ps([],qs(t))}function vA(t,e,s){return Gn(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function Wg(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const aw={beforeTitle:Bs,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:Bs,beforeBody:Bs,beforeLabel:Bs,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return je(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:Bs,afterBody:Bs,beforeFooter:Bs,footer:Bs,afterFooter:Bs};function Mt(t,e,s,n){const r=t[e].call(s,n);return typeof r>"u"?aw[e].call(s,n):r}class Ku extends $s{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&s.options.animation&&n.animations,a=new zb(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(a)),a}getContext(){return this.$context||(this.$context=vA(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,r=Mt(n,"beforeTitle",this,e),a=Mt(n,"title",this,e),o=Mt(n,"afterTitle",this,e);let l=[];return l=Ps(l,qs(r)),l=Ps(l,qs(a)),l=Ps(l,qs(o)),l}getBeforeBody(e,s){return Hg(Mt(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,r=[];return Se(e,a=>{const o={before:[],lines:[],after:[]},l=Wg(n,a);Ps(o.before,qs(Mt(l,"beforeLabel",this,a))),Ps(o.lines,Mt(l,"label",this,a)),Ps(o.after,qs(Mt(l,"afterLabel",this,a))),r.push(o)}),r}getAfterBody(e,s){return Hg(Mt(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,r=Mt(n,"beforeFooter",this,e),a=Mt(n,"footer",this,e),o=Mt(n,"afterFooter",this,e);let l=[];return l=Ps(l,qs(r)),l=Ps(l,qs(a)),l=Ps(l,qs(o)),l}_createItems(e){const s=this._active,n=this.chart.data,r=[],a=[],o=[];let l=[],c,d;for(c=0,d=s.length;c<d;++c)l.push(fA(this.chart,s[c]));return e.filter&&(l=l.filter((u,h,f)=>e.filter(u,h,f,n))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,n))),Se(l,u=>{const h=Wg(e.callbacks,u);r.push(Mt(h,"labelColor",this,u)),a.push(Mt(h,"labelPointStyle",this,u)),o.push(Mt(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=a,this.labelTextColors=o,this.dataPoints=l,l}update(e,s){const n=this.options.setContext(this.getContext()),r=this._active;let a,o=[];if(!r.length)this.opacity!==0&&(a={opacity:0});else{const l=ai[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const c=this._size=zg(this,n),d=Object.assign({},l,c),u=Ug(this.chart,n,d),h=Bg(n,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,a={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,a&&this._resolveAnimations().update(this,a),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,r){const a=this.getCaretPosition(e,n,r);s.lineTo(a.x1,a.y1),s.lineTo(a.x2,a.y2),s.lineTo(a.x3,a.y3)}getCaretPosition(e,s,n){const{xAlign:r,yAlign:a}=this,{caretSize:o,cornerRadius:l}=n,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=fr(l),{x:f,y:m}=e,{width:p,height:y}=s;let x,g,v,b,k,j;return a==="center"?(k=m+y/2,r==="left"?(x=f,g=x-o,b=k+o,j=k-o):(x=f+p,g=x+o,b=k-o,j=k+o),v=x):(r==="left"?g=f+Math.max(c,u)+o:r==="right"?g=f+p-Math.max(d,h)-o:g=this.caretX,a==="top"?(b=m,k=b-o,x=g-o,v=g+o):(b=m+y,k=b+o,x=g+o,v=g-o),j=b),{x1:x,x2:g,x3:v,y1:b,y2:k,y3:j}}drawTitle(e,s,n){const r=this.title,a=r.length;let o,l,c;if(a){const d=la(n.rtl,this.x,this.width);for(e.x=Go(this,n.titleAlign,n),s.textAlign=d.textAlign(n.titleAlign),s.textBaseline="middle",o=rt(n.titleFont),l=n.titleSpacing,s.fillStyle=n.titleColor,s.font=o.string,c=0;c<a;++c)s.fillText(r[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===a&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,s,n,r,a){const o=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:d}=a,u=rt(a.bodyFont),h=Go(this,"left",a),f=r.x(h),m=c<u.lineHeight?(u.lineHeight-c)/2:0,p=s.y+m;if(a.usePointStyle){const y={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},x=r.leftForLtr(f,d)+d/2,g=p+c/2;e.strokeStyle=a.multiKeyBackground,e.fillStyle=a.multiKeyBackground,Hu(e,y,x,g),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,Hu(e,y,x,g)}else{e.lineWidth=ve(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const y=r.leftForLtr(f,d),x=r.leftForLtr(r.xPlus(f,1),d-2),g=fr(o.borderRadius);Object.values(g).some(v=>v!==0)?(e.beginPath(),e.fillStyle=a.multiKeyBackground,qi(e,{x:y,y:p,w:d,h:c,radius:g}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),qi(e,{x,y:p+1,w:d-2,h:c-2,radius:g}),e.fill()):(e.fillStyle=a.multiKeyBackground,e.fillRect(y,p,d,c),e.strokeRect(y,p,d,c),e.fillStyle=o.backgroundColor,e.fillRect(x,p+1,d-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:r}=this,{bodySpacing:a,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=n,h=rt(n.bodyFont);let f=h.lineHeight,m=0;const p=la(n.rtl,this.x,this.width),y=function(_){s.fillText(_,p.x(e.x+m),e.y+f/2),e.y+=f+a},x=p.textAlign(o);let g,v,b,k,j,S,C;for(s.textAlign=o,s.textBaseline="middle",s.font=h.string,e.x=Go(this,x,n),s.fillStyle=n.bodyColor,Se(this.beforeBody,y),m=l&&x!=="right"?o==="center"?d/2+u:d+2+u:0,k=0,S=r.length;k<S;++k){for(g=r[k],v=this.labelTextColors[k],s.fillStyle=v,Se(g.before,y),b=g.lines,l&&b.length&&(this._drawColorBox(s,e,k,p,n),f=Math.max(h.lineHeight,c)),j=0,C=b.length;j<C;++j)y(b[j]),f=h.lineHeight;Se(g.after,y)}m=0,f=h.lineHeight,Se(this.afterBody,y),e.y-=a}drawFooter(e,s,n){const r=this.footer,a=r.length;let o,l;if(a){const c=la(n.rtl,this.x,this.width);for(e.x=Go(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",o=rt(n.footerFont),s.fillStyle=n.footerColor,s.font=o.string,l=0;l<a;++l)s.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,s,n,r){const{xAlign:a,yAlign:o}=this,{x:l,y:c}=e,{width:d,height:u}=n,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=fr(r.cornerRadius);s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.beginPath(),s.moveTo(l+h,c),o==="top"&&this.drawCaret(e,s,n,r),s.lineTo(l+d-f,c),s.quadraticCurveTo(l+d,c,l+d,c+f),o==="center"&&a==="right"&&this.drawCaret(e,s,n,r),s.lineTo(l+d,c+u-p),s.quadraticCurveTo(l+d,c+u,l+d-p,c+u),o==="bottom"&&this.drawCaret(e,s,n,r),s.lineTo(l+m,c+u),s.quadraticCurveTo(l,c+u,l,c+u-m),o==="center"&&a==="left"&&this.drawCaret(e,s,n,r),s.lineTo(l,c+h),s.quadraticCurveTo(l,c,l+h,c),s.closePath(),s.fill(),r.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,r=n&&n.x,a=n&&n.y;if(r||a){const o=ai[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=zg(this,e),c=Object.assign({},o,this._size),d=Ug(s,e,c),u=Bg(e,c,d,s);(r._to!==u.x||a._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const r={width:this.width,height:this.height},a={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=kt(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(a,e,r,s),Db(e,s.textDirection),a.y+=o.top,this.drawTitle(a,e,s),this.drawBody(a,e,s),this.drawFooter(a,e,s),Ob(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,r=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),a=!ql(n,r),o=this._positionChanged(r,s);(a||o)&&(this._active=r,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,a=this._active||[],o=this._getActiveElements(e,a,s,n),l=this._positionChanged(o,e),c=s||!ql(o,a)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,r){const a=this.options;if(e.type==="mouseout")return[];if(!r)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,a.mode,a,n);return a.reverse&&o.reverse(),o}_positionChanged(e,s){const{caretX:n,caretY:r,options:a}=this,o=ai[a.position].call(this,e,s);return o!==!1&&(n!==o.x||r!==o.y)}}ne(Ku,"positioners",ai);var bA={id:"tooltip",_element:Ku,positioners:ai,afterInit(t,e,s){s&&(t.tooltip=new Ku({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:aw},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const wA=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function jA(t,e,s,n){const r=t.indexOf(e);if(r===-1)return wA(t,e,s,n);const a=t.lastIndexOf(e);return r!==a?s:r}const NA=(t,e)=>t===null?null:Qt(Math.round(t),0,e);function Vg(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class Yu extends Cr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:r,label:a}of s)n[r]===a&&n.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(je(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:jA(n,e,fe(s,e),this._addedLabels),NA(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,r=[];let a=this.getLabels();a=e===0&&s===a.length-1?a:a.slice(e,s+1),this._valueRange=Math.max(a.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=s;o++)r.push({value:o});return r}getLabelForValue(e){return Vg.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}ne(Yu,"id","category"),ne(Yu,"defaults",{ticks:{callback:Vg}});function _A(t,e){const s=[],{bounds:r,step:a,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=t,m=a||1,p=u-1,{min:y,max:x}=e,g=!je(o),v=!je(l),b=!je(d),k=(x-y)/(h+1);let j=H0((x-y)/p/m)*m,S,C,_,P;if(j<1e-14&&!g&&!v)return[{value:y},{value:x}];P=Math.ceil(x/j)-Math.floor(y/j),P>p&&(j=H0(P*j/p/m)*m),je(c)||(S=Math.pow(10,c),j=Math.ceil(j*S)/S),r==="ticks"?(C=Math.floor(y/j)*j,_=Math.ceil(x/j)*j):(C=y,_=x),g&&v&&a&&OC((l-o)/a,j/1e3)?(P=Math.round(Math.min((l-o)/j,u)),j=(l-o)/P,C=o,_=l):b?(C=g?o:C,_=v?l:_,P=d-1,j=(_-C)/P):(P=(_-C)/j,bi(P,Math.round(P),j/1e3)?P=Math.round(P):P=Math.ceil(P));const N=Math.max(W0(j),W0(C));S=Math.pow(10,je(c)?N:c),C=Math.round(C*S)/S,_=Math.round(_*S)/S;let L=0;for(g&&(f&&C!==o?(s.push({value:o}),C<o&&L++,bi(Math.round((C+L*j)*S)/S,o,qg(o,k,t))&&L++):C<o&&L++);L<P;++L){const A=Math.round((C+L*j)*S)/S;if(v&&A>l)break;s.push({value:A})}return v&&f&&_!==l?s.length&&bi(s[s.length-1].value,l,qg(l,k,t))?s[s.length-1].value=l:s.push({value:l}):(!v||_===l)&&s.push({value:_}),s}function qg(t,e,{horizontal:s,minRotation:n}){const r=Sn(n),a=(s?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/a,o)}class Xl extends Cr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return je(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:r,max:a}=this;const o=c=>r=s?r:c,l=c=>a=n?a:c;if(e){const c=Rs(r),d=Rs(a);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(r===a){let c=a===0?1:Math.abs(a*.05);l(a+c),e||o(r-c)}this.min=r,this.max=a}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),s=s||11),s&&(r=Math.min(s,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},a=this._range||this,o=_A(r,a);return e.bounds==="ticks"&&vb(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-s)/Math.max(e.length-1,1)/2;s-=r,n+=r}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return wf(e,this.chart.options.locale,this.options.ticks.format)}}class Ju extends Xl{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Ge(e)?e:0,this.max=Ge(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=Sn(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,a=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,a.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}ne(Ju,"id","linear"),ne(Ju,"defaults",{ticks:{callback:Pc.formatters.numeric}});const Ki=t=>Math.floor(kn(t)),er=(t,e)=>Math.pow(10,Ki(t)+e);function Gg(t){return t/Math.pow(10,Ki(t))===1}function Kg(t,e,s){const n=Math.pow(10,s),r=Math.floor(t/n);return Math.ceil(e/n)-r}function kA(t,e){const s=e-t;let n=Ki(s);for(;Kg(t,e,n)>10;)n++;for(;Kg(t,e,n)<10;)n--;return Math.min(n,Ki(t))}function SA(t,{min:e,max:s}){e=qt(t.min,e);const n=[],r=Ki(e);let a=kA(e,s),o=a<0?Math.pow(10,Math.abs(a)):1;const l=Math.pow(10,a),c=r>a?Math.pow(10,r):0,d=Math.round((e-c)*o)/o,u=Math.floor((e-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,a)),f=qt(t.min,Math.round((c+u+h*Math.pow(10,a))*o)/o);for(;f<s;)n.push({value:f,major:Gg(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(a++,h=2,o=a>=0?1:o),f=Math.round((c+u+h*Math.pow(10,a))*o)/o;const m=qt(t.max,f);return n.push({value:m,major:Gg(m),significand:h}),n}class Yg extends Cr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,s){const n=Xl.prototype.parse.apply(this,[e,s]);if(n===0){this._zero=!0;return}return Ge(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Ge(e)?Math.max(0,e):null,this.max=Ge(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ge(this._userMin)&&(this.min=e===er(this.min,0)?er(this.min,-1):er(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let n=this.min,r=this.max;const a=l=>n=e?n:l,o=l=>r=s?r:l;n===r&&(n<=0?(a(1),o(10)):(a(er(n,-1)),o(er(r,1)))),n<=0&&a(er(r,-1)),r<=0&&o(er(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,s={min:this._userMin,max:this._userMax},n=SA(s,this);return e.bounds==="ticks"&&vb(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":wf(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=kn(e),this._valueRange=kn(this.max)-kn(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(kn(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const s=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+s*this._valueRange)}}ne(Yg,"id","logarithmic"),ne(Yg,"defaults",{ticks:{callback:Pc.formatters.logarithmic,major:{enabled:!0}}});function Qu(t){const e=t.ticks;if(e.display&&t.display){const s=kt(e.backdropPadding);return fe(e.font&&e.font.size,Ke.font.size)+s.height}return 0}function CA(t,e,s){return s=Oe(s)?s:[s],{w:t4(t,e.string,s),h:s.length*e.lineHeight}}function Jg(t,e,s,n,r){return t===n||t===r?{start:e-s/2,end:e+s/2}:t<n||t>r?{start:e-s,end:e}:{start:e,end:e+s}}function PA(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],r=[],a=t._pointLabels.length,o=t.options.pointLabels,l=o.centerPointLabels?Xe/a:0;for(let c=0;c<a;c++){const d=o.setContext(t.getPointLabelContext(c));r[c]=d.padding;const u=t.getPointPosition(c,t.drawingArea+r[c],l),h=rt(d.font),f=CA(t.ctx,h,t._pointLabels[c]);n[c]=f;const m=Kt(t.getIndexAngle(c)+l),p=Math.round(xf(m)),y=Jg(p,u.x,f.w,0,180),x=Jg(p,u.y,f.h,90,270);EA(s,e,m,y,x)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=LA(t,n,r)}function EA(t,e,s,n,r){const a=Math.abs(Math.sin(s)),o=Math.abs(Math.cos(s));let l=0,c=0;n.start<e.l?(l=(e.l-n.start)/a,t.l=Math.min(t.l,e.l-l)):n.end>e.r&&(l=(n.end-e.r)/a,t.r=Math.max(t.r,e.r+l)),r.start<e.t?(c=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function AA(t,e,s){const n=t.drawingArea,{extra:r,additionalAngle:a,padding:o,size:l}=s,c=t.getPointPosition(e,n+r+o,a),d=Math.round(xf(Kt(c.angle+Jt))),u=OA(c.y,l.h,d),h=MA(d),f=DA(c.x,l.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+l.w,bottom:u+l.h}}function TA(t,e){if(!e)return!0;const{left:s,top:n,right:r,bottom:a}=t;return!(en({x:s,y:n},e)||en({x:s,y:a},e)||en({x:r,y:n},e)||en({x:r,y:a},e))}function LA(t,e,s){const n=[],r=t._pointLabels.length,a=t.options,{centerPointLabels:o,display:l}=a.pointLabels,c={extra:Qu(a)/2,additionalAngle:o?Xe/r:0};let d;for(let u=0;u<r;u++){c.padding=s[u],c.size=e[u];const h=AA(t,u,c);n.push(h),l==="auto"&&(h.visible=TA(h,d),h.visible&&(d=h))}return n}function MA(t){return t===0||t===180?"center":t<180?"left":"right"}function DA(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function OA(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function IA(t,e,s){const{left:n,top:r,right:a,bottom:o}=s,{backdropColor:l}=e;if(!je(l)){const c=fr(e.borderRadius),d=kt(e.backdropPadding);t.fillStyle=l;const u=n-d.left,h=r-d.top,f=a-n+d.width,m=o-r+d.height;Object.values(c).some(p=>p!==0)?(t.beginPath(),qi(t,{x:u,y:h,w:f,h:m,radius:c}),t.fill()):t.fillRect(u,h,f,m)}}function RA(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let r=e-1;r>=0;r--){const a=t._pointLabelItems[r];if(!a.visible)continue;const o=n.setContext(t.getPointLabelContext(r));IA(s,o,a);const l=rt(o.font),{x:c,y:d,textAlign:u}=a;jr(s,t._pointLabels[r],c,d+l.lineHeight/2,l,{color:o.color,textAlign:u,textBaseline:"middle"})}}function iw(t,e,s,n){const{ctx:r}=t;if(s)r.arc(t.xCenter,t.yCenter,e,0,Zt);else{let a=t.getPointPosition(0,e);r.moveTo(a.x,a.y);for(let o=1;o<n;o++)a=t.getPointPosition(o,e),r.lineTo(a.x,a.y)}}function FA(t,e,s,n,r){const a=t.ctx,o=e.circular,{color:l,lineWidth:c}=e;!o&&!n||!l||!c||s<0||(a.save(),a.strokeStyle=l,a.lineWidth=c,a.setLineDash(r.dash||[]),a.lineDashOffset=r.dashOffset,a.beginPath(),iw(t,s,o,n),a.closePath(),a.stroke(),a.restore())}function $A(t,e,s){return Gn(t,{label:s,index:e,type:"pointLabel"})}class Ko extends Xl{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=kt(Qu(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=Ge(e)&&!isNaN(e)?e:0,this.max=Ge(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/Qu(this.options))}generateTickLabels(e){Xl.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const r=Te(this.options.pointLabels.callback,[s,n],this);return r||r===0?r:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?PA(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,r){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,r))}getIndexAngle(e){const s=Zt/(this._pointLabels.length||1),n=this.options.startAngle||0;return Kt(e*s+Sn(n))}getDistanceFromCenterForValue(e){if(je(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(je(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return $A(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const r=this.getIndexAngle(e)-Jt+n;return{x:Math.cos(r)*s+this.xCenter,y:Math.sin(r)*s+this.yCenter,angle:r}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:r,bottom:a}=this._pointLabelItems[e];return{left:s,top:n,right:r,bottom:a}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),iw(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:r,border:a}=s,o=this._pointLabels.length;let l,c,d;if(s.pointLabels.display&&RA(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),m=r.setContext(f),p=a.setContext(f);FA(this,m,c,o,p)}}),n.display){for(e.save(),l=o-1;l>=0;l--){const u=n.setContext(this.getPointLabelContext(l)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let a,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!s.reverse)return;const d=n.setContext(this.getContext(c)),u=rt(d.font);if(a=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,o=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const h=kt(d.backdropPadding);e.fillRect(-o/2-h.left,-a-u.size/2-h.top,o+h.width,u.size+h.height)}jr(e,l.label,0,-a,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}ne(Ko,"id","radialLinear"),ne(Ko,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Pc.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),ne(Ko,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),ne(Ko,"descriptors",{angleLines:{_fallback:"grid"}});const Dc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},It=Object.keys(Dc);function Qg(t,e){return t-e}function Xg(t,e){if(je(e))return null;const s=t._adapter,{parser:n,round:r,isoWeekday:a}=t._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),Ge(o)||(o=typeof n=="string"?s.parse(o,n):s.parse(o)),o===null?null:(r&&(o=r==="week"&&(Vi(a)||a===!0)?s.startOf(o,"isoWeek",a):s.startOf(o,r)),+o)}function Zg(t,e,s,n){const r=It.length;for(let a=It.indexOf(t);a<r-1;++a){const o=Dc[It[a]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-e)/(l*o.size))<=n)return It[a]}return It[r-1]}function zA(t,e,s,n,r){for(let a=It.length-1;a>=It.indexOf(s);a--){const o=It[a];if(Dc[o].common&&t._adapter.diff(r,n,o)>=e-1)return o}return It[s?It.indexOf(s):0]}function UA(t){for(let e=It.indexOf(t)+1,s=It.length;e<s;++e)if(Dc[It[e]].common)return It[e]}function ex(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:r}=yf(s,e),a=s[n]>=e?s[n]:s[r];t[a]=!0}}function BA(t,e,s,n){const r=t._adapter,a=+r.startOf(e[0].value,n),o=e[e.length-1].value;let l,c;for(l=a;l<=o;l=+r.add(l,1,n))c=s[l],c>=0&&(e[c].major=!0);return e}function tx(t,e,s){const n=[],r={},a=e.length;let o,l;for(o=0;o<a;++o)l=e[o],r[l]=o,n.push({value:l,major:!1});return a===0||!s?n:BA(t,n,r,s)}class Zl extends Cr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),r=this._adapter=new gP._date(e.adapters.date);r.init(s),vi(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:Xg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:r,max:a,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(a=Math.max(a,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Ge(r)&&!isNaN(r)?r:+s.startOf(Date.now(),n),a=Ge(a)&&!isNaN(a)?a:+s.endOf(Date.now(),n)+1,this.min=Math.min(r,a-1),this.max=Math.max(r+1,a)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const a=this.min,o=this.max,l=zC(r,a,o);return this._unit=s.unit||(n.autoSkip?Zg(s.minUnit,this.min,this.max,this._getLabelCapacity(a)):zA(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:UA(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),tx(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,r,a;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?s=1-r:s=(this.getDecimalForValue(e[1])-r)/2,a=this.getDecimalForValue(e[e.length-1]),e.length===1?n=a:n=(a-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;s=Qt(s,0,o),n=Qt(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,r=this.options,a=r.time,o=a.unit||Zg(a.minUnit,s,n,this._getLabelCapacity(s)),l=fe(r.ticks.stepSize,1),c=o==="week"?a.isoWeekday:!1,d=Vi(c)||c===!0,u={};let h=s,f,m;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":o),e.diff(n,s,o)>1e5*l)throw new Error(s+" and "+n+" are too far apart with stepSize of "+l+" "+o);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<n;f=+e.add(f,l,o),m++)ex(u,f,p);return(f===n||r.bounds==="ticks"||m===1)&&ex(u,f,p),Object.keys(u).sort(Qg).map(y=>+y)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const r=this.options.time.displayFormats,a=this._unit,o=s||r[a];return this._adapter.format(e,o)}_tickFormatFunction(e,s,n,r){const a=this.options,o=a.ticks.callback;if(o)return Te(o,[e,s,n],this);const l=a.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],f=n[s],m=d&&h&&f&&f.major;return this._adapter.format(e,r||(m?h:u))}generateTickLabels(e){let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s],r.label=this._tickFormatFunction(r.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,r=Sn(this.isHorizontal()?s.maxRotation:s.minRotation),a=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*a+l*o,h:n*o+l*a}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,r=n[s.unit]||n.millisecond,a=this._tickFormatFunction(e,0,tx(this,[e],this._majorUnit),r),o=this._getLabelSize(a),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(s=0,n=r.length;s<n;++s)e=e.concat(r[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const r=this.getLabels();for(s=0,n=r.length;s<n;++s)e.push(Xg(this,r[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return jb(e.sort(Qg))}}ne(Zl,"id","time"),ne(Zl,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function Yo(t,e,s){let n=0,r=t.length-1,a,o,l,c;s?(e>=t[n].pos&&e<=t[r].pos&&({lo:n,hi:r}=dr(t,"pos",e)),{pos:a,time:l}=t[n],{pos:o,time:c}=t[r]):(e>=t[n].time&&e<=t[r].time&&({lo:n,hi:r}=dr(t,"time",e)),{time:a,pos:l}=t[n],{time:o,pos:c}=t[r]);const d=o-a;return d?l+(c-l)*(e-a)/d:l}class sx extends Zl{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=Yo(s,this.min),this._tableRange=Yo(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,r=[],a=[];let o,l,c,d,u;for(o=0,l=e.length;o<l;++o)d=e[o],d>=s&&d<=n&&r.push(d);if(r.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)u=r[o+1],c=r[o-1],d=r[o],Math.round((u+c)/2)!==d&&a.push({time:d,pos:o/(l-1)});return a}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((r,a)=>r-a)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(Yo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return Yo(this._table,n*this._tableRange+this._minPos,!0)}}ne(sx,"id","timeseries"),ne(sx,"defaults",Zl.defaults);const ow="label";function nx(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function HA(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function lw(t,e){t.labels=e}function cw(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:ow;const n=[];t.datasets=e.map(r=>{const a=t.datasets.find(o=>o[s]===r[s]);return!a||!r.data||n.includes(a)?{...r}:(n.push(a),Object.assign(a,r),a)})}function WA(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:ow;const s={labels:[],datasets:[]};return lw(s,t.labels),cw(s,t.datasets,e),s}function VA(t,e){const{height:s=150,width:n=300,redraw:r=!1,datasetIdKey:a,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...f}=t,m=w.useRef(null),p=w.useRef(null),y=()=>{m.current&&(p.current=new Lc(m.current,{type:o,data:WA(l,a),options:c&&{...c},plugins:d}),nx(e,p.current))},x=()=>{nx(e,null),p.current&&(p.current.destroy(),p.current=null)};return w.useEffect(()=>{!r&&p.current&&c&&HA(p.current,c)},[r,c]),w.useEffect(()=>{!r&&p.current&&lw(p.current.config.data,l.labels)},[r,l.labels]),w.useEffect(()=>{!r&&p.current&&l.datasets&&cw(p.current.config.data,l.datasets,a)},[r,l.datasets]),w.useEffect(()=>{p.current&&(r?(x(),setTimeout(y)):p.current.update(h))},[r,c,l.labels,l.datasets,h]),w.useEffect(()=>{p.current&&(x(),setTimeout(y))},[o]),w.useEffect(()=>(y(),()=>x()),[]),tc.createElement("canvas",{ref:m,role:"img",height:s,width:n,...f},u)}const qA=w.forwardRef(VA);function dw(t,e){return Lc.register(e),w.forwardRef((s,n)=>tc.createElement(qA,{...s,ref:n,type:t}))}const Md=dw("line",fl),GA=dw("bar",hl);Lc.register(Yu,Ju,gl,Pn,xl,hA,bA,dA,rA);const KA=()=>{var ge,xe,Me,Ze,We,at,ht,Pe,St,Bt,it,I,M,J,de,Ee,W,ie,Re,Je,Ht,Pr,Er,Ar,Tr,Lr,xt,Mr,Dr,O,se,T,Y,oe,Ve,hn,io,Pf,Ef,Af,Tf,Lf,Mf,Df,Of,If,Rf,Ff,$f,zf,Uf,Bf,Hf,Wf,Vf,qf,Gf,Kf,Yf,Jf,Qf,Xf,Zf,em,tm,sm,nm,rm,am,im,om,lm,cm,dm,um,hm,fm,mm,pm,gm,xm,ym,vm,bm,wm,jm;const{userProfile:t,loading:e,getDashboardRoute:s}=zs(),n=gt(),[r,a]=w.useState(new Date),[o,l]=w.useState({serverStatus:{uptime:"--",responseTime:"--",status:"loading"},database:{queryTime:"--",connections:"Loading...",maxConnections:"Loading...",slowQueries:"0",status:"loading"},network:{latency:"Testing...",status:"loading"}}),[c,d]=w.useState({activeUsers:{current:"--",peakToday:"--",peakHourLabel:"Loading...",recentlyActive:"--"},apiCallVolume:{requestsPerMinute:"--",requestsPerHour:"--",totalRequests:"--",mostUsedEndpoints:[]},databaseOperations:{readOperations:"--",writeOperations:"--",queryCount:"--",totalUsers:"--"},storageUsage:{databaseSize:"Loading...",tableCount:"Loading...",indexSize:"Loading...",growthRate:"Loading..."},status:"loading"}),[u,h]=w.useState({errorRates:{http4xx:"--",http5xx:"--",errorTrend:"loading",totalErrorsToday:"--"},failedOperations:{loginFailures:"--",databaseTimeouts:"--",authenticationErrors:"--",apiErrors:"--"},systemAlerts:{criticalAlerts:"--",warningAlerts:"--",lastCriticalAlert:"Loading...",alertStatus:"loading"},recentErrors:[],status:"loading"}),[f,m]=w.useState({apiHealth:{responseTime:"--",rateLimits:"--",status:"loading",diagnostics:null},databaseConnections:{activeConnections:"--",connectionPoolStatus:"--",poolHealth:"loading",diagnostics:null},rowLevelSecurity:{policyPerformance:"--",accessPatterns:"--",rlsStatus:"loading",diagnostics:null},status:"loading"}),[p,y]=w.useState({userGrowth:{dailyGrowth:[],totalUsers:"--",growthRate:"--",last30Days:"--",last7Days:"--"},peakUsagePatterns:{byDayOfWeek:[],byHour:[],peakDay:"--",peakHour:"--"},growthMetrics:{userGrowthRate:"--",dataGrowthEstimate:"--",recentDataGrowth:"--",averageUsersPerDay:"--"},performanceOverTime:{avgResponseTime:[],errorRate:[]},summary:{trendsAvailable:!1,dataQuality:"loading"},status:"loading"}),[x,g]=w.useState(!1),[v,b]=w.useState({apiHealth:!1,databaseConnections:!1,rowLevelSecurity:!1}),[k,j]=w.useState({infrastructure:!0,errors:!0,supabaseMetrics:!0,userAnalytics:!1,historicalTrends:!1});if(w.useEffect(()=>{if(!e&&t&&t.role!=="Capacity Admin"){console.log(`🚫 Access denied to system health for role: ${t.role}, redirecting to dashboard`);const $=s();n($,{replace:!0})}},[t,e,n,s]),w.useEffect(()=>{A()},[]),w.useEffect(()=>{const $=setInterval(()=>{A()},3e4);return()=>clearInterval($)},[]),t&&t.role!=="Capacity Admin")return null;if(e)return i.jsx($e,{children:i.jsx("div",{className:"flex items-center justify-center h-64",children:i.jsxs("div",{className:"text-center",children:[i.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-300",children:"Loading..."})]})})});const S=()=>"/api/system",C=$=>{var ce,be,tt;if(!$||!$.data)return console.warn("⚠️ No historical data received from API"),_();const te=$.data||[],ue=$.summary||{},ke=P(te),ye=N(te),et=L(te);return{userGrowth:{dailyGrowth:ke,totalUsers:((ce=ue.totalUsers)==null?void 0:ce.toString())||"--",growthRate:ue.growthRate||"+0%",last30Days:((be=ue.last30DaysUsers)==null?void 0:be.toString())||"--",last7Days:((tt=ue.last7DaysUsers)==null?void 0:tt.toString())||"--"},peakUsagePatterns:{byDayOfWeek:ye.byDayOfWeek,byHour:ye.byHour,peakDay:ye.peakDay,peakHour:ye.peakHour},growthMetrics:{userGrowthRate:ue.growthRate||"+0%",dataGrowthEstimate:ue.totalDataItems?`${Math.round(ue.totalDataItems*.1)} MB/month`:"N/A",recentDataGrowth:ue.last24HoursUsers?`${ue.last24HoursUsers*2} KB`:"N/A",averageUsersPerDay:ue.totalUsers&&ue.totalUsers>0?(ue.totalUsers/30).toFixed(1):"0"},performanceOverTime:{avgResponseTime:et.responseTime,errorRate:et.errorRate},summary:{trendsAvailable:!0,dataQuality:"live_data",totalDataPoints:te.length},status:"healthy"}},_=()=>({userGrowth:{dailyGrowth:[],totalUsers:"--",growthRate:"+0%",last30Days:"--",last7Days:"--"},peakUsagePatterns:{byDayOfWeek:[],byHour:[],peakDay:"N/A",peakHour:"N/A"},growthMetrics:{userGrowthRate:"+0%",dataGrowthEstimate:"N/A",recentDataGrowth:"N/A",averageUsersPerDay:"0"},performanceOverTime:{avgResponseTime:[],errorRate:[]},summary:{trendsAvailable:!1,dataQuality:"no_data",totalDataPoints:0},status:"healthy"}),P=($,te)=>{if(!$||$.length===0)return[];const ue=[],ke=new Date;for(let ye=6;ye>=0;ye--){const ce=new Date(ke.getTime()-ye*24*60*60*1e3).toISOString().split("T")[0],be=$.filter(Wt=>new Date(Wt.timestamp).toISOString().split("T")[0]===ce),tt=be.length>0?Math.max(...be.map(Wt=>Wt.activeUsers)):0,Us=Math.min(ye===6?2:1,tt);ue.push({date:ce,totalUsers:tt,newUsers:Us})}return ue},N=$=>{if(!$||$.length===0)return{byDayOfWeek:[],byHour:[],peakDay:"Monday",peakHour:"9:00 AM"};const ue=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"].map((ce,be)=>({day:ce,registrations:Math.floor(Math.random()*5)+(be===1?3:1)})),ke=[];for(let ce=0;ce<24;ce++){const be=ce.toString().padStart(2,"0")+":00",tt=ce>=8&&ce<=17,Us=ce>=9&&ce<=11;let Wt=Math.floor(Math.random()*2);tt&&(Wt+=1),Us&&(Wt+=2),ke.push({hour:be,registrations:Wt})}const ye=ue.reduce((ce,be)=>be.registrations>ce.registrations?be:ce),et=ke.reduce((ce,be)=>be.registrations>ce.registrations?be:ce);return{byDayOfWeek:ue,byHour:ke,peakDay:ye.day,peakHour:et.hour.replace(":00",":00 AM").replace(/(\d{2}):00 AM$/,(ce,be)=>{const tt=parseInt(be);return tt===0?"12:00 AM":tt>12?`${tt-12}:00 PM`:tt===12?"12:00 PM":ce})}},L=$=>{if(!$||$.length===0)return{responseTime:[],errorRate:[]};const te=$.slice(-12),ue=te.map(ye=>({date:new Date(ye.timestamp).toISOString(),responseTime:parseInt(ye.responseTime)||100})),ke=te.map(ye=>({date:new Date(ye.timestamp).toISOString(),errorRate:parseFloat(ye.errorRate)||0}));return{responseTime:ue,errorRate:ke}},A=async()=>{var te,ue,ke,ye,et,ce,be,tt,Us,Wt,Or,Da,Nm,_m,km,Sm,Cm,Pm,Em,Am,Tm,Lm,Mm,Dm,Om,Im,Rm,Fm,$m,zm,Um,Bm,Hm;g(!0);const $=S();try{const[Oc,Kn]=await Promise.all([fetch(`${$}/monitoring?type=server-status`),fetch(`${$}/monitoring?type=database-health`)]),[Yn,Ic]=await Promise.all([Oc.json(),Kn.json()]);l(yt=>{var q;return{...yt,serverStatus:{uptime:Yn.uptime||"99.5%",responseTime:Yn.responseTime||"0ms",status:Yn.status||"healthy",lastCheck:Yn.lastCheck||Yn.timestamp,details:{actualUptimeSeconds:Yn.actualUptimeSeconds||"N/A",actualUptimeFormatted:Yn.actualUptimeFormatted||"Serverless Function"}},database:{queryTime:(q=Ic.connectionTest)!=null&&q.responseTime?`${Ic.connectionTest.responseTime}ms`:"--",connections:"Supabase Managed",maxConnections:"Auto-scaling",slowQueries:"0",status:Ic.overallHealth||"healthy",details:{realUserCount:"N/A",hasQueryError:!1,errorMessage:null}}}});try{const q=await(await fetch(`${$}/monitoring?type=network`)).json();l(Rc=>({...Rc,network:{latency:q.latency,status:q.status}}))}catch(yt){console.error("❌ Failed to fetch network metrics:",yt),l(q=>({...q,network:{latency:"unavailable",status:"error"}}))}try{const q=await(await fetch(`${$}/monitoring?type=usage-analytics`)).json();console.log("📊 Received usage analytics data:",q),d({activeUsers:{current:((te=q.activeUsers)==null?void 0:te.current)!==void 0?q.activeUsers.current:"--",peakToday:((ue=q.activeUsers)==null?void 0:ue.peakToday)!==void 0?q.activeUsers.peakToday:"--",peakHourLabel:"9:00 AM - 10:00 AM",recentlyActive:((ke=q.activeUsers)==null?void 0:ke.last24Hours)!==void 0?q.activeUsers.last24Hours:"--"},apiCallVolume:{requestsPerMinute:((ye=q.apiCalls)==null?void 0:ye.currentRate)!==void 0?q.apiCalls.currentRate:"--",requestsPerHour:((et=q.apiCalls)==null?void 0:et.currentRate)!==void 0?q.apiCalls.currentRate*60:"--",totalRequests:((ce=q.apiCalls)==null?void 0:ce.last24Hours)!==void 0?q.apiCalls.last24Hours:"--",mostUsedEndpoints:[{endpoint:"/api/system/monitoring",count:((be=q.apiCalls)==null?void 0:be.currentRate)||0}]},databaseOperations:{readOperations:((tt=q.databaseOperations)==null?void 0:tt.readOperations)!==void 0?q.databaseOperations.readOperations:"--",writeOperations:((Us=q.databaseOperations)==null?void 0:Us.writeOperations)!==void 0?q.databaseOperations.writeOperations:"--",queryCount:((Wt=q.databaseOperations)==null?void 0:Wt.queryCount)!==void 0?q.databaseOperations.queryCount:"--",totalUsers:((Or=q.databaseOperations)==null?void 0:Or.totalUsers)!==void 0?q.databaseOperations.totalUsers:"--"},storageUsage:{databaseSize:((Da=q.storageUsage)==null?void 0:Da.databaseSize)||"N/A",tableCount:((Nm=q.storageUsage)==null?void 0:Nm.tableCount)!==void 0?q.storageUsage.tableCount:"N/A",indexSize:((_m=q.storageUsage)==null?void 0:_m.indexSize)||"N/A",growthRate:((km=q.storageUsage)==null?void 0:km.growthRate)||"N/A"},status:"healthy"})}catch(yt){console.error("❌ Failed to fetch usage analytics:",yt),d(q=>({...q,status:"error"}))}try{const q=await(await fetch(`${$}/monitoring?type=error-monitoring`)).json();h({errorRates:{http4xx:((Sm=q.errorTypes)==null?void 0:Sm.http4xx)||"0",http5xx:((Cm=q.errorTypes)==null?void 0:Cm.http5xx)||"0",errorTrend:(((Pm=q.last24Hours)==null?void 0:Pm.totalErrors)>0,"stable"),totalErrorsToday:((Em=q.last24Hours)==null?void 0:Em.totalErrors)||"0"},failedOperations:{loginFailures:((Am=q.errorTypes)==null?void 0:Am.loginFailures)||"0",databaseTimeouts:((Tm=q.errorTypes)==null?void 0:Tm.databaseTimeouts)||"0",authenticationErrors:((Lm=q.errorTypes)==null?void 0:Lm.authenticationErrors)||"0",apiErrors:((Mm=q.errorTypes)==null?void 0:Mm.apiErrors)||"0"},systemAlerts:{criticalAlerts:((Dm=q.last24Hours)==null?void 0:Dm.criticalErrors)||"0",warningAlerts:((Om=q.last24Hours)==null?void 0:Om.warnings)||"0",lastCriticalAlert:(Im=q.lastError)!=null&&Im.timestamp?new Date(q.lastError.timestamp).toLocaleString():"--",alertStatus:((Rm=q.last24Hours)==null?void 0:Rm.criticalErrors)>0?"warning":"healthy"},recentErrors:q.lastError?[{type:q.lastError.level||"error",message:q.lastError.message||"Unknown error",timestamp:q.lastError.timestamp||new Date().toISOString()}]:[],status:"healthy"})}catch(yt){console.error("❌ Failed to fetch error monitoring data:",yt),h(q=>({...q,status:"error"}))}try{const q=await(await fetch(`${$}/monitoring?type=supabase-metrics`)).json();m({apiHealth:{responseTime:(Fm=q.queryPerformance)!=null&&Fm.avgResponseTime?`${q.queryPerformance.avgResponseTime}ms`:"--",rateLimits:"Normal",status:(($m=q.connectionPool)==null?void 0:$m.status)||"healthy",diagnostics:null},databaseConnections:{activeConnections:((zm=q.connectionPool)==null?void 0:zm.activeConnections)||"--",connectionPoolStatus:((Um=q.connectionPool)==null?void 0:Um.status)||"--",poolHealth:((Bm=q.connectionPool)==null?void 0:Bm.status)||"healthy",diagnostics:null},rowLevelSecurity:{policyPerformance:"Optimal",accessPatterns:"Secure",rlsStatus:"enabled",diagnostics:null},status:"healthy"})}catch(yt){console.error("❌ Failed to fetch Supabase metrics:",yt),m(q=>({...q,status:"error"}))}try{const q=await(await fetch(`${$}/monitoring?type=historical-data`)).json();console.log("📈 Received historical data:",q);const Rc=C(q);y(Rc)}catch(yt){console.error("❌ Failed to fetch historical data:",yt),y({userGrowth:{dailyGrowth:[],totalUsers:((Hm=c.databaseOperations)==null?void 0:Hm.totalUsers)||"--",growthRate:"+0%",last30Days:"0",last7Days:"0"},peakUsagePatterns:{byDayOfWeek:[],byHour:[],peakDay:"N/A",peakHour:"N/A"},growthMetrics:{userGrowthRate:"+0%",dataGrowthEstimate:"N/A",recentDataGrowth:"N/A",averageUsersPerDay:"0"},performanceOverTime:{avgResponseTime:[],errorRate:[]},summary:{trendsAvailable:!1,dataQuality:"error",totalDataPoints:0},status:"error"})}a(new Date)}catch(Oc){console.error("❌ Failed to fetch system metrics:",Oc),l(Kn=>({serverStatus:{...Kn.serverStatus,status:"error"},database:{...Kn.database,status:"error"},network:Kn.network})),h(Kn=>({...Kn,status:"error"}))}finally{g(!1)}},E=$=>{if(!$)return"text-slate-400";switch($.toLowerCase()){case"healthy":case"good":case"normal":return"text-green-400";case"warning":return"text-yellow-400";case"critical":case"error":case"poor":return"text-red-400";default:return"text-slate-400"}},D=$=>{if(!$)return i.jsx(xs,{className:"h-5 w-5 text-slate-400"});switch($.toLowerCase()){case"healthy":case"good":case"normal":return i.jsx(Va,{className:"h-5 w-5 text-green-400"});case"warning":return i.jsx(Ss,{className:"h-5 w-5 text-yellow-400"});case"critical":case"error":case"poor":return i.jsx(Ss,{className:"h-5 w-5 text-red-400"});default:return i.jsx(xs,{className:"h-5 w-5 text-slate-400"})}},F=async $=>{const te=v[$];b(ue=>({...ue,[$]:!ue[$]})),te||await U($)},U=async $=>{const te=S();try{console.log("🔍 Fetching diagnostics for section:",$);const ke=await(await fetch(`${te}/monitoring?type=supabase-metrics&diagnostics=true`)).json();console.log("📊 Diagnostics data received:",ke.diagnostics),ke.diagnostics?(m(ye=>({...ye,apiHealth:{...ye.apiHealth,diagnostics:ke.diagnostics.apiHealth},databaseConnections:{...ye.databaseConnections,diagnostics:ke.diagnostics.databaseConnections},rowLevelSecurity:{...ye.rowLevelSecurity,diagnostics:ke.diagnostics.rowLevelSecurity}})),console.log("✅ Diagnostics updated successfully")):console.warn("⚠️ No diagnostics data in response")}catch(ue){console.error("❌ Failed to fetch diagnostics:",ue)}},Z=$=>{j(te=>({...te,[$]:!te[$]}))},R=({sectionKey:$,title:te,icon:ue,isExpanded:ke,children:ye,errorIndicator:et})=>i.jsxs("div",{className:"space-y-6",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("button",{onClick:()=>Z($),className:"flex items-center space-x-2 hover:text-blue-300 transition-colors",children:[ke?i.jsx(Un,{className:"h-5 w-5 text-blue-400"}):i.jsx(ya,{className:"h-5 w-5 text-blue-400"}),ue,i.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:te})]}),et]}),ke&&ye]}),V=()=>{var ye,et,ce;const $=[(ye=o.serverStatus)==null?void 0:ye.status,(et=o.database)==null?void 0:et.status,(ce=o.network)==null?void 0:ce.status,c==null?void 0:c.status,u==null?void 0:u.status,f==null?void 0:f.status].filter(Boolean),te=$.filter(be=>be==="error").length,ue=$.filter(be=>be==="warning").length,ke=$.filter(be=>be==="loading").length;return te>0?"critical":ue>1?"warning":ke>0?"loading":"healthy"},G=$=>{switch($){case"healthy":return"text-green-400";case"warning":return"text-yellow-400";case"critical":return"text-red-400";case"loading":return"text-blue-400";default:return"text-slate-400"}},H=$=>{switch($){case"healthy":return i.jsx(Va,{className:"h-12 w-12"});case"warning":return i.jsx(Ss,{className:"h-12 w-12"});case"critical":return i.jsx(yd,{className:"h-12 w-12"});case"loading":return i.jsx(xs,{className:"h-12 w-12 animate-pulse"});default:return i.jsx(Ms,{className:"h-12 w-12"})}},K=$=>{switch($){case"healthy":return"All systems operational";case"warning":return"Some systems need attention";case"critical":return"Critical issues detected";case"loading":return"Checking system status...";default:return"System status unknown"}},ee=()=>{var te,ue,ke,ye,et,ce,be,tt,Us,Wt,Or,Da;const $=[];return((te=o.serverStatus)==null?void 0:te.status)==="error"&&$.push({type:"critical",title:"Server Connection Failed",message:"Unable to connect to monitoring endpoints",icon:i.jsx(Do,{className:"h-5 w-5"}),action:"Check server status"}),((ue=o.database)==null?void 0:ue.status)==="error"&&$.push({type:"critical",title:"Database Connection Issues",message:"Database health check failed",icon:i.jsx(Ts,{className:"h-5 w-5"}),action:"Verify database connection"}),((ke=u.systemAlerts)==null?void 0:ke.criticalAlerts)!=="--"&&parseInt(((ye=u.systemAlerts)==null?void 0:ye.criticalAlerts)||"0")>0&&$.push({type:"critical",title:`${(et=u.systemAlerts)==null?void 0:et.criticalAlerts} Critical System Alerts`,message:`Last critical: ${(ce=u.systemAlerts)==null?void 0:ce.lastCriticalAlert}`,icon:i.jsx(Ss,{className:"h-5 w-5"}),action:"Review alert details"}),((be=u.failedOperations)==null?void 0:be.authenticationErrors)!=="--"&&parseInt(((tt=u.failedOperations)==null?void 0:tt.authenticationErrors)||"0")>5&&$.push({type:"warning",title:"High Authentication Failures",message:`${(Us=u.failedOperations)==null?void 0:Us.authenticationErrors} auth errors detected`,icon:i.jsx(yd,{className:"h-5 w-5"}),action:"Check authentication system"}),((Wt=u.failedOperations)==null?void 0:Wt.apiErrors)!=="--"&&parseInt(((Or=u.failedOperations)==null?void 0:Or.apiErrors)||"0")>10&&$.push({type:"warning",title:"High API Error Rate",message:`${(Da=u.failedOperations)==null?void 0:Da.apiErrors} API errors in recent period`,icon:i.jsx($u,{className:"h-5 w-5"}),action:"Investigate API issues"}),f&&f.status==="error"&&$.push({type:"warning",title:"Supabase Metrics Unavailable",message:"Unable to fetch Supabase-specific metrics",icon:i.jsx(Ts,{className:"h-5 w-5"}),action:"Check Supabase connection"}),$.slice(0,4)},ae=({title:$,diagnostics:te,sectionKey:ue})=>{const ke=v[ue],ye=te!=null,et=ke&&!ye;return i.jsxs("div",{className:"mt-4 border-t border-slate-700 pt-4",children:[i.jsxs("button",{onClick:()=>F(ue),className:"flex items-center space-x-2 text-sm transition-colors text-slate-400 hover:text-slate-300",children:[ke?i.jsx(Un,{className:"h-4 w-4"}):i.jsx(ya,{className:"h-4 w-4"}),i.jsx(cb,{className:"h-4 w-4"}),i.jsx("span",{children:et?"Loading diagnostics...":"Diagnostic Details"})]}),ke&&i.jsx("div",{className:"mt-3 space-y-3",children:et?i.jsxs("div",{className:"flex items-center space-x-2 text-slate-500",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-400"}),i.jsx("span",{className:"text-sm",children:"Loading diagnostic data..."})]}):ye?i.jsxs(i.Fragment,{children:[i.jsxs("div",{className:"text-xs text-slate-500",children:[te.totalTests&&`${te.totalTests} tests performed`,te.totalDbTests&&`${te.totalDbTests} database tests performed`,te.totalRlsTests&&`${te.totalRlsTests} RLS tests performed`,te.errorCount>0&&` • ${te.errorCount} errors`,te.slowTestCount>0&&` • ${te.slowTestCount} slow tests`,te.slowQueryCount>0&&` • ${te.slowQueryCount} slow queries`]}),te.issueType&&te.issueType!=="none"&&i.jsxs("div",{className:"text-xs text-yellow-400",children:[i.jsx("span",{className:"font-semibold",children:"Issue Type:"})," ",te.issueType]}),te.poolHealthReason&&i.jsxs("div",{className:"text-xs text-slate-400",children:[i.jsx("span",{className:"font-semibold",children:"Pool Status:"})," ",te.poolHealthReason]}),te.rlsStatusReason&&i.jsxs("div",{className:"text-xs text-slate-400",children:[i.jsx("span",{className:"font-semibold",children:"RLS Status:"})," ",te.rlsStatusReason]}),te.individualTests&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-slate-400 mb-2",children:"Individual Test Results:"}),i.jsx("div",{className:"space-y-1",children:te.individualTests.map((ce,be)=>i.jsxs("div",{className:"flex items-center justify-between text-xs",children:[i.jsx("span",{className:"text-slate-500",children:ce.name}),i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx("span",{className:"font-mono text-slate-400",children:ce.responseTime}),i.jsx("span",{className:`px-2 py-1 rounded text-xs ${ce.status==="healthy"?"bg-green-900 text-green-300":ce.status==="slow"?"bg-yellow-900 text-yellow-300":"bg-red-900 text-red-300"}`,children:ce.status})]})]},be))})]}),te.roleDistribution&&Object.keys(te.roleDistribution).length>0&&i.jsxs("div",{children:[i.jsx("div",{className:"text-xs font-semibold text-slate-400 mb-2",children:"Role Distribution:"}),i.jsx("div",{className:"space-y-1",children:Object.entries(te.roleDistribution).map(([ce,be])=>i.jsxs("div",{className:"flex justify-between text-xs",children:[i.jsx("span",{className:"text-slate-500",children:ce}),i.jsxs("span",{className:"text-slate-400",children:[be," users"]})]},ce))})]})]}):i.jsx("div",{className:"text-xs text-slate-500",children:"No diagnostic data available"})})]})};return i.jsx($e,{children:i.jsxs("div",{className:"space-y-8",children:[i.jsxs("div",{className:"flex items-center justify-between",children:[i.jsxs("div",{className:"flex items-center space-x-4",children:[i.jsx(xs,{className:"h-8 w-8 text-blue-400"}),i.jsxs("div",{children:[i.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"System Health"}),i.jsx("p",{className:"text-slate-400",children:"Infrastructure & Performance Monitoring"})]})]}),i.jsxs("div",{className:"flex items-center space-x-3",children:[i.jsxs("button",{onClick:A,disabled:x,className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600 disabled:opacity-50 text-white rounded-lg transition-colors text-sm",title:"Refresh metrics",children:[i.jsx(qa,{className:`h-4 w-4 ${x?"animate-spin":""}`}),i.jsx("span",{children:x?"Refreshing...":"Refresh"})]}),x&&i.jsxs("div",{className:"flex items-center space-x-2 text-blue-400",children:[i.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-400"}),i.jsx("span",{className:"text-sm",children:"Fetching real data..."})]}),i.jsxs("div",{className:"text-sm text-slate-400",children:["Last updated: ",r.toLocaleTimeString()]})]})]}),i.jsxs("div",{className:"flex items-center justify-between bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[i.jsxs("div",{className:"flex items-center space-x-3",children:[H(V()),i.jsxs("div",{children:[i.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Overall System Health"}),i.jsx("p",{className:`text-sm ${G(V())}`,children:K(V())})]})]}),i.jsxs("div",{className:"text-sm text-slate-400",children:["Last checked: ",r.toLocaleTimeString()]})]}),ee().length>0&&i.jsxs("div",{className:"bg-red-900/20 border border-red-700 rounded-lg p-4",children:[i.jsxs("div",{className:"flex items-center justify-between mb-3",children:[i.jsxs("div",{className:"flex items-center space-x-2 text-red-400",children:[i.jsx(Ms,{className:"h-5 w-5"}),i.jsxs("span",{className:"font-semibold",children:["Critical Alerts (",ee().length,")"]})]}),i.jsx("div",{className:"text-xs text-red-300",children:"Requires immediate attention"})]}),i.jsx("div",{className:"space-y-3",children:ee().map(($,te)=>i.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-lg ${$.type==="critical"?"bg-red-900/30":"bg-yellow-900/30"}`,children:[i.jsx("div",{className:`flex-shrink-0 p-2 rounded-full ${$.type==="critical"?"bg-red-500 text-white":"bg-yellow-500 text-black"}`,children:$.icon}),i.jsxs("div",{className:"flex-1",children:[i.jsx("div",{className:`font-semibold ${$.type==="critical"?"text-red-200":"text-yellow-200"}`,children:$.title}),i.jsx("div",{className:"text-sm text-slate-300 mt-1",children:$.message}),i.jsxs("button",{className:`text-sm mt-2 hover:underline ${$.type==="critical"?"text-red-400":"text-yellow-400"}`,children:["→ ",$.action]})]})]},te))})]}),ee().length===0&&V()==="healthy"&&i.jsx("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-4",children:i.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[i.jsx(Va,{className:"h-5 w-5"}),i.jsx("span",{className:"font-semibold",children:"No Critical Alerts"}),i.jsx("span",{className:"text-sm text-green-300",children:"• All systems operating normally"})]})}),i.jsx(R,{sectionKey:"infrastructure",title:"Infrastructure & Performance",icon:i.jsx(Do,{className:"h-6 w-6 text-blue-400"}),isExpanded:k.infrastructure,errorIndicator:((ge=o.serverStatus)==null?void 0:ge.status)==="error"&&i.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[i.jsx(Ss,{className:"h-4 w-4"}),i.jsx("span",{children:"Unable to connect to monitoring endpoints"})]}),children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Do,{className:"h-5 w-5 text-blue-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Server Status"})]}),D((xe=o.serverStatus)==null?void 0:xe.status)]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Uptime"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Me=o.serverStatus)==null?void 0:Me.uptime)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Response Time"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Ze=o.serverStatus)==null?void 0:Ze.responseTime)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Status"}),i.jsx("span",{className:`font-semibold capitalize ${E((We=o.serverStatus)==null?void 0:We.status)}`,children:((at=o.serverStatus)==null?void 0:at.status)||"--"})]})})]})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ts,{className:"h-5 w-5 text-green-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Database Health"})]}),D((ht=o.database)==null?void 0:ht.status)]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Query Time"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Pe=o.database)==null?void 0:Pe.queryTime)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Connections"}),i.jsx("span",{className:"text-slate-100 font-mono",children:"Managed by Platform"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Slow Queries"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((St=o.database)==null?void 0:St.slowQueries)||"--"})]})})]})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(cS,{className:"h-5 w-5 text-purple-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Network"})]}),D((Bt=o.network)==null?void 0:Bt.status)]}),i.jsxs("div",{className:"space-y-3",children:[i.jsxs("div",{children:[i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Latency"}),i.jsx("span",{className:"text-slate-100 font-mono text-lg font-bold",children:((it=o.network)==null?void 0:it.latency)||"--"})]}),i.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:i.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${((I=o.network)==null?void 0:I.status)==="good"?"bg-green-400":((M=o.network)==null?void 0:M.status)==="warning"?"bg-yellow-400":"bg-red-400"}`,style:{width:((J=o.network)==null?void 0:J.status)==="good"?"25%":((de=o.network)==null?void 0:de.status)==="warning"?"60%":"90%"}})})]}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Status"}),i.jsx("span",{className:`font-semibold capitalize ${E((Ee=o.network)==null?void 0:Ee.status)}`,children:((W=o.network)==null?void 0:W.status)||"--"})]})})]})]})]})}),i.jsx(R,{sectionKey:"errors",title:"Error Monitoring",icon:i.jsx(Ms,{className:"h-6 w-6 text-red-400"}),isExpanded:k.errors,errorIndicator:u.status==="error"&&i.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[i.jsx(Ss,{className:"h-4 w-4"}),i.jsx("span",{children:"Unable to fetch error monitoring data"})]}),children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(oS,{className:"h-5 w-5 text-red-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Error Rates"})]}),D(u.status)]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"4xx Errors"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((ie=u.errorRates)==null?void 0:ie.http4xx)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"5xx Errors"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Re=u.errorRates)==null?void 0:Re.http5xx)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Total Today"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Je=u.errorRates)==null?void 0:Je.totalErrorsToday)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Trend"}),i.jsx("span",{className:`font-mono text-xs capitalize ${((Ht=u.errorRates)==null?void 0:Ht.errorTrend)==="improving"?"text-green-400":((Pr=u.errorRates)==null?void 0:Pr.errorTrend)==="stable"?"text-yellow-400":"text-red-400"}`,children:((Er=u.errorRates)==null?void 0:Er.errorTrend)||"--"})]})})]})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(yd,{className:"h-5 w-5 text-orange-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Failed Operations"})]}),D(u.status)]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Login Failures"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Ar=u.failedOperations)==null?void 0:Ar.loginFailures)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"DB Timeouts"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Tr=u.failedOperations)==null?void 0:Tr.databaseTimeouts)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Auth Errors"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Lr=u.failedOperations)==null?void 0:Lr.authenticationErrors)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"API Errors"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((xt=u.failedOperations)==null?void 0:xt.apiErrors)||"--"})]})})]})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ss,{className:"h-5 w-5 text-yellow-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"System Alerts"})]}),D((Mr=u.systemAlerts)==null?void 0:Mr.alertStatus)]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Critical"}),i.jsx("span",{className:"text-red-400 font-mono font-bold",children:((Dr=u.systemAlerts)==null?void 0:Dr.criticalAlerts)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Warnings"}),i.jsx("span",{className:"text-yellow-400 font-mono",children:((O=u.systemAlerts)==null?void 0:O.warningAlerts)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Status"}),i.jsx("span",{className:`font-semibold capitalize ${E((se=u.systemAlerts)==null?void 0:se.alertStatus)}`,children:((T=u.systemAlerts)==null?void 0:T.alertStatus)||"--"})]})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Last Critical:"}),i.jsx("div",{className:"text-xs text-slate-300 font-mono",children:((Y=u.systemAlerts)==null?void 0:Y.lastCriticalAlert)||"--"})]})]})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Jk,{className:"h-5 w-5 text-purple-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Recent Error Log"})]}),D(u.status)]}),i.jsxs("div",{className:"space-y-2",children:[u.recentErrors&&u.recentErrors.length>0?u.recentErrors.slice(0,4).map(($,te)=>i.jsxs("div",{className:"border-l-2 border-red-400 pl-3 py-1",children:[i.jsx("div",{className:"text-xs text-red-400 font-mono",children:$.type}),i.jsx("div",{className:"text-xs text-slate-300 truncate",children:$.message}),i.jsx("div",{className:"text-xs text-slate-500",children:$.timestamp})]},te)):i.jsxs("div",{className:"text-center py-4",children:[i.jsx(Va,{className:"h-8 w-8 text-green-400 mx-auto mb-2"}),i.jsx("div",{className:"text-sm text-green-400",children:"No recent errors"}),i.jsx("div",{className:"text-xs text-slate-400",children:"System running smoothly"})]}),u.recentErrors&&u.recentErrors.length>4&&i.jsxs("div",{className:"text-xs text-slate-400 text-center pt-2 border-t border-slate-700",children:["+",u.recentErrors.length-4," more errors"]})]})]})]})}),i.jsx(R,{sectionKey:"supabaseMetrics",title:"Supabase Specific Metrics",icon:i.jsx(Ts,{className:"h-6 w-6 text-purple-400"}),isExpanded:k.supabaseMetrics,errorIndicator:f&&f.status==="error"&&i.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[i.jsx(Ss,{className:"h-4 w-4"}),i.jsx("span",{children:"Unable to fetch Supabase metrics"})]}),children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Do,{className:"h-5 w-5 text-purple-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Supabase API Health"})]}),D((oe=f.apiHealth)==null?void 0:oe.status)]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Response Times"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Ve=f.apiHealth)==null?void 0:Ve.responseTime)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Rate Limits"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((hn=f.apiHealth)==null?void 0:hn.rateLimits)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Status"}),i.jsx("span",{className:`font-semibold capitalize ${E((io=f.apiHealth)==null?void 0:io.status)}`,children:((Pf=f.apiHealth)==null?void 0:Pf.status)||"--"})]})})]}),i.jsx(ae,{title:"API Health Diagnostics",diagnostics:(Ef=f.apiHealth)==null?void 0:Ef.diagnostics,sectionKey:"apiHealth"})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ts,{className:"h-5 w-5 text-blue-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Database Connections"})]}),D((Af=f.databaseConnections)==null?void 0:Af.poolHealth)]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Active Connections"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Tf=f.databaseConnections)==null?void 0:Tf.activeConnections)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Connection Pool Status"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Lf=f.databaseConnections)==null?void 0:Lf.connectionPoolStatus)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Pool Health"}),i.jsx("span",{className:`font-semibold capitalize ${E((Mf=f.databaseConnections)==null?void 0:Mf.poolHealth)}`,children:((Df=f.databaseConnections)==null?void 0:Df.poolHealth)||"--"})]})})]}),i.jsx(ae,{title:"Database Connection Diagnostics",diagnostics:(Of=f.databaseConnections)==null?void 0:Of.diagnostics,sectionKey:"databaseConnections"})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(xs,{className:"h-5 w-5 text-green-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Row Level Security"})]}),D((If=f.rowLevelSecurity)==null?void 0:If.rlsStatus)]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Policy Performance"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Rf=f.rowLevelSecurity)==null?void 0:Rf.policyPerformance)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Access Patterns"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Ff=f.rowLevelSecurity)==null?void 0:Ff.accessPatterns)||"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"RLS Status"}),i.jsx("span",{className:`font-semibold capitalize ${E(($f=f.rowLevelSecurity)==null?void 0:$f.rlsStatus)}`,children:((zf=f.rowLevelSecurity)==null?void 0:zf.rlsStatus)||"--"})]})})]}),i.jsx(ae,{title:"RLS Diagnostics",diagnostics:(Uf=f.rowLevelSecurity)==null?void 0:Uf.diagnostics,sectionKey:"rowLevelSecurity"})]})]})}),i.jsx(R,{sectionKey:"userAnalytics",title:"Usage Analytics",icon:i.jsx(To,{className:"h-6 w-6 text-purple-400"}),isExpanded:k.userAnalytics,errorIndicator:c&&c.status==="error"&&i.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[i.jsx(Ss,{className:"h-4 w-4"}),i.jsx("span",{children:"Unable to fetch usage analytics"})]}),children:i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(dt,{className:"h-5 w-5 text-blue-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Active Users"})]}),D(c==null?void 0:c.status)]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Current Online"}),i.jsx("span",{className:"text-slate-100 font-mono text-lg font-bold",children:((Bf=c.activeUsers)==null?void 0:Bf.current)!==void 0?c.activeUsers.current:"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Peak Today"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Hf=c.activeUsers)==null?void 0:Hf.peakToday)!==void 0?c.activeUsers.peakToday:"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Peak Hour"}),i.jsx("span",{className:"text-slate-100 font-mono text-xs",children:((Wf=c.activeUsers)==null?void 0:Wf.peakHourLabel)||"Loading..."})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Recently Active"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Vf=c.activeUsers)==null?void 0:Vf.recentlyActive)!==void 0?c.activeUsers.recentlyActive:"--"})]})})]})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx($u,{className:"h-5 w-5 text-yellow-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"API Calls"})]}),D(c==null?void 0:c.status)]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Per Minute"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((qf=c.apiCallVolume)==null?void 0:qf.requestsPerMinute)!==void 0?c.apiCallVolume.requestsPerMinute:"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Per Hour"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Gf=c.apiCallVolume)==null?void 0:Gf.requestsPerHour)!==void 0?c.apiCallVolume.requestsPerHour:"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Total Today"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Kf=c.apiCallVolume)==null?void 0:Kf.totalRequests)!==void 0?c.apiCallVolume.totalRequests:"--"})]})}),i.jsxs("div",{children:[i.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Most Used:"}),i.jsx("div",{className:"text-xs text-slate-300 font-mono truncate",children:((Jf=(Yf=c.apiCallVolume)==null?void 0:Yf.mostUsedEndpoints)==null?void 0:Jf.length)>0?((Xf=(Qf=c.apiCallVolume.mostUsedEndpoints[0])==null?void 0:Qf.endpoint)==null?void 0:Xf.split("/").pop())||"N/A":"Loading..."})]})]})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Ts,{className:"h-5 w-5 text-green-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"DB Operations"})]}),D(c==null?void 0:c.status)]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Read Ops"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((Zf=c.databaseOperations)==null?void 0:Zf.readOperations)!==void 0?c.databaseOperations.readOperations:"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Write Ops"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((em=c.databaseOperations)==null?void 0:em.writeOperations)!==void 0?c.databaseOperations.writeOperations:"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Total Queries"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((tm=c.databaseOperations)==null?void 0:tm.queryCount)!==void 0?c.databaseOperations.queryCount:"--"})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Total Users"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((sm=c.databaseOperations)==null?void 0:sm.totalUsers)!==void 0?c.databaseOperations.totalUsers:"--"})]})})]})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Qk,{className:"h-5 w-5 text-orange-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Storage"})]}),D(c==null?void 0:c.status)]}),i.jsxs("div",{className:"space-y-3",children:[i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Database Size"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((nm=c.storageUsage)==null?void 0:nm.databaseSize)||"Loading..."})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[i.jsx("span",{className:"text-slate-400",children:"Tables"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((rm=c.storageUsage)==null?void 0:rm.tableCount)||"Loading..."})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Index Size"}),i.jsx("span",{className:"text-slate-100 font-mono",children:((am=c.storageUsage)==null?void 0:am.indexSize)||"Loading..."})]})}),i.jsx("div",{children:i.jsxs("div",{className:"flex justify-between text-sm",children:[i.jsx("span",{className:"text-slate-400",children:"Growth Rate"}),i.jsx("span",{className:"text-green-400 font-mono text-xs",children:((im=c.storageUsage)==null?void 0:im.growthRate)||"Loading..."})]})})]})]})]})}),i.jsxs(R,{sectionKey:"historicalTrends",title:"Trends & Historical Data",icon:i.jsx(To,{className:"h-6 w-6 text-indigo-400"}),isExpanded:k.historicalTrends,errorIndicator:p&&p.status==="error"&&i.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[i.jsx(Ss,{className:"h-4 w-4"}),i.jsx("span",{children:"Unable to fetch historical data"})]}),children:[i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(dt,{className:"h-5 w-5 text-blue-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Total Users"})]}),i.jsx(qa,{className:"h-5 w-5 text-blue-400"})]}),i.jsx("div",{className:"text-2xl font-bold text-slate-100 mb-2",children:((om=p.userGrowth)==null?void 0:om.totalUsers)||"--"}),i.jsxs("div",{className:"text-sm text-slate-400",children:["+",((lm=p.userGrowth)==null?void 0:lm.last7Days)||"--"," this week"]})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(qa,{className:"h-5 w-5 text-green-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Growth Rate"})]}),i.jsx(qa,{className:"h-5 w-5 text-green-400"})]}),i.jsx("div",{className:"text-2xl font-bold text-slate-100 mb-2",children:((cm=p.userGrowth)==null?void 0:cm.growthRate)||"--"}),i.jsx("div",{className:"text-sm text-slate-400",children:"Last 30 days"})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Lo,{className:"h-5 w-5 text-purple-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Peak Day"})]}),i.jsx(Lo,{className:"h-5 w-5 text-purple-400"})]}),i.jsx("div",{className:"text-2xl font-bold text-slate-100 mb-2",children:((dm=p.peakUsagePatterns)==null?void 0:dm.peakDay)||"--"}),i.jsx("div",{className:"text-sm text-slate-400",children:"Most registrations"})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center justify-between mb-4",children:[i.jsxs("div",{className:"flex items-center space-x-2",children:[i.jsx(Mo,{className:"h-5 w-5 text-orange-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Peak Hour"})]}),i.jsx(Mo,{className:"h-5 w-5 text-orange-400"})]}),i.jsx("div",{className:"text-2xl font-bold text-slate-100 mb-2",children:((um=p.peakUsagePatterns)==null?void 0:um.peakHour)||"--"}),i.jsx("div",{className:"text-sm text-slate-400",children:"Busiest time"})]})]}),i.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[i.jsx(qa,{className:"h-5 w-5 text-blue-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"User Growth Over Time"})]}),(hm=p.userGrowth)!=null&&hm.dailyGrowth&&p.userGrowth.dailyGrowth.length>0?i.jsx("div",{className:"h-64",children:i.jsx(Md,{data:{labels:p.userGrowth.dailyGrowth.map($=>new Date($.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Total Users",data:p.userGrowth.dailyGrowth.map($=>$.totalUsers),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4},{label:"New Users",data:p.userGrowth.dailyGrowth.map($=>$.newUsers),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",fill:!1,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(148, 163, 184)"}}},scales:{x:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}},y:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}}}}})}):i.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:i.jsxs("div",{className:"text-center",children:[i.jsx(To,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Loading growth data..."})]})})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[i.jsx(Lo,{className:"h-5 w-5 text-purple-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Peak Usage by Day"})]}),(fm=p.peakUsagePatterns)!=null&&fm.byDayOfWeek&&p.peakUsagePatterns.byDayOfWeek.length>0?i.jsx("div",{className:"h-64",children:i.jsx(GA,{data:{labels:p.peakUsagePatterns.byDayOfWeek.map($=>$.day),datasets:[{label:"User Registrations",data:p.peakUsagePatterns.byDayOfWeek.map($=>$.registrations),backgroundColor:"rgba(147, 51, 234, 0.6)",borderColor:"rgb(147, 51, 234)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(148, 163, 184)"}}},scales:{x:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}},y:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}}}}})}):i.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Lo,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Loading usage patterns..."})]})})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[i.jsx(xs,{className:"h-5 w-5 text-green-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Performance Over Time"})]}),(mm=p.performanceOverTime)!=null&&mm.avgResponseTime&&p.performanceOverTime.avgResponseTime.length>0?i.jsx("div",{className:"h-64",children:i.jsx(Md,{data:{labels:p.performanceOverTime.avgResponseTime.map($=>new Date($.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Avg Response Time (ms)",data:p.performanceOverTime.avgResponseTime.map($=>$.responseTime),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",fill:!1,tension:.4,yAxisID:"y"},{label:"Error Rate (%)",data:((pm=p.performanceOverTime.errorRate)==null?void 0:pm.map($=>$.errorRate))||[],borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",fill:!1,tension:.4,yAxisID:"y1"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(148, 163, 184)"}}},scales:{x:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}},y:{type:"linear",display:!0,position:"left",ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}},y1:{type:"linear",display:!0,position:"right",ticks:{color:"rgb(148, 163, 184)"},grid:{drawOnChartArea:!1}}}}})}):i.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:i.jsxs("div",{className:"text-center",children:[i.jsx(xs,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Loading performance data..."})]})})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[i.jsx(Mo,{className:"h-5 w-5 text-orange-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Peak Usage by Hour"})]}),(gm=p.peakUsagePatterns)!=null&&gm.byHour&&p.peakUsagePatterns.byHour.length>0?i.jsx("div",{className:"h-64",children:i.jsx(Md,{data:{labels:p.peakUsagePatterns.byHour.map($=>$.hour),datasets:[{label:"User Registrations",data:p.peakUsagePatterns.byHour.map($=>$.registrations),borderColor:"rgb(251, 146, 60)",backgroundColor:"rgba(251, 146, 60, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(148, 163, 184)"}}},scales:{x:{ticks:{color:"rgb(148, 163, 184)",maxTicksLimit:12},grid:{color:"rgba(148, 163, 184, 0.1)"}},y:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}}}}})}):i.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:i.jsxs("div",{className:"text-center",children:[i.jsx(Mo,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),i.jsx("p",{children:"Loading hourly patterns..."})]})})]})]}),i.jsxs(he,{className:"p-6",children:[i.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[i.jsx(To,{className:"h-5 w-5 text-indigo-400"}),i.jsx("h3",{className:"font-semibold text-slate-100",children:"Growth Metrics Summary"})]}),i.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Average Users Per Day"}),i.jsx("div",{className:"text-xl font-semibold text-slate-100",children:((xm=p.growthMetrics)==null?void 0:xm.averageUsersPerDay)||"--"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Data Growth Estimate"}),i.jsx("div",{className:"text-xl font-semibold text-slate-100",children:((ym=p.growthMetrics)==null?void 0:ym.dataGrowthEstimate)||"--"})]}),i.jsxs("div",{children:[i.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Recent Data Growth"}),i.jsx("div",{className:"text-xl font-semibold text-slate-100",children:((vm=p.growthMetrics)==null?void 0:vm.recentDataGrowth)||"--"})]})]}),((bm=p.summary)==null?void 0:bm.dataQuality)==="real_data"&&i.jsx("div",{className:"mt-4 p-3 bg-green-900/20 border border-green-700 rounded-lg",children:i.jsxs("div",{className:"flex items-center space-x-2 text-green-400 text-sm",children:[i.jsx(Va,{className:"h-4 w-4"}),i.jsxs("span",{children:["Displaying real data from ",((wm=p.summary)==null?void 0:wm.totalDataPoints)||0," data points",((jm=p.summary)==null?void 0:jm.oldestRecord)&&` • Since ${new Date(p.summary.oldestRecord).toLocaleDateString()}`]})]})})]})]})]})})},Hs=({children:t})=>{const{isAuthenticated:e,loading:s}=zs(),n=Ut();return s?(console.log("🔄 ProtectedRoute - Still loading auth state..."),i.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:i.jsxs("div",{className:"text-center",children:[i.jsx(db,{className:"h-8 w-8 animate-spin text-blue-500 mx-auto mb-4"}),i.jsx("p",{className:"text-slate-400",children:"Loading..."}),i.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Checking authentication..."})]})})):e?t:i.jsx(Pu,{to:"/auth",state:{from:n},replace:!0})};function YA(){const{pathname:t}=Ut();return w.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function JA(){return i.jsx(Bk,{children:i.jsx(zk,{children:i.jsxs(f_,{children:[i.jsx(YA,{}),i.jsxs(BN,{children:[i.jsx(Vt,{path:"/auth",element:i.jsx(uS,{})}),i.jsx(Vt,{path:"/dashboard",element:i.jsx(Hs,{children:i.jsx(FS,{})})}),i.jsx(Vt,{path:"/formulas",element:i.jsx(Hs,{children:i.jsx(US,{})})}),i.jsx(Vt,{path:"/formulas/:formulaId",element:i.jsx(Hs,{children:i.jsx(BS,{})})}),i.jsx(Vt,{path:"/suppliers",element:i.jsx(Hs,{children:i.jsx(qS,{})})}),i.jsx(Vt,{path:"/raw-materials",element:i.jsx(Hs,{children:i.jsx(KS,{})})}),i.jsx(Vt,{path:"/raw-materials/:materialId",element:i.jsx(Hs,{children:i.jsx(JS,{})})}),i.jsx(Vt,{path:"/user-management",element:i.jsx(Hs,{children:i.jsx(eC,{})})}),i.jsx(Vt,{path:"/system-health",element:i.jsx(Hs,{children:i.jsx(KA,{})})}),i.jsx(Vt,{path:"/settings",element:i.jsx(Hs,{children:i.jsx(tC,{})})}),i.jsx(Vt,{path:"/",element:i.jsx(Pu,{to:"/dashboard"})}),i.jsx(Vt,{path:"/login",element:i.jsx(Pu,{to:"/auth",replace:!0})})]})]})})})}Dd.createRoot(document.getElementById("root")).render(i.jsx(tc.StrictMode,{children:i.jsx(JA,{})}));
