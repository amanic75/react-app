var vv=Object.defineProperty;var bv=(t,e,s)=>e in t?vv(t,e,{enumerable:!0,configurable:!0,writable:!0,value:s}):t[e]=s;var Z=(t,e,s)=>(bv(t,typeof e!="symbol"?e+"":e,s),s);(function(){const e=document.createElement("link").relList;if(e&&e.supports&&e.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))n(r);new MutationObserver(r=>{for(const i of r)if(i.type==="childList")for(const o of i.addedNodes)o.tagName==="LINK"&&o.rel==="modulepreload"&&n(o)}).observe(document,{childList:!0,subtree:!0});function s(r){const i={};return r.integrity&&(i.integrity=r.integrity),r.referrerPolicy&&(i.referrerPolicy=r.referrerPolicy),r.crossOrigin==="use-credentials"?i.credentials="include":r.crossOrigin==="anonymous"?i.credentials="omit":i.credentials="same-origin",i}function n(r){if(r.ep)return;r.ep=!0;const i=s(r);fetch(r.href,i)}})();var Kt=typeof globalThis<"u"?globalThis:typeof window<"u"?window:typeof global<"u"?global:typeof self<"u"?self:{};function wv(t){return t&&t.__esModule&&Object.prototype.hasOwnProperty.call(t,"default")?t.default:t}function _v(t){if(t.__esModule)return t;var e=t.default;if(typeof e=="function"){var s=function n(){return this instanceof n?Reflect.construct(e,arguments,this.constructor):e.apply(this,arguments)};s.prototype=e.prototype}else s={};return Object.defineProperty(s,"__esModule",{value:!0}),Object.keys(t).forEach(function(n){var r=Object.getOwnPropertyDescriptor(t,n);Object.defineProperty(s,n,r.get?r:{enumerable:!0,get:function(){return t[n]}})}),s}var mg={exports:{}},kl={},pg={exports:{}},fe={};/**
 * @license React
 * react.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var wa=Symbol.for("react.element"),jv=Symbol.for("react.portal"),Nv=Symbol.for("react.fragment"),kv=Symbol.for("react.strict_mode"),Sv=Symbol.for("react.profiler"),Cv=Symbol.for("react.provider"),Ev=Symbol.for("react.context"),Pv=Symbol.for("react.forward_ref"),Av=Symbol.for("react.suspense"),Lv=Symbol.for("react.memo"),Tv=Symbol.for("react.lazy"),sf=Symbol.iterator;function Mv(t){return t===null||typeof t!="object"?null:(t=sf&&t[sf]||t["@@iterator"],typeof t=="function"?t:null)}var gg={isMounted:function(){return!1},enqueueForceUpdate:function(){},enqueueReplaceState:function(){},enqueueSetState:function(){}},xg=Object.assign,yg={};function Kr(t,e,s){this.props=t,this.context=e,this.refs=yg,this.updater=s||gg}Kr.prototype.isReactComponent={};Kr.prototype.setState=function(t,e){if(typeof t!="object"&&typeof t!="function"&&t!=null)throw Error("setState(...): takes an object of state variables to update or a function which returns an object of state variables.");this.updater.enqueueSetState(this,t,e,"setState")};Kr.prototype.forceUpdate=function(t){this.updater.enqueueForceUpdate(this,t,"forceUpdate")};function vg(){}vg.prototype=Kr.prototype;function Su(t,e,s){this.props=t,this.context=e,this.refs=yg,this.updater=s||gg}var Cu=Su.prototype=new vg;Cu.constructor=Su;xg(Cu,Kr.prototype);Cu.isPureReactComponent=!0;var nf=Array.isArray,bg=Object.prototype.hasOwnProperty,Eu={current:null},wg={key:!0,ref:!0,__self:!0,__source:!0};function _g(t,e,s){var n,r={},i=null,o=null;if(e!=null)for(n in e.ref!==void 0&&(o=e.ref),e.key!==void 0&&(i=""+e.key),e)bg.call(e,n)&&!wg.hasOwnProperty(n)&&(r[n]=e[n]);var l=arguments.length-2;if(l===1)r.children=s;else if(1<l){for(var c=Array(l),d=0;d<l;d++)c[d]=arguments[d+2];r.children=c}if(t&&t.defaultProps)for(n in l=t.defaultProps,l)r[n]===void 0&&(r[n]=l[n]);return{$$typeof:wa,type:t,key:i,ref:o,props:r,_owner:Eu.current}}function Dv(t,e){return{$$typeof:wa,type:t.type,key:e,ref:t.ref,props:t.props,_owner:t._owner}}function Pu(t){return typeof t=="object"&&t!==null&&t.$$typeof===wa}function Ov(t){var e={"=":"=0",":":"=2"};return"$"+t.replace(/[=:]/g,function(s){return e[s]})}var rf=/\/+/g;function hc(t,e){return typeof t=="object"&&t!==null&&t.key!=null?Ov(""+t.key):e.toString(36)}function wo(t,e,s,n,r){var i=typeof t;(i==="undefined"||i==="boolean")&&(t=null);var o=!1;if(t===null)o=!0;else switch(i){case"string":case"number":o=!0;break;case"object":switch(t.$$typeof){case wa:case jv:o=!0}}if(o)return o=t,r=r(o),t=n===""?"."+hc(o,0):n,nf(r)?(s="",t!=null&&(s=t.replace(rf,"$&/")+"/"),wo(r,e,s,"",function(d){return d})):r!=null&&(Pu(r)&&(r=Dv(r,s+(!r.key||o&&o.key===r.key?"":(""+r.key).replace(rf,"$&/")+"/")+t)),e.push(r)),1;if(o=0,n=n===""?".":n+":",nf(t))for(var l=0;l<t.length;l++){i=t[l];var c=n+hc(i,l);o+=wo(i,e,s,c,r)}else if(c=Mv(t),typeof c=="function")for(t=c.call(t),l=0;!(i=t.next()).done;)i=i.value,c=n+hc(i,l++),o+=wo(i,e,s,c,r);else if(i==="object")throw e=String(t),Error("Objects are not valid as a React child (found: "+(e==="[object Object]"?"object with keys {"+Object.keys(t).join(", ")+"}":e)+"). If you meant to render a collection of children, use an array instead.");return o}function Ta(t,e,s){if(t==null)return t;var n=[],r=0;return wo(t,n,"","",function(i){return e.call(s,i,r++)}),n}function Rv(t){if(t._status===-1){var e=t._result;e=e(),e.then(function(s){(t._status===0||t._status===-1)&&(t._status=1,t._result=s)},function(s){(t._status===0||t._status===-1)&&(t._status=2,t._result=s)}),t._status===-1&&(t._status=0,t._result=e)}if(t._status===1)return t._result.default;throw t._result}var ft={current:null},_o={transition:null},Iv={ReactCurrentDispatcher:ft,ReactCurrentBatchConfig:_o,ReactCurrentOwner:Eu};function jg(){throw Error("act(...) is not supported in production builds of React.")}fe.Children={map:Ta,forEach:function(t,e,s){Ta(t,function(){e.apply(this,arguments)},s)},count:function(t){var e=0;return Ta(t,function(){e++}),e},toArray:function(t){return Ta(t,function(e){return e})||[]},only:function(t){if(!Pu(t))throw Error("React.Children.only expected to receive a single React element child.");return t}};fe.Component=Kr;fe.Fragment=Nv;fe.Profiler=Sv;fe.PureComponent=Su;fe.StrictMode=kv;fe.Suspense=Av;fe.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=Iv;fe.act=jg;fe.cloneElement=function(t,e,s){if(t==null)throw Error("React.cloneElement(...): The argument must be a React element, but you passed "+t+".");var n=xg({},t.props),r=t.key,i=t.ref,o=t._owner;if(e!=null){if(e.ref!==void 0&&(i=e.ref,o=Eu.current),e.key!==void 0&&(r=""+e.key),t.type&&t.type.defaultProps)var l=t.type.defaultProps;for(c in e)bg.call(e,c)&&!wg.hasOwnProperty(c)&&(n[c]=e[c]===void 0&&l!==void 0?l[c]:e[c])}var c=arguments.length-2;if(c===1)n.children=s;else if(1<c){l=Array(c);for(var d=0;d<c;d++)l[d]=arguments[d+2];n.children=l}return{$$typeof:wa,type:t.type,key:r,ref:i,props:n,_owner:o}};fe.createContext=function(t){return t={$$typeof:Ev,_currentValue:t,_currentValue2:t,_threadCount:0,Provider:null,Consumer:null,_defaultValue:null,_globalName:null},t.Provider={$$typeof:Cv,_context:t},t.Consumer=t};fe.createElement=_g;fe.createFactory=function(t){var e=_g.bind(null,t);return e.type=t,e};fe.createRef=function(){return{current:null}};fe.forwardRef=function(t){return{$$typeof:Pv,render:t}};fe.isValidElement=Pu;fe.lazy=function(t){return{$$typeof:Tv,_payload:{_status:-1,_result:t},_init:Rv}};fe.memo=function(t,e){return{$$typeof:Lv,type:t,compare:e===void 0?null:e}};fe.startTransition=function(t){var e=_o.transition;_o.transition={};try{t()}finally{_o.transition=e}};fe.unstable_act=jg;fe.useCallback=function(t,e){return ft.current.useCallback(t,e)};fe.useContext=function(t){return ft.current.useContext(t)};fe.useDebugValue=function(){};fe.useDeferredValue=function(t){return ft.current.useDeferredValue(t)};fe.useEffect=function(t,e){return ft.current.useEffect(t,e)};fe.useId=function(){return ft.current.useId()};fe.useImperativeHandle=function(t,e,s){return ft.current.useImperativeHandle(t,e,s)};fe.useInsertionEffect=function(t,e){return ft.current.useInsertionEffect(t,e)};fe.useLayoutEffect=function(t,e){return ft.current.useLayoutEffect(t,e)};fe.useMemo=function(t,e){return ft.current.useMemo(t,e)};fe.useReducer=function(t,e,s){return ft.current.useReducer(t,e,s)};fe.useRef=function(t){return ft.current.useRef(t)};fe.useState=function(t){return ft.current.useState(t)};fe.useSyncExternalStore=function(t,e,s){return ft.current.useSyncExternalStore(t,e,s)};fe.useTransition=function(){return ft.current.useTransition()};fe.version="18.3.1";pg.exports=fe;var w=pg.exports;const Sl=wv(w);/**
 * @license React
 * react-jsx-runtime.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Fv=w,$v=Symbol.for("react.element"),zv=Symbol.for("react.fragment"),Uv=Object.prototype.hasOwnProperty,Bv=Fv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED.ReactCurrentOwner,Hv={key:!0,ref:!0,__self:!0,__source:!0};function Ng(t,e,s){var n,r={},i=null,o=null;s!==void 0&&(i=""+s),e.key!==void 0&&(i=""+e.key),e.ref!==void 0&&(o=e.ref);for(n in e)Uv.call(e,n)&&!Hv.hasOwnProperty(n)&&(r[n]=e[n]);if(t&&t.defaultProps)for(n in e=t.defaultProps,e)r[n]===void 0&&(r[n]=e[n]);return{$$typeof:$v,type:t,key:i,ref:o,props:r,_owner:Bv.current}}kl.Fragment=zv;kl.jsx=Ng;kl.jsxs=Ng;mg.exports=kl;var a=mg.exports,ld={},kg={exports:{}},$t={},Sg={exports:{}},Cg={};/**
 * @license React
 * scheduler.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */(function(t){function e(O,U){var q=O.length;O.push(U);e:for(;0<q;){var X=q-1>>>1,A=O[X];if(0<r(A,U))O[X]=U,O[q]=A,q=X;else break e}}function s(O){return O.length===0?null:O[0]}function n(O){if(O.length===0)return null;var U=O[0],q=O.pop();if(q!==U){O[0]=q;e:for(var X=0,A=O.length,F=A>>>1;X<F;){var T=2*(X+1)-1,$=O[T],ne=T+1,de=O[ne];if(0>r($,q))ne<A&&0>r(de,$)?(O[X]=de,O[ne]=q,X=ne):(O[X]=$,O[T]=q,X=T);else if(ne<A&&0>r(de,q))O[X]=de,O[ne]=q,X=ne;else break e}}return U}function r(O,U){var q=O.sortIndex-U.sortIndex;return q!==0?q:O.id-U.id}if(typeof performance=="object"&&typeof performance.now=="function"){var i=performance;t.unstable_now=function(){return i.now()}}else{var o=Date,l=o.now();t.unstable_now=function(){return o.now()-l}}var c=[],d=[],u=1,h=null,f=3,m=!1,p=!1,v=!1,g=typeof setTimeout=="function"?setTimeout:null,x=typeof clearTimeout=="function"?clearTimeout:null,y=typeof setImmediate<"u"?setImmediate:null;typeof navigator<"u"&&navigator.scheduling!==void 0&&navigator.scheduling.isInputPending!==void 0&&navigator.scheduling.isInputPending.bind(navigator.scheduling);function b(O){for(var U=s(d);U!==null;){if(U.callback===null)n(d);else if(U.startTime<=O)n(d),U.sortIndex=U.expirationTime,e(c,U);else break;U=s(d)}}function N(O){if(v=!1,b(O),!p)if(s(c)!==null)p=!0,H(_);else{var U=s(d);U!==null&&Q(N,U.startTime-O)}}function _(O,U){p=!1,v&&(v=!1,x(j),j=-1),m=!0;var q=f;try{for(b(U),h=s(c);h!==null&&(!(h.expirationTime>U)||O&&!M());){var X=h.callback;if(typeof X=="function"){h.callback=null,f=h.priorityLevel;var A=X(h.expirationTime<=U);U=t.unstable_now(),typeof A=="function"?h.callback=A:h===s(c)&&n(c),b(U)}else n(c);h=s(c)}if(h!==null)var F=!0;else{var T=s(d);T!==null&&Q(N,T.startTime-U),F=!1}return F}finally{h=null,f=q,m=!1}}var k=!1,S=null,j=-1,C=5,E=-1;function M(){return!(t.unstable_now()-E<C)}function P(){if(S!==null){var O=t.unstable_now();E=O;var U=!0;try{U=S(!0,O)}finally{U?R():(k=!1,S=null)}}else k=!1}var R;if(typeof y=="function")R=function(){y(P)};else if(typeof MessageChannel<"u"){var Y=new MessageChannel,B=Y.port2;Y.port1.onmessage=P,R=function(){B.postMessage(null)}}else R=function(){g(P,0)};function H(O){S=O,k||(k=!0,R())}function Q(O,U){j=g(function(){O(t.unstable_now())},U)}t.unstable_IdlePriority=5,t.unstable_ImmediatePriority=1,t.unstable_LowPriority=4,t.unstable_NormalPriority=3,t.unstable_Profiling=null,t.unstable_UserBlockingPriority=2,t.unstable_cancelCallback=function(O){O.callback=null},t.unstable_continueExecution=function(){p||m||(p=!0,H(_))},t.unstable_forceFrameRate=function(O){0>O||125<O?console.error("forceFrameRate takes a positive int between 0 and 125, forcing frame rates higher than 125 fps is not supported"):C=0<O?Math.floor(1e3/O):5},t.unstable_getCurrentPriorityLevel=function(){return f},t.unstable_getFirstCallbackNode=function(){return s(c)},t.unstable_next=function(O){switch(f){case 1:case 2:case 3:var U=3;break;default:U=f}var q=f;f=U;try{return O()}finally{f=q}},t.unstable_pauseExecution=function(){},t.unstable_requestPaint=function(){},t.unstable_runWithPriority=function(O,U){switch(O){case 1:case 2:case 3:case 4:case 5:break;default:O=3}var q=f;f=O;try{return U()}finally{f=q}},t.unstable_scheduleCallback=function(O,U,q){var X=t.unstable_now();switch(typeof q=="object"&&q!==null?(q=q.delay,q=typeof q=="number"&&0<q?X+q:X):q=X,O){case 1:var A=-1;break;case 2:A=250;break;case 5:A=1073741823;break;case 4:A=1e4;break;default:A=5e3}return A=q+A,O={id:u++,callback:U,priorityLevel:O,startTime:q,expirationTime:A,sortIndex:-1},q>X?(O.sortIndex=q,e(d,O),s(c)===null&&O===s(d)&&(v?(x(j),j=-1):v=!0,Q(N,q-X))):(O.sortIndex=A,e(c,O),p||m||(p=!0,H(_))),O},t.unstable_shouldYield=M,t.unstable_wrapCallback=function(O){var U=f;return function(){var q=f;f=U;try{return O.apply(this,arguments)}finally{f=q}}}})(Cg);Sg.exports=Cg;var Vv=Sg.exports;/**
 * @license React
 * react-dom.production.min.js
 *
 * Copyright (c) Facebook, Inc. and its affiliates.
 *
 * This source code is licensed under the MIT license found in the
 * LICENSE file in the root directory of this source tree.
 */var Wv=w,Ft=Vv;function I(t){for(var e="https://reactjs.org/docs/error-decoder.html?invariant="+t,s=1;s<arguments.length;s++)e+="&args[]="+encodeURIComponent(arguments[s]);return"Minified React error #"+t+"; visit "+e+" for the full message or use the non-minified dev environment for full errors and additional helpful warnings."}var Eg=new Set,Ki={};function rr(t,e){Rr(t,e),Rr(t+"Capture",e)}function Rr(t,e){for(Ki[t]=e,t=0;t<e.length;t++)Eg.add(e[t])}var Us=!(typeof window>"u"||typeof window.document>"u"||typeof window.document.createElement>"u"),cd=Object.prototype.hasOwnProperty,qv=/^[:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD][:A-Z_a-z\u00C0-\u00D6\u00D8-\u00F6\u00F8-\u02FF\u0370-\u037D\u037F-\u1FFF\u200C-\u200D\u2070-\u218F\u2C00-\u2FEF\u3001-\uD7FF\uF900-\uFDCF\uFDF0-\uFFFD\-.0-9\u00B7\u0300-\u036F\u203F-\u2040]*$/,af={},of={};function Kv(t){return cd.call(of,t)?!0:cd.call(af,t)?!1:qv.test(t)?of[t]=!0:(af[t]=!0,!1)}function Gv(t,e,s,n){if(s!==null&&s.type===0)return!1;switch(typeof e){case"function":case"symbol":return!0;case"boolean":return n?!1:s!==null?!s.acceptsBooleans:(t=t.toLowerCase().slice(0,5),t!=="data-"&&t!=="aria-");default:return!1}}function Yv(t,e,s,n){if(e===null||typeof e>"u"||Gv(t,e,s,n))return!0;if(n)return!1;if(s!==null)switch(s.type){case 3:return!e;case 4:return e===!1;case 5:return isNaN(e);case 6:return isNaN(e)||1>e}return!1}function mt(t,e,s,n,r,i,o){this.acceptsBooleans=e===2||e===3||e===4,this.attributeName=n,this.attributeNamespace=r,this.mustUseProperty=s,this.propertyName=t,this.type=e,this.sanitizeURL=i,this.removeEmptyString=o}var st={};"children dangerouslySetInnerHTML defaultValue defaultChecked innerHTML suppressContentEditableWarning suppressHydrationWarning style".split(" ").forEach(function(t){st[t]=new mt(t,0,!1,t,null,!1,!1)});[["acceptCharset","accept-charset"],["className","class"],["htmlFor","for"],["httpEquiv","http-equiv"]].forEach(function(t){var e=t[0];st[e]=new mt(e,1,!1,t[1],null,!1,!1)});["contentEditable","draggable","spellCheck","value"].forEach(function(t){st[t]=new mt(t,2,!1,t.toLowerCase(),null,!1,!1)});["autoReverse","externalResourcesRequired","focusable","preserveAlpha"].forEach(function(t){st[t]=new mt(t,2,!1,t,null,!1,!1)});"allowFullScreen async autoFocus autoPlay controls default defer disabled disablePictureInPicture disableRemotePlayback formNoValidate hidden loop noModule noValidate open playsInline readOnly required reversed scoped seamless itemScope".split(" ").forEach(function(t){st[t]=new mt(t,3,!1,t.toLowerCase(),null,!1,!1)});["checked","multiple","muted","selected"].forEach(function(t){st[t]=new mt(t,3,!0,t,null,!1,!1)});["capture","download"].forEach(function(t){st[t]=new mt(t,4,!1,t,null,!1,!1)});["cols","rows","size","span"].forEach(function(t){st[t]=new mt(t,6,!1,t,null,!1,!1)});["rowSpan","start"].forEach(function(t){st[t]=new mt(t,5,!1,t.toLowerCase(),null,!1,!1)});var Au=/[\-:]([a-z])/g;function Lu(t){return t[1].toUpperCase()}"accent-height alignment-baseline arabic-form baseline-shift cap-height clip-path clip-rule color-interpolation color-interpolation-filters color-profile color-rendering dominant-baseline enable-background fill-opacity fill-rule flood-color flood-opacity font-family font-size font-size-adjust font-stretch font-style font-variant font-weight glyph-name glyph-orientation-horizontal glyph-orientation-vertical horiz-adv-x horiz-origin-x image-rendering letter-spacing lighting-color marker-end marker-mid marker-start overline-position overline-thickness paint-order panose-1 pointer-events rendering-intent shape-rendering stop-color stop-opacity strikethrough-position strikethrough-thickness stroke-dasharray stroke-dashoffset stroke-linecap stroke-linejoin stroke-miterlimit stroke-opacity stroke-width text-anchor text-decoration text-rendering underline-position underline-thickness unicode-bidi unicode-range units-per-em v-alphabetic v-hanging v-ideographic v-mathematical vector-effect vert-adv-y vert-origin-x vert-origin-y word-spacing writing-mode xmlns:xlink x-height".split(" ").forEach(function(t){var e=t.replace(Au,Lu);st[e]=new mt(e,1,!1,t,null,!1,!1)});"xlink:actuate xlink:arcrole xlink:role xlink:show xlink:title xlink:type".split(" ").forEach(function(t){var e=t.replace(Au,Lu);st[e]=new mt(e,1,!1,t,"http://www.w3.org/1999/xlink",!1,!1)});["xml:base","xml:lang","xml:space"].forEach(function(t){var e=t.replace(Au,Lu);st[e]=new mt(e,1,!1,t,"http://www.w3.org/XML/1998/namespace",!1,!1)});["tabIndex","crossOrigin"].forEach(function(t){st[t]=new mt(t,1,!1,t.toLowerCase(),null,!1,!1)});st.xlinkHref=new mt("xlinkHref",1,!1,"xlink:href","http://www.w3.org/1999/xlink",!0,!1);["src","href","action","formAction"].forEach(function(t){st[t]=new mt(t,1,!1,t.toLowerCase(),null,!0,!0)});function Tu(t,e,s,n){var r=st.hasOwnProperty(e)?st[e]:null;(r!==null?r.type!==0:n||!(2<e.length)||e[0]!=="o"&&e[0]!=="O"||e[1]!=="n"&&e[1]!=="N")&&(Yv(e,s,r,n)&&(s=null),n||r===null?Kv(e)&&(s===null?t.removeAttribute(e):t.setAttribute(e,""+s)):r.mustUseProperty?t[r.propertyName]=s===null?r.type===3?!1:"":s:(e=r.attributeName,n=r.attributeNamespace,s===null?t.removeAttribute(e):(r=r.type,s=r===3||r===4&&s===!0?"":""+s,n?t.setAttributeNS(n,e,s):t.setAttribute(e,s))))}var qs=Wv.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED,Ma=Symbol.for("react.element"),gr=Symbol.for("react.portal"),xr=Symbol.for("react.fragment"),Mu=Symbol.for("react.strict_mode"),dd=Symbol.for("react.profiler"),Pg=Symbol.for("react.provider"),Ag=Symbol.for("react.context"),Du=Symbol.for("react.forward_ref"),ud=Symbol.for("react.suspense"),hd=Symbol.for("react.suspense_list"),Ou=Symbol.for("react.memo"),Js=Symbol.for("react.lazy"),Lg=Symbol.for("react.offscreen"),lf=Symbol.iterator;function ri(t){return t===null||typeof t!="object"?null:(t=lf&&t[lf]||t["@@iterator"],typeof t=="function"?t:null)}var De=Object.assign,fc;function wi(t){if(fc===void 0)try{throw Error()}catch(s){var e=s.stack.trim().match(/\n( *(at )?)/);fc=e&&e[1]||""}return`
`+fc+t}var mc=!1;function pc(t,e){if(!t||mc)return"";mc=!0;var s=Error.prepareStackTrace;Error.prepareStackTrace=void 0;try{if(e)if(e=function(){throw Error()},Object.defineProperty(e.prototype,"props",{set:function(){throw Error()}}),typeof Reflect=="object"&&Reflect.construct){try{Reflect.construct(e,[])}catch(d){var n=d}Reflect.construct(t,[],e)}else{try{e.call()}catch(d){n=d}t.call(e.prototype)}else{try{throw Error()}catch(d){n=d}t()}}catch(d){if(d&&n&&typeof d.stack=="string"){for(var r=d.stack.split(`
`),i=n.stack.split(`
`),o=r.length-1,l=i.length-1;1<=o&&0<=l&&r[o]!==i[l];)l--;for(;1<=o&&0<=l;o--,l--)if(r[o]!==i[l]){if(o!==1||l!==1)do if(o--,l--,0>l||r[o]!==i[l]){var c=`
`+r[o].replace(" at new "," at ");return t.displayName&&c.includes("<anonymous>")&&(c=c.replace("<anonymous>",t.displayName)),c}while(1<=o&&0<=l);break}}}finally{mc=!1,Error.prepareStackTrace=s}return(t=t?t.displayName||t.name:"")?wi(t):""}function Jv(t){switch(t.tag){case 5:return wi(t.type);case 16:return wi("Lazy");case 13:return wi("Suspense");case 19:return wi("SuspenseList");case 0:case 2:case 15:return t=pc(t.type,!1),t;case 11:return t=pc(t.type.render,!1),t;case 1:return t=pc(t.type,!0),t;default:return""}}function fd(t){if(t==null)return null;if(typeof t=="function")return t.displayName||t.name||null;if(typeof t=="string")return t;switch(t){case xr:return"Fragment";case gr:return"Portal";case dd:return"Profiler";case Mu:return"StrictMode";case ud:return"Suspense";case hd:return"SuspenseList"}if(typeof t=="object")switch(t.$$typeof){case Ag:return(t.displayName||"Context")+".Consumer";case Pg:return(t._context.displayName||"Context")+".Provider";case Du:var e=t.render;return t=t.displayName,t||(t=e.displayName||e.name||"",t=t!==""?"ForwardRef("+t+")":"ForwardRef"),t;case Ou:return e=t.displayName||null,e!==null?e:fd(t.type)||"Memo";case Js:e=t._payload,t=t._init;try{return fd(t(e))}catch{}}return null}function Qv(t){var e=t.type;switch(t.tag){case 24:return"Cache";case 9:return(e.displayName||"Context")+".Consumer";case 10:return(e._context.displayName||"Context")+".Provider";case 18:return"DehydratedFragment";case 11:return t=e.render,t=t.displayName||t.name||"",e.displayName||(t!==""?"ForwardRef("+t+")":"ForwardRef");case 7:return"Fragment";case 5:return e;case 4:return"Portal";case 3:return"Root";case 6:return"Text";case 16:return fd(e);case 8:return e===Mu?"StrictMode":"Mode";case 22:return"Offscreen";case 12:return"Profiler";case 21:return"Scope";case 13:return"Suspense";case 19:return"SuspenseList";case 25:return"TracingMarker";case 1:case 0:case 17:case 2:case 14:case 15:if(typeof e=="function")return e.displayName||e.name||null;if(typeof e=="string")return e}return null}function bn(t){switch(typeof t){case"boolean":case"number":case"string":case"undefined":return t;case"object":return t;default:return""}}function Tg(t){var e=t.type;return(t=t.nodeName)&&t.toLowerCase()==="input"&&(e==="checkbox"||e==="radio")}function Xv(t){var e=Tg(t)?"checked":"value",s=Object.getOwnPropertyDescriptor(t.constructor.prototype,e),n=""+t[e];if(!t.hasOwnProperty(e)&&typeof s<"u"&&typeof s.get=="function"&&typeof s.set=="function"){var r=s.get,i=s.set;return Object.defineProperty(t,e,{configurable:!0,get:function(){return r.call(this)},set:function(o){n=""+o,i.call(this,o)}}),Object.defineProperty(t,e,{enumerable:s.enumerable}),{getValue:function(){return n},setValue:function(o){n=""+o},stopTracking:function(){t._valueTracker=null,delete t[e]}}}}function Da(t){t._valueTracker||(t._valueTracker=Xv(t))}function Mg(t){if(!t)return!1;var e=t._valueTracker;if(!e)return!0;var s=e.getValue(),n="";return t&&(n=Tg(t)?t.checked?"true":"false":t.value),t=n,t!==s?(e.setValue(t),!0):!1}function Ho(t){if(t=t||(typeof document<"u"?document:void 0),typeof t>"u")return null;try{return t.activeElement||t.body}catch{return t.body}}function md(t,e){var s=e.checked;return De({},e,{defaultChecked:void 0,defaultValue:void 0,value:void 0,checked:s??t._wrapperState.initialChecked})}function cf(t,e){var s=e.defaultValue==null?"":e.defaultValue,n=e.checked!=null?e.checked:e.defaultChecked;s=bn(e.value!=null?e.value:s),t._wrapperState={initialChecked:n,initialValue:s,controlled:e.type==="checkbox"||e.type==="radio"?e.checked!=null:e.value!=null}}function Dg(t,e){e=e.checked,e!=null&&Tu(t,"checked",e,!1)}function pd(t,e){Dg(t,e);var s=bn(e.value),n=e.type;if(s!=null)n==="number"?(s===0&&t.value===""||t.value!=s)&&(t.value=""+s):t.value!==""+s&&(t.value=""+s);else if(n==="submit"||n==="reset"){t.removeAttribute("value");return}e.hasOwnProperty("value")?gd(t,e.type,s):e.hasOwnProperty("defaultValue")&&gd(t,e.type,bn(e.defaultValue)),e.checked==null&&e.defaultChecked!=null&&(t.defaultChecked=!!e.defaultChecked)}function df(t,e,s){if(e.hasOwnProperty("value")||e.hasOwnProperty("defaultValue")){var n=e.type;if(!(n!=="submit"&&n!=="reset"||e.value!==void 0&&e.value!==null))return;e=""+t._wrapperState.initialValue,s||e===t.value||(t.value=e),t.defaultValue=e}s=t.name,s!==""&&(t.name=""),t.defaultChecked=!!t._wrapperState.initialChecked,s!==""&&(t.name=s)}function gd(t,e,s){(e!=="number"||Ho(t.ownerDocument)!==t)&&(s==null?t.defaultValue=""+t._wrapperState.initialValue:t.defaultValue!==""+s&&(t.defaultValue=""+s))}var _i=Array.isArray;function Er(t,e,s,n){if(t=t.options,e){e={};for(var r=0;r<s.length;r++)e["$"+s[r]]=!0;for(s=0;s<t.length;s++)r=e.hasOwnProperty("$"+t[s].value),t[s].selected!==r&&(t[s].selected=r),r&&n&&(t[s].defaultSelected=!0)}else{for(s=""+bn(s),e=null,r=0;r<t.length;r++){if(t[r].value===s){t[r].selected=!0,n&&(t[r].defaultSelected=!0);return}e!==null||t[r].disabled||(e=t[r])}e!==null&&(e.selected=!0)}}function xd(t,e){if(e.dangerouslySetInnerHTML!=null)throw Error(I(91));return De({},e,{value:void 0,defaultValue:void 0,children:""+t._wrapperState.initialValue})}function uf(t,e){var s=e.value;if(s==null){if(s=e.children,e=e.defaultValue,s!=null){if(e!=null)throw Error(I(92));if(_i(s)){if(1<s.length)throw Error(I(93));s=s[0]}e=s}e==null&&(e=""),s=e}t._wrapperState={initialValue:bn(s)}}function Og(t,e){var s=bn(e.value),n=bn(e.defaultValue);s!=null&&(s=""+s,s!==t.value&&(t.value=s),e.defaultValue==null&&t.defaultValue!==s&&(t.defaultValue=s)),n!=null&&(t.defaultValue=""+n)}function hf(t){var e=t.textContent;e===t._wrapperState.initialValue&&e!==""&&e!==null&&(t.value=e)}function Rg(t){switch(t){case"svg":return"http://www.w3.org/2000/svg";case"math":return"http://www.w3.org/1998/Math/MathML";default:return"http://www.w3.org/1999/xhtml"}}function yd(t,e){return t==null||t==="http://www.w3.org/1999/xhtml"?Rg(e):t==="http://www.w3.org/2000/svg"&&e==="foreignObject"?"http://www.w3.org/1999/xhtml":t}var Oa,Ig=function(t){return typeof MSApp<"u"&&MSApp.execUnsafeLocalFunction?function(e,s,n,r){MSApp.execUnsafeLocalFunction(function(){return t(e,s,n,r)})}:t}(function(t,e){if(t.namespaceURI!=="http://www.w3.org/2000/svg"||"innerHTML"in t)t.innerHTML=e;else{for(Oa=Oa||document.createElement("div"),Oa.innerHTML="<svg>"+e.valueOf().toString()+"</svg>",e=Oa.firstChild;t.firstChild;)t.removeChild(t.firstChild);for(;e.firstChild;)t.appendChild(e.firstChild)}});function Gi(t,e){if(e){var s=t.firstChild;if(s&&s===t.lastChild&&s.nodeType===3){s.nodeValue=e;return}}t.textContent=e}var Pi={animationIterationCount:!0,aspectRatio:!0,borderImageOutset:!0,borderImageSlice:!0,borderImageWidth:!0,boxFlex:!0,boxFlexGroup:!0,boxOrdinalGroup:!0,columnCount:!0,columns:!0,flex:!0,flexGrow:!0,flexPositive:!0,flexShrink:!0,flexNegative:!0,flexOrder:!0,gridArea:!0,gridRow:!0,gridRowEnd:!0,gridRowSpan:!0,gridRowStart:!0,gridColumn:!0,gridColumnEnd:!0,gridColumnSpan:!0,gridColumnStart:!0,fontWeight:!0,lineClamp:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,tabSize:!0,widows:!0,zIndex:!0,zoom:!0,fillOpacity:!0,floodOpacity:!0,stopOpacity:!0,strokeDasharray:!0,strokeDashoffset:!0,strokeMiterlimit:!0,strokeOpacity:!0,strokeWidth:!0},Zv=["Webkit","ms","Moz","O"];Object.keys(Pi).forEach(function(t){Zv.forEach(function(e){e=e+t.charAt(0).toUpperCase()+t.substring(1),Pi[e]=Pi[t]})});function Fg(t,e,s){return e==null||typeof e=="boolean"||e===""?"":s||typeof e!="number"||e===0||Pi.hasOwnProperty(t)&&Pi[t]?(""+e).trim():e+"px"}function $g(t,e){t=t.style;for(var s in e)if(e.hasOwnProperty(s)){var n=s.indexOf("--")===0,r=Fg(s,e[s],n);s==="float"&&(s="cssFloat"),n?t.setProperty(s,r):t[s]=r}}var eb=De({menuitem:!0},{area:!0,base:!0,br:!0,col:!0,embed:!0,hr:!0,img:!0,input:!0,keygen:!0,link:!0,meta:!0,param:!0,source:!0,track:!0,wbr:!0});function vd(t,e){if(e){if(eb[t]&&(e.children!=null||e.dangerouslySetInnerHTML!=null))throw Error(I(137,t));if(e.dangerouslySetInnerHTML!=null){if(e.children!=null)throw Error(I(60));if(typeof e.dangerouslySetInnerHTML!="object"||!("__html"in e.dangerouslySetInnerHTML))throw Error(I(61))}if(e.style!=null&&typeof e.style!="object")throw Error(I(62))}}function bd(t,e){if(t.indexOf("-")===-1)return typeof e.is=="string";switch(t){case"annotation-xml":case"color-profile":case"font-face":case"font-face-src":case"font-face-uri":case"font-face-format":case"font-face-name":case"missing-glyph":return!1;default:return!0}}var wd=null;function Ru(t){return t=t.target||t.srcElement||window,t.correspondingUseElement&&(t=t.correspondingUseElement),t.nodeType===3?t.parentNode:t}var _d=null,Pr=null,Ar=null;function ff(t){if(t=Na(t)){if(typeof _d!="function")throw Error(I(280));var e=t.stateNode;e&&(e=Ll(e),_d(t.stateNode,t.type,e))}}function zg(t){Pr?Ar?Ar.push(t):Ar=[t]:Pr=t}function Ug(){if(Pr){var t=Pr,e=Ar;if(Ar=Pr=null,ff(t),e)for(t=0;t<e.length;t++)ff(e[t])}}function Bg(t,e){return t(e)}function Hg(){}var gc=!1;function Vg(t,e,s){if(gc)return t(e,s);gc=!0;try{return Bg(t,e,s)}finally{gc=!1,(Pr!==null||Ar!==null)&&(Hg(),Ug())}}function Yi(t,e){var s=t.stateNode;if(s===null)return null;var n=Ll(s);if(n===null)return null;s=n[e];e:switch(e){case"onClick":case"onClickCapture":case"onDoubleClick":case"onDoubleClickCapture":case"onMouseDown":case"onMouseDownCapture":case"onMouseMove":case"onMouseMoveCapture":case"onMouseUp":case"onMouseUpCapture":case"onMouseEnter":(n=!n.disabled)||(t=t.type,n=!(t==="button"||t==="input"||t==="select"||t==="textarea")),t=!n;break e;default:t=!1}if(t)return null;if(s&&typeof s!="function")throw Error(I(231,e,typeof s));return s}var jd=!1;if(Us)try{var ii={};Object.defineProperty(ii,"passive",{get:function(){jd=!0}}),window.addEventListener("test",ii,ii),window.removeEventListener("test",ii,ii)}catch{jd=!1}function tb(t,e,s,n,r,i,o,l,c){var d=Array.prototype.slice.call(arguments,3);try{e.apply(s,d)}catch(u){this.onError(u)}}var Ai=!1,Vo=null,Wo=!1,Nd=null,sb={onError:function(t){Ai=!0,Vo=t}};function nb(t,e,s,n,r,i,o,l,c){Ai=!1,Vo=null,tb.apply(sb,arguments)}function rb(t,e,s,n,r,i,o,l,c){if(nb.apply(this,arguments),Ai){if(Ai){var d=Vo;Ai=!1,Vo=null}else throw Error(I(198));Wo||(Wo=!0,Nd=d)}}function ir(t){var e=t,s=t;if(t.alternate)for(;e.return;)e=e.return;else{t=e;do e=t,e.flags&4098&&(s=e.return),t=e.return;while(t)}return e.tag===3?s:null}function Wg(t){if(t.tag===13){var e=t.memoizedState;if(e===null&&(t=t.alternate,t!==null&&(e=t.memoizedState)),e!==null)return e.dehydrated}return null}function mf(t){if(ir(t)!==t)throw Error(I(188))}function ib(t){var e=t.alternate;if(!e){if(e=ir(t),e===null)throw Error(I(188));return e!==t?null:t}for(var s=t,n=e;;){var r=s.return;if(r===null)break;var i=r.alternate;if(i===null){if(n=r.return,n!==null){s=n;continue}break}if(r.child===i.child){for(i=r.child;i;){if(i===s)return mf(r),t;if(i===n)return mf(r),e;i=i.sibling}throw Error(I(188))}if(s.return!==n.return)s=r,n=i;else{for(var o=!1,l=r.child;l;){if(l===s){o=!0,s=r,n=i;break}if(l===n){o=!0,n=r,s=i;break}l=l.sibling}if(!o){for(l=i.child;l;){if(l===s){o=!0,s=i,n=r;break}if(l===n){o=!0,n=i,s=r;break}l=l.sibling}if(!o)throw Error(I(189))}}if(s.alternate!==n)throw Error(I(190))}if(s.tag!==3)throw Error(I(188));return s.stateNode.current===s?t:e}function qg(t){return t=ib(t),t!==null?Kg(t):null}function Kg(t){if(t.tag===5||t.tag===6)return t;for(t=t.child;t!==null;){var e=Kg(t);if(e!==null)return e;t=t.sibling}return null}var Gg=Ft.unstable_scheduleCallback,pf=Ft.unstable_cancelCallback,ab=Ft.unstable_shouldYield,ob=Ft.unstable_requestPaint,ze=Ft.unstable_now,lb=Ft.unstable_getCurrentPriorityLevel,Iu=Ft.unstable_ImmediatePriority,Yg=Ft.unstable_UserBlockingPriority,qo=Ft.unstable_NormalPriority,cb=Ft.unstable_LowPriority,Jg=Ft.unstable_IdlePriority,Cl=null,xs=null;function db(t){if(xs&&typeof xs.onCommitFiberRoot=="function")try{xs.onCommitFiberRoot(Cl,t,void 0,(t.current.flags&128)===128)}catch{}}var ns=Math.clz32?Math.clz32:fb,ub=Math.log,hb=Math.LN2;function fb(t){return t>>>=0,t===0?32:31-(ub(t)/hb|0)|0}var Ra=64,Ia=4194304;function ji(t){switch(t&-t){case 1:return 1;case 2:return 2;case 4:return 4;case 8:return 8;case 16:return 16;case 32:return 32;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return t&4194240;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return t&130023424;case 134217728:return 134217728;case 268435456:return 268435456;case 536870912:return 536870912;case 1073741824:return 1073741824;default:return t}}function Ko(t,e){var s=t.pendingLanes;if(s===0)return 0;var n=0,r=t.suspendedLanes,i=t.pingedLanes,o=s&268435455;if(o!==0){var l=o&~r;l!==0?n=ji(l):(i&=o,i!==0&&(n=ji(i)))}else o=s&~r,o!==0?n=ji(o):i!==0&&(n=ji(i));if(n===0)return 0;if(e!==0&&e!==n&&!(e&r)&&(r=n&-n,i=e&-e,r>=i||r===16&&(i&4194240)!==0))return e;if(n&4&&(n|=s&16),e=t.entangledLanes,e!==0)for(t=t.entanglements,e&=n;0<e;)s=31-ns(e),r=1<<s,n|=t[s],e&=~r;return n}function mb(t,e){switch(t){case 1:case 2:case 4:return e+250;case 8:case 16:case 32:case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:return e+5e3;case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:return-1;case 134217728:case 268435456:case 536870912:case 1073741824:return-1;default:return-1}}function pb(t,e){for(var s=t.suspendedLanes,n=t.pingedLanes,r=t.expirationTimes,i=t.pendingLanes;0<i;){var o=31-ns(i),l=1<<o,c=r[o];c===-1?(!(l&s)||l&n)&&(r[o]=mb(l,e)):c<=e&&(t.expiredLanes|=l),i&=~l}}function kd(t){return t=t.pendingLanes&-1073741825,t!==0?t:t&1073741824?1073741824:0}function Qg(){var t=Ra;return Ra<<=1,!(Ra&4194240)&&(Ra=64),t}function xc(t){for(var e=[],s=0;31>s;s++)e.push(t);return e}function _a(t,e,s){t.pendingLanes|=e,e!==536870912&&(t.suspendedLanes=0,t.pingedLanes=0),t=t.eventTimes,e=31-ns(e),t[e]=s}function gb(t,e){var s=t.pendingLanes&~e;t.pendingLanes=e,t.suspendedLanes=0,t.pingedLanes=0,t.expiredLanes&=e,t.mutableReadLanes&=e,t.entangledLanes&=e,e=t.entanglements;var n=t.eventTimes;for(t=t.expirationTimes;0<s;){var r=31-ns(s),i=1<<r;e[r]=0,n[r]=-1,t[r]=-1,s&=~i}}function Fu(t,e){var s=t.entangledLanes|=e;for(t=t.entanglements;s;){var n=31-ns(s),r=1<<n;r&e|t[n]&e&&(t[n]|=e),s&=~r}}var ve=0;function Xg(t){return t&=-t,1<t?4<t?t&268435455?16:536870912:4:1}var Zg,$u,e0,t0,s0,Sd=!1,Fa=[],un=null,hn=null,fn=null,Ji=new Map,Qi=new Map,Zs=[],xb="mousedown mouseup touchcancel touchend touchstart auxclick dblclick pointercancel pointerdown pointerup dragend dragstart drop compositionend compositionstart keydown keypress keyup input textInput copy cut paste click change contextmenu reset submit".split(" ");function gf(t,e){switch(t){case"focusin":case"focusout":un=null;break;case"dragenter":case"dragleave":hn=null;break;case"mouseover":case"mouseout":fn=null;break;case"pointerover":case"pointerout":Ji.delete(e.pointerId);break;case"gotpointercapture":case"lostpointercapture":Qi.delete(e.pointerId)}}function ai(t,e,s,n,r,i){return t===null||t.nativeEvent!==i?(t={blockedOn:e,domEventName:s,eventSystemFlags:n,nativeEvent:i,targetContainers:[r]},e!==null&&(e=Na(e),e!==null&&$u(e)),t):(t.eventSystemFlags|=n,e=t.targetContainers,r!==null&&e.indexOf(r)===-1&&e.push(r),t)}function yb(t,e,s,n,r){switch(e){case"focusin":return un=ai(un,t,e,s,n,r),!0;case"dragenter":return hn=ai(hn,t,e,s,n,r),!0;case"mouseover":return fn=ai(fn,t,e,s,n,r),!0;case"pointerover":var i=r.pointerId;return Ji.set(i,ai(Ji.get(i)||null,t,e,s,n,r)),!0;case"gotpointercapture":return i=r.pointerId,Qi.set(i,ai(Qi.get(i)||null,t,e,s,n,r)),!0}return!1}function n0(t){var e=zn(t.target);if(e!==null){var s=ir(e);if(s!==null){if(e=s.tag,e===13){if(e=Wg(s),e!==null){t.blockedOn=e,s0(t.priority,function(){e0(s)});return}}else if(e===3&&s.stateNode.current.memoizedState.isDehydrated){t.blockedOn=s.tag===3?s.stateNode.containerInfo:null;return}}}t.blockedOn=null}function jo(t){if(t.blockedOn!==null)return!1;for(var e=t.targetContainers;0<e.length;){var s=Cd(t.domEventName,t.eventSystemFlags,e[0],t.nativeEvent);if(s===null){s=t.nativeEvent;var n=new s.constructor(s.type,s);wd=n,s.target.dispatchEvent(n),wd=null}else return e=Na(s),e!==null&&$u(e),t.blockedOn=s,!1;e.shift()}return!0}function xf(t,e,s){jo(t)&&s.delete(e)}function vb(){Sd=!1,un!==null&&jo(un)&&(un=null),hn!==null&&jo(hn)&&(hn=null),fn!==null&&jo(fn)&&(fn=null),Ji.forEach(xf),Qi.forEach(xf)}function oi(t,e){t.blockedOn===e&&(t.blockedOn=null,Sd||(Sd=!0,Ft.unstable_scheduleCallback(Ft.unstable_NormalPriority,vb)))}function Xi(t){function e(r){return oi(r,t)}if(0<Fa.length){oi(Fa[0],t);for(var s=1;s<Fa.length;s++){var n=Fa[s];n.blockedOn===t&&(n.blockedOn=null)}}for(un!==null&&oi(un,t),hn!==null&&oi(hn,t),fn!==null&&oi(fn,t),Ji.forEach(e),Qi.forEach(e),s=0;s<Zs.length;s++)n=Zs[s],n.blockedOn===t&&(n.blockedOn=null);for(;0<Zs.length&&(s=Zs[0],s.blockedOn===null);)n0(s),s.blockedOn===null&&Zs.shift()}var Lr=qs.ReactCurrentBatchConfig,Go=!0;function bb(t,e,s,n){var r=ve,i=Lr.transition;Lr.transition=null;try{ve=1,zu(t,e,s,n)}finally{ve=r,Lr.transition=i}}function wb(t,e,s,n){var r=ve,i=Lr.transition;Lr.transition=null;try{ve=4,zu(t,e,s,n)}finally{ve=r,Lr.transition=i}}function zu(t,e,s,n){if(Go){var r=Cd(t,e,s,n);if(r===null)Cc(t,e,n,Yo,s),gf(t,n);else if(yb(r,t,e,s,n))n.stopPropagation();else if(gf(t,n),e&4&&-1<xb.indexOf(t)){for(;r!==null;){var i=Na(r);if(i!==null&&Zg(i),i=Cd(t,e,s,n),i===null&&Cc(t,e,n,Yo,s),i===r)break;r=i}r!==null&&n.stopPropagation()}else Cc(t,e,n,null,s)}}var Yo=null;function Cd(t,e,s,n){if(Yo=null,t=Ru(n),t=zn(t),t!==null)if(e=ir(t),e===null)t=null;else if(s=e.tag,s===13){if(t=Wg(e),t!==null)return t;t=null}else if(s===3){if(e.stateNode.current.memoizedState.isDehydrated)return e.tag===3?e.stateNode.containerInfo:null;t=null}else e!==t&&(t=null);return Yo=t,null}function r0(t){switch(t){case"cancel":case"click":case"close":case"contextmenu":case"copy":case"cut":case"auxclick":case"dblclick":case"dragend":case"dragstart":case"drop":case"focusin":case"focusout":case"input":case"invalid":case"keydown":case"keypress":case"keyup":case"mousedown":case"mouseup":case"paste":case"pause":case"play":case"pointercancel":case"pointerdown":case"pointerup":case"ratechange":case"reset":case"resize":case"seeked":case"submit":case"touchcancel":case"touchend":case"touchstart":case"volumechange":case"change":case"selectionchange":case"textInput":case"compositionstart":case"compositionend":case"compositionupdate":case"beforeblur":case"afterblur":case"beforeinput":case"blur":case"fullscreenchange":case"focus":case"hashchange":case"popstate":case"select":case"selectstart":return 1;case"drag":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"mousemove":case"mouseout":case"mouseover":case"pointermove":case"pointerout":case"pointerover":case"scroll":case"toggle":case"touchmove":case"wheel":case"mouseenter":case"mouseleave":case"pointerenter":case"pointerleave":return 4;case"message":switch(lb()){case Iu:return 1;case Yg:return 4;case qo:case cb:return 16;case Jg:return 536870912;default:return 16}default:return 16}}var sn=null,Uu=null,No=null;function i0(){if(No)return No;var t,e=Uu,s=e.length,n,r="value"in sn?sn.value:sn.textContent,i=r.length;for(t=0;t<s&&e[t]===r[t];t++);var o=s-t;for(n=1;n<=o&&e[s-n]===r[i-n];n++);return No=r.slice(t,1<n?1-n:void 0)}function ko(t){var e=t.keyCode;return"charCode"in t?(t=t.charCode,t===0&&e===13&&(t=13)):t=e,t===10&&(t=13),32<=t||t===13?t:0}function $a(){return!0}function yf(){return!1}function zt(t){function e(s,n,r,i,o){this._reactName=s,this._targetInst=r,this.type=n,this.nativeEvent=i,this.target=o,this.currentTarget=null;for(var l in t)t.hasOwnProperty(l)&&(s=t[l],this[l]=s?s(i):i[l]);return this.isDefaultPrevented=(i.defaultPrevented!=null?i.defaultPrevented:i.returnValue===!1)?$a:yf,this.isPropagationStopped=yf,this}return De(e.prototype,{preventDefault:function(){this.defaultPrevented=!0;var s=this.nativeEvent;s&&(s.preventDefault?s.preventDefault():typeof s.returnValue!="unknown"&&(s.returnValue=!1),this.isDefaultPrevented=$a)},stopPropagation:function(){var s=this.nativeEvent;s&&(s.stopPropagation?s.stopPropagation():typeof s.cancelBubble!="unknown"&&(s.cancelBubble=!0),this.isPropagationStopped=$a)},persist:function(){},isPersistent:$a}),e}var Gr={eventPhase:0,bubbles:0,cancelable:0,timeStamp:function(t){return t.timeStamp||Date.now()},defaultPrevented:0,isTrusted:0},Bu=zt(Gr),ja=De({},Gr,{view:0,detail:0}),_b=zt(ja),yc,vc,li,El=De({},ja,{screenX:0,screenY:0,clientX:0,clientY:0,pageX:0,pageY:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,getModifierState:Hu,button:0,buttons:0,relatedTarget:function(t){return t.relatedTarget===void 0?t.fromElement===t.srcElement?t.toElement:t.fromElement:t.relatedTarget},movementX:function(t){return"movementX"in t?t.movementX:(t!==li&&(li&&t.type==="mousemove"?(yc=t.screenX-li.screenX,vc=t.screenY-li.screenY):vc=yc=0,li=t),yc)},movementY:function(t){return"movementY"in t?t.movementY:vc}}),vf=zt(El),jb=De({},El,{dataTransfer:0}),Nb=zt(jb),kb=De({},ja,{relatedTarget:0}),bc=zt(kb),Sb=De({},Gr,{animationName:0,elapsedTime:0,pseudoElement:0}),Cb=zt(Sb),Eb=De({},Gr,{clipboardData:function(t){return"clipboardData"in t?t.clipboardData:window.clipboardData}}),Pb=zt(Eb),Ab=De({},Gr,{data:0}),bf=zt(Ab),Lb={Esc:"Escape",Spacebar:" ",Left:"ArrowLeft",Up:"ArrowUp",Right:"ArrowRight",Down:"ArrowDown",Del:"Delete",Win:"OS",Menu:"ContextMenu",Apps:"ContextMenu",Scroll:"ScrollLock",MozPrintableKey:"Unidentified"},Tb={8:"Backspace",9:"Tab",12:"Clear",13:"Enter",16:"Shift",17:"Control",18:"Alt",19:"Pause",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",45:"Insert",46:"Delete",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"NumLock",145:"ScrollLock",224:"Meta"},Mb={Alt:"altKey",Control:"ctrlKey",Meta:"metaKey",Shift:"shiftKey"};function Db(t){var e=this.nativeEvent;return e.getModifierState?e.getModifierState(t):(t=Mb[t])?!!e[t]:!1}function Hu(){return Db}var Ob=De({},ja,{key:function(t){if(t.key){var e=Lb[t.key]||t.key;if(e!=="Unidentified")return e}return t.type==="keypress"?(t=ko(t),t===13?"Enter":String.fromCharCode(t)):t.type==="keydown"||t.type==="keyup"?Tb[t.keyCode]||"Unidentified":""},code:0,location:0,ctrlKey:0,shiftKey:0,altKey:0,metaKey:0,repeat:0,locale:0,getModifierState:Hu,charCode:function(t){return t.type==="keypress"?ko(t):0},keyCode:function(t){return t.type==="keydown"||t.type==="keyup"?t.keyCode:0},which:function(t){return t.type==="keypress"?ko(t):t.type==="keydown"||t.type==="keyup"?t.keyCode:0}}),Rb=zt(Ob),Ib=De({},El,{pointerId:0,width:0,height:0,pressure:0,tangentialPressure:0,tiltX:0,tiltY:0,twist:0,pointerType:0,isPrimary:0}),wf=zt(Ib),Fb=De({},ja,{touches:0,targetTouches:0,changedTouches:0,altKey:0,metaKey:0,ctrlKey:0,shiftKey:0,getModifierState:Hu}),$b=zt(Fb),zb=De({},Gr,{propertyName:0,elapsedTime:0,pseudoElement:0}),Ub=zt(zb),Bb=De({},El,{deltaX:function(t){return"deltaX"in t?t.deltaX:"wheelDeltaX"in t?-t.wheelDeltaX:0},deltaY:function(t){return"deltaY"in t?t.deltaY:"wheelDeltaY"in t?-t.wheelDeltaY:"wheelDelta"in t?-t.wheelDelta:0},deltaZ:0,deltaMode:0}),Hb=zt(Bb),Vb=[9,13,27,32],Vu=Us&&"CompositionEvent"in window,Li=null;Us&&"documentMode"in document&&(Li=document.documentMode);var Wb=Us&&"TextEvent"in window&&!Li,a0=Us&&(!Vu||Li&&8<Li&&11>=Li),_f=String.fromCharCode(32),jf=!1;function o0(t,e){switch(t){case"keyup":return Vb.indexOf(e.keyCode)!==-1;case"keydown":return e.keyCode!==229;case"keypress":case"mousedown":case"focusout":return!0;default:return!1}}function l0(t){return t=t.detail,typeof t=="object"&&"data"in t?t.data:null}var yr=!1;function qb(t,e){switch(t){case"compositionend":return l0(e);case"keypress":return e.which!==32?null:(jf=!0,_f);case"textInput":return t=e.data,t===_f&&jf?null:t;default:return null}}function Kb(t,e){if(yr)return t==="compositionend"||!Vu&&o0(t,e)?(t=i0(),No=Uu=sn=null,yr=!1,t):null;switch(t){case"paste":return null;case"keypress":if(!(e.ctrlKey||e.altKey||e.metaKey)||e.ctrlKey&&e.altKey){if(e.char&&1<e.char.length)return e.char;if(e.which)return String.fromCharCode(e.which)}return null;case"compositionend":return a0&&e.locale!=="ko"?null:e.data;default:return null}}var Gb={color:!0,date:!0,datetime:!0,"datetime-local":!0,email:!0,month:!0,number:!0,password:!0,range:!0,search:!0,tel:!0,text:!0,time:!0,url:!0,week:!0};function Nf(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e==="input"?!!Gb[t.type]:e==="textarea"}function c0(t,e,s,n){zg(n),e=Jo(e,"onChange"),0<e.length&&(s=new Bu("onChange","change",null,s,n),t.push({event:s,listeners:e}))}var Ti=null,Zi=null;function Yb(t){b0(t,0)}function Pl(t){var e=wr(t);if(Mg(e))return t}function Jb(t,e){if(t==="change")return e}var d0=!1;if(Us){var wc;if(Us){var _c="oninput"in document;if(!_c){var kf=document.createElement("div");kf.setAttribute("oninput","return;"),_c=typeof kf.oninput=="function"}wc=_c}else wc=!1;d0=wc&&(!document.documentMode||9<document.documentMode)}function Sf(){Ti&&(Ti.detachEvent("onpropertychange",u0),Zi=Ti=null)}function u0(t){if(t.propertyName==="value"&&Pl(Zi)){var e=[];c0(e,Zi,t,Ru(t)),Vg(Yb,e)}}function Qb(t,e,s){t==="focusin"?(Sf(),Ti=e,Zi=s,Ti.attachEvent("onpropertychange",u0)):t==="focusout"&&Sf()}function Xb(t){if(t==="selectionchange"||t==="keyup"||t==="keydown")return Pl(Zi)}function Zb(t,e){if(t==="click")return Pl(e)}function ew(t,e){if(t==="input"||t==="change")return Pl(e)}function tw(t,e){return t===e&&(t!==0||1/t===1/e)||t!==t&&e!==e}var is=typeof Object.is=="function"?Object.is:tw;function ea(t,e){if(is(t,e))return!0;if(typeof t!="object"||t===null||typeof e!="object"||e===null)return!1;var s=Object.keys(t),n=Object.keys(e);if(s.length!==n.length)return!1;for(n=0;n<s.length;n++){var r=s[n];if(!cd.call(e,r)||!is(t[r],e[r]))return!1}return!0}function Cf(t){for(;t&&t.firstChild;)t=t.firstChild;return t}function Ef(t,e){var s=Cf(t);t=0;for(var n;s;){if(s.nodeType===3){if(n=t+s.textContent.length,t<=e&&n>=e)return{node:s,offset:e-t};t=n}e:{for(;s;){if(s.nextSibling){s=s.nextSibling;break e}s=s.parentNode}s=void 0}s=Cf(s)}}function h0(t,e){return t&&e?t===e?!0:t&&t.nodeType===3?!1:e&&e.nodeType===3?h0(t,e.parentNode):"contains"in t?t.contains(e):t.compareDocumentPosition?!!(t.compareDocumentPosition(e)&16):!1:!1}function f0(){for(var t=window,e=Ho();e instanceof t.HTMLIFrameElement;){try{var s=typeof e.contentWindow.location.href=="string"}catch{s=!1}if(s)t=e.contentWindow;else break;e=Ho(t.document)}return e}function Wu(t){var e=t&&t.nodeName&&t.nodeName.toLowerCase();return e&&(e==="input"&&(t.type==="text"||t.type==="search"||t.type==="tel"||t.type==="url"||t.type==="password")||e==="textarea"||t.contentEditable==="true")}function sw(t){var e=f0(),s=t.focusedElem,n=t.selectionRange;if(e!==s&&s&&s.ownerDocument&&h0(s.ownerDocument.documentElement,s)){if(n!==null&&Wu(s)){if(e=n.start,t=n.end,t===void 0&&(t=e),"selectionStart"in s)s.selectionStart=e,s.selectionEnd=Math.min(t,s.value.length);else if(t=(e=s.ownerDocument||document)&&e.defaultView||window,t.getSelection){t=t.getSelection();var r=s.textContent.length,i=Math.min(n.start,r);n=n.end===void 0?i:Math.min(n.end,r),!t.extend&&i>n&&(r=n,n=i,i=r),r=Ef(s,i);var o=Ef(s,n);r&&o&&(t.rangeCount!==1||t.anchorNode!==r.node||t.anchorOffset!==r.offset||t.focusNode!==o.node||t.focusOffset!==o.offset)&&(e=e.createRange(),e.setStart(r.node,r.offset),t.removeAllRanges(),i>n?(t.addRange(e),t.extend(o.node,o.offset)):(e.setEnd(o.node,o.offset),t.addRange(e)))}}for(e=[],t=s;t=t.parentNode;)t.nodeType===1&&e.push({element:t,left:t.scrollLeft,top:t.scrollTop});for(typeof s.focus=="function"&&s.focus(),s=0;s<e.length;s++)t=e[s],t.element.scrollLeft=t.left,t.element.scrollTop=t.top}}var nw=Us&&"documentMode"in document&&11>=document.documentMode,vr=null,Ed=null,Mi=null,Pd=!1;function Pf(t,e,s){var n=s.window===s?s.document:s.nodeType===9?s:s.ownerDocument;Pd||vr==null||vr!==Ho(n)||(n=vr,"selectionStart"in n&&Wu(n)?n={start:n.selectionStart,end:n.selectionEnd}:(n=(n.ownerDocument&&n.ownerDocument.defaultView||window).getSelection(),n={anchorNode:n.anchorNode,anchorOffset:n.anchorOffset,focusNode:n.focusNode,focusOffset:n.focusOffset}),Mi&&ea(Mi,n)||(Mi=n,n=Jo(Ed,"onSelect"),0<n.length&&(e=new Bu("onSelect","select",null,e,s),t.push({event:e,listeners:n}),e.target=vr)))}function za(t,e){var s={};return s[t.toLowerCase()]=e.toLowerCase(),s["Webkit"+t]="webkit"+e,s["Moz"+t]="moz"+e,s}var br={animationend:za("Animation","AnimationEnd"),animationiteration:za("Animation","AnimationIteration"),animationstart:za("Animation","AnimationStart"),transitionend:za("Transition","TransitionEnd")},jc={},m0={};Us&&(m0=document.createElement("div").style,"AnimationEvent"in window||(delete br.animationend.animation,delete br.animationiteration.animation,delete br.animationstart.animation),"TransitionEvent"in window||delete br.transitionend.transition);function Al(t){if(jc[t])return jc[t];if(!br[t])return t;var e=br[t],s;for(s in e)if(e.hasOwnProperty(s)&&s in m0)return jc[t]=e[s];return t}var p0=Al("animationend"),g0=Al("animationiteration"),x0=Al("animationstart"),y0=Al("transitionend"),v0=new Map,Af="abort auxClick cancel canPlay canPlayThrough click close contextMenu copy cut drag dragEnd dragEnter dragExit dragLeave dragOver dragStart drop durationChange emptied encrypted ended error gotPointerCapture input invalid keyDown keyPress keyUp load loadedData loadedMetadata loadStart lostPointerCapture mouseDown mouseMove mouseOut mouseOver mouseUp paste pause play playing pointerCancel pointerDown pointerMove pointerOut pointerOver pointerUp progress rateChange reset resize seeked seeking stalled submit suspend timeUpdate touchCancel touchEnd touchStart volumeChange scroll toggle touchMove waiting wheel".split(" ");function Nn(t,e){v0.set(t,e),rr(e,[t])}for(var Nc=0;Nc<Af.length;Nc++){var kc=Af[Nc],rw=kc.toLowerCase(),iw=kc[0].toUpperCase()+kc.slice(1);Nn(rw,"on"+iw)}Nn(p0,"onAnimationEnd");Nn(g0,"onAnimationIteration");Nn(x0,"onAnimationStart");Nn("dblclick","onDoubleClick");Nn("focusin","onFocus");Nn("focusout","onBlur");Nn(y0,"onTransitionEnd");Rr("onMouseEnter",["mouseout","mouseover"]);Rr("onMouseLeave",["mouseout","mouseover"]);Rr("onPointerEnter",["pointerout","pointerover"]);Rr("onPointerLeave",["pointerout","pointerover"]);rr("onChange","change click focusin focusout input keydown keyup selectionchange".split(" "));rr("onSelect","focusout contextmenu dragend focusin keydown keyup mousedown mouseup selectionchange".split(" "));rr("onBeforeInput",["compositionend","keypress","textInput","paste"]);rr("onCompositionEnd","compositionend focusout keydown keypress keyup mousedown".split(" "));rr("onCompositionStart","compositionstart focusout keydown keypress keyup mousedown".split(" "));rr("onCompositionUpdate","compositionupdate focusout keydown keypress keyup mousedown".split(" "));var Ni="abort canplay canplaythrough durationchange emptied encrypted ended error loadeddata loadedmetadata loadstart pause play playing progress ratechange resize seeked seeking stalled suspend timeupdate volumechange waiting".split(" "),aw=new Set("cancel close invalid load scroll toggle".split(" ").concat(Ni));function Lf(t,e,s){var n=t.type||"unknown-event";t.currentTarget=s,rb(n,e,void 0,t),t.currentTarget=null}function b0(t,e){e=(e&4)!==0;for(var s=0;s<t.length;s++){var n=t[s],r=n.event;n=n.listeners;e:{var i=void 0;if(e)for(var o=n.length-1;0<=o;o--){var l=n[o],c=l.instance,d=l.currentTarget;if(l=l.listener,c!==i&&r.isPropagationStopped())break e;Lf(r,l,d),i=c}else for(o=0;o<n.length;o++){if(l=n[o],c=l.instance,d=l.currentTarget,l=l.listener,c!==i&&r.isPropagationStopped())break e;Lf(r,l,d),i=c}}}if(Wo)throw t=Nd,Wo=!1,Nd=null,t}function Ne(t,e){var s=e[Dd];s===void 0&&(s=e[Dd]=new Set);var n=t+"__bubble";s.has(n)||(w0(e,t,2,!1),s.add(n))}function Sc(t,e,s){var n=0;e&&(n|=4),w0(s,t,n,e)}var Ua="_reactListening"+Math.random().toString(36).slice(2);function ta(t){if(!t[Ua]){t[Ua]=!0,Eg.forEach(function(s){s!=="selectionchange"&&(aw.has(s)||Sc(s,!1,t),Sc(s,!0,t))});var e=t.nodeType===9?t:t.ownerDocument;e===null||e[Ua]||(e[Ua]=!0,Sc("selectionchange",!1,e))}}function w0(t,e,s,n){switch(r0(e)){case 1:var r=bb;break;case 4:r=wb;break;default:r=zu}s=r.bind(null,e,s,t),r=void 0,!jd||e!=="touchstart"&&e!=="touchmove"&&e!=="wheel"||(r=!0),n?r!==void 0?t.addEventListener(e,s,{capture:!0,passive:r}):t.addEventListener(e,s,!0):r!==void 0?t.addEventListener(e,s,{passive:r}):t.addEventListener(e,s,!1)}function Cc(t,e,s,n,r){var i=n;if(!(e&1)&&!(e&2)&&n!==null)e:for(;;){if(n===null)return;var o=n.tag;if(o===3||o===4){var l=n.stateNode.containerInfo;if(l===r||l.nodeType===8&&l.parentNode===r)break;if(o===4)for(o=n.return;o!==null;){var c=o.tag;if((c===3||c===4)&&(c=o.stateNode.containerInfo,c===r||c.nodeType===8&&c.parentNode===r))return;o=o.return}for(;l!==null;){if(o=zn(l),o===null)return;if(c=o.tag,c===5||c===6){n=i=o;continue e}l=l.parentNode}}n=n.return}Vg(function(){var d=i,u=Ru(s),h=[];e:{var f=v0.get(t);if(f!==void 0){var m=Bu,p=t;switch(t){case"keypress":if(ko(s)===0)break e;case"keydown":case"keyup":m=Rb;break;case"focusin":p="focus",m=bc;break;case"focusout":p="blur",m=bc;break;case"beforeblur":case"afterblur":m=bc;break;case"click":if(s.button===2)break e;case"auxclick":case"dblclick":case"mousedown":case"mousemove":case"mouseup":case"mouseout":case"mouseover":case"contextmenu":m=vf;break;case"drag":case"dragend":case"dragenter":case"dragexit":case"dragleave":case"dragover":case"dragstart":case"drop":m=Nb;break;case"touchcancel":case"touchend":case"touchmove":case"touchstart":m=$b;break;case p0:case g0:case x0:m=Cb;break;case y0:m=Ub;break;case"scroll":m=_b;break;case"wheel":m=Hb;break;case"copy":case"cut":case"paste":m=Pb;break;case"gotpointercapture":case"lostpointercapture":case"pointercancel":case"pointerdown":case"pointermove":case"pointerout":case"pointerover":case"pointerup":m=wf}var v=(e&4)!==0,g=!v&&t==="scroll",x=v?f!==null?f+"Capture":null:f;v=[];for(var y=d,b;y!==null;){b=y;var N=b.stateNode;if(b.tag===5&&N!==null&&(b=N,x!==null&&(N=Yi(y,x),N!=null&&v.push(sa(y,N,b)))),g)break;y=y.return}0<v.length&&(f=new m(f,p,null,s,u),h.push({event:f,listeners:v}))}}if(!(e&7)){e:{if(f=t==="mouseover"||t==="pointerover",m=t==="mouseout"||t==="pointerout",f&&s!==wd&&(p=s.relatedTarget||s.fromElement)&&(zn(p)||p[Bs]))break e;if((m||f)&&(f=u.window===u?u:(f=u.ownerDocument)?f.defaultView||f.parentWindow:window,m?(p=s.relatedTarget||s.toElement,m=d,p=p?zn(p):null,p!==null&&(g=ir(p),p!==g||p.tag!==5&&p.tag!==6)&&(p=null)):(m=null,p=d),m!==p)){if(v=vf,N="onMouseLeave",x="onMouseEnter",y="mouse",(t==="pointerout"||t==="pointerover")&&(v=wf,N="onPointerLeave",x="onPointerEnter",y="pointer"),g=m==null?f:wr(m),b=p==null?f:wr(p),f=new v(N,y+"leave",m,s,u),f.target=g,f.relatedTarget=b,N=null,zn(u)===d&&(v=new v(x,y+"enter",p,s,u),v.target=b,v.relatedTarget=g,N=v),g=N,m&&p)t:{for(v=m,x=p,y=0,b=v;b;b=cr(b))y++;for(b=0,N=x;N;N=cr(N))b++;for(;0<y-b;)v=cr(v),y--;for(;0<b-y;)x=cr(x),b--;for(;y--;){if(v===x||x!==null&&v===x.alternate)break t;v=cr(v),x=cr(x)}v=null}else v=null;m!==null&&Tf(h,f,m,v,!1),p!==null&&g!==null&&Tf(h,g,p,v,!0)}}e:{if(f=d?wr(d):window,m=f.nodeName&&f.nodeName.toLowerCase(),m==="select"||m==="input"&&f.type==="file")var _=Jb;else if(Nf(f))if(d0)_=ew;else{_=Xb;var k=Qb}else(m=f.nodeName)&&m.toLowerCase()==="input"&&(f.type==="checkbox"||f.type==="radio")&&(_=Zb);if(_&&(_=_(t,d))){c0(h,_,s,u);break e}k&&k(t,f,d),t==="focusout"&&(k=f._wrapperState)&&k.controlled&&f.type==="number"&&gd(f,"number",f.value)}switch(k=d?wr(d):window,t){case"focusin":(Nf(k)||k.contentEditable==="true")&&(vr=k,Ed=d,Mi=null);break;case"focusout":Mi=Ed=vr=null;break;case"mousedown":Pd=!0;break;case"contextmenu":case"mouseup":case"dragend":Pd=!1,Pf(h,s,u);break;case"selectionchange":if(nw)break;case"keydown":case"keyup":Pf(h,s,u)}var S;if(Vu)e:{switch(t){case"compositionstart":var j="onCompositionStart";break e;case"compositionend":j="onCompositionEnd";break e;case"compositionupdate":j="onCompositionUpdate";break e}j=void 0}else yr?o0(t,s)&&(j="onCompositionEnd"):t==="keydown"&&s.keyCode===229&&(j="onCompositionStart");j&&(a0&&s.locale!=="ko"&&(yr||j!=="onCompositionStart"?j==="onCompositionEnd"&&yr&&(S=i0()):(sn=u,Uu="value"in sn?sn.value:sn.textContent,yr=!0)),k=Jo(d,j),0<k.length&&(j=new bf(j,t,null,s,u),h.push({event:j,listeners:k}),S?j.data=S:(S=l0(s),S!==null&&(j.data=S)))),(S=Wb?qb(t,s):Kb(t,s))&&(d=Jo(d,"onBeforeInput"),0<d.length&&(u=new bf("onBeforeInput","beforeinput",null,s,u),h.push({event:u,listeners:d}),u.data=S))}b0(h,e)})}function sa(t,e,s){return{instance:t,listener:e,currentTarget:s}}function Jo(t,e){for(var s=e+"Capture",n=[];t!==null;){var r=t,i=r.stateNode;r.tag===5&&i!==null&&(r=i,i=Yi(t,s),i!=null&&n.unshift(sa(t,i,r)),i=Yi(t,e),i!=null&&n.push(sa(t,i,r))),t=t.return}return n}function cr(t){if(t===null)return null;do t=t.return;while(t&&t.tag!==5);return t||null}function Tf(t,e,s,n,r){for(var i=e._reactName,o=[];s!==null&&s!==n;){var l=s,c=l.alternate,d=l.stateNode;if(c!==null&&c===n)break;l.tag===5&&d!==null&&(l=d,r?(c=Yi(s,i),c!=null&&o.unshift(sa(s,c,l))):r||(c=Yi(s,i),c!=null&&o.push(sa(s,c,l)))),s=s.return}o.length!==0&&t.push({event:e,listeners:o})}var ow=/\r\n?/g,lw=/\u0000|\uFFFD/g;function Mf(t){return(typeof t=="string"?t:""+t).replace(ow,`
`).replace(lw,"")}function Ba(t,e,s){if(e=Mf(e),Mf(t)!==e&&s)throw Error(I(425))}function Qo(){}var Ad=null,Ld=null;function Td(t,e){return t==="textarea"||t==="noscript"||typeof e.children=="string"||typeof e.children=="number"||typeof e.dangerouslySetInnerHTML=="object"&&e.dangerouslySetInnerHTML!==null&&e.dangerouslySetInnerHTML.__html!=null}var Md=typeof setTimeout=="function"?setTimeout:void 0,cw=typeof clearTimeout=="function"?clearTimeout:void 0,Df=typeof Promise=="function"?Promise:void 0,dw=typeof queueMicrotask=="function"?queueMicrotask:typeof Df<"u"?function(t){return Df.resolve(null).then(t).catch(uw)}:Md;function uw(t){setTimeout(function(){throw t})}function Ec(t,e){var s=e,n=0;do{var r=s.nextSibling;if(t.removeChild(s),r&&r.nodeType===8)if(s=r.data,s==="/$"){if(n===0){t.removeChild(r),Xi(e);return}n--}else s!=="$"&&s!=="$?"&&s!=="$!"||n++;s=r}while(s);Xi(e)}function mn(t){for(;t!=null;t=t.nextSibling){var e=t.nodeType;if(e===1||e===3)break;if(e===8){if(e=t.data,e==="$"||e==="$!"||e==="$?")break;if(e==="/$")return null}}return t}function Of(t){t=t.previousSibling;for(var e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="$"||s==="$!"||s==="$?"){if(e===0)return t;e--}else s==="/$"&&e++}t=t.previousSibling}return null}var Yr=Math.random().toString(36).slice(2),gs="__reactFiber$"+Yr,na="__reactProps$"+Yr,Bs="__reactContainer$"+Yr,Dd="__reactEvents$"+Yr,hw="__reactListeners$"+Yr,fw="__reactHandles$"+Yr;function zn(t){var e=t[gs];if(e)return e;for(var s=t.parentNode;s;){if(e=s[Bs]||s[gs]){if(s=e.alternate,e.child!==null||s!==null&&s.child!==null)for(t=Of(t);t!==null;){if(s=t[gs])return s;t=Of(t)}return e}t=s,s=t.parentNode}return null}function Na(t){return t=t[gs]||t[Bs],!t||t.tag!==5&&t.tag!==6&&t.tag!==13&&t.tag!==3?null:t}function wr(t){if(t.tag===5||t.tag===6)return t.stateNode;throw Error(I(33))}function Ll(t){return t[na]||null}var Od=[],_r=-1;function kn(t){return{current:t}}function Ce(t){0>_r||(t.current=Od[_r],Od[_r]=null,_r--)}function je(t,e){_r++,Od[_r]=t.current,t.current=e}var wn={},ct=kn(wn),wt=kn(!1),Yn=wn;function Ir(t,e){var s=t.type.contextTypes;if(!s)return wn;var n=t.stateNode;if(n&&n.__reactInternalMemoizedUnmaskedChildContext===e)return n.__reactInternalMemoizedMaskedChildContext;var r={},i;for(i in s)r[i]=e[i];return n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=e,t.__reactInternalMemoizedMaskedChildContext=r),r}function _t(t){return t=t.childContextTypes,t!=null}function Xo(){Ce(wt),Ce(ct)}function Rf(t,e,s){if(ct.current!==wn)throw Error(I(168));je(ct,e),je(wt,s)}function _0(t,e,s){var n=t.stateNode;if(e=e.childContextTypes,typeof n.getChildContext!="function")return s;n=n.getChildContext();for(var r in n)if(!(r in e))throw Error(I(108,Qv(t)||"Unknown",r));return De({},s,n)}function Zo(t){return t=(t=t.stateNode)&&t.__reactInternalMemoizedMergedChildContext||wn,Yn=ct.current,je(ct,t),je(wt,wt.current),!0}function If(t,e,s){var n=t.stateNode;if(!n)throw Error(I(169));s?(t=_0(t,e,Yn),n.__reactInternalMemoizedMergedChildContext=t,Ce(wt),Ce(ct),je(ct,t)):Ce(wt),je(wt,s)}var Ms=null,Tl=!1,Pc=!1;function j0(t){Ms===null?Ms=[t]:Ms.push(t)}function mw(t){Tl=!0,j0(t)}function Sn(){if(!Pc&&Ms!==null){Pc=!0;var t=0,e=ve;try{var s=Ms;for(ve=1;t<s.length;t++){var n=s[t];do n=n(!0);while(n!==null)}Ms=null,Tl=!1}catch(r){throw Ms!==null&&(Ms=Ms.slice(t+1)),Gg(Iu,Sn),r}finally{ve=e,Pc=!1}}return null}var jr=[],Nr=0,el=null,tl=0,Bt=[],Ht=0,Jn=null,Rs=1,Is="";function Dn(t,e){jr[Nr++]=tl,jr[Nr++]=el,el=t,tl=e}function N0(t,e,s){Bt[Ht++]=Rs,Bt[Ht++]=Is,Bt[Ht++]=Jn,Jn=t;var n=Rs;t=Is;var r=32-ns(n)-1;n&=~(1<<r),s+=1;var i=32-ns(e)+r;if(30<i){var o=r-r%5;i=(n&(1<<o)-1).toString(32),n>>=o,r-=o,Rs=1<<32-ns(e)+r|s<<r|n,Is=i+t}else Rs=1<<i|s<<r|n,Is=t}function qu(t){t.return!==null&&(Dn(t,1),N0(t,1,0))}function Ku(t){for(;t===el;)el=jr[--Nr],jr[Nr]=null,tl=jr[--Nr],jr[Nr]=null;for(;t===Jn;)Jn=Bt[--Ht],Bt[Ht]=null,Is=Bt[--Ht],Bt[Ht]=null,Rs=Bt[--Ht],Bt[Ht]=null}var Rt=null,Mt=null,Pe=!1,ss=null;function k0(t,e){var s=Vt(5,null,null,0);s.elementType="DELETED",s.stateNode=e,s.return=t,e=t.deletions,e===null?(t.deletions=[s],t.flags|=16):e.push(s)}function Ff(t,e){switch(t.tag){case 5:var s=t.type;return e=e.nodeType!==1||s.toLowerCase()!==e.nodeName.toLowerCase()?null:e,e!==null?(t.stateNode=e,Rt=t,Mt=mn(e.firstChild),!0):!1;case 6:return e=t.pendingProps===""||e.nodeType!==3?null:e,e!==null?(t.stateNode=e,Rt=t,Mt=null,!0):!1;case 13:return e=e.nodeType!==8?null:e,e!==null?(s=Jn!==null?{id:Rs,overflow:Is}:null,t.memoizedState={dehydrated:e,treeContext:s,retryLane:1073741824},s=Vt(18,null,null,0),s.stateNode=e,s.return=t,t.child=s,Rt=t,Mt=null,!0):!1;default:return!1}}function Rd(t){return(t.mode&1)!==0&&(t.flags&128)===0}function Id(t){if(Pe){var e=Mt;if(e){var s=e;if(!Ff(t,e)){if(Rd(t))throw Error(I(418));e=mn(s.nextSibling);var n=Rt;e&&Ff(t,e)?k0(n,s):(t.flags=t.flags&-4097|2,Pe=!1,Rt=t)}}else{if(Rd(t))throw Error(I(418));t.flags=t.flags&-4097|2,Pe=!1,Rt=t}}}function $f(t){for(t=t.return;t!==null&&t.tag!==5&&t.tag!==3&&t.tag!==13;)t=t.return;Rt=t}function Ha(t){if(t!==Rt)return!1;if(!Pe)return $f(t),Pe=!0,!1;var e;if((e=t.tag!==3)&&!(e=t.tag!==5)&&(e=t.type,e=e!=="head"&&e!=="body"&&!Td(t.type,t.memoizedProps)),e&&(e=Mt)){if(Rd(t))throw S0(),Error(I(418));for(;e;)k0(t,e),e=mn(e.nextSibling)}if($f(t),t.tag===13){if(t=t.memoizedState,t=t!==null?t.dehydrated:null,!t)throw Error(I(317));e:{for(t=t.nextSibling,e=0;t;){if(t.nodeType===8){var s=t.data;if(s==="/$"){if(e===0){Mt=mn(t.nextSibling);break e}e--}else s!=="$"&&s!=="$!"&&s!=="$?"||e++}t=t.nextSibling}Mt=null}}else Mt=Rt?mn(t.stateNode.nextSibling):null;return!0}function S0(){for(var t=Mt;t;)t=mn(t.nextSibling)}function Fr(){Mt=Rt=null,Pe=!1}function Gu(t){ss===null?ss=[t]:ss.push(t)}var pw=qs.ReactCurrentBatchConfig;function ci(t,e,s){if(t=s.ref,t!==null&&typeof t!="function"&&typeof t!="object"){if(s._owner){if(s=s._owner,s){if(s.tag!==1)throw Error(I(309));var n=s.stateNode}if(!n)throw Error(I(147,t));var r=n,i=""+t;return e!==null&&e.ref!==null&&typeof e.ref=="function"&&e.ref._stringRef===i?e.ref:(e=function(o){var l=r.refs;o===null?delete l[i]:l[i]=o},e._stringRef=i,e)}if(typeof t!="string")throw Error(I(284));if(!s._owner)throw Error(I(290,t))}return t}function Va(t,e){throw t=Object.prototype.toString.call(e),Error(I(31,t==="[object Object]"?"object with keys {"+Object.keys(e).join(", ")+"}":t))}function zf(t){var e=t._init;return e(t._payload)}function C0(t){function e(x,y){if(t){var b=x.deletions;b===null?(x.deletions=[y],x.flags|=16):b.push(y)}}function s(x,y){if(!t)return null;for(;y!==null;)e(x,y),y=y.sibling;return null}function n(x,y){for(x=new Map;y!==null;)y.key!==null?x.set(y.key,y):x.set(y.index,y),y=y.sibling;return x}function r(x,y){return x=yn(x,y),x.index=0,x.sibling=null,x}function i(x,y,b){return x.index=b,t?(b=x.alternate,b!==null?(b=b.index,b<y?(x.flags|=2,y):b):(x.flags|=2,y)):(x.flags|=1048576,y)}function o(x){return t&&x.alternate===null&&(x.flags|=2),x}function l(x,y,b,N){return y===null||y.tag!==6?(y=Rc(b,x.mode,N),y.return=x,y):(y=r(y,b),y.return=x,y)}function c(x,y,b,N){var _=b.type;return _===xr?u(x,y,b.props.children,N,b.key):y!==null&&(y.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Js&&zf(_)===y.type)?(N=r(y,b.props),N.ref=ci(x,y,b),N.return=x,N):(N=To(b.type,b.key,b.props,null,x.mode,N),N.ref=ci(x,y,b),N.return=x,N)}function d(x,y,b,N){return y===null||y.tag!==4||y.stateNode.containerInfo!==b.containerInfo||y.stateNode.implementation!==b.implementation?(y=Ic(b,x.mode,N),y.return=x,y):(y=r(y,b.children||[]),y.return=x,y)}function u(x,y,b,N,_){return y===null||y.tag!==7?(y=qn(b,x.mode,N,_),y.return=x,y):(y=r(y,b),y.return=x,y)}function h(x,y,b){if(typeof y=="string"&&y!==""||typeof y=="number")return y=Rc(""+y,x.mode,b),y.return=x,y;if(typeof y=="object"&&y!==null){switch(y.$$typeof){case Ma:return b=To(y.type,y.key,y.props,null,x.mode,b),b.ref=ci(x,null,y),b.return=x,b;case gr:return y=Ic(y,x.mode,b),y.return=x,y;case Js:var N=y._init;return h(x,N(y._payload),b)}if(_i(y)||ri(y))return y=qn(y,x.mode,b,null),y.return=x,y;Va(x,y)}return null}function f(x,y,b,N){var _=y!==null?y.key:null;if(typeof b=="string"&&b!==""||typeof b=="number")return _!==null?null:l(x,y,""+b,N);if(typeof b=="object"&&b!==null){switch(b.$$typeof){case Ma:return b.key===_?c(x,y,b,N):null;case gr:return b.key===_?d(x,y,b,N):null;case Js:return _=b._init,f(x,y,_(b._payload),N)}if(_i(b)||ri(b))return _!==null?null:u(x,y,b,N,null);Va(x,b)}return null}function m(x,y,b,N,_){if(typeof N=="string"&&N!==""||typeof N=="number")return x=x.get(b)||null,l(y,x,""+N,_);if(typeof N=="object"&&N!==null){switch(N.$$typeof){case Ma:return x=x.get(N.key===null?b:N.key)||null,c(y,x,N,_);case gr:return x=x.get(N.key===null?b:N.key)||null,d(y,x,N,_);case Js:var k=N._init;return m(x,y,b,k(N._payload),_)}if(_i(N)||ri(N))return x=x.get(b)||null,u(y,x,N,_,null);Va(y,N)}return null}function p(x,y,b,N){for(var _=null,k=null,S=y,j=y=0,C=null;S!==null&&j<b.length;j++){S.index>j?(C=S,S=null):C=S.sibling;var E=f(x,S,b[j],N);if(E===null){S===null&&(S=C);break}t&&S&&E.alternate===null&&e(x,S),y=i(E,y,j),k===null?_=E:k.sibling=E,k=E,S=C}if(j===b.length)return s(x,S),Pe&&Dn(x,j),_;if(S===null){for(;j<b.length;j++)S=h(x,b[j],N),S!==null&&(y=i(S,y,j),k===null?_=S:k.sibling=S,k=S);return Pe&&Dn(x,j),_}for(S=n(x,S);j<b.length;j++)C=m(S,x,j,b[j],N),C!==null&&(t&&C.alternate!==null&&S.delete(C.key===null?j:C.key),y=i(C,y,j),k===null?_=C:k.sibling=C,k=C);return t&&S.forEach(function(M){return e(x,M)}),Pe&&Dn(x,j),_}function v(x,y,b,N){var _=ri(b);if(typeof _!="function")throw Error(I(150));if(b=_.call(b),b==null)throw Error(I(151));for(var k=_=null,S=y,j=y=0,C=null,E=b.next();S!==null&&!E.done;j++,E=b.next()){S.index>j?(C=S,S=null):C=S.sibling;var M=f(x,S,E.value,N);if(M===null){S===null&&(S=C);break}t&&S&&M.alternate===null&&e(x,S),y=i(M,y,j),k===null?_=M:k.sibling=M,k=M,S=C}if(E.done)return s(x,S),Pe&&Dn(x,j),_;if(S===null){for(;!E.done;j++,E=b.next())E=h(x,E.value,N),E!==null&&(y=i(E,y,j),k===null?_=E:k.sibling=E,k=E);return Pe&&Dn(x,j),_}for(S=n(x,S);!E.done;j++,E=b.next())E=m(S,x,j,E.value,N),E!==null&&(t&&E.alternate!==null&&S.delete(E.key===null?j:E.key),y=i(E,y,j),k===null?_=E:k.sibling=E,k=E);return t&&S.forEach(function(P){return e(x,P)}),Pe&&Dn(x,j),_}function g(x,y,b,N){if(typeof b=="object"&&b!==null&&b.type===xr&&b.key===null&&(b=b.props.children),typeof b=="object"&&b!==null){switch(b.$$typeof){case Ma:e:{for(var _=b.key,k=y;k!==null;){if(k.key===_){if(_=b.type,_===xr){if(k.tag===7){s(x,k.sibling),y=r(k,b.props.children),y.return=x,x=y;break e}}else if(k.elementType===_||typeof _=="object"&&_!==null&&_.$$typeof===Js&&zf(_)===k.type){s(x,k.sibling),y=r(k,b.props),y.ref=ci(x,k,b),y.return=x,x=y;break e}s(x,k);break}else e(x,k);k=k.sibling}b.type===xr?(y=qn(b.props.children,x.mode,N,b.key),y.return=x,x=y):(N=To(b.type,b.key,b.props,null,x.mode,N),N.ref=ci(x,y,b),N.return=x,x=N)}return o(x);case gr:e:{for(k=b.key;y!==null;){if(y.key===k)if(y.tag===4&&y.stateNode.containerInfo===b.containerInfo&&y.stateNode.implementation===b.implementation){s(x,y.sibling),y=r(y,b.children||[]),y.return=x,x=y;break e}else{s(x,y);break}else e(x,y);y=y.sibling}y=Ic(b,x.mode,N),y.return=x,x=y}return o(x);case Js:return k=b._init,g(x,y,k(b._payload),N)}if(_i(b))return p(x,y,b,N);if(ri(b))return v(x,y,b,N);Va(x,b)}return typeof b=="string"&&b!==""||typeof b=="number"?(b=""+b,y!==null&&y.tag===6?(s(x,y.sibling),y=r(y,b),y.return=x,x=y):(s(x,y),y=Rc(b,x.mode,N),y.return=x,x=y),o(x)):s(x,y)}return g}var $r=C0(!0),E0=C0(!1),sl=kn(null),nl=null,kr=null,Yu=null;function Ju(){Yu=kr=nl=null}function Qu(t){var e=sl.current;Ce(sl),t._currentValue=e}function Fd(t,e,s){for(;t!==null;){var n=t.alternate;if((t.childLanes&e)!==e?(t.childLanes|=e,n!==null&&(n.childLanes|=e)):n!==null&&(n.childLanes&e)!==e&&(n.childLanes|=e),t===s)break;t=t.return}}function Tr(t,e){nl=t,Yu=kr=null,t=t.dependencies,t!==null&&t.firstContext!==null&&(t.lanes&e&&(bt=!0),t.firstContext=null)}function Gt(t){var e=t._currentValue;if(Yu!==t)if(t={context:t,memoizedValue:e,next:null},kr===null){if(nl===null)throw Error(I(308));kr=t,nl.dependencies={lanes:0,firstContext:t}}else kr=kr.next=t;return e}var Un=null;function Xu(t){Un===null?Un=[t]:Un.push(t)}function P0(t,e,s,n){var r=e.interleaved;return r===null?(s.next=s,Xu(e)):(s.next=r.next,r.next=s),e.interleaved=s,Hs(t,n)}function Hs(t,e){t.lanes|=e;var s=t.alternate;for(s!==null&&(s.lanes|=e),s=t,t=t.return;t!==null;)t.childLanes|=e,s=t.alternate,s!==null&&(s.childLanes|=e),s=t,t=t.return;return s.tag===3?s.stateNode:null}var Qs=!1;function Zu(t){t.updateQueue={baseState:t.memoizedState,firstBaseUpdate:null,lastBaseUpdate:null,shared:{pending:null,interleaved:null,lanes:0},effects:null}}function A0(t,e){t=t.updateQueue,e.updateQueue===t&&(e.updateQueue={baseState:t.baseState,firstBaseUpdate:t.firstBaseUpdate,lastBaseUpdate:t.lastBaseUpdate,shared:t.shared,effects:t.effects})}function $s(t,e){return{eventTime:t,lane:e,tag:0,payload:null,callback:null,next:null}}function pn(t,e,s){var n=t.updateQueue;if(n===null)return null;if(n=n.shared,pe&2){var r=n.pending;return r===null?e.next=e:(e.next=r.next,r.next=e),n.pending=e,Hs(t,s)}return r=n.interleaved,r===null?(e.next=e,Xu(n)):(e.next=r.next,r.next=e),n.interleaved=e,Hs(t,s)}function So(t,e,s){if(e=e.updateQueue,e!==null&&(e=e.shared,(s&4194240)!==0)){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Fu(t,s)}}function Uf(t,e){var s=t.updateQueue,n=t.alternate;if(n!==null&&(n=n.updateQueue,s===n)){var r=null,i=null;if(s=s.firstBaseUpdate,s!==null){do{var o={eventTime:s.eventTime,lane:s.lane,tag:s.tag,payload:s.payload,callback:s.callback,next:null};i===null?r=i=o:i=i.next=o,s=s.next}while(s!==null);i===null?r=i=e:i=i.next=e}else r=i=e;s={baseState:n.baseState,firstBaseUpdate:r,lastBaseUpdate:i,shared:n.shared,effects:n.effects},t.updateQueue=s;return}t=s.lastBaseUpdate,t===null?s.firstBaseUpdate=e:t.next=e,s.lastBaseUpdate=e}function rl(t,e,s,n){var r=t.updateQueue;Qs=!1;var i=r.firstBaseUpdate,o=r.lastBaseUpdate,l=r.shared.pending;if(l!==null){r.shared.pending=null;var c=l,d=c.next;c.next=null,o===null?i=d:o.next=d,o=c;var u=t.alternate;u!==null&&(u=u.updateQueue,l=u.lastBaseUpdate,l!==o&&(l===null?u.firstBaseUpdate=d:l.next=d,u.lastBaseUpdate=c))}if(i!==null){var h=r.baseState;o=0,u=d=c=null,l=i;do{var f=l.lane,m=l.eventTime;if((n&f)===f){u!==null&&(u=u.next={eventTime:m,lane:0,tag:l.tag,payload:l.payload,callback:l.callback,next:null});e:{var p=t,v=l;switch(f=e,m=s,v.tag){case 1:if(p=v.payload,typeof p=="function"){h=p.call(m,h,f);break e}h=p;break e;case 3:p.flags=p.flags&-65537|128;case 0:if(p=v.payload,f=typeof p=="function"?p.call(m,h,f):p,f==null)break e;h=De({},h,f);break e;case 2:Qs=!0}}l.callback!==null&&l.lane!==0&&(t.flags|=64,f=r.effects,f===null?r.effects=[l]:f.push(l))}else m={eventTime:m,lane:f,tag:l.tag,payload:l.payload,callback:l.callback,next:null},u===null?(d=u=m,c=h):u=u.next=m,o|=f;if(l=l.next,l===null){if(l=r.shared.pending,l===null)break;f=l,l=f.next,f.next=null,r.lastBaseUpdate=f,r.shared.pending=null}}while(1);if(u===null&&(c=h),r.baseState=c,r.firstBaseUpdate=d,r.lastBaseUpdate=u,e=r.shared.interleaved,e!==null){r=e;do o|=r.lane,r=r.next;while(r!==e)}else i===null&&(r.shared.lanes=0);Xn|=o,t.lanes=o,t.memoizedState=h}}function Bf(t,e,s){if(t=e.effects,e.effects=null,t!==null)for(e=0;e<t.length;e++){var n=t[e],r=n.callback;if(r!==null){if(n.callback=null,n=s,typeof r!="function")throw Error(I(191,r));r.call(n)}}}var ka={},ys=kn(ka),ra=kn(ka),ia=kn(ka);function Bn(t){if(t===ka)throw Error(I(174));return t}function eh(t,e){switch(je(ia,e),je(ra,t),je(ys,ka),t=e.nodeType,t){case 9:case 11:e=(e=e.documentElement)?e.namespaceURI:yd(null,"");break;default:t=t===8?e.parentNode:e,e=t.namespaceURI||null,t=t.tagName,e=yd(e,t)}Ce(ys),je(ys,e)}function zr(){Ce(ys),Ce(ra),Ce(ia)}function L0(t){Bn(ia.current);var e=Bn(ys.current),s=yd(e,t.type);e!==s&&(je(ra,t),je(ys,s))}function th(t){ra.current===t&&(Ce(ys),Ce(ra))}var Te=kn(0);function il(t){for(var e=t;e!==null;){if(e.tag===13){var s=e.memoizedState;if(s!==null&&(s=s.dehydrated,s===null||s.data==="$?"||s.data==="$!"))return e}else if(e.tag===19&&e.memoizedProps.revealOrder!==void 0){if(e.flags&128)return e}else if(e.child!==null){e.child.return=e,e=e.child;continue}if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return null;e=e.return}e.sibling.return=e.return,e=e.sibling}return null}var Ac=[];function sh(){for(var t=0;t<Ac.length;t++)Ac[t]._workInProgressVersionPrimary=null;Ac.length=0}var Co=qs.ReactCurrentDispatcher,Lc=qs.ReactCurrentBatchConfig,Qn=0,Me=null,qe=null,Je=null,al=!1,Di=!1,aa=0,gw=0;function rt(){throw Error(I(321))}function nh(t,e){if(e===null)return!1;for(var s=0;s<e.length&&s<t.length;s++)if(!is(t[s],e[s]))return!1;return!0}function rh(t,e,s,n,r,i){if(Qn=i,Me=e,e.memoizedState=null,e.updateQueue=null,e.lanes=0,Co.current=t===null||t.memoizedState===null?bw:ww,t=s(n,r),Di){i=0;do{if(Di=!1,aa=0,25<=i)throw Error(I(301));i+=1,Je=qe=null,e.updateQueue=null,Co.current=_w,t=s(n,r)}while(Di)}if(Co.current=ol,e=qe!==null&&qe.next!==null,Qn=0,Je=qe=Me=null,al=!1,e)throw Error(I(300));return t}function ih(){var t=aa!==0;return aa=0,t}function ms(){var t={memoizedState:null,baseState:null,baseQueue:null,queue:null,next:null};return Je===null?Me.memoizedState=Je=t:Je=Je.next=t,Je}function Yt(){if(qe===null){var t=Me.alternate;t=t!==null?t.memoizedState:null}else t=qe.next;var e=Je===null?Me.memoizedState:Je.next;if(e!==null)Je=e,qe=t;else{if(t===null)throw Error(I(310));qe=t,t={memoizedState:qe.memoizedState,baseState:qe.baseState,baseQueue:qe.baseQueue,queue:qe.queue,next:null},Je===null?Me.memoizedState=Je=t:Je=Je.next=t}return Je}function oa(t,e){return typeof e=="function"?e(t):e}function Tc(t){var e=Yt(),s=e.queue;if(s===null)throw Error(I(311));s.lastRenderedReducer=t;var n=qe,r=n.baseQueue,i=s.pending;if(i!==null){if(r!==null){var o=r.next;r.next=i.next,i.next=o}n.baseQueue=r=i,s.pending=null}if(r!==null){i=r.next,n=n.baseState;var l=o=null,c=null,d=i;do{var u=d.lane;if((Qn&u)===u)c!==null&&(c=c.next={lane:0,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null}),n=d.hasEagerState?d.eagerState:t(n,d.action);else{var h={lane:u,action:d.action,hasEagerState:d.hasEagerState,eagerState:d.eagerState,next:null};c===null?(l=c=h,o=n):c=c.next=h,Me.lanes|=u,Xn|=u}d=d.next}while(d!==null&&d!==i);c===null?o=n:c.next=l,is(n,e.memoizedState)||(bt=!0),e.memoizedState=n,e.baseState=o,e.baseQueue=c,s.lastRenderedState=n}if(t=s.interleaved,t!==null){r=t;do i=r.lane,Me.lanes|=i,Xn|=i,r=r.next;while(r!==t)}else r===null&&(s.lanes=0);return[e.memoizedState,s.dispatch]}function Mc(t){var e=Yt(),s=e.queue;if(s===null)throw Error(I(311));s.lastRenderedReducer=t;var n=s.dispatch,r=s.pending,i=e.memoizedState;if(r!==null){s.pending=null;var o=r=r.next;do i=t(i,o.action),o=o.next;while(o!==r);is(i,e.memoizedState)||(bt=!0),e.memoizedState=i,e.baseQueue===null&&(e.baseState=i),s.lastRenderedState=i}return[i,n]}function T0(){}function M0(t,e){var s=Me,n=Yt(),r=e(),i=!is(n.memoizedState,r);if(i&&(n.memoizedState=r,bt=!0),n=n.queue,ah(R0.bind(null,s,n,t),[t]),n.getSnapshot!==e||i||Je!==null&&Je.memoizedState.tag&1){if(s.flags|=2048,la(9,O0.bind(null,s,n,r,e),void 0,null),Qe===null)throw Error(I(349));Qn&30||D0(s,e,r)}return r}function D0(t,e,s){t.flags|=16384,t={getSnapshot:e,value:s},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.stores=[t]):(s=e.stores,s===null?e.stores=[t]:s.push(t))}function O0(t,e,s,n){e.value=s,e.getSnapshot=n,I0(e)&&F0(t)}function R0(t,e,s){return s(function(){I0(e)&&F0(t)})}function I0(t){var e=t.getSnapshot;t=t.value;try{var s=e();return!is(t,s)}catch{return!0}}function F0(t){var e=Hs(t,1);e!==null&&rs(e,t,1,-1)}function Hf(t){var e=ms();return typeof t=="function"&&(t=t()),e.memoizedState=e.baseState=t,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:oa,lastRenderedState:t},e.queue=t,t=t.dispatch=vw.bind(null,Me,t),[e.memoizedState,t]}function la(t,e,s,n){return t={tag:t,create:e,destroy:s,deps:n,next:null},e=Me.updateQueue,e===null?(e={lastEffect:null,stores:null},Me.updateQueue=e,e.lastEffect=t.next=t):(s=e.lastEffect,s===null?e.lastEffect=t.next=t:(n=s.next,s.next=t,t.next=n,e.lastEffect=t)),t}function $0(){return Yt().memoizedState}function Eo(t,e,s,n){var r=ms();Me.flags|=t,r.memoizedState=la(1|e,s,void 0,n===void 0?null:n)}function Ml(t,e,s,n){var r=Yt();n=n===void 0?null:n;var i=void 0;if(qe!==null){var o=qe.memoizedState;if(i=o.destroy,n!==null&&nh(n,o.deps)){r.memoizedState=la(e,s,i,n);return}}Me.flags|=t,r.memoizedState=la(1|e,s,i,n)}function Vf(t,e){return Eo(8390656,8,t,e)}function ah(t,e){return Ml(2048,8,t,e)}function z0(t,e){return Ml(4,2,t,e)}function U0(t,e){return Ml(4,4,t,e)}function B0(t,e){if(typeof e=="function")return t=t(),e(t),function(){e(null)};if(e!=null)return t=t(),e.current=t,function(){e.current=null}}function H0(t,e,s){return s=s!=null?s.concat([t]):null,Ml(4,4,B0.bind(null,e,t),s)}function oh(){}function V0(t,e){var s=Yt();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&nh(e,n[1])?n[0]:(s.memoizedState=[t,e],t)}function W0(t,e){var s=Yt();e=e===void 0?null:e;var n=s.memoizedState;return n!==null&&e!==null&&nh(e,n[1])?n[0]:(t=t(),s.memoizedState=[t,e],t)}function q0(t,e,s){return Qn&21?(is(s,e)||(s=Qg(),Me.lanes|=s,Xn|=s,t.baseState=!0),e):(t.baseState&&(t.baseState=!1,bt=!0),t.memoizedState=s)}function xw(t,e){var s=ve;ve=s!==0&&4>s?s:4,t(!0);var n=Lc.transition;Lc.transition={};try{t(!1),e()}finally{ve=s,Lc.transition=n}}function K0(){return Yt().memoizedState}function yw(t,e,s){var n=xn(t);if(s={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null},G0(t))Y0(e,s);else if(s=P0(t,e,s,n),s!==null){var r=ht();rs(s,t,n,r),J0(s,e,n)}}function vw(t,e,s){var n=xn(t),r={lane:n,action:s,hasEagerState:!1,eagerState:null,next:null};if(G0(t))Y0(e,r);else{var i=t.alternate;if(t.lanes===0&&(i===null||i.lanes===0)&&(i=e.lastRenderedReducer,i!==null))try{var o=e.lastRenderedState,l=i(o,s);if(r.hasEagerState=!0,r.eagerState=l,is(l,o)){var c=e.interleaved;c===null?(r.next=r,Xu(e)):(r.next=c.next,c.next=r),e.interleaved=r;return}}catch{}finally{}s=P0(t,e,r,n),s!==null&&(r=ht(),rs(s,t,n,r),J0(s,e,n))}}function G0(t){var e=t.alternate;return t===Me||e!==null&&e===Me}function Y0(t,e){Di=al=!0;var s=t.pending;s===null?e.next=e:(e.next=s.next,s.next=e),t.pending=e}function J0(t,e,s){if(s&4194240){var n=e.lanes;n&=t.pendingLanes,s|=n,e.lanes=s,Fu(t,s)}}var ol={readContext:Gt,useCallback:rt,useContext:rt,useEffect:rt,useImperativeHandle:rt,useInsertionEffect:rt,useLayoutEffect:rt,useMemo:rt,useReducer:rt,useRef:rt,useState:rt,useDebugValue:rt,useDeferredValue:rt,useTransition:rt,useMutableSource:rt,useSyncExternalStore:rt,useId:rt,unstable_isNewReconciler:!1},bw={readContext:Gt,useCallback:function(t,e){return ms().memoizedState=[t,e===void 0?null:e],t},useContext:Gt,useEffect:Vf,useImperativeHandle:function(t,e,s){return s=s!=null?s.concat([t]):null,Eo(4194308,4,B0.bind(null,e,t),s)},useLayoutEffect:function(t,e){return Eo(4194308,4,t,e)},useInsertionEffect:function(t,e){return Eo(4,2,t,e)},useMemo:function(t,e){var s=ms();return e=e===void 0?null:e,t=t(),s.memoizedState=[t,e],t},useReducer:function(t,e,s){var n=ms();return e=s!==void 0?s(e):e,n.memoizedState=n.baseState=e,t={pending:null,interleaved:null,lanes:0,dispatch:null,lastRenderedReducer:t,lastRenderedState:e},n.queue=t,t=t.dispatch=yw.bind(null,Me,t),[n.memoizedState,t]},useRef:function(t){var e=ms();return t={current:t},e.memoizedState=t},useState:Hf,useDebugValue:oh,useDeferredValue:function(t){return ms().memoizedState=t},useTransition:function(){var t=Hf(!1),e=t[0];return t=xw.bind(null,t[1]),ms().memoizedState=t,[e,t]},useMutableSource:function(){},useSyncExternalStore:function(t,e,s){var n=Me,r=ms();if(Pe){if(s===void 0)throw Error(I(407));s=s()}else{if(s=e(),Qe===null)throw Error(I(349));Qn&30||D0(n,e,s)}r.memoizedState=s;var i={value:s,getSnapshot:e};return r.queue=i,Vf(R0.bind(null,n,i,t),[t]),n.flags|=2048,la(9,O0.bind(null,n,i,s,e),void 0,null),s},useId:function(){var t=ms(),e=Qe.identifierPrefix;if(Pe){var s=Is,n=Rs;s=(n&~(1<<32-ns(n)-1)).toString(32)+s,e=":"+e+"R"+s,s=aa++,0<s&&(e+="H"+s.toString(32)),e+=":"}else s=gw++,e=":"+e+"r"+s.toString(32)+":";return t.memoizedState=e},unstable_isNewReconciler:!1},ww={readContext:Gt,useCallback:V0,useContext:Gt,useEffect:ah,useImperativeHandle:H0,useInsertionEffect:z0,useLayoutEffect:U0,useMemo:W0,useReducer:Tc,useRef:$0,useState:function(){return Tc(oa)},useDebugValue:oh,useDeferredValue:function(t){var e=Yt();return q0(e,qe.memoizedState,t)},useTransition:function(){var t=Tc(oa)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:T0,useSyncExternalStore:M0,useId:K0,unstable_isNewReconciler:!1},_w={readContext:Gt,useCallback:V0,useContext:Gt,useEffect:ah,useImperativeHandle:H0,useInsertionEffect:z0,useLayoutEffect:U0,useMemo:W0,useReducer:Mc,useRef:$0,useState:function(){return Mc(oa)},useDebugValue:oh,useDeferredValue:function(t){var e=Yt();return qe===null?e.memoizedState=t:q0(e,qe.memoizedState,t)},useTransition:function(){var t=Mc(oa)[0],e=Yt().memoizedState;return[t,e]},useMutableSource:T0,useSyncExternalStore:M0,useId:K0,unstable_isNewReconciler:!1};function Xt(t,e){if(t&&t.defaultProps){e=De({},e),t=t.defaultProps;for(var s in t)e[s]===void 0&&(e[s]=t[s]);return e}return e}function $d(t,e,s,n){e=t.memoizedState,s=s(n,e),s=s==null?e:De({},e,s),t.memoizedState=s,t.lanes===0&&(t.updateQueue.baseState=s)}var Dl={isMounted:function(t){return(t=t._reactInternals)?ir(t)===t:!1},enqueueSetState:function(t,e,s){t=t._reactInternals;var n=ht(),r=xn(t),i=$s(n,r);i.payload=e,s!=null&&(i.callback=s),e=pn(t,i,r),e!==null&&(rs(e,t,r,n),So(e,t,r))},enqueueReplaceState:function(t,e,s){t=t._reactInternals;var n=ht(),r=xn(t),i=$s(n,r);i.tag=1,i.payload=e,s!=null&&(i.callback=s),e=pn(t,i,r),e!==null&&(rs(e,t,r,n),So(e,t,r))},enqueueForceUpdate:function(t,e){t=t._reactInternals;var s=ht(),n=xn(t),r=$s(s,n);r.tag=2,e!=null&&(r.callback=e),e=pn(t,r,n),e!==null&&(rs(e,t,n,s),So(e,t,n))}};function Wf(t,e,s,n,r,i,o){return t=t.stateNode,typeof t.shouldComponentUpdate=="function"?t.shouldComponentUpdate(n,i,o):e.prototype&&e.prototype.isPureReactComponent?!ea(s,n)||!ea(r,i):!0}function Q0(t,e,s){var n=!1,r=wn,i=e.contextType;return typeof i=="object"&&i!==null?i=Gt(i):(r=_t(e)?Yn:ct.current,n=e.contextTypes,i=(n=n!=null)?Ir(t,r):wn),e=new e(s,i),t.memoizedState=e.state!==null&&e.state!==void 0?e.state:null,e.updater=Dl,t.stateNode=e,e._reactInternals=t,n&&(t=t.stateNode,t.__reactInternalMemoizedUnmaskedChildContext=r,t.__reactInternalMemoizedMaskedChildContext=i),e}function qf(t,e,s,n){t=e.state,typeof e.componentWillReceiveProps=="function"&&e.componentWillReceiveProps(s,n),typeof e.UNSAFE_componentWillReceiveProps=="function"&&e.UNSAFE_componentWillReceiveProps(s,n),e.state!==t&&Dl.enqueueReplaceState(e,e.state,null)}function zd(t,e,s,n){var r=t.stateNode;r.props=s,r.state=t.memoizedState,r.refs={},Zu(t);var i=e.contextType;typeof i=="object"&&i!==null?r.context=Gt(i):(i=_t(e)?Yn:ct.current,r.context=Ir(t,i)),r.state=t.memoizedState,i=e.getDerivedStateFromProps,typeof i=="function"&&($d(t,e,i,s),r.state=t.memoizedState),typeof e.getDerivedStateFromProps=="function"||typeof r.getSnapshotBeforeUpdate=="function"||typeof r.UNSAFE_componentWillMount!="function"&&typeof r.componentWillMount!="function"||(e=r.state,typeof r.componentWillMount=="function"&&r.componentWillMount(),typeof r.UNSAFE_componentWillMount=="function"&&r.UNSAFE_componentWillMount(),e!==r.state&&Dl.enqueueReplaceState(r,r.state,null),rl(t,s,r,n),r.state=t.memoizedState),typeof r.componentDidMount=="function"&&(t.flags|=4194308)}function Ur(t,e){try{var s="",n=e;do s+=Jv(n),n=n.return;while(n);var r=s}catch(i){r=`
Error generating stack: `+i.message+`
`+i.stack}return{value:t,source:e,stack:r,digest:null}}function Dc(t,e,s){return{value:t,source:null,stack:s??null,digest:e??null}}function Ud(t,e){try{console.error(e.value)}catch(s){setTimeout(function(){throw s})}}var jw=typeof WeakMap=="function"?WeakMap:Map;function X0(t,e,s){s=$s(-1,s),s.tag=3,s.payload={element:null};var n=e.value;return s.callback=function(){cl||(cl=!0,Qd=n),Ud(t,e)},s}function Z0(t,e,s){s=$s(-1,s),s.tag=3;var n=t.type.getDerivedStateFromError;if(typeof n=="function"){var r=e.value;s.payload=function(){return n(r)},s.callback=function(){Ud(t,e)}}var i=t.stateNode;return i!==null&&typeof i.componentDidCatch=="function"&&(s.callback=function(){Ud(t,e),typeof n!="function"&&(gn===null?gn=new Set([this]):gn.add(this));var o=e.stack;this.componentDidCatch(e.value,{componentStack:o!==null?o:""})}),s}function Kf(t,e,s){var n=t.pingCache;if(n===null){n=t.pingCache=new jw;var r=new Set;n.set(e,r)}else r=n.get(e),r===void 0&&(r=new Set,n.set(e,r));r.has(s)||(r.add(s),t=Iw.bind(null,t,e,s),e.then(t,t))}function Gf(t){do{var e;if((e=t.tag===13)&&(e=t.memoizedState,e=e!==null?e.dehydrated!==null:!0),e)return t;t=t.return}while(t!==null);return null}function Yf(t,e,s,n,r){return t.mode&1?(t.flags|=65536,t.lanes=r,t):(t===e?t.flags|=65536:(t.flags|=128,s.flags|=131072,s.flags&=-52805,s.tag===1&&(s.alternate===null?s.tag=17:(e=$s(-1,1),e.tag=2,pn(s,e,1))),s.lanes|=1),t)}var Nw=qs.ReactCurrentOwner,bt=!1;function ut(t,e,s,n){e.child=t===null?E0(e,null,s,n):$r(e,t.child,s,n)}function Jf(t,e,s,n,r){s=s.render;var i=e.ref;return Tr(e,r),n=rh(t,e,s,n,i,r),s=ih(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Vs(t,e,r)):(Pe&&s&&qu(e),e.flags|=1,ut(t,e,n,r),e.child)}function Qf(t,e,s,n,r){if(t===null){var i=s.type;return typeof i=="function"&&!ph(i)&&i.defaultProps===void 0&&s.compare===null&&s.defaultProps===void 0?(e.tag=15,e.type=i,ex(t,e,i,n,r)):(t=To(s.type,null,n,e,e.mode,r),t.ref=e.ref,t.return=e,e.child=t)}if(i=t.child,!(t.lanes&r)){var o=i.memoizedProps;if(s=s.compare,s=s!==null?s:ea,s(o,n)&&t.ref===e.ref)return Vs(t,e,r)}return e.flags|=1,t=yn(i,n),t.ref=e.ref,t.return=e,e.child=t}function ex(t,e,s,n,r){if(t!==null){var i=t.memoizedProps;if(ea(i,n)&&t.ref===e.ref)if(bt=!1,e.pendingProps=n=i,(t.lanes&r)!==0)t.flags&131072&&(bt=!0);else return e.lanes=t.lanes,Vs(t,e,r)}return Bd(t,e,s,n,r)}function tx(t,e,s){var n=e.pendingProps,r=n.children,i=t!==null?t.memoizedState:null;if(n.mode==="hidden")if(!(e.mode&1))e.memoizedState={baseLanes:0,cachePool:null,transitions:null},je(Cr,Lt),Lt|=s;else{if(!(s&1073741824))return t=i!==null?i.baseLanes|s:s,e.lanes=e.childLanes=1073741824,e.memoizedState={baseLanes:t,cachePool:null,transitions:null},e.updateQueue=null,je(Cr,Lt),Lt|=t,null;e.memoizedState={baseLanes:0,cachePool:null,transitions:null},n=i!==null?i.baseLanes:s,je(Cr,Lt),Lt|=n}else i!==null?(n=i.baseLanes|s,e.memoizedState=null):n=s,je(Cr,Lt),Lt|=n;return ut(t,e,r,s),e.child}function sx(t,e){var s=e.ref;(t===null&&s!==null||t!==null&&t.ref!==s)&&(e.flags|=512,e.flags|=2097152)}function Bd(t,e,s,n,r){var i=_t(s)?Yn:ct.current;return i=Ir(e,i),Tr(e,r),s=rh(t,e,s,n,i,r),n=ih(),t!==null&&!bt?(e.updateQueue=t.updateQueue,e.flags&=-2053,t.lanes&=~r,Vs(t,e,r)):(Pe&&n&&qu(e),e.flags|=1,ut(t,e,s,r),e.child)}function Xf(t,e,s,n,r){if(_t(s)){var i=!0;Zo(e)}else i=!1;if(Tr(e,r),e.stateNode===null)Po(t,e),Q0(e,s,n),zd(e,s,n,r),n=!0;else if(t===null){var o=e.stateNode,l=e.memoizedProps;o.props=l;var c=o.context,d=s.contextType;typeof d=="object"&&d!==null?d=Gt(d):(d=_t(s)?Yn:ct.current,d=Ir(e,d));var u=s.getDerivedStateFromProps,h=typeof u=="function"||typeof o.getSnapshotBeforeUpdate=="function";h||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==n||c!==d)&&qf(e,o,n,d),Qs=!1;var f=e.memoizedState;o.state=f,rl(e,n,o,r),c=e.memoizedState,l!==n||f!==c||wt.current||Qs?(typeof u=="function"&&($d(e,s,u,n),c=e.memoizedState),(l=Qs||Wf(e,s,l,n,f,c,d))?(h||typeof o.UNSAFE_componentWillMount!="function"&&typeof o.componentWillMount!="function"||(typeof o.componentWillMount=="function"&&o.componentWillMount(),typeof o.UNSAFE_componentWillMount=="function"&&o.UNSAFE_componentWillMount()),typeof o.componentDidMount=="function"&&(e.flags|=4194308)):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),e.memoizedProps=n,e.memoizedState=c),o.props=n,o.state=c,o.context=d,n=l):(typeof o.componentDidMount=="function"&&(e.flags|=4194308),n=!1)}else{o=e.stateNode,A0(t,e),l=e.memoizedProps,d=e.type===e.elementType?l:Xt(e.type,l),o.props=d,h=e.pendingProps,f=o.context,c=s.contextType,typeof c=="object"&&c!==null?c=Gt(c):(c=_t(s)?Yn:ct.current,c=Ir(e,c));var m=s.getDerivedStateFromProps;(u=typeof m=="function"||typeof o.getSnapshotBeforeUpdate=="function")||typeof o.UNSAFE_componentWillReceiveProps!="function"&&typeof o.componentWillReceiveProps!="function"||(l!==h||f!==c)&&qf(e,o,n,c),Qs=!1,f=e.memoizedState,o.state=f,rl(e,n,o,r);var p=e.memoizedState;l!==h||f!==p||wt.current||Qs?(typeof m=="function"&&($d(e,s,m,n),p=e.memoizedState),(d=Qs||Wf(e,s,d,n,f,p,c)||!1)?(u||typeof o.UNSAFE_componentWillUpdate!="function"&&typeof o.componentWillUpdate!="function"||(typeof o.componentWillUpdate=="function"&&o.componentWillUpdate(n,p,c),typeof o.UNSAFE_componentWillUpdate=="function"&&o.UNSAFE_componentWillUpdate(n,p,c)),typeof o.componentDidUpdate=="function"&&(e.flags|=4),typeof o.getSnapshotBeforeUpdate=="function"&&(e.flags|=1024)):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),e.memoizedProps=n,e.memoizedState=p),o.props=n,o.state=p,o.context=c,n=d):(typeof o.componentDidUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=4),typeof o.getSnapshotBeforeUpdate!="function"||l===t.memoizedProps&&f===t.memoizedState||(e.flags|=1024),n=!1)}return Hd(t,e,s,n,i,r)}function Hd(t,e,s,n,r,i){sx(t,e);var o=(e.flags&128)!==0;if(!n&&!o)return r&&If(e,s,!1),Vs(t,e,i);n=e.stateNode,Nw.current=e;var l=o&&typeof s.getDerivedStateFromError!="function"?null:n.render();return e.flags|=1,t!==null&&o?(e.child=$r(e,t.child,null,i),e.child=$r(e,null,l,i)):ut(t,e,l,i),e.memoizedState=n.state,r&&If(e,s,!0),e.child}function nx(t){var e=t.stateNode;e.pendingContext?Rf(t,e.pendingContext,e.pendingContext!==e.context):e.context&&Rf(t,e.context,!1),eh(t,e.containerInfo)}function Zf(t,e,s,n,r){return Fr(),Gu(r),e.flags|=256,ut(t,e,s,n),e.child}var Vd={dehydrated:null,treeContext:null,retryLane:0};function Wd(t){return{baseLanes:t,cachePool:null,transitions:null}}function rx(t,e,s){var n=e.pendingProps,r=Te.current,i=!1,o=(e.flags&128)!==0,l;if((l=o)||(l=t!==null&&t.memoizedState===null?!1:(r&2)!==0),l?(i=!0,e.flags&=-129):(t===null||t.memoizedState!==null)&&(r|=1),je(Te,r&1),t===null)return Id(e),t=e.memoizedState,t!==null&&(t=t.dehydrated,t!==null)?(e.mode&1?t.data==="$!"?e.lanes=8:e.lanes=1073741824:e.lanes=1,null):(o=n.children,t=n.fallback,i?(n=e.mode,i=e.child,o={mode:"hidden",children:o},!(n&1)&&i!==null?(i.childLanes=0,i.pendingProps=o):i=Il(o,n,0,null),t=qn(t,n,s,null),i.return=e,t.return=e,i.sibling=t,e.child=i,e.child.memoizedState=Wd(s),e.memoizedState=Vd,t):lh(e,o));if(r=t.memoizedState,r!==null&&(l=r.dehydrated,l!==null))return kw(t,e,o,n,l,r,s);if(i){i=n.fallback,o=e.mode,r=t.child,l=r.sibling;var c={mode:"hidden",children:n.children};return!(o&1)&&e.child!==r?(n=e.child,n.childLanes=0,n.pendingProps=c,e.deletions=null):(n=yn(r,c),n.subtreeFlags=r.subtreeFlags&14680064),l!==null?i=yn(l,i):(i=qn(i,o,s,null),i.flags|=2),i.return=e,n.return=e,n.sibling=i,e.child=n,n=i,i=e.child,o=t.child.memoizedState,o=o===null?Wd(s):{baseLanes:o.baseLanes|s,cachePool:null,transitions:o.transitions},i.memoizedState=o,i.childLanes=t.childLanes&~s,e.memoizedState=Vd,n}return i=t.child,t=i.sibling,n=yn(i,{mode:"visible",children:n.children}),!(e.mode&1)&&(n.lanes=s),n.return=e,n.sibling=null,t!==null&&(s=e.deletions,s===null?(e.deletions=[t],e.flags|=16):s.push(t)),e.child=n,e.memoizedState=null,n}function lh(t,e){return e=Il({mode:"visible",children:e},t.mode,0,null),e.return=t,t.child=e}function Wa(t,e,s,n){return n!==null&&Gu(n),$r(e,t.child,null,s),t=lh(e,e.pendingProps.children),t.flags|=2,e.memoizedState=null,t}function kw(t,e,s,n,r,i,o){if(s)return e.flags&256?(e.flags&=-257,n=Dc(Error(I(422))),Wa(t,e,o,n)):e.memoizedState!==null?(e.child=t.child,e.flags|=128,null):(i=n.fallback,r=e.mode,n=Il({mode:"visible",children:n.children},r,0,null),i=qn(i,r,o,null),i.flags|=2,n.return=e,i.return=e,n.sibling=i,e.child=n,e.mode&1&&$r(e,t.child,null,o),e.child.memoizedState=Wd(o),e.memoizedState=Vd,i);if(!(e.mode&1))return Wa(t,e,o,null);if(r.data==="$!"){if(n=r.nextSibling&&r.nextSibling.dataset,n)var l=n.dgst;return n=l,i=Error(I(419)),n=Dc(i,n,void 0),Wa(t,e,o,n)}if(l=(o&t.childLanes)!==0,bt||l){if(n=Qe,n!==null){switch(o&-o){case 4:r=2;break;case 16:r=8;break;case 64:case 128:case 256:case 512:case 1024:case 2048:case 4096:case 8192:case 16384:case 32768:case 65536:case 131072:case 262144:case 524288:case 1048576:case 2097152:case 4194304:case 8388608:case 16777216:case 33554432:case 67108864:r=32;break;case 536870912:r=268435456;break;default:r=0}r=r&(n.suspendedLanes|o)?0:r,r!==0&&r!==i.retryLane&&(i.retryLane=r,Hs(t,r),rs(n,t,r,-1))}return mh(),n=Dc(Error(I(421))),Wa(t,e,o,n)}return r.data==="$?"?(e.flags|=128,e.child=t.child,e=Fw.bind(null,t),r._reactRetry=e,null):(t=i.treeContext,Mt=mn(r.nextSibling),Rt=e,Pe=!0,ss=null,t!==null&&(Bt[Ht++]=Rs,Bt[Ht++]=Is,Bt[Ht++]=Jn,Rs=t.id,Is=t.overflow,Jn=e),e=lh(e,n.children),e.flags|=4096,e)}function em(t,e,s){t.lanes|=e;var n=t.alternate;n!==null&&(n.lanes|=e),Fd(t.return,e,s)}function Oc(t,e,s,n,r){var i=t.memoizedState;i===null?t.memoizedState={isBackwards:e,rendering:null,renderingStartTime:0,last:n,tail:s,tailMode:r}:(i.isBackwards=e,i.rendering=null,i.renderingStartTime=0,i.last=n,i.tail=s,i.tailMode=r)}function ix(t,e,s){var n=e.pendingProps,r=n.revealOrder,i=n.tail;if(ut(t,e,n.children,s),n=Te.current,n&2)n=n&1|2,e.flags|=128;else{if(t!==null&&t.flags&128)e:for(t=e.child;t!==null;){if(t.tag===13)t.memoizedState!==null&&em(t,s,e);else if(t.tag===19)em(t,s,e);else if(t.child!==null){t.child.return=t,t=t.child;continue}if(t===e)break e;for(;t.sibling===null;){if(t.return===null||t.return===e)break e;t=t.return}t.sibling.return=t.return,t=t.sibling}n&=1}if(je(Te,n),!(e.mode&1))e.memoizedState=null;else switch(r){case"forwards":for(s=e.child,r=null;s!==null;)t=s.alternate,t!==null&&il(t)===null&&(r=s),s=s.sibling;s=r,s===null?(r=e.child,e.child=null):(r=s.sibling,s.sibling=null),Oc(e,!1,r,s,i);break;case"backwards":for(s=null,r=e.child,e.child=null;r!==null;){if(t=r.alternate,t!==null&&il(t)===null){e.child=r;break}t=r.sibling,r.sibling=s,s=r,r=t}Oc(e,!0,s,null,i);break;case"together":Oc(e,!1,null,null,void 0);break;default:e.memoizedState=null}return e.child}function Po(t,e){!(e.mode&1)&&t!==null&&(t.alternate=null,e.alternate=null,e.flags|=2)}function Vs(t,e,s){if(t!==null&&(e.dependencies=t.dependencies),Xn|=e.lanes,!(s&e.childLanes))return null;if(t!==null&&e.child!==t.child)throw Error(I(153));if(e.child!==null){for(t=e.child,s=yn(t,t.pendingProps),e.child=s,s.return=e;t.sibling!==null;)t=t.sibling,s=s.sibling=yn(t,t.pendingProps),s.return=e;s.sibling=null}return e.child}function Sw(t,e,s){switch(e.tag){case 3:nx(e),Fr();break;case 5:L0(e);break;case 1:_t(e.type)&&Zo(e);break;case 4:eh(e,e.stateNode.containerInfo);break;case 10:var n=e.type._context,r=e.memoizedProps.value;je(sl,n._currentValue),n._currentValue=r;break;case 13:if(n=e.memoizedState,n!==null)return n.dehydrated!==null?(je(Te,Te.current&1),e.flags|=128,null):s&e.child.childLanes?rx(t,e,s):(je(Te,Te.current&1),t=Vs(t,e,s),t!==null?t.sibling:null);je(Te,Te.current&1);break;case 19:if(n=(s&e.childLanes)!==0,t.flags&128){if(n)return ix(t,e,s);e.flags|=128}if(r=e.memoizedState,r!==null&&(r.rendering=null,r.tail=null,r.lastEffect=null),je(Te,Te.current),n)break;return null;case 22:case 23:return e.lanes=0,tx(t,e,s)}return Vs(t,e,s)}var ax,qd,ox,lx;ax=function(t,e){for(var s=e.child;s!==null;){if(s.tag===5||s.tag===6)t.appendChild(s.stateNode);else if(s.tag!==4&&s.child!==null){s.child.return=s,s=s.child;continue}if(s===e)break;for(;s.sibling===null;){if(s.return===null||s.return===e)return;s=s.return}s.sibling.return=s.return,s=s.sibling}};qd=function(){};ox=function(t,e,s,n){var r=t.memoizedProps;if(r!==n){t=e.stateNode,Bn(ys.current);var i=null;switch(s){case"input":r=md(t,r),n=md(t,n),i=[];break;case"select":r=De({},r,{value:void 0}),n=De({},n,{value:void 0}),i=[];break;case"textarea":r=xd(t,r),n=xd(t,n),i=[];break;default:typeof r.onClick!="function"&&typeof n.onClick=="function"&&(t.onclick=Qo)}vd(s,n);var o;s=null;for(d in r)if(!n.hasOwnProperty(d)&&r.hasOwnProperty(d)&&r[d]!=null)if(d==="style"){var l=r[d];for(o in l)l.hasOwnProperty(o)&&(s||(s={}),s[o]="")}else d!=="dangerouslySetInnerHTML"&&d!=="children"&&d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&d!=="autoFocus"&&(Ki.hasOwnProperty(d)?i||(i=[]):(i=i||[]).push(d,null));for(d in n){var c=n[d];if(l=r!=null?r[d]:void 0,n.hasOwnProperty(d)&&c!==l&&(c!=null||l!=null))if(d==="style")if(l){for(o in l)!l.hasOwnProperty(o)||c&&c.hasOwnProperty(o)||(s||(s={}),s[o]="");for(o in c)c.hasOwnProperty(o)&&l[o]!==c[o]&&(s||(s={}),s[o]=c[o])}else s||(i||(i=[]),i.push(d,s)),s=c;else d==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,l=l?l.__html:void 0,c!=null&&l!==c&&(i=i||[]).push(d,c)):d==="children"?typeof c!="string"&&typeof c!="number"||(i=i||[]).push(d,""+c):d!=="suppressContentEditableWarning"&&d!=="suppressHydrationWarning"&&(Ki.hasOwnProperty(d)?(c!=null&&d==="onScroll"&&Ne("scroll",t),i||l===c||(i=[])):(i=i||[]).push(d,c))}s&&(i=i||[]).push("style",s);var d=i;(e.updateQueue=d)&&(e.flags|=4)}};lx=function(t,e,s,n){s!==n&&(e.flags|=4)};function di(t,e){if(!Pe)switch(t.tailMode){case"hidden":e=t.tail;for(var s=null;e!==null;)e.alternate!==null&&(s=e),e=e.sibling;s===null?t.tail=null:s.sibling=null;break;case"collapsed":s=t.tail;for(var n=null;s!==null;)s.alternate!==null&&(n=s),s=s.sibling;n===null?e||t.tail===null?t.tail=null:t.tail.sibling=null:n.sibling=null}}function it(t){var e=t.alternate!==null&&t.alternate.child===t.child,s=0,n=0;if(e)for(var r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags&14680064,n|=r.flags&14680064,r.return=t,r=r.sibling;else for(r=t.child;r!==null;)s|=r.lanes|r.childLanes,n|=r.subtreeFlags,n|=r.flags,r.return=t,r=r.sibling;return t.subtreeFlags|=n,t.childLanes=s,e}function Cw(t,e,s){var n=e.pendingProps;switch(Ku(e),e.tag){case 2:case 16:case 15:case 0:case 11:case 7:case 8:case 12:case 9:case 14:return it(e),null;case 1:return _t(e.type)&&Xo(),it(e),null;case 3:return n=e.stateNode,zr(),Ce(wt),Ce(ct),sh(),n.pendingContext&&(n.context=n.pendingContext,n.pendingContext=null),(t===null||t.child===null)&&(Ha(e)?e.flags|=4:t===null||t.memoizedState.isDehydrated&&!(e.flags&256)||(e.flags|=1024,ss!==null&&(eu(ss),ss=null))),qd(t,e),it(e),null;case 5:th(e);var r=Bn(ia.current);if(s=e.type,t!==null&&e.stateNode!=null)ox(t,e,s,n,r),t.ref!==e.ref&&(e.flags|=512,e.flags|=2097152);else{if(!n){if(e.stateNode===null)throw Error(I(166));return it(e),null}if(t=Bn(ys.current),Ha(e)){n=e.stateNode,s=e.type;var i=e.memoizedProps;switch(n[gs]=e,n[na]=i,t=(e.mode&1)!==0,s){case"dialog":Ne("cancel",n),Ne("close",n);break;case"iframe":case"object":case"embed":Ne("load",n);break;case"video":case"audio":for(r=0;r<Ni.length;r++)Ne(Ni[r],n);break;case"source":Ne("error",n);break;case"img":case"image":case"link":Ne("error",n),Ne("load",n);break;case"details":Ne("toggle",n);break;case"input":cf(n,i),Ne("invalid",n);break;case"select":n._wrapperState={wasMultiple:!!i.multiple},Ne("invalid",n);break;case"textarea":uf(n,i),Ne("invalid",n)}vd(s,i),r=null;for(var o in i)if(i.hasOwnProperty(o)){var l=i[o];o==="children"?typeof l=="string"?n.textContent!==l&&(i.suppressHydrationWarning!==!0&&Ba(n.textContent,l,t),r=["children",l]):typeof l=="number"&&n.textContent!==""+l&&(i.suppressHydrationWarning!==!0&&Ba(n.textContent,l,t),r=["children",""+l]):Ki.hasOwnProperty(o)&&l!=null&&o==="onScroll"&&Ne("scroll",n)}switch(s){case"input":Da(n),df(n,i,!0);break;case"textarea":Da(n),hf(n);break;case"select":case"option":break;default:typeof i.onClick=="function"&&(n.onclick=Qo)}n=r,e.updateQueue=n,n!==null&&(e.flags|=4)}else{o=r.nodeType===9?r:r.ownerDocument,t==="http://www.w3.org/1999/xhtml"&&(t=Rg(s)),t==="http://www.w3.org/1999/xhtml"?s==="script"?(t=o.createElement("div"),t.innerHTML="<script><\/script>",t=t.removeChild(t.firstChild)):typeof n.is=="string"?t=o.createElement(s,{is:n.is}):(t=o.createElement(s),s==="select"&&(o=t,n.multiple?o.multiple=!0:n.size&&(o.size=n.size))):t=o.createElementNS(t,s),t[gs]=e,t[na]=n,ax(t,e,!1,!1),e.stateNode=t;e:{switch(o=bd(s,n),s){case"dialog":Ne("cancel",t),Ne("close",t),r=n;break;case"iframe":case"object":case"embed":Ne("load",t),r=n;break;case"video":case"audio":for(r=0;r<Ni.length;r++)Ne(Ni[r],t);r=n;break;case"source":Ne("error",t),r=n;break;case"img":case"image":case"link":Ne("error",t),Ne("load",t),r=n;break;case"details":Ne("toggle",t),r=n;break;case"input":cf(t,n),r=md(t,n),Ne("invalid",t);break;case"option":r=n;break;case"select":t._wrapperState={wasMultiple:!!n.multiple},r=De({},n,{value:void 0}),Ne("invalid",t);break;case"textarea":uf(t,n),r=xd(t,n),Ne("invalid",t);break;default:r=n}vd(s,r),l=r;for(i in l)if(l.hasOwnProperty(i)){var c=l[i];i==="style"?$g(t,c):i==="dangerouslySetInnerHTML"?(c=c?c.__html:void 0,c!=null&&Ig(t,c)):i==="children"?typeof c=="string"?(s!=="textarea"||c!=="")&&Gi(t,c):typeof c=="number"&&Gi(t,""+c):i!=="suppressContentEditableWarning"&&i!=="suppressHydrationWarning"&&i!=="autoFocus"&&(Ki.hasOwnProperty(i)?c!=null&&i==="onScroll"&&Ne("scroll",t):c!=null&&Tu(t,i,c,o))}switch(s){case"input":Da(t),df(t,n,!1);break;case"textarea":Da(t),hf(t);break;case"option":n.value!=null&&t.setAttribute("value",""+bn(n.value));break;case"select":t.multiple=!!n.multiple,i=n.value,i!=null?Er(t,!!n.multiple,i,!1):n.defaultValue!=null&&Er(t,!!n.multiple,n.defaultValue,!0);break;default:typeof r.onClick=="function"&&(t.onclick=Qo)}switch(s){case"button":case"input":case"select":case"textarea":n=!!n.autoFocus;break e;case"img":n=!0;break e;default:n=!1}}n&&(e.flags|=4)}e.ref!==null&&(e.flags|=512,e.flags|=2097152)}return it(e),null;case 6:if(t&&e.stateNode!=null)lx(t,e,t.memoizedProps,n);else{if(typeof n!="string"&&e.stateNode===null)throw Error(I(166));if(s=Bn(ia.current),Bn(ys.current),Ha(e)){if(n=e.stateNode,s=e.memoizedProps,n[gs]=e,(i=n.nodeValue!==s)&&(t=Rt,t!==null))switch(t.tag){case 3:Ba(n.nodeValue,s,(t.mode&1)!==0);break;case 5:t.memoizedProps.suppressHydrationWarning!==!0&&Ba(n.nodeValue,s,(t.mode&1)!==0)}i&&(e.flags|=4)}else n=(s.nodeType===9?s:s.ownerDocument).createTextNode(n),n[gs]=e,e.stateNode=n}return it(e),null;case 13:if(Ce(Te),n=e.memoizedState,t===null||t.memoizedState!==null&&t.memoizedState.dehydrated!==null){if(Pe&&Mt!==null&&e.mode&1&&!(e.flags&128))S0(),Fr(),e.flags|=98560,i=!1;else if(i=Ha(e),n!==null&&n.dehydrated!==null){if(t===null){if(!i)throw Error(I(318));if(i=e.memoizedState,i=i!==null?i.dehydrated:null,!i)throw Error(I(317));i[gs]=e}else Fr(),!(e.flags&128)&&(e.memoizedState=null),e.flags|=4;it(e),i=!1}else ss!==null&&(eu(ss),ss=null),i=!0;if(!i)return e.flags&65536?e:null}return e.flags&128?(e.lanes=s,e):(n=n!==null,n!==(t!==null&&t.memoizedState!==null)&&n&&(e.child.flags|=8192,e.mode&1&&(t===null||Te.current&1?Ke===0&&(Ke=3):mh())),e.updateQueue!==null&&(e.flags|=4),it(e),null);case 4:return zr(),qd(t,e),t===null&&ta(e.stateNode.containerInfo),it(e),null;case 10:return Qu(e.type._context),it(e),null;case 17:return _t(e.type)&&Xo(),it(e),null;case 19:if(Ce(Te),i=e.memoizedState,i===null)return it(e),null;if(n=(e.flags&128)!==0,o=i.rendering,o===null)if(n)di(i,!1);else{if(Ke!==0||t!==null&&t.flags&128)for(t=e.child;t!==null;){if(o=il(t),o!==null){for(e.flags|=128,di(i,!1),n=o.updateQueue,n!==null&&(e.updateQueue=n,e.flags|=4),e.subtreeFlags=0,n=s,s=e.child;s!==null;)i=s,t=n,i.flags&=14680066,o=i.alternate,o===null?(i.childLanes=0,i.lanes=t,i.child=null,i.subtreeFlags=0,i.memoizedProps=null,i.memoizedState=null,i.updateQueue=null,i.dependencies=null,i.stateNode=null):(i.childLanes=o.childLanes,i.lanes=o.lanes,i.child=o.child,i.subtreeFlags=0,i.deletions=null,i.memoizedProps=o.memoizedProps,i.memoizedState=o.memoizedState,i.updateQueue=o.updateQueue,i.type=o.type,t=o.dependencies,i.dependencies=t===null?null:{lanes:t.lanes,firstContext:t.firstContext}),s=s.sibling;return je(Te,Te.current&1|2),e.child}t=t.sibling}i.tail!==null&&ze()>Br&&(e.flags|=128,n=!0,di(i,!1),e.lanes=4194304)}else{if(!n)if(t=il(o),t!==null){if(e.flags|=128,n=!0,s=t.updateQueue,s!==null&&(e.updateQueue=s,e.flags|=4),di(i,!0),i.tail===null&&i.tailMode==="hidden"&&!o.alternate&&!Pe)return it(e),null}else 2*ze()-i.renderingStartTime>Br&&s!==1073741824&&(e.flags|=128,n=!0,di(i,!1),e.lanes=4194304);i.isBackwards?(o.sibling=e.child,e.child=o):(s=i.last,s!==null?s.sibling=o:e.child=o,i.last=o)}return i.tail!==null?(e=i.tail,i.rendering=e,i.tail=e.sibling,i.renderingStartTime=ze(),e.sibling=null,s=Te.current,je(Te,n?s&1|2:s&1),e):(it(e),null);case 22:case 23:return fh(),n=e.memoizedState!==null,t!==null&&t.memoizedState!==null!==n&&(e.flags|=8192),n&&e.mode&1?Lt&1073741824&&(it(e),e.subtreeFlags&6&&(e.flags|=8192)):it(e),null;case 24:return null;case 25:return null}throw Error(I(156,e.tag))}function Ew(t,e){switch(Ku(e),e.tag){case 1:return _t(e.type)&&Xo(),t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 3:return zr(),Ce(wt),Ce(ct),sh(),t=e.flags,t&65536&&!(t&128)?(e.flags=t&-65537|128,e):null;case 5:return th(e),null;case 13:if(Ce(Te),t=e.memoizedState,t!==null&&t.dehydrated!==null){if(e.alternate===null)throw Error(I(340));Fr()}return t=e.flags,t&65536?(e.flags=t&-65537|128,e):null;case 19:return Ce(Te),null;case 4:return zr(),null;case 10:return Qu(e.type._context),null;case 22:case 23:return fh(),null;case 24:return null;default:return null}}var qa=!1,lt=!1,Pw=typeof WeakSet=="function"?WeakSet:Set,K=null;function Sr(t,e){var s=t.ref;if(s!==null)if(typeof s=="function")try{s(null)}catch(n){Re(t,e,n)}else s.current=null}function Kd(t,e,s){try{s()}catch(n){Re(t,e,n)}}var tm=!1;function Aw(t,e){if(Ad=Go,t=f0(),Wu(t)){if("selectionStart"in t)var s={start:t.selectionStart,end:t.selectionEnd};else e:{s=(s=t.ownerDocument)&&s.defaultView||window;var n=s.getSelection&&s.getSelection();if(n&&n.rangeCount!==0){s=n.anchorNode;var r=n.anchorOffset,i=n.focusNode;n=n.focusOffset;try{s.nodeType,i.nodeType}catch{s=null;break e}var o=0,l=-1,c=-1,d=0,u=0,h=t,f=null;t:for(;;){for(var m;h!==s||r!==0&&h.nodeType!==3||(l=o+r),h!==i||n!==0&&h.nodeType!==3||(c=o+n),h.nodeType===3&&(o+=h.nodeValue.length),(m=h.firstChild)!==null;)f=h,h=m;for(;;){if(h===t)break t;if(f===s&&++d===r&&(l=o),f===i&&++u===n&&(c=o),(m=h.nextSibling)!==null)break;h=f,f=h.parentNode}h=m}s=l===-1||c===-1?null:{start:l,end:c}}else s=null}s=s||{start:0,end:0}}else s=null;for(Ld={focusedElem:t,selectionRange:s},Go=!1,K=e;K!==null;)if(e=K,t=e.child,(e.subtreeFlags&1028)!==0&&t!==null)t.return=e,K=t;else for(;K!==null;){e=K;try{var p=e.alternate;if(e.flags&1024)switch(e.tag){case 0:case 11:case 15:break;case 1:if(p!==null){var v=p.memoizedProps,g=p.memoizedState,x=e.stateNode,y=x.getSnapshotBeforeUpdate(e.elementType===e.type?v:Xt(e.type,v),g);x.__reactInternalSnapshotBeforeUpdate=y}break;case 3:var b=e.stateNode.containerInfo;b.nodeType===1?b.textContent="":b.nodeType===9&&b.documentElement&&b.removeChild(b.documentElement);break;case 5:case 6:case 4:case 17:break;default:throw Error(I(163))}}catch(N){Re(e,e.return,N)}if(t=e.sibling,t!==null){t.return=e.return,K=t;break}K=e.return}return p=tm,tm=!1,p}function Oi(t,e,s){var n=e.updateQueue;if(n=n!==null?n.lastEffect:null,n!==null){var r=n=n.next;do{if((r.tag&t)===t){var i=r.destroy;r.destroy=void 0,i!==void 0&&Kd(e,s,i)}r=r.next}while(r!==n)}}function Ol(t,e){if(e=e.updateQueue,e=e!==null?e.lastEffect:null,e!==null){var s=e=e.next;do{if((s.tag&t)===t){var n=s.create;s.destroy=n()}s=s.next}while(s!==e)}}function Gd(t){var e=t.ref;if(e!==null){var s=t.stateNode;switch(t.tag){case 5:t=s;break;default:t=s}typeof e=="function"?e(t):e.current=t}}function cx(t){var e=t.alternate;e!==null&&(t.alternate=null,cx(e)),t.child=null,t.deletions=null,t.sibling=null,t.tag===5&&(e=t.stateNode,e!==null&&(delete e[gs],delete e[na],delete e[Dd],delete e[hw],delete e[fw])),t.stateNode=null,t.return=null,t.dependencies=null,t.memoizedProps=null,t.memoizedState=null,t.pendingProps=null,t.stateNode=null,t.updateQueue=null}function dx(t){return t.tag===5||t.tag===3||t.tag===4}function sm(t){e:for(;;){for(;t.sibling===null;){if(t.return===null||dx(t.return))return null;t=t.return}for(t.sibling.return=t.return,t=t.sibling;t.tag!==5&&t.tag!==6&&t.tag!==18;){if(t.flags&2||t.child===null||t.tag===4)continue e;t.child.return=t,t=t.child}if(!(t.flags&2))return t.stateNode}}function Yd(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.nodeType===8?s.parentNode.insertBefore(t,e):s.insertBefore(t,e):(s.nodeType===8?(e=s.parentNode,e.insertBefore(t,s)):(e=s,e.appendChild(t)),s=s._reactRootContainer,s!=null||e.onclick!==null||(e.onclick=Qo));else if(n!==4&&(t=t.child,t!==null))for(Yd(t,e,s),t=t.sibling;t!==null;)Yd(t,e,s),t=t.sibling}function Jd(t,e,s){var n=t.tag;if(n===5||n===6)t=t.stateNode,e?s.insertBefore(t,e):s.appendChild(t);else if(n!==4&&(t=t.child,t!==null))for(Jd(t,e,s),t=t.sibling;t!==null;)Jd(t,e,s),t=t.sibling}var et=null,Zt=!1;function Ks(t,e,s){for(s=s.child;s!==null;)ux(t,e,s),s=s.sibling}function ux(t,e,s){if(xs&&typeof xs.onCommitFiberUnmount=="function")try{xs.onCommitFiberUnmount(Cl,s)}catch{}switch(s.tag){case 5:lt||Sr(s,e);case 6:var n=et,r=Zt;et=null,Ks(t,e,s),et=n,Zt=r,et!==null&&(Zt?(t=et,s=s.stateNode,t.nodeType===8?t.parentNode.removeChild(s):t.removeChild(s)):et.removeChild(s.stateNode));break;case 18:et!==null&&(Zt?(t=et,s=s.stateNode,t.nodeType===8?Ec(t.parentNode,s):t.nodeType===1&&Ec(t,s),Xi(t)):Ec(et,s.stateNode));break;case 4:n=et,r=Zt,et=s.stateNode.containerInfo,Zt=!0,Ks(t,e,s),et=n,Zt=r;break;case 0:case 11:case 14:case 15:if(!lt&&(n=s.updateQueue,n!==null&&(n=n.lastEffect,n!==null))){r=n=n.next;do{var i=r,o=i.destroy;i=i.tag,o!==void 0&&(i&2||i&4)&&Kd(s,e,o),r=r.next}while(r!==n)}Ks(t,e,s);break;case 1:if(!lt&&(Sr(s,e),n=s.stateNode,typeof n.componentWillUnmount=="function"))try{n.props=s.memoizedProps,n.state=s.memoizedState,n.componentWillUnmount()}catch(l){Re(s,e,l)}Ks(t,e,s);break;case 21:Ks(t,e,s);break;case 22:s.mode&1?(lt=(n=lt)||s.memoizedState!==null,Ks(t,e,s),lt=n):Ks(t,e,s);break;default:Ks(t,e,s)}}function nm(t){var e=t.updateQueue;if(e!==null){t.updateQueue=null;var s=t.stateNode;s===null&&(s=t.stateNode=new Pw),e.forEach(function(n){var r=$w.bind(null,t,n);s.has(n)||(s.add(n),n.then(r,r))})}}function Jt(t,e){var s=e.deletions;if(s!==null)for(var n=0;n<s.length;n++){var r=s[n];try{var i=t,o=e,l=o;e:for(;l!==null;){switch(l.tag){case 5:et=l.stateNode,Zt=!1;break e;case 3:et=l.stateNode.containerInfo,Zt=!0;break e;case 4:et=l.stateNode.containerInfo,Zt=!0;break e}l=l.return}if(et===null)throw Error(I(160));ux(i,o,r),et=null,Zt=!1;var c=r.alternate;c!==null&&(c.return=null),r.return=null}catch(d){Re(r,e,d)}}if(e.subtreeFlags&12854)for(e=e.child;e!==null;)hx(e,t),e=e.sibling}function hx(t,e){var s=t.alternate,n=t.flags;switch(t.tag){case 0:case 11:case 14:case 15:if(Jt(e,t),ds(t),n&4){try{Oi(3,t,t.return),Ol(3,t)}catch(v){Re(t,t.return,v)}try{Oi(5,t,t.return)}catch(v){Re(t,t.return,v)}}break;case 1:Jt(e,t),ds(t),n&512&&s!==null&&Sr(s,s.return);break;case 5:if(Jt(e,t),ds(t),n&512&&s!==null&&Sr(s,s.return),t.flags&32){var r=t.stateNode;try{Gi(r,"")}catch(v){Re(t,t.return,v)}}if(n&4&&(r=t.stateNode,r!=null)){var i=t.memoizedProps,o=s!==null?s.memoizedProps:i,l=t.type,c=t.updateQueue;if(t.updateQueue=null,c!==null)try{l==="input"&&i.type==="radio"&&i.name!=null&&Dg(r,i),bd(l,o);var d=bd(l,i);for(o=0;o<c.length;o+=2){var u=c[o],h=c[o+1];u==="style"?$g(r,h):u==="dangerouslySetInnerHTML"?Ig(r,h):u==="children"?Gi(r,h):Tu(r,u,h,d)}switch(l){case"input":pd(r,i);break;case"textarea":Og(r,i);break;case"select":var f=r._wrapperState.wasMultiple;r._wrapperState.wasMultiple=!!i.multiple;var m=i.value;m!=null?Er(r,!!i.multiple,m,!1):f!==!!i.multiple&&(i.defaultValue!=null?Er(r,!!i.multiple,i.defaultValue,!0):Er(r,!!i.multiple,i.multiple?[]:"",!1))}r[na]=i}catch(v){Re(t,t.return,v)}}break;case 6:if(Jt(e,t),ds(t),n&4){if(t.stateNode===null)throw Error(I(162));r=t.stateNode,i=t.memoizedProps;try{r.nodeValue=i}catch(v){Re(t,t.return,v)}}break;case 3:if(Jt(e,t),ds(t),n&4&&s!==null&&s.memoizedState.isDehydrated)try{Xi(e.containerInfo)}catch(v){Re(t,t.return,v)}break;case 4:Jt(e,t),ds(t);break;case 13:Jt(e,t),ds(t),r=t.child,r.flags&8192&&(i=r.memoizedState!==null,r.stateNode.isHidden=i,!i||r.alternate!==null&&r.alternate.memoizedState!==null||(uh=ze())),n&4&&nm(t);break;case 22:if(u=s!==null&&s.memoizedState!==null,t.mode&1?(lt=(d=lt)||u,Jt(e,t),lt=d):Jt(e,t),ds(t),n&8192){if(d=t.memoizedState!==null,(t.stateNode.isHidden=d)&&!u&&t.mode&1)for(K=t,u=t.child;u!==null;){for(h=K=u;K!==null;){switch(f=K,m=f.child,f.tag){case 0:case 11:case 14:case 15:Oi(4,f,f.return);break;case 1:Sr(f,f.return);var p=f.stateNode;if(typeof p.componentWillUnmount=="function"){n=f,s=f.return;try{e=n,p.props=e.memoizedProps,p.state=e.memoizedState,p.componentWillUnmount()}catch(v){Re(n,s,v)}}break;case 5:Sr(f,f.return);break;case 22:if(f.memoizedState!==null){im(h);continue}}m!==null?(m.return=f,K=m):im(h)}u=u.sibling}e:for(u=null,h=t;;){if(h.tag===5){if(u===null){u=h;try{r=h.stateNode,d?(i=r.style,typeof i.setProperty=="function"?i.setProperty("display","none","important"):i.display="none"):(l=h.stateNode,c=h.memoizedProps.style,o=c!=null&&c.hasOwnProperty("display")?c.display:null,l.style.display=Fg("display",o))}catch(v){Re(t,t.return,v)}}}else if(h.tag===6){if(u===null)try{h.stateNode.nodeValue=d?"":h.memoizedProps}catch(v){Re(t,t.return,v)}}else if((h.tag!==22&&h.tag!==23||h.memoizedState===null||h===t)&&h.child!==null){h.child.return=h,h=h.child;continue}if(h===t)break e;for(;h.sibling===null;){if(h.return===null||h.return===t)break e;u===h&&(u=null),h=h.return}u===h&&(u=null),h.sibling.return=h.return,h=h.sibling}}break;case 19:Jt(e,t),ds(t),n&4&&nm(t);break;case 21:break;default:Jt(e,t),ds(t)}}function ds(t){var e=t.flags;if(e&2){try{e:{for(var s=t.return;s!==null;){if(dx(s)){var n=s;break e}s=s.return}throw Error(I(160))}switch(n.tag){case 5:var r=n.stateNode;n.flags&32&&(Gi(r,""),n.flags&=-33);var i=sm(t);Jd(t,i,r);break;case 3:case 4:var o=n.stateNode.containerInfo,l=sm(t);Yd(t,l,o);break;default:throw Error(I(161))}}catch(c){Re(t,t.return,c)}t.flags&=-3}e&4096&&(t.flags&=-4097)}function Lw(t,e,s){K=t,fx(t)}function fx(t,e,s){for(var n=(t.mode&1)!==0;K!==null;){var r=K,i=r.child;if(r.tag===22&&n){var o=r.memoizedState!==null||qa;if(!o){var l=r.alternate,c=l!==null&&l.memoizedState!==null||lt;l=qa;var d=lt;if(qa=o,(lt=c)&&!d)for(K=r;K!==null;)o=K,c=o.child,o.tag===22&&o.memoizedState!==null?am(r):c!==null?(c.return=o,K=c):am(r);for(;i!==null;)K=i,fx(i),i=i.sibling;K=r,qa=l,lt=d}rm(t)}else r.subtreeFlags&8772&&i!==null?(i.return=r,K=i):rm(t)}}function rm(t){for(;K!==null;){var e=K;if(e.flags&8772){var s=e.alternate;try{if(e.flags&8772)switch(e.tag){case 0:case 11:case 15:lt||Ol(5,e);break;case 1:var n=e.stateNode;if(e.flags&4&&!lt)if(s===null)n.componentDidMount();else{var r=e.elementType===e.type?s.memoizedProps:Xt(e.type,s.memoizedProps);n.componentDidUpdate(r,s.memoizedState,n.__reactInternalSnapshotBeforeUpdate)}var i=e.updateQueue;i!==null&&Bf(e,i,n);break;case 3:var o=e.updateQueue;if(o!==null){if(s=null,e.child!==null)switch(e.child.tag){case 5:s=e.child.stateNode;break;case 1:s=e.child.stateNode}Bf(e,o,s)}break;case 5:var l=e.stateNode;if(s===null&&e.flags&4){s=l;var c=e.memoizedProps;switch(e.type){case"button":case"input":case"select":case"textarea":c.autoFocus&&s.focus();break;case"img":c.src&&(s.src=c.src)}}break;case 6:break;case 4:break;case 12:break;case 13:if(e.memoizedState===null){var d=e.alternate;if(d!==null){var u=d.memoizedState;if(u!==null){var h=u.dehydrated;h!==null&&Xi(h)}}}break;case 19:case 17:case 21:case 22:case 23:case 25:break;default:throw Error(I(163))}lt||e.flags&512&&Gd(e)}catch(f){Re(e,e.return,f)}}if(e===t){K=null;break}if(s=e.sibling,s!==null){s.return=e.return,K=s;break}K=e.return}}function im(t){for(;K!==null;){var e=K;if(e===t){K=null;break}var s=e.sibling;if(s!==null){s.return=e.return,K=s;break}K=e.return}}function am(t){for(;K!==null;){var e=K;try{switch(e.tag){case 0:case 11:case 15:var s=e.return;try{Ol(4,e)}catch(c){Re(e,s,c)}break;case 1:var n=e.stateNode;if(typeof n.componentDidMount=="function"){var r=e.return;try{n.componentDidMount()}catch(c){Re(e,r,c)}}var i=e.return;try{Gd(e)}catch(c){Re(e,i,c)}break;case 5:var o=e.return;try{Gd(e)}catch(c){Re(e,o,c)}}}catch(c){Re(e,e.return,c)}if(e===t){K=null;break}var l=e.sibling;if(l!==null){l.return=e.return,K=l;break}K=e.return}}var Tw=Math.ceil,ll=qs.ReactCurrentDispatcher,ch=qs.ReactCurrentOwner,qt=qs.ReactCurrentBatchConfig,pe=0,Qe=null,He=null,tt=0,Lt=0,Cr=kn(0),Ke=0,ca=null,Xn=0,Rl=0,dh=0,Ri=null,xt=null,uh=0,Br=1/0,Ls=null,cl=!1,Qd=null,gn=null,Ka=!1,nn=null,dl=0,Ii=0,Xd=null,Ao=-1,Lo=0;function ht(){return pe&6?ze():Ao!==-1?Ao:Ao=ze()}function xn(t){return t.mode&1?pe&2&&tt!==0?tt&-tt:pw.transition!==null?(Lo===0&&(Lo=Qg()),Lo):(t=ve,t!==0||(t=window.event,t=t===void 0?16:r0(t.type)),t):1}function rs(t,e,s,n){if(50<Ii)throw Ii=0,Xd=null,Error(I(185));_a(t,s,n),(!(pe&2)||t!==Qe)&&(t===Qe&&(!(pe&2)&&(Rl|=s),Ke===4&&en(t,tt)),jt(t,n),s===1&&pe===0&&!(e.mode&1)&&(Br=ze()+500,Tl&&Sn()))}function jt(t,e){var s=t.callbackNode;pb(t,e);var n=Ko(t,t===Qe?tt:0);if(n===0)s!==null&&pf(s),t.callbackNode=null,t.callbackPriority=0;else if(e=n&-n,t.callbackPriority!==e){if(s!=null&&pf(s),e===1)t.tag===0?mw(om.bind(null,t)):j0(om.bind(null,t)),dw(function(){!(pe&6)&&Sn()}),s=null;else{switch(Xg(n)){case 1:s=Iu;break;case 4:s=Yg;break;case 16:s=qo;break;case 536870912:s=Jg;break;default:s=qo}s=wx(s,mx.bind(null,t))}t.callbackPriority=e,t.callbackNode=s}}function mx(t,e){if(Ao=-1,Lo=0,pe&6)throw Error(I(327));var s=t.callbackNode;if(Mr()&&t.callbackNode!==s)return null;var n=Ko(t,t===Qe?tt:0);if(n===0)return null;if(n&30||n&t.expiredLanes||e)e=ul(t,n);else{e=n;var r=pe;pe|=2;var i=gx();(Qe!==t||tt!==e)&&(Ls=null,Br=ze()+500,Wn(t,e));do try{Ow();break}catch(l){px(t,l)}while(1);Ju(),ll.current=i,pe=r,He!==null?e=0:(Qe=null,tt=0,e=Ke)}if(e!==0){if(e===2&&(r=kd(t),r!==0&&(n=r,e=Zd(t,r))),e===1)throw s=ca,Wn(t,0),en(t,n),jt(t,ze()),s;if(e===6)en(t,n);else{if(r=t.current.alternate,!(n&30)&&!Mw(r)&&(e=ul(t,n),e===2&&(i=kd(t),i!==0&&(n=i,e=Zd(t,i))),e===1))throw s=ca,Wn(t,0),en(t,n),jt(t,ze()),s;switch(t.finishedWork=r,t.finishedLanes=n,e){case 0:case 1:throw Error(I(345));case 2:On(t,xt,Ls);break;case 3:if(en(t,n),(n&130023424)===n&&(e=uh+500-ze(),10<e)){if(Ko(t,0)!==0)break;if(r=t.suspendedLanes,(r&n)!==n){ht(),t.pingedLanes|=t.suspendedLanes&r;break}t.timeoutHandle=Md(On.bind(null,t,xt,Ls),e);break}On(t,xt,Ls);break;case 4:if(en(t,n),(n&4194240)===n)break;for(e=t.eventTimes,r=-1;0<n;){var o=31-ns(n);i=1<<o,o=e[o],o>r&&(r=o),n&=~i}if(n=r,n=ze()-n,n=(120>n?120:480>n?480:1080>n?1080:1920>n?1920:3e3>n?3e3:4320>n?4320:1960*Tw(n/1960))-n,10<n){t.timeoutHandle=Md(On.bind(null,t,xt,Ls),n);break}On(t,xt,Ls);break;case 5:On(t,xt,Ls);break;default:throw Error(I(329))}}}return jt(t,ze()),t.callbackNode===s?mx.bind(null,t):null}function Zd(t,e){var s=Ri;return t.current.memoizedState.isDehydrated&&(Wn(t,e).flags|=256),t=ul(t,e),t!==2&&(e=xt,xt=s,e!==null&&eu(e)),t}function eu(t){xt===null?xt=t:xt.push.apply(xt,t)}function Mw(t){for(var e=t;;){if(e.flags&16384){var s=e.updateQueue;if(s!==null&&(s=s.stores,s!==null))for(var n=0;n<s.length;n++){var r=s[n],i=r.getSnapshot;r=r.value;try{if(!is(i(),r))return!1}catch{return!1}}}if(s=e.child,e.subtreeFlags&16384&&s!==null)s.return=e,e=s;else{if(e===t)break;for(;e.sibling===null;){if(e.return===null||e.return===t)return!0;e=e.return}e.sibling.return=e.return,e=e.sibling}}return!0}function en(t,e){for(e&=~dh,e&=~Rl,t.suspendedLanes|=e,t.pingedLanes&=~e,t=t.expirationTimes;0<e;){var s=31-ns(e),n=1<<s;t[s]=-1,e&=~n}}function om(t){if(pe&6)throw Error(I(327));Mr();var e=Ko(t,0);if(!(e&1))return jt(t,ze()),null;var s=ul(t,e);if(t.tag!==0&&s===2){var n=kd(t);n!==0&&(e=n,s=Zd(t,n))}if(s===1)throw s=ca,Wn(t,0),en(t,e),jt(t,ze()),s;if(s===6)throw Error(I(345));return t.finishedWork=t.current.alternate,t.finishedLanes=e,On(t,xt,Ls),jt(t,ze()),null}function hh(t,e){var s=pe;pe|=1;try{return t(e)}finally{pe=s,pe===0&&(Br=ze()+500,Tl&&Sn())}}function Zn(t){nn!==null&&nn.tag===0&&!(pe&6)&&Mr();var e=pe;pe|=1;var s=qt.transition,n=ve;try{if(qt.transition=null,ve=1,t)return t()}finally{ve=n,qt.transition=s,pe=e,!(pe&6)&&Sn()}}function fh(){Lt=Cr.current,Ce(Cr)}function Wn(t,e){t.finishedWork=null,t.finishedLanes=0;var s=t.timeoutHandle;if(s!==-1&&(t.timeoutHandle=-1,cw(s)),He!==null)for(s=He.return;s!==null;){var n=s;switch(Ku(n),n.tag){case 1:n=n.type.childContextTypes,n!=null&&Xo();break;case 3:zr(),Ce(wt),Ce(ct),sh();break;case 5:th(n);break;case 4:zr();break;case 13:Ce(Te);break;case 19:Ce(Te);break;case 10:Qu(n.type._context);break;case 22:case 23:fh()}s=s.return}if(Qe=t,He=t=yn(t.current,null),tt=Lt=e,Ke=0,ca=null,dh=Rl=Xn=0,xt=Ri=null,Un!==null){for(e=0;e<Un.length;e++)if(s=Un[e],n=s.interleaved,n!==null){s.interleaved=null;var r=n.next,i=s.pending;if(i!==null){var o=i.next;i.next=r,n.next=o}s.pending=n}Un=null}return t}function px(t,e){do{var s=He;try{if(Ju(),Co.current=ol,al){for(var n=Me.memoizedState;n!==null;){var r=n.queue;r!==null&&(r.pending=null),n=n.next}al=!1}if(Qn=0,Je=qe=Me=null,Di=!1,aa=0,ch.current=null,s===null||s.return===null){Ke=1,ca=e,He=null;break}e:{var i=t,o=s.return,l=s,c=e;if(e=tt,l.flags|=32768,c!==null&&typeof c=="object"&&typeof c.then=="function"){var d=c,u=l,h=u.tag;if(!(u.mode&1)&&(h===0||h===11||h===15)){var f=u.alternate;f?(u.updateQueue=f.updateQueue,u.memoizedState=f.memoizedState,u.lanes=f.lanes):(u.updateQueue=null,u.memoizedState=null)}var m=Gf(o);if(m!==null){m.flags&=-257,Yf(m,o,l,i,e),m.mode&1&&Kf(i,d,e),e=m,c=d;var p=e.updateQueue;if(p===null){var v=new Set;v.add(c),e.updateQueue=v}else p.add(c);break e}else{if(!(e&1)){Kf(i,d,e),mh();break e}c=Error(I(426))}}else if(Pe&&l.mode&1){var g=Gf(o);if(g!==null){!(g.flags&65536)&&(g.flags|=256),Yf(g,o,l,i,e),Gu(Ur(c,l));break e}}i=c=Ur(c,l),Ke!==4&&(Ke=2),Ri===null?Ri=[i]:Ri.push(i),i=o;do{switch(i.tag){case 3:i.flags|=65536,e&=-e,i.lanes|=e;var x=X0(i,c,e);Uf(i,x);break e;case 1:l=c;var y=i.type,b=i.stateNode;if(!(i.flags&128)&&(typeof y.getDerivedStateFromError=="function"||b!==null&&typeof b.componentDidCatch=="function"&&(gn===null||!gn.has(b)))){i.flags|=65536,e&=-e,i.lanes|=e;var N=Z0(i,l,e);Uf(i,N);break e}}i=i.return}while(i!==null)}yx(s)}catch(_){e=_,He===s&&s!==null&&(He=s=s.return);continue}break}while(1)}function gx(){var t=ll.current;return ll.current=ol,t===null?ol:t}function mh(){(Ke===0||Ke===3||Ke===2)&&(Ke=4),Qe===null||!(Xn&268435455)&&!(Rl&268435455)||en(Qe,tt)}function ul(t,e){var s=pe;pe|=2;var n=gx();(Qe!==t||tt!==e)&&(Ls=null,Wn(t,e));do try{Dw();break}catch(r){px(t,r)}while(1);if(Ju(),pe=s,ll.current=n,He!==null)throw Error(I(261));return Qe=null,tt=0,Ke}function Dw(){for(;He!==null;)xx(He)}function Ow(){for(;He!==null&&!ab();)xx(He)}function xx(t){var e=bx(t.alternate,t,Lt);t.memoizedProps=t.pendingProps,e===null?yx(t):He=e,ch.current=null}function yx(t){var e=t;do{var s=e.alternate;if(t=e.return,e.flags&32768){if(s=Ew(s,e),s!==null){s.flags&=32767,He=s;return}if(t!==null)t.flags|=32768,t.subtreeFlags=0,t.deletions=null;else{Ke=6,He=null;return}}else if(s=Cw(s,e,Lt),s!==null){He=s;return}if(e=e.sibling,e!==null){He=e;return}He=e=t}while(e!==null);Ke===0&&(Ke=5)}function On(t,e,s){var n=ve,r=qt.transition;try{qt.transition=null,ve=1,Rw(t,e,s,n)}finally{qt.transition=r,ve=n}return null}function Rw(t,e,s,n){do Mr();while(nn!==null);if(pe&6)throw Error(I(327));s=t.finishedWork;var r=t.finishedLanes;if(s===null)return null;if(t.finishedWork=null,t.finishedLanes=0,s===t.current)throw Error(I(177));t.callbackNode=null,t.callbackPriority=0;var i=s.lanes|s.childLanes;if(gb(t,i),t===Qe&&(He=Qe=null,tt=0),!(s.subtreeFlags&2064)&&!(s.flags&2064)||Ka||(Ka=!0,wx(qo,function(){return Mr(),null})),i=(s.flags&15990)!==0,s.subtreeFlags&15990||i){i=qt.transition,qt.transition=null;var o=ve;ve=1;var l=pe;pe|=4,ch.current=null,Aw(t,s),hx(s,t),sw(Ld),Go=!!Ad,Ld=Ad=null,t.current=s,Lw(s),ob(),pe=l,ve=o,qt.transition=i}else t.current=s;if(Ka&&(Ka=!1,nn=t,dl=r),i=t.pendingLanes,i===0&&(gn=null),db(s.stateNode),jt(t,ze()),e!==null)for(n=t.onRecoverableError,s=0;s<e.length;s++)r=e[s],n(r.value,{componentStack:r.stack,digest:r.digest});if(cl)throw cl=!1,t=Qd,Qd=null,t;return dl&1&&t.tag!==0&&Mr(),i=t.pendingLanes,i&1?t===Xd?Ii++:(Ii=0,Xd=t):Ii=0,Sn(),null}function Mr(){if(nn!==null){var t=Xg(dl),e=qt.transition,s=ve;try{if(qt.transition=null,ve=16>t?16:t,nn===null)var n=!1;else{if(t=nn,nn=null,dl=0,pe&6)throw Error(I(331));var r=pe;for(pe|=4,K=t.current;K!==null;){var i=K,o=i.child;if(K.flags&16){var l=i.deletions;if(l!==null){for(var c=0;c<l.length;c++){var d=l[c];for(K=d;K!==null;){var u=K;switch(u.tag){case 0:case 11:case 15:Oi(8,u,i)}var h=u.child;if(h!==null)h.return=u,K=h;else for(;K!==null;){u=K;var f=u.sibling,m=u.return;if(cx(u),u===d){K=null;break}if(f!==null){f.return=m,K=f;break}K=m}}}var p=i.alternate;if(p!==null){var v=p.child;if(v!==null){p.child=null;do{var g=v.sibling;v.sibling=null,v=g}while(v!==null)}}K=i}}if(i.subtreeFlags&2064&&o!==null)o.return=i,K=o;else e:for(;K!==null;){if(i=K,i.flags&2048)switch(i.tag){case 0:case 11:case 15:Oi(9,i,i.return)}var x=i.sibling;if(x!==null){x.return=i.return,K=x;break e}K=i.return}}var y=t.current;for(K=y;K!==null;){o=K;var b=o.child;if(o.subtreeFlags&2064&&b!==null)b.return=o,K=b;else e:for(o=y;K!==null;){if(l=K,l.flags&2048)try{switch(l.tag){case 0:case 11:case 15:Ol(9,l)}}catch(_){Re(l,l.return,_)}if(l===o){K=null;break e}var N=l.sibling;if(N!==null){N.return=l.return,K=N;break e}K=l.return}}if(pe=r,Sn(),xs&&typeof xs.onPostCommitFiberRoot=="function")try{xs.onPostCommitFiberRoot(Cl,t)}catch{}n=!0}return n}finally{ve=s,qt.transition=e}}return!1}function lm(t,e,s){e=Ur(s,e),e=X0(t,e,1),t=pn(t,e,1),e=ht(),t!==null&&(_a(t,1,e),jt(t,e))}function Re(t,e,s){if(t.tag===3)lm(t,t,s);else for(;e!==null;){if(e.tag===3){lm(e,t,s);break}else if(e.tag===1){var n=e.stateNode;if(typeof e.type.getDerivedStateFromError=="function"||typeof n.componentDidCatch=="function"&&(gn===null||!gn.has(n))){t=Ur(s,t),t=Z0(e,t,1),e=pn(e,t,1),t=ht(),e!==null&&(_a(e,1,t),jt(e,t));break}}e=e.return}}function Iw(t,e,s){var n=t.pingCache;n!==null&&n.delete(e),e=ht(),t.pingedLanes|=t.suspendedLanes&s,Qe===t&&(tt&s)===s&&(Ke===4||Ke===3&&(tt&130023424)===tt&&500>ze()-uh?Wn(t,0):dh|=s),jt(t,e)}function vx(t,e){e===0&&(t.mode&1?(e=Ia,Ia<<=1,!(Ia&130023424)&&(Ia=4194304)):e=1);var s=ht();t=Hs(t,e),t!==null&&(_a(t,e,s),jt(t,s))}function Fw(t){var e=t.memoizedState,s=0;e!==null&&(s=e.retryLane),vx(t,s)}function $w(t,e){var s=0;switch(t.tag){case 13:var n=t.stateNode,r=t.memoizedState;r!==null&&(s=r.retryLane);break;case 19:n=t.stateNode;break;default:throw Error(I(314))}n!==null&&n.delete(e),vx(t,s)}var bx;bx=function(t,e,s){if(t!==null)if(t.memoizedProps!==e.pendingProps||wt.current)bt=!0;else{if(!(t.lanes&s)&&!(e.flags&128))return bt=!1,Sw(t,e,s);bt=!!(t.flags&131072)}else bt=!1,Pe&&e.flags&1048576&&N0(e,tl,e.index);switch(e.lanes=0,e.tag){case 2:var n=e.type;Po(t,e),t=e.pendingProps;var r=Ir(e,ct.current);Tr(e,s),r=rh(null,e,n,t,r,s);var i=ih();return e.flags|=1,typeof r=="object"&&r!==null&&typeof r.render=="function"&&r.$$typeof===void 0?(e.tag=1,e.memoizedState=null,e.updateQueue=null,_t(n)?(i=!0,Zo(e)):i=!1,e.memoizedState=r.state!==null&&r.state!==void 0?r.state:null,Zu(e),r.updater=Dl,e.stateNode=r,r._reactInternals=e,zd(e,n,t,s),e=Hd(null,e,n,!0,i,s)):(e.tag=0,Pe&&i&&qu(e),ut(null,e,r,s),e=e.child),e;case 16:n=e.elementType;e:{switch(Po(t,e),t=e.pendingProps,r=n._init,n=r(n._payload),e.type=n,r=e.tag=Uw(n),t=Xt(n,t),r){case 0:e=Bd(null,e,n,t,s);break e;case 1:e=Xf(null,e,n,t,s);break e;case 11:e=Jf(null,e,n,t,s);break e;case 14:e=Qf(null,e,n,Xt(n.type,t),s);break e}throw Error(I(306,n,""))}return e;case 0:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Xt(n,r),Bd(t,e,n,r,s);case 1:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Xt(n,r),Xf(t,e,n,r,s);case 3:e:{if(nx(e),t===null)throw Error(I(387));n=e.pendingProps,i=e.memoizedState,r=i.element,A0(t,e),rl(e,n,null,s);var o=e.memoizedState;if(n=o.element,i.isDehydrated)if(i={element:n,isDehydrated:!1,cache:o.cache,pendingSuspenseBoundaries:o.pendingSuspenseBoundaries,transitions:o.transitions},e.updateQueue.baseState=i,e.memoizedState=i,e.flags&256){r=Ur(Error(I(423)),e),e=Zf(t,e,n,s,r);break e}else if(n!==r){r=Ur(Error(I(424)),e),e=Zf(t,e,n,s,r);break e}else for(Mt=mn(e.stateNode.containerInfo.firstChild),Rt=e,Pe=!0,ss=null,s=E0(e,null,n,s),e.child=s;s;)s.flags=s.flags&-3|4096,s=s.sibling;else{if(Fr(),n===r){e=Vs(t,e,s);break e}ut(t,e,n,s)}e=e.child}return e;case 5:return L0(e),t===null&&Id(e),n=e.type,r=e.pendingProps,i=t!==null?t.memoizedProps:null,o=r.children,Td(n,r)?o=null:i!==null&&Td(n,i)&&(e.flags|=32),sx(t,e),ut(t,e,o,s),e.child;case 6:return t===null&&Id(e),null;case 13:return rx(t,e,s);case 4:return eh(e,e.stateNode.containerInfo),n=e.pendingProps,t===null?e.child=$r(e,null,n,s):ut(t,e,n,s),e.child;case 11:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Xt(n,r),Jf(t,e,n,r,s);case 7:return ut(t,e,e.pendingProps,s),e.child;case 8:return ut(t,e,e.pendingProps.children,s),e.child;case 12:return ut(t,e,e.pendingProps.children,s),e.child;case 10:e:{if(n=e.type._context,r=e.pendingProps,i=e.memoizedProps,o=r.value,je(sl,n._currentValue),n._currentValue=o,i!==null)if(is(i.value,o)){if(i.children===r.children&&!wt.current){e=Vs(t,e,s);break e}}else for(i=e.child,i!==null&&(i.return=e);i!==null;){var l=i.dependencies;if(l!==null){o=i.child;for(var c=l.firstContext;c!==null;){if(c.context===n){if(i.tag===1){c=$s(-1,s&-s),c.tag=2;var d=i.updateQueue;if(d!==null){d=d.shared;var u=d.pending;u===null?c.next=c:(c.next=u.next,u.next=c),d.pending=c}}i.lanes|=s,c=i.alternate,c!==null&&(c.lanes|=s),Fd(i.return,s,e),l.lanes|=s;break}c=c.next}}else if(i.tag===10)o=i.type===e.type?null:i.child;else if(i.tag===18){if(o=i.return,o===null)throw Error(I(341));o.lanes|=s,l=o.alternate,l!==null&&(l.lanes|=s),Fd(o,s,e),o=i.sibling}else o=i.child;if(o!==null)o.return=i;else for(o=i;o!==null;){if(o===e){o=null;break}if(i=o.sibling,i!==null){i.return=o.return,o=i;break}o=o.return}i=o}ut(t,e,r.children,s),e=e.child}return e;case 9:return r=e.type,n=e.pendingProps.children,Tr(e,s),r=Gt(r),n=n(r),e.flags|=1,ut(t,e,n,s),e.child;case 14:return n=e.type,r=Xt(n,e.pendingProps),r=Xt(n.type,r),Qf(t,e,n,r,s);case 15:return ex(t,e,e.type,e.pendingProps,s);case 17:return n=e.type,r=e.pendingProps,r=e.elementType===n?r:Xt(n,r),Po(t,e),e.tag=1,_t(n)?(t=!0,Zo(e)):t=!1,Tr(e,s),Q0(e,n,r),zd(e,n,r,s),Hd(null,e,n,!0,t,s);case 19:return ix(t,e,s);case 22:return tx(t,e,s)}throw Error(I(156,e.tag))};function wx(t,e){return Gg(t,e)}function zw(t,e,s,n){this.tag=t,this.key=s,this.sibling=this.child=this.return=this.stateNode=this.type=this.elementType=null,this.index=0,this.ref=null,this.pendingProps=e,this.dependencies=this.memoizedState=this.updateQueue=this.memoizedProps=null,this.mode=n,this.subtreeFlags=this.flags=0,this.deletions=null,this.childLanes=this.lanes=0,this.alternate=null}function Vt(t,e,s,n){return new zw(t,e,s,n)}function ph(t){return t=t.prototype,!(!t||!t.isReactComponent)}function Uw(t){if(typeof t=="function")return ph(t)?1:0;if(t!=null){if(t=t.$$typeof,t===Du)return 11;if(t===Ou)return 14}return 2}function yn(t,e){var s=t.alternate;return s===null?(s=Vt(t.tag,e,t.key,t.mode),s.elementType=t.elementType,s.type=t.type,s.stateNode=t.stateNode,s.alternate=t,t.alternate=s):(s.pendingProps=e,s.type=t.type,s.flags=0,s.subtreeFlags=0,s.deletions=null),s.flags=t.flags&14680064,s.childLanes=t.childLanes,s.lanes=t.lanes,s.child=t.child,s.memoizedProps=t.memoizedProps,s.memoizedState=t.memoizedState,s.updateQueue=t.updateQueue,e=t.dependencies,s.dependencies=e===null?null:{lanes:e.lanes,firstContext:e.firstContext},s.sibling=t.sibling,s.index=t.index,s.ref=t.ref,s}function To(t,e,s,n,r,i){var o=2;if(n=t,typeof t=="function")ph(t)&&(o=1);else if(typeof t=="string")o=5;else e:switch(t){case xr:return qn(s.children,r,i,e);case Mu:o=8,r|=8;break;case dd:return t=Vt(12,s,e,r|2),t.elementType=dd,t.lanes=i,t;case ud:return t=Vt(13,s,e,r),t.elementType=ud,t.lanes=i,t;case hd:return t=Vt(19,s,e,r),t.elementType=hd,t.lanes=i,t;case Lg:return Il(s,r,i,e);default:if(typeof t=="object"&&t!==null)switch(t.$$typeof){case Pg:o=10;break e;case Ag:o=9;break e;case Du:o=11;break e;case Ou:o=14;break e;case Js:o=16,n=null;break e}throw Error(I(130,t==null?t:typeof t,""))}return e=Vt(o,s,e,r),e.elementType=t,e.type=n,e.lanes=i,e}function qn(t,e,s,n){return t=Vt(7,t,n,e),t.lanes=s,t}function Il(t,e,s,n){return t=Vt(22,t,n,e),t.elementType=Lg,t.lanes=s,t.stateNode={isHidden:!1},t}function Rc(t,e,s){return t=Vt(6,t,null,e),t.lanes=s,t}function Ic(t,e,s){return e=Vt(4,t.children!==null?t.children:[],t.key,e),e.lanes=s,e.stateNode={containerInfo:t.containerInfo,pendingChildren:null,implementation:t.implementation},e}function Bw(t,e,s,n,r){this.tag=e,this.containerInfo=t,this.finishedWork=this.pingCache=this.current=this.pendingChildren=null,this.timeoutHandle=-1,this.callbackNode=this.pendingContext=this.context=null,this.callbackPriority=0,this.eventTimes=xc(0),this.expirationTimes=xc(-1),this.entangledLanes=this.finishedLanes=this.mutableReadLanes=this.expiredLanes=this.pingedLanes=this.suspendedLanes=this.pendingLanes=0,this.entanglements=xc(0),this.identifierPrefix=n,this.onRecoverableError=r,this.mutableSourceEagerHydrationData=null}function gh(t,e,s,n,r,i,o,l,c){return t=new Bw(t,e,s,l,c),e===1?(e=1,i===!0&&(e|=8)):e=0,i=Vt(3,null,null,e),t.current=i,i.stateNode=t,i.memoizedState={element:n,isDehydrated:s,cache:null,transitions:null,pendingSuspenseBoundaries:null},Zu(i),t}function Hw(t,e,s){var n=3<arguments.length&&arguments[3]!==void 0?arguments[3]:null;return{$$typeof:gr,key:n==null?null:""+n,children:t,containerInfo:e,implementation:s}}function _x(t){if(!t)return wn;t=t._reactInternals;e:{if(ir(t)!==t||t.tag!==1)throw Error(I(170));var e=t;do{switch(e.tag){case 3:e=e.stateNode.context;break e;case 1:if(_t(e.type)){e=e.stateNode.__reactInternalMemoizedMergedChildContext;break e}}e=e.return}while(e!==null);throw Error(I(171))}if(t.tag===1){var s=t.type;if(_t(s))return _0(t,s,e)}return e}function jx(t,e,s,n,r,i,o,l,c){return t=gh(s,n,!0,t,r,i,o,l,c),t.context=_x(null),s=t.current,n=ht(),r=xn(s),i=$s(n,r),i.callback=e??null,pn(s,i,r),t.current.lanes=r,_a(t,r,n),jt(t,n),t}function Fl(t,e,s,n){var r=e.current,i=ht(),o=xn(r);return s=_x(s),e.context===null?e.context=s:e.pendingContext=s,e=$s(i,o),e.payload={element:t},n=n===void 0?null:n,n!==null&&(e.callback=n),t=pn(r,e,o),t!==null&&(rs(t,r,o,i),So(t,r,o)),o}function hl(t){if(t=t.current,!t.child)return null;switch(t.child.tag){case 5:return t.child.stateNode;default:return t.child.stateNode}}function cm(t,e){if(t=t.memoizedState,t!==null&&t.dehydrated!==null){var s=t.retryLane;t.retryLane=s!==0&&s<e?s:e}}function xh(t,e){cm(t,e),(t=t.alternate)&&cm(t,e)}function Vw(){return null}var Nx=typeof reportError=="function"?reportError:function(t){console.error(t)};function yh(t){this._internalRoot=t}$l.prototype.render=yh.prototype.render=function(t){var e=this._internalRoot;if(e===null)throw Error(I(409));Fl(t,e,null,null)};$l.prototype.unmount=yh.prototype.unmount=function(){var t=this._internalRoot;if(t!==null){this._internalRoot=null;var e=t.containerInfo;Zn(function(){Fl(null,t,null,null)}),e[Bs]=null}};function $l(t){this._internalRoot=t}$l.prototype.unstable_scheduleHydration=function(t){if(t){var e=t0();t={blockedOn:null,target:t,priority:e};for(var s=0;s<Zs.length&&e!==0&&e<Zs[s].priority;s++);Zs.splice(s,0,t),s===0&&n0(t)}};function vh(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11)}function zl(t){return!(!t||t.nodeType!==1&&t.nodeType!==9&&t.nodeType!==11&&(t.nodeType!==8||t.nodeValue!==" react-mount-point-unstable "))}function dm(){}function Ww(t,e,s,n,r){if(r){if(typeof n=="function"){var i=n;n=function(){var d=hl(o);i.call(d)}}var o=jx(e,n,t,0,null,!1,!1,"",dm);return t._reactRootContainer=o,t[Bs]=o.current,ta(t.nodeType===8?t.parentNode:t),Zn(),o}for(;r=t.lastChild;)t.removeChild(r);if(typeof n=="function"){var l=n;n=function(){var d=hl(c);l.call(d)}}var c=gh(t,0,!1,null,null,!1,!1,"",dm);return t._reactRootContainer=c,t[Bs]=c.current,ta(t.nodeType===8?t.parentNode:t),Zn(function(){Fl(e,c,s,n)}),c}function Ul(t,e,s,n,r){var i=s._reactRootContainer;if(i){var o=i;if(typeof r=="function"){var l=r;r=function(){var c=hl(o);l.call(c)}}Fl(e,o,t,r)}else o=Ww(s,e,t,r,n);return hl(o)}Zg=function(t){switch(t.tag){case 3:var e=t.stateNode;if(e.current.memoizedState.isDehydrated){var s=ji(e.pendingLanes);s!==0&&(Fu(e,s|1),jt(e,ze()),!(pe&6)&&(Br=ze()+500,Sn()))}break;case 13:Zn(function(){var n=Hs(t,1);if(n!==null){var r=ht();rs(n,t,1,r)}}),xh(t,1)}};$u=function(t){if(t.tag===13){var e=Hs(t,134217728);if(e!==null){var s=ht();rs(e,t,134217728,s)}xh(t,134217728)}};e0=function(t){if(t.tag===13){var e=xn(t),s=Hs(t,e);if(s!==null){var n=ht();rs(s,t,e,n)}xh(t,e)}};t0=function(){return ve};s0=function(t,e){var s=ve;try{return ve=t,e()}finally{ve=s}};_d=function(t,e,s){switch(e){case"input":if(pd(t,s),e=s.name,s.type==="radio"&&e!=null){for(s=t;s.parentNode;)s=s.parentNode;for(s=s.querySelectorAll("input[name="+JSON.stringify(""+e)+'][type="radio"]'),e=0;e<s.length;e++){var n=s[e];if(n!==t&&n.form===t.form){var r=Ll(n);if(!r)throw Error(I(90));Mg(n),pd(n,r)}}}break;case"textarea":Og(t,s);break;case"select":e=s.value,e!=null&&Er(t,!!s.multiple,e,!1)}};Bg=hh;Hg=Zn;var qw={usingClientEntryPoint:!1,Events:[Na,wr,Ll,zg,Ug,hh]},ui={findFiberByHostInstance:zn,bundleType:0,version:"18.3.1",rendererPackageName:"react-dom"},Kw={bundleType:ui.bundleType,version:ui.version,rendererPackageName:ui.rendererPackageName,rendererConfig:ui.rendererConfig,overrideHookState:null,overrideHookStateDeletePath:null,overrideHookStateRenamePath:null,overrideProps:null,overridePropsDeletePath:null,overridePropsRenamePath:null,setErrorHandler:null,setSuspenseHandler:null,scheduleUpdate:null,currentDispatcherRef:qs.ReactCurrentDispatcher,findHostInstanceByFiber:function(t){return t=qg(t),t===null?null:t.stateNode},findFiberByHostInstance:ui.findFiberByHostInstance||Vw,findHostInstancesForRefresh:null,scheduleRefresh:null,scheduleRoot:null,setRefreshHandler:null,getCurrentFiber:null,reconcilerVersion:"18.3.1-next-f1338f8080-20240426"};if(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__<"u"){var Ga=__REACT_DEVTOOLS_GLOBAL_HOOK__;if(!Ga.isDisabled&&Ga.supportsFiber)try{Cl=Ga.inject(Kw),xs=Ga}catch{}}$t.__SECRET_INTERNALS_DO_NOT_USE_OR_YOU_WILL_BE_FIRED=qw;$t.createPortal=function(t,e){var s=2<arguments.length&&arguments[2]!==void 0?arguments[2]:null;if(!vh(e))throw Error(I(200));return Hw(t,e,null,s)};$t.createRoot=function(t,e){if(!vh(t))throw Error(I(299));var s=!1,n="",r=Nx;return e!=null&&(e.unstable_strictMode===!0&&(s=!0),e.identifierPrefix!==void 0&&(n=e.identifierPrefix),e.onRecoverableError!==void 0&&(r=e.onRecoverableError)),e=gh(t,1,!1,null,null,s,!1,n,r),t[Bs]=e.current,ta(t.nodeType===8?t.parentNode:t),new yh(e)};$t.findDOMNode=function(t){if(t==null)return null;if(t.nodeType===1)return t;var e=t._reactInternals;if(e===void 0)throw typeof t.render=="function"?Error(I(188)):(t=Object.keys(t).join(","),Error(I(268,t)));return t=qg(e),t=t===null?null:t.stateNode,t};$t.flushSync=function(t){return Zn(t)};$t.hydrate=function(t,e,s){if(!zl(e))throw Error(I(200));return Ul(null,t,e,!0,s)};$t.hydrateRoot=function(t,e,s){if(!vh(t))throw Error(I(405));var n=s!=null&&s.hydratedSources||null,r=!1,i="",o=Nx;if(s!=null&&(s.unstable_strictMode===!0&&(r=!0),s.identifierPrefix!==void 0&&(i=s.identifierPrefix),s.onRecoverableError!==void 0&&(o=s.onRecoverableError)),e=jx(e,null,t,1,s??null,r,!1,i,o),t[Bs]=e.current,ta(t),n)for(t=0;t<n.length;t++)s=n[t],r=s._getVersion,r=r(s._source),e.mutableSourceEagerHydrationData==null?e.mutableSourceEagerHydrationData=[s,r]:e.mutableSourceEagerHydrationData.push(s,r);return new $l(e)};$t.render=function(t,e,s){if(!zl(e))throw Error(I(200));return Ul(null,t,e,!1,s)};$t.unmountComponentAtNode=function(t){if(!zl(t))throw Error(I(40));return t._reactRootContainer?(Zn(function(){Ul(null,null,t,!1,function(){t._reactRootContainer=null,t[Bs]=null})}),!0):!1};$t.unstable_batchedUpdates=hh;$t.unstable_renderSubtreeIntoContainer=function(t,e,s,n){if(!zl(s))throw Error(I(200));if(t==null||t._reactInternals===void 0)throw Error(I(38));return Ul(t,e,s,!1,n)};$t.version="18.3.1-next-f1338f8080-20240426";function kx(){if(!(typeof __REACT_DEVTOOLS_GLOBAL_HOOK__>"u"||typeof __REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE!="function"))try{__REACT_DEVTOOLS_GLOBAL_HOOK__.checkDCE(kx)}catch(t){console.error(t)}}kx(),kg.exports=$t;var Gw=kg.exports,um=Gw;ld.createRoot=um.createRoot,ld.hydrateRoot=um.hydrateRoot;const Yw="modulepreload",Jw=function(t){return"/"+t},hm={},ar=function(e,s,n){if(!s||s.length===0)return e();const r=document.getElementsByTagName("link");return Promise.all(s.map(i=>{if(i=Jw(i),i in hm)return;hm[i]=!0;const o=i.endsWith(".css"),l=o?'[rel="stylesheet"]':"";if(!!n)for(let u=r.length-1;u>=0;u--){const h=r[u];if(h.href===i&&(!o||h.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${i}"]${l}`))return;const d=document.createElement("link");if(d.rel=o?"stylesheet":Yw,o||(d.as="script",d.crossOrigin=""),d.href=i,document.head.appendChild(d),o)return new Promise((u,h)=>{d.addEventListener("load",u),d.addEventListener("error",()=>h(new Error(`Unable to preload CSS for ${i}`)))})})).then(()=>e()).catch(i=>{const o=new Event("vite:preloadError",{cancelable:!0});if(o.payload=i,window.dispatchEvent(o),!o.defaultPrevented)throw i})};var bh={};Object.defineProperty(bh,"__esModule",{value:!0});bh.parse=n1;bh.serialize=r1;const Qw=/^[\u0021-\u003A\u003C\u003E-\u007E]+$/,Xw=/^[\u0021-\u003A\u003C-\u007E]*$/,Zw=/^([.]?[a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)([.][a-z0-9]([a-z0-9-]{0,61}[a-z0-9])?)*$/i,e1=/^[\u0020-\u003A\u003D-\u007E]*$/,t1=Object.prototype.toString,s1=(()=>{const t=function(){};return t.prototype=Object.create(null),t})();function n1(t,e){const s=new s1,n=t.length;if(n<2)return s;const r=(e==null?void 0:e.decode)||i1;let i=0;do{const o=t.indexOf("=",i);if(o===-1)break;const l=t.indexOf(";",i),c=l===-1?n:l;if(o>c){i=t.lastIndexOf(";",o-1)+1;continue}const d=fm(t,i,o),u=mm(t,o,d),h=t.slice(d,u);if(s[h]===void 0){let f=fm(t,o+1,c),m=mm(t,c,f);const p=r(t.slice(f,m));s[h]=p}i=c+1}while(i<n);return s}function fm(t,e,s){do{const n=t.charCodeAt(e);if(n!==32&&n!==9)return e}while(++e<s);return s}function mm(t,e,s){for(;e>s;){const n=t.charCodeAt(--e);if(n!==32&&n!==9)return e+1}return s}function r1(t,e,s){const n=(s==null?void 0:s.encode)||encodeURIComponent;if(!Qw.test(t))throw new TypeError(`argument name is invalid: ${t}`);const r=n(e);if(!Xw.test(r))throw new TypeError(`argument val is invalid: ${e}`);let i=t+"="+r;if(!s)return i;if(s.maxAge!==void 0){if(!Number.isInteger(s.maxAge))throw new TypeError(`option maxAge is invalid: ${s.maxAge}`);i+="; Max-Age="+s.maxAge}if(s.domain){if(!Zw.test(s.domain))throw new TypeError(`option domain is invalid: ${s.domain}`);i+="; Domain="+s.domain}if(s.path){if(!e1.test(s.path))throw new TypeError(`option path is invalid: ${s.path}`);i+="; Path="+s.path}if(s.expires){if(!a1(s.expires)||!Number.isFinite(s.expires.valueOf()))throw new TypeError(`option expires is invalid: ${s.expires}`);i+="; Expires="+s.expires.toUTCString()}if(s.httpOnly&&(i+="; HttpOnly"),s.secure&&(i+="; Secure"),s.partitioned&&(i+="; Partitioned"),s.priority)switch(typeof s.priority=="string"?s.priority.toLowerCase():void 0){case"low":i+="; Priority=Low";break;case"medium":i+="; Priority=Medium";break;case"high":i+="; Priority=High";break;default:throw new TypeError(`option priority is invalid: ${s.priority}`)}if(s.sameSite)switch(typeof s.sameSite=="string"?s.sameSite.toLowerCase():s.sameSite){case!0:case"strict":i+="; SameSite=Strict";break;case"lax":i+="; SameSite=Lax";break;case"none":i+="; SameSite=None";break;default:throw new TypeError(`option sameSite is invalid: ${s.sameSite}`)}return i}function i1(t){if(t.indexOf("%")===-1)return t;try{return decodeURIComponent(t)}catch{return t}}function a1(t){return t1.call(t)==="[object Date]"}var pm="popstate";function o1(t={}){function e(n,r){let{pathname:i,search:o,hash:l}=n.location;return tu("",{pathname:i,search:o,hash:l},r.state&&r.state.usr||null,r.state&&r.state.key||"default")}function s(n,r){return typeof r=="string"?r:da(r)}return c1(e,s,null,t)}function Le(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}function as(t,e){if(!t){typeof console<"u"&&console.warn(e);try{throw new Error(e)}catch{}}}function l1(){return Math.random().toString(36).substring(2,10)}function gm(t,e){return{usr:t.state,key:t.key,idx:e}}function tu(t,e,s=null,n){return{pathname:typeof t=="string"?t:t.pathname,search:"",hash:"",...typeof e=="string"?Jr(e):e,state:s,key:e&&e.key||n||l1()}}function da({pathname:t="/",search:e="",hash:s=""}){return e&&e!=="?"&&(t+=e.charAt(0)==="?"?e:"?"+e),s&&s!=="#"&&(t+=s.charAt(0)==="#"?s:"#"+s),t}function Jr(t){let e={};if(t){let s=t.indexOf("#");s>=0&&(e.hash=t.substring(s),t=t.substring(0,s));let n=t.indexOf("?");n>=0&&(e.search=t.substring(n),t=t.substring(0,n)),t&&(e.pathname=t)}return e}function c1(t,e,s,n={}){let{window:r=document.defaultView,v5Compat:i=!1}=n,o=r.history,l="POP",c=null,d=u();d==null&&(d=0,o.replaceState({...o.state,idx:d},""));function u(){return(o.state||{idx:null}).idx}function h(){l="POP";let g=u(),x=g==null?null:g-d;d=g,c&&c({action:l,location:v.location,delta:x})}function f(g,x){l="PUSH";let y=tu(v.location,g,x);s&&s(y,g),d=u()+1;let b=gm(y,d),N=v.createHref(y);try{o.pushState(b,"",N)}catch(_){if(_ instanceof DOMException&&_.name==="DataCloneError")throw _;r.location.assign(N)}i&&c&&c({action:l,location:v.location,delta:1})}function m(g,x){l="REPLACE";let y=tu(v.location,g,x);s&&s(y,g),d=u();let b=gm(y,d),N=v.createHref(y);o.replaceState(b,"",N),i&&c&&c({action:l,location:v.location,delta:0})}function p(g){return d1(g)}let v={get action(){return l},get location(){return t(r,o)},listen(g){if(c)throw new Error("A history only accepts one active listener");return r.addEventListener(pm,h),c=g,()=>{r.removeEventListener(pm,h),c=null}},createHref(g){return e(r,g)},createURL:p,encodeLocation(g){let x=p(g);return{pathname:x.pathname,search:x.search,hash:x.hash}},push:f,replace:m,go(g){return o.go(g)}};return v}function d1(t,e=!1){let s="http://localhost";typeof window<"u"&&(s=window.location.origin!=="null"?window.location.origin:window.location.href),Le(s,"No window.location.(origin|href) available to create URL");let n=typeof t=="string"?t:da(t);return n=n.replace(/ $/,"%20"),!e&&n.startsWith("//")&&(n=s+n),new URL(n,s)}function Sx(t,e,s="/"){return u1(t,e,s,!1)}function u1(t,e,s,n){let r=typeof e=="string"?Jr(e):e,i=Ws(r.pathname||"/",s);if(i==null)return null;let o=Cx(t);h1(o);let l=null;for(let c=0;l==null&&c<o.length;++c){let d=j1(i);l=w1(o[c],d,n)}return l}function Cx(t,e=[],s=[],n=""){let r=(i,o,l)=>{let c={relativePath:l===void 0?i.path||"":l,caseSensitive:i.caseSensitive===!0,childrenIndex:o,route:i};c.relativePath.startsWith("/")&&(Le(c.relativePath.startsWith(n),`Absolute route path "${c.relativePath}" nested under path "${n}" is not valid. An absolute child route path must start with the combined path of all its parent routes.`),c.relativePath=c.relativePath.slice(n.length));let d=zs([n,c.relativePath]),u=s.concat(c);i.children&&i.children.length>0&&(Le(i.index!==!0,`Index routes must not have child routes. Please remove all child routes from route path "${d}".`),Cx(i.children,e,u,d)),!(i.path==null&&!i.index)&&e.push({path:d,score:v1(d,i.index),routesMeta:u})};return t.forEach((i,o)=>{var l;if(i.path===""||!((l=i.path)!=null&&l.includes("?")))r(i,o);else for(let c of Ex(i.path))r(i,o,c)}),e}function Ex(t){let e=t.split("/");if(e.length===0)return[];let[s,...n]=e,r=s.endsWith("?"),i=s.replace(/\?$/,"");if(n.length===0)return r?[i,""]:[i];let o=Ex(n.join("/")),l=[];return l.push(...o.map(c=>c===""?i:[i,c].join("/"))),r&&l.push(...o),l.map(c=>t.startsWith("/")&&c===""?"/":c)}function h1(t){t.sort((e,s)=>e.score!==s.score?s.score-e.score:b1(e.routesMeta.map(n=>n.childrenIndex),s.routesMeta.map(n=>n.childrenIndex)))}var f1=/^:[\w-]+$/,m1=3,p1=2,g1=1,x1=10,y1=-2,xm=t=>t==="*";function v1(t,e){let s=t.split("/"),n=s.length;return s.some(xm)&&(n+=y1),e&&(n+=p1),s.filter(r=>!xm(r)).reduce((r,i)=>r+(f1.test(i)?m1:i===""?g1:x1),n)}function b1(t,e){return t.length===e.length&&t.slice(0,-1).every((n,r)=>n===e[r])?t[t.length-1]-e[e.length-1]:0}function w1(t,e,s=!1){let{routesMeta:n}=t,r={},i="/",o=[];for(let l=0;l<n.length;++l){let c=n[l],d=l===n.length-1,u=i==="/"?e:e.slice(i.length)||"/",h=fl({path:c.relativePath,caseSensitive:c.caseSensitive,end:d},u),f=c.route;if(!h&&d&&s&&!n[n.length-1].route.index&&(h=fl({path:c.relativePath,caseSensitive:c.caseSensitive,end:!1},u)),!h)return null;Object.assign(r,h.params),o.push({params:r,pathname:zs([i,h.pathname]),pathnameBase:C1(zs([i,h.pathnameBase])),route:f}),h.pathnameBase!=="/"&&(i=zs([i,h.pathnameBase]))}return o}function fl(t,e){typeof t=="string"&&(t={path:t,caseSensitive:!1,end:!0});let[s,n]=_1(t.path,t.caseSensitive,t.end),r=e.match(s);if(!r)return null;let i=r[0],o=i.replace(/(.)\/+$/,"$1"),l=r.slice(1);return{params:n.reduce((d,{paramName:u,isOptional:h},f)=>{if(u==="*"){let p=l[f]||"";o=i.slice(0,i.length-p.length).replace(/(.)\/+$/,"$1")}const m=l[f];return h&&!m?d[u]=void 0:d[u]=(m||"").replace(/%2F/g,"/"),d},{}),pathname:i,pathnameBase:o,pattern:t}}function _1(t,e=!1,s=!0){as(t==="*"||!t.endsWith("*")||t.endsWith("/*"),`Route path "${t}" will be treated as if it were "${t.replace(/\*$/,"/*")}" because the \`*\` character must always follow a \`/\` in the pattern. To get rid of this warning, please change the route path to "${t.replace(/\*$/,"/*")}".`);let n=[],r="^"+t.replace(/\/*\*?$/,"").replace(/^\/*/,"/").replace(/[\\.*+^${}|()[\]]/g,"\\$&").replace(/\/:([\w-]+)(\?)?/g,(o,l,c)=>(n.push({paramName:l,isOptional:c!=null}),c?"/?([^\\/]+)?":"/([^\\/]+)"));return t.endsWith("*")?(n.push({paramName:"*"}),r+=t==="*"||t==="/*"?"(.*)$":"(?:\\/(.+)|\\/*)$"):s?r+="\\/*$":t!==""&&t!=="/"&&(r+="(?:(?=\\/|$))"),[new RegExp(r,e?void 0:"i"),n]}function j1(t){try{return t.split("/").map(e=>decodeURIComponent(e).replace(/\//g,"%2F")).join("/")}catch(e){return as(!1,`The URL path "${t}" could not be decoded because it is a malformed URL segment. This is probably due to a bad percent encoding (${e}).`),t}}function Ws(t,e){if(e==="/")return t;if(!t.toLowerCase().startsWith(e.toLowerCase()))return null;let s=e.endsWith("/")?e.length-1:e.length,n=t.charAt(s);return n&&n!=="/"?null:t.slice(s)||"/"}function N1(t,e="/"){let{pathname:s,search:n="",hash:r=""}=typeof t=="string"?Jr(t):t;return{pathname:s?s.startsWith("/")?s:k1(s,e):e,search:E1(n),hash:P1(r)}}function k1(t,e){let s=e.replace(/\/+$/,"").split("/");return t.split("/").forEach(r=>{r===".."?s.length>1&&s.pop():r!=="."&&s.push(r)}),s.length>1?s.join("/"):"/"}function Fc(t,e,s,n){return`Cannot include a '${t}' character in a manually specified \`to.${e}\` field [${JSON.stringify(n)}].  Please separate it out to the \`to.${s}\` field. Alternatively you may provide the full path as a string in <Link to="..."> and the router will parse it for you.`}function S1(t){return t.filter((e,s)=>s===0||e.route.path&&e.route.path.length>0)}function wh(t){let e=S1(t);return e.map((s,n)=>n===e.length-1?s.pathname:s.pathnameBase)}function _h(t,e,s,n=!1){let r;typeof t=="string"?r=Jr(t):(r={...t},Le(!r.pathname||!r.pathname.includes("?"),Fc("?","pathname","search",r)),Le(!r.pathname||!r.pathname.includes("#"),Fc("#","pathname","hash",r)),Le(!r.search||!r.search.includes("#"),Fc("#","search","hash",r)));let i=t===""||r.pathname==="",o=i?"/":r.pathname,l;if(o==null)l=s;else{let h=e.length-1;if(!n&&o.startsWith("..")){let f=o.split("/");for(;f[0]==="..";)f.shift(),h-=1;r.pathname=f.join("/")}l=h>=0?e[h]:"/"}let c=N1(r,l),d=o&&o!=="/"&&o.endsWith("/"),u=(i||o===".")&&s.endsWith("/");return!c.pathname.endsWith("/")&&(d||u)&&(c.pathname+="/"),c}var zs=t=>t.join("/").replace(/\/\/+/g,"/"),C1=t=>t.replace(/\/+$/,"").replace(/^\/*/,"/"),E1=t=>!t||t==="?"?"":t.startsWith("?")?t:"?"+t,P1=t=>!t||t==="#"?"":t.startsWith("#")?t:"#"+t;function A1(t){return t!=null&&typeof t.status=="number"&&typeof t.statusText=="string"&&typeof t.internal=="boolean"&&"data"in t}var Px=["POST","PUT","PATCH","DELETE"];new Set(Px);var L1=["GET",...Px];new Set(L1);var Qr=w.createContext(null);Qr.displayName="DataRouter";var Bl=w.createContext(null);Bl.displayName="DataRouterState";var Ax=w.createContext({isTransitioning:!1});Ax.displayName="ViewTransition";var T1=w.createContext(new Map);T1.displayName="Fetchers";var M1=w.createContext(null);M1.displayName="Await";var os=w.createContext(null);os.displayName="Navigation";var Sa=w.createContext(null);Sa.displayName="Location";var ls=w.createContext({outlet:null,matches:[],isDataRoute:!1});ls.displayName="Route";var jh=w.createContext(null);jh.displayName="RouteError";function D1(t,{relative:e}={}){Le(Xr(),"useHref() may be used only in the context of a <Router> component.");let{basename:s,navigator:n}=w.useContext(os),{hash:r,pathname:i,search:o}=Ca(t,{relative:e}),l=i;return s!=="/"&&(l=i==="/"?s:zs([s,i])),n.createHref({pathname:l,search:o,hash:r})}function Xr(){return w.useContext(Sa)!=null}function St(){return Le(Xr(),"useLocation() may be used only in the context of a <Router> component."),w.useContext(Sa).location}var Lx="You should call navigate() in a React.useEffect(), not when your component is first rendered.";function Tx(t){w.useContext(os).static||w.useLayoutEffect(t)}function nt(){let{isDataRoute:t}=w.useContext(ls);return t?K1():O1()}function O1(){Le(Xr(),"useNavigate() may be used only in the context of a <Router> component.");let t=w.useContext(Qr),{basename:e,navigator:s}=w.useContext(os),{matches:n}=w.useContext(ls),{pathname:r}=St(),i=JSON.stringify(wh(n)),o=w.useRef(!1);return Tx(()=>{o.current=!0}),w.useCallback((c,d={})=>{if(as(o.current,Lx),!o.current)return;if(typeof c=="number"){s.go(c);return}let u=_h(c,JSON.parse(i),r,d.relative==="path");t==null&&e!=="/"&&(u.pathname=u.pathname==="/"?e:zs([e,u.pathname])),(d.replace?s.replace:s.push)(u,d.state,d)},[e,s,i,r,t])}w.createContext(null);function Mx(){let{matches:t}=w.useContext(ls),e=t[t.length-1];return e?e.params:{}}function Ca(t,{relative:e}={}){let{matches:s}=w.useContext(ls),{pathname:n}=St(),r=JSON.stringify(wh(s));return w.useMemo(()=>_h(t,JSON.parse(r),n,e==="path"),[t,r,n,e])}function R1(t,e){return Dx(t,e)}function Dx(t,e,s,n){var x;Le(Xr(),"useRoutes() may be used only in the context of a <Router> component.");let{navigator:r}=w.useContext(os),{matches:i}=w.useContext(ls),o=i[i.length-1],l=o?o.params:{},c=o?o.pathname:"/",d=o?o.pathnameBase:"/",u=o&&o.route;{let y=u&&u.path||"";Ox(c,!u||y.endsWith("*")||y.endsWith("*?"),`You rendered descendant <Routes> (or called \`useRoutes()\`) at "${c}" (under <Route path="${y}">) but the parent route path has no trailing "*". This means if you navigate deeper, the parent won't match anymore and therefore the child routes will never render.

Please change the parent <Route path="${y}"> to <Route path="${y==="/"?"*":`${y}/*`}">.`)}let h=St(),f;if(e){let y=typeof e=="string"?Jr(e):e;Le(d==="/"||((x=y.pathname)==null?void 0:x.startsWith(d)),`When overriding the location using \`<Routes location>\` or \`useRoutes(routes, location)\`, the location pathname must begin with the portion of the URL pathname that was matched by all parent routes. The current pathname base is "${d}" but pathname "${y.pathname}" was given in the \`location\` prop.`),f=y}else f=h;let m=f.pathname||"/",p=m;if(d!=="/"){let y=d.replace(/^\//,"").split("/");p="/"+m.replace(/^\//,"").split("/").slice(y.length).join("/")}let v=Sx(t,{pathname:p});as(u||v!=null,`No routes matched location "${f.pathname}${f.search}${f.hash}" `),as(v==null||v[v.length-1].route.element!==void 0||v[v.length-1].route.Component!==void 0||v[v.length-1].route.lazy!==void 0,`Matched leaf route at location "${f.pathname}${f.search}${f.hash}" does not have an element or Component. This means it will render an <Outlet /> with a null value by default resulting in an "empty" page.`);let g=U1(v&&v.map(y=>Object.assign({},y,{params:Object.assign({},l,y.params),pathname:zs([d,r.encodeLocation?r.encodeLocation(y.pathname).pathname:y.pathname]),pathnameBase:y.pathnameBase==="/"?d:zs([d,r.encodeLocation?r.encodeLocation(y.pathnameBase).pathname:y.pathnameBase])})),i,s,n);return e&&g?w.createElement(Sa.Provider,{value:{location:{pathname:"/",search:"",hash:"",state:null,key:"default",...f},navigationType:"POP"}},g):g}function I1(){let t=q1(),e=A1(t)?`${t.status} ${t.statusText}`:t instanceof Error?t.message:JSON.stringify(t),s=t instanceof Error?t.stack:null,n="rgba(200,200,200, 0.5)",r={padding:"0.5rem",backgroundColor:n},i={padding:"2px 4px",backgroundColor:n},o=null;return console.error("Error handled by React Router default ErrorBoundary:",t),o=w.createElement(w.Fragment,null,w.createElement("p",null,"💿 Hey developer 👋"),w.createElement("p",null,"You can provide a way better UX than this when your app throws errors by providing your own ",w.createElement("code",{style:i},"ErrorBoundary")," or"," ",w.createElement("code",{style:i},"errorElement")," prop on your route.")),w.createElement(w.Fragment,null,w.createElement("h2",null,"Unexpected Application Error!"),w.createElement("h3",{style:{fontStyle:"italic"}},e),s?w.createElement("pre",{style:r},s):null,o)}var F1=w.createElement(I1,null),$1=class extends w.Component{constructor(t){super(t),this.state={location:t.location,revalidation:t.revalidation,error:t.error}}static getDerivedStateFromError(t){return{error:t}}static getDerivedStateFromProps(t,e){return e.location!==t.location||e.revalidation!=="idle"&&t.revalidation==="idle"?{error:t.error,location:t.location,revalidation:t.revalidation}:{error:t.error!==void 0?t.error:e.error,location:e.location,revalidation:t.revalidation||e.revalidation}}componentDidCatch(t,e){console.error("React Router caught the following error during render",t,e)}render(){return this.state.error!==void 0?w.createElement(ls.Provider,{value:this.props.routeContext},w.createElement(jh.Provider,{value:this.state.error,children:this.props.component})):this.props.children}};function z1({routeContext:t,match:e,children:s}){let n=w.useContext(Qr);return n&&n.static&&n.staticContext&&(e.route.errorElement||e.route.ErrorBoundary)&&(n.staticContext._deepestRenderedBoundaryId=e.route.id),w.createElement(ls.Provider,{value:t},s)}function U1(t,e=[],s=null,n=null){if(t==null){if(!s)return null;if(s.errors)t=s.matches;else if(e.length===0&&!s.initialized&&s.matches.length>0)t=s.matches;else return null}let r=t,i=s==null?void 0:s.errors;if(i!=null){let c=r.findIndex(d=>d.route.id&&(i==null?void 0:i[d.route.id])!==void 0);Le(c>=0,`Could not find a matching route for errors on route IDs: ${Object.keys(i).join(",")}`),r=r.slice(0,Math.min(r.length,c+1))}let o=!1,l=-1;if(s)for(let c=0;c<r.length;c++){let d=r[c];if((d.route.HydrateFallback||d.route.hydrateFallbackElement)&&(l=c),d.route.id){let{loaderData:u,errors:h}=s,f=d.route.loader&&!u.hasOwnProperty(d.route.id)&&(!h||h[d.route.id]===void 0);if(d.route.lazy||f){o=!0,l>=0?r=r.slice(0,l+1):r=[r[0]];break}}}return r.reduceRight((c,d,u)=>{let h,f=!1,m=null,p=null;s&&(h=i&&d.route.id?i[d.route.id]:void 0,m=d.route.errorElement||F1,o&&(l<0&&u===0?(Ox("route-fallback",!1,"No `HydrateFallback` element provided to render during initial hydration"),f=!0,p=null):l===u&&(f=!0,p=d.route.hydrateFallbackElement||null)));let v=e.concat(r.slice(0,u+1)),g=()=>{let x;return h?x=m:f?x=p:d.route.Component?x=w.createElement(d.route.Component,null):d.route.element?x=d.route.element:x=c,w.createElement(z1,{match:d,routeContext:{outlet:c,matches:v,isDataRoute:s!=null},children:x})};return s&&(d.route.ErrorBoundary||d.route.errorElement||u===0)?w.createElement($1,{location:s.location,revalidation:s.revalidation,component:m,error:h,children:g(),routeContext:{outlet:null,matches:v,isDataRoute:!0}}):g()},null)}function Nh(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function B1(t){let e=w.useContext(Qr);return Le(e,Nh(t)),e}function H1(t){let e=w.useContext(Bl);return Le(e,Nh(t)),e}function V1(t){let e=w.useContext(ls);return Le(e,Nh(t)),e}function kh(t){let e=V1(t),s=e.matches[e.matches.length-1];return Le(s.route.id,`${t} can only be used on routes that contain a unique "id"`),s.route.id}function W1(){return kh("useRouteId")}function q1(){var n;let t=w.useContext(jh),e=H1("useRouteError"),s=kh("useRouteError");return t!==void 0?t:(n=e.errors)==null?void 0:n[s]}function K1(){let{router:t}=B1("useNavigate"),e=kh("useNavigate"),s=w.useRef(!1);return Tx(()=>{s.current=!0}),w.useCallback(async(r,i={})=>{as(s.current,Lx),s.current&&(typeof r=="number"?t.navigate(r):await t.navigate(r,{fromRouteId:e,...i}))},[t,e])}var ym={};function Ox(t,e,s){!e&&!ym[t]&&(ym[t]=!0,as(!1,s))}w.memo(G1);function G1({routes:t,future:e,state:s}){return Dx(t,void 0,s,e)}function su({to:t,replace:e,state:s,relative:n}){Le(Xr(),"<Navigate> may be used only in the context of a <Router> component.");let{static:r}=w.useContext(os);as(!r,"<Navigate> must not be used on the initial render in a <StaticRouter>. This is a no-op, but you should modify your code so the <Navigate> is only ever rendered in response to some user interaction or state change.");let{matches:i}=w.useContext(ls),{pathname:o}=St(),l=nt(),c=_h(t,wh(i),o,n==="path"),d=JSON.stringify(c);return w.useEffect(()=>{l(JSON.parse(d),{replace:e,state:s,relative:n})},[l,d,n,e,s]),null}function Pt(t){Le(!1,"A <Route> is only ever to be used as the child of <Routes> element, never rendered directly. Please wrap your <Route> in a <Routes>.")}function Y1({basename:t="/",children:e=null,location:s,navigationType:n="POP",navigator:r,static:i=!1}){Le(!Xr(),"You cannot render a <Router> inside another <Router>. You should never have more than one in your app.");let o=t.replace(/^\/*/,"/"),l=w.useMemo(()=>({basename:o,navigator:r,static:i,future:{}}),[o,r,i]);typeof s=="string"&&(s=Jr(s));let{pathname:c="/",search:d="",hash:u="",state:h=null,key:f="default"}=s,m=w.useMemo(()=>{let p=Ws(c,o);return p==null?null:{location:{pathname:p,search:d,hash:u,state:h,key:f},navigationType:n}},[o,c,d,u,h,f,n]);return as(m!=null,`<Router basename="${o}"> is not able to match the URL "${c}${d}${u}" because it does not start with the basename, so the <Router> won't render anything.`),m==null?null:w.createElement(os.Provider,{value:l},w.createElement(Sa.Provider,{children:e,value:m}))}function J1({children:t,location:e}){return R1(nu(t),e)}function nu(t,e=[]){let s=[];return w.Children.forEach(t,(n,r)=>{if(!w.isValidElement(n))return;let i=[...e,r];if(n.type===w.Fragment){s.push.apply(s,nu(n.props.children,i));return}Le(n.type===Pt,`[${typeof n.type=="string"?n.type:n.type.name}] is not a <Route> component. All component children of <Routes> must be a <Route> or <React.Fragment>`),Le(!n.props.index||!n.props.children,"An index route cannot have child routes.");let o={id:n.props.id||i.join("-"),caseSensitive:n.props.caseSensitive,element:n.props.element,Component:n.props.Component,index:n.props.index,path:n.props.path,loader:n.props.loader,action:n.props.action,hydrateFallbackElement:n.props.hydrateFallbackElement,HydrateFallback:n.props.HydrateFallback,errorElement:n.props.errorElement,ErrorBoundary:n.props.ErrorBoundary,hasErrorBoundary:n.props.hasErrorBoundary===!0||n.props.ErrorBoundary!=null||n.props.errorElement!=null,shouldRevalidate:n.props.shouldRevalidate,handle:n.props.handle,lazy:n.props.lazy};n.props.children&&(o.children=nu(n.props.children,i)),s.push(o)}),s}var Mo="get",Do="application/x-www-form-urlencoded";function Hl(t){return t!=null&&typeof t.tagName=="string"}function Q1(t){return Hl(t)&&t.tagName.toLowerCase()==="button"}function X1(t){return Hl(t)&&t.tagName.toLowerCase()==="form"}function Z1(t){return Hl(t)&&t.tagName.toLowerCase()==="input"}function e_(t){return!!(t.metaKey||t.altKey||t.ctrlKey||t.shiftKey)}function t_(t,e){return t.button===0&&(!e||e==="_self")&&!e_(t)}var Ya=null;function s_(){if(Ya===null)try{new FormData(document.createElement("form"),0),Ya=!1}catch{Ya=!0}return Ya}var n_=new Set(["application/x-www-form-urlencoded","multipart/form-data","text/plain"]);function $c(t){return t!=null&&!n_.has(t)?(as(!1,`"${t}" is not a valid \`encType\` for \`<Form>\`/\`<fetcher.Form>\` and will default to "${Do}"`),null):t}function r_(t,e){let s,n,r,i,o;if(X1(t)){let l=t.getAttribute("action");n=l?Ws(l,e):null,s=t.getAttribute("method")||Mo,r=$c(t.getAttribute("enctype"))||Do,i=new FormData(t)}else if(Q1(t)||Z1(t)&&(t.type==="submit"||t.type==="image")){let l=t.form;if(l==null)throw new Error('Cannot submit a <button> or <input type="submit"> without a <form>');let c=t.getAttribute("formaction")||l.getAttribute("action");if(n=c?Ws(c,e):null,s=t.getAttribute("formmethod")||l.getAttribute("method")||Mo,r=$c(t.getAttribute("formenctype"))||$c(l.getAttribute("enctype"))||Do,i=new FormData(l,t),!s_()){let{name:d,type:u,value:h}=t;if(u==="image"){let f=d?`${d}.`:"";i.append(`${f}x`,"0"),i.append(`${f}y`,"0")}else d&&i.append(d,h)}}else{if(Hl(t))throw new Error('Cannot submit element that is not <form>, <button>, or <input type="submit|image">');s=Mo,n=null,r=Do,o=t}return i&&r==="text/plain"&&(o=i,i=void 0),{action:n,method:s.toLowerCase(),encType:r,formData:i,body:o}}function Sh(t,e){if(t===!1||t===null||typeof t>"u")throw new Error(e)}async function i_(t,e){if(t.id in e)return e[t.id];try{let s=await ar(()=>import(t.module),[]);return e[t.id]=s,s}catch(s){return console.error(`Error loading route module \`${t.module}\`, reloading page...`),console.error(s),window.__reactRouterContext&&window.__reactRouterContext.isSpaMode,window.location.reload(),new Promise(()=>{})}}function a_(t){return t!=null&&typeof t.page=="string"}function o_(t){return t==null?!1:t.href==null?t.rel==="preload"&&typeof t.imageSrcSet=="string"&&typeof t.imageSizes=="string":typeof t.rel=="string"&&typeof t.href=="string"}async function l_(t,e,s){let n=await Promise.all(t.map(async r=>{let i=e.routes[r.route.id];if(i){let o=await i_(i,s);return o.links?o.links():[]}return[]}));return h_(n.flat(1).filter(o_).filter(r=>r.rel==="stylesheet"||r.rel==="preload").map(r=>r.rel==="stylesheet"?{...r,rel:"prefetch",as:"style"}:{...r,rel:"prefetch"}))}function vm(t,e,s,n,r,i){let o=(c,d)=>s[d]?c.route.id!==s[d].route.id:!0,l=(c,d)=>{var u;return s[d].pathname!==c.pathname||((u=s[d].route.path)==null?void 0:u.endsWith("*"))&&s[d].params["*"]!==c.params["*"]};return i==="assets"?e.filter((c,d)=>o(c,d)||l(c,d)):i==="data"?e.filter((c,d)=>{var h;let u=n.routes[c.route.id];if(!u||!u.hasLoader)return!1;if(o(c,d)||l(c,d))return!0;if(c.route.shouldRevalidate){let f=c.route.shouldRevalidate({currentUrl:new URL(r.pathname+r.search+r.hash,window.origin),currentParams:((h=s[0])==null?void 0:h.params)||{},nextUrl:new URL(t,window.origin),nextParams:c.params,defaultShouldRevalidate:!0});if(typeof f=="boolean")return f}return!0}):[]}function c_(t,e,{includeHydrateFallback:s}={}){return d_(t.map(n=>{let r=e.routes[n.route.id];if(!r)return[];let i=[r.module];return r.clientActionModule&&(i=i.concat(r.clientActionModule)),r.clientLoaderModule&&(i=i.concat(r.clientLoaderModule)),s&&r.hydrateFallbackModule&&(i=i.concat(r.hydrateFallbackModule)),r.imports&&(i=i.concat(r.imports)),i}).flat(1))}function d_(t){return[...new Set(t)]}function u_(t){let e={},s=Object.keys(t).sort();for(let n of s)e[n]=t[n];return e}function h_(t,e){let s=new Set,n=new Set(e);return t.reduce((r,i)=>{if(e&&!a_(i)&&i.as==="script"&&i.href&&n.has(i.href))return r;let l=JSON.stringify(u_(i));return s.has(l)||(s.add(l),r.push({key:l,link:i})),r},[])}Object.getOwnPropertyNames(Object.prototype).sort().join("\0");var f_=new Set([100,101,204,205]);function m_(t,e){let s=typeof t=="string"?new URL(t,typeof window>"u"?"server://singlefetch/":window.location.origin):t;return s.pathname==="/"?s.pathname="_root.data":e&&Ws(s.pathname,e)==="/"?s.pathname=`${e.replace(/\/$/,"")}/_root.data`:s.pathname=`${s.pathname.replace(/\/$/,"")}.data`,s}function Rx(){let t=w.useContext(Qr);return Sh(t,"You must render this element inside a <DataRouterContext.Provider> element"),t}function p_(){let t=w.useContext(Bl);return Sh(t,"You must render this element inside a <DataRouterStateContext.Provider> element"),t}var Ch=w.createContext(void 0);Ch.displayName="FrameworkContext";function Ix(){let t=w.useContext(Ch);return Sh(t,"You must render this element inside a <HydratedRouter> element"),t}function g_(t,e){let s=w.useContext(Ch),[n,r]=w.useState(!1),[i,o]=w.useState(!1),{onFocus:l,onBlur:c,onMouseEnter:d,onMouseLeave:u,onTouchStart:h}=e,f=w.useRef(null);w.useEffect(()=>{if(t==="render"&&o(!0),t==="viewport"){let v=x=>{x.forEach(y=>{o(y.isIntersecting)})},g=new IntersectionObserver(v,{threshold:.5});return f.current&&g.observe(f.current),()=>{g.disconnect()}}},[t]),w.useEffect(()=>{if(n){let v=setTimeout(()=>{o(!0)},100);return()=>{clearTimeout(v)}}},[n]);let m=()=>{r(!0)},p=()=>{r(!1),o(!1)};return s?t!=="intent"?[i,f,{}]:[i,f,{onFocus:hi(l,m),onBlur:hi(c,p),onMouseEnter:hi(d,m),onMouseLeave:hi(u,p),onTouchStart:hi(h,m)}]:[!1,f,{}]}function hi(t,e){return s=>{t&&t(s),s.defaultPrevented||e(s)}}function x_({page:t,...e}){let{router:s}=Rx(),n=w.useMemo(()=>Sx(s.routes,t,s.basename),[s.routes,t,s.basename]);return n?w.createElement(v_,{page:t,matches:n,...e}):null}function y_(t){let{manifest:e,routeModules:s}=Ix(),[n,r]=w.useState([]);return w.useEffect(()=>{let i=!1;return l_(t,e,s).then(o=>{i||r(o)}),()=>{i=!0}},[t,e,s]),n}function v_({page:t,matches:e,...s}){let n=St(),{manifest:r,routeModules:i}=Ix(),{basename:o}=Rx(),{loaderData:l,matches:c}=p_(),d=w.useMemo(()=>vm(t,e,c,r,n,"data"),[t,e,c,r,n]),u=w.useMemo(()=>vm(t,e,c,r,n,"assets"),[t,e,c,r,n]),h=w.useMemo(()=>{if(t===n.pathname+n.search+n.hash)return[];let p=new Set,v=!1;if(e.forEach(x=>{var b;let y=r.routes[x.route.id];!y||!y.hasLoader||(!d.some(N=>N.route.id===x.route.id)&&x.route.id in l&&((b=i[x.route.id])!=null&&b.shouldRevalidate)||y.hasClientLoader?v=!0:p.add(x.route.id))}),p.size===0)return[];let g=m_(t,o);return v&&p.size>0&&g.searchParams.set("_routes",e.filter(x=>p.has(x.route.id)).map(x=>x.route.id).join(",")),[g.pathname+g.search]},[o,l,n,r,d,e,t,i]),f=w.useMemo(()=>c_(u,r),[u,r]),m=y_(u);return w.createElement(w.Fragment,null,h.map(p=>w.createElement("link",{key:p,rel:"prefetch",as:"fetch",href:p,...s})),f.map(p=>w.createElement("link",{key:p,rel:"modulepreload",href:p,...s})),m.map(({key:p,link:v})=>w.createElement("link",{key:p,...v})))}function b_(...t){return e=>{t.forEach(s=>{typeof s=="function"?s(e):s!=null&&(s.current=e)})}}var Fx=typeof window<"u"&&typeof window.document<"u"&&typeof window.document.createElement<"u";try{Fx&&(window.__reactRouterVersion="7.6.2")}catch{}function w_({basename:t,children:e,window:s}){let n=w.useRef();n.current==null&&(n.current=o1({window:s,v5Compat:!0}));let r=n.current,[i,o]=w.useState({action:r.action,location:r.location}),l=w.useCallback(c=>{w.startTransition(()=>o(c))},[o]);return w.useLayoutEffect(()=>r.listen(l),[r,l]),w.createElement(Y1,{basename:t,children:e,location:i.location,navigationType:i.action,navigator:r})}var $x=/^(?:[a-z][a-z0-9+.-]*:|\/\/)/i,zx=w.forwardRef(function({onClick:e,discover:s="render",prefetch:n="none",relative:r,reloadDocument:i,replace:o,state:l,target:c,to:d,preventScrollReset:u,viewTransition:h,...f},m){let{basename:p}=w.useContext(os),v=typeof d=="string"&&$x.test(d),g,x=!1;if(typeof d=="string"&&v&&(g=d,Fx))try{let C=new URL(window.location.href),E=d.startsWith("//")?new URL(C.protocol+d):new URL(d),M=Ws(E.pathname,p);E.origin===C.origin&&M!=null?d=M+E.search+E.hash:x=!0}catch{as(!1,`<Link to="${d}"> contains an invalid URL which will probably break when clicked - please update to a valid URL path.`)}let y=D1(d,{relative:r}),[b,N,_]=g_(n,f),k=k_(d,{replace:o,state:l,target:c,preventScrollReset:u,relative:r,viewTransition:h});function S(C){e&&e(C),C.defaultPrevented||k(C)}let j=w.createElement("a",{...f,..._,href:g||y,onClick:x||i?e:S,ref:b_(m,N),target:c,"data-discover":!v&&s==="render"?"true":void 0});return b&&!v?w.createElement(w.Fragment,null,j,w.createElement(x_,{page:y})):j});zx.displayName="Link";var __=w.forwardRef(function({"aria-current":e="page",caseSensitive:s=!1,className:n="",end:r=!1,style:i,to:o,viewTransition:l,children:c,...d},u){let h=Ca(o,{relative:d.relative}),f=St(),m=w.useContext(Bl),{navigator:p,basename:v}=w.useContext(os),g=m!=null&&A_(h)&&l===!0,x=p.encodeLocation?p.encodeLocation(h).pathname:h.pathname,y=f.pathname,b=m&&m.navigation&&m.navigation.location?m.navigation.location.pathname:null;s||(y=y.toLowerCase(),b=b?b.toLowerCase():null,x=x.toLowerCase()),b&&v&&(b=Ws(b,v)||b);const N=x!=="/"&&x.endsWith("/")?x.length-1:x.length;let _=y===x||!r&&y.startsWith(x)&&y.charAt(N)==="/",k=b!=null&&(b===x||!r&&b.startsWith(x)&&b.charAt(x.length)==="/"),S={isActive:_,isPending:k,isTransitioning:g},j=_?e:void 0,C;typeof n=="function"?C=n(S):C=[n,_?"active":null,k?"pending":null,g?"transitioning":null].filter(Boolean).join(" ");let E=typeof i=="function"?i(S):i;return w.createElement(zx,{...d,"aria-current":j,className:C,ref:u,style:E,to:o,viewTransition:l},typeof c=="function"?c(S):c)});__.displayName="NavLink";var j_=w.forwardRef(({discover:t="render",fetcherKey:e,navigate:s,reloadDocument:n,replace:r,state:i,method:o=Mo,action:l,onSubmit:c,relative:d,preventScrollReset:u,viewTransition:h,...f},m)=>{let p=E_(),v=P_(l,{relative:d}),g=o.toLowerCase()==="get"?"get":"post",x=typeof l=="string"&&$x.test(l),y=b=>{if(c&&c(b),b.defaultPrevented)return;b.preventDefault();let N=b.nativeEvent.submitter,_=(N==null?void 0:N.getAttribute("formmethod"))||o;p(N||b.currentTarget,{fetcherKey:e,method:_,navigate:s,replace:r,state:i,relative:d,preventScrollReset:u,viewTransition:h})};return w.createElement("form",{ref:m,method:g,action:v,onSubmit:n?c:y,...f,"data-discover":!x&&t==="render"?"true":void 0})});j_.displayName="Form";function N_(t){return`${t} must be used within a data router.  See https://reactrouter.com/en/main/routers/picking-a-router.`}function Ux(t){let e=w.useContext(Qr);return Le(e,N_(t)),e}function k_(t,{target:e,replace:s,state:n,preventScrollReset:r,relative:i,viewTransition:o}={}){let l=nt(),c=St(),d=Ca(t,{relative:i});return w.useCallback(u=>{if(t_(u,e)){u.preventDefault();let h=s!==void 0?s:da(c)===da(d);l(t,{replace:h,state:n,preventScrollReset:r,relative:i,viewTransition:o})}},[c,l,d,s,n,e,t,r,i,o])}var S_=0,C_=()=>`__${String(++S_)}__`;function E_(){let{router:t}=Ux("useSubmit"),{basename:e}=w.useContext(os),s=W1();return w.useCallback(async(n,r={})=>{let{action:i,method:o,encType:l,formData:c,body:d}=r_(n,e);if(r.navigate===!1){let u=r.fetcherKey||C_();await t.fetch(u,s,r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||o,formEncType:r.encType||l,flushSync:r.flushSync})}else await t.navigate(r.action||i,{preventScrollReset:r.preventScrollReset,formData:c,body:d,formMethod:r.method||o,formEncType:r.encType||l,replace:r.replace,state:r.state,fromRouteId:s,flushSync:r.flushSync,viewTransition:r.viewTransition})},[t,e,s])}function P_(t,{relative:e}={}){let{basename:s}=w.useContext(os),n=w.useContext(ls);Le(n,"useFormAction must be used inside a RouteContext");let[r]=n.matches.slice(-1),i={...Ca(t||".",{relative:e})},o=St();if(t==null){i.search=o.search;let l=new URLSearchParams(i.search),c=l.getAll("index");if(c.some(u=>u==="")){l.delete("index"),c.filter(h=>h).forEach(h=>l.append("index",h));let u=l.toString();i.search=u?`?${u}`:""}}return(!t||t===".")&&r.route.index&&(i.search=i.search?i.search.replace(/^\?/,"?index&"):"?index"),s!=="/"&&(i.pathname=i.pathname==="/"?s:zs([s,i.pathname])),da(i)}function A_(t,e={}){let s=w.useContext(Ax);Le(s!=null,"`useViewTransitionState` must be used within `react-router-dom`'s `RouterProvider`.  Did you accidentally import `RouterProvider` from `react-router`?");let{basename:n}=Ux("useViewTransitionState"),r=Ca(t,{relative:e.relative});if(!s.isTransitioning)return!1;let i=Ws(s.currentLocation.pathname,n)||s.currentLocation.pathname,o=Ws(s.nextLocation.pathname,n)||s.nextLocation.pathname;return fl(r.pathname,o)!=null||fl(r.pathname,i)!=null}[...f_];const L_=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ar(()=>Promise.resolve().then(()=>Zr),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)};class Eh extends Error{constructor(e,s="FunctionsError",n){super(e),this.name=s,this.context=n}}class T_ extends Eh{constructor(e){super("Failed to send a request to the Edge Function","FunctionsFetchError",e)}}class bm extends Eh{constructor(e){super("Relay Error invoking the Edge Function","FunctionsRelayError",e)}}class wm extends Eh{constructor(e){super("Edge Function returned a non-2xx status code","FunctionsHttpError",e)}}var ru;(function(t){t.Any="any",t.ApNortheast1="ap-northeast-1",t.ApNortheast2="ap-northeast-2",t.ApSouth1="ap-south-1",t.ApSoutheast1="ap-southeast-1",t.ApSoutheast2="ap-southeast-2",t.CaCentral1="ca-central-1",t.EuCentral1="eu-central-1",t.EuWest1="eu-west-1",t.EuWest2="eu-west-2",t.EuWest3="eu-west-3",t.SaEast1="sa-east-1",t.UsEast1="us-east-1",t.UsWest1="us-west-1",t.UsWest2="us-west-2"})(ru||(ru={}));var M_=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class D_{constructor(e,{headers:s={},customFetch:n,region:r=ru.Any}={}){this.url=e,this.headers=s,this.region=r,this.fetch=L_(n)}setAuth(e){this.headers.Authorization=`Bearer ${e}`}invoke(e,s={}){var n;return M_(this,void 0,void 0,function*(){try{const{headers:r,method:i,body:o}=s;let l={},{region:c}=s;c||(c=this.region);const d=new URL(`${this.url}/${e}`);c&&c!=="any"&&(l["x-region"]=c,d.searchParams.set("forceFunctionRegion",c));let u;o&&(r&&!Object.prototype.hasOwnProperty.call(r,"Content-Type")||!r)&&(typeof Blob<"u"&&o instanceof Blob||o instanceof ArrayBuffer?(l["Content-Type"]="application/octet-stream",u=o):typeof o=="string"?(l["Content-Type"]="text/plain",u=o):typeof FormData<"u"&&o instanceof FormData?u=o:(l["Content-Type"]="application/json",u=JSON.stringify(o)));const h=yield this.fetch(d.toString(),{method:i||"POST",headers:Object.assign(Object.assign(Object.assign({},l),this.headers),r),body:u}).catch(v=>{throw new T_(v)}),f=h.headers.get("x-relay-error");if(f&&f==="true")throw new bm(h);if(!h.ok)throw new wm(h);let m=((n=h.headers.get("Content-Type"))!==null&&n!==void 0?n:"text/plain").split(";")[0].trim(),p;return m==="application/json"?p=yield h.json():m==="application/octet-stream"?p=yield h.blob():m==="text/event-stream"?p=h:m==="multipart/form-data"?p=yield h.formData():p=yield h.text(),{data:p,error:null,response:h}}catch(r){return{data:null,error:r,response:r instanceof wm||r instanceof bm?r.context:void 0}}})}}var yt={},Ph={},Vl={},Ea={},Wl={},ql={},O_=function(){if(typeof self<"u")return self;if(typeof window<"u")return window;if(typeof global<"u")return global;throw new Error("unable to locate global object")},Hr=O_();const R_=Hr.fetch,Bx=Hr.fetch.bind(Hr),Hx=Hr.Headers,I_=Hr.Request,F_=Hr.Response,Zr=Object.freeze(Object.defineProperty({__proto__:null,Headers:Hx,Request:I_,Response:F_,default:Bx,fetch:R_},Symbol.toStringTag,{value:"Module"})),$_=_v(Zr);var Kl={};Object.defineProperty(Kl,"__esModule",{value:!0});let z_=class extends Error{constructor(e){super(e.message),this.name="PostgrestError",this.details=e.details,this.hint=e.hint,this.code=e.code}};Kl.default=z_;var Vx=Kt&&Kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(ql,"__esModule",{value:!0});const U_=Vx($_),B_=Vx(Kl);let H_=class{constructor(e){this.shouldThrowOnError=!1,this.method=e.method,this.url=e.url,this.headers=e.headers,this.schema=e.schema,this.body=e.body,this.shouldThrowOnError=e.shouldThrowOnError,this.signal=e.signal,this.isMaybeSingle=e.isMaybeSingle,e.fetch?this.fetch=e.fetch:typeof fetch>"u"?this.fetch=U_.default:this.fetch=fetch}throwOnError(){return this.shouldThrowOnError=!0,this}setHeader(e,s){return this.headers=Object.assign({},this.headers),this.headers[e]=s,this}then(e,s){this.schema===void 0||(["GET","HEAD"].includes(this.method)?this.headers["Accept-Profile"]=this.schema:this.headers["Content-Profile"]=this.schema),this.method!=="GET"&&this.method!=="HEAD"&&(this.headers["Content-Type"]="application/json");const n=this.fetch;let r=n(this.url.toString(),{method:this.method,headers:this.headers,body:JSON.stringify(this.body),signal:this.signal}).then(async i=>{var o,l,c;let d=null,u=null,h=null,f=i.status,m=i.statusText;if(i.ok){if(this.method!=="HEAD"){const x=await i.text();x===""||(this.headers.Accept==="text/csv"||this.headers.Accept&&this.headers.Accept.includes("application/vnd.pgrst.plan+text")?u=x:u=JSON.parse(x))}const v=(o=this.headers.Prefer)===null||o===void 0?void 0:o.match(/count=(exact|planned|estimated)/),g=(l=i.headers.get("content-range"))===null||l===void 0?void 0:l.split("/");v&&g&&g.length>1&&(h=parseInt(g[1])),this.isMaybeSingle&&this.method==="GET"&&Array.isArray(u)&&(u.length>1?(d={code:"PGRST116",details:`Results contain ${u.length} rows, application/vnd.pgrst.object+json requires 1 row`,hint:null,message:"JSON object requested, multiple (or no) rows returned"},u=null,h=null,f=406,m="Not Acceptable"):u.length===1?u=u[0]:u=null)}else{const v=await i.text();try{d=JSON.parse(v),Array.isArray(d)&&i.status===404&&(u=[],d=null,f=200,m="OK")}catch{i.status===404&&v===""?(f=204,m="No Content"):d={message:v}}if(d&&this.isMaybeSingle&&(!((c=d==null?void 0:d.details)===null||c===void 0)&&c.includes("0 rows"))&&(d=null,f=200,m="OK"),d&&this.shouldThrowOnError)throw new B_.default(d)}return{error:d,data:u,count:h,status:f,statusText:m}});return this.shouldThrowOnError||(r=r.catch(i=>{var o,l,c;return{error:{message:`${(o=i==null?void 0:i.name)!==null&&o!==void 0?o:"FetchError"}: ${i==null?void 0:i.message}`,details:`${(l=i==null?void 0:i.stack)!==null&&l!==void 0?l:""}`,hint:"",code:`${(c=i==null?void 0:i.code)!==null&&c!==void 0?c:""}`},data:null,count:null,status:0,statusText:""}})),r.then(e,s)}returns(){return this}overrideTypes(){return this}};ql.default=H_;var V_=Kt&&Kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Wl,"__esModule",{value:!0});const W_=V_(ql);let q_=class extends W_.default{select(e){let s=!1;const n=(e??"*").split("").map(r=>/\s/.test(r)&&!s?"":(r==='"'&&(s=!s),r)).join("");return this.url.searchParams.set("select",n),this.headers.Prefer&&(this.headers.Prefer+=","),this.headers.Prefer+="return=representation",this}order(e,{ascending:s=!0,nullsFirst:n,foreignTable:r,referencedTable:i=r}={}){const o=i?`${i}.order`:"order",l=this.url.searchParams.get(o);return this.url.searchParams.set(o,`${l?`${l},`:""}${e}.${s?"asc":"desc"}${n===void 0?"":n?".nullsfirst":".nullslast"}`),this}limit(e,{foreignTable:s,referencedTable:n=s}={}){const r=typeof n>"u"?"limit":`${n}.limit`;return this.url.searchParams.set(r,`${e}`),this}range(e,s,{foreignTable:n,referencedTable:r=n}={}){const i=typeof r>"u"?"offset":`${r}.offset`,o=typeof r>"u"?"limit":`${r}.limit`;return this.url.searchParams.set(i,`${e}`),this.url.searchParams.set(o,`${s-e+1}`),this}abortSignal(e){return this.signal=e,this}single(){return this.headers.Accept="application/vnd.pgrst.object+json",this}maybeSingle(){return this.method==="GET"?this.headers.Accept="application/json":this.headers.Accept="application/vnd.pgrst.object+json",this.isMaybeSingle=!0,this}csv(){return this.headers.Accept="text/csv",this}geojson(){return this.headers.Accept="application/geo+json",this}explain({analyze:e=!1,verbose:s=!1,settings:n=!1,buffers:r=!1,wal:i=!1,format:o="text"}={}){var l;const c=[e?"analyze":null,s?"verbose":null,n?"settings":null,r?"buffers":null,i?"wal":null].filter(Boolean).join("|"),d=(l=this.headers.Accept)!==null&&l!==void 0?l:"application/json";return this.headers.Accept=`application/vnd.pgrst.plan+${o}; for="${d}"; options=${c};`,o==="json"?this:this}rollback(){var e;return((e=this.headers.Prefer)!==null&&e!==void 0?e:"").trim().length>0?this.headers.Prefer+=",tx=rollback":this.headers.Prefer="tx=rollback",this}returns(){return this}};Wl.default=q_;var K_=Kt&&Kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ea,"__esModule",{value:!0});const G_=K_(Wl);let Y_=class extends G_.default{eq(e,s){return this.url.searchParams.append(e,`eq.${s}`),this}neq(e,s){return this.url.searchParams.append(e,`neq.${s}`),this}gt(e,s){return this.url.searchParams.append(e,`gt.${s}`),this}gte(e,s){return this.url.searchParams.append(e,`gte.${s}`),this}lt(e,s){return this.url.searchParams.append(e,`lt.${s}`),this}lte(e,s){return this.url.searchParams.append(e,`lte.${s}`),this}like(e,s){return this.url.searchParams.append(e,`like.${s}`),this}likeAllOf(e,s){return this.url.searchParams.append(e,`like(all).{${s.join(",")}}`),this}likeAnyOf(e,s){return this.url.searchParams.append(e,`like(any).{${s.join(",")}}`),this}ilike(e,s){return this.url.searchParams.append(e,`ilike.${s}`),this}ilikeAllOf(e,s){return this.url.searchParams.append(e,`ilike(all).{${s.join(",")}}`),this}ilikeAnyOf(e,s){return this.url.searchParams.append(e,`ilike(any).{${s.join(",")}}`),this}is(e,s){return this.url.searchParams.append(e,`is.${s}`),this}in(e,s){const n=Array.from(new Set(s)).map(r=>typeof r=="string"&&new RegExp("[,()]").test(r)?`"${r}"`:`${r}`).join(",");return this.url.searchParams.append(e,`in.(${n})`),this}contains(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cs.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cs.{${s.join(",")}}`):this.url.searchParams.append(e,`cs.${JSON.stringify(s)}`),this}containedBy(e,s){return typeof s=="string"?this.url.searchParams.append(e,`cd.${s}`):Array.isArray(s)?this.url.searchParams.append(e,`cd.{${s.join(",")}}`):this.url.searchParams.append(e,`cd.${JSON.stringify(s)}`),this}rangeGt(e,s){return this.url.searchParams.append(e,`sr.${s}`),this}rangeGte(e,s){return this.url.searchParams.append(e,`nxl.${s}`),this}rangeLt(e,s){return this.url.searchParams.append(e,`sl.${s}`),this}rangeLte(e,s){return this.url.searchParams.append(e,`nxr.${s}`),this}rangeAdjacent(e,s){return this.url.searchParams.append(e,`adj.${s}`),this}overlaps(e,s){return typeof s=="string"?this.url.searchParams.append(e,`ov.${s}`):this.url.searchParams.append(e,`ov.{${s.join(",")}}`),this}textSearch(e,s,{config:n,type:r}={}){let i="";r==="plain"?i="pl":r==="phrase"?i="ph":r==="websearch"&&(i="w");const o=n===void 0?"":`(${n})`;return this.url.searchParams.append(e,`${i}fts${o}.${s}`),this}match(e){return Object.entries(e).forEach(([s,n])=>{this.url.searchParams.append(s,`eq.${n}`)}),this}not(e,s,n){return this.url.searchParams.append(e,`not.${s}.${n}`),this}or(e,{foreignTable:s,referencedTable:n=s}={}){const r=n?`${n}.or`:"or";return this.url.searchParams.append(r,`(${e})`),this}filter(e,s,n){return this.url.searchParams.append(e,`${s}.${n}`),this}};Ea.default=Y_;var J_=Kt&&Kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Vl,"__esModule",{value:!0});const fi=J_(Ea);let Q_=class{constructor(e,{headers:s={},schema:n,fetch:r}){this.url=e,this.headers=s,this.schema=n,this.fetch=r}select(e,{head:s=!1,count:n}={}){const r=s?"HEAD":"GET";let i=!1;const o=(e??"*").split("").map(l=>/\s/.test(l)&&!i?"":(l==='"'&&(i=!i),l)).join("");return this.url.searchParams.set("select",o),n&&(this.headers.Prefer=`count=${n}`),new fi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}insert(e,{count:s,defaultToNull:n=!0}={}){const r="POST",i=[];if(this.headers.Prefer&&i.push(this.headers.Prefer),s&&i.push(`count=${s}`),n||i.push("missing=default"),this.headers.Prefer=i.join(","),Array.isArray(e)){const o=e.reduce((l,c)=>l.concat(Object.keys(c)),[]);if(o.length>0){const l=[...new Set(o)].map(c=>`"${c}"`);this.url.searchParams.set("columns",l.join(","))}}return new fi.default({method:r,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}upsert(e,{onConflict:s,ignoreDuplicates:n=!1,count:r,defaultToNull:i=!0}={}){const o="POST",l=[`resolution=${n?"ignore":"merge"}-duplicates`];if(s!==void 0&&this.url.searchParams.set("on_conflict",s),this.headers.Prefer&&l.push(this.headers.Prefer),r&&l.push(`count=${r}`),i||l.push("missing=default"),this.headers.Prefer=l.join(","),Array.isArray(e)){const c=e.reduce((d,u)=>d.concat(Object.keys(u)),[]);if(c.length>0){const d=[...new Set(c)].map(u=>`"${u}"`);this.url.searchParams.set("columns",d.join(","))}}return new fi.default({method:o,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}update(e,{count:s}={}){const n="PATCH",r=[];return this.headers.Prefer&&r.push(this.headers.Prefer),s&&r.push(`count=${s}`),this.headers.Prefer=r.join(","),new fi.default({method:n,url:this.url,headers:this.headers,schema:this.schema,body:e,fetch:this.fetch,allowEmpty:!1})}delete({count:e}={}){const s="DELETE",n=[];return e&&n.push(`count=${e}`),this.headers.Prefer&&n.unshift(this.headers.Prefer),this.headers.Prefer=n.join(","),new fi.default({method:s,url:this.url,headers:this.headers,schema:this.schema,fetch:this.fetch,allowEmpty:!1})}};Vl.default=Q_;var Gl={},Yl={};Object.defineProperty(Yl,"__esModule",{value:!0});Yl.version=void 0;Yl.version="0.0.0-automated";Object.defineProperty(Gl,"__esModule",{value:!0});Gl.DEFAULT_HEADERS=void 0;const X_=Yl;Gl.DEFAULT_HEADERS={"X-Client-Info":`postgrest-js/${X_.version}`};var Wx=Kt&&Kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(Ph,"__esModule",{value:!0});const Z_=Wx(Vl),ej=Wx(Ea),tj=Gl;let sj=class qx{constructor(e,{headers:s={},schema:n,fetch:r}={}){this.url=e,this.headers=Object.assign(Object.assign({},tj.DEFAULT_HEADERS),s),this.schemaName=n,this.fetch=r}from(e){const s=new URL(`${this.url}/${e}`);return new Z_.default(s,{headers:Object.assign({},this.headers),schema:this.schemaName,fetch:this.fetch})}schema(e){return new qx(this.url,{headers:this.headers,schema:e,fetch:this.fetch})}rpc(e,s={},{head:n=!1,get:r=!1,count:i}={}){let o;const l=new URL(`${this.url}/rpc/${e}`);let c;n||r?(o=n?"HEAD":"GET",Object.entries(s).filter(([u,h])=>h!==void 0).map(([u,h])=>[u,Array.isArray(h)?`{${h.join(",")}}`:`${h}`]).forEach(([u,h])=>{l.searchParams.append(u,h)})):(o="POST",c=s);const d=Object.assign({},this.headers);return i&&(d.Prefer=`count=${i}`),new ej.default({method:o,url:l,headers:d,schema:this.schemaName,body:c,fetch:this.fetch,allowEmpty:!1})}};Ph.default=sj;var ei=Kt&&Kt.__importDefault||function(t){return t&&t.__esModule?t:{default:t}};Object.defineProperty(yt,"__esModule",{value:!0});yt.PostgrestError=yt.PostgrestBuilder=yt.PostgrestTransformBuilder=yt.PostgrestFilterBuilder=yt.PostgrestQueryBuilder=yt.PostgrestClient=void 0;const Kx=ei(Ph);yt.PostgrestClient=Kx.default;const Gx=ei(Vl);yt.PostgrestQueryBuilder=Gx.default;const Yx=ei(Ea);yt.PostgrestFilterBuilder=Yx.default;const Jx=ei(Wl);yt.PostgrestTransformBuilder=Jx.default;const Qx=ei(ql);yt.PostgrestBuilder=Qx.default;const Xx=ei(Kl);yt.PostgrestError=Xx.default;var nj=yt.default={PostgrestClient:Kx.default,PostgrestQueryBuilder:Gx.default,PostgrestFilterBuilder:Yx.default,PostgrestTransformBuilder:Jx.default,PostgrestBuilder:Qx.default,PostgrestError:Xx.default};const{PostgrestClient:rj,PostgrestQueryBuilder:lP,PostgrestFilterBuilder:cP,PostgrestTransformBuilder:dP,PostgrestBuilder:uP,PostgrestError:hP}=nj;function ij(){if(typeof WebSocket<"u")return WebSocket;if(typeof global.WebSocket<"u")return global.WebSocket;if(typeof window.WebSocket<"u")return window.WebSocket;if(typeof self.WebSocket<"u")return self.WebSocket;throw new Error("`WebSocket` is not supported in this environment")}const aj=ij(),oj="2.11.15",lj=`realtime-js/${oj}`,cj="1.0.0",Zx=1e4,dj=1e3;var Fi;(function(t){t[t.connecting=0]="connecting",t[t.open=1]="open",t[t.closing=2]="closing",t[t.closed=3]="closed"})(Fi||(Fi={}));var at;(function(t){t.closed="closed",t.errored="errored",t.joined="joined",t.joining="joining",t.leaving="leaving"})(at||(at={}));var es;(function(t){t.close="phx_close",t.error="phx_error",t.join="phx_join",t.reply="phx_reply",t.leave="phx_leave",t.access_token="access_token"})(es||(es={}));var iu;(function(t){t.websocket="websocket"})(iu||(iu={}));var $n;(function(t){t.Connecting="connecting",t.Open="open",t.Closing="closing",t.Closed="closed"})($n||($n={}));class uj{constructor(){this.HEADER_LENGTH=1}decode(e,s){return e.constructor===ArrayBuffer?s(this._binaryDecode(e)):s(typeof e=="string"?JSON.parse(e):{})}_binaryDecode(e){const s=new DataView(e),n=new TextDecoder;return this._decodeBroadcast(e,s,n)}_decodeBroadcast(e,s,n){const r=s.getUint8(1),i=s.getUint8(2);let o=this.HEADER_LENGTH+2;const l=n.decode(e.slice(o,o+r));o=o+r;const c=n.decode(e.slice(o,o+i));o=o+i;const d=JSON.parse(n.decode(e.slice(o,e.byteLength)));return{ref:null,topic:l,event:c,payload:d}}}class ey{constructor(e,s){this.callback=e,this.timerCalc=s,this.timer=void 0,this.tries=0,this.callback=e,this.timerCalc=s}reset(){this.tries=0,clearTimeout(this.timer)}scheduleTimeout(){clearTimeout(this.timer),this.timer=setTimeout(()=>{this.tries=this.tries+1,this.callback()},this.timerCalc(this.tries+1))}}var we;(function(t){t.abstime="abstime",t.bool="bool",t.date="date",t.daterange="daterange",t.float4="float4",t.float8="float8",t.int2="int2",t.int4="int4",t.int4range="int4range",t.int8="int8",t.int8range="int8range",t.json="json",t.jsonb="jsonb",t.money="money",t.numeric="numeric",t.oid="oid",t.reltime="reltime",t.text="text",t.time="time",t.timestamp="timestamp",t.timestamptz="timestamptz",t.timetz="timetz",t.tsrange="tsrange",t.tstzrange="tstzrange"})(we||(we={}));const _m=(t,e,s={})=>{var n;const r=(n=s.skipTypes)!==null&&n!==void 0?n:[];return Object.keys(e).reduce((i,o)=>(i[o]=hj(o,t,e,r),i),{})},hj=(t,e,s,n)=>{const r=e.find(l=>l.name===t),i=r==null?void 0:r.type,o=s[t];return i&&!n.includes(i)?ty(i,o):au(o)},ty=(t,e)=>{if(t.charAt(0)==="_"){const s=t.slice(1,t.length);return gj(e,s)}switch(t){case we.bool:return fj(e);case we.float4:case we.float8:case we.int2:case we.int4:case we.int8:case we.numeric:case we.oid:return mj(e);case we.json:case we.jsonb:return pj(e);case we.timestamp:return xj(e);case we.abstime:case we.date:case we.daterange:case we.int4range:case we.int8range:case we.money:case we.reltime:case we.text:case we.time:case we.timestamptz:case we.timetz:case we.tsrange:case we.tstzrange:return au(e);default:return au(e)}},au=t=>t,fj=t=>{switch(t){case"t":return!0;case"f":return!1;default:return t}},mj=t=>{if(typeof t=="string"){const e=parseFloat(t);if(!Number.isNaN(e))return e}return t},pj=t=>{if(typeof t=="string")try{return JSON.parse(t)}catch(e){return console.log(`JSON parse error: ${e}`),t}return t},gj=(t,e)=>{if(typeof t!="string")return t;const s=t.length-1,n=t[s];if(t[0]==="{"&&n==="}"){let i;const o=t.slice(1,s);try{i=JSON.parse("["+o+"]")}catch{i=o?o.split(","):[]}return i.map(l=>ty(e,l))}return t},xj=t=>typeof t=="string"?t.replace(" ","T"):t,sy=t=>{let e=t;return e=e.replace(/^ws/i,"http"),e=e.replace(/(\/socket\/websocket|\/socket|\/websocket)\/?$/i,""),e.replace(/\/+$/,"")};class zc{constructor(e,s,n={},r=Zx){this.channel=e,this.event=s,this.payload=n,this.timeout=r,this.sent=!1,this.timeoutTimer=void 0,this.ref="",this.receivedResp=null,this.recHooks=[],this.refEvent=null}resend(e){this.timeout=e,this._cancelRefEvent(),this.ref="",this.refEvent=null,this.receivedResp=null,this.sent=!1,this.send()}send(){this._hasReceived("timeout")||(this.startTimeout(),this.sent=!0,this.channel.socket.push({topic:this.channel.topic,event:this.event,payload:this.payload,ref:this.ref,join_ref:this.channel._joinRef()}))}updatePayload(e){this.payload=Object.assign(Object.assign({},this.payload),e)}receive(e,s){var n;return this._hasReceived(e)&&s((n=this.receivedResp)===null||n===void 0?void 0:n.response),this.recHooks.push({status:e,callback:s}),this}startTimeout(){if(this.timeoutTimer)return;this.ref=this.channel.socket._makeRef(),this.refEvent=this.channel._replyEventName(this.ref);const e=s=>{this._cancelRefEvent(),this._cancelTimeout(),this.receivedResp=s,this._matchReceive(s)};this.channel._on(this.refEvent,{},e),this.timeoutTimer=setTimeout(()=>{this.trigger("timeout",{})},this.timeout)}trigger(e,s){this.refEvent&&this.channel._trigger(this.refEvent,{status:e,response:s})}destroy(){this._cancelRefEvent(),this._cancelTimeout()}_cancelRefEvent(){this.refEvent&&this.channel._off(this.refEvent,{})}_cancelTimeout(){clearTimeout(this.timeoutTimer),this.timeoutTimer=void 0}_matchReceive({status:e,response:s}){this.recHooks.filter(n=>n.status===e).forEach(n=>n.callback(s))}_hasReceived(e){return this.receivedResp&&this.receivedResp.status===e}}var jm;(function(t){t.SYNC="sync",t.JOIN="join",t.LEAVE="leave"})(jm||(jm={}));class $i{constructor(e,s){this.channel=e,this.state={},this.pendingDiffs=[],this.joinRef=null,this.caller={onJoin:()=>{},onLeave:()=>{},onSync:()=>{}};const n=(s==null?void 0:s.events)||{state:"presence_state",diff:"presence_diff"};this.channel._on(n.state,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.joinRef=this.channel._joinRef(),this.state=$i.syncState(this.state,r,i,o),this.pendingDiffs.forEach(c=>{this.state=$i.syncDiff(this.state,c,i,o)}),this.pendingDiffs=[],l()}),this.channel._on(n.diff,{},r=>{const{onJoin:i,onLeave:o,onSync:l}=this.caller;this.inPendingSyncState()?this.pendingDiffs.push(r):(this.state=$i.syncDiff(this.state,r,i,o),l())}),this.onJoin((r,i,o)=>{this.channel._trigger("presence",{event:"join",key:r,currentPresences:i,newPresences:o})}),this.onLeave((r,i,o)=>{this.channel._trigger("presence",{event:"leave",key:r,currentPresences:i,leftPresences:o})}),this.onSync(()=>{this.channel._trigger("presence",{event:"sync"})})}static syncState(e,s,n,r){const i=this.cloneDeep(e),o=this.transformState(s),l={},c={};return this.map(i,(d,u)=>{o[d]||(c[d]=u)}),this.map(o,(d,u)=>{const h=i[d];if(h){const f=u.map(g=>g.presence_ref),m=h.map(g=>g.presence_ref),p=u.filter(g=>m.indexOf(g.presence_ref)<0),v=h.filter(g=>f.indexOf(g.presence_ref)<0);p.length>0&&(l[d]=p),v.length>0&&(c[d]=v)}else l[d]=u}),this.syncDiff(i,{joins:l,leaves:c},n,r)}static syncDiff(e,s,n,r){const{joins:i,leaves:o}={joins:this.transformState(s.joins),leaves:this.transformState(s.leaves)};return n||(n=()=>{}),r||(r=()=>{}),this.map(i,(l,c)=>{var d;const u=(d=e[l])!==null&&d!==void 0?d:[];if(e[l]=this.cloneDeep(c),u.length>0){const h=e[l].map(m=>m.presence_ref),f=u.filter(m=>h.indexOf(m.presence_ref)<0);e[l].unshift(...f)}n(l,u,c)}),this.map(o,(l,c)=>{let d=e[l];if(!d)return;const u=c.map(h=>h.presence_ref);d=d.filter(h=>u.indexOf(h.presence_ref)<0),e[l]=d,r(l,d,c),d.length===0&&delete e[l]}),e}static map(e,s){return Object.getOwnPropertyNames(e).map(n=>s(n,e[n]))}static transformState(e){return e=this.cloneDeep(e),Object.getOwnPropertyNames(e).reduce((s,n)=>{const r=e[n];return"metas"in r?s[n]=r.metas.map(i=>(i.presence_ref=i.phx_ref,delete i.phx_ref,delete i.phx_ref_prev,i)):s[n]=r,s},{})}static cloneDeep(e){return JSON.parse(JSON.stringify(e))}onJoin(e){this.caller.onJoin=e}onLeave(e){this.caller.onLeave=e}onSync(e){this.caller.onSync=e}inPendingSyncState(){return!this.joinRef||this.joinRef!==this.channel._joinRef()}}var Nm;(function(t){t.ALL="*",t.INSERT="INSERT",t.UPDATE="UPDATE",t.DELETE="DELETE"})(Nm||(Nm={}));var km;(function(t){t.BROADCAST="broadcast",t.PRESENCE="presence",t.POSTGRES_CHANGES="postgres_changes",t.SYSTEM="system"})(km||(km={}));var Ts;(function(t){t.SUBSCRIBED="SUBSCRIBED",t.TIMED_OUT="TIMED_OUT",t.CLOSED="CLOSED",t.CHANNEL_ERROR="CHANNEL_ERROR"})(Ts||(Ts={}));class Ah{constructor(e,s={config:{}},n){this.topic=e,this.params=s,this.socket=n,this.bindings={},this.state=at.closed,this.joinedOnce=!1,this.pushBuffer=[],this.subTopic=e.replace(/^realtime:/i,""),this.params.config=Object.assign({broadcast:{ack:!1,self:!1},presence:{key:""},private:!1},s.config),this.timeout=this.socket.timeout,this.joinPush=new zc(this,es.join,this.params,this.timeout),this.rejoinTimer=new ey(()=>this._rejoinUntilConnected(),this.socket.reconnectAfterMs),this.joinPush.receive("ok",()=>{this.state=at.joined,this.rejoinTimer.reset(),this.pushBuffer.forEach(r=>r.send()),this.pushBuffer=[]}),this._onClose(()=>{this.rejoinTimer.reset(),this.socket.log("channel",`close ${this.topic} ${this._joinRef()}`),this.state=at.closed,this.socket._remove(this)}),this._onError(r=>{this._isLeaving()||this._isClosed()||(this.socket.log("channel",`error ${this.topic}`,r),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this.joinPush.receive("timeout",()=>{this._isJoining()&&(this.socket.log("channel",`timeout ${this.topic}`,this.joinPush.timeout),this.state=at.errored,this.rejoinTimer.scheduleTimeout())}),this._on(es.reply,{},(r,i)=>{this._trigger(this._replyEventName(i),r)}),this.presence=new $i(this),this.broadcastEndpointURL=sy(this.socket.endPoint)+"/api/broadcast",this.private=this.params.config.private||!1}subscribe(e,s=this.timeout){var n,r;if(this.socket.isConnected()||this.socket.connect(),this.state==at.closed){const{config:{broadcast:i,presence:o,private:l}}=this.params;this._onError(u=>e==null?void 0:e(Ts.CHANNEL_ERROR,u)),this._onClose(()=>e==null?void 0:e(Ts.CLOSED));const c={},d={broadcast:i,presence:o,postgres_changes:(r=(n=this.bindings.postgres_changes)===null||n===void 0?void 0:n.map(u=>u.filter))!==null&&r!==void 0?r:[],private:l};this.socket.accessTokenValue&&(c.access_token=this.socket.accessTokenValue),this.updateJoinPayload(Object.assign({config:d},c)),this.joinedOnce=!0,this._rejoin(s),this.joinPush.receive("ok",async({postgres_changes:u})=>{var h;if(this.socket.setAuth(),u===void 0){e==null||e(Ts.SUBSCRIBED);return}else{const f=this.bindings.postgres_changes,m=(h=f==null?void 0:f.length)!==null&&h!==void 0?h:0,p=[];for(let v=0;v<m;v++){const g=f[v],{filter:{event:x,schema:y,table:b,filter:N}}=g,_=u&&u[v];if(_&&_.event===x&&_.schema===y&&_.table===b&&_.filter===N)p.push(Object.assign(Object.assign({},g),{id:_.id}));else{this.unsubscribe(),this.state=at.errored,e==null||e(Ts.CHANNEL_ERROR,new Error("mismatch between server and client bindings for postgres changes"));return}}this.bindings.postgres_changes=p,e&&e(Ts.SUBSCRIBED);return}}).receive("error",u=>{this.state=at.errored,e==null||e(Ts.CHANNEL_ERROR,new Error(JSON.stringify(Object.values(u).join(", ")||"error")))}).receive("timeout",()=>{e==null||e(Ts.TIMED_OUT)})}return this}presenceState(){return this.presence.state}async track(e,s={}){return await this.send({type:"presence",event:"track",payload:e},s.timeout||this.timeout)}async untrack(e={}){return await this.send({type:"presence",event:"untrack"},e)}on(e,s,n){return this._on(e,s,n)}async send(e,s={}){var n,r;if(!this._canPush()&&e.type==="broadcast"){const{event:i,payload:o}=e,c={method:"POST",headers:{Authorization:this.socket.accessTokenValue?`Bearer ${this.socket.accessTokenValue}`:"",apikey:this.socket.apiKey?this.socket.apiKey:"","Content-Type":"application/json"},body:JSON.stringify({messages:[{topic:this.subTopic,event:i,payload:o,private:this.private}]})};try{const d=await this._fetchWithTimeout(this.broadcastEndpointURL,c,(n=s.timeout)!==null&&n!==void 0?n:this.timeout);return await((r=d.body)===null||r===void 0?void 0:r.cancel()),d.ok?"ok":"error"}catch(d){return d.name==="AbortError"?"timed out":"error"}}else return new Promise(i=>{var o,l,c;const d=this._push(e.type,e,s.timeout||this.timeout);e.type==="broadcast"&&!(!((c=(l=(o=this.params)===null||o===void 0?void 0:o.config)===null||l===void 0?void 0:l.broadcast)===null||c===void 0)&&c.ack)&&i("ok"),d.receive("ok",()=>i("ok")),d.receive("error",()=>i("error")),d.receive("timeout",()=>i("timed out"))})}updateJoinPayload(e){this.joinPush.updatePayload(e)}unsubscribe(e=this.timeout){this.state=at.leaving;const s=()=>{this.socket.log("channel",`leave ${this.topic}`),this._trigger(es.close,"leave",this._joinRef())};this.joinPush.destroy();let n=null;return new Promise(r=>{n=new zc(this,es.leave,{},e),n.receive("ok",()=>{s(),r("ok")}).receive("timeout",()=>{s(),r("timed out")}).receive("error",()=>{r("error")}),n.send(),this._canPush()||n.trigger("ok",{})}).finally(()=>{n==null||n.destroy()})}teardown(){this.pushBuffer.forEach(e=>e.destroy()),this.rejoinTimer&&clearTimeout(this.rejoinTimer.timer),this.joinPush.destroy()}async _fetchWithTimeout(e,s,n){const r=new AbortController,i=setTimeout(()=>r.abort(),n),o=await this.socket.fetch(e,Object.assign(Object.assign({},s),{signal:r.signal}));return clearTimeout(i),o}_push(e,s,n=this.timeout){if(!this.joinedOnce)throw`tried to push '${e}' to '${this.topic}' before joining. Use channel.subscribe() before pushing events`;let r=new zc(this,e,s,n);return this._canPush()?r.send():(r.startTimeout(),this.pushBuffer.push(r)),r}_onMessage(e,s,n){return s}_isMember(e){return this.topic===e}_joinRef(){return this.joinPush.ref}_trigger(e,s,n){var r,i;const o=e.toLocaleLowerCase(),{close:l,error:c,leave:d,join:u}=es;if(n&&[l,c,d,u].indexOf(o)>=0&&n!==this._joinRef())return;let f=this._onMessage(o,s,n);if(s&&!f)throw"channel onMessage callbacks must return the payload, modified or unmodified";["insert","update","delete"].includes(o)?(r=this.bindings.postgres_changes)===null||r===void 0||r.filter(m=>{var p,v,g;return((p=m.filter)===null||p===void 0?void 0:p.event)==="*"||((g=(v=m.filter)===null||v===void 0?void 0:v.event)===null||g===void 0?void 0:g.toLocaleLowerCase())===o}).map(m=>m.callback(f,n)):(i=this.bindings[o])===null||i===void 0||i.filter(m=>{var p,v,g,x,y,b;if(["broadcast","presence","postgres_changes"].includes(o))if("id"in m){const N=m.id,_=(p=m.filter)===null||p===void 0?void 0:p.event;return N&&((v=s.ids)===null||v===void 0?void 0:v.includes(N))&&(_==="*"||(_==null?void 0:_.toLocaleLowerCase())===((g=s.data)===null||g===void 0?void 0:g.type.toLocaleLowerCase()))}else{const N=(y=(x=m==null?void 0:m.filter)===null||x===void 0?void 0:x.event)===null||y===void 0?void 0:y.toLocaleLowerCase();return N==="*"||N===((b=s==null?void 0:s.event)===null||b===void 0?void 0:b.toLocaleLowerCase())}else return m.type.toLocaleLowerCase()===o}).map(m=>{if(typeof f=="object"&&"ids"in f){const p=f.data,{schema:v,table:g,commit_timestamp:x,type:y,errors:b}=p;f=Object.assign(Object.assign({},{schema:v,table:g,commit_timestamp:x,eventType:y,new:{},old:{},errors:b}),this._getPayloadRecords(p))}m.callback(f,n)})}_isClosed(){return this.state===at.closed}_isJoined(){return this.state===at.joined}_isJoining(){return this.state===at.joining}_isLeaving(){return this.state===at.leaving}_replyEventName(e){return`chan_reply_${e}`}_on(e,s,n){const r=e.toLocaleLowerCase(),i={type:r,filter:s,callback:n};return this.bindings[r]?this.bindings[r].push(i):this.bindings[r]=[i],this}_off(e,s){const n=e.toLocaleLowerCase();return this.bindings[n]=this.bindings[n].filter(r=>{var i;return!(((i=r.type)===null||i===void 0?void 0:i.toLocaleLowerCase())===n&&Ah.isEqual(r.filter,s))}),this}static isEqual(e,s){if(Object.keys(e).length!==Object.keys(s).length)return!1;for(const n in e)if(e[n]!==s[n])return!1;return!0}_rejoinUntilConnected(){this.rejoinTimer.scheduleTimeout(),this.socket.isConnected()&&this._rejoin()}_onClose(e){this._on(es.close,{},e)}_onError(e){this._on(es.error,{},s=>e(s))}_canPush(){return this.socket.isConnected()&&this._isJoined()}_rejoin(e=this.timeout){this._isLeaving()||(this.socket._leaveOpenTopic(this.topic),this.state=at.joining,this.joinPush.resend(e))}_getPayloadRecords(e){const s={new:{},old:{}};return(e.type==="INSERT"||e.type==="UPDATE")&&(s.new=_m(e.columns,e.record)),(e.type==="UPDATE"||e.type==="DELETE")&&(s.old=_m(e.columns,e.old_record)),s}}const Sm=()=>{},yj=`
  addEventListener("message", (e) => {
    if (e.data.event === "start") {
      setInterval(() => postMessage({ event: "keepAlive" }), e.data.interval);
    }
  });`;class vj{constructor(e,s){var n;this.accessTokenValue=null,this.apiKey=null,this.channels=new Array,this.endPoint="",this.httpEndpoint="",this.headers={},this.params={},this.timeout=Zx,this.heartbeatIntervalMs=25e3,this.heartbeatTimer=void 0,this.pendingHeartbeatRef=null,this.heartbeatCallback=Sm,this.ref=0,this.logger=Sm,this.conn=null,this.sendBuffer=[],this.serializer=new uj,this.stateChangeCallbacks={open:[],close:[],error:[],message:[]},this.accessToken=null,this._resolveFetch=i=>{let o;return i?o=i:typeof fetch>"u"?o=(...l)=>ar(()=>Promise.resolve().then(()=>Zr),void 0).then(({default:c})=>c(...l)):o=fetch,(...l)=>o(...l)},this.endPoint=`${e}/${iu.websocket}`,this.httpEndpoint=sy(e),s!=null&&s.transport?this.transport=s.transport:this.transport=null,s!=null&&s.params&&(this.params=s.params),s!=null&&s.timeout&&(this.timeout=s.timeout),s!=null&&s.logger&&(this.logger=s.logger),(s!=null&&s.logLevel||s!=null&&s.log_level)&&(this.logLevel=s.logLevel||s.log_level,this.params=Object.assign(Object.assign({},this.params),{log_level:this.logLevel})),s!=null&&s.heartbeatIntervalMs&&(this.heartbeatIntervalMs=s.heartbeatIntervalMs);const r=(n=s==null?void 0:s.params)===null||n===void 0?void 0:n.apikey;if(r&&(this.accessTokenValue=r,this.apiKey=r),this.reconnectAfterMs=s!=null&&s.reconnectAfterMs?s.reconnectAfterMs:i=>[1e3,2e3,5e3,1e4][i-1]||1e4,this.encode=s!=null&&s.encode?s.encode:(i,o)=>o(JSON.stringify(i)),this.decode=s!=null&&s.decode?s.decode:this.serializer.decode.bind(this.serializer),this.reconnectTimer=new ey(async()=>{this.disconnect(),this.connect()},this.reconnectAfterMs),this.fetch=this._resolveFetch(s==null?void 0:s.fetch),s!=null&&s.worker){if(typeof window<"u"&&!window.Worker)throw new Error("Web Worker is not supported");this.worker=(s==null?void 0:s.worker)||!1,this.workerUrl=s==null?void 0:s.workerUrl}this.accessToken=(s==null?void 0:s.accessToken)||null}connect(){if(!this.conn){if(this.transport||(this.transport=aj),!this.transport)throw new Error("No transport provided");this.conn=new this.transport(this.endpointURL()),this.setupConnection()}}endpointURL(){return this._appendParams(this.endPoint,Object.assign({},this.params,{vsn:cj}))}disconnect(e,s){this.conn&&(this.conn.onclose=function(){},e?this.conn.close(e,s??""):this.conn.close(),this.conn=null,this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.reset(),this.channels.forEach(n=>n.teardown()))}getChannels(){return this.channels}async removeChannel(e){const s=await e.unsubscribe();return this.channels.length===0&&this.disconnect(),s}async removeAllChannels(){const e=await Promise.all(this.channels.map(s=>s.unsubscribe()));return this.channels=[],this.disconnect(),e}log(e,s,n){this.logger(e,s,n)}connectionState(){switch(this.conn&&this.conn.readyState){case Fi.connecting:return $n.Connecting;case Fi.open:return $n.Open;case Fi.closing:return $n.Closing;default:return $n.Closed}}isConnected(){return this.connectionState()===$n.Open}channel(e,s={config:{}}){const n=`realtime:${e}`,r=this.getChannels().find(i=>i.topic===n);if(r)return r;{const i=new Ah(`realtime:${e}`,s,this);return this.channels.push(i),i}}push(e){const{topic:s,event:n,payload:r,ref:i}=e,o=()=>{this.encode(e,l=>{var c;(c=this.conn)===null||c===void 0||c.send(l)})};this.log("push",`${s} ${n} (${i})`,r),this.isConnected()?o():this.sendBuffer.push(o)}async setAuth(e=null){let s=e||this.accessToken&&await this.accessToken()||this.accessTokenValue;this.accessTokenValue!=s&&(this.accessTokenValue=s,this.channels.forEach(n=>{const r={access_token:s,version:lj};s&&n.updateJoinPayload(r),n.joinedOnce&&n._isJoined()&&n._push(es.access_token,{access_token:s})}))}async sendHeartbeat(){var e;if(!this.isConnected()){this.heartbeatCallback("disconnected");return}if(this.pendingHeartbeatRef){this.pendingHeartbeatRef=null,this.log("transport","heartbeat timeout. Attempting to re-establish connection"),this.heartbeatCallback("timeout"),(e=this.conn)===null||e===void 0||e.close(dj,"hearbeat timeout");return}this.pendingHeartbeatRef=this._makeRef(),this.push({topic:"phoenix",event:"heartbeat",payload:{},ref:this.pendingHeartbeatRef}),this.heartbeatCallback("sent"),await this.setAuth()}onHeartbeat(e){this.heartbeatCallback=e}flushSendBuffer(){this.isConnected()&&this.sendBuffer.length>0&&(this.sendBuffer.forEach(e=>e()),this.sendBuffer=[])}_makeRef(){let e=this.ref+1;return e===this.ref?this.ref=0:this.ref=e,this.ref.toString()}_leaveOpenTopic(e){let s=this.channels.find(n=>n.topic===e&&(n._isJoined()||n._isJoining()));s&&(this.log("transport",`leaving duplicate topic "${e}"`),s.unsubscribe())}_remove(e){this.channels=this.channels.filter(s=>s.topic!==e.topic)}setupConnection(){this.conn&&(this.conn.binaryType="arraybuffer",this.conn.onopen=()=>this._onConnOpen(),this.conn.onerror=e=>this._onConnError(e),this.conn.onmessage=e=>this._onConnMessage(e),this.conn.onclose=e=>this._onConnClose(e))}_onConnMessage(e){this.decode(e.data,s=>{let{topic:n,event:r,payload:i,ref:o}=s;n==="phoenix"&&r==="phx_reply"&&this.heartbeatCallback(s.payload.status=="ok"?"ok":"error"),o&&o===this.pendingHeartbeatRef&&(this.pendingHeartbeatRef=null),this.log("receive",`${i.status||""} ${n} ${r} ${o&&"("+o+")"||""}`,i),Array.from(this.channels).filter(l=>l._isMember(n)).forEach(l=>l._trigger(r,i,o)),this.stateChangeCallbacks.message.forEach(l=>l(s))})}_onConnOpen(){this.log("transport",`connected to ${this.endpointURL()}`),this.flushSendBuffer(),this.reconnectTimer.reset(),this.worker?this.workerRef||this._startWorkerHeartbeat():this._startHeartbeat(),this.stateChangeCallbacks.open.forEach(e=>e())}_startHeartbeat(){this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.heartbeatTimer=setInterval(()=>this.sendHeartbeat(),this.heartbeatIntervalMs)}_startWorkerHeartbeat(){this.workerUrl?this.log("worker",`starting worker for from ${this.workerUrl}`):this.log("worker","starting default worker");const e=this._workerObjectUrl(this.workerUrl);this.workerRef=new Worker(e),this.workerRef.onerror=s=>{this.log("worker","worker error",s.message),this.workerRef.terminate()},this.workerRef.onmessage=s=>{s.data.event==="keepAlive"&&this.sendHeartbeat()},this.workerRef.postMessage({event:"start",interval:this.heartbeatIntervalMs})}_onConnClose(e){this.log("transport","close",e),this._triggerChanError(),this.heartbeatTimer&&clearInterval(this.heartbeatTimer),this.reconnectTimer.scheduleTimeout(),this.stateChangeCallbacks.close.forEach(s=>s(e))}_onConnError(e){this.log("transport",`${e}`),this._triggerChanError(),this.stateChangeCallbacks.error.forEach(s=>s(e))}_triggerChanError(){this.channels.forEach(e=>e._trigger(es.error))}_appendParams(e,s){if(Object.keys(s).length===0)return e;const n=e.match(/\?/)?"&":"?",r=new URLSearchParams(s);return`${e}${n}${r}`}_workerObjectUrl(e){let s;if(e)s=e;else{const n=new Blob([yj],{type:"application/javascript"});s=URL.createObjectURL(n)}return s}}class Lh extends Error{constructor(e){super(e),this.__isStorageError=!0,this.name="StorageError"}}function Ye(t){return typeof t=="object"&&t!==null&&"__isStorageError"in t}class bj extends Lh{constructor(e,s){super(e),this.name="StorageApiError",this.status=s}toJSON(){return{name:this.name,message:this.message,status:this.status}}}class ou extends Lh{constructor(e,s){super(e),this.name="StorageUnknownError",this.originalError=s}}var wj=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const ny=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ar(()=>Promise.resolve().then(()=>Zr),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},_j=()=>wj(void 0,void 0,void 0,function*(){return typeof Response>"u"?(yield ar(()=>Promise.resolve().then(()=>Zr),void 0)).Response:Response}),lu=t=>{if(Array.isArray(t))return t.map(s=>lu(s));if(typeof t=="function"||t!==Object(t))return t;const e={};return Object.entries(t).forEach(([s,n])=>{const r=s.replace(/([-_][a-z])/gi,i=>i.toUpperCase().replace(/[-_]/g,""));e[r]=lu(n)}),e};var or=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Uc=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),jj=(t,e,s)=>or(void 0,void 0,void 0,function*(){const n=yield _j();t instanceof n&&!(s!=null&&s.noResolveJson)?t.json().then(r=>{e(new bj(Uc(r),t.status||500))}).catch(r=>{e(new ou(Uc(r),r))}):e(new ou(Uc(t),t))}),Nj=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json"},e==null?void 0:e.headers),n&&(r.body=JSON.stringify(n)),Object.assign(Object.assign({},r),s))};function Pa(t,e,s,n,r,i){return or(this,void 0,void 0,function*(){return new Promise((o,l)=>{t(s,Nj(e,n,r,i)).then(c=>{if(!c.ok)throw c;return n!=null&&n.noResolveJson?c:c.json()}).then(c=>o(c)).catch(c=>jj(c,l,n))})})}function ml(t,e,s,n){return or(this,void 0,void 0,function*(){return Pa(t,"GET",e,s,n)})}function Xs(t,e,s,n,r){return or(this,void 0,void 0,function*(){return Pa(t,"POST",e,n,r,s)})}function kj(t,e,s,n,r){return or(this,void 0,void 0,function*(){return Pa(t,"PUT",e,n,r,s)})}function Sj(t,e,s,n){return or(this,void 0,void 0,function*(){return Pa(t,"HEAD",e,Object.assign(Object.assign({},s),{noResolveJson:!0}),n)})}function ry(t,e,s,n,r){return or(this,void 0,void 0,function*(){return Pa(t,"DELETE",e,n,r,s)})}var pt=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const Cj={limit:100,offset:0,sortBy:{column:"name",order:"asc"}},Cm={cacheControl:"3600",contentType:"text/plain;charset=UTF-8",upsert:!1};class Ej{constructor(e,s={},n,r){this.url=e,this.headers=s,this.bucketId=n,this.fetch=ny(r)}uploadOrUpdate(e,s,n,r){return pt(this,void 0,void 0,function*(){try{let i;const o=Object.assign(Object.assign({},Cm),r);let l=Object.assign(Object.assign({},this.headers),e==="POST"&&{"x-upsert":String(o.upsert)});const c=o.metadata;typeof Blob<"u"&&n instanceof Blob?(i=new FormData,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c)),i.append("",n)):typeof FormData<"u"&&n instanceof FormData?(i=n,i.append("cacheControl",o.cacheControl),c&&i.append("metadata",this.encodeMetadata(c))):(i=n,l["cache-control"]=`max-age=${o.cacheControl}`,l["content-type"]=o.contentType,c&&(l["x-metadata"]=this.toBase64(this.encodeMetadata(c)))),r!=null&&r.headers&&(l=Object.assign(Object.assign({},l),r.headers));const d=this._removeEmptyFolders(s),u=this._getFinalPath(d),h=yield this.fetch(`${this.url}/object/${u}`,Object.assign({method:e,body:i,headers:l},o!=null&&o.duplex?{duplex:o.duplex}:{})),f=yield h.json();return h.ok?{data:{path:d,id:f.Id,fullPath:f.Key},error:null}:{data:null,error:f}}catch(i){if(Ye(i))return{data:null,error:i};throw i}})}upload(e,s,n){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("POST",e,s,n)})}uploadToSignedUrl(e,s,n,r){return pt(this,void 0,void 0,function*(){const i=this._removeEmptyFolders(e),o=this._getFinalPath(i),l=new URL(this.url+`/object/upload/sign/${o}`);l.searchParams.set("token",s);try{let c;const d=Object.assign({upsert:Cm.upsert},r),u=Object.assign(Object.assign({},this.headers),{"x-upsert":String(d.upsert)});typeof Blob<"u"&&n instanceof Blob?(c=new FormData,c.append("cacheControl",d.cacheControl),c.append("",n)):typeof FormData<"u"&&n instanceof FormData?(c=n,c.append("cacheControl",d.cacheControl)):(c=n,u["cache-control"]=`max-age=${d.cacheControl}`,u["content-type"]=d.contentType);const h=yield this.fetch(l.toString(),{method:"PUT",body:c,headers:u}),f=yield h.json();return h.ok?{data:{path:i,fullPath:f.Key},error:null}:{data:null,error:f}}catch(c){if(Ye(c))return{data:null,error:c};throw c}})}createSignedUploadUrl(e,s){return pt(this,void 0,void 0,function*(){try{let n=this._getFinalPath(e);const r=Object.assign({},this.headers);s!=null&&s.upsert&&(r["x-upsert"]="true");const i=yield Xs(this.fetch,`${this.url}/object/upload/sign/${n}`,{},{headers:r}),o=new URL(this.url+i.url),l=o.searchParams.get("token");if(!l)throw new Lh("No token returned by API");return{data:{signedUrl:o.toString(),path:e,token:l},error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}})}update(e,s,n){return pt(this,void 0,void 0,function*(){return this.uploadOrUpdate("PUT",e,s,n)})}move(e,s,n){return pt(this,void 0,void 0,function*(){try{return{data:yield Xs(this.fetch,`${this.url}/object/move`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers}),error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}copy(e,s,n){return pt(this,void 0,void 0,function*(){try{return{data:{path:(yield Xs(this.fetch,`${this.url}/object/copy`,{bucketId:this.bucketId,sourceKey:e,destinationKey:s,destinationBucket:n==null?void 0:n.destinationBucket},{headers:this.headers})).Key},error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}createSignedUrl(e,s,n){return pt(this,void 0,void 0,function*(){try{let r=this._getFinalPath(e),i=yield Xs(this.fetch,`${this.url}/object/sign/${r}`,Object.assign({expiresIn:s},n!=null&&n.transform?{transform:n.transform}:{}),{headers:this.headers});const o=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return i={signedUrl:encodeURI(`${this.url}${i.signedURL}${o}`)},{data:i,error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}createSignedUrls(e,s,n){return pt(this,void 0,void 0,function*(){try{const r=yield Xs(this.fetch,`${this.url}/object/sign/${this.bucketId}`,{expiresIn:s,paths:e},{headers:this.headers}),i=n!=null&&n.download?`&download=${n.download===!0?"":n.download}`:"";return{data:r.map(o=>Object.assign(Object.assign({},o),{signedUrl:o.signedURL?encodeURI(`${this.url}${o.signedURL}${i}`):null})),error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}download(e,s){return pt(this,void 0,void 0,function*(){const r=typeof(s==null?void 0:s.transform)<"u"?"render/image/authenticated":"object",i=this.transformOptsToQueryString((s==null?void 0:s.transform)||{}),o=i?`?${i}`:"";try{const l=this._getFinalPath(e);return{data:yield(yield ml(this.fetch,`${this.url}/${r}/${l}${o}`,{headers:this.headers,noResolveJson:!0})).blob(),error:null}}catch(l){if(Ye(l))return{data:null,error:l};throw l}})}info(e){return pt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{const n=yield ml(this.fetch,`${this.url}/object/info/${s}`,{headers:this.headers});return{data:lu(n),error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}})}exists(e){return pt(this,void 0,void 0,function*(){const s=this._getFinalPath(e);try{return yield Sj(this.fetch,`${this.url}/object/${s}`,{headers:this.headers}),{data:!0,error:null}}catch(n){if(Ye(n)&&n instanceof ou){const r=n.originalError;if([400,404].includes(r==null?void 0:r.status))return{data:!1,error:n}}throw n}})}getPublicUrl(e,s){const n=this._getFinalPath(e),r=[],i=s!=null&&s.download?`download=${s.download===!0?"":s.download}`:"";i!==""&&r.push(i);const l=typeof(s==null?void 0:s.transform)<"u"?"render/image":"object",c=this.transformOptsToQueryString((s==null?void 0:s.transform)||{});c!==""&&r.push(c);let d=r.join("&");return d!==""&&(d=`?${d}`),{data:{publicUrl:encodeURI(`${this.url}/${l}/public/${n}${d}`)}}}remove(e){return pt(this,void 0,void 0,function*(){try{return{data:yield ry(this.fetch,`${this.url}/object/${this.bucketId}`,{prefixes:e},{headers:this.headers}),error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}})}list(e,s,n){return pt(this,void 0,void 0,function*(){try{const r=Object.assign(Object.assign(Object.assign({},Cj),s),{prefix:e||""});return{data:yield Xs(this.fetch,`${this.url}/object/list/${this.bucketId}`,r,{headers:this.headers},n),error:null}}catch(r){if(Ye(r))return{data:null,error:r};throw r}})}encodeMetadata(e){return JSON.stringify(e)}toBase64(e){return typeof Buffer<"u"?Buffer.from(e).toString("base64"):btoa(e)}_getFinalPath(e){return`${this.bucketId}/${e}`}_removeEmptyFolders(e){return e.replace(/^\/|\/$/g,"").replace(/\/+/g,"/")}transformOptsToQueryString(e){const s=[];return e.width&&s.push(`width=${e.width}`),e.height&&s.push(`height=${e.height}`),e.resize&&s.push(`resize=${e.resize}`),e.format&&s.push(`format=${e.format}`),e.quality&&s.push(`quality=${e.quality}`),s.join("&")}}const Pj="2.7.1",Aj={"X-Client-Info":`storage-js/${Pj}`};var dr=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class Lj{constructor(e,s={},n){this.url=e,this.headers=Object.assign(Object.assign({},Aj),s),this.fetch=ny(n)}listBuckets(){return dr(this,void 0,void 0,function*(){try{return{data:yield ml(this.fetch,`${this.url}/bucket`,{headers:this.headers}),error:null}}catch(e){if(Ye(e))return{data:null,error:e};throw e}})}getBucket(e){return dr(this,void 0,void 0,function*(){try{return{data:yield ml(this.fetch,`${this.url}/bucket/${e}`,{headers:this.headers}),error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}})}createBucket(e,s={public:!1}){return dr(this,void 0,void 0,function*(){try{return{data:yield Xs(this.fetch,`${this.url}/bucket`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}})}updateBucket(e,s){return dr(this,void 0,void 0,function*(){try{return{data:yield kj(this.fetch,`${this.url}/bucket/${e}`,{id:e,name:e,public:s.public,file_size_limit:s.fileSizeLimit,allowed_mime_types:s.allowedMimeTypes},{headers:this.headers}),error:null}}catch(n){if(Ye(n))return{data:null,error:n};throw n}})}emptyBucket(e){return dr(this,void 0,void 0,function*(){try{return{data:yield Xs(this.fetch,`${this.url}/bucket/${e}/empty`,{},{headers:this.headers}),error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}})}deleteBucket(e){return dr(this,void 0,void 0,function*(){try{return{data:yield ry(this.fetch,`${this.url}/bucket/${e}`,{},{headers:this.headers}),error:null}}catch(s){if(Ye(s))return{data:null,error:s};throw s}})}}class Tj extends Lj{constructor(e,s={},n){super(e,s,n)}from(e){return new Ej(this.url,this.headers,e,this.fetch)}}const Mj="2.50.3";let ki="";typeof Deno<"u"?ki="deno":typeof document<"u"?ki="web":typeof navigator<"u"&&navigator.product==="ReactNative"?ki="react-native":ki="node";const Dj={"X-Client-Info":`supabase-js-${ki}/${Mj}`},Oj={headers:Dj},Rj={schema:"public"},Ij={autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,flowType:"implicit"},Fj={};var $j=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};const zj=t=>{let e;return t?e=t:typeof fetch>"u"?e=Bx:e=fetch,(...s)=>e(...s)},Uj=()=>typeof Headers>"u"?Hx:Headers,Bj=(t,e,s)=>{const n=zj(s),r=Uj();return(i,o)=>$j(void 0,void 0,void 0,function*(){var l;const c=(l=yield e())!==null&&l!==void 0?l:t;let d=new r(o==null?void 0:o.headers);return d.has("apikey")||d.set("apikey",t),d.has("Authorization")||d.set("Authorization",`Bearer ${c}`),n(i,Object.assign(Object.assign({},o),{headers:d}))})};var Hj=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};function Vj(t){return t.endsWith("/")?t:t+"/"}function Wj(t,e){var s,n;const{db:r,auth:i,realtime:o,global:l}=t,{db:c,auth:d,realtime:u,global:h}=e,f={db:Object.assign(Object.assign({},c),r),auth:Object.assign(Object.assign({},d),i),realtime:Object.assign(Object.assign({},u),o),global:Object.assign(Object.assign(Object.assign({},h),l),{headers:Object.assign(Object.assign({},(s=h==null?void 0:h.headers)!==null&&s!==void 0?s:{}),(n=l==null?void 0:l.headers)!==null&&n!==void 0?n:{})}),accessToken:()=>Hj(this,void 0,void 0,function*(){return""})};return t.accessToken?f.accessToken=t.accessToken:delete f.accessToken,f}const iy="2.70.0",pr=30*1e3,cu=3,Bc=cu*pr,qj="http://localhost:9999",Kj="supabase.auth.token",Gj={"X-Client-Info":`gotrue-js/${iy}`},du="X-Supabase-Api-Version",ay={"2024-01-01":{timestamp:Date.parse("2024-01-01T00:00:00.0Z"),name:"2024-01-01"}},Yj=/^([a-z0-9_-]{4})*($|[a-z0-9_-]{3}$|[a-z0-9_-]{2}$)$/i,Jj=6e5;class Th extends Error{constructor(e,s,n){super(e),this.__isAuthError=!0,this.name="AuthError",this.status=s,this.code=n}}function ae(t){return typeof t=="object"&&t!==null&&"__isAuthError"in t}class Qj extends Th{constructor(e,s,n){super(e,s,n),this.name="AuthApiError",this.status=s,this.code=n}}function Xj(t){return ae(t)&&t.name==="AuthApiError"}class oy extends Th{constructor(e,s){super(e),this.name="AuthUnknownError",this.originalError=s}}class Cn extends Th{constructor(e,s,n,r){super(e,n,r),this.name=s,this.status=n}}class Ys extends Cn{constructor(){super("Auth session missing!","AuthSessionMissingError",400,void 0)}}function Zj(t){return ae(t)&&t.name==="AuthSessionMissingError"}class Ja extends Cn{constructor(){super("Auth session or user missing","AuthInvalidTokenResponseError",500,void 0)}}class Qa extends Cn{constructor(e){super(e,"AuthInvalidCredentialsError",400,void 0)}}class Xa extends Cn{constructor(e,s=null){super(e,"AuthImplicitGrantRedirectError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}function eN(t){return ae(t)&&t.name==="AuthImplicitGrantRedirectError"}class Em extends Cn{constructor(e,s=null){super(e,"AuthPKCEGrantCodeExchangeError",500,void 0),this.details=null,this.details=s}toJSON(){return{name:this.name,message:this.message,status:this.status,details:this.details}}}class uu extends Cn{constructor(e,s){super(e,"AuthRetryableFetchError",s,void 0)}}function Hc(t){return ae(t)&&t.name==="AuthRetryableFetchError"}class Pm extends Cn{constructor(e,s,n){super(e,"AuthWeakPasswordError",s,"weak_password"),this.reasons=n}}class zi extends Cn{constructor(e){super(e,"AuthInvalidJwtError",400,"invalid_jwt")}}const pl="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-_".split(""),Am=` 	
\r=`.split(""),tN=(()=>{const t=new Array(128);for(let e=0;e<t.length;e+=1)t[e]=-1;for(let e=0;e<Am.length;e+=1)t[Am[e].charCodeAt(0)]=-2;for(let e=0;e<pl.length;e+=1)t[pl[e].charCodeAt(0)]=e;return t})();function Lm(t,e,s){if(t!==null)for(e.queue=e.queue<<8|t,e.queuedBits+=8;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(pl[n]),e.queuedBits-=6}else if(e.queuedBits>0)for(e.queue=e.queue<<6-e.queuedBits,e.queuedBits=6;e.queuedBits>=6;){const n=e.queue>>e.queuedBits-6&63;s(pl[n]),e.queuedBits-=6}}function ly(t,e,s){const n=tN[t];if(n>-1)for(e.queue=e.queue<<6|n,e.queuedBits+=6;e.queuedBits>=8;)s(e.queue>>e.queuedBits-8&255),e.queuedBits-=8;else{if(n===-2)return;throw new Error(`Invalid Base64-URL character "${String.fromCharCode(t)}"`)}}function Tm(t){const e=[],s=o=>{e.push(String.fromCodePoint(o))},n={utf8seq:0,codepoint:0},r={queue:0,queuedBits:0},i=o=>{rN(o,n,s)};for(let o=0;o<t.length;o+=1)ly(t.charCodeAt(o),r,i);return e.join("")}function sN(t,e){if(t<=127){e(t);return}else if(t<=2047){e(192|t>>6),e(128|t&63);return}else if(t<=65535){e(224|t>>12),e(128|t>>6&63),e(128|t&63);return}else if(t<=1114111){e(240|t>>18),e(128|t>>12&63),e(128|t>>6&63),e(128|t&63);return}throw new Error(`Unrecognized Unicode codepoint: ${t.toString(16)}`)}function nN(t,e){for(let s=0;s<t.length;s+=1){let n=t.charCodeAt(s);if(n>55295&&n<=56319){const r=(n-55296)*1024&65535;n=(t.charCodeAt(s+1)-56320&65535|r)+65536,s+=1}sN(n,e)}}function rN(t,e,s){if(e.utf8seq===0){if(t<=127){s(t);return}for(let n=1;n<6;n+=1)if(!(t>>7-n&1)){e.utf8seq=n;break}if(e.utf8seq===2)e.codepoint=t&31;else if(e.utf8seq===3)e.codepoint=t&15;else if(e.utf8seq===4)e.codepoint=t&7;else throw new Error("Invalid UTF-8 sequence");e.utf8seq-=1}else if(e.utf8seq>0){if(t<=127)throw new Error("Invalid UTF-8 sequence");e.codepoint=e.codepoint<<6|t&63,e.utf8seq-=1,e.utf8seq===0&&s(e.codepoint)}}function iN(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};for(let r=0;r<t.length;r+=1)ly(t.charCodeAt(r),s,n);return new Uint8Array(e)}function aN(t){const e=[];return nN(t,s=>e.push(s)),new Uint8Array(e)}function oN(t){const e=[],s={queue:0,queuedBits:0},n=r=>{e.push(r)};return t.forEach(r=>Lm(r,s,n)),Lm(null,s,n),e.join("")}function lN(t){return Math.round(Date.now()/1e3)+t}function cN(){return"xxxxxxxx-xxxx-4xxx-yxxx-xxxxxxxxxxxx".replace(/[xy]/g,function(t){const e=Math.random()*16|0;return(t=="x"?e:e&3|8).toString(16)})}const Qt=()=>typeof window<"u"&&typeof document<"u",Pn={tested:!1,writable:!1},Ui=()=>{if(!Qt())return!1;try{if(typeof globalThis.localStorage!="object")return!1}catch{return!1}if(Pn.tested)return Pn.writable;const t=`lswt-${Math.random()}${Math.random()}`;try{globalThis.localStorage.setItem(t,t),globalThis.localStorage.removeItem(t),Pn.tested=!0,Pn.writable=!0}catch{Pn.tested=!0,Pn.writable=!1}return Pn.writable};function dN(t){const e={},s=new URL(t);if(s.hash&&s.hash[0]==="#")try{new URLSearchParams(s.hash.substring(1)).forEach((r,i)=>{e[i]=r})}catch{}return s.searchParams.forEach((n,r)=>{e[r]=n}),e}const cy=t=>{let e;return t?e=t:typeof fetch>"u"?e=(...s)=>ar(()=>Promise.resolve().then(()=>Zr),void 0).then(({default:n})=>n(...s)):e=fetch,(...s)=>e(...s)},uN=t=>typeof t=="object"&&t!==null&&"status"in t&&"ok"in t&&"json"in t&&typeof t.json=="function",dy=async(t,e,s)=>{await t.setItem(e,JSON.stringify(s))},Za=async(t,e)=>{const s=await t.getItem(e);if(!s)return null;try{return JSON.parse(s)}catch{return s}},eo=async(t,e)=>{await t.removeItem(e)};class Jl{constructor(){this.promise=new Jl.promiseConstructor((e,s)=>{this.resolve=e,this.reject=s})}}Jl.promiseConstructor=Promise;function Vc(t){const e=t.split(".");if(e.length!==3)throw new zi("Invalid JWT structure");for(let n=0;n<e.length;n++)if(!Yj.test(e[n]))throw new zi("JWT not in base64url format");return{header:JSON.parse(Tm(e[0])),payload:JSON.parse(Tm(e[1])),signature:iN(e[2]),raw:{header:e[0],payload:e[1]}}}async function hN(t){return await new Promise(e=>{setTimeout(()=>e(null),t)})}function fN(t,e){return new Promise((n,r)=>{(async()=>{for(let i=0;i<1/0;i++)try{const o=await t(i);if(!e(i,null,o)){n(o);return}}catch(o){if(!e(i,o)){r(o);return}}})()})}function mN(t){return("0"+t.toString(16)).substr(-2)}function pN(){const e=new Uint32Array(56);if(typeof crypto>"u"){const s="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789-._~",n=s.length;let r="";for(let i=0;i<56;i++)r+=s.charAt(Math.floor(Math.random()*n));return r}return crypto.getRandomValues(e),Array.from(e,mN).join("")}async function gN(t){const s=new TextEncoder().encode(t),n=await crypto.subtle.digest("SHA-256",s),r=new Uint8Array(n);return Array.from(r).map(i=>String.fromCharCode(i)).join("")}async function xN(t){if(!(typeof crypto<"u"&&typeof crypto.subtle<"u"&&typeof TextEncoder<"u"))return console.warn("WebCrypto API is not supported. Code challenge method will default to use plain instead of sha256."),t;const s=await gN(t);return btoa(s).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}async function ur(t,e,s=!1){const n=pN();let r=n;s&&(r+="/PASSWORD_RECOVERY"),await dy(t,`${e}-code-verifier`,r);const i=await xN(n);return[i,n===i?"plain":"s256"]}const yN=/^2[0-9]{3}-(0[1-9]|1[0-2])-(0[1-9]|1[0-9]|2[0-9]|3[0-1])$/i;function vN(t){const e=t.headers.get(du);if(!e||!e.match(yN))return null;try{return new Date(`${e}T00:00:00.0Z`)}catch{return null}}function bN(t){if(!t)throw new Error("Missing exp claim");const e=Math.floor(Date.now()/1e3);if(t<=e)throw new Error("JWT has expired")}function wN(t){switch(t){case"RS256":return{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}};case"ES256":return{name:"ECDSA",namedCurve:"P-256",hash:{name:"SHA-256"}};default:throw new Error("Invalid alg claim")}}const _N=/^[0-9a-f]{8}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{4}-[0-9a-f]{12}$/;function hr(t){if(!_N.test(t))throw new Error("@supabase/auth-js: Expected parameter to be UUID but is not")}var jN=globalThis&&globalThis.__rest||function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};const Rn=t=>t.msg||t.message||t.error_description||t.error||JSON.stringify(t),NN=[502,503,504];async function Mm(t){var e;if(!uN(t))throw new uu(Rn(t),0);if(NN.includes(t.status))throw new uu(Rn(t),t.status);let s;try{s=await t.json()}catch(i){throw new oy(Rn(i),i)}let n;const r=vN(t);if(r&&r.getTime()>=ay["2024-01-01"].timestamp&&typeof s=="object"&&s&&typeof s.code=="string"?n=s.code:typeof s=="object"&&s&&typeof s.error_code=="string"&&(n=s.error_code),n){if(n==="weak_password")throw new Pm(Rn(s),t.status,((e=s.weak_password)===null||e===void 0?void 0:e.reasons)||[]);if(n==="session_not_found")throw new Ys}else if(typeof s=="object"&&s&&typeof s.weak_password=="object"&&s.weak_password&&Array.isArray(s.weak_password.reasons)&&s.weak_password.reasons.length&&s.weak_password.reasons.reduce((i,o)=>i&&typeof o=="string",!0))throw new Pm(Rn(s),t.status,s.weak_password.reasons);throw new Qj(Rn(s),t.status||500,n)}const kN=(t,e,s,n)=>{const r={method:t,headers:(e==null?void 0:e.headers)||{}};return t==="GET"?r:(r.headers=Object.assign({"Content-Type":"application/json;charset=UTF-8"},e==null?void 0:e.headers),r.body=JSON.stringify(n),Object.assign(Object.assign({},r),s))};async function he(t,e,s,n){var r;const i=Object.assign({},n==null?void 0:n.headers);i[du]||(i[du]=ay["2024-01-01"].name),n!=null&&n.jwt&&(i.Authorization=`Bearer ${n.jwt}`);const o=(r=n==null?void 0:n.query)!==null&&r!==void 0?r:{};n!=null&&n.redirectTo&&(o.redirect_to=n.redirectTo);const l=Object.keys(o).length?"?"+new URLSearchParams(o).toString():"",c=await SN(t,e,s+l,{headers:i,noResolveJson:n==null?void 0:n.noResolveJson},{},n==null?void 0:n.body);return n!=null&&n.xform?n==null?void 0:n.xform(c):{data:Object.assign({},c),error:null}}async function SN(t,e,s,n,r,i){const o=kN(e,n,r,i);let l;try{l=await t(s,Object.assign({},o))}catch(c){throw console.error(c),new uu(Rn(c),0)}if(l.ok||await Mm(l),n!=null&&n.noResolveJson)return l;try{return await l.json()}catch(c){await Mm(c)}}function Es(t){var e;let s=null;AN(t)&&(s=Object.assign({},t),t.expires_at||(s.expires_at=lN(t.expires_in)));const n=(e=t.user)!==null&&e!==void 0?e:t;return{data:{session:s,user:n},error:null}}function Dm(t){const e=Es(t);return!e.error&&t.weak_password&&typeof t.weak_password=="object"&&Array.isArray(t.weak_password.reasons)&&t.weak_password.reasons.length&&t.weak_password.message&&typeof t.weak_password.message=="string"&&t.weak_password.reasons.reduce((s,n)=>s&&typeof n=="string",!0)&&(e.data.weak_password=t.weak_password),e}function tn(t){var e;return{data:{user:(e=t.user)!==null&&e!==void 0?e:t},error:null}}function CN(t){return{data:t,error:null}}function EN(t){const{action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i}=t,o=jN(t,["action_link","email_otp","hashed_token","redirect_to","verification_type"]),l={action_link:e,email_otp:s,hashed_token:n,redirect_to:r,verification_type:i},c=Object.assign({},o);return{data:{properties:l,user:c},error:null}}function PN(t){return t}function AN(t){return t.access_token&&t.refresh_token&&t.expires_in}const Wc=["global","local","others"];var LN=globalThis&&globalThis.__rest||function(t,e){var s={};for(var n in t)Object.prototype.hasOwnProperty.call(t,n)&&e.indexOf(n)<0&&(s[n]=t[n]);if(t!=null&&typeof Object.getOwnPropertySymbols=="function")for(var r=0,n=Object.getOwnPropertySymbols(t);r<n.length;r++)e.indexOf(n[r])<0&&Object.prototype.propertyIsEnumerable.call(t,n[r])&&(s[n[r]]=t[n[r]]);return s};class TN{constructor({url:e="",headers:s={},fetch:n}){this.url=e,this.headers=s,this.fetch=cy(n),this.mfa={listFactors:this._listFactors.bind(this),deleteFactor:this._deleteFactor.bind(this)}}async signOut(e,s=Wc[0]){if(Wc.indexOf(s)<0)throw new Error(`@supabase/auth-js: Parameter scope must be one of ${Wc.join(", ")}`);try{return await he(this.fetch,"POST",`${this.url}/logout?scope=${s}`,{headers:this.headers,jwt:e,noResolveJson:!0}),{data:null,error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}async inviteUserByEmail(e,s={}){try{return await he(this.fetch,"POST",`${this.url}/invite`,{body:{email:e,data:s.data},headers:this.headers,redirectTo:s.redirectTo,xform:tn})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async generateLink(e){try{const{options:s}=e,n=LN(e,["options"]),r=Object.assign(Object.assign({},n),s);return"newEmail"in n&&(r.new_email=n==null?void 0:n.newEmail,delete r.newEmail),await he(this.fetch,"POST",`${this.url}/admin/generate_link`,{body:r,headers:this.headers,xform:EN,redirectTo:s==null?void 0:s.redirectTo})}catch(s){if(ae(s))return{data:{properties:null,user:null},error:s};throw s}}async createUser(e){try{return await he(this.fetch,"POST",`${this.url}/admin/users`,{body:e,headers:this.headers,xform:tn})}catch(s){if(ae(s))return{data:{user:null},error:s};throw s}}async listUsers(e){var s,n,r,i,o,l,c;try{const d={nextPage:null,lastPage:0,total:0},u=await he(this.fetch,"GET",`${this.url}/admin/users`,{headers:this.headers,noResolveJson:!0,query:{page:(n=(s=e==null?void 0:e.page)===null||s===void 0?void 0:s.toString())!==null&&n!==void 0?n:"",per_page:(i=(r=e==null?void 0:e.perPage)===null||r===void 0?void 0:r.toString())!==null&&i!==void 0?i:""},xform:PN});if(u.error)throw u.error;const h=await u.json(),f=(o=u.headers.get("x-total-count"))!==null&&o!==void 0?o:0,m=(c=(l=u.headers.get("link"))===null||l===void 0?void 0:l.split(","))!==null&&c!==void 0?c:[];return m.length>0&&(m.forEach(p=>{const v=parseInt(p.split(";")[0].split("=")[1].substring(0,1)),g=JSON.parse(p.split(";")[1].split("=")[1]);d[`${g}Page`]=v}),d.total=parseInt(f)),{data:Object.assign(Object.assign({},h),d),error:null}}catch(d){if(ae(d))return{data:{users:[]},error:d};throw d}}async getUserById(e){hr(e);try{return await he(this.fetch,"GET",`${this.url}/admin/users/${e}`,{headers:this.headers,xform:tn})}catch(s){if(ae(s))return{data:{user:null},error:s};throw s}}async updateUserById(e,s){hr(e);try{return await he(this.fetch,"PUT",`${this.url}/admin/users/${e}`,{body:s,headers:this.headers,xform:tn})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async deleteUser(e,s=!1){hr(e);try{return await he(this.fetch,"DELETE",`${this.url}/admin/users/${e}`,{headers:this.headers,body:{should_soft_delete:s},xform:tn})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async _listFactors(e){hr(e.userId);try{const{data:s,error:n}=await he(this.fetch,"GET",`${this.url}/admin/users/${e.userId}/factors`,{headers:this.headers,xform:r=>({data:{factors:r},error:null})});return{data:s,error:n}}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _deleteFactor(e){hr(e.userId),hr(e.id);try{return{data:await he(this.fetch,"DELETE",`${this.url}/admin/users/${e.userId}/factors/${e.id}`,{headers:this.headers}),error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}}}const MN={getItem:t=>Ui()?globalThis.localStorage.getItem(t):null,setItem:(t,e)=>{Ui()&&globalThis.localStorage.setItem(t,e)},removeItem:t=>{Ui()&&globalThis.localStorage.removeItem(t)}};function Om(t={}){return{getItem:e=>t[e]||null,setItem:(e,s)=>{t[e]=s},removeItem:e=>{delete t[e]}}}function DN(){if(typeof globalThis!="object")try{Object.defineProperty(Object.prototype,"__magic__",{get:function(){return this},configurable:!0}),__magic__.globalThis=__magic__,delete Object.prototype.__magic__}catch{typeof self<"u"&&(self.globalThis=self)}}const fr={debug:!!(globalThis&&Ui()&&globalThis.localStorage&&globalThis.localStorage.getItem("supabase.gotrue-js.locks.debug")==="true")};class uy extends Error{constructor(e){super(e),this.isAcquireTimeout=!0}}class ON extends uy{}async function RN(t,e,s){fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquire lock",t,e);const n=new globalThis.AbortController;return e>0&&setTimeout(()=>{n.abort(),fr.debug&&console.log("@supabase/gotrue-js: navigatorLock acquire timed out",t)},e),await Promise.resolve().then(()=>globalThis.navigator.locks.request(t,e===0?{mode:"exclusive",ifAvailable:!0}:{mode:"exclusive",signal:n.signal},async r=>{if(r){fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: acquired",t,r.name);try{return await s()}finally{fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: released",t,r.name)}}else{if(e===0)throw fr.debug&&console.log("@supabase/gotrue-js: navigatorLock: not immediately available",t),new ON(`Acquiring an exclusive Navigator LockManager lock "${t}" immediately failed`);if(fr.debug)try{const i=await globalThis.navigator.locks.query();console.log("@supabase/gotrue-js: Navigator LockManager state",JSON.stringify(i,null,"  "))}catch(i){console.warn("@supabase/gotrue-js: Error when querying Navigator LockManager state",i)}return console.warn("@supabase/gotrue-js: Navigator LockManager returned a null lock when using #request without ifAvailable set to true, it appears this browser is not following the LockManager spec https://developer.mozilla.org/en-US/docs/Web/API/LockManager/request"),await s()}}))}DN();const IN={url:qj,storageKey:Kj,autoRefreshToken:!0,persistSession:!0,detectSessionInUrl:!0,headers:Gj,flowType:"implicit",debug:!1,hasCustomAuthorizationHeader:!1};async function Rm(t,e,s){return await s()}class ua{constructor(e){var s,n;this.memoryStorage=null,this.stateChangeEmitters=new Map,this.autoRefreshTicker=null,this.visibilityChangedCallback=null,this.refreshingDeferred=null,this.initializePromise=null,this.detectSessionInUrl=!0,this.hasCustomAuthorizationHeader=!1,this.suppressGetSessionWarning=!1,this.lockAcquired=!1,this.pendingInLock=[],this.broadcastChannel=null,this.logger=console.log,this.instanceID=ua.nextInstanceID,ua.nextInstanceID+=1,this.instanceID>0&&Qt()&&console.warn("Multiple GoTrueClient instances detected in the same browser context. It is not an error, but this should be avoided as it may produce undefined behavior when used concurrently under the same storage key.");const r=Object.assign(Object.assign({},IN),e);if(this.logDebugMessages=!!r.debug,typeof r.debug=="function"&&(this.logger=r.debug),this.persistSession=r.persistSession,this.storageKey=r.storageKey,this.autoRefreshToken=r.autoRefreshToken,this.admin=new TN({url:r.url,headers:r.headers,fetch:r.fetch}),this.url=r.url,this.headers=r.headers,this.fetch=cy(r.fetch),this.lock=r.lock||Rm,this.detectSessionInUrl=r.detectSessionInUrl,this.flowType=r.flowType,this.hasCustomAuthorizationHeader=r.hasCustomAuthorizationHeader,r.lock?this.lock=r.lock:Qt()&&(!((s=globalThis==null?void 0:globalThis.navigator)===null||s===void 0)&&s.locks)?this.lock=RN:this.lock=Rm,this.jwks={keys:[]},this.jwks_cached_at=Number.MIN_SAFE_INTEGER,this.mfa={verify:this._verify.bind(this),enroll:this._enroll.bind(this),unenroll:this._unenroll.bind(this),challenge:this._challenge.bind(this),listFactors:this._listFactors.bind(this),challengeAndVerify:this._challengeAndVerify.bind(this),getAuthenticatorAssuranceLevel:this._getAuthenticatorAssuranceLevel.bind(this)},this.persistSession?r.storage?this.storage=r.storage:Ui()?this.storage=MN:(this.memoryStorage={},this.storage=Om(this.memoryStorage)):(this.memoryStorage={},this.storage=Om(this.memoryStorage)),Qt()&&globalThis.BroadcastChannel&&this.persistSession&&this.storageKey){try{this.broadcastChannel=new globalThis.BroadcastChannel(this.storageKey)}catch(i){console.error("Failed to create a new BroadcastChannel, multi-tab state changes will not be available",i)}(n=this.broadcastChannel)===null||n===void 0||n.addEventListener("message",async i=>{this._debug("received broadcast notification from other tab or client",i),await this._notifyAllSubscribers(i.data.event,i.data.session,!1)})}this.initialize()}_debug(...e){return this.logDebugMessages&&this.logger(`GoTrueClient@${this.instanceID} (${iy}) ${new Date().toISOString()}`,...e),this}async initialize(){return this.initializePromise?await this.initializePromise:(this.initializePromise=(async()=>await this._acquireLock(-1,async()=>await this._initialize()))(),await this.initializePromise)}async _initialize(){var e;try{const s=dN(window.location.href);let n="none";if(this._isImplicitGrantCallback(s)?n="implicit":await this._isPKCECallback(s)&&(n="pkce"),Qt()&&this.detectSessionInUrl&&n!=="none"){const{data:r,error:i}=await this._getSessionFromURL(s,n);if(i){if(this._debug("#_initialize()","error detecting session from URL",i),eN(i)){const c=(e=i.details)===null||e===void 0?void 0:e.code;if(c==="identity_already_exists"||c==="identity_not_found"||c==="single_identity_not_deletable")return{error:i}}return await this._removeSession(),{error:i}}const{session:o,redirectType:l}=r;return this._debug("#_initialize()","detected session in URL",o,"redirect type",l),await this._saveSession(o),setTimeout(async()=>{l==="recovery"?await this._notifyAllSubscribers("PASSWORD_RECOVERY",o):await this._notifyAllSubscribers("SIGNED_IN",o)},0),{error:null}}return await this._recoverAndRefresh(),{error:null}}catch(s){return ae(s)?{error:s}:{error:new oy("Unexpected error during initialization",s)}}finally{await this._handleVisibilityChange(),this._debug("#_initialize()","end")}}async signInAnonymously(e){var s,n,r;try{const i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{data:(n=(s=e==null?void 0:e.options)===null||s===void 0?void 0:s.data)!==null&&n!==void 0?n:{},gotrue_meta_security:{captcha_token:(r=e==null?void 0:e.options)===null||r===void 0?void 0:r.captchaToken}},xform:Es}),{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ae(i))return{data:{user:null,session:null},error:i};throw i}}async signUp(e){var s,n,r;try{let i;if("email"in e){const{email:u,password:h,options:f}=e;let m=null,p=null;this.flowType==="pkce"&&([m,p]=await ur(this.storage,this.storageKey)),i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,redirectTo:f==null?void 0:f.emailRedirectTo,body:{email:u,password:h,data:(s=f==null?void 0:f.data)!==null&&s!==void 0?s:{},gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken},code_challenge:m,code_challenge_method:p},xform:Es})}else if("phone"in e){const{phone:u,password:h,options:f}=e;i=await he(this.fetch,"POST",`${this.url}/signup`,{headers:this.headers,body:{phone:u,password:h,data:(n=f==null?void 0:f.data)!==null&&n!==void 0?n:{},channel:(r=f==null?void 0:f.channel)!==null&&r!==void 0?r:"sms",gotrue_meta_security:{captcha_token:f==null?void 0:f.captchaToken}},xform:Es})}else throw new Qa("You must provide either an email or phone number and a password");const{data:o,error:l}=i;if(l||!o)return{data:{user:null,session:null},error:l};const c=o.session,d=o.user;return o.session&&(await this._saveSession(o.session),await this._notifyAllSubscribers("SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(i){if(ae(i))return{data:{user:null,session:null},error:i};throw i}}async signInWithPassword(e){try{let s;if("email"in e){const{email:i,password:o,options:l}=e;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{email:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Dm})}else if("phone"in e){const{phone:i,password:o,options:l}=e;s=await he(this.fetch,"POST",`${this.url}/token?grant_type=password`,{headers:this.headers,body:{phone:i,password:o,gotrue_meta_security:{captcha_token:l==null?void 0:l.captchaToken}},xform:Dm})}else throw new Qa("You must provide either an email or phone number and a password");const{data:n,error:r}=s;return r?{data:{user:null,session:null},error:r}:!n||!n.session||!n.user?{data:{user:null,session:null},error:new Ja}:(n.session&&(await this._saveSession(n.session),await this._notifyAllSubscribers("SIGNED_IN",n.session)),{data:Object.assign({user:n.user,session:n.session},n.weak_password?{weakPassword:n.weak_password}:null),error:r})}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOAuth(e){var s,n,r,i;return await this._handleProviderSignIn(e.provider,{redirectTo:(s=e.options)===null||s===void 0?void 0:s.redirectTo,scopes:(n=e.options)===null||n===void 0?void 0:n.scopes,queryParams:(r=e.options)===null||r===void 0?void 0:r.queryParams,skipBrowserRedirect:(i=e.options)===null||i===void 0?void 0:i.skipBrowserRedirect})}async exchangeCodeForSession(e){return await this.initializePromise,this._acquireLock(-1,async()=>this._exchangeCodeForSession(e))}async signInWithWeb3(e){const{chain:s}=e;if(s==="solana")return await this.signInWithSolana(e);throw new Error(`@supabase/auth-js: Unsupported chain "${s}"`)}async signInWithSolana(e){var s,n,r,i,o,l,c,d,u,h,f,m;let p,v;if("message"in e)p=e.message,v=e.signature;else{const{chain:g,wallet:x,statement:y,options:b}=e;let N;if(Qt())if(typeof x=="object")N=x;else{const k=window;if("solana"in k&&typeof k.solana=="object"&&("signIn"in k.solana&&typeof k.solana.signIn=="function"||"signMessage"in k.solana&&typeof k.solana.signMessage=="function"))N=k.solana;else throw new Error("@supabase/auth-js: No compatible Solana wallet interface on the window object (window.solana) detected. Make sure the user already has a wallet installed and connected for this app. Prefer passing the wallet interface object directly to signInWithWeb3({ chain: 'solana', wallet: resolvedUserWallet }) instead.")}else{if(typeof x!="object"||!(b!=null&&b.url))throw new Error("@supabase/auth-js: Both wallet and url must be specified in non-browser environments.");N=x}const _=new URL((s=b==null?void 0:b.url)!==null&&s!==void 0?s:window.location.href);if("signIn"in N&&N.signIn){const k=await N.signIn(Object.assign(Object.assign(Object.assign({issuedAt:new Date().toISOString()},b==null?void 0:b.signInWithSolana),{version:"1",domain:_.host,uri:_.href}),y?{statement:y}:null));let S;if(Array.isArray(k)&&k[0]&&typeof k[0]=="object")S=k[0];else if(k&&typeof k=="object"&&"signedMessage"in k&&"signature"in k)S=k;else throw new Error("@supabase/auth-js: Wallet method signIn() returned unrecognized value");if("signedMessage"in S&&"signature"in S&&(typeof S.signedMessage=="string"||S.signedMessage instanceof Uint8Array)&&S.signature instanceof Uint8Array)p=typeof S.signedMessage=="string"?S.signedMessage:new TextDecoder().decode(S.signedMessage),v=S.signature;else throw new Error("@supabase/auth-js: Wallet method signIn() API returned object without signedMessage and signature fields")}else{if(!("signMessage"in N)||typeof N.signMessage!="function"||!("publicKey"in N)||typeof N!="object"||!N.publicKey||!("toBase58"in N.publicKey)||typeof N.publicKey.toBase58!="function")throw new Error("@supabase/auth-js: Wallet does not have a compatible signMessage() and publicKey.toBase58() API");p=[`${_.host} wants you to sign in with your Solana account:`,N.publicKey.toBase58(),...y?["",y,""]:[""],"Version: 1",`URI: ${_.href}`,`Issued At: ${(r=(n=b==null?void 0:b.signInWithSolana)===null||n===void 0?void 0:n.issuedAt)!==null&&r!==void 0?r:new Date().toISOString()}`,...!((i=b==null?void 0:b.signInWithSolana)===null||i===void 0)&&i.notBefore?[`Not Before: ${b.signInWithSolana.notBefore}`]:[],...!((o=b==null?void 0:b.signInWithSolana)===null||o===void 0)&&o.expirationTime?[`Expiration Time: ${b.signInWithSolana.expirationTime}`]:[],...!((l=b==null?void 0:b.signInWithSolana)===null||l===void 0)&&l.chainId?[`Chain ID: ${b.signInWithSolana.chainId}`]:[],...!((c=b==null?void 0:b.signInWithSolana)===null||c===void 0)&&c.nonce?[`Nonce: ${b.signInWithSolana.nonce}`]:[],...!((d=b==null?void 0:b.signInWithSolana)===null||d===void 0)&&d.requestId?[`Request ID: ${b.signInWithSolana.requestId}`]:[],...!((h=(u=b==null?void 0:b.signInWithSolana)===null||u===void 0?void 0:u.resources)===null||h===void 0)&&h.length?["Resources",...b.signInWithSolana.resources.map(S=>`- ${S}`)]:[]].join(`
`);const k=await N.signMessage(new TextEncoder().encode(p),"utf8");if(!k||!(k instanceof Uint8Array))throw new Error("@supabase/auth-js: Wallet signMessage() API returned an recognized value");v=k}}try{const{data:g,error:x}=await he(this.fetch,"POST",`${this.url}/token?grant_type=web3`,{headers:this.headers,body:Object.assign({chain:"solana",message:p,signature:oN(v)},!((f=e.options)===null||f===void 0)&&f.captchaToken?{gotrue_meta_security:{captcha_token:(m=e.options)===null||m===void 0?void 0:m.captchaToken}}:null),xform:Es});if(x)throw x;return!g||!g.session||!g.user?{data:{user:null,session:null},error:new Ja}:(g.session&&(await this._saveSession(g.session),await this._notifyAllSubscribers("SIGNED_IN",g.session)),{data:Object.assign({},g),error:x})}catch(g){if(ae(g))return{data:{user:null,session:null},error:g};throw g}}async _exchangeCodeForSession(e){const s=await Za(this.storage,`${this.storageKey}-code-verifier`),[n,r]=(s??"").split("/");try{const{data:i,error:o}=await he(this.fetch,"POST",`${this.url}/token?grant_type=pkce`,{headers:this.headers,body:{auth_code:e,code_verifier:n},xform:Es});if(await eo(this.storage,`${this.storageKey}-code-verifier`),o)throw o;return!i||!i.session||!i.user?{data:{user:null,session:null,redirectType:null},error:new Ja}:(i.session&&(await this._saveSession(i.session),await this._notifyAllSubscribers("SIGNED_IN",i.session)),{data:Object.assign(Object.assign({},i),{redirectType:r??null}),error:o})}catch(i){if(ae(i))return{data:{user:null,session:null,redirectType:null},error:i};throw i}}async signInWithIdToken(e){try{const{options:s,provider:n,token:r,access_token:i,nonce:o}=e,l=await he(this.fetch,"POST",`${this.url}/token?grant_type=id_token`,{headers:this.headers,body:{provider:n,id_token:r,access_token:i,nonce:o,gotrue_meta_security:{captcha_token:s==null?void 0:s.captchaToken}},xform:Es}),{data:c,error:d}=l;return d?{data:{user:null,session:null},error:d}:!c||!c.session||!c.user?{data:{user:null,session:null},error:new Ja}:(c.session&&(await this._saveSession(c.session),await this._notifyAllSubscribers("SIGNED_IN",c.session)),{data:c,error:d})}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async signInWithOtp(e){var s,n,r,i,o;try{if("email"in e){const{email:l,options:c}=e;let d=null,u=null;this.flowType==="pkce"&&([d,u]=await ur(this.storage,this.storageKey));const{error:h}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{email:l,data:(s=c==null?void 0:c.data)!==null&&s!==void 0?s:{},create_user:(n=c==null?void 0:c.shouldCreateUser)!==null&&n!==void 0?n:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},code_challenge:d,code_challenge_method:u},redirectTo:c==null?void 0:c.emailRedirectTo});return{data:{user:null,session:null},error:h}}if("phone"in e){const{phone:l,options:c}=e,{data:d,error:u}=await he(this.fetch,"POST",`${this.url}/otp`,{headers:this.headers,body:{phone:l,data:(r=c==null?void 0:c.data)!==null&&r!==void 0?r:{},create_user:(i=c==null?void 0:c.shouldCreateUser)!==null&&i!==void 0?i:!0,gotrue_meta_security:{captcha_token:c==null?void 0:c.captchaToken},channel:(o=c==null?void 0:c.channel)!==null&&o!==void 0?o:"sms"}});return{data:{user:null,session:null,messageId:d==null?void 0:d.message_id},error:u}}throw new Qa("You must provide either an email or phone number.")}catch(l){if(ae(l))return{data:{user:null,session:null},error:l};throw l}}async verifyOtp(e){var s,n;try{let r,i;"options"in e&&(r=(s=e.options)===null||s===void 0?void 0:s.redirectTo,i=(n=e.options)===null||n===void 0?void 0:n.captchaToken);const{data:o,error:l}=await he(this.fetch,"POST",`${this.url}/verify`,{headers:this.headers,body:Object.assign(Object.assign({},e),{gotrue_meta_security:{captcha_token:i}}),redirectTo:r,xform:Es});if(l)throw l;if(!o)throw new Error("An error occurred on token verification.");const c=o.session,d=o.user;return c!=null&&c.access_token&&(await this._saveSession(c),await this._notifyAllSubscribers(e.type=="recovery"?"PASSWORD_RECOVERY":"SIGNED_IN",c)),{data:{user:d,session:c},error:null}}catch(r){if(ae(r))return{data:{user:null,session:null},error:r};throw r}}async signInWithSSO(e){var s,n,r;try{let i=null,o=null;return this.flowType==="pkce"&&([i,o]=await ur(this.storage,this.storageKey)),await he(this.fetch,"POST",`${this.url}/sso`,{body:Object.assign(Object.assign(Object.assign(Object.assign(Object.assign({},"providerId"in e?{provider_id:e.providerId}:null),"domain"in e?{domain:e.domain}:null),{redirect_to:(n=(s=e.options)===null||s===void 0?void 0:s.redirectTo)!==null&&n!==void 0?n:void 0}),!((r=e==null?void 0:e.options)===null||r===void 0)&&r.captchaToken?{gotrue_meta_security:{captcha_token:e.options.captchaToken}}:null),{skip_http_redirect:!0,code_challenge:i,code_challenge_method:o}),headers:this.headers,xform:CN})}catch(i){if(ae(i))return{data:null,error:i};throw i}}async reauthenticate(){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._reauthenticate())}async _reauthenticate(){try{return await this._useSession(async e=>{const{data:{session:s},error:n}=e;if(n)throw n;if(!s)throw new Ys;const{error:r}=await he(this.fetch,"GET",`${this.url}/reauthenticate`,{headers:this.headers,jwt:s.access_token});return{data:{user:null,session:null},error:r}})}catch(e){if(ae(e))return{data:{user:null,session:null},error:e};throw e}}async resend(e){try{const s=`${this.url}/resend`;if("email"in e){const{email:n,type:r,options:i}=e,{error:o}=await he(this.fetch,"POST",s,{headers:this.headers,body:{email:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}},redirectTo:i==null?void 0:i.emailRedirectTo});return{data:{user:null,session:null},error:o}}else if("phone"in e){const{phone:n,type:r,options:i}=e,{data:o,error:l}=await he(this.fetch,"POST",s,{headers:this.headers,body:{phone:n,type:r,gotrue_meta_security:{captcha_token:i==null?void 0:i.captchaToken}}});return{data:{user:null,session:null,messageId:o==null?void 0:o.message_id},error:l}}throw new Qa("You must provide either an email or phone number and a type")}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async getSession(){return await this.initializePromise,await this._acquireLock(-1,async()=>this._useSession(async s=>s))}async _acquireLock(e,s){this._debug("#_acquireLock","begin",e);try{if(this.lockAcquired){const n=this.pendingInLock.length?this.pendingInLock[this.pendingInLock.length-1]:Promise.resolve(),r=(async()=>(await n,await s()))();return this.pendingInLock.push((async()=>{try{await r}catch{}})()),r}return await this.lock(`lock:${this.storageKey}`,e,async()=>{this._debug("#_acquireLock","lock acquired for storage key",this.storageKey);try{this.lockAcquired=!0;const n=s();for(this.pendingInLock.push((async()=>{try{await n}catch{}})()),await n;this.pendingInLock.length;){const r=[...this.pendingInLock];await Promise.all(r),this.pendingInLock.splice(0,r.length)}return await n}finally{this._debug("#_acquireLock","lock released for storage key",this.storageKey),this.lockAcquired=!1}})}finally{this._debug("#_acquireLock","end")}}async _useSession(e){this._debug("#_useSession","begin");try{const s=await this.__loadSession();return await e(s)}finally{this._debug("#_useSession","end")}}async __loadSession(){this._debug("#__loadSession()","begin"),this.lockAcquired||this._debug("#__loadSession()","used outside of an acquired lock!",new Error().stack);try{let e=null;const s=await Za(this.storage,this.storageKey);if(this._debug("#getSession()","session from storage",s),s!==null&&(this._isValidSession(s)?e=s:(this._debug("#getSession()","session from storage is not valid"),await this._removeSession())),!e)return{data:{session:null},error:null};const n=e.expires_at?e.expires_at*1e3-Date.now()<Bc:!1;if(this._debug("#__loadSession()",`session has${n?"":" not"} expired`,"expires_at",e.expires_at),!n){if(this.storage.isServer){let o=this.suppressGetSessionWarning;e=new Proxy(e,{get:(c,d,u)=>(!o&&d==="user"&&(console.warn("Using the user object as returned from supabase.auth.getSession() or from some supabase.auth.onAuthStateChange() events could be insecure! This value comes directly from the storage medium (usually cookies on the server) and may not be authentic. Use supabase.auth.getUser() instead which authenticates the data by contacting the Supabase Auth server."),o=!0,this.suppressGetSessionWarning=!0),Reflect.get(c,d,u))})}return{data:{session:e},error:null}}const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{session:null},error:i}:{data:{session:r},error:null}}finally{this._debug("#__loadSession()","end")}}async getUser(e){return e?await this._getUser(e):(await this.initializePromise,await this._acquireLock(-1,async()=>await this._getUser()))}async _getUser(e){try{return e?await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:e,xform:tn}):await this._useSession(async s=>{var n,r,i;const{data:o,error:l}=s;if(l)throw l;return!(!((n=o.session)===null||n===void 0)&&n.access_token)&&!this.hasCustomAuthorizationHeader?{data:{user:null},error:new Ys}:await he(this.fetch,"GET",`${this.url}/user`,{headers:this.headers,jwt:(i=(r=o.session)===null||r===void 0?void 0:r.access_token)!==null&&i!==void 0?i:void 0,xform:tn})})}catch(s){if(ae(s))return Zj(s)&&(await this._removeSession(),await eo(this.storage,`${this.storageKey}-code-verifier`)),{data:{user:null},error:s};throw s}}async updateUser(e,s={}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._updateUser(e,s))}async _updateUser(e,s={}){try{return await this._useSession(async n=>{const{data:r,error:i}=n;if(i)throw i;if(!r.session)throw new Ys;const o=r.session;let l=null,c=null;this.flowType==="pkce"&&e.email!=null&&([l,c]=await ur(this.storage,this.storageKey));const{data:d,error:u}=await he(this.fetch,"PUT",`${this.url}/user`,{headers:this.headers,redirectTo:s==null?void 0:s.emailRedirectTo,body:Object.assign(Object.assign({},e),{code_challenge:l,code_challenge_method:c}),jwt:o.access_token,xform:tn});if(u)throw u;return o.user=d.user,await this._saveSession(o),await this._notifyAllSubscribers("USER_UPDATED",o),{data:{user:o.user},error:null}})}catch(n){if(ae(n))return{data:{user:null},error:n};throw n}}async setSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._setSession(e))}async _setSession(e){try{if(!e.access_token||!e.refresh_token)throw new Ys;const s=Date.now()/1e3;let n=s,r=!0,i=null;const{payload:o}=Vc(e.access_token);if(o.exp&&(n=o.exp,r=n<=s),r){const{session:l,error:c}=await this._callRefreshToken(e.refresh_token);if(c)return{data:{user:null,session:null},error:c};if(!l)return{data:{user:null,session:null},error:null};i=l}else{const{data:l,error:c}=await this._getUser(e.access_token);if(c)throw c;i={access_token:e.access_token,refresh_token:e.refresh_token,user:l.user,token_type:"bearer",expires_in:n-s,expires_at:n},await this._saveSession(i),await this._notifyAllSubscribers("SIGNED_IN",i)}return{data:{user:i.user,session:i},error:null}}catch(s){if(ae(s))return{data:{session:null,user:null},error:s};throw s}}async refreshSession(e){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._refreshSession(e))}async _refreshSession(e){try{return await this._useSession(async s=>{var n;if(!e){const{data:o,error:l}=s;if(l)throw l;e=(n=o.session)!==null&&n!==void 0?n:void 0}if(!(e!=null&&e.refresh_token))throw new Ys;const{session:r,error:i}=await this._callRefreshToken(e.refresh_token);return i?{data:{user:null,session:null},error:i}:r?{data:{user:r.user,session:r},error:null}:{data:{user:null,session:null},error:null}})}catch(s){if(ae(s))return{data:{user:null,session:null},error:s};throw s}}async _getSessionFromURL(e,s){try{if(!Qt())throw new Xa("No browser detected.");if(e.error||e.error_description||e.error_code)throw new Xa(e.error_description||"Error in URL with unspecified error_description",{error:e.error||"unspecified_error",code:e.error_code||"unspecified_code"});switch(s){case"implicit":if(this.flowType==="pkce")throw new Em("Not a valid PKCE flow url.");break;case"pkce":if(this.flowType==="implicit")throw new Xa("Not a valid implicit grant flow url.");break;default:}if(s==="pkce"){if(this._debug("#_initialize()","begin","is PKCE flow",!0),!e.code)throw new Em("No code detected.");const{data:y,error:b}=await this._exchangeCodeForSession(e.code);if(b)throw b;const N=new URL(window.location.href);return N.searchParams.delete("code"),window.history.replaceState(window.history.state,"",N.toString()),{data:{session:y.session,redirectType:null},error:null}}const{provider_token:n,provider_refresh_token:r,access_token:i,refresh_token:o,expires_in:l,expires_at:c,token_type:d}=e;if(!i||!l||!o||!d)throw new Xa("No session defined in URL");const u=Math.round(Date.now()/1e3),h=parseInt(l);let f=u+h;c&&(f=parseInt(c));const m=f-u;m*1e3<=pr&&console.warn(`@supabase/gotrue-js: Session as retrieved from URL expires in ${m}s, should have been closer to ${h}s`);const p=f-h;u-p>=120?console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued over 120s ago, URL could be stale",p,f,u):u-p<0&&console.warn("@supabase/gotrue-js: Session as retrieved from URL was issued in the future? Check the device clock for skew",p,f,u);const{data:v,error:g}=await this._getUser(i);if(g)throw g;const x={provider_token:n,provider_refresh_token:r,access_token:i,expires_in:h,expires_at:f,refresh_token:o,token_type:d,user:v.user};return window.location.hash="",this._debug("#_getSessionFromURL()","clearing window.location.hash"),{data:{session:x,redirectType:e.type},error:null}}catch(n){if(ae(n))return{data:{session:null,redirectType:null},error:n};throw n}}_isImplicitGrantCallback(e){return!!(e.access_token||e.error_description)}async _isPKCECallback(e){const s=await Za(this.storage,`${this.storageKey}-code-verifier`);return!!(e.code&&s)}async signOut(e={scope:"global"}){return await this.initializePromise,await this._acquireLock(-1,async()=>await this._signOut(e))}async _signOut({scope:e}={scope:"global"}){return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{error:i};const o=(n=r.session)===null||n===void 0?void 0:n.access_token;if(o){const{error:l}=await this.admin.signOut(o,e);if(l&&!(Xj(l)&&(l.status===404||l.status===401||l.status===403)))return{error:l}}return e!=="others"&&(await this._removeSession(),await eo(this.storage,`${this.storageKey}-code-verifier`)),{error:null}})}onAuthStateChange(e){const s=cN(),n={id:s,callback:e,unsubscribe:()=>{this._debug("#unsubscribe()","state change callback with id removed",s),this.stateChangeEmitters.delete(s)}};return this._debug("#onAuthStateChange()","registered callback with id",s),this.stateChangeEmitters.set(s,n),(async()=>(await this.initializePromise,await this._acquireLock(-1,async()=>{this._emitInitialSession(s)})))(),{data:{subscription:n}}}async _emitInitialSession(e){return await this._useSession(async s=>{var n,r;try{const{data:{session:i},error:o}=s;if(o)throw o;await((n=this.stateChangeEmitters.get(e))===null||n===void 0?void 0:n.callback("INITIAL_SESSION",i)),this._debug("INITIAL_SESSION","callback id",e,"session",i)}catch(i){await((r=this.stateChangeEmitters.get(e))===null||r===void 0?void 0:r.callback("INITIAL_SESSION",null)),this._debug("INITIAL_SESSION","callback id",e,"error",i),console.error(i)}})}async resetPasswordForEmail(e,s={}){let n=null,r=null;this.flowType==="pkce"&&([n,r]=await ur(this.storage,this.storageKey,!0));try{return await he(this.fetch,"POST",`${this.url}/recover`,{body:{email:e,code_challenge:n,code_challenge_method:r,gotrue_meta_security:{captcha_token:s.captchaToken}},headers:this.headers,redirectTo:s.redirectTo})}catch(i){if(ae(i))return{data:null,error:i};throw i}}async getUserIdentities(){var e;try{const{data:s,error:n}=await this.getUser();if(n)throw n;return{data:{identities:(e=s.user.identities)!==null&&e!==void 0?e:[]},error:null}}catch(s){if(ae(s))return{data:null,error:s};throw s}}async linkIdentity(e){var s;try{const{data:n,error:r}=await this._useSession(async i=>{var o,l,c,d,u;const{data:h,error:f}=i;if(f)throw f;const m=await this._getUrlForProvider(`${this.url}/user/identities/authorize`,e.provider,{redirectTo:(o=e.options)===null||o===void 0?void 0:o.redirectTo,scopes:(l=e.options)===null||l===void 0?void 0:l.scopes,queryParams:(c=e.options)===null||c===void 0?void 0:c.queryParams,skipBrowserRedirect:!0});return await he(this.fetch,"GET",m,{headers:this.headers,jwt:(u=(d=h.session)===null||d===void 0?void 0:d.access_token)!==null&&u!==void 0?u:void 0})});if(r)throw r;return Qt()&&!(!((s=e.options)===null||s===void 0)&&s.skipBrowserRedirect)&&window.location.assign(n==null?void 0:n.url),{data:{provider:e.provider,url:n==null?void 0:n.url},error:null}}catch(n){if(ae(n))return{data:{provider:e.provider,url:null},error:n};throw n}}async unlinkIdentity(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)throw o;return await he(this.fetch,"DELETE",`${this.url}/user/identities/${e.identity_id}`,{headers:this.headers,jwt:(r=(n=i.session)===null||n===void 0?void 0:n.access_token)!==null&&r!==void 0?r:void 0})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _refreshAccessToken(e){const s=`#_refreshAccessToken(${e.substring(0,5)}...)`;this._debug(s,"begin");try{const n=Date.now();return await fN(async r=>(r>0&&await hN(200*Math.pow(2,r-1)),this._debug(s,"refreshing attempt",r),await he(this.fetch,"POST",`${this.url}/token?grant_type=refresh_token`,{body:{refresh_token:e},headers:this.headers,xform:Es})),(r,i)=>{const o=200*Math.pow(2,r);return i&&Hc(i)&&Date.now()+o-n<pr})}catch(n){if(this._debug(s,"error",n),ae(n))return{data:{session:null,user:null},error:n};throw n}finally{this._debug(s,"end")}}_isValidSession(e){return typeof e=="object"&&e!==null&&"access_token"in e&&"refresh_token"in e&&"expires_at"in e}async _handleProviderSignIn(e,s){const n=await this._getUrlForProvider(`${this.url}/authorize`,e,{redirectTo:s.redirectTo,scopes:s.scopes,queryParams:s.queryParams});return this._debug("#_handleProviderSignIn()","provider",e,"options",s,"url",n),Qt()&&!s.skipBrowserRedirect&&window.location.assign(n),{data:{provider:e,url:n},error:null}}async _recoverAndRefresh(){var e;const s="#_recoverAndRefresh()";this._debug(s,"begin");try{const n=await Za(this.storage,this.storageKey);if(this._debug(s,"session from storage",n),!this._isValidSession(n)){this._debug(s,"session is not valid"),n!==null&&await this._removeSession();return}const r=((e=n.expires_at)!==null&&e!==void 0?e:1/0)*1e3-Date.now()<Bc;if(this._debug(s,`session has${r?"":" not"} expired with margin of ${Bc}s`),r){if(this.autoRefreshToken&&n.refresh_token){const{error:i}=await this._callRefreshToken(n.refresh_token);i&&(console.error(i),Hc(i)||(this._debug(s,"refresh failed with a non-retryable error, removing the session",i),await this._removeSession()))}}else await this._notifyAllSubscribers("SIGNED_IN",n)}catch(n){this._debug(s,"error",n),console.error(n);return}finally{this._debug(s,"end")}}async _callRefreshToken(e){var s,n;if(!e)throw new Ys;if(this.refreshingDeferred)return this.refreshingDeferred.promise;const r=`#_callRefreshToken(${e.substring(0,5)}...)`;this._debug(r,"begin");try{this.refreshingDeferred=new Jl;const{data:i,error:o}=await this._refreshAccessToken(e);if(o)throw o;if(!i.session)throw new Ys;await this._saveSession(i.session),await this._notifyAllSubscribers("TOKEN_REFRESHED",i.session);const l={session:i.session,error:null};return this.refreshingDeferred.resolve(l),l}catch(i){if(this._debug(r,"error",i),ae(i)){const o={session:null,error:i};return Hc(i)||await this._removeSession(),(s=this.refreshingDeferred)===null||s===void 0||s.resolve(o),o}throw(n=this.refreshingDeferred)===null||n===void 0||n.reject(i),i}finally{this.refreshingDeferred=null,this._debug(r,"end")}}async _notifyAllSubscribers(e,s,n=!0){const r=`#_notifyAllSubscribers(${e})`;this._debug(r,"begin",s,`broadcast = ${n}`);try{this.broadcastChannel&&n&&this.broadcastChannel.postMessage({event:e,session:s});const i=[],o=Array.from(this.stateChangeEmitters.values()).map(async l=>{try{await l.callback(e,s)}catch(c){i.push(c)}});if(await Promise.all(o),i.length>0){for(let l=0;l<i.length;l+=1)console.error(i[l]);throw i[0]}}finally{this._debug(r,"end")}}async _saveSession(e){this._debug("#_saveSession()",e),this.suppressGetSessionWarning=!0,await dy(this.storage,this.storageKey,e)}async _removeSession(){this._debug("#_removeSession()"),await eo(this.storage,this.storageKey),await this._notifyAllSubscribers("SIGNED_OUT",null)}_removeVisibilityChangedCallback(){this._debug("#_removeVisibilityChangedCallback()");const e=this.visibilityChangedCallback;this.visibilityChangedCallback=null;try{e&&Qt()&&(window!=null&&window.removeEventListener)&&window.removeEventListener("visibilitychange",e)}catch(s){console.error("removing visibilitychange callback failed",s)}}async _startAutoRefresh(){await this._stopAutoRefresh(),this._debug("#_startAutoRefresh()");const e=setInterval(()=>this._autoRefreshTokenTick(),pr);this.autoRefreshTicker=e,e&&typeof e=="object"&&typeof e.unref=="function"?e.unref():typeof Deno<"u"&&typeof Deno.unrefTimer=="function"&&Deno.unrefTimer(e),setTimeout(async()=>{await this.initializePromise,await this._autoRefreshTokenTick()},0)}async _stopAutoRefresh(){this._debug("#_stopAutoRefresh()");const e=this.autoRefreshTicker;this.autoRefreshTicker=null,e&&clearInterval(e)}async startAutoRefresh(){this._removeVisibilityChangedCallback(),await this._startAutoRefresh()}async stopAutoRefresh(){this._removeVisibilityChangedCallback(),await this._stopAutoRefresh()}async _autoRefreshTokenTick(){this._debug("#_autoRefreshTokenTick()","begin");try{await this._acquireLock(0,async()=>{try{const e=Date.now();try{return await this._useSession(async s=>{const{data:{session:n}}=s;if(!n||!n.refresh_token||!n.expires_at){this._debug("#_autoRefreshTokenTick()","no session");return}const r=Math.floor((n.expires_at*1e3-e)/pr);this._debug("#_autoRefreshTokenTick()",`access token expires in ${r} ticks, a tick lasts ${pr}ms, refresh threshold is ${cu} ticks`),r<=cu&&await this._callRefreshToken(n.refresh_token)})}catch(s){console.error("Auto refresh tick failed with error. This is likely a transient error.",s)}}finally{this._debug("#_autoRefreshTokenTick()","end")}})}catch(e){if(e.isAcquireTimeout||e instanceof uy)this._debug("auto refresh token tick lock not available");else throw e}}async _handleVisibilityChange(){if(this._debug("#_handleVisibilityChange()"),!Qt()||!(window!=null&&window.addEventListener))return this.autoRefreshToken&&this.startAutoRefresh(),!1;try{this.visibilityChangedCallback=async()=>await this._onVisibilityChanged(!1),window==null||window.addEventListener("visibilitychange",this.visibilityChangedCallback),await this._onVisibilityChanged(!0)}catch(e){console.error("_handleVisibilityChange",e)}}async _onVisibilityChanged(e){const s=`#_onVisibilityChanged(${e})`;this._debug(s,"visibilityState",document.visibilityState),document.visibilityState==="visible"?(this.autoRefreshToken&&this._startAutoRefresh(),e||(await this.initializePromise,await this._acquireLock(-1,async()=>{if(document.visibilityState!=="visible"){this._debug(s,"acquired the lock to recover the session, but the browser visibilityState is no longer visible, aborting");return}await this._recoverAndRefresh()}))):document.visibilityState==="hidden"&&this.autoRefreshToken&&this._stopAutoRefresh()}async _getUrlForProvider(e,s,n){const r=[`provider=${encodeURIComponent(s)}`];if(n!=null&&n.redirectTo&&r.push(`redirect_to=${encodeURIComponent(n.redirectTo)}`),n!=null&&n.scopes&&r.push(`scopes=${encodeURIComponent(n.scopes)}`),this.flowType==="pkce"){const[i,o]=await ur(this.storage,this.storageKey),l=new URLSearchParams({code_challenge:`${encodeURIComponent(i)}`,code_challenge_method:`${encodeURIComponent(o)}`});r.push(l.toString())}if(n!=null&&n.queryParams){const i=new URLSearchParams(n.queryParams);r.push(i.toString())}return n!=null&&n.skipBrowserRedirect&&r.push(`skip_http_redirect=${n.skipBrowserRedirect}`),`${e}?${r.join("&")}`}async _unenroll(e){try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await he(this.fetch,"DELETE",`${this.url}/factors/${e.factorId}`,{headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _enroll(e){try{return await this._useSession(async s=>{var n,r;const{data:i,error:o}=s;if(o)return{data:null,error:o};const l=Object.assign({friendly_name:e.friendlyName,factor_type:e.factorType},e.factorType==="phone"?{phone:e.phone}:{issuer:e.issuer}),{data:c,error:d}=await he(this.fetch,"POST",`${this.url}/factors`,{body:l,headers:this.headers,jwt:(n=i==null?void 0:i.session)===null||n===void 0?void 0:n.access_token});return d?{data:null,error:d}:(e.factorType==="totp"&&(!((r=c==null?void 0:c.totp)===null||r===void 0)&&r.qr_code)&&(c.totp.qr_code=`data:image/svg+xml;utf-8,${c.totp.qr_code}`),{data:c,error:null})})}catch(s){if(ae(s))return{data:null,error:s};throw s}}async _verify(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;if(i)return{data:null,error:i};const{data:o,error:l}=await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/verify`,{body:{code:e.code,challenge_id:e.challengeId},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token});return l?{data:null,error:l}:(await this._saveSession(Object.assign({expires_at:Math.round(Date.now()/1e3)+o.expires_in},o)),await this._notifyAllSubscribers("MFA_CHALLENGE_VERIFIED",o),{data:o,error:l})})}catch(s){if(ae(s))return{data:null,error:s};throw s}})}async _challenge(e){return this._acquireLock(-1,async()=>{try{return await this._useSession(async s=>{var n;const{data:r,error:i}=s;return i?{data:null,error:i}:await he(this.fetch,"POST",`${this.url}/factors/${e.factorId}/challenge`,{body:{channel:e.channel},headers:this.headers,jwt:(n=r==null?void 0:r.session)===null||n===void 0?void 0:n.access_token})})}catch(s){if(ae(s))return{data:null,error:s};throw s}})}async _challengeAndVerify(e){const{data:s,error:n}=await this._challenge({factorId:e.factorId});return n?{data:null,error:n}:await this._verify({factorId:e.factorId,challengeId:s.id,code:e.code})}async _listFactors(){const{data:{user:e},error:s}=await this.getUser();if(s)return{data:null,error:s};const n=(e==null?void 0:e.factors)||[],r=n.filter(o=>o.factor_type==="totp"&&o.status==="verified"),i=n.filter(o=>o.factor_type==="phone"&&o.status==="verified");return{data:{all:n,totp:r,phone:i},error:null}}async _getAuthenticatorAssuranceLevel(){return this._acquireLock(-1,async()=>await this._useSession(async e=>{var s,n;const{data:{session:r},error:i}=e;if(i)return{data:null,error:i};if(!r)return{data:{currentLevel:null,nextLevel:null,currentAuthenticationMethods:[]},error:null};const{payload:o}=Vc(r.access_token);let l=null;o.aal&&(l=o.aal);let c=l;((n=(s=r.user.factors)===null||s===void 0?void 0:s.filter(h=>h.status==="verified"))!==null&&n!==void 0?n:[]).length>0&&(c="aal2");const u=o.amr||[];return{data:{currentLevel:l,nextLevel:c,currentAuthenticationMethods:u},error:null}}))}async fetchJwk(e,s={keys:[]}){let n=s.keys.find(o=>o.kid===e);if(n||(n=this.jwks.keys.find(o=>o.kid===e),n&&this.jwks_cached_at+Jj>Date.now()))return n;const{data:r,error:i}=await he(this.fetch,"GET",`${this.url}/.well-known/jwks.json`,{headers:this.headers});if(i)throw i;if(!r.keys||r.keys.length===0)throw new zi("JWKS is empty");if(this.jwks=r,this.jwks_cached_at=Date.now(),n=r.keys.find(o=>o.kid===e),!n)throw new zi("No matching signing key found in JWKS");return n}async getClaims(e,s={keys:[]}){try{let n=e;if(!n){const{data:m,error:p}=await this.getSession();if(p||!m.session)return{data:null,error:p};n=m.session.access_token}const{header:r,payload:i,signature:o,raw:{header:l,payload:c}}=Vc(n);if(bN(i.exp),!r.kid||r.alg==="HS256"||!("crypto"in globalThis&&"subtle"in globalThis.crypto)){const{error:m}=await this.getUser(n);if(m)throw m;return{data:{claims:i,header:r,signature:o},error:null}}const d=wN(r.alg),u=await this.fetchJwk(r.kid,s),h=await crypto.subtle.importKey("jwk",u,d,!0,["verify"]);if(!await crypto.subtle.verify(d,h,o,aN(`${l}.${c}`)))throw new zi("Invalid JWT signature");return{data:{claims:i,header:r,signature:o},error:null}}catch(n){if(ae(n))return{data:null,error:n};throw n}}}ua.nextInstanceID=0;const FN=ua;class $N extends FN{constructor(e){super(e)}}var zN=globalThis&&globalThis.__awaiter||function(t,e,s,n){function r(i){return i instanceof s?i:new s(function(o){o(i)})}return new(s||(s=Promise))(function(i,o){function l(u){try{d(n.next(u))}catch(h){o(h)}}function c(u){try{d(n.throw(u))}catch(h){o(h)}}function d(u){u.done?i(u.value):r(u.value).then(l,c)}d((n=n.apply(t,e||[])).next())})};class UN{constructor(e,s,n){var r,i,o;if(this.supabaseUrl=e,this.supabaseKey=s,!e)throw new Error("supabaseUrl is required.");if(!s)throw new Error("supabaseKey is required.");const l=Vj(e),c=new URL(l);this.realtimeUrl=new URL("realtime/v1",c),this.realtimeUrl.protocol=this.realtimeUrl.protocol.replace("http","ws"),this.authUrl=new URL("auth/v1",c),this.storageUrl=new URL("storage/v1",c),this.functionsUrl=new URL("functions/v1",c);const d=`sb-${c.hostname.split(".")[0]}-auth-token`,u={db:Rj,realtime:Fj,auth:Object.assign(Object.assign({},Ij),{storageKey:d}),global:Oj},h=Wj(n??{},u);this.storageKey=(r=h.auth.storageKey)!==null&&r!==void 0?r:"",this.headers=(i=h.global.headers)!==null&&i!==void 0?i:{},h.accessToken?(this.accessToken=h.accessToken,this.auth=new Proxy({},{get:(f,m)=>{throw new Error(`@supabase/supabase-js: Supabase Client is configured with the accessToken option, accessing supabase.auth.${String(m)} is not possible`)}})):this.auth=this._initSupabaseAuthClient((o=h.auth)!==null&&o!==void 0?o:{},this.headers,h.global.fetch),this.fetch=Bj(s,this._getAccessToken.bind(this),h.global.fetch),this.realtime=this._initRealtimeClient(Object.assign({headers:this.headers,accessToken:this._getAccessToken.bind(this)},h.realtime)),this.rest=new rj(new URL("rest/v1",c).href,{headers:this.headers,schema:h.db.schema,fetch:this.fetch}),h.accessToken||this._listenForAuthEvents()}get functions(){return new D_(this.functionsUrl.href,{headers:this.headers,customFetch:this.fetch})}get storage(){return new Tj(this.storageUrl.href,this.headers,this.fetch)}from(e){return this.rest.from(e)}schema(e){return this.rest.schema(e)}rpc(e,s={},n={}){return this.rest.rpc(e,s,n)}channel(e,s={config:{}}){return this.realtime.channel(e,s)}getChannels(){return this.realtime.getChannels()}removeChannel(e){return this.realtime.removeChannel(e)}removeAllChannels(){return this.realtime.removeAllChannels()}_getAccessToken(){var e,s;return zN(this,void 0,void 0,function*(){if(this.accessToken)return yield this.accessToken();const{data:n}=yield this.auth.getSession();return(s=(e=n.session)===null||e===void 0?void 0:e.access_token)!==null&&s!==void 0?s:null})}_initSupabaseAuthClient({autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,storageKey:i,flowType:o,lock:l,debug:c},d,u){const h={Authorization:`Bearer ${this.supabaseKey}`,apikey:`${this.supabaseKey}`};return new $N({url:this.authUrl.href,headers:Object.assign(Object.assign({},h),d),storageKey:i,autoRefreshToken:e,persistSession:s,detectSessionInUrl:n,storage:r,flowType:o,lock:l,debug:c,fetch:u,hasCustomAuthorizationHeader:"Authorization"in this.headers})}_initRealtimeClient(e){return new vj(this.realtimeUrl.href,Object.assign(Object.assign({},e),{params:Object.assign({apikey:this.supabaseKey},e==null?void 0:e.params)}))}_listenForAuthEvents(){return this.auth.onAuthStateChange((s,n)=>{this._handleTokenChanged(s,"CLIENT",n==null?void 0:n.access_token)})}_handleTokenChanged(e,s,n){(e==="TOKEN_REFRESHED"||e==="SIGNED_IN")&&this.changedAccessToken!==n?this.changedAccessToken=n:e==="SIGNED_OUT"&&(this.realtime.setAuth(),s=="STORAGE"&&this.auth.signOut(),this.changedAccessToken=void 0)}}const BN=(t,e,s)=>new UN(t,e,s),HN="https://scwyzonphgbhfirwwnov.supabase.co",VN="eyJhbGciOiJIUzI1NiIsInR5cCI6IkpXVCJ9.eyJpc3MiOiJzdXBhYmFzZSIsInJlZiI6InNjd3l6b25waGdiaGZpcnd3bm92Iiwicm9sZSI6ImFub24iLCJpYXQiOjE3NTE4MzQ2MTMsImV4cCI6MjA2NzQxMDYxM30.XTqP3aOLIVfyw9kpdawVfqFAiYg8USJaZVLi478wq3I",xe=BN(HN,VN,{auth:{persistSession:!0,autoRefreshToken:!0,detectSessionInUrl:!0,storage:typeof window<"u"?window.localStorage:void 0,storageKey:"supabase.auth.token",flowType:"pkce"}}),hy=w.createContext(),js=()=>{const t=w.useContext(hy);if(!t)throw new Error("useAuth must be used within an AuthProvider");return t},WN=({children:t})=>{const[e,s]=w.useState(null),[n,r]=w.useState(null),[i,o]=w.useState(!0),[l,c]=w.useState(!1),d=j=>{var R,Y,B,H;if(!j)return null;const C=j.email,E=C.split("@")[0],M=C.split("@")[1];let P="Employee";return M==="capacity.com"||C.includes("admin")?P="Capacity Admin":M==="nsight-inc.com"&&(P="NSight Admin"),{id:j.id,email:C,first_name:((R=j.user_metadata)==null?void 0:R.first_name)||E,last_name:((Y=j.user_metadata)==null?void 0:Y.last_name)||"",role:((B=j.user_metadata)==null?void 0:B.role)||P,department:((H=j.user_metadata)==null?void 0:H.department)||"",created_at:j.created_at,updated_at:j.updated_at||new Date().toISOString()}},u=async(j,C=null)=>{var E;try{console.log("🔍 Fetching user profile for ID:",j);const M=localStorage.getItem(`deleted_user_${j}`);if(M){const H=parseInt(M),Q=Date.now()-10*60*1e3;if(console.log("🔒 Checking deletion marker for user:",j,"deleteTime:",new Date(H),"threshold:",new Date(Q)),H>Q)return console.log("⚠️ User was recently deleted, not auto-creating profile"),null;console.log("🧹 Cleaning up expired deletion marker for user:",j),localStorage.removeItem(`deleted_user_${j}`)}const P=new Promise((H,Q)=>setTimeout(()=>Q(new Error("Profile fetch timeout")),1e3)),R=xe.from("user_profiles").select("*").eq("id",j).single(),{data:Y,error:B}=await Promise.race([R,P]);if(B){if(console.error("❌ Database error fetching profile:",B),B.code==="PGRST116"||(E=B.message)!=null&&E.includes("No rows")){if(console.log("🔄 No profile in database for user:",j),localStorage.getItem(`deleted_user_${j}`))return console.log("🚫 User is marked as deleted, aborting profile creation"),null;console.log("🆕 Creating new profile for user:",j);try{return await h(j)}catch(O){if(console.error("❌ Database profile creation failed:",O),console.log("🚨 Falling back to auth-based profile"),C)return d(C);const{data:{user:U}}=await xe.auth.getUser();return d(U)}}if(console.log("🚨 Database unavailable, using auth-based profile"),C)return d(C);const{data:{user:H}}=await xe.auth.getUser();return d(H)}return console.log("✅ User profile found in database:",Y),Y}catch(M){M.message==="Profile fetch timeout"?console.warn("⏱️ Profile fetch timed out after 1s, using fallback"):console.error("❌ Error in getUserProfile:",M),console.log("🚨 Profile fetch failed, creating from auth data");try{if(C)return d(C);const{data:{user:P}}=await xe.auth.getUser();return d(P)}catch(P){return console.error("❌ Even auth fallback failed:",P),null}}},h=async j=>{var C,E,M,P,R;try{console.log("🔄 Creating user profile in database for ID:",j);const Y=localStorage.getItem(`deleted_user_${j}`);if(Y){const oe=parseInt(Y),re=Date.now()-10*60*1e3;if(oe>re)throw console.log("🚫 Aborting profile creation - user was recently deleted:",j),new Error("User was recently deleted");console.log("🧹 Create profile: Cleaning up expired deletion marker for user:",j),localStorage.removeItem(`deleted_user_${j}`)}const B=new Promise((oe,re)=>setTimeout(()=>re(new Error("Profile creation timeout")),1e4)),{data:{user:H},error:Q}=await xe.auth.getUser();if(Q||!H)throw new Error("Could not get user info");console.log("👤 Creating profile for authenticated user:",H.email,"requested userId:",j);const O=H.email,U=O.split("@")[0],q=((C=H.user_metadata)==null?void 0:C.first_name)||U,X=((E=H.user_metadata)==null?void 0:E.last_name)||"";let A="Employee";const F=O.split("@")[1];F==="capacity.com"||O.includes("admin")?A="Capacity Admin":F==="nsight-inc.com"&&(A="NSight Admin");const T=((M=H.user_metadata)==null?void 0:M.role)||A;console.log("🔍 Role determination for user:",O),console.log("  - Domain-based role:",A),console.log("  - User metadata role:",(P=H.user_metadata)==null?void 0:P.role),console.log("  - Final role:",T);const $=xe.from("user_profiles").insert([{id:j,email:O,first_name:q,last_name:X,role:T,department:((R=H.user_metadata)==null?void 0:R.department)||"",created_at:new Date().toISOString(),updated_at:new Date().toISOString()}]).select().single(),{data:ne,error:de}=await Promise.race([$,B]);if(de)throw console.error("❌ Error creating user profile in database:",de),de;return console.log("✅ User profile created in database:",ne),ne}catch(Y){throw console.error("❌ Database profile creation failed:",Y),Y}};w.useEffect(()=>{let j=!0;(async()=>{try{console.log("🔍 Getting initial session...");const{data:{session:P},error:R}=await xe.auth.getSession();if(!j)return;if(R){console.error("❌ Error getting session:",R),j&&o(!1);return}if(P!=null&&P.user){console.log("✅ Session found for user:",P.user.email);const Y=localStorage.getItem(`deleted_user_${P.user.id}`);if(Y){const B=parseInt(Y),H=Date.now()-10*60*1e3;if(B>H){console.log("🚫 Initial session: User was recently deleted, not setting profile:",P.user.email),j&&(s(null),r(null),o(!1));return}else console.log("🧹 Initial session: Cleaning up expired deletion marker"),localStorage.removeItem(`deleted_user_${P.user.id}`)}s(P.user);try{const B=await u(P.user.id,P.user);j&&r(B)}catch(B){if(console.error("❌ Profile loading failed completely:",B),j){const H=d(P.user);r(H)}}}else console.log("ℹ️ No active session found"),j&&(s(null),r(null))}catch(P){console.error("❌ Error in getInitialSession:",P),j&&(s(null),r(null))}finally{j&&(console.log("✅ Initial auth check complete"),o(!1))}})();const{data:{subscription:E}}=xe.auth.onAuthStateChange(async(P,R)=>{var Y;if(j){console.log("🔄 Auth state changed:",P,((Y=R==null?void 0:R.user)==null?void 0:Y.email)||"No user");try{if(R!=null&&R.user){console.log("👤 Processing auth state change for user:",R.user.id,R.user.email);const B=localStorage.getItem(`deleted_user_${R.user.id}`);if(B){const H=parseInt(B),Q=Date.now()-10*60*1e3;if(H>Q){console.log("🚫 Auth state change: User was recently deleted, not setting profile:",R.user.email),j&&(s(null),r(null));return}else console.log("🧹 Auth state change: Cleaning up expired deletion marker"),localStorage.removeItem(`deleted_user_${R.user.id}`)}if(s(R.user),P==="USER_UPDATED"&&n&&n.id===R.user.id){console.log("🔄 USER_UPDATED event - keeping existing profile to avoid refetch"),j&&o(!1);return}try{const H=await u(R.user.id,R.user);j&&r(H)}catch(H){if(console.error("❌ Profile loading failed in auth change:",H),j){const Q=d(R.user);r(Q)}}}else s(null),r(null)}catch(B){console.error("❌ Error in auth state change handler:",B),j&&(s(null),r(null))}j&&o(!1)}}),M=setTimeout(()=>{j&&(console.log("⚠️ Auth timeout - forcing loading to false"),o(!1))},15e3);return()=>{j=!1,clearTimeout(M),E==null||E.unsubscribe()}},[]);const S={user:e,userProfile:n,loading:i,isSigningIn:l,signUp:async(j,C,E={})=>{try{c(!0);const{data:M,error:P}=await xe.auth.signUp({email:j,password:C,options:{data:{first_name:E.firstName||"",last_name:E.lastName||"",department:E.department||"",role:E.role||"Employee"}}});if(P)throw P;return{data:M,error:null}}catch(M){return console.error("Sign up error:",M),{data:null,error:M}}finally{c(!1)}},adminCreateUser:async(j,C,E={})=>{try{c(!0),console.log("🔧 Admin creating user:",j),console.log("📋 UserData being sent to API:",E);const M={email:j,password:C,userData:{first_name:E.firstName||"",last_name:E.lastName||"",department:E.department||"",role:E.role||"Employee"}};console.log("📤 Request body being sent:",M);const P=await fetch("/api/admin/create-user",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(M)}),R=await P.json();if(console.log("📥 API response:",R),!P.ok)throw new Error(R.error||"Failed to create user");return console.log("✅ Admin user creation successful:",R),{data:R.user,error:null}}catch(M){return console.error("❌ Admin user creation error:",M),{data:null,error:M}}finally{c(!1)}},signIn:async(j,C)=>{try{c(!0);const{data:E,error:M}=await xe.auth.signInWithPassword({email:j,password:C});if(M)throw M;if(E.user){console.log("✅ Authentication successful, checking if account exists...");const P=localStorage.getItem(`deleted_user_${E.user.id}`);if(P){const R=parseInt(P),Y=Date.now()-10*60*1e3;if(R>Y)throw console.log("🚫 Attempted login with deleted account:",E.user.email),await xe.auth.signOut(),new Error("This account has been deleted and is no longer available. Please contact your administrator if you believe this is an error.");console.log("🧹 Cleaning up expired deletion marker during login"),localStorage.removeItem(`deleted_user_${E.user.id}`)}}return{data:E,error:null}}catch(E){return console.error("Sign in error:",E),{data:null,error:E}}finally{c(!1)}},signOut:async()=>{var j,C;try{const{error:E}=await xe.auth.signOut();if(E)if((j=E.message)!=null&&j.includes("Auth session missing")||E.name==="AuthSessionMissingError")console.log("⚠️ Session already missing, clearing local state");else throw E}catch(E){if(console.error("Sign out error:",E),(C=E.message)!=null&&C.includes("Auth session missing")||E.name==="AuthSessionMissingError")console.log("⚠️ Session missing error caught, clearing local state anyway");else throw s(null),r(null),E}finally{console.log("🚪 Clearing local auth state"),s(null),r(null)}},updateProfile:async j=>{try{if(!e)throw new Error("No user logged in");try{const{data:C,error:E}=await xe.from("user_profiles").update({first_name:j.first_name,last_name:j.last_name,role:j.role,department:j.department,updated_at:new Date().toISOString()}).eq("id",e.id).select().single();if(E)throw E;return r(C),{data:C,error:null}}catch(C){console.error("❌ Database update failed, updating auth metadata:",C);const{data:E,error:M}=await xe.auth.updateUser({data:{first_name:j.first_name,last_name:j.last_name,role:j.role,department:j.department}});if(M)throw M;const P=d(E.user);return r(P),{data:P,error:null}}}catch(C){return console.error("Update profile error:",C),{data:null,error:C}}},changePassword:async j=>{try{const{data:C,error:E}=await xe.auth.updateUser({password:j});if(E)throw E;return{data:C,error:null}}catch(C){return console.error("Change password error:",C),{data:null,error:C}}},resetPassword:async j=>{try{const{data:C,error:E}=await xe.auth.resetPasswordForEmail(j,{redirectTo:`${window.location.origin}/reset-password`});if(E)throw E;return{data:C,error:null}}catch(C){return console.error("Reset password error:",C),{data:null,error:C}}},getAllUsers:async()=>{try{console.log("🔍 Fetching all users from database...");const j=new Promise((P,R)=>setTimeout(()=>R(new Error("Get users timeout")),1e4)),C=xe.from("user_profiles").select("*").order("created_at",{ascending:!1}),{data:E,error:M}=await Promise.race([C,j]);if(M)throw M;return console.log("✅ Users fetched from database:",E.length),{data:E,error:null}}catch(j){return console.error("❌ Database users fetch failed:",j),console.log("🚨 Falling back to current user only"),{data:n?[n]:[],error:null}}},updateUserProfile:async(j,C)=>{try{const E=new Promise((Y,B)=>setTimeout(()=>B(new Error("Update timeout")),1e4)),M=xe.from("user_profiles").update({first_name:C.first_name,last_name:C.last_name,role:C.role,department:C.department,updated_at:new Date().toISOString()}).eq("id",j).select().single(),{data:P,error:R}=await Promise.race([M,E]);if(R)throw R;return{data:P,error:null}}catch(E){return console.error("❌ Update user profile failed:",E),{data:n,error:null}}},deleteUserProfile:async j=>{try{console.log("🗑️ Deleting user profile for ID:",j),localStorage.setItem(`deleted_user_${j}`,Date.now().toString()),console.log("🔒 Set deletion marker for user BEFORE deletion:",j);const C=new Promise((P,R)=>setTimeout(()=>R(new Error("Delete timeout")),1e4));console.log("🗃️ Deleting from user_profiles table...");const E=xe.from("user_profiles").delete().eq("id",j),{error:M}=await Promise.race([E,C]);return M?(console.error("❌ Error deleting user profile:",M),console.log("🔒 Keeping deletion marker due to database error"),{data:null,error:M}):(console.log("✅ User profile deleted from database"),console.log("✅ Delete successful - deletion marker will prevent auto-recreation"),{data:!0,error:null})}catch(C){return console.error("❌ Delete operation failed:",C),C.message==="Delete timeout"?(console.log("⏱️ Delete operation timed out - database may be unavailable"),console.log("🔒 Keeping deletion marker due to timeout"),{data:null,error:new Error("Delete operation timed out. Please try again.")}):(console.log("🔒 Keeping deletion marker due to error"),{data:null,error:C})}},assignUser:async(j,C,E)=>{try{const M=new Promise((B,H)=>setTimeout(()=>H(new Error("Assign timeout")),1e4)),P=xe.from(j).update({assigned_to:E}).eq("id",C).select().single(),{data:R,error:Y}=await Promise.race([P,M]);if(Y)throw Y;return{data:R,error:null}}catch(M){return console.error("❌ Assign user failed:",M),{data:null,error:M}}},isAuthenticated:!!e,isCapacityAdmin:(n==null?void 0:n.role)==="Capacity Admin",isNSightAdmin:(n==null?void 0:n.role)==="NSight Admin",isEmployee:(n==null?void 0:n.role)==="Employee",getDashboardRoute:()=>{if(!n)return"/dashboard";switch(n.role){case"Capacity Admin":return"/dashboard";case"NSight Admin":return"/dashboard";case"Employee":return"/dashboard";default:return"/dashboard"}},canEdit:j=>!e||!n?!1:n.role==="Capacity Admin"||n.role==="NSight Admin"?!0:(j==null?void 0:j.created_by)===e.id||(j==null?void 0:j.assigned_to)===e.id,canDelete:j=>!e||!n?!1:n.role==="Capacity Admin"?!0:(j==null?void 0:j.created_by)===e.id};return a.jsx(hy.Provider,{value:S,children:t})},fy=w.createContext(),qN=()=>{const t=w.useContext(fy);if(!t)throw new Error("useTheme must be used within a ThemeProvider");return t},KN=({children:t})=>{const[e,s]=w.useState("dark"),[n,r]=w.useState(!1);w.useEffect(()=>{const c=localStorage.getItem("app-theme");c&&["light","dark","system"].includes(c)&&s(c)},[]),w.useEffect(()=>{const c=document.documentElement;c.classList.remove("light","dark");let d=e;if(e==="system"&&(d=window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light"),c.classList.add(d),n){c.classList.add("theme-transitioning");const u=setTimeout(()=>{c.classList.remove("theme-transitioning"),r(!1)},300);return()=>clearTimeout(u)}},[e,n]),w.useEffect(()=>{if(e!=="system")return;const c=window.matchMedia("(prefers-color-scheme: dark)"),d=()=>{r(!0)};return c.addEventListener("change",d),()=>c.removeEventListener("change",d)},[e]);const i=c=>{c!==e&&(r(!0),s(c),localStorage.setItem("app-theme",c))},l={theme:e,currentTheme:(()=>e==="system"?window.matchMedia("(prefers-color-scheme: dark)").matches?"dark":"light":e)(),changeTheme:i,isTransitioning:n};return a.jsx(fy.Provider,{value:l,children:t})},Mh=()=>(console.log("🧹 Clearing all mock authentication data..."),["capacity-auth","capacity-users","capacity-users-version","capacity-passwords","capacity-login-activity","formulas_data","materials_data"].forEach(e=>{localStorage.getItem(e)&&(localStorage.removeItem(e),console.log(`✅ Removed: ${e}`))}),Object.keys(localStorage).forEach(e=>{(e.startsWith("capacity-")||e.includes("mock")||e.includes("demo"))&&(localStorage.removeItem(e),console.log(`✅ Removed additional key: ${e}`))}),Object.keys(sessionStorage).forEach(e=>{(e.startsWith("capacity-")||e.includes("mock")||e.includes("demo"))&&(sessionStorage.removeItem(e),console.log(`✅ Removed from session storage: ${e}`))}),console.log("🎉 All mock data cleared! Please refresh the page."),console.log("🔐 You can now use your actual Supabase credentials to log in."),!0);typeof window<"u"&&(window.clearAllMockData=Mh);Mh();var GN={xmlns:"http://www.w3.org/2000/svg",width:24,height:24,viewBox:"0 0 24 24",fill:"none",stroke:"currentColor",strokeWidth:2,strokeLinecap:"round",strokeLinejoin:"round"};const YN=t=>t.replace(/([a-z0-9])([A-Z])/g,"$1-$2").toLowerCase(),JN=(t,e)=>{const s=w.forwardRef(({color:n="currentColor",size:r=24,strokeWidth:i=2,absoluteStrokeWidth:o,children:l,...c},d)=>w.createElement("svg",{ref:d,...GN,width:r,height:r,stroke:n,strokeWidth:o?Number(i)*24/Number(r):i,className:`lucide lucide-${YN(t)}`,...c},[...e.map(([u,h])=>w.createElement(u,h)),...(Array.isArray(l)?l:[l])||[]]));return s.displayName=`${t}`,s};var J=JN;const ts=J("Activity",[["path",{d:"M22 12h-4l-3 9L9 3l-3 9H2",key:"d5dnw9"}]]),Bi=J("AlertCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["line",{x1:"12",x2:"12",y1:"8",y2:"12",key:"1pkeuh"}],["line",{x1:"12",x2:"12.01",y1:"16",y2:"16",key:"4dfq90"}]]),us=J("AlertTriangle",[["path",{d:"m21.73 18-8-14a2 2 0 0 0-3.48 0l-8 14A2 2 0 0 0 4 21h16a2 2 0 0 0 1.73-3Z",key:"c3ski4"}],["path",{d:"M12 9v4",key:"juzpu7"}],["path",{d:"M12 17h.01",key:"p32p05"}]]),Nt=J("ArrowLeft",[["path",{d:"m12 19-7-7 7-7",key:"1l729n"}],["path",{d:"M19 12H5",key:"x3x0zl"}]]),QN=J("Atom",[["circle",{cx:"12",cy:"12",r:"1",key:"41hilf"}],["path",{d:"M20.2 20.2c2.04-2.03.02-7.36-4.5-11.9-4.54-4.52-9.87-6.54-11.9-4.5-2.04 2.03-.02 7.36 4.5 11.9 4.54 4.52 9.87 6.54 11.9 4.5Z",key:"1l2ple"}],["path",{d:"M15.7 15.7c4.52-4.54 6.54-9.87 4.5-11.9-2.03-2.04-7.36-.02-11.9 4.5-4.52 4.54-6.54 9.87-4.5 11.9 2.03 2.04 7.36.02 11.9-4.5Z",key:"1wam0m"}]]),to=J("BarChart3",[["path",{d:"M3 3v18h18",key:"1s2lah"}],["path",{d:"M18 17V9",key:"2bz60n"}],["path",{d:"M13 17V5",key:"1frdt8"}],["path",{d:"M8 17v-3",key:"17ska0"}]]),er=J("Building2",[["path",{d:"M6 22V4a2 2 0 0 1 2-2h8a2 2 0 0 1 2 2v18Z",key:"1b4qmf"}],["path",{d:"M6 12H4a2 2 0 0 0-2 2v6a2 2 0 0 0 2 2h2",key:"i71pzd"}],["path",{d:"M18 9h2a2 2 0 0 1 2 2v9a2 2 0 0 1-2 2h-2",key:"10jefs"}],["path",{d:"M10 6h4",key:"1itunk"}],["path",{d:"M10 10h4",key:"tcdvrf"}],["path",{d:"M10 14h4",key:"kelpxr"}],["path",{d:"M10 18h4",key:"1ulq68"}]]),so=J("Calendar",[["rect",{width:"18",height:"18",x:"3",y:"4",rx:"2",ry:"2",key:"eu3xkr"}],["line",{x1:"16",x2:"16",y1:"2",y2:"6",key:"m3sa8f"}],["line",{x1:"8",x2:"8",y1:"2",y2:"6",key:"18kwsl"}],["line",{x1:"3",x2:"21",y1:"10",y2:"10",key:"xt86sb"}]]),mi=J("CheckCircle",[["path",{d:"M22 11.08V12a10 10 0 1 1-5.93-9.14",key:"g774vq"}],["polyline",{points:"22 4 12 14.01 9 11.01",key:"6xbx8j"}]]),Dh=J("Check",[["polyline",{points:"20 6 9 17 4 12",key:"10jjfj"}]]),_n=J("ChevronDown",[["path",{d:"m6 9 6 6 6-6",key:"qrunsl"}]]),XN=J("ChevronLeft",[["path",{d:"m15 18-6-6 6-6",key:"1wnfg3"}]]),ha=J("ChevronRight",[["path",{d:"m9 18 6-6-6-6",key:"mthhwq"}]]),Im=J("Circle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}]]),no=J("Clock",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["polyline",{points:"12 6 12 12 16 14",key:"68esgv"}]]),ti=J("Code",[["polyline",{points:"16 18 22 12 16 6",key:"z7tu5w"}],["polyline",{points:"8 6 2 12 8 18",key:"1eg1df"}]]),Ds=J("Database",[["ellipse",{cx:"12",cy:"5",rx:"9",ry:"3",key:"msslwz"}],["path",{d:"M3 5V19A9 3 0 0 0 21 19V5",key:"1wlel7"}],["path",{d:"M3 12A9 3 0 0 0 21 12",key:"mv7ke4"}]]),Fm=J("Download",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"7 10 12 15 17 10",key:"2ggqvy"}],["line",{x1:"12",x2:"12",y1:"15",y2:"3",key:"1vk2je"}]]),ZN=J("ExternalLink",[["path",{d:"M18 13v6a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V8a2 2 0 0 1 2-2h6",key:"a6xqqp"}],["polyline",{points:"15 3 21 3 21 9",key:"mznyad"}],["line",{x1:"10",x2:"21",y1:"14",y2:"3",key:"18c3s4"}]]),Oo=J("EyeOff",[["path",{d:"M9.88 9.88a3 3 0 1 0 4.24 4.24",key:"1jxqfv"}],["path",{d:"M10.73 5.08A10.43 10.43 0 0 1 12 5c7 0 10 7 10 7a13.16 13.16 0 0 1-1.67 2.68",key:"9wicm4"}],["path",{d:"M6.61 6.61A13.526 13.526 0 0 0 2 12s3 7 10 7a9.74 9.74 0 0 0 5.39-1.61",key:"1jreej"}],["line",{x1:"2",x2:"22",y1:"2",y2:"22",key:"a6p6uj"}]]),Ro=J("Eye",[["path",{d:"M2 12s3-7 10-7 10 7 10 7-3 7-10 7-10-7-10-7Z",key:"rwhkz3"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),e2=J("FileText",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}],["line",{x1:"16",x2:"8",y1:"13",y2:"13",key:"14keom"}],["line",{x1:"16",x2:"8",y1:"17",y2:"17",key:"17nazh"}],["line",{x1:"10",x2:"8",y1:"9",y2:"9",key:"1a5vjj"}]]),Oh=J("File",[["path",{d:"M14.5 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V7.5L14.5 2z",key:"1nnpy2"}],["polyline",{points:"14 2 14 8 20 8",key:"1ew0cm"}]]),Ql=J("Filter",[["polygon",{points:"22 3 2 3 10 12.46 10 19 14 21 14 12.46 22 3",key:"1yg77f"}]]),vs=J("FlaskConical",[["path",{d:"M10 2v7.527a2 2 0 0 1-.211.896L4.72 20.55a1 1 0 0 0 .9 1.45h12.76a1 1 0 0 0 .9-1.45l-5.069-10.127A2 2 0 0 1 14 9.527V2",key:"pzvekw"}],["path",{d:"M8.5 2h7",key:"csnxdl"}],["path",{d:"M7 16h10",key:"wp8him"}]]),ws=J("FolderOpen",[["path",{d:"m6 14 1.45-2.9A2 2 0 0 1 9.24 10H20a2 2 0 0 1 1.94 2.5l-1.55 6a2 2 0 0 1-1.94 1.5H4a2 2 0 0 1-2-2V5c0-1.1.9-2 2-2h3.93a2 2 0 0 1 1.66.9l.82 1.2a2 2 0 0 0 1.66.9H18a2 2 0 0 1 2 2v2",key:"1nmvlm"}]]),t2=J("HardDrive",[["line",{x1:"22",x2:"2",y1:"12",y2:"12",key:"1y58io"}],["path",{d:"M5.45 5.11 2 12v6a2 2 0 0 0 2 2h16a2 2 0 0 0 2-2v-6l-3.45-6.89A2 2 0 0 0 16.76 4H7.24a2 2 0 0 0-1.79 1.11z",key:"oot6mr"}],["line",{x1:"6",x2:"6.01",y1:"16",y2:"16",key:"sgf278"}],["line",{x1:"10",x2:"10.01",y1:"16",y2:"16",key:"1l4acy"}]]),my=J("Image",[["rect",{width:"18",height:"18",x:"3",y:"3",rx:"2",ry:"2",key:"1m3agn"}],["circle",{cx:"9",cy:"9",r:"2",key:"af1f0g"}],["path",{d:"m21 15-3.086-3.086a2 2 0 0 0-2.828 0L6 21",key:"1xmnt7"}]]),py=J("Info",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"M12 16v-4",key:"1dtifu"}],["path",{d:"M12 8h.01",key:"e9boi3"}]]),$m=J("LayoutDashboard",[["rect",{width:"7",height:"9",x:"3",y:"3",rx:"1",key:"10lvy0"}],["rect",{width:"7",height:"5",x:"14",y:"3",rx:"1",key:"16une8"}],["rect",{width:"7",height:"9",x:"14",y:"12",rx:"1",key:"1hutg5"}],["rect",{width:"7",height:"5",x:"3",y:"16",rx:"1",key:"ldoo1y"}]]),gy=J("Loader2",[["path",{d:"M21 12a9 9 0 1 1-6.219-8.56",key:"13zald"}]]),Rh=J("Lock",[["rect",{width:"18",height:"11",x:"3",y:"11",rx:"2",ry:"2",key:"1w4ew1"}],["path",{d:"M7 11V7a5 5 0 0 1 10 0v4",key:"fwvmzm"}]]),s2=J("LogIn",[["path",{d:"M15 3h4a2 2 0 0 1 2 2v14a2 2 0 0 1-2 2h-4",key:"u53s6r"}],["polyline",{points:"10 17 15 12 10 7",key:"1ail0h"}],["line",{x1:"15",x2:"3",y1:"12",y2:"12",key:"v6grx8"}]]),Ih=J("LogOut",[["path",{d:"M9 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h4",key:"1uf3rs"}],["polyline",{points:"16 17 21 12 16 7",key:"1gabdz"}],["line",{x1:"21",x2:"9",y1:"12",y2:"12",key:"1uyos4"}]]),n2=J("Mail",[["rect",{width:"20",height:"16",x:"2",y:"4",rx:"2",key:"18n3k1"}],["path",{d:"m22 7-8.97 5.7a1.94 1.94 0 0 1-2.06 0L2 7",key:"1ocrg3"}]]),zm=J("MessageCircle",[["path",{d:"m3 21 1.9-5.7a8.5 8.5 0 1 1 3.8 3.8z",key:"v2veuj"}]]),r2=J("Minimize2",[["polyline",{points:"4 14 10 14 10 20",key:"11kfnr"}],["polyline",{points:"20 10 14 10 14 4",key:"rlmsce"}],["line",{x1:"14",x2:"21",y1:"10",y2:"3",key:"o5lafz"}],["line",{x1:"3",x2:"10",y1:"21",y2:"14",key:"1atl0r"}]]),i2=J("Monitor",[["rect",{width:"20",height:"14",x:"2",y:"3",rx:"2",key:"48i651"}],["line",{x1:"8",x2:"16",y1:"21",y2:"21",key:"1svkeh"}],["line",{x1:"12",x2:"12",y1:"17",y2:"21",key:"vw1qmm"}]]),a2=J("Moon",[["path",{d:"M12 3a6 6 0 0 0 9 9 9 9 0 1 1-9-9Z",key:"a7tn18"}]]),o2=J("Paperclip",[["path",{d:"m21.44 11.05-9.19 9.19a6 6 0 0 1-8.49-8.49l8.57-8.57A4 4 0 1 1 18 8.84l-8.59 8.57a2 2 0 0 1-2.83-2.83l8.49-8.48",key:"1u3ebp"}]]),hu=J("PenLine",[["path",{d:"M12 20h9",key:"t2du7b"}],["path",{d:"M16.5 3.5a2.12 2.12 0 0 1 3 3L7 19l-4 1 1-4Z",key:"ymcmye"}]]),Fh=J("PenSquare",[["path",{d:"M11 4H4a2 2 0 0 0-2 2v14a2 2 0 0 0 2 2h14a2 2 0 0 0 2-2v-7",key:"1qinfi"}],["path",{d:"M18.5 2.5a2.12 2.12 0 0 1 3 3L12 15l-4 1 1-4Z",key:"w2jsv5"}]]),tr=J("Plus",[["path",{d:"M5 12h14",key:"1ays0h"}],["path",{d:"M12 5v14",key:"s699le"}]]),xy=J("Search",[["circle",{cx:"11",cy:"11",r:"8",key:"4ej97u"}],["path",{d:"m21 21-4.3-4.3",key:"1qie3q"}]]),l2=J("Send",[["path",{d:"m22 2-7 20-4-9-9-4Z",key:"1q3vgg"}],["path",{d:"M22 2 11 13",key:"nzbqef"}]]),ro=J("Server",[["rect",{width:"20",height:"8",x:"2",y:"2",rx:"2",ry:"2",key:"ngkwjq"}],["rect",{width:"20",height:"8",x:"2",y:"14",rx:"2",ry:"2",key:"iecqi9"}],["line",{x1:"6",x2:"6.01",y1:"6",y2:"6",key:"16zg32"}],["line",{x1:"6",x2:"6.01",y1:"18",y2:"18",key:"nzw8ys"}]]),gl=J("Settings",[["path",{d:"M12.22 2h-.44a2 2 0 0 0-2 2v.18a2 2 0 0 1-1 1.73l-.43.25a2 2 0 0 1-2 0l-.15-.08a2 2 0 0 0-2.73.73l-.22.38a2 2 0 0 0 .73 2.73l.15.1a2 2 0 0 1 1 1.72v.51a2 2 0 0 1-1 1.74l-.15.09a2 2 0 0 0-.73 2.73l.22.38a2 2 0 0 0 2.73.73l.15-.08a2 2 0 0 1 2 0l.43.25a2 2 0 0 1 1 1.73V20a2 2 0 0 0 2 2h.44a2 2 0 0 0 2-2v-.18a2 2 0 0 1 1-1.73l.43-.25a2 2 0 0 1 2 0l.15.08a2 2 0 0 0 2.73-.73l.22-.39a2 2 0 0 0-.73-2.73l-.15-.08a2 2 0 0 1-1-1.74v-.5a2 2 0 0 1 1-1.74l.15-.09a2 2 0 0 0 .73-2.73l-.22-.38a2 2 0 0 0-2.73-.73l-.15.08a2 2 0 0 1-2 0l-.43-.25a2 2 0 0 1-1-1.73V4a2 2 0 0 0-2-2z",key:"1qme2f"}],["circle",{cx:"12",cy:"12",r:"3",key:"1v7zrd"}]]),c2=J("Sun",[["circle",{cx:"12",cy:"12",r:"4",key:"4exip2"}],["path",{d:"M12 2v2",key:"tus03m"}],["path",{d:"M12 20v2",key:"1lh1kg"}],["path",{d:"m4.93 4.93 1.41 1.41",key:"149t6j"}],["path",{d:"m17.66 17.66 1.41 1.41",key:"ptbguv"}],["path",{d:"M2 12h2",key:"1t8f8n"}],["path",{d:"M20 12h2",key:"1q8mjw"}],["path",{d:"m6.34 17.66-1.41 1.41",key:"1m8zz5"}],["path",{d:"m19.07 4.93-1.41 1.41",key:"1shlcs"}]]),fa=J("Trash2",[["path",{d:"M3 6h18",key:"d0wm0j"}],["path",{d:"M19 6v14c0 1-1 2-2 2H7c-1 0-2-1-2-2V6",key:"4alrt4"}],["path",{d:"M8 6V4c0-1 1-2 2-2h4c1 0 2 1 2 2v2",key:"v07s0e"}],["line",{x1:"10",x2:"10",y1:"11",y2:"17",key:"1uufr5"}],["line",{x1:"14",x2:"14",y1:"11",y2:"17",key:"xtxkd"}]]),d2=J("TrendingDown",[["polyline",{points:"22 17 13.5 8.5 8.5 13.5 2 7",key:"1r2t7k"}],["polyline",{points:"16 17 22 17 22 11",key:"11uiuu"}]]),pi=J("TrendingUp",[["polyline",{points:"22 7 13.5 15.5 8.5 10.5 2 17",key:"126l90"}],["polyline",{points:"16 7 22 7 22 13",key:"kwv8wd"}]]),yy=J("Upload",[["path",{d:"M21 15v4a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2v-4",key:"ih7n3h"}],["polyline",{points:"17 8 12 3 7 8",key:"t8dd8p"}],["line",{x1:"12",x2:"12",y1:"3",y2:"15",key:"widbto"}]]),u2=J("UserPlus",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["line",{x1:"19",x2:"19",y1:"8",y2:"14",key:"1bvyxn"}],["line",{x1:"22",x2:"16",y1:"11",y2:"11",key:"1shjgl"}]]),Xe=J("Users",[["path",{d:"M16 21v-2a4 4 0 0 0-4-4H6a4 4 0 0 0-4 4v2",key:"1yyitq"}],["circle",{cx:"9",cy:"7",r:"4",key:"nufk8"}],["path",{d:"M22 21v-2a4 4 0 0 0-3-3.87",key:"kshegd"}],["path",{d:"M16 3.13a4 4 0 0 1 0 7.75",key:"1da9ce"}]]),h2=J("Wifi",[["path",{d:"M5 13a10 10 0 0 1 14 0",key:"6v8j51"}],["path",{d:"M8.5 16.5a5 5 0 0 1 7 0",key:"sej527"}],["path",{d:"M2 8.82a15 15 0 0 1 20 0",key:"dnpr2z"}],["line",{x1:"12",x2:"12.01",y1:"20",y2:"20",key:"of4bc4"}]]),qc=J("XCircle",[["circle",{cx:"12",cy:"12",r:"10",key:"1mglay"}],["path",{d:"m15 9-6 6",key:"1uzhvr"}],["path",{d:"m9 9 6 6",key:"z0biqf"}]]),kt=J("X",[["path",{d:"M18 6 6 18",key:"1bl5f8"}],["path",{d:"m6 6 12 12",key:"d8bk6v"}]]),fu=J("Zap",[["polygon",{points:"13 2 3 14 12 14 11 22 21 10 12 10 13 2",key:"45s27k"}]]),ke=({children:t,variant:e="primary",size:s="md",className:n="",...r})=>{const i="font-medium rounded-lg transition-colors duration-200 focus:outline-none focus:ring-2 focus:ring-offset-2",o={primary:"bg-primary-600 text-white hover:bg-primary-700 focus:ring-primary-500",secondary:"bg-slate-100 text-slate-900 hover:bg-slate-200 focus:ring-slate-500",destructive:"bg-red-600 text-white hover:bg-red-700 focus:ring-red-500"},l={sm:"px-3 py-1.5 text-sm",md:"px-4 py-2 text-sm",lg:"px-6 py-3 text-base"};return a.jsx("button",{className:`${i} ${o[e]} ${l[s]} ${n}`,...r,children:t})},Um=({label:t,type:e="text",className:s="",rightIcon:n,onRightIconClick:r,...i})=>a.jsxs("div",{className:"w-full",children:[t&&a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:t}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:e,className:`w-full px-3 py-2 border border-slate-600 bg-slate-700 text-slate-100 rounded-md shadow-sm 
                     placeholder-slate-400 focus:outline-none focus:ring-2 
                     focus:ring-primary-500 focus:border-primary-500 
                     transition-colors duration-200 ${n?"pr-10":""} ${s}`,...i}),n&&a.jsx("button",{type:"button",onClick:r,className:"absolute inset-y-0 right-0 pr-3 flex items-center text-slate-400 hover:text-slate-300 transition-colors",children:n})]})]}),f2=({className:t=""})=>{const e=()=>{window.confirm("This will clear all cached mock data and refresh the page. Are you sure?")&&(Mh(),window.location.reload())};return a.jsx("button",{onClick:e,className:`px-3 py-1 text-sm bg-red-600 text-white rounded hover:bg-red-700 transition-colors ${t}`,title:"Clear mock data that might be interfering with Supabase authentication",children:"Clear Mock Data"})},m2=()=>{var p,v;const t=nt(),e=St(),{signIn:s,isSigningIn:n}=js(),[r,i]=w.useState(!1),[o,l]=w.useState({email:"",password:""}),[c,d]=w.useState({}),u=((v=(p=e.state)==null?void 0:p.from)==null?void 0:v.pathname)||"/dashboard",h=()=>{const g={};return o.email?/\S+@\S+\.\S+/.test(o.email)||(g.email="Email is invalid"):g.email="Email is required",o.password?o.password.length<6&&(g.password="Password must be at least 6 characters"):g.password="Password is required",d(g),Object.keys(g).length===0},f=async g=>{if(g.preventDefault(),d({}),!!h())try{const{error:x}=await s(o.email,o.password);x?d({submit:x.message}):t(u,{replace:!0})}catch{d({submit:"An unexpected error occurred. Please try again."})}},m=(g,x)=>{l(y=>({...y,[g]:x})),c[g]&&d(y=>({...y,[g]:""}))};return a.jsx("div",{className:"dark min-h-screen bg-gradient-to-br from-slate-900 via-slate-800 to-slate-900 flex items-center justify-center p-4",children:a.jsxs("div",{className:"w-full max-w-md",children:[a.jsxs("div",{className:"text-center mb-8",children:[a.jsx("img",{src:"/chemformation-logo.png",alt:"Chemformation",className:"w-16 h-16 mx-auto mb-4"}),a.jsx("h1",{className:"text-3xl font-bold text-white",children:"Capacity Chemicals"}),a.jsx("p",{className:"text-slate-400 mt-2",children:"Chemical Management System"})]}),a.jsxs("div",{className:"bg-slate-800 border border-slate-700 rounded-lg shadow-xl p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-2xl font-bold text-white text-center",children:"Welcome back"}),a.jsx("p",{className:"text-slate-400 text-center mt-2",children:"Sign in to your account to continue"})]}),c.submit&&a.jsxs("div",{className:"mb-4 p-3 bg-red-600/20 border border-red-600/30 rounded-lg flex items-center space-x-2",children:[a.jsx(Bi,{className:"h-5 w-5 text-red-400"}),a.jsx("span",{className:"text-red-400 text-sm",children:c.submit})]}),a.jsxs("form",{onSubmit:f,className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Email"}),a.jsxs("div",{className:"relative",children:[a.jsx(n2,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),a.jsx(Um,{type:"email",value:o.email,onChange:g=>m("email",g.target.value),className:`pl-10 ${c.email?"border-red-500":""}`,placeholder:"your.email@company.com"})]}),c.email&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:c.email})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-1",children:"Password"}),a.jsxs("div",{className:"relative",children:[a.jsx(Rh,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 h-5 w-5 text-slate-400"}),a.jsx(Um,{type:r?"text":"password",value:o.password,onChange:g=>m("password",g.target.value),className:`pl-10 pr-10 ${c.password?"border-red-500":""}`,placeholder:"Enter your password"}),a.jsx("button",{type:"button",onClick:()=>i(!r),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200",children:r?a.jsx(Oo,{className:"h-5 w-5"}):a.jsx(Ro,{className:"h-5 w-5"})})]}),c.password&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:c.password})]}),a.jsx(ke,{type:"submit",disabled:n,className:"w-full bg-blue-600 hover:bg-blue-700 text-white py-2.5 flex items-center justify-center space-x-2",children:n?a.jsxs(a.Fragment,{children:[a.jsx(gy,{className:"h-5 w-5 animate-spin"}),a.jsx("span",{children:"Signing in..."})]}):a.jsx("span",{children:"Sign in"})})]}),a.jsxs("div",{className:"mt-6 p-4 bg-slate-700/50 border border-slate-600 rounded-lg",children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"🎮 Demo Accounts"}),a.jsx("p",{className:"text-xs text-slate-400 mb-3",children:"Use these demo accounts to test different dashboard types:"}),a.jsxs("div",{className:"space-y-2 text-xs",children:[a.jsxs("div",{className:"p-2 bg-slate-600/50 rounded",children:[a.jsx("p",{className:"text-blue-300 font-medium",children:"capacity.admin@capacitychemicals.com"}),a.jsx("p",{className:"text-slate-400",children:"password123 • Capacity Admin Dashboard"})]}),a.jsxs("div",{className:"p-2 bg-slate-600/50 rounded",children:[a.jsx("p",{className:"text-green-300 font-medium",children:"nsight.admin@capacitychemicals.com"}),a.jsx("p",{className:"text-slate-400",children:"password123 • Nsight Admin Dashboard"})]}),a.jsxs("div",{className:"p-2 bg-slate-600/50 rounded",children:[a.jsx("p",{className:"text-yellow-300 font-medium",children:"employee@capacitychemicals.com"}),a.jsx("p",{className:"text-slate-400",children:"password123 • Employee Dashboard"})]})]}),a.jsx("p",{className:"text-xs text-slate-500 mt-3",children:"Contact your administrator to create a new account."}),a.jsx("div",{className:"mt-3 flex justify-center",children:a.jsx(f2,{className:"text-xs px-2 py-1"})})]})]}),a.jsx("div",{className:"text-center mt-8 text-slate-500 text-sm",children:a.jsx("p",{children:"© 2024 Chemformation. All rights reserved."})})]})})},p2=({isCollapsed:t,onToggleCollapse:e})=>{const{signOut:s,userProfile:n}=js(),r=nt(),i=f=>{console.log("Navigating to:",f),r(f)},o=async()=>{try{await s(),r("/auth")}catch(f){console.error("Logout error:",f)}},l=[{icon:$m,label:"Dashboard",action:()=>i("/dashboard")}],c=[...l,{icon:QN,label:"Chemformation",action:()=>console.log("Chemformation - No dedicated page yet")},{icon:Xe,label:"User Management",action:()=>i("/user-management")},{icon:ts,label:"System Health",action:()=>i("/system-health")}],d=[{icon:$m,label:"NSight Dashboard",action:()=>i("/dashboard")},{icon:ti,label:"Developer Tools",action:()=>console.log("Developer Tools clicked")},{icon:er,label:"Company Management",action:()=>console.log("Company Management clicked")},{icon:Xe,label:"Global User Management",action:()=>console.log("Global User Management clicked")},{icon:ts,label:"Platform Health",action:()=>console.log("Platform Health clicked")}],h=(()=>{if(!n)return l;switch(n.role){case"Capacity Admin":return c;case"NSight Admin":return d;case"Employee":default:return l}})();return a.jsxs("div",{className:`bg-slate-800 border-r border-slate-600 h-screen flex flex-col fixed left-0 top-0 z-50 transition-all duration-300 ${t?"w-20":"w-64"}`,children:[a.jsxs("div",{className:`h-16 px-4 border-b border-slate-600 flex items-center justify-between ${t?"px-2":""}`,children:[!t&&a.jsx("div",{className:"flex items-center",children:a.jsx("span",{className:"text-lg font-semibold text-slate-100",children:"Menu"})}),a.jsx("button",{onClick:e,className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-700 rounded-md transition-colors duration-200",title:t?"Expand sidebar":"Collapse sidebar",children:t?a.jsx(ha,{className:"h-5 w-5"}):a.jsx(XN,{className:"h-5 w-5"})})]}),a.jsx("nav",{className:"flex-1 p-4",children:a.jsx("ul",{className:"space-y-2",children:h.map((f,m)=>a.jsx("li",{children:a.jsxs("button",{onClick:p=>{p.preventDefault(),p.stopPropagation(),console.log("Button clicked:",f.label),f.action()},className:`flex items-center w-full px-3 py-2 text-slate-200 hover:bg-slate-700 
                         rounded-md transition-colors duration-200 group relative text-left`,title:t?f.label:"",children:[a.jsx(f.icon,{className:`h-5 w-5 text-slate-400 group-hover:text-slate-200 ${t?"mx-auto":"mr-2"}`}),!t&&a.jsx("span",{className:"transition-opacity duration-200 flex-1 text-left whitespace-nowrap overflow-hidden text-ellipsis",children:f.label}),t&&a.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-slate-700 text-slate-200 text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:f.label})]})},m))})}),a.jsxs("div",{className:"border-t border-slate-600",children:[a.jsx("div",{className:"p-4 pb-2",children:a.jsxs("button",{onClick:()=>i("/settings"),className:`flex items-center w-full px-3 py-2 text-slate-200 hover:bg-slate-700 
                     rounded-md transition-colors duration-200 group relative`,title:t?"Settings":"",children:[a.jsx(gl,{className:`h-5 w-5 text-slate-400 group-hover:text-slate-200 ${t?"mx-auto":"mr-2"}`}),!t&&a.jsx("span",{className:"transition-opacity duration-200",children:"Settings"}),t&&a.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-slate-700 text-slate-200 text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:"Settings"})]})}),a.jsx("div",{className:"p-4 pt-0",children:a.jsxs("button",{onClick:o,className:`flex items-center w-full px-3 py-2 text-slate-200 hover:bg-slate-700 
                     rounded-md transition-colors duration-200 group relative`,title:t?"Logout":"",children:[a.jsx(Ih,{className:`h-5 w-5 text-slate-400 group-hover:text-slate-200 ${t?"mx-auto":"mr-2"}`}),!t&&a.jsx("span",{className:"transition-opacity duration-200",children:"Logout"}),t&&a.jsx("div",{className:"absolute left-full ml-2 px-2 py-1 bg-slate-700 text-slate-200 text-sm rounded opacity-0 group-hover:opacity-100 transition-opacity duration-200 pointer-events-none whitespace-nowrap z-50",children:"Logout"})]})})]})]})},le=({children:t,className:e="",...s})=>a.jsx("div",{className:`bg-slate-800 rounded-lg border border-slate-600 shadow-sm ${e}`,...s,children:t}),$h=async()=>{const{data:{user:t}}=await xe.auth.getUser();return t},vy=async()=>{try{const{data:t,error:e}=await xe.from("raw_materials").select(`
        *,
        created_by_profile:user_profiles!created_by(first_name, last_name, email),
        assigned_to_profile:user_profiles!assigned_to(first_name, last_name, email)
      `).order("id",{ascending:!0});if(e)throw e;return t.map(s=>({id:s.id,materialName:s.material_name,supplierName:s.supplier_name,manufacture:s.manufacture,tradeName:s.trade_name,supplierCost:s.supplier_cost,casNumber:s.cas_number,weightVolume:s.weight_volume,density:s.density,country:s.country,description:s.description,physicalForm:s.physical_form,purity:s.purity,storageConditions:s.storage_conditions,hazardClass:s.hazard_class,shelfLife:s.shelf_life,created_by:s.created_by,assigned_to:s.assigned_to,created_at:s.created_at,updated_at:s.updated_at,createdByUser:s.created_by_profile?`${s.created_by_profile.first_name} ${s.created_by_profile.last_name}`:null,assignedToUser:s.assigned_to_profile?`${s.assigned_to_profile.first_name} ${s.assigned_to_profile.last_name}`:null}))}catch(t){return console.error("Error fetching materials:",t),[]}},g2=async(t,e)=>{try{const s=await $h(),n={material_name:e.materialName,supplier_name:e.supplierName,manufacture:e.manufacture,trade_name:e.tradeName,supplier_cost:e.supplierCost,cas_number:e.casNumber,weight_volume:e.weightVolume,density:e.density,country:e.country,description:e.description,physical_form:e.physicalForm,purity:e.purity,storage_conditions:e.storageConditions,hazard_class:e.hazardClass,shelf_life:e.shelfLife,updated_at:new Date().toISOString()};e.assigned_to!==void 0&&(n.assigned_to=e.assigned_to);const{data:r,error:i}=await xe.from("raw_materials").update(n).eq("id",t).select(`
        *,
        created_by_profile:user_profiles!created_by(first_name, last_name, email),
        assigned_to_profile:user_profiles!assigned_to(first_name, last_name, email)
      `).single();if(i)throw i;return{id:r.id,materialName:r.material_name,supplierName:r.supplier_name,manufacture:r.manufacture,tradeName:r.trade_name,supplierCost:r.supplier_cost,casNumber:r.cas_number,weightVolume:r.weight_volume,density:r.density,country:r.country,description:r.description,physicalForm:r.physical_form,purity:r.purity,storageConditions:r.storage_conditions,hazardClass:r.hazard_class,shelfLife:r.shelf_life,created_by:r.created_by,assigned_to:r.assigned_to,created_at:r.created_at,updated_at:r.updated_at,createdByUser:r.created_by_profile?`${r.created_by_profile.first_name} ${r.created_by_profile.last_name}`:null,assignedToUser:r.assigned_to_profile?`${r.assigned_to_profile.first_name} ${r.assigned_to_profile.last_name}`:null}}catch(s){return console.error("Error updating material:",s),null}},x2=async t=>{try{const e=await $h();if(!e)throw new Error("User not authenticated");const s={material_name:t.materialName,supplier_name:t.supplierName,manufacture:t.manufacture,trade_name:t.tradeName,supplier_cost:t.supplierCost,cas_number:t.casNumber,weight_volume:t.weightVolume,density:t.density,country:t.country,description:t.description,physical_form:t.physicalForm,purity:t.purity,storage_conditions:t.storageConditions,hazard_class:t.hazardClass,shelf_life:t.shelfLife,created_by:e.id,assigned_to:t.assigned_to||e.id},{data:n,error:r}=await xe.from("raw_materials").insert([s]).select(`
        *,
        created_by_profile:user_profiles!created_by(first_name, last_name, email),
        assigned_to_profile:user_profiles!assigned_to(first_name, last_name, email)
      `).single();if(r)throw r;return{id:n.id,materialName:n.material_name,supplierName:n.supplier_name,manufacture:n.manufacture,tradeName:n.trade_name,supplierCost:n.supplier_cost,casNumber:n.cas_number,weightVolume:n.weight_volume,density:n.density,country:n.country,description:n.description,physicalForm:n.physical_form,purity:n.purity,storageConditions:n.storage_conditions,hazardClass:n.hazard_class,shelfLife:n.shelf_life,created_by:n.created_by,assigned_to:n.assigned_to,created_at:n.created_at,updated_at:n.updated_at,createdByUser:n.created_by_profile?`${n.created_by_profile.first_name} ${n.created_by_profile.last_name}`:null,assignedToUser:n.assigned_to_profile?`${n.assigned_to_profile.first_name} ${n.assigned_to_profile.last_name}`:null}}catch(e){return console.error("Error adding material:",e),null}},y2=async()=>{try{const{data:t,error:e}=await xe.from("formulas").select(`
        *,
        created_by_profile:user_profiles!created_by(first_name, last_name, email),
        assigned_to_profile:user_profiles!assigned_to(first_name, last_name, email)
      `).order("id",{ascending:!0});if(e)throw e;return t.map(s=>({id:s.id,name:s.name,totalCost:s.total_cost,finalSalePriceDrum:s.final_sale_price_drum,finalSalePriceTote:s.final_sale_price_tote,ingredients:s.ingredients||[],created_by:s.created_by,assigned_to:s.assigned_to,created_at:s.created_at,updated_at:s.updated_at,createdByUser:s.created_by_profile?`${s.created_by_profile.first_name} ${s.created_by_profile.last_name}`:null,assignedToUser:s.assigned_to_profile?`${s.assigned_to_profile.first_name} ${s.assigned_to_profile.last_name}`:null}))}catch(t){return console.error("Error fetching formulas:",t),[]}},v2=async t=>{try{const{data:e,error:s}=await xe.from("formulas").select(`
        *,
        created_by_profile:user_profiles!created_by(first_name, last_name, email),
        assigned_to_profile:user_profiles!assigned_to(first_name, last_name, email)
      `).eq("id",t).single();if(s)throw s;return{id:e.id,name:e.name,totalCost:e.total_cost,finalSalePriceDrum:e.final_sale_price_drum,finalSalePriceTote:e.final_sale_price_tote,ingredients:e.ingredients||[],created_by:e.created_by,assigned_to:e.assigned_to,created_at:e.created_at,updated_at:e.updated_at,createdByUser:e.created_by_profile?`${e.created_by_profile.first_name} ${e.created_by_profile.last_name}`:null,assignedToUser:e.assigned_to_profile?`${e.assigned_to_profile.first_name} ${e.assigned_to_profile.last_name}`:null}}catch(e){return console.error("Error fetching formula:",e),null}},b2=async(t,e)=>{try{const s=await $h(),n={name:e.name,total_cost:e.totalCost,final_sale_price_drum:e.finalSalePriceDrum,final_sale_price_tote:e.finalSalePriceTote,ingredients:e.ingredients,updated_at:new Date().toISOString()};e.assigned_to!==void 0&&(n.assigned_to=e.assigned_to);const{data:r,error:i}=await xe.from("formulas").update(n).eq("id",t).select(`
        *,
        created_by_profile:user_profiles!created_by(first_name, last_name, email),
        assigned_to_profile:user_profiles!assigned_to(first_name, last_name, email)
      `).single();if(i)throw i;return{id:r.id,name:r.name,totalCost:r.total_cost,finalSalePriceDrum:r.final_sale_price_drum,finalSalePriceTote:r.final_sale_price_tote,ingredients:r.ingredients||[],created_by:r.created_by,assigned_to:r.assigned_to,created_at:r.created_at,updated_at:r.updated_at,createdByUser:r.created_by_profile?`${r.created_by_profile.first_name} ${r.created_by_profile.last_name}`:null,assignedToUser:r.assigned_to_profile?`${r.assigned_to_profile.first_name} ${r.assigned_to_profile.last_name}`:null}}catch(s){return console.error("Error updating formula:",s),null}},w2=async()=>{try{const{data:t,error:e}=await xe.from("suppliers").select(`
        *,
        created_by_profile:user_profiles!created_by(first_name, last_name, email),
        assigned_to_profile:user_profiles!assigned_to(first_name, last_name, email)
      `).order("id",{ascending:!0});if(e)throw e;return t.map(s=>({id:s.id,supplierName:s.supplier_name,supplierId:s.supplier_id,supplierEmail:s.supplier_email,supplierContact:s.supplier_contact,packagingCode:s.packaging_code,standardCost:s.standard_cost,created_by:s.created_by,assigned_to:s.assigned_to,created_at:s.created_at,updated_at:s.updated_at,createdByUser:s.created_by_profile?`${s.created_by_profile.first_name} ${s.created_by_profile.last_name}`:null,assignedToUser:s.assigned_to_profile?`${s.assigned_to_profile.first_name} ${s.assigned_to_profile.last_name}`:null}))}catch(t){return console.error("Error fetching suppliers:",t),[]}},_2=async t=>{try{const{error:e}=await xe.from("formulas").delete().eq("id",t);if(e)throw e;return!0}catch(e){return console.error("Error deleting formula:",e),!1}},j2=async t=>{try{const{error:e}=await xe.from("raw_materials").delete().eq("id",t);if(e)throw e;return!0}catch(e){return console.error("Error deleting material:",e),!1}},by=t=>t.toLowerCase().replace(/[^a-z0-9]/g,"-").replace(/-+/g,"-").replace(/^-|-$/g,"");class N2{constructor(){this.isDevelopment=!1,this.apiEndpoint="/api/ai-chat",this.isDevelopment&&ar(()=>import("./index-ecc4caf6.js"),[]).then(({default:e})=>{this.openai=new e({apiKey:"your_openai_api_key_here",dangerouslyAllowBrowser:!0})}),this.systemPrompt=`You are a specialized AI assistant for Capacity Chemical's internal platform. You ONLY answer questions related to chemistry, chemical engineering, and chemical safety.

    Your expertise includes:
    - Chemical formulas and molecular structures
    - Chemical reactions and mechanisms
    - Chemical safety protocols and regulations
    - Material properties and specifications
    - Laboratory procedures and best practices
    - Chemical process engineering
    - Regulatory compliance (OSHA, EPA, etc.)
    - Chemical supplier information and sourcing
    - Industrial chemistry applications

    SPECIAL FEATURE - RAW MATERIAL ADDITION:
    When a user asks you to add a chemical or raw material to their database, you should:
    1. Provide helpful information about the chemical
    2. Format your response with a special marker: **[ADD_MATERIAL]**
    3. Include all known details about the material in this exact JSON format after the marker:
    {
      "materialName": "Chemical Name",
      "casNumber": "CAS Number if known",
      "supplierName": "Suggested supplier or leave empty",
      "manufacture": "Manufacturer if known",
      "tradeName": "Trade name if known",
      "density": "Density value if known",
      "physicalForm": "Solid/Liquid/Gas",
      "hazardClass": "Hazard classification",
      "purity": "Purity percentage if known",
      "description": "Brief description of the chemical and its uses",
      "storageConditions": "Storage requirements",
      "shelfLife": "Shelf life if known"
    }

    IMPORTANT INSTRUCTIONS:
    - If a question is NOT related to chemistry, chemical engineering, or chemical safety, politely decline to answer
    - Respond with: "I'm a specialized chemistry assistant and can only help with chemistry-related questions. Please ask me about chemical formulas, reactions, safety protocols, or other chemistry topics."
    - Always prioritize safety in your chemical responses
    - Provide accurate, professional information relevant to chemical engineering and manufacturing
    - When users upload files, only analyze them for chemical data, safety information, formulas, or specifications
    - For material addition requests, be thorough and include safety information

    Stay focused on your chemistry specialty and politely redirect non-chemistry questions.`}async generateResponse(e,s=null,n=[]){try{if(!this.isDevelopment){const l=await this.generateResponseFromAPI(e,s,n);return await this.processResponse(l)}if(!this.openai)throw new Error("OpenAI client not initialized. Check your API key.");const r=[{role:"system",content:this.systemPrompt},...n,{role:"user",content:this.buildUserMessage(e,s)}],o=(await this.openai.chat.completions.create({model:"gpt-4o",messages:r,max_tokens:1e3,temperature:.7,stream:!1})).choices[0].message.content;return await this.processResponse(o)}catch(r){throw console.error("AI Service Error:",r),new Error("Failed to generate AI response. Please try again.")}}async processResponse(e){if(e.includes("**[ADD_MATERIAL]**"))try{const s=e.split("**[ADD_MATERIAL]**"),n=s[0].trim(),i=s[1].trim().match(/\{[\s\S]*?\}/);if(i){const o=JSON.parse(i[0]),l=await x2(o);return l?{response:n,materialAdded:!0,materialData:l,successMessage:`✅ Successfully added "${o.materialName}" to your raw materials database!`}:{response:n,materialAdded:!1,errorMessage:"❌ Failed to save the material to the database. Please try again or add it manually."}}}catch(s){return console.error("Error processing material addition:",s),{response:e.replace("**[ADD_MATERIAL]**",""),materialAdded:!1,errorMessage:"❌ Error processing material addition. Please try again."}}return{response:e}}async generateResponseFromAPI(e,s,n){const r=await fetch(this.apiEndpoint,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({message:e,files:s,conversationHistory:n})});if(!r.ok)throw new Error(`API request failed: ${r.status}`);return(await r.json()).response}buildUserMessage(e,s){let n=e;if(s&&s.length>0){n+=`

Attached files:
`,s.forEach(i=>{n+=`- ${i.name} (${i.type}, ${this.formatFileSize(i.size)})
`});const r=s.map(i=>i.type);r.some(i=>i.includes("pdf"))&&(n+=`
Please analyze any chemical data, safety information, or formulas in the PDF documents.`),r.some(i=>i.includes("image"))&&(n+=`
Please analyze any chemical diagrams, formulas, or laboratory images.`),r.some(i=>i.includes("csv")||i.includes("excel"))&&(n+=`
Please analyze the chemical data, material properties, or test results in the spreadsheet.`)}return n}formatFileSize(e){if(e===0)return"0 Bytes";const s=1024,n=["Bytes","KB","MB","GB"],r=Math.floor(Math.log(e)/Math.log(s));return parseFloat((e/Math.pow(s,r)).toFixed(2))+" "+n[r]}async*generateStreamingResponse(e,s=null,n=[]){var r,i;if(!this.isDevelopment||!this.openai)throw new Error("Streaming only available in development mode");try{const o=[{role:"system",content:this.systemPrompt},...n,{role:"user",content:this.buildUserMessage(e,s)}],l=await this.openai.chat.completions.create({model:"gpt-4o",messages:o,max_tokens:1e3,temperature:.7,stream:!0});for await(const c of l){const d=(i=(r=c.choices[0])==null?void 0:r.delta)==null?void 0:i.content;d&&(yield d)}}catch(o){throw console.error("AI Streaming Error:",o),new Error("Failed to generate streaming response.")}}}const k2=new N2,S2=({onMaterialAdded:t})=>{const[e,s]=w.useState(!1),[n,r]=w.useState(!1),[i,o]=w.useState([{id:1,text:"Hello! I'm your AI assistant specialized in chemical engineering and safety. I can help with chemical formulas, safety protocols, material specifications, regulatory compliance, and analyze documents you upload. How can I help you today?",sender:"bot",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})}]),[l,c]=w.useState(""),[d,u]=w.useState(!1),[h,f]=w.useState([]),m=w.useRef(null),p=_=>{const S=Array.from(_.target.files).map(j=>({id:Date.now()+Math.random(),file:j,name:j.name,size:j.size,type:j.type,url:URL.createObjectURL(j)}));f(j=>[...j,...S])},v=_=>{f(k=>{const S=k.find(j=>j.id===_);return S&&S.url&&URL.revokeObjectURL(S.url),k.filter(j=>j.id!==_)})},g=_=>{if(_===0)return"0 Bytes";const k=1024,S=["Bytes","KB","MB","GB"],j=Math.floor(Math.log(_)/Math.log(k));return parseFloat((_/Math.pow(k,j)).toFixed(2))+" "+S[j]},x=_=>_.startsWith("image/")?a.jsx(my,{className:"h-4 w-4"}):a.jsx(Oh,{className:"h-4 w-4"}),y=async()=>{if(!l.trim()&&h.length===0)return;const _={id:i.length+1,text:l||(h.length>0?"Uploaded files:":""),sender:"user",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),files:h.length>0?[...h]:null};o(j=>[...j,_]);const k=l,S=[...h];c(""),f([]),u(!0);try{const j=i.map(M=>({role:M.sender==="user"?"user":"assistant",content:M.text})),C=await k2.generateResponse(k,S,j),E={id:i.length+2,text:C.response||C,sender:"bot",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),materialAdded:C.materialAdded||!1,materialData:C.materialData||null,successMessage:C.successMessage||null,errorMessage:C.errorMessage||null};o(M=>[...M,E]),E.materialAdded&&t&&t(E.materialData)}catch(j){console.error("AI Response Error:",j);const C={id:i.length+2,text:"I apologize, but I encountered an error processing your request. Please try again. If the issue persists, please contact technical support.",sender:"bot",timestamp:new Date().toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"}),isError:!0};o(E=>[...E,C])}finally{u(!1)}},b=_=>{_.key==="Enter"&&!_.shiftKey&&(_.preventDefault(),y())},N=(_,k=!1)=>{const S=_.type.startsWith("image/");return a.jsxs("div",{className:`flex items-center space-x-2 p-2 rounded-md ${k?"bg-slate-600 bg-opacity-50":"bg-slate-700"}`,children:[x(_.type),a.jsxs("div",{className:"flex-1 min-w-0",children:[a.jsx("p",{className:"text-sm text-slate-200 truncate",children:_.name}),a.jsx("p",{className:"text-xs text-slate-400",children:g(_.size)})]}),S&&_.url&&a.jsx("img",{src:_.url,alt:_.name,className:"w-8 h-8 object-cover rounded"}),!k&&a.jsx("button",{onClick:()=>v(_.id),className:"text-slate-400 hover:text-red-400 transition-colors",children:a.jsx(kt,{className:"h-4 w-4"})})]},_.id)};return e?a.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:a.jsxs(le,{className:`w-80 transition-all duration-200 ${n?"h-14":"h-[500px]"} flex flex-col`,children:[a.jsxs("div",{className:"flex items-center justify-between p-4 border-b border-slate-600 flex-shrink-0",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("div",{className:"w-8 h-8 bg-blue-600 rounded-full flex items-center justify-center",children:a.jsx(zm,{className:"h-4 w-4 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-100",children:"AI Assistant"}),a.jsx("p",{className:"text-xs text-slate-400",children:"AI-Powered • File analysis supported"})]})]}),a.jsxs("div",{className:"flex items-center space-x-1",children:[a.jsx("button",{onClick:()=>r(!n),className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-slate-200",children:a.jsx(r2,{className:"h-4 w-4"})}),a.jsx("button",{onClick:()=>s(!1),className:"p-1 hover:bg-slate-700 rounded text-slate-400 hover:text-slate-200",children:a.jsx(kt,{className:"h-4 w-4"})})]})]}),!n&&a.jsxs(a.Fragment,{children:[a.jsxs("div",{className:"flex-1 p-4 space-y-3 overflow-y-auto min-h-0",children:[i.map(_=>a.jsx("div",{className:`flex ${_.sender==="user"?"justify-end":"justify-start"}`,children:a.jsxs("div",{className:`max-w-xs rounded-lg p-3 ${_.sender==="user"?"bg-blue-600 text-white":_.isError?"bg-red-600 text-white border border-red-500":"bg-slate-700 text-slate-100"}`,children:[_.text&&a.jsx("p",{className:"text-sm mb-2",children:_.text}),_.successMessage&&a.jsxs("div",{className:"mt-2 p-2 bg-green-600 bg-opacity-20 border border-green-500 rounded text-green-200",children:[a.jsx("p",{className:"text-sm",children:_.successMessage}),_.materialData&&a.jsxs("p",{className:"text-xs mt-1 text-green-300",children:["Added to Raw Materials • ID: ",_.materialData.id]})]}),_.errorMessage&&a.jsx("div",{className:"mt-2 p-2 bg-red-600 bg-opacity-20 border border-red-500 rounded text-red-200",children:a.jsx("p",{className:"text-sm",children:_.errorMessage})}),_.files&&a.jsx("div",{className:"space-y-2",children:_.files.map(k=>N(k,!0))}),a.jsx("p",{className:`text-xs mt-1 ${_.sender==="user"?"text-blue-100":"text-slate-400"}`,children:_.timestamp})]})},_.id)),d&&a.jsx("div",{className:"flex justify-start",children:a.jsx("div",{className:"bg-slate-700 text-slate-100 rounded-lg p-3",children:a.jsxs("div",{className:"flex space-x-1",children:[a.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce"}),a.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.1s"}}),a.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-full animate-bounce",style:{animationDelay:"0.2s"}})]})})})]}),h.length>0&&a.jsx("div",{className:"px-4 py-2 border-t border-slate-600 bg-slate-800 flex-shrink-0",children:a.jsx("div",{className:"space-y-2 max-h-24 overflow-y-auto",children:h.map(_=>N(_))})}),a.jsx("div",{className:"p-4 border-t border-slate-600 flex-shrink-0",children:a.jsxs("div",{className:"flex items-end space-x-2",children:[a.jsx("input",{type:"file",ref:m,onChange:p,multiple:!0,accept:".pdf,.doc,.docx,.txt,.csv,.xlsx,.xls,.png,.jpg,.jpeg,.gif",className:"hidden"}),a.jsx("button",{onClick:()=>{var _;return(_=m.current)==null?void 0:_.click()},className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-700 rounded-md transition-colors flex-shrink-0",title:"Attach files",children:a.jsx(o2,{className:"h-4 w-4"})}),a.jsx("div",{className:"flex-1",children:a.jsx("textarea",{value:l,onChange:_=>c(_.target.value),onKeyPress:b,placeholder:"Type your message...",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:border-slate-500 focus:ring-0 resize-none max-h-20",rows:1,style:{minHeight:"40px",height:"40px"},onInput:_=>{_.target.style.height="40px",_.target.style.height=Math.min(_.target.scrollHeight,80)+"px"}})}),a.jsx("button",{onClick:y,disabled:!l.trim()&&h.length===0,className:"p-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 disabled:opacity-50 disabled:cursor-not-allowed transition-colors flex-shrink-0",children:a.jsx(l2,{className:"h-4 w-4"})})]})})]})]})}):a.jsx("div",{className:"fixed bottom-6 right-6 z-50",children:a.jsx("button",{onClick:()=>s(!0),className:"bg-blue-600 hover:bg-blue-700 text-white rounded-full p-4 shadow-lg transition-all duration-200 hover:scale-105",children:a.jsx(zm,{className:"h-6 w-6"})})})},C2=()=>{const[t,e]=w.useState(!1),s=w.useRef(null),n=nt(),{user:r,userProfile:i,signOut:o}=js();w.useEffect(()=>{const f=m=>{s.current&&!s.current.contains(m.target)&&e(!1)};return document.addEventListener("mousedown",f),()=>{document.removeEventListener("mousedown",f)}},[]);const l=[{name:"Formulas",icon:ws,action:()=>n("/formulas")},{name:"Raw Materials",icon:vs,action:()=>n("/raw-materials")},{name:"Suppliers",icon:Xe,action:()=>n("/suppliers")}],c=()=>{if(i!=null&&i.first_name&&(i!=null&&i.last_name))return`${i.first_name} ${i.last_name}`;if(r!=null&&r.email){const f=r.email.split("@")[0];return f.charAt(0).toUpperCase()+f.slice(1)}return"User"},d=()=>{if(!(i!=null&&i.role))return"Employee";switch(i.role){case"Capacity Admin":return"Capacity Admin";case"NSight Admin":return"NSight Admin";case"Employee":default:return"Employee"}},u=()=>i!=null&&i.first_name&&(i!=null&&i.last_name)?`${i.first_name.charAt(0)}${i.last_name.charAt(0)}`.toUpperCase():r!=null&&r.email?r.email.split("@")[0].charAt(0).toUpperCase():"U",h=async()=>{try{await o(),n("/auth")}catch(f){console.error("Logout error:",f)}};return a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs("div",{className:"relative",ref:s,children:[a.jsxs("button",{onClick:()=>e(!t),className:"flex items-center space-x-2 text-slate-300 hover:text-slate-100 transition-colors p-2 rounded-lg hover:bg-slate-700",children:[a.jsx("div",{className:"grid grid-cols-3 gap-1 p-1",children:[...Array(9)].map((f,m)=>a.jsx("div",{className:"w-1 h-1 bg-slate-400 rounded-sm"},m))}),a.jsx("span",{className:"text-sm",children:"Apps"}),a.jsx(_n,{className:`w-4 h-4 transition-transform duration-200 ${t?"rotate-180":""}`})]}),t&&a.jsx("div",{className:"absolute right-0 mt-2 w-48 bg-slate-800 border border-slate-700 rounded-lg shadow-lg z-50",children:l.map((f,m)=>{const p=f.icon;return a.jsxs("button",{onClick:()=>{f.action(),e(!1)},className:`w-full flex items-center space-x-3 px-4 py-3 text-left text-slate-300 hover:text-slate-100 hover:bg-slate-700 transition-colors ${m===0?"rounded-t-lg":""} ${m===l.length-1?"rounded-b-lg":""}`,children:[a.jsx(p,{className:"w-5 h-5"}),a.jsx("span",{children:f.name})]},f.name)})})]}),a.jsxs("div",{className:"flex items-center space-x-2 text-slate-300",children:[a.jsx("div",{className:"w-8 h-8 bg-slate-600 rounded-full flex items-center justify-center text-sm font-medium text-slate-200",children:u()}),a.jsxs("div",{className:"flex flex-col",children:[a.jsx("span",{className:"text-sm font-medium text-slate-200",children:c()}),a.jsx("span",{className:"text-xs text-slate-400",children:d()})]}),a.jsx("button",{onClick:h,className:"p-1 text-slate-400 hover:text-slate-200 hover:bg-slate-700 rounded transition-colors",title:"Quick Logout (Testing)",children:a.jsx(Ih,{className:"w-4 h-4"})})]})]})},Ae=({children:t,onMaterialAdded:e})=>{const{userProfile:s}=js(),n=St(),r=n.pathname!=="/dashboard",[i,o]=w.useState(r);return w.useEffect(()=>{n.pathname!=="/dashboard"&&o(!0)},[n.pathname]),w.useEffect(()=>{const l=async()=>{if(s!=null&&s.email)try{const d=window.location.hostname==="localhost"?"http://localhost:3001/api/track-activity":"/api/track-activity",u=await fetch(d,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({userEmail:s.email,userName:`${s.first_name||""} ${s.last_name||""}`.trim()||s.email.split("@")[0],userRole:s.role||"Employee",page:n.pathname,timestamp:new Date().toISOString()})});u.ok||console.warn("Failed to track user activity:",u.status)}catch(d){console.warn("Error tracking user activity:",d)}};l();const c=setInterval(l,3e4);return()=>{clearInterval(c)}},[s,n.pathname]),a.jsxs("div",{className:"min-h-screen bg-slate-900 flex flex-col",children:[a.jsx("header",{className:"bg-slate-800 border-b border-slate-700 h-16 flex items-center justify-end px-6 sticky top-0 z-40",children:a.jsx(C2,{})}),a.jsxs("div",{className:"flex flex-1",children:[a.jsx(p2,{isCollapsed:i,onToggleCollapse:()=>o(!i)}),a.jsx("main",{className:"flex-1 p-8 transition-all duration-300 overflow-x-auto",style:{marginLeft:i?"80px":"256px",minHeight:"calc(100vh - 64px)",position:"relative"},children:t})]}),a.jsx(S2,{onMaterialAdded:e})]})},E2="capacity-login-activity",Hn={LOGIN:"login",LOGOUT:"logout"},Bm=t=>{const e=new Date(t),n=Math.floor((new Date-e)/(1e3*60));if(n<1)return"Just now";if(n<60)return`${n} min ago`;if(n<1440){const r=Math.floor(n/60);return`${r} hour${r>1?"s":""} ago`}else return e.toLocaleDateString()+" "+e.toLocaleTimeString([],{hour:"2-digit",minute:"2-digit"})},Hm=(t,e)=>{const n=Math.floor((new Date-new Date(e))/(1e3*60));return t===Hn.LOGIN?n<5?"text-green-400":n<30?"text-green-500":"text-blue-400":n<5?"text-orange-400":"text-slate-400"},P2=()=>{try{const t=localStorage.getItem(E2);return t?JSON.parse(t):[]}catch(t){return console.error("Error loading login activity:",t),[]}},wy=(t={})=>{let s=P2();if(t.type&&(s=s.filter(n=>n.type===t.type)),t.userEmail&&(s=s.filter(n=>n.userEmail===t.userEmail)),t.limit&&(s=s.slice(0,t.limit)),t.hoursBack){const n=new Date;n.setHours(n.getHours()-t.hoursBack),s=s.filter(r=>new Date(r.timestamp)>n)}return s},A2=(t=24)=>{const e=wy({hoursBack:t});return{totalLogins:e.filter(n=>n.type===Hn.LOGIN).length,totalLogouts:e.filter(n=>n.type===Hn.LOGOUT).length,uniqueUsers:new Set(e.map(n=>n.userEmail)).size,recentActivity:e.slice(0,10)}},L2=()=>{const[t,e]=w.useState([]),[s,n]=w.useState(1),[r,i]=w.useState([]),[o,l]=w.useState({}),[c,d]=w.useState(new Set),[u,h]=w.useState(new Set),f=nt(),m=20,{getAllUsers:p,userProfile:v}=js(),g=P=>{switch(P){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}},x=P=>{switch(P){case"formulas":return a.jsx(ws,{className:"w-4 h-4 text-blue-500"});case"raw-materials":return a.jsx(vs,{className:"w-4 h-4 text-blue-500"});case"suppliers":return a.jsx(Xe,{className:"w-4 h-4 text-blue-500"});case"developer-mode":return a.jsx(ti,{className:"w-4 h-4 text-blue-500"});case"existing-company-mode":return a.jsx(er,{className:"w-4 h-4 text-green-500"});default:return null}},y=async()=>{try{const{data:P,error:R}=await p();if(R){console.error("Error loading users:",R);return}const Y=P.map(A=>({id:A.id,name:`${A.first_name||""} ${A.last_name||""}`.trim()||A.email.split("@")[0],email:A.email,role:A.role||"Employee",status:"Active",lastLogin:A.created_at?new Date(A.created_at).toISOString().split("T")[0]:"Never",contact:"",appAccess:g(A.role||"Employee"),department:A.department||"",created_at:A.created_at,updated_at:A.updated_at})),B=wy({limit:50}),H=A2(24),Q=new Date(Date.now()-30*60*1e3),O=new Set,U={};B.forEach(A=>{(!U[A.userEmail]||new Date(A.timestamp)>new Date(U[A.userEmail].timestamp))&&(U[A.userEmail]=A)}),Object.entries(U).forEach(([A,F])=>{new Date(F.timestamp)>Q&&F.type===Hn.LOGIN&&O.add(A)});const X=Y.map(A=>{const F=B.filter($=>$.userEmail===A.email),T=F.find($=>$.type===Hn.LOGIN);return{...A,lastLoginActivity:T,recentActivity:F.slice(0,5),isOnline:O.has(A.email)}}).sort((A,F)=>{if(A.isOnline&&!F.isOnline)return-1;if(!A.isOnline&&F.isOnline)return 1;const T=A.lastLoginActivity?new Date(A.lastLoginActivity.timestamp):new Date(0);return(F.lastLoginActivity?new Date(F.lastLoginActivity.timestamp):new Date(0))-T});e(X),i(B),l(H),h(O)}catch(P){console.error("Error in loadData:",P)}};w.useEffect(()=>{y();const P=()=>{y()};return window.addEventListener("loginActivityUpdate",P),()=>{window.removeEventListener("loginActivityUpdate",P)}},[]);const b=P=>{switch(P){case"Active":return"text-green-600 bg-green-50";case"Inactive":return"text-red-600 bg-red-50";default:return"text-slate-600 bg-slate-50"}},N=P=>{switch(P){case"Admin":return"text-purple-600 bg-purple-100";case"Capacity Admin":return"text-green-600 bg-green-100";case"NSight Admin":return"text-indigo-600 bg-indigo-100";case"Employee":return"text-blue-600 bg-blue-100";default:return"text-slate-600 bg-slate-100"}},_=P=>{const R=new Set(c);R.has(P)?R.delete(P):R.add(P),d(R)},k=Math.ceil(t.length/m),S=(s-1)*m,j=S+m,C=t.slice(S,j),E=()=>{n(P=>Math.max(P-1,1))},M=()=>{n(P=>Math.min(P+1,k))};return a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-6",children:[a.jsxs("div",{className:"flex items-center space-x-6",children:[a.jsxs("div",{className:"flex items-center",children:[a.jsx(Xe,{className:"h-6 w-6 text-primary-600 mr-2"}),a.jsxs("button",{onClick:()=>f("/user-management"),className:"flex items-center space-x-2 hover:text-blue-400 transition-colors group",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-100 group-hover:text-blue-400",children:"User Management & Activity"}),a.jsx(ZN,{className:"h-4 w-4 text-slate-400 group-hover:text-blue-400"})]})]}),a.jsxs("div",{className:"flex items-center space-x-4 text-sm",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Im,{className:"w-3 h-3 text-green-400 fill-current"}),a.jsx("span",{className:"text-green-400 font-semibold",children:u.size}),a.jsx("span",{className:"text-slate-400",children:"Online"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(s2,{className:"w-4 h-4 text-blue-400"}),a.jsx("span",{className:"text-blue-400 font-semibold",children:o.totalLogins||0}),a.jsx("span",{className:"text-slate-400",children:"Logins"})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ih,{className:"w-4 h-4 text-orange-400"}),a.jsx("span",{className:"text-orange-400 font-semibold",children:o.totalLogouts||0}),a.jsx("span",{className:"text-slate-400",children:"Logouts"})]}),a.jsx("div",{className:"text-slate-500 text-xs",children:"Last 24h"})]})]}),(v==null?void 0:v.role)==="Capacity Admin"&&a.jsx(ke,{size:"sm",onClick:()=>f("/user-management?action=add"),children:"Add User"})]}),a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-slate-600",children:[a.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"User"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"Role"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"Status"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"Last Activity"}),a.jsx("th",{className:"text-left py-3 px-4 font-medium text-slate-200",children:"App Access"})]})}),a.jsx("tbody",{children:C.map(P=>a.jsxs(Sl.Fragment,{children:[a.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-750 transition-colors",children:[a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("button",{onClick:()=>_(P.id),className:"text-slate-400 hover:text-slate-200 transition-colors",children:c.has(P.id)?a.jsx(_n,{className:"w-4 h-4"}):a.jsx(ha,{className:"w-4 h-4"})}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Im,{className:`w-2 h-2 ${P.isOnline?"text-green-400 fill-current":"text-slate-600 fill-current"}`}),a.jsxs("div",{children:[a.jsx("div",{className:"font-medium text-slate-100",children:P.name}),a.jsx("div",{className:"text-sm text-slate-400",children:P.email})]})]})]})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${N(P.role)}`,children:P.role})}),a.jsx("td",{className:"py-3 px-4",children:a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium ${b(P.status)}`,children:P.status}),P.isOnline&&a.jsx("span",{className:"text-xs text-green-400 font-medium",children:"ONLINE"})]})}),a.jsx("td",{className:"py-3 px-4",children:P.lastLoginActivity?a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ts,{className:`w-4 h-4 ${Hm(P.lastLoginActivity.type,P.lastLoginActivity.timestamp)}`}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-slate-300",children:Bm(P.lastLoginActivity.timestamp)}),a.jsx("div",{className:"text-xs text-slate-500",children:P.lastLoginActivity.type===Hn.LOGIN?"Last login":"Last logout"})]})]}):a.jsx("span",{className:"text-slate-500 text-sm",children:"No recent activity"})}),a.jsx("td",{className:"py-3 px-4",children:a.jsx("div",{className:"flex items-center space-x-2",children:P.appAccess.map((R,Y)=>a.jsx("div",{className:"w-8 h-8 bg-slate-700 rounded-md flex items-center justify-center hover:bg-slate-600 transition-colors",title:R.replace(/-/g," ").replace(/\b\w/g,B=>B.toUpperCase()),children:x(R)},Y))})})]}),c.has(P.id)&&a.jsx("tr",{className:"bg-slate-800 border-b border-slate-700",children:a.jsx("td",{colSpan:"5",className:"py-4 px-4",children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-slate-200 mb-3",children:"User Details"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"ID:"}),a.jsx("span",{className:"text-slate-300",children:P.id})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Email:"}),a.jsx("span",{className:"text-slate-300",children:P.email})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Department:"}),a.jsx("span",{className:"text-slate-300",children:P.department||"Not specified"})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Created:"}),a.jsx("span",{className:"text-slate-300",children:P.created_at?new Date(P.created_at).toLocaleDateString():"Unknown"})]})]})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-sm font-medium text-slate-200 mb-3",children:"Recent Activity"}),a.jsx("div",{className:"space-y-2",children:P.recentActivity&&P.recentActivity.length>0?P.recentActivity.map((R,Y)=>a.jsxs("div",{className:"flex items-center space-x-3 text-sm",children:[a.jsx(ts,{className:`w-3 h-3 ${Hm(R.type,R.timestamp)}`}),a.jsx("span",{className:"text-slate-300",children:R.type===Hn.LOGIN?"Login":"Logout"}),a.jsx("span",{className:"text-slate-500",children:Bm(R.timestamp)})]},Y)):a.jsx("span",{className:"text-slate-500 text-sm",children:"No recent activity"})})]})]})})})]},P.id))})]})}),k>1&&a.jsxs("div",{className:"flex items-center justify-between mt-6",children:[a.jsxs("div",{className:"text-sm text-slate-400",children:["Showing ",S+1,"-",Math.min(j,t.length)," of ",t.length," users"]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ke,{size:"sm",variant:"secondary",onClick:E,disabled:s===1,children:"Previous"}),a.jsxs("span",{className:"text-sm text-slate-400",children:["Page ",s," of ",k]}),a.jsx(ke,{size:"sm",variant:"secondary",onClick:M,disabled:s===k,children:"Next"})]})]}),t.length===0&&a.jsxs("div",{className:"text-center py-8",children:[a.jsx(Xe,{className:"h-12 w-12 text-slate-600 mx-auto mb-4"}),a.jsx("h3",{className:"text-lg font-medium text-slate-300 mb-2",children:"No users found"}),a.jsx("p",{className:"text-slate-500",children:"Users will appear here once they sign up for accounts."})]})]})},T2=({userData:t})=>{const[e,s]=w.useState(""),[n,r]=w.useState(null),[i,o]=w.useState({x:0,y:0}),[l,c]=w.useState([]),d=w.useRef({}),u=nt(),{getAllUsers:h}=js(),f=(g,x)=>{if(!d.current[x])return;const y=d.current[x].getBoundingClientRect(),b=(g.clientX-y.left)/y.width*100,N=(g.clientY-y.top)/y.height*100;o({x:b,y:N})},m=g=>{switch(g){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}};w.useEffect(()=>{(async()=>{try{const{data:x,error:y}=await h();if(y){console.error("Error loading users:",y);return}const b=x.map(N=>({id:N.id,name:`${N.first_name||""} ${N.last_name||""}`.trim()||N.email.split("@")[0],email:N.email,role:N.role||"Employee",status:"Active",lastLogin:N.created_at?new Date(N.created_at).toISOString().split("T")[0]:"Never",contact:"",appAccess:m(N.role||"Employee"),department:N.department||"",created_at:N.created_at,updated_at:N.updated_at}));c(b)}catch(x){console.error("Error in loadUsers:",x)}})()},[]);const p=g=>{const y={Formulas:"formulas","Raw Materials":"raw-materials",Suppliers:"suppliers"}[g];return l.filter(b=>b.appAccess&&b.appAccess.includes(y))},v=[{id:1,title:"Formulas",icon:ws,glowColor:"rgba(59, 130, 246, 0.3)",iconBgColor:"bg-blue-900",iconColor:"text-blue-400",borderColor:"hover:border-blue-500"},{id:2,title:"Raw Materials",icon:vs,glowColor:"rgba(249, 115, 22, 0.3)",iconBgColor:"bg-orange-900",iconColor:"text-orange-400",borderColor:"hover:border-orange-500"},{id:3,title:"Suppliers",icon:Xe,glowColor:"rgba(217, 70, 239, 0.3)",iconBgColor:"bg-fuchsia-900",iconColor:"text-fuchsia-400",borderColor:"hover:border-fuchsia-500"}];return a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"grid grid-cols-3 gap-1 p-2",children:[...Array(9)].map((g,x)=>a.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-sm"},x))}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Dashboard"})]})}),a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(xy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search by Name",value:e,onChange:g=>s(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-600 rounded-md bg-slate-700 text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:v.map(g=>{const x=g.icon;return a.jsx("div",{ref:y=>d.current[g.id]=y,onMouseEnter:()=>r(g.id),onMouseLeave:()=>{r(null),o({x:50,y:50})},onMouseMove:y=>f(y,g.id),className:"relative cursor-pointer",style:{transform:n===g.id?"scale(1.05) translateY(-4px)":"scale(1)",transformOrigin:n===g.id?`${i.x}% ${i.y}%`:"center center",transition:n===g.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},onClick:()=>{g.title==="Formulas"?u("/formulas"):g.title==="Raw Materials"?u("/raw-materials"):g.title==="Suppliers"&&u("/suppliers")},children:a.jsxs(le,{className:`p-8 hover:shadow-lg transition-all duration-300 h-full relative overflow-hidden border-2 border-transparent ${g.borderColor}`,children:[n===g.id&&a.jsx("div",{className:"absolute inset-0 opacity-20 -z-0",style:{background:`radial-gradient(circle at ${i.x}% ${i.y}%, ${g.glowColor}, transparent 70%)`}}),a.jsxs("div",{className:"flex flex-col items-center text-center space-y-6 relative z-10",children:[a.jsx("div",{className:"w-24 h-24 bg-slate-700 rounded-full flex items-center justify-center transition-all duration-300",style:{transform:n===g.id?"scale(1.1)":"scale(1)",transition:n===g.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},children:a.jsx("div",{className:`w-16 h-16 ${g.iconBgColor} rounded-full flex items-center justify-center`,children:a.jsx(x,{className:`w-8 h-8 ${g.iconColor}`})})}),a.jsx("h3",{className:"text-xl font-medium text-slate-100",children:g.title}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("button",{onClick:y=>{y.stopPropagation();const N={Formulas:"formulas","Raw Materials":"raw-materials",Suppliers:"suppliers"}[g.title];u(`/user-management?filterApp=${N}`)},className:"text-sm text-slate-300 hover:text-blue-400 transition-colors underline decoration-dotted hover:decoration-solid",children:"Manage Access"}),a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[p(g.title).slice(0,3).map((y,b)=>a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-slate-400 transition-transform duration-300",style:{transform:n===g.id?"scale(1.05)":"scale(1)",transition:n===g.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${g.title==="Formulas"?"bg-blue-500":g.title==="Raw Materials"?"bg-orange-500":"bg-fuchsia-500"}`}),a.jsx("span",{children:y.name})]},y.id)),p(g.title).length>3&&a.jsxs("div",{className:"text-xs text-slate-500",children:["+",p(g.title).length-3," more"]}),p(g.title).length===0&&a.jsx("div",{className:"text-xs text-slate-500",children:"No users assigned"})]})]})]})]})},g.id)})}),a.jsx(L2,{})]})},z=(t=30)=>{const e=new Date;return e.setDate(e.getDate()-Math.floor(Math.random()*t)),e.toISOString().split("T")[0]},se=()=>{const t=["formulas","suppliers","raw-materials"],e=Math.floor(Math.random()*3)+1;return t.sort(()=>.5-Math.random()).slice(0,e)},Vm=[{id:1,name:"Aidan Manickam",email:"aidan@capacity.com",role:"Employee",status:"Active",lastLogin:"2024-01-15",contact:"",appAccess:["formulas","suppliers"],credentials:"user/temporary pass"},{id:81,name:"Demo Capacity Admin",email:"capacity@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:82,name:"Demo NSight Admin",email:"nsight@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:83,name:"Demo Employee",email:"employee@domain.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas"],credentials:"user/temporary pass"},{id:2,name:"Sarah Johnson",email:"sarah.johnson@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:3,name:"Michael Chen",email:"michael.chen@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:4,name:"Emma Davis",email:"emma.davis@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:5,name:"James Wilson",email:"james.wilson@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:6,name:"Ashley Rodriguez",email:"ashley.rodriguez@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:7,name:"David Thompson",email:"david.thompson@protonmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:8,name:"Jessica Martinez",email:"jessica.martinez@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:9,name:"Robert Anderson",email:"robert.anderson@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:10,name:"Lisa Garcia",email:"lisa.garcia@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:11,name:"Christopher Taylor",email:"christopher.taylor@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:12,name:"Amanda White",email:"amanda.white@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:13,name:"Matthew Brown",email:"matthew.brown@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:14,name:"Nicole Harris",email:"nicole.harris@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:15,name:"Daniel Clark",email:"daniel.clark@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:16,name:"Stephanie Lewis",email:"stephanie.lewis@protonmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:17,name:"Kevin Walker",email:"kevin.walker@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:18,name:"Rachel Hall",email:"rachel.hall@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:19,name:"Brandon Allen",email:"brandon.allen@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:20,name:"Megan Young",email:"megan.young@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:21,name:"Tyler King",email:"tyler.king@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:22,name:"Samantha Wright",email:"samantha.wright@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:23,name:"Andrew Lopez",email:"andrew.lopez@protonmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:24,name:"Lauren Hill",email:"lauren.hill@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:25,name:"Joshua Scott",email:"joshua.scott@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:26,name:"Brittany Green",email:"brittany.green@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:27,name:"Nathan Adams",email:"nathan.adams@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:28,name:"Kayla Baker",email:"kayla.baker@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:29,name:"Ryan Gonzalez",email:"ryan.gonzalez@protonmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:30,name:"Alexis Nelson",email:"alexis.nelson@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:31,name:"Jordan Carter",email:"jordan.carter@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:32,name:"Taylor Mitchell",email:"taylor.mitchell@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:33,name:"Austin Perez",email:"austin.perez@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:34,name:"Chloe Roberts",email:"chloe.roberts@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:35,name:"Marcus Turner",email:"marcus.turner@protonmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:36,name:"Jasmine Phillips",email:"jasmine.phillips@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:37,name:"Ethan Campbell",email:"ethan.campbell@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:38,name:"Victoria Parker",email:"victoria.parker@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:39,name:"Cameron Evans",email:"cameron.evans@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:40,name:"Destiny Edwards",email:"destiny.edwards@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:41,name:"Blake Collins",email:"blake.collins@protonmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:42,name:"Paige Stewart",email:"paige.stewart@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:43,name:"Hunter Sanchez",email:"hunter.sanchez@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:44,name:"Sierra Morris",email:"sierra.morris@gmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:45,name:"Caleb Rogers",email:"caleb.rogers@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:46,name:"Autumn Reed",email:"autumn.reed@outlook.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:47,name:"Garrett Cook",email:"garrett.cook@protonmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:48,name:"Savannah Bailey",email:"savannah.bailey@hotmail.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:49,name:"Derek Rivera",email:"derek.rivera@icloud.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:50,name:"Trevor Richardson",email:"trevor.richardson@yahoo.com",role:"Employee",status:"Active",lastLogin:z(),contact:"",appAccess:se(),credentials:"user/temporary pass"},{id:51,name:"Alexandra Bennett",email:"alexandra.bennett@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:52,name:"Jonathan Martinez",email:"jonathan.martinez@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:53,name:"Michelle Thompson",email:"michelle.thompson@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:54,name:"Steven Rodriguez",email:"steven.rodriguez@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:55,name:"Rebecca Davis",email:"rebecca.davis@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:56,name:"Kenneth Wilson",email:"kenneth.wilson@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:57,name:"Patricia Moore",email:"patricia.moore@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:58,name:"Gregory Taylor",email:"gregory.taylor@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:59,name:"Diana Anderson",email:"diana.anderson@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:60,name:"Benjamin Jackson",email:"benjamin.jackson@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:61,name:"Catherine White",email:"catherine.white@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:62,name:"Philip Harris",email:"philip.harris@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:63,name:"Stephanie Martin",email:"stephanie.martin@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:64,name:"Ronald Clark",email:"ronald.clark@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:65,name:"Melissa Lewis",email:"melissa.lewis@capacity.com",role:"Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["formulas","suppliers","raw-materials"],credentials:"admin/secure pass"},{id:66,name:"Alexander Pierce",email:"alexander.pierce@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:67,name:"Samantha Foster",email:"samantha.foster@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:68,name:"Nicholas Ward",email:"nicholas.ward@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:69,name:"Jennifer Torres",email:"jennifer.torres@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:70,name:"Gabriel Peterson",email:"gabriel.peterson@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:71,name:"Christina Gray",email:"christina.gray@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:72,name:"Lucas Ramirez",email:"lucas.ramirez@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:73,name:"Vanessa James",email:"vanessa.james@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:74,name:"Victor Watson",email:"victor.watson@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:75,name:"Monica Brooks",email:"monica.brooks@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:76,name:"Adrian Kelly",email:"adrian.kelly@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:77,name:"Natalie Sanders",email:"natalie.sanders@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:78,name:"Isaac Price",email:"isaac.price@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:79,name:"Olivia Bennett",email:"olivia.bennett@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"},{id:80,name:"Mason Powell",email:"mason.powell@nsight-inc.com",role:"NSight Admin",status:"Active",lastLogin:z(),contact:"",appAccess:["developer-mode","existing-company-mode"],credentials:"nsight-admin/enterprise pass"}],M2=()=>{const t=localStorage.getItem("capacity-users"),e=localStorage.getItem("capacity-users-version"),s="1.1";return e!==s?(localStorage.removeItem("capacity-users"),localStorage.setItem("capacity-users-version",s),console.log("User data version updated, using fresh data"),[...Vm]):t?JSON.parse(t):[...Vm]};let D2=M2();const O2=()=>[...D2],R2=()=>{localStorage.removeItem("capacity-users"),localStorage.removeItem("capacity-users-version"),console.log("User cache cleared. Refresh the page to reload fresh data.")};typeof window<"u"&&(window.clearUserCache=R2);const hs=t=>t.toLowerCase().replace(/[^a-z0-9\s]/g,"").replace(/\s+/g,"-").replace(/--+/g,"-").replace(/^-|-$/g,""),I2=[{id:hs("CALCIUM CHLORIDE (100%)"),materialName:"CALCIUM CHLORIDE (100%)",supplierName:"ChemSupply Co.",manufacture:"Dow Chemical",tradeName:"DowFlake Xtra",supplierCost:2.15,casNumber:"10043-52-4",weightVolume:8.34,density:2.15,country:"USA",description:"High purity calcium chloride for industrial applications. Used as a desiccant, deicing agent, and concrete accelerator. Excellent solubility in water with strong exothermic reaction. Essential for oil and gas drilling operations.",physicalForm:"Flakes",purity:"100%",storageConditions:"Store in dry place, avoid moisture. Keep container tightly closed.",hazardClass:"Irritant",shelfLife:"24 months"},{id:hs("60% HEDP Liquid Tech Grade"),materialName:"60% HEDP Liquid Tech Grade",supplierName:"Industrial Chemicals Ltd.",manufacture:"Kemira",tradeName:"Dequest 2010",supplierCost:3.45,casNumber:"2809-21-4",weightVolume:9.2,density:1.4,country:"Finland",description:"Chelating agent for water treatment applications. Excellent scale and corrosion inhibitor. Forms stable complexes with metal ions. Used in cooling water systems, boiler water treatment, and textile processing.",physicalForm:"Liquid",purity:"60%",storageConditions:"Store at room temperature. Protect from freezing.",hazardClass:"Corrosive",shelfLife:"12 months"},{id:hs("Acetic Acid, Glacial"),materialName:"Acetic Acid, Glacial",supplierName:"Acid Solutions Inc.",manufacture:"Eastman Chemical",tradeName:"Glacial Acetic Acid",supplierCost:8.76,casNumber:"64-19-7",weightVolume:8.74,density:1.05,country:"USA",description:"Pure acetic acid for chemical synthesis and pH adjustment. High purity grade suitable for analytical and industrial applications. Used in manufacturing acetate esters, cellulose acetate, and various chemical intermediates.",physicalForm:"Liquid",purity:"99.5%",storageConditions:"Store in cool, dry place. Keep away from heat sources.",hazardClass:"Corrosive",shelfLife:"36 months"},{id:hs("Sodium Molybdate Crystals, Tech Grade"),materialName:"Sodium Molybdate Crystals, Tech Grade",supplierName:"Specialty Metals Corp.",manufacture:"Climax Molybdenum",tradeName:"Sodium Molybdate Dihydrate",supplierCost:12.5,casNumber:"10102-40-6",weightVolume:22.4,density:3.78,country:"USA",description:"Technical grade sodium molybdate for corrosion inhibition and metal treatment. Provides excellent protection against pitting and general corrosion. Used in cooling water systems and as a corrosion inhibitor additive.",physicalForm:"Crystals",purity:"Technical Grade",storageConditions:"Store in dry conditions. Protect from moisture.",hazardClass:"Non-hazardous",shelfLife:"60 months"},{id:hs("HPMA (homopolymer of maleic acid) 50%"),materialName:"HPMA (homopolymer of maleic acid) 50%",supplierName:"Polymer Technologies",manufacture:"Dow Chemical",tradeName:"Belclene 200",supplierCost:5.65,casNumber:"26677-99-6",weightVolume:9.8,density:1.18,country:"USA",description:"Scale inhibitor polymer for water treatment. Prevents calcium carbonate, calcium sulfate, and calcium phosphate scale formation. Effective over wide pH range. Used in cooling towers, boilers, and reverse osmosis systems.",physicalForm:"Liquid",purity:"50%",storageConditions:"Store between 5-40°C. Do not freeze.",hazardClass:"Non-hazardous",shelfLife:"24 months"},{id:hs("PBTC Phosphonobutane Tricarboxylic Acid"),materialName:"PBTC Phosphonobutane Tricarboxylic Acid",supplierName:"Water Treatment Chemicals",manufacture:"Italmatch Chemicals",tradeName:"Dequest 7000",supplierCost:1.55,casNumber:"37971-36-1",weightVolume:10.2,density:1.25,country:"Italy",description:"Organophosphonate for scale and corrosion control. Excellent chelating properties for metal ions. Superior performance in high temperature and high pH conditions. Used in industrial water treatment and oil field applications.",physicalForm:"Liquid",purity:"50%",storageConditions:"Store at room temperature. Avoid freezing.",hazardClass:"Irritant",shelfLife:"24 months"},{id:hs("Sodium Hypochlorite Solution 12.5%"),materialName:"Sodium Hypochlorite Solution 12.5%",supplierName:"Bleach Supply Co.",manufacture:"Olin Corporation",tradeName:"Liquid Bleach",supplierCost:2.34,casNumber:"7681-52-9",weightVolume:10.4,density:1.2,country:"USA",description:"Chlorine-based disinfectant and bleaching agent. Powerful oxidizing agent for water disinfection and surface sanitization. Effective against bacteria, viruses, and algae. Used in municipal water treatment and swimming pool maintenance.",physicalForm:"Liquid",purity:"12.5%",storageConditions:"Store in cool, dark place. Protect from light and heat.",hazardClass:"Oxidizer, Corrosive",shelfLife:"6 months"},{id:hs("Citric Acid Anhydrous"),materialName:"Citric Acid Anhydrous",supplierName:"Food Grade Chemicals",manufacture:"Cargill",tradeName:"CitriSafe",supplierCost:3.45,casNumber:"77-92-9",weightVolume:13.9,density:1.67,country:"Brazil",description:"Food grade citric acid for pH adjustment and chelation. Natural preservative and flavoring agent. Used in food and beverage industry, cosmetics, and cleaning products. Excellent buffering capacity and metal chelation properties.",physicalForm:"Powder",purity:"99.5%",storageConditions:"Store in dry conditions. Keep away from moisture.",hazardClass:"Non-hazardous",shelfLife:"60 months"},{id:hs("Hydrogen Peroxide 35%"),materialName:"Hydrogen Peroxide 35%",supplierName:"Peroxide Solutions LLC",manufacture:"Solvay",tradeName:"Proxitane AHP35",supplierCost:4.89,casNumber:"7722-84-1",weightVolume:9.4,density:1.13,country:"Belgium",description:"Industrial grade hydrogen peroxide for oxidation processes. Powerful oxidizing and bleaching agent. Used in pulp and paper bleaching, water treatment, and chemical synthesis. Environmentally friendly as it decomposes to water and oxygen.",physicalForm:"Liquid",purity:"35%",storageConditions:"Store in cool, ventilated area. Keep away from heat and combustibles.",hazardClass:"Oxidizer, Corrosive",shelfLife:"12 months"},{id:hs("Potassium Hydroxide Flakes 90%"),materialName:"Potassium Hydroxide Flakes 90%",supplierName:"Caustic Supply Inc.",manufacture:"Olin Corporation",tradeName:"KOH Technical Grade",supplierCost:6.78,casNumber:"1310-58-3",weightVolume:17,density:2.04,country:"USA",description:"Technical grade potassium hydroxide for pH adjustment and chemical processing. Strong alkaline material used in soap manufacturing, biodiesel production, and water treatment. Highly soluble in water with significant heat generation.",physicalForm:"Flakes",purity:"90%",storageConditions:"Store in dry, sealed containers. Protect from moisture and CO2.",hazardClass:"Corrosive",shelfLife:"60 months"}],F2="raw_materials_data",$2=()=>{try{const t=localStorage.getItem(F2);if(t)return JSON.parse(t)}catch(t){console.warn("Failed to load materials from localStorage:",t)}return[...I2]};$2();const z2=[{id:"HDST001",name:"Heavy Duty Steam Title Placeholder",totalCost:245.67,finalSalePriceDrum:589.99,finalSalePriceTote:1249.99,ingredients:[{name:"Sodium Hydroxide",percentage:35.2,cost:87.45},{name:"Calcium Carbonate",percentage:25.8,cost:56.23},{name:"Ethylene Glycol",percentage:20.1,cost:78.12},{name:"Surfactant Blend",percentage:12.4,cost:23.87},{name:"Corrosion Inhibitor",percentage:6.5,cost:0}]},{id:"MDCL002",name:"Multi-Purpose Degreaser Compound",totalCost:156.34,finalSalePriceDrum:389.99,finalSalePriceTote:799.99,ingredients:[{name:"Isopropyl Alcohol",percentage:45,cost:78.9},{name:"Sodium Carbonate",percentage:25,cost:34.12},{name:"Citric Acid",percentage:15,cost:23.45},{name:"Non-ionic Surfactant",percentage:10,cost:19.87},{name:"Water",percentage:5,cost:0}]},{id:"INDL003",name:"Industrial Solvent Formula XP",totalCost:334.12,finalSalePriceDrum:789.99,finalSalePriceTote:1549.99,ingredients:[{name:"Methylene Chloride",percentage:40,cost:145.67},{name:"Acetone",percentage:30,cost:89.34},{name:"Toluene",percentage:20,cost:67.23},{name:"Stabilizer Blend",percentage:8,cost:31.88},{name:"Antioxidant",percentage:2,cost:0}]}],U2="formulas_data",B2=()=>{try{const t=localStorage.getItem(U2);if(t)return JSON.parse(t)}catch(t){console.warn("Failed to load formulas from localStorage:",t)}return[...z2]};B2();const Wm=({userData:t})=>{const[e,s]=w.useState(""),[n,r]=w.useState(null),[i,o]=w.useState({x:0,y:0}),[l,c]=w.useState([]),d=w.useRef({}),u=nt(),h=(g,x)=>{if(!d.current[x])return;const y=d.current[x].getBoundingClientRect(),b=(g.clientX-y.left)/y.width*100,N=(g.clientY-y.top)/y.height*100;o({x:b,y:N})};w.useEffect(()=>{const g=()=>{c(O2())};g();const x=setInterval(g,2e3);return()=>clearInterval(x)},[]);const f=g=>l.filter(x=>x.appAccess&&x.appAccess.includes(g)),m=[{id:1,title:"Formulas",icon:ws,glowColor:"rgba(59, 130, 246, 0.3)",iconBgColor:"bg-blue-900",iconColor:"text-blue-400",borderColor:"hover:border-blue-500",appKey:"formulas"},{id:2,title:"Raw Materials",icon:vs,glowColor:"rgba(249, 115, 22, 0.3)",iconBgColor:"bg-orange-900",iconColor:"text-orange-400",borderColor:"hover:border-orange-500",appKey:"raw-materials"},{id:3,title:"Suppliers",icon:Xe,glowColor:"rgba(217, 70, 239, 0.3)",iconBgColor:"bg-fuchsia-900",iconColor:"text-fuchsia-400",borderColor:"hover:border-fuchsia-500",appKey:"suppliers"}],p=t&&t.appAccess?m.filter(g=>t.appAccess.includes(g.appKey)):m,v=g=>g===1?"flex justify-center gap-6":g===2?"flex justify-center gap-6 flex-wrap":"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6";return a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("div",{className:"grid grid-cols-3 gap-1 p-2",children:[...Array(9)].map((g,x)=>a.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-sm"},x))}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Dashboard"}),t&&a.jsxs("p",{className:"text-slate-400 text-sm mt-1",children:["Welcome back, ",t.name.split(" ")[0],"!"]})]})]}),t&&a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-slate-300 font-medium",children:t.name}),a.jsx("p",{className:"text-slate-400 text-sm",children:t.email}),a.jsx("span",{className:"inline-flex items-center px-2 py-1 rounded-full text-xs font-medium bg-blue-100 text-blue-600 mt-1",children:t.role})]})]}),a.jsx("div",{className:"flex justify-center",children:a.jsxs("div",{className:"relative max-w-md",children:[a.jsx(xy,{className:"absolute left-3 top-1/2 transform -translate-y-1/2 text-slate-400 h-4 w-4"}),a.jsx("input",{type:"text",placeholder:"Search by Name",value:e,onChange:g=>s(g.target.value),className:"w-full pl-10 pr-4 py-2 border border-slate-600 rounded-md bg-slate-700 text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500"})]})}),a.jsx("div",{className:v(p.length),children:p.map(g=>{const x=g.icon;return a.jsx("div",{ref:y=>d.current[g.id]=y,onMouseEnter:()=>r(g.id),onMouseLeave:()=>{r(null),o({x:50,y:50})},onMouseMove:y=>h(y,g.id),className:`relative cursor-pointer ${p.length<=2?"w-80":""}`,style:{transform:n===g.id?"scale(1.05) translateY(-4px)":"scale(1)",transformOrigin:n===g.id?`${i.x}% ${i.y}%`:"center center",transition:n===g.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},onClick:()=>{g.appKey==="formulas"?u("/formulas"):g.appKey==="raw-materials"?u("/raw-materials"):g.appKey==="suppliers"&&u("/suppliers")},children:a.jsxs(le,{className:`p-8 hover:shadow-lg transition-all duration-300 h-full relative overflow-hidden border-2 border-transparent ${g.borderColor}`,children:[n===g.id&&a.jsx("div",{className:"absolute inset-0 opacity-20 -z-0",style:{background:`radial-gradient(circle at ${i.x}% ${i.y}%, ${g.glowColor}, transparent 70%)`}}),a.jsxs("div",{className:"flex flex-col items-center text-center space-y-6 relative z-10",children:[a.jsx("div",{className:"w-24 h-24 bg-slate-700 rounded-full flex items-center justify-center transition-all duration-300",style:{transform:n===g.id?"scale(1.1)":"scale(1)",transition:n===g.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},children:a.jsx("div",{className:`w-16 h-16 ${g.iconBgColor} rounded-full flex items-center justify-center`,children:a.jsx(x,{className:`w-8 h-8 ${g.iconColor}`})})}),a.jsx("h3",{className:"text-xl font-medium text-slate-100",children:g.title}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("p",{className:"text-sm text-slate-300",children:"Request Access"}),a.jsxs("div",{className:"flex flex-col items-center space-y-2",children:[f(g.appKey).slice(0,3).map((y,b)=>a.jsxs("div",{className:"flex items-center space-x-2 text-xs text-slate-400 transition-transform duration-300",style:{transform:n===g.id?"scale(1.05)":"scale(1)",transition:n===g.id?"transform 0.2s ease-out":"transform 0.6s ease-out"},children:[a.jsx("div",{className:`w-2 h-2 rounded-full ${g.appKey==="formulas"?"bg-blue-500":g.appKey==="raw-materials"?"bg-orange-500":"bg-fuchsia-500"}`}),a.jsx("span",{children:y.name})]},y.id)),f(g.appKey).length>3&&a.jsxs("div",{className:"text-xs text-slate-500",children:["+",f(g.appKey).length-3," more"]}),f(g.appKey).length===0&&a.jsx("div",{className:"text-xs text-slate-500",children:"No users assigned"})]})]})]})]})},g.id)})})]})},H2=({userData:t})=>{const e=nt(),s=St(),[n,r]=w.useState(null),o=new URLSearchParams(s.search).get("mode"),l=[{id:1,name:"Capacity Chemical",users:12,apps:["Formulas","Suppliers","Raw Materials"]},{id:2,name:"Industrial Solutions Inc",users:8,apps:["Formulas","Suppliers"]},{id:3,name:"ChemTech Corp",users:15,apps:["Formulas","Raw Materials"]},{id:4,name:"Precision Chemicals",users:6,apps:["Formulas"]}],c=[{id:"formulas",name:"Formulas",icon:Ds,description:"Chemical formula management"},{id:"suppliers",name:"Suppliers",icon:er,description:"Supplier relationship management"},{id:"raw-materials",name:"Raw Materials",icon:fu,description:"Raw material inventory"},{id:"analytics",name:"Analytics",icon:gl,description:"Data analytics and reporting"}];w.useEffect(()=>{r(null)},[o]);const d=g=>{e(`/dashboard?mode=${g}`)},u=()=>{e("/dashboard")},h=g=>{r(g)},f=()=>a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"Nsight Admin Dashboard"}),a.jsx("p",{className:"text-slate-400",children:"Choose your administrative mode"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6 max-w-4xl mx-auto",children:[a.jsx(le,{className:"p-8 cursor-pointer hover:bg-slate-750 transition-all duration-200 border-2 border-transparent hover:border-blue-500",onClick:()=>d("developer"),children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-16 h-16 bg-blue-600 rounded-full flex items-center justify-center mx-auto",children:a.jsx(ti,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"text-xl font-semibold text-slate-100",children:"Developer Mode"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Create new companies and develop custom applications for clients"}),a.jsxs("div",{className:"pt-4 space-y-2 text-xs text-slate-500",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(tr,{className:"h-3 w-3"}),a.jsx("span",{children:"Create New Company"})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(Ds,{className:"h-3 w-3"}),a.jsx("span",{children:"Create Apps"})]})]})]})}),a.jsx(le,{className:"p-8 cursor-pointer hover:bg-slate-750 transition-all duration-200 border-2 border-transparent hover:border-green-500",onClick:()=>d("existing"),children:a.jsxs("div",{className:"text-center space-y-4",children:[a.jsx("div",{className:"w-16 h-16 bg-green-600 rounded-full flex items-center justify-center mx-auto",children:a.jsx(er,{className:"h-8 w-8 text-white"})}),a.jsx("h3",{className:"text-xl font-semibold text-slate-100",children:"Existing Company Mode"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Manage existing companies, users, and applications"}),a.jsxs("div",{className:"pt-4 space-y-2 text-xs text-slate-500",children:[a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(Xe,{className:"h-3 w-3"}),a.jsx("span",{children:"Manage Users"})]}),a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(hu,{className:"h-3 w-3"}),a.jsx("span",{children:"Edit/Add Apps"})]})]})]})})]})]}),m=()=>a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:u,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(Nt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"Developer Mode"}),a.jsx("p",{className:"text-slate-400",children:"Create and configure new companies and applications"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(tr,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Create New Company"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Set up a new client company"})]})]}),a.jsx("button",{className:"w-full px-4 py-3 bg-blue-600 text-white rounded-lg hover:bg-blue-700 transition-colors",children:"Create Company"})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-purple-600 rounded-lg flex items-center justify-center",children:a.jsx(Ds,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Create Apps"}),a.jsx("p",{className:"text-slate-400 text-sm",children:"Develop custom applications"})]})]}),a.jsx("button",{className:"w-full px-4 py-3 bg-purple-600 text-white rounded-lg hover:bg-purple-700 transition-colors",children:"Create App"})]})]}),a.jsxs(le,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100 mb-4",children:"Available App Templates"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-4",children:c.map(g=>{const x=g.icon;return a.jsxs("div",{className:"p-4 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-2",children:[a.jsx(x,{className:"h-5 w-5 text-blue-400"}),a.jsx("span",{className:"text-slate-200 font-medium",children:g.name})]}),a.jsx("p",{className:"text-slate-400 text-xs",children:g.description})]},g.id)})})]})]}),p=()=>a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:u,className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(Nt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-100 mb-2",children:"Existing Company Mode"}),a.jsx("p",{className:"text-slate-400",children:"Manage existing companies and their configurations"})]})]}),n?v():a.jsxs(le,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100 mb-4",children:"Select Company"}),a.jsx("div",{className:"space-y-3",children:l.map(g=>a.jsx("div",{onClick:()=>h(g),className:"p-4 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors cursor-pointer group",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h4",{className:"text-slate-200 font-medium",children:g.name}),a.jsxs("div",{className:"flex items-center space-x-4 mt-1",children:[a.jsxs("span",{className:"text-slate-400 text-sm",children:[g.users," users"]}),a.jsxs("span",{className:"text-slate-400 text-sm",children:["Apps: ",g.apps.join(", ")]})]})]}),a.jsx(ha,{className:"h-5 w-5 text-slate-400 group-hover:text-slate-200 transition-colors"})]})},g.id))})]})]}),v=()=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-100",children:n.name}),a.jsx("p",{className:"text-slate-400",children:"Manage users and applications"})]}),a.jsx("button",{onClick:()=>r(null),className:"px-4 py-2 bg-slate-700 text-slate-300 rounded-lg hover:bg-slate-600 transition-colors",children:"Back to Companies"})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-green-600 rounded-lg flex items-center justify-center",children:a.jsx(Xe,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Manage Users"}),a.jsxs("p",{className:"text-slate-400 text-sm",children:[n.users," active users"]})]})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("button",{className:"w-full px-4 py-2 bg-green-600 text-white rounded-lg hover:bg-green-700 transition-colors",children:a.jsxs("div",{className:"flex items-center justify-center space-x-2",children:[a.jsx(u2,{className:"h-4 w-4"}),a.jsx("span",{children:"Add New User"})]})}),a.jsx("button",{className:"w-full px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"View All Users"})]})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-12 h-12 bg-orange-600 rounded-lg flex items-center justify-center",children:a.jsx(hu,{className:"h-6 w-6 text-white"})}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Edit/Add Apps"}),a.jsxs("p",{className:"text-slate-400 text-sm",children:[n.apps.length," apps configured"]})]})]}),a.jsxs("div",{className:"space-y-2 mb-4",children:[a.jsx("button",{className:"w-full px-4 py-2 bg-orange-600 text-white rounded-lg hover:bg-orange-700 transition-colors",children:"Add New App"}),a.jsx("button",{className:"w-full px-4 py-2 bg-slate-600 text-white rounded-lg hover:bg-slate-700 transition-colors",children:"Configure Existing Apps"})]})]})]}),a.jsxs(le,{className:"p-6",children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100 mb-4",children:"Current Applications"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:n.apps.map((g,x)=>a.jsxs("div",{className:"p-4 bg-slate-700 rounded-lg",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("span",{className:"text-slate-200 font-medium",children:g}),a.jsx("button",{className:"text-slate-400 hover:text-slate-200 transition-colors",children:a.jsx(gl,{className:"h-4 w-4"})})]}),a.jsx("p",{className:"text-slate-400 text-xs mt-1",children:"Active"})]},x))})]})]});return o==="developer"?m():o==="existing"?p():f()},V2=()=>{const{user:t,userProfile:e,loading:s}=js(),[n,r]=w.useState(null),[i,o]=w.useState(0);if(w.useEffect(()=>{console.log("DashboardPage - Auth State:",{user:t==null?void 0:t.email,userProfile:e,loading:s,profileRetryCount:i})},[t,e,s,i]),s)return a.jsx(Ae,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-300",children:"Loading..."})]})})});if(t&&!e)return a.jsx(Ae,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center max-w-md mx-auto",children:[a.jsx("h2",{className:"text-xl font-semibold text-white mb-4",children:"Welcome!"}),a.jsx("p",{className:"text-slate-300 mb-4",children:"Setting up your profile... This usually takes a few moments."}),a.jsxs("p",{className:"text-slate-400 text-sm mb-4",children:["Your account: ",t.email]}),i<3?a.jsxs("button",{onClick:()=>{o(c=>c+1),window.location.reload()},className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700 mr-2",children:["Retry (",i+1,"/3)"]}):a.jsxs("div",{className:"space-y-2",children:[a.jsx("p",{className:"text-red-400 text-sm",children:"Profile creation failed. Please contact support."}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-gray-600 text-white rounded-lg hover:bg-gray-700",children:"Refresh Page"})]})]})})});if(!t)return a.jsx(Ae,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center max-w-md mx-auto",children:[a.jsx("h2",{className:"text-xl font-semibold text-red-400 mb-4",children:"Authentication Error"}),a.jsx("p",{className:"text-slate-300 mb-4",children:"You are not logged in. Please refresh and try again."}),a.jsx("button",{onClick:()=>window.location.href="/auth",className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Go to Login"})]})})});const l=()=>{var c;try{const d=((c=e==null?void 0:e.role)==null?void 0:c.trim())||"Employee";switch(console.log("Normalized Role for Switch:",JSON.stringify(d)),d){case"Capacity Admin":return console.log("Rendering AdminDashboard"),a.jsx(T2,{});case"NSight Admin":return console.log("Rendering NsightAdminDashboard"),a.jsx(H2,{});case"Employee":return console.log("Rendering EmployeeDashboard (Employee role)"),a.jsx(Wm,{});default:return console.log("Rendering EmployeeDashboard (Default fallback for role:",JSON.stringify(d)),a.jsx(Wm,{})}}catch(d){return console.error("Error rendering dashboard:",d),r(d.message),a.jsxs("div",{className:"text-center py-8",children:[a.jsx("h2",{className:"text-xl font-semibold text-red-400 mb-4",children:"Dashboard Error"}),a.jsxs("p",{className:"text-slate-300 mb-4",children:["Error: ",d]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Refresh Page"})]})}};return a.jsx(Ae,{children:l()})},zh=({isOpen:t,onClose:e})=>{const[s,n]=w.useState(!1),[r,i]=w.useState([]),[o,l]=w.useState("idle"),c=()=>{setTimeout(()=>{n(!0)},1e3)},d=m=>{const v=Array.from(m.target.files).map(g=>({id:Date.now()+Math.random(),name:g.name,size:g.size,type:g.type,file:g}));i(g=>[...g,...v])},u=()=>{l("uploading"),setTimeout(()=>{l("success"),setTimeout(()=>{l("idle"),i([])},2e3)},2e3)},h=m=>{i(p=>p.filter(v=>v.id!==m))},f=m=>{if(m===0)return"0 Bytes";const p=1024,v=["Bytes","KB","MB","GB"],g=Math.floor(Math.log(m)/Math.log(p));return parseFloat((m/Math.pow(p,g)).toFixed(2))+" "+v[g]};return t?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:e}),a.jsxs("div",{className:"relative bg-white rounded-lg shadow-xl w-full max-w-lg mx-4 border",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("svg",{className:"w-6 h-6 text-blue-600",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})}),a.jsx("h2",{className:"text-xl font-semibold text-gray-900",children:"Dropbox"})]}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-gray-400"})})]}),a.jsx("div",{className:"p-6",children:s?a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"text-center",children:[a.jsx("h3",{className:"text-lg font-semibold text-gray-900 mb-2",children:"Upload Formula Files"}),a.jsx("p",{className:"text-gray-600",children:"Select files to upload to your Formulas folder"})]}),a.jsxs("div",{className:"border-2 border-dashed border-gray-300 rounded-lg p-6 text-center hover:border-blue-500 transition-colors",children:[a.jsx(yy,{className:"w-12 h-12 text-gray-400 mx-auto mb-4"}),a.jsxs("label",{className:"cursor-pointer",children:[a.jsx("span",{className:"text-blue-600 hover:text-blue-500 font-medium",children:"Choose files"}),a.jsx("span",{className:"text-gray-600",children:" or drag and drop"}),a.jsx("input",{type:"file",multiple:!0,onChange:d,className:"hidden",accept:".pdf,.doc,.docx,.xls,.xlsx,.txt,.csv"})]}),a.jsx("p",{className:"text-sm text-gray-500 mt-2",children:"Supports PDF, DOC, XLS, TXT, CSV files"})]}),r.length>0&&a.jsxs("div",{className:"space-y-3",children:[a.jsxs("h4",{className:"font-medium text-gray-900",children:["Selected Files (",r.length,")"]}),a.jsx("div",{className:"max-h-32 overflow-y-auto space-y-2",children:r.map(m=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-gray-50 rounded-lg",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Oh,{className:"w-4 h-4 text-gray-500"}),a.jsxs("div",{children:[a.jsx("p",{className:"text-sm font-medium text-gray-900",children:m.name}),a.jsx("p",{className:"text-xs text-gray-500",children:f(m.size)})]})]}),a.jsx("button",{onClick:()=>h(m.id),className:"p-1 hover:bg-gray-200 rounded",children:a.jsx(kt,{className:"w-4 h-4 text-gray-400"})})]},m.id))})]}),o!=="idle"&&a.jsxs("div",{className:"p-4 rounded-lg border",children:[o==="uploading"&&a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-5 h-5 border-2 border-blue-600 border-t-transparent rounded-full animate-spin"}),a.jsx("span",{className:"text-blue-600",children:"Uploading files..."})]}),o==="success"&&a.jsxs("div",{className:"flex items-center space-x-3 text-green-600",children:[a.jsx(Dh,{className:"w-5 h-5"}),a.jsx("span",{children:"Files uploaded successfully!"})]}),o==="error"&&a.jsxs("div",{className:"flex items-center space-x-3 text-red-600",children:[a.jsx(Bi,{className:"w-5 h-5"}),a.jsx("span",{children:"Upload failed. Please try again."})]})]}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx(ke,{onClick:e,variant:"secondary",className:"flex-1",children:"Cancel"}),a.jsx(ke,{onClick:u,disabled:r.length===0||o==="uploading",className:"flex-1 bg-blue-600 hover:bg-blue-500 text-white disabled:opacity-50",children:o==="uploading"?"Uploading...":`Upload ${r.length} file${r.length!==1?"s":""}`})]})]}):a.jsxs("div",{className:"text-center space-y-6",children:[a.jsxs("div",{children:[a.jsx("svg",{className:"w-16 h-16 text-blue-600 mx-auto mb-4",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})}),a.jsx("h3",{className:"text-xl font-semibold text-gray-900 mb-2",children:"Connect to Dropbox"}),a.jsx("p",{className:"text-gray-600",children:"Upload your formula files directly to your Dropbox account"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("div",{className:"bg-gray-50 p-4 rounded-lg",children:a.jsxs("p",{className:"text-sm text-gray-700",children:["Files will be uploaded to: ",a.jsx("strong",{children:"/Apps/Formulas/"})]})}),a.jsx(ke,{onClick:c,className:"w-full bg-blue-600 hover:bg-blue-500 text-white",children:"Connect to Dropbox"})]})]})})]})]}):null},W2=({className:t="w-6 h-6"})=>a.jsx("img",{src:"/chemformation-logo.png",alt:"Chemformation Logo",className:t}),q2=()=>{const t=nt(),[e,s]=w.useState(""),[n,r]=w.useState("all"),[i,o]=w.useState(null),[l,c]=w.useState({x:0,y:0}),[d,u]=w.useState(!1);w.useState(!1),w.useState(!1);const[h,f]=w.useState([]),[m,p]=w.useState(!0),[v,g]=w.useState(null),x=w.useRef({}),[y,b]=w.useState(!1),[N,_]=w.useState("name"),[k,S]=w.useState("asc"),[j,C]=w.useState("all"),[E,M]=w.useState("all"),[P,R]=w.useState("all"),[Y,B]=w.useState("name"),[H,Q]=w.useState("asc"),[O,U]=w.useState("all"),[q,X]=w.useState("all"),[A,F]=w.useState("all");w.useEffect(()=>{(async()=>{p(!0),g(null);try{const ue=await y2();f(ue)}catch(ue){console.error("Error loading formulas:",ue),g("Failed to load formulas. Please check your database connection.")}finally{p(!1)}})()},[]),w.useEffect(()=>{const V=ue=>{y&&!ue.target.closest(".relative")&&b(!1)};return document.addEventListener("mousedown",V),()=>document.removeEventListener("mousedown",V)},[y]);const T=V=>{B(V)},$=()=>{Q(H==="asc"?"desc":"asc")},ne=()=>{_("name"),S("asc"),C("all"),M("all"),R("all"),s(""),B("name"),Q("asc"),U("all"),X("all"),F("all")},de=()=>{_(Y),S(H),C(O),M(q),R(A),b(!1)},oe=()=>{B(N),Q(k),U(j),X(E),F(P),b(!1)},re=()=>{y?oe():(B(N),Q(k),U(j),X(E),F(P),b(!0))},Ct=[...h.filter(V=>{const ue=V.name.toLowerCase().includes(e.toLowerCase())||V.id.toLowerCase().includes(e.toLowerCase()),Ee=j==="all"||(()=>{const Be=parseFloat(V.totalCost)||0;switch(j){case"low":return Be<100;case"medium":return Be>=100&&Be<500;case"high":return Be>=500;default:return!0}})(),Oe=E==="all"||(()=>{const Be=parseFloat(V.finalSalePriceDrum)||0;switch(E){case"low":return Be<200;case"medium":return Be>=200&&Be<1e3;case"high":return Be>=1e3;default:return!0}})(),ks=P==="all"||(()=>{const Be=V.ingredients?V.ingredients.length:0;switch(P){case"few":return Be<=3;case"medium":return Be>3&&Be<=6;case"many":return Be>6;default:return!0}})();return ue&&Ee&&Oe&&ks})].sort((V,ue)=>{let Ee,Oe;switch(N){case"name":Ee=V.name.toLowerCase(),Oe=ue.name.toLowerCase();break;case"id":Ee=V.id.toLowerCase(),Oe=ue.id.toLowerCase();break;case"totalCost":Ee=parseFloat(V.totalCost)||0,Oe=parseFloat(ue.totalCost)||0;break;case"finalSalePriceDrum":Ee=parseFloat(V.finalSalePriceDrum)||0,Oe=parseFloat(ue.finalSalePriceDrum)||0;break;case"finalSalePriceTote":Ee=parseFloat(V.finalSalePriceTote)||0,Oe=parseFloat(ue.finalSalePriceTote)||0;break;case"ingredientCount":Ee=V.ingredients?V.ingredients.length:0,Oe=ue.ingredients?ue.ingredients.length:0;break;default:Ee=V.name.toLowerCase(),Oe=ue.name.toLowerCase()}return Ee<Oe?k==="asc"?-1:1:Ee>Oe?k==="asc"?1:-1:0}),Ue=(V,ue)=>{if(!x.current[ue])return;const Ee=x.current[ue].getBoundingClientRect(),Oe=(V.clientX-Ee.left)/Ee.width*100,ks=(V.clientY-Ee.top)/Ee.height*100;c({x:Oe,y:ks})},Ns=[{id:"all",label:"All Formulas"},{id:"assigned",label:"Assigned to me"},{id:"created",label:"Created by Me"}];return m?a.jsx(Ae,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(Nt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ws,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Formulas"})]})]}),a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-slate-400",children:"Loading formulas..."})})]})}):v?a.jsx(Ae,{children:a.jsx("div",{className:"max-w-4xl mx-auto",children:a.jsx("div",{className:"text-center py-12",children:a.jsxs("div",{className:"bg-red-900/20 border border-red-700/50 rounded-lg p-6 max-w-md mx-auto",children:[a.jsx("h2",{className:"text-xl font-semibold text-red-400 mb-4",children:"Database Connection Error"}),a.jsx("p",{className:"text-slate-300 mb-4",children:v}),a.jsxs("div",{className:"text-left text-sm text-slate-400 space-y-2 mb-4",children:[a.jsx("p",{children:a.jsx("strong",{className:"text-slate-300",children:"Possible solutions:"})}),a.jsxs("ul",{className:"list-disc list-inside space-y-1 ml-4",children:[a.jsx("li",{children:"Run the database schema update script in Supabase"}),a.jsx("li",{children:"Check your Supabase connection settings"}),a.jsx("li",{children:"Verify authentication permissions"})]})]}),a.jsx("button",{onClick:()=>window.location.reload(),className:"px-4 py-2 bg-blue-600 text-white rounded-lg hover:bg-blue-700",children:"Retry"})]})})})}):a.jsx(Ae,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(Nt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ws,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Formulas"})]})]}),a.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("input",{type:"text",placeholder:"Search by Txn Id, material name",value:e,onChange:V=>s(V.target.value),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-80"})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{className:"p-3 bg-red-600 rounded-full hover:bg-red-500 transition-colors",children:a.jsx(W2,{className:"w-6 h-6"})}),a.jsx("button",{onClick:()=>u(!0),className:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors",title:"Upload to Dropbox",children:a.jsx("svg",{className:"w-5 h-5 text-slate-300",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})})})]})]})}),a.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex space-x-0",children:Ns.map(V=>a.jsxs("button",{ref:ue=>x.current[V.id]=ue,onClick:()=>r(V.id),onMouseEnter:()=>o(V.id),onMouseLeave:()=>o(null),onMouseMove:ue=>Ue(ue,V.id),className:`relative px-6 py-2 transition-all duration-300 ease-out ${n===V.id?"bg-slate-600 text-slate-100":"bg-slate-700 text-slate-400 hover:text-slate-200 hover:bg-slate-650"} ${V.id==="all"?"rounded-l-lg":V.id==="created"?"rounded-r-lg":""}`,style:{transform:i===V.id?"scale(1.05)":"scale(1)",transition:"transform 0.2s ease-out"},children:[a.jsx("span",{className:"relative z-10 font-medium",children:V.label}),i===V.id&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-md -z-0",style:{background:`radial-gradient(circle at ${l.x}% ${l.y}%, rgba(59, 130, 246, 0.15), transparent 50%)`}})]},V.id))}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:re,className:"flex items-center space-x-2 p-2 border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors",children:[a.jsx(Ql,{className:"h-5 w-5 text-slate-300"}),a.jsx("span",{className:"text-sm text-slate-300",children:"Filter & Sort"}),a.jsx(_n,{className:"h-4 w-4 text-slate-300"})]}),y&&a.jsx("div",{className:"absolute right-0 mt-2 w-96 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200",children:"Sort By"}),a.jsxs("button",{onClick:$,className:"flex items-center space-x-1 px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition-colors",children:[a.jsx("span",{children:H==="asc"?"Ascending":"Descending"}),a.jsx("span",{children:H==="asc"?"↑":"↓"})]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"name",label:"Formula Name"},{key:"id",label:"Formula ID"},{key:"totalCost",label:"Total Cost"},{key:"finalSalePriceDrum",label:"Sale Price (Drum)"},{key:"finalSalePriceTote",label:"Sale Price (Tote)"},{key:"ingredientCount",label:"Ingredient Count"}].map(V=>a.jsx("button",{onClick:()=>T(V.key),className:`text-left px-3 py-2 rounded text-sm transition-colors ${Y===V.key?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:V.label},V.key))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Cost"}),a.jsxs("select",{value:O,onChange:V=>U(V.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Costs"}),a.jsx("option",{value:"low",children:"Low (< $100)"}),a.jsx("option",{value:"medium",children:"Medium ($100 - $500)"}),a.jsx("option",{value:"high",children:"High (>= $500)"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Sale Price"}),a.jsxs("select",{value:q,onChange:V=>X(V.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Prices"}),a.jsx("option",{value:"low",children:"Low (< $200)"}),a.jsx("option",{value:"medium",children:"Medium ($200 - $1000)"}),a.jsx("option",{value:"high",children:"High (>= $1000)"})]})]})]}),a.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Ingredients"}),a.jsxs("select",{value:A,onChange:V=>F(V.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Ingredient Counts"}),a.jsx("option",{value:"few",children:"Few (≤ 3 ingredients)"}),a.jsx("option",{value:"medium",children:"Medium (4-6 ingredients)"}),a.jsx("option",{value:"many",children:"Many (> 6 ingredients)"})]})]})})]}),a.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-slate-600",children:[a.jsx("button",{onClick:ne,className:"px-3 py-1 text-xs text-slate-400 hover:text-slate-200 transition-colors",children:"Clear All"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:oe,className:"px-4 py-2 text-sm text-slate-300 hover:text-slate-100 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:de,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Apply"})]})]})]})})]}),a.jsxs("button",{className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-500 transition-colors",children:[a.jsx(tr,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-sm text-white font-medium",children:"Add Formula"})]})]})]})}),a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"bg-slate-800 rounded-lg overflow-hidden border border-slate-700",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-slate-750 border-b border-slate-700",children:[a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Item number"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Display name"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Ingredients"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Total cost"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Final sale price (Drum)"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Final sale price (Tote)"})]})}),a.jsx("tbody",{children:Ct.map((V,ue)=>a.jsxs("tr",{onClick:()=>t(`/formulas/${V.id}`),className:"border-b border-slate-700 hover:bg-slate-750 transition-colors cursor-pointer",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:V.id}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:V.name}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"w-64 overflow-x-auto ingredients-scroll",style:{scrollbarWidth:"none",msOverflowStyle:"none"},children:a.jsx("div",{className:"flex space-x-2 min-w-max",children:V.ingredients&&V.ingredients.map((Ee,Oe)=>a.jsxs("div",{className:"flex-shrink-0 bg-slate-700 rounded-full px-3 py-1 text-xs text-slate-300 border border-slate-600",children:[Ee.name," (",Ee.percentage,"%)"]},Oe))})})}),a.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",V.totalCost?V.totalCost.toFixed(2):"0.00"]}),a.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",V.finalSalePriceDrum?V.finalSalePriceDrum.toFixed(2):"0.00"]}),a.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",V.finalSalePriceTote?V.finalSalePriceTote.toFixed(2):"0.00"]})]},`${V.id}-${ue}`))})]})})}),a.jsx("button",{className:"fixed bottom-6 right-6 p-4 bg-blue-600 rounded-full hover:bg-blue-500 transition-colors shadow-lg",children:a.jsx(tr,{className:"h-6 w-6 text-white"})}),a.jsx(zh,{isOpen:d,onClose:()=>u(!1)})]})})},K2=()=>{const t=nt(),{formulaId:e}=Mx(),[s,n]=w.useState(!1),[r,i]=w.useState([]),[o,l]=w.useState(!1),c=w.useRef(null),[d,u]=w.useState(null),[h,f]=w.useState(null),[m,p]=w.useState([]),[v,g]=w.useState(!0),[x,y]=w.useState(null),[b,N]=w.useState(!1);if(w.useEffect(()=>{(async()=>{try{g(!0),console.log("Loading formula with ID:",e);const F=await v2(e);console.log("Found formula:",F),F?(f(F),u({name:F.name,totalCost:F.totalCost,finalSalePriceDrum:F.finalSalePriceDrum,finalSalePriceTote:F.finalSalePriceTote,ingredients:[...F.ingredients]}),console.log("Formula state set successfully")):(console.log("No formula found for ID:",e),y("Formula not found"))}catch(F){console.error("Error loading formula:",F),y("Failed to load formula")}finally{g(!1)}})()},[e]),w.useEffect(()=>(console.log("FormulaDetailPage rendered with formulaId:",e),n(!1),i([]),p([]),()=>{console.log("FormulaDetailPage cleanup")}),[e]),console.log("Current formula state:",h),console.log("Current editableFormula state:",d),v)return a.jsx(Ae,{children:a.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-slate-400",children:"Loading formula..."})})})});if(x||!h)return console.log("Rendering Formula Not Found page"),a.jsx(Ae,{children:a.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-4",children:x||"Formula Not Found"}),a.jsxs("p",{className:"text-slate-400 mb-4",children:["Formula ID: ",e]}),a.jsx("button",{onClick:()=>t("/formulas"),className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Back to Formulas"})]})})});const k=(A=>({HDST001:[{id:1,name:"HDST001_Safety_Data_Sheet.pdf",size:2451232,type:"application/pdf",uploadDate:new Date("2024-01-15"),uploader:"Safety Team"},{id:2,name:"Heavy_Duty_Steam_Formula_Specs.docx",size:1024567,type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",uploadDate:new Date("2024-01-10"),uploader:"R&D Team"},{id:3,name:"Manufacturing_Instructions_HDST001.pdf",size:876543,type:"application/pdf",uploadDate:new Date("2024-01-08"),uploader:"Production Team"},{id:4,name:"Quality_Control_Certificate.pdf",size:345678,type:"application/pdf",uploadDate:new Date("2024-01-05"),uploader:"QC Lab"}],MDCL002:[{id:5,name:"MDCL002_Safety_Data_Sheet.pdf",size:1876543,type:"application/pdf",uploadDate:new Date("2024-01-12"),uploader:"Safety Team"},{id:6,name:"Degreaser_Performance_Analysis.xlsx",size:567890,type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",uploadDate:new Date("2024-01-08"),uploader:"Lab Team"},{id:7,name:"EPA_Compliance_Certificate.pdf",size:234567,type:"application/pdf",uploadDate:new Date("2024-01-06"),uploader:"Compliance Team"},{id:8,name:"Customer_Usage_Guidelines.docx",size:456789,type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",uploadDate:new Date("2024-01-04"),uploader:"Technical Support"}],INDL003:[{id:9,name:"INDL003_Safety_Data_Sheet.pdf",size:3245612,type:"application/pdf",uploadDate:new Date("2024-01-05"),uploader:"Safety Team"},{id:10,name:"Industrial_Solvent_Safety_Protocol.docx",size:987654,type:"application/vnd.openxmlformats-officedocument.wordprocessingml.document",uploadDate:new Date("2024-01-03"),uploader:"Safety Team"},{id:11,name:"Lab_Test_Results_Batch_2024_001.xlsx",size:234567,type:"application/vnd.openxmlformats-officedocument.spreadsheetml.sheet",uploadDate:new Date("2024-01-01"),uploader:"Lab Team"},{id:12,name:"Hazmat_Transportation_Guide.pdf",size:1234567,type:"application/pdf",uploadDate:new Date("2023-12-28"),uploader:"Logistics Team"},{id:13,name:"Solvent_Storage_Requirements.pdf",size:654321,type:"application/pdf",uploadDate:new Date("2023-12-25"),uploader:"Facilities Team"}]})[A]||[])(e),S=A=>{p(F=>[...F,A]),console.log("Deleted document ID:",A)},j=k.filter(A=>!m.includes(A.id)),C=A=>{const F=Array.from(A).map(T=>({id:Date.now()+Math.random(),file:T,name:T.name,size:T.size,type:T.type,uploadDate:new Date,formulaId:e}));i(T=>[...T,...F]),console.log("Uploading files for formula:",e,F)},E=A=>{A.preventDefault(),l(!0)},M=A=>{A.preventDefault(),l(!1)},P=A=>{A.preventDefault(),l(!1);const F=A.dataTransfer.files;F.length>0&&C(F)},R=A=>{A.target.files.length>0&&C(A.target.files)},Y=A=>{i(F=>F.filter(T=>T.id!==A))},B=A=>{if(A===0)return"0 Bytes";const F=1024,T=["Bytes","KB","MB","GB"],$=Math.floor(Math.log(A)/Math.log(F));return parseFloat((A/Math.pow(F,$)).toFixed(2))+" "+T[$]},H=A=>A.startsWith("image/")?a.jsx(my,{className:"h-5 w-5 text-blue-400"}):a.jsx(Oh,{className:"h-5 w-5 text-slate-400"}),Q=async()=>{if(s)try{if(d){const A=await b2(h.id,d);A&&(f(A),console.log("Formula saved successfully:",A))}console.log("Deleted documents:",m),n(!1)}catch(A){console.error("Error saving formula:",A)}else u({name:h.name,totalCost:h.totalCost,finalSalePriceDrum:h.finalSalePriceDrum,finalSalePriceTote:h.finalSalePriceTote,ingredients:[...h.ingredients]}),n(!0)},O=(A,F)=>{console.log("Field change:",A,F),u(T=>({...T,[A]:F}))},U=(A,F,T)=>{u($=>({...$,ingredients:$.ingredients.map((ne,de)=>de===A?{...ne,[F]:T}:ne)}))},q=A=>{u(F=>({...F,ingredients:F.ingredients.filter((T,$)=>$!==A)}))},X=async()=>{try{await _2(h.id)?t("/formulas"):console.error("Failed to delete formula")}catch(A){console.error("Error deleting formula:",A)}N(!1)};return a.jsx(Ae,{children:a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(ke,{onClick:()=>t("/formulas"),className:"bg-slate-700 hover:bg-slate-600 p-2",children:a.jsx(Nt,{className:"h-4 w-4"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ws,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Formula Details"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[s&&a.jsxs(ke,{onClick:()=>N(!0),className:"bg-red-600 hover:bg-red-700 flex items-center space-x-2",children:[a.jsx(fa,{className:"h-4 w-4"}),a.jsx("span",{children:"Delete Formula"})]}),a.jsxs(ke,{onClick:Q,className:`${s?"bg-green-600 hover:bg-green-700":"bg-blue-600 hover:bg-blue-700"}`,children:[a.jsx(hu,{className:"h-4 w-4 mr-2"}),s?"Save Changes":"Edit Formula"]})]})]}),a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6",children:[s&&d?a.jsx("input",{type:"text",value:d.name,onChange:A=>O("name",A.target.value),className:"text-2xl font-semibold text-slate-100 mb-6 bg-slate-700 border border-slate-600 rounded-md px-3 py-2 w-full focus:outline-none focus:ring-2 focus:ring-blue-500"}):a.jsx("h2",{className:"text-2xl font-semibold text-slate-100 mb-6",children:(d==null?void 0:d.name)||h.name}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6 mb-8",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Formula ID"}),a.jsx("div",{className:"text-slate-200 font-medium",children:h.id})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Total Cost"}),s&&d?a.jsx("input",{type:"number",step:"0.01",value:d.totalCost,onChange:A=>O("totalCost",parseFloat(A.target.value)||0),className:"w-full bg-slate-700 border border-slate-600 rounded-md px-3 py-2 text-slate-200 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500"}):a.jsxs("div",{className:"text-slate-200 font-medium",children:["$",((d==null?void 0:d.totalCost)||h.totalCost).toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Final Sale Price (Drum)"}),s&&d?a.jsx("input",{type:"number",step:"0.01",value:d.finalSalePriceDrum,onChange:A=>O("finalSalePriceDrum",parseFloat(A.target.value)||0),className:"w-full bg-slate-700 border border-slate-600 rounded-md px-3 py-2 text-slate-200 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500"}):a.jsxs("div",{className:"text-slate-200 font-medium",children:["$",((d==null?void 0:d.finalSalePriceDrum)||h.finalSalePriceDrum).toFixed(2)]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm text-slate-400 mb-2",children:"Final Sale Price (Tote)"}),s&&d?a.jsx("input",{type:"number",step:"0.01",value:d.finalSalePriceTote,onChange:A=>O("finalSalePriceTote",parseFloat(A.target.value)||0),className:"w-full bg-slate-700 border border-slate-600 rounded-md px-3 py-2 text-slate-200 font-medium focus:outline-none focus:ring-2 focus:ring-blue-500"}):a.jsxs("div",{className:"text-slate-200 font-medium",children:["$",((d==null?void 0:d.finalSalePriceTote)||h.finalSalePriceTote).toFixed(2)]})]})]}),a.jsxs("div",{className:"border-t border-slate-700 pt-6",children:[a.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Ingredients"}),a.jsx("div",{className:"overflow-x-auto scrollbar-thin scrollbar-thumb-slate-600 scrollbar-track-slate-800",children:a.jsx("div",{className:"flex space-x-4 pb-2 min-w-max",children:((d==null?void 0:d.ingredients)||h.ingredients).map((A,F)=>a.jsxs("div",{className:"flex-shrink-0 bg-slate-700 rounded-lg border border-slate-600 p-4 w-64 relative",children:[s&&d&&a.jsx("button",{onClick:()=>q(F),className:"absolute top-1 right-1 bg-red-500 hover:bg-red-600 text-white rounded-full w-6 h-6 flex items-center justify-center text-sm font-bold transition-colors z-10 shadow-lg",title:"Delete ingredient",children:a.jsx(kt,{className:"h-3 w-3"})}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Ingredient"}),s&&d?a.jsx("input",{type:"text",value:A.name,onChange:T=>U(F,"name",T.target.value),className:"w-full bg-slate-600 border border-slate-500 rounded-md px-3 py-2 text-slate-200 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500",placeholder:"Ingredient name"}):a.jsx("div",{className:"text-slate-200 font-medium text-sm",children:A.name})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-3",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Percentage"}),s&&d?a.jsxs("div",{className:"flex items-center",children:[a.jsx("input",{type:"number",step:"0.1",value:A.percentage,onChange:T=>U(F,"percentage",parseFloat(T.target.value)||0),className:"w-full bg-slate-600 border border-slate-500 rounded-md px-2 py-1 text-slate-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"}),a.jsx("span",{className:"text-slate-300 ml-1 text-sm",children:"%"})]}):a.jsxs("div",{className:"text-slate-300 font-medium text-sm",children:[A.percentage,"%"]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-xs font-medium text-slate-400 mb-1",children:"Cost"}),s&&d?a.jsxs("div",{className:"flex items-center",children:[a.jsx("span",{className:"text-slate-300 mr-1 text-sm",children:"$"}),a.jsx("input",{type:"number",step:"0.01",value:A.cost,onChange:T=>U(F,"cost",parseFloat(T.target.value)||0),className:"w-full bg-slate-600 border border-slate-500 rounded-md px-2 py-1 text-slate-300 text-sm focus:outline-none focus:ring-2 focus:ring-blue-500"})]}):a.jsxs("div",{className:"text-slate-300 font-medium text-sm",children:["$",A.cost.toFixed(2)]})]})]})]})]},F))})}),a.jsx("div",{className:"text-xs text-slate-500 mt-2 text-center",children:"← Scroll horizontally to view all ingredients →"})]})]}),a.jsxs("div",{className:"flex space-x-4",children:[a.jsx(ke,{className:"bg-slate-700 hover:bg-slate-600",children:"Export Data"}),a.jsx(ke,{className:"bg-green-600 hover:bg-green-700",children:"Generate Report"}),a.jsx(ke,{className:"bg-orange-600 hover:bg-orange-700",children:"Duplicate Formula"})]}),a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6",children:[a.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-6",children:"Documents & Files"}),j.length>0&&a.jsxs("div",{className:"mb-8",children:[a.jsxs("h4",{className:"text-md font-medium text-slate-200 mb-4",children:["Existing Documents (",j.length,")"]}),a.jsx("div",{className:"space-y-2",children:j.map(A=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700 rounded-lg border border-slate-600",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[H(A.type),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-slate-200",children:A.name}),a.jsxs("div",{className:"text-xs text-slate-400",children:[B(A.size)," • Uploaded ",A.uploadDate.toLocaleDateString()," by ",A.uploader]})]})]}),a.jsx("div",{className:"flex items-center space-x-2",children:a.jsx("button",{onClick:F=>{F.stopPropagation(),s?S(A.id):console.log("Download existing file:",A.name)},className:`p-1 transition-colors ${s?"text-slate-400 hover:text-red-400":"text-slate-400 hover:text-blue-400"}`,title:s?"Delete":"Download",children:s?a.jsx(kt,{className:"h-4 w-4"}):a.jsx(Fm,{className:"h-4 w-4"})})})]},A.id))}),a.jsx("div",{className:"border-t border-slate-600 my-6"})]}),a.jsxs("div",{children:[a.jsx("h4",{className:"text-md font-medium text-slate-200 mb-4",children:"Upload New Files"}),a.jsxs("div",{onDragOver:E,onDragLeave:M,onDrop:P,onClick:()=>{var A;return(A=c.current)==null?void 0:A.click()},className:`border-2 border-dashed rounded-lg p-8 text-center cursor-pointer transition-all duration-200 ${o?"border-blue-400 bg-blue-400/10":"border-slate-600 hover:border-slate-500 hover:bg-slate-700/50"}`,children:[a.jsx("input",{type:"file",ref:c,onChange:R,multiple:!0,accept:".pdf,.doc,.docx,.txt,.csv,.xlsx,.xls,.png,.jpg,.jpeg,.gif",className:"hidden"}),a.jsx(yy,{className:"h-12 w-12 text-slate-400 mx-auto mb-4"}),a.jsx("h4",{className:"text-lg font-medium text-slate-200 mb-2",children:o?"Drop files here":"Drag & drop files here"}),a.jsx("p",{className:"text-slate-400 mb-4",children:"or click to browse files"}),a.jsx("p",{className:"text-sm text-slate-500",children:"Supports: PDF, DOC, DOCX, TXT, CSV, XLSX, XLS, PNG, JPG, JPEG, GIF"})]}),r.length>0&&a.jsxs("div",{className:"mt-6",children:[a.jsxs("h4",{className:"text-md font-medium text-slate-200 mb-3",children:["Uploaded Files (",r.length,")"]}),a.jsx("div",{className:"space-y-2",children:r.map(A=>a.jsxs("div",{className:"flex items-center justify-between p-3 bg-slate-700 rounded-lg border border-slate-600",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[H(A.type),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm font-medium text-slate-200",children:A.name}),a.jsxs("div",{className:"text-xs text-slate-400",children:[B(A.size)," • Uploaded ",A.uploadDate.toLocaleDateString()]})]})]}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("button",{onClick:F=>{F.stopPropagation(),console.log("Download file:",A.name)},className:"p-1 text-slate-400 hover:text-blue-400 transition-colors",title:"Download",children:a.jsx(Fm,{className:"h-4 w-4"})}),a.jsx("button",{onClick:F=>{F.stopPropagation(),Y(A.id)},className:"p-1 text-slate-400 hover:text-red-400 transition-colors",title:"Remove",children:a.jsx(kt,{className:"h-4 w-4"})})]})]},A.id))})]})]})]}),b&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"bg-red-100 rounded-full p-2 mr-3",children:a.jsx(fa,{className:"h-6 w-6 text-red-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Delete Formula"})]}),a.jsxs("p",{className:"text-slate-300 mb-6",children:["Are you sure you want to delete formula ",a.jsx("strong",{children:h==null?void 0:h.name}),"? This action cannot be undone."]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>N(!1),className:"px-4 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),a.jsx("button",{onClick:X,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})},`formula-${e}`)},G2=({isOpen:t,onClose:e,supplier:s})=>{const[n,r]=w.useState({supplierName:(s==null?void 0:s.supplierName)||"",supplierId:(s==null?void 0:s.supplierId)||"",supplierEmail:(s==null?void 0:s.supplierEmail)||"",supplierContact:(s==null?void 0:s.supplierContact)||"",packagingCode:(s==null?void 0:s.packagingCode)||"",standardCost:(s==null?void 0:s.standardCost)||""}),i=c=>{const{name:d,value:u}=c.target;r(h=>({...h,[d]:u}))},o=c=>{c.preventDefault(),console.log("Updated supplier data:",n),e()},l=()=>{r({supplierName:(s==null?void 0:s.supplierName)||"",supplierId:(s==null?void 0:s.supplierId)||"",supplierEmail:(s==null?void 0:s.supplierEmail)||"",supplierContact:(s==null?void 0:s.supplierContact)||"",packagingCode:(s==null?void 0:s.packagingCode)||"",standardCost:(s==null?void 0:s.standardCost)||""}),e()};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 w-full max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Edit Supplier"}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-700 rounded transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})})]}),a.jsxs("form",{onSubmit:o,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Name"}),a.jsx("input",{type:"text",name:"supplierName",value:n.supplierName,onChange:i,placeholder:"Enter supplier name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier ID"}),a.jsx("input",{type:"text",name:"supplierId",value:n.supplierId,onChange:i,placeholder:"Enter supplier ID",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Email"}),a.jsx("input",{type:"email",name:"supplierEmail",value:n.supplierEmail,onChange:i,placeholder:"Enter supplier email",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Contact"}),a.jsx("input",{type:"tel",name:"supplierContact",value:n.supplierContact,onChange:i,placeholder:"Enter contact number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Packaging Code"}),a.jsx("input",{type:"text",name:"packagingCode",value:n.packagingCode,onChange:i,placeholder:"Enter packaging code",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Standard Cost"}),a.jsx("input",{type:"number",step:"0.01",min:"0",name:"standardCost",value:n.standardCost,onChange:i,placeholder:"Enter standard cost",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:l,className:"px-4 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})]})}):null},Y2=({isOpen:t,onClose:e})=>{const[s,n]=w.useState({supplierName:"",supplierId:"",supplierEmail:"",supplierContact:"",packagingCode:"",standardCost:""}),r=l=>{const{name:c,value:d}=l.target;n(u=>({...u,[c]:d}))},i=l=>{l.preventDefault(),console.log("New supplier data:",s),n({supplierName:"",supplierId:"",supplierEmail:"",supplierContact:"",packagingCode:"",standardCost:""}),e()},o=()=>{n({supplierName:"",supplierId:"",supplierEmail:"",supplierContact:"",packagingCode:"",standardCost:""}),e()};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 w-full max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[a.jsx("h2",{className:"text-lg font-semibold text-slate-100",children:"Add New Supplier"}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-700 rounded transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})})]}),a.jsxs("form",{onSubmit:i,className:"p-6 space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Name"}),a.jsx("input",{type:"text",name:"supplierName",value:s.supplierName,onChange:r,placeholder:"Enter supplier name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier ID"}),a.jsx("input",{type:"text",name:"supplierId",value:s.supplierId,onChange:r,placeholder:"Enter supplier ID",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Email"}),a.jsx("input",{type:"email",name:"supplierEmail",value:s.supplierEmail,onChange:r,placeholder:"Enter supplier email",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Contact"}),a.jsx("input",{type:"tel",name:"supplierContact",value:s.supplierContact,onChange:r,placeholder:"Enter contact number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Packaging Code"}),a.jsx("input",{type:"text",name:"packagingCode",value:s.packagingCode,onChange:r,placeholder:"Enter packaging code",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Standard Cost"}),a.jsx("input",{type:"number",step:"0.01",min:"0",name:"standardCost",value:s.standardCost,onChange:r,placeholder:"Enter standard cost",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{className:"flex justify-end space-x-3 pt-4",children:[a.jsx("button",{type:"button",onClick:o,className:"px-4 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-4 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Add Supplier"})]})]})]})}):null},J2=({className:t="w-6 h-6"})=>a.jsx("img",{src:"/chemformation-logo.png",alt:"Chemformation Logo",className:t}),Q2=()=>{const t=nt(),[e,s]=w.useState(""),[n,r]=w.useState("all"),[i,o]=w.useState(null),[l,c]=w.useState({x:0,y:0}),[d,u]=w.useState(!1),[h,f]=w.useState(!1),[m,p]=w.useState(!1),[v,g]=w.useState(null),[x,y]=w.useState([]),[b,N]=w.useState(!0),[_,k]=w.useState(null),S=w.useRef({}),[j,C]=w.useState(!1),[E,M]=w.useState("supplierName"),[P,R]=w.useState("asc"),[Y,B]=w.useState("all"),[H,Q]=w.useState("all"),[O,U]=w.useState("supplierName"),[q,X]=w.useState("asc"),[A,F]=w.useState("all"),[T,$]=w.useState("all");w.useEffect(()=>{(async()=>{try{N(!0);const be=await w2();y(be),k(null)}catch(be){console.error("Error loading suppliers:",be),k("Failed to load suppliers")}finally{N(!1)}})()},[]),w.useEffect(()=>{const W=be=>{j&&!be.target.closest(".relative")&&C(!1)};return document.addEventListener("mousedown",W),()=>document.removeEventListener("mousedown",W)},[j]);const ne=W=>{U(W)},de=()=>{X(q==="asc"?"desc":"asc")},oe=()=>{M("supplierName"),R("asc"),B("all"),Q("all"),s(""),U("supplierName"),X("asc"),F("all"),$("all")},re=()=>{M(O),R(q),B(A),Q(T),C(!1)},ee=()=>{U(E),X(P),F(Y),$(H),C(!1)},Ct=()=>{j?ee():(U(E),X(P),F(Y),$(H),C(!0))},Ns=[...x.filter(W=>{const be=W.supplierName.toLowerCase().includes(e.toLowerCase())||W.supplierId.toLowerCase().includes(e.toLowerCase())||W.supplierEmail.toLowerCase().includes(e.toLowerCase())||W.supplierContact.toLowerCase().includes(e.toLowerCase()),$e=Y==="all"||(()=>{const cs=parseFloat(W.standardCost)||0;switch(Y){case"low":return cs<50;case"medium":return cs>=50&&cs<200;case"high":return cs>=200;default:return!0}})(),Ze=H==="all"||W.packagingCode===H;return be&&$e&&Ze})].sort((W,be)=>{let $e,Ze;switch(E){case"supplierName":$e=W.supplierName.toLowerCase(),Ze=be.supplierName.toLowerCase();break;case"supplierId":$e=W.supplierId.toLowerCase(),Ze=be.supplierId.toLowerCase();break;case"supplierEmail":$e=W.supplierEmail.toLowerCase(),Ze=be.supplierEmail.toLowerCase();break;case"standardCost":$e=parseFloat(W.standardCost)||0,Ze=parseFloat(be.standardCost)||0;break;case"packagingCode":$e=W.packagingCode.toLowerCase(),Ze=be.packagingCode.toLowerCase();break;case"supplierContact":$e=W.supplierContact.toLowerCase(),Ze=be.supplierContact.toLowerCase();break;default:$e=W.supplierName.toLowerCase(),Ze=be.supplierName.toLowerCase()}return $e<Ze?P==="asc"?-1:1:$e>Ze?P==="asc"?1:-1:0}),V=[...new Set(x.map(W=>W.packagingCode))].filter(Boolean).sort(),ue=(W,be)=>{if(!S.current[be])return;const $e=S.current[be].getBoundingClientRect(),Ze=(W.clientX-$e.left)/$e.width*100,cs=(W.clientY-$e.top)/$e.height*100;c({x:Ze,y:cs})},Ee=[{id:"all",label:"All suppliers"},{id:"assigned",label:"Assigned to me"},{id:"created",label:"Created by Me"}],Oe=W=>{g(W),f(!0)},ks=()=>{f(!1),g(null)},Be=()=>{p(!0)},si=()=>{p(!1)};return b?a.jsx(Ae,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(Nt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Xe,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Suppliers"})]})]}),a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-slate-400",children:"Loading suppliers..."})})]})}):_?a.jsx(Ae,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(Nt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Xe,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Suppliers"})]})]}),a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-red-400",children:_})})]})}):a.jsx(Ae,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(Nt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(Xe,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Suppliers"})]})]}),a.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("input",{type:"text",placeholder:"Search by Supplier ID, name, email",value:e,onChange:W=>s(W.target.value),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-80"})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{className:"p-3 bg-red-600 rounded-full hover:bg-red-500 transition-colors",children:a.jsx(J2,{className:"w-6 h-6"})}),a.jsx("button",{onClick:()=>u(!0),className:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors",title:"Upload to Dropbox",children:a.jsx("svg",{className:"w-5 h-5 text-slate-300",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})})})]})]})}),a.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex space-x-0",children:Ee.map(W=>a.jsxs("button",{ref:be=>S.current[W.id]=be,onClick:()=>r(W.id),onMouseEnter:()=>o(W.id),onMouseLeave:()=>o(null),onMouseMove:be=>ue(be,W.id),className:`relative px-6 py-2 transition-all duration-300 ease-out ${n===W.id?"bg-slate-600 text-slate-100":"bg-slate-700 text-slate-400 hover:text-slate-200 hover:bg-slate-650"} ${W.id==="all"?"rounded-l-lg":W.id==="created"?"rounded-r-lg":""}`,style:{transform:i===W.id?"scale(1.05)":"scale(1)",transition:"transform 0.2s ease-out"},children:[a.jsx("span",{className:"relative z-10 font-medium",children:W.label}),i===W.id&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-md -z-0",style:{background:`radial-gradient(circle at ${l.x}% ${l.y}%, rgba(59, 130, 246, 0.15), transparent 50%)`}})]},W.id))}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:Ct,className:"flex items-center space-x-2 p-2 border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors",children:[a.jsx(Ql,{className:"h-5 w-5 text-slate-300"}),a.jsx("span",{className:"text-sm text-slate-300",children:"Filter & Sort"}),a.jsx(_n,{className:"h-4 w-4 text-slate-300"})]}),j&&a.jsx("div",{className:"absolute right-0 mt-2 w-96 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200",children:"Sort By"}),a.jsxs("button",{onClick:de,className:"flex items-center space-x-1 px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition-colors",children:[a.jsx("span",{children:q==="asc"?"Ascending":"Descending"}),a.jsx("span",{children:q==="asc"?"↑":"↓"})]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"supplierName",label:"Supplier Name"},{key:"supplierId",label:"Supplier ID"},{key:"supplierEmail",label:"Email"},{key:"supplierContact",label:"Contact"},{key:"packagingCode",label:"Packaging Code"},{key:"standardCost",label:"Standard Cost"}].map(W=>a.jsx("button",{onClick:()=>ne(W.key),className:`text-left px-3 py-2 rounded text-sm transition-colors ${O===W.key?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:W.label},W.key))})]}),a.jsx("div",{className:"space-y-4",children:a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Cost"}),a.jsxs("select",{value:A,onChange:W=>F(W.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Costs"}),a.jsx("option",{value:"low",children:"Low (< $50)"}),a.jsx("option",{value:"medium",children:"Medium ($50 - $200)"}),a.jsx("option",{value:"high",children:"High (>= $200)"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Packaging"}),a.jsxs("select",{value:T,onChange:W=>$(W.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Packaging"}),V.map(W=>a.jsx("option",{value:W,children:W},W))]})]})]})}),a.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-slate-600",children:[a.jsx("button",{onClick:oe,className:"px-3 py-1 text-xs text-slate-400 hover:text-slate-200 transition-colors",children:"Clear All"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:ee,className:"px-4 py-2 text-sm text-slate-300 hover:text-slate-100 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:re,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Apply"})]})]})]})})]}),a.jsxs("button",{onClick:Be,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 rounded-lg hover:bg-blue-500 transition-colors",children:[a.jsx(tr,{className:"w-4 h-4 text-white"}),a.jsx("span",{className:"text-sm text-white font-medium",children:"Add Supplier"})]})]})]})}),a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"bg-slate-800 rounded-lg overflow-hidden border border-slate-700",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-slate-750 border-b border-slate-700",children:[a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Name"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier ID"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Email"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Contact"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Packaging code"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Standard Cost"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Actions"})]})}),a.jsx("tbody",{children:Ns.map((W,be)=>a.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-750 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:W.supplierName}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:W.supplierId}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:W.supplierEmail}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:W.supplierContact}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:W.packagingCode}),a.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",W.standardCost?W.standardCost.toFixed(2):"0.00"]}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:a.jsx("button",{onClick:$e=>{$e.stopPropagation(),Oe(W)},className:"p-1 hover:bg-slate-600 rounded transition-colors",title:"Edit supplier",children:a.jsx(Fh,{className:"h-4 w-4 text-slate-400 hover:text-slate-200"})})})]},`${W.supplierId}-${be}`))})]})})}),a.jsx(zh,{isOpen:d,onClose:()=>u(!1)}),a.jsx(G2,{isOpen:h,onClose:ks,supplier:v}),a.jsx(Y2,{isOpen:m,onClose:si})]})})},X2=({className:t="w-6 h-6"})=>a.jsx("img",{src:"/chemformation-logo.png",alt:"Chemformation Logo",className:t}),Z2=()=>{const t=nt(),[e,s]=w.useState(""),[n,r]=w.useState("all"),[i,o]=w.useState(null),[l,c]=w.useState({x:0,y:0}),[d,u]=w.useState(!1),[h,f]=w.useState(!1),[m,p]=w.useState(!1),[v,g]=w.useState([]),[x,y]=w.useState(!0),[b,N]=w.useState(null),_=w.useRef({}),[k,S]=w.useState(!1),[j,C]=w.useState("materialName"),[E,M]=w.useState("asc"),[P,R]=w.useState("all"),[Y,B]=w.useState("all"),[H,Q]=w.useState("all"),[O,U]=w.useState("all"),[q,X]=w.useState("materialName"),[A,F]=w.useState("asc"),[T,$]=w.useState("all"),[ne,de]=w.useState("all"),[oe,re]=w.useState("all"),[ee,Ct]=w.useState("all"),[Ue,Ns]=w.useState({supplier:"",materialName:"",manufacturer:"",casNumber:"",weightVolume:"",activityPercentage:"",density:"",viscosity:"",cost:"",supplierCost:""}),V=async()=>{try{y(!0);const L=await vy();g(L),N(null)}catch(L){console.error("Error loading materials:",L),N("Failed to load raw materials")}finally{y(!1)}};w.useEffect(()=>{V()},[]);const ue=L=>{console.log("Material added via chat:",L),V()};w.useEffect(()=>{const L=G=>{k&&!G.target.closest(".relative")&&S(!1)};return document.addEventListener("mousedown",L),()=>document.removeEventListener("mousedown",L)},[k]);const Ee=L=>{const G=by(L.materialName);t(`/raw-materials/${G}`)},Oe=L=>{X(L)},ks=()=>{F(A==="asc"?"desc":"asc")},Be=()=>{C("materialName"),M("asc"),R("all"),B("all"),Q("all"),U("all"),s(""),X("materialName"),F("asc"),$("all"),de("all"),re("all"),Ct("all")},si=()=>{C(q),M(A),R(T),B(ne),Q(oe),U(ee),S(!1)},W=()=>{X(j),F(E),$(P),de(Y),re(H),Ct(O),S(!1)},be=()=>{k?W():(X(j),F(E),$(P),de(Y),re(H),Ct(O),S(!0))},Ze=[...v.filter(L=>{const G=L.materialName.toLowerCase().includes(e.toLowerCase())||L.supplierName.toLowerCase().includes(e.toLowerCase())||L.tradeName.toLowerCase().includes(e.toLowerCase())||L.casNumber.toLowerCase().includes(e.toLowerCase())||L.manufacture.toLowerCase().includes(e.toLowerCase())||L.country.toLowerCase().includes(e.toLowerCase()),ie=P==="all"||L.supplierName===P,We=Y==="all"||L.physicalForm===Y,ni=H==="all"||L.hazardClass===H,yv=O==="all"||L.country===O;return G&&ie&&We&&ni&&yv})].sort((L,G)=>{let ie,We;switch(j){case"materialName":ie=L.materialName.toLowerCase(),We=G.materialName.toLowerCase();break;case"supplierName":ie=L.supplierName.toLowerCase(),We=G.supplierName.toLowerCase();break;case"supplierCost":ie=parseFloat(L.supplierCost)||0,We=parseFloat(G.supplierCost)||0;break;case"physicalForm":ie=L.physicalForm.toLowerCase(),We=G.physicalForm.toLowerCase();break;case"hazardClass":ie=L.hazardClass.toLowerCase(),We=G.hazardClass.toLowerCase();break;case"country":ie=L.country.toLowerCase(),We=G.country.toLowerCase();break;case"purity":ie=L.purity.toLowerCase(),We=G.purity.toLowerCase();break;case"casNumber":ie=L.casNumber.toLowerCase(),We=G.casNumber.toLowerCase();break;default:ie=L.materialName.toLowerCase(),We=G.materialName.toLowerCase()}return ie<We?E==="asc"?-1:1:ie>We?E==="asc"?1:-1:0}),cs=[...new Set(v.map(L=>L.supplierName))].sort(),ic=[...new Set(v.map(L=>L.physicalForm))].filter(Boolean).sort(),ac=[...new Set(v.map(L=>L.hazardClass))].filter(Boolean).sort(),oc=[...new Set(v.map(L=>L.country))].filter(Boolean).sort(),lc=(L,G)=>{if(!_.current[G])return;const ie=_.current[G].getBoundingClientRect(),We=(L.clientX-ie.left)/ie.width*100,ni=(L.clientY-ie.top)/ie.height*100;c({x:We,y:ni})},cc=[{id:"all",label:"All Raw Materials"},{id:"assigned",label:"Assigned to me"},{id:"created",label:"Created by Me"}],Et=(L,G)=>{Ns(ie=>({...ie,[L]:G}))},dc=()=>{f(!0)},uc=()=>{p(!0)},D=()=>{console.log("Creating new material:",Ue),Ns({supplier:"",materialName:"",manufacturer:"",casNumber:"",weightVolume:"",activityPercentage:"",density:"",viscosity:"",cost:"",supplierCost:""}),p(!1),f(!1)},te=()=>{p(!1),f(!1),Ns({supplier:"",materialName:"",manufacturer:"",casNumber:"",weightVolume:"",activityPercentage:"",density:"",viscosity:"",cost:"",supplierCost:""})};return x?a.jsx(Ae,{onMaterialAdded:ue,children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(Nt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(vs,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Raw Materials"})]})]}),a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-slate-400",children:"Loading raw materials..."})})]})}):b?a.jsx(Ae,{onMaterialAdded:ue,children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(Nt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(vs,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Raw Materials"})]})]}),a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsx("div",{className:"text-red-400",children:b})})]})}):a.jsx(Ae,{onMaterialAdded:ue,children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(Nt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(vs,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Raw Materials"})]})]}),a.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex items-center space-x-4",children:a.jsx("input",{type:"text",placeholder:"Search by Txn Id, Material Name, CAS Nu...",value:e,onChange:L=>s(L.target.value),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-80"})}),a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{className:"p-3 bg-red-600 rounded-full hover:bg-red-500 transition-colors",children:a.jsx(X2,{className:"w-6 h-6"})}),a.jsx("button",{onClick:()=>u(!0),className:"p-2 bg-slate-700 rounded-lg hover:bg-slate-600 transition-colors",title:"Upload to Dropbox",children:a.jsx("svg",{className:"w-5 h-5 text-slate-300",viewBox:"0 0 24 24",fill:"currentColor",children:a.jsx("path",{d:"M6 2L12 6L6 10L0 6L6 2ZM18 2L24 6L18 10L12 6L18 2ZM0 14L6 10L12 14L6 18L0 14ZM18 10L24 14L18 18L12 14L18 10ZM6 21L12 17L18 21L12 24L6 21Z"})})})]})]})}),a.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsx("div",{className:"flex space-x-0",children:cc.map(L=>a.jsxs("button",{ref:G=>_.current[L.id]=G,onClick:()=>r(L.id),onMouseEnter:()=>o(L.id),onMouseLeave:()=>o(null),onMouseMove:G=>lc(G,L.id),className:`relative px-6 py-2 transition-all duration-300 ease-out ${n===L.id?"bg-slate-600 text-slate-100":"bg-slate-700 text-slate-400 hover:text-slate-200 hover:bg-slate-650"} ${L.id==="all"?"rounded-l-lg":L.id==="created"?"rounded-r-lg":""}`,style:{transform:i===L.id?"scale(1.05)":"scale(1)",transition:"transform 0.2s ease-out"},children:[a.jsx("span",{className:"relative z-10 font-medium",children:L.label}),i===L.id&&a.jsx("div",{className:"absolute inset-0 bg-gradient-to-r from-blue-500/10 to-purple-500/10 rounded-md -z-0",style:{background:`radial-gradient(circle at ${l.x}% ${l.y}%, rgba(59, 130, 246, 0.15), transparent 50%)`}})]},L.id))}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:be,className:"flex items-center space-x-2 p-2 border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors",children:[a.jsx(Ql,{className:"h-5 w-5 text-slate-300"}),a.jsx("span",{className:"text-sm text-slate-300",children:"Filter & Sort"}),a.jsx(_n,{className:"h-4 w-4 text-slate-300"})]}),k&&a.jsx("div",{className:"absolute right-0 mt-2 w-96 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200",children:"Sort By"}),a.jsxs("button",{onClick:ks,className:"flex items-center space-x-1 px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition-colors",children:[a.jsx("span",{children:A==="asc"?"Ascending":"Descending"}),a.jsx("span",{children:A==="asc"?"↑":"↓"})]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"materialName",label:"Material Name"},{key:"supplierName",label:"Supplier"},{key:"supplierCost",label:"Cost"},{key:"physicalForm",label:"Physical Form"},{key:"hazardClass",label:"Hazard Class"},{key:"country",label:"Country"},{key:"purity",label:"Purity"},{key:"casNumber",label:"CAS Number"}].map(L=>a.jsx("button",{onClick:()=>Oe(L.key),className:`text-left px-3 py-2 rounded text-sm transition-colors ${q===L.key?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:L.label},L.key))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Supplier"}),a.jsxs("select",{value:T,onChange:L=>$(L.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Suppliers"}),cs.map(L=>a.jsx("option",{value:L,children:L},L))]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Form"}),a.jsxs("select",{value:ne,onChange:L=>de(L.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Forms"}),ic.map(L=>a.jsx("option",{value:L,children:L},L))]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Hazard"}),a.jsxs("select",{value:oe,onChange:L=>re(L.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Hazard Classes"}),ac.map(L=>a.jsx("option",{value:L,children:L},L))]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Country"}),a.jsxs("select",{value:ee,onChange:L=>Ct(L.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Countries"}),oc.map(L=>a.jsx("option",{value:L,children:L},L))]})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center mt-6 pt-4 border-t border-slate-600",children:[a.jsx("button",{onClick:Be,className:"px-3 py-1 text-xs text-slate-400 hover:text-slate-200 transition-colors",children:"Clear All"}),a.jsxs("div",{className:"flex space-x-2",children:[a.jsx("button",{onClick:W,className:"px-4 py-2 text-sm text-slate-300 hover:text-slate-100 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:si,className:"px-4 py-2 bg-blue-600 text-white text-sm rounded hover:bg-blue-700 transition-colors",children:"Apply"})]})]})]})})]}),a.jsxs(ke,{onClick:dc,className:"bg-blue-600 hover:bg-blue-700 text-white px-4 py-2 rounded-lg flex items-center space-x-2",children:[a.jsx(tr,{className:"w-4 h-4"}),a.jsx("span",{children:"Add Material"})]})]})]})}),a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"bg-slate-800 rounded-lg overflow-hidden border border-slate-700",children:a.jsxs("table",{className:"w-full",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"bg-slate-750 border-b border-slate-700",children:[a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Material Name"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Name"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Trade Name"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"CAS Number"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Manufacture"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Country"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-semibold text-slate-200",children:"Supplier Cost"})]})}),a.jsx("tbody",{children:Ze.map((L,G)=>a.jsxs("tr",{onClick:()=>Ee(L),className:"border-b border-slate-700 hover:bg-slate-750 transition-colors cursor-pointer",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-blue-400 hover:text-blue-300 cursor-pointer",children:L.materialName}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:L.supplierName}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:L.tradeName}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:L.casNumber}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:L.manufacture}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300",children:L.country}),a.jsxs("td",{className:"px-6 py-4 text-sm text-slate-300",children:["$",L.supplierCost?L.supplierCost.toFixed(2):"0.00"]})]},`${L.id}-${G}`))})]})})}),a.jsx(zh,{isOpen:d,onClose:()=>u(!1)}),h&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-slate-800 rounded-lg shadow-xl max-w-4xl w-full mx-4 max-h-[90vh] overflow-y-auto border border-slate-700",children:[a.jsxs("div",{className:"bg-blue-600 text-white px-6 py-4 rounded-t-lg flex items-center justify-between",children:[a.jsx("h2",{className:"text-xl font-semibold",children:"Raw Materials"}),a.jsx("button",{onClick:te,className:"text-white hover:text-slate-200 transition-colors",children:a.jsx(kt,{className:"h-6 w-6"})})]}),a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Supplier *"}),a.jsx("input",{type:"text",value:Ue.supplier,onChange:L=>Et("supplier",L.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter supplier name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Material Name *"}),a.jsx("input",{type:"text",value:Ue.materialName,onChange:L=>Et("materialName",L.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter material name"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Manufacturer"}),a.jsx("input",{type:"text",value:Ue.manufacturer,onChange:L=>Et("manufacturer",L.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter manufacturer"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"CAS Number"}),a.jsx("input",{type:"text",value:Ue.casNumber,onChange:L=>Et("casNumber",L.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Enter CAS number"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Weight/Volume (lbs/gallon)"}),a.jsx("input",{type:"number",step:"0.01",value:Ue.weightVolume,onChange:L=>Et("weightVolume",L.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"% Activity"}),a.jsx("input",{type:"number",step:"0.1",value:Ue.activityPercentage,onChange:L=>Et("activityPercentage",L.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Density"}),a.jsx("input",{type:"number",step:"0.01",value:Ue.density,onChange:L=>Et("density",L.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Viscosity"}),a.jsx("input",{type:"text",value:Ue.viscosity,onChange:L=>Et("viscosity",L.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"Text"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Cost ($USD)"}),a.jsx("input",{type:"number",step:"0.0001",value:Ue.cost,onChange:L=>Et("cost",L.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.0000"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Supplier Cost"}),a.jsx("input",{type:"number",step:"0.01",value:Ue.supplierCost,onChange:L=>Et("supplierCost",L.target.value),className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-blue-500",placeholder:"0.00"})]})]})]}),a.jsx("div",{className:"mt-8 flex justify-end",children:a.jsx("button",{onClick:uc,className:"px-6 py-2 bg-orange-500 hover:bg-orange-600 text-white rounded-md font-medium transition-colors",children:"SUBMIT"})})]})]})}),m&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-70 flex items-center justify-center z-60",children:a.jsx("div",{className:"bg-slate-800 rounded-lg shadow-xl max-w-md w-full mx-4 border border-slate-700",children:a.jsxs("div",{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-3 mb-4",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-600 bg-opacity-20 rounded-full flex items-center justify-center",children:a.jsx(py,{className:"h-6 w-6 text-blue-400"})}),a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"RAW MATERIALS"})]}),a.jsx("p",{className:"text-slate-300 mb-6",children:"Shall we go ahead and create this transaction?"}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:te,className:"px-4 py-2 text-slate-400 hover:text-slate-200 font-medium transition-colors",children:"Cancel"}),a.jsx("button",{onClick:D,className:"px-4 py-2 bg-blue-600 hover:bg-blue-700 text-white rounded-md font-medium transition-colors",children:"CONFIRM"})]})]})})})]})})},ek=({isOpen:t,onClose:e,onSave:s,onDelete:n,material:r})=>{const[i,o]=w.useState({materialName:"",supplierName:"",manufacture:"",tradeName:"",casNumber:"",weightVolume:"",density:"",supplierCost:"",country:"",description:"",physicalForm:"",purity:"",storageConditions:"",hazardClass:"",shelfLife:""}),[l,c]=w.useState(!1);w.useEffect(()=>{r&&o({materialName:r.materialName||"",supplierName:r.supplierName||"",manufacture:r.manufacture||"",tradeName:r.tradeName||"",casNumber:r.casNumber||"",weightVolume:r.weightVolume||"",density:r.density||"",supplierCost:r.supplierCost||"",country:r.country||"",description:r.description||"",physicalForm:r.physicalForm||"",purity:r.purity||"",storageConditions:r.storageConditions||"",hazardClass:r.hazardClass||"",shelfLife:r.shelfLife||""})},[r]);const d=m=>{const{name:p,value:v}=m.target;o(g=>({...g,[p]:v}))},u=m=>{m.preventDefault(),s?s(i):(console.log("Updated material data:",i),e())},h=()=>{n&&r&&(n(r.id),c(!1),e())},f=()=>{r&&o({materialName:r.materialName||"",supplierName:r.supplierName||"",manufacture:r.manufacture||"",tradeName:r.tradeName||"",casNumber:r.casNumber||"",weightVolume:r.weightVolume||"",density:r.density||"",supplierCost:r.supplierCost||"",country:r.country||"",description:r.description||"",physicalForm:r.physicalForm||"",purity:r.purity||"",storageConditions:r.storageConditions||"",hazardClass:r.hazardClass||"",shelfLife:r.shelfLife||""}),c(!1),e()};return t?a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 w-full max-w-5xl mx-4 max-h-[90vh] overflow-y-auto",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:"Edit Raw Material"}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-slate-700 rounded transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})})]}),a.jsxs("form",{onSubmit:u,className:"p-6",children:[a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-3 gap-6",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Basic Information"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Material Name *"}),a.jsx("input",{type:"text",name:"materialName",value:i.materialName,onChange:d,placeholder:"Enter material name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",required:!0})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Trade Name"}),a.jsx("input",{type:"text",name:"tradeName",value:i.tradeName,onChange:d,placeholder:"Enter trade name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Name"}),a.jsx("input",{type:"text",name:"supplierName",value:i.supplierName,onChange:d,placeholder:"Enter supplier name",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Manufacturer"}),a.jsx("input",{type:"text",name:"manufacture",value:i.manufacture,onChange:d,placeholder:"Enter manufacturer",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Country"}),a.jsx("input",{type:"text",name:"country",value:i.country,onChange:d,placeholder:"Enter country",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Technical Properties"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"CAS Number"}),a.jsx("input",{type:"text",name:"casNumber",value:i.casNumber,onChange:d,placeholder:"Enter CAS number",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Physical Form"}),a.jsx("input",{type:"text",name:"physicalForm",value:i.physicalForm,onChange:d,placeholder:"e.g., Liquid, Powder, Crystals",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Purity"}),a.jsx("input",{type:"text",name:"purity",value:i.purity,onChange:d,placeholder:"e.g., 99.5%, Technical Grade",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Weight/Volume (lbs/gallon)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",name:"weightVolume",value:i.weightVolume,onChange:d,placeholder:"0.00",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Density"}),a.jsx("input",{type:"number",step:"0.01",min:"0",name:"density",value:i.density,onChange:d,placeholder:"0.00",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Supplier Cost ($)"}),a.jsx("input",{type:"number",step:"0.01",min:"0",name:"supplierCost",value:i.supplierCost,onChange:d,placeholder:"0.00",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Safety & Notes"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Hazard Class"}),a.jsx("input",{type:"text",name:"hazardClass",value:i.hazardClass,onChange:d,placeholder:"e.g., Corrosive, Non-hazardous",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Shelf Life"}),a.jsx("input",{type:"text",name:"shelfLife",value:i.shelfLife,onChange:d,placeholder:"e.g., 24 months, 5 years",className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Storage Conditions"}),a.jsx("textarea",{name:"storageConditions",value:i.storageConditions,onChange:d,placeholder:"Enter storage requirements...",rows:3,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-300 mb-2",children:"Description & Notes"}),a.jsx("textarea",{name:"description",value:i.description,onChange:d,placeholder:"Enter detailed description, usage notes, or special handling instructions...",rows:5,className:"w-full px-3 py-2 bg-slate-700 border border-slate-600 rounded-md text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent resize-none"}),a.jsxs("div",{className:"mt-1 text-xs text-slate-400",children:[i.description.length," characters"]})]})]})]}),a.jsxs("div",{className:"flex justify-between items-center pt-6 mt-6 border-t border-slate-700",children:[a.jsx("div",{children:n&&a.jsxs("button",{type:"button",onClick:()=>c(!0),className:"px-6 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors flex items-center space-x-2",children:[a.jsx(fa,{className:"h-4 w-4"}),a.jsx("span",{children:"Delete Material"})]})}),a.jsxs("div",{className:"flex space-x-3",children:[a.jsx("button",{type:"button",onClick:f,className:"px-6 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),a.jsx("button",{type:"submit",className:"px-6 py-2 bg-blue-600 text-white rounded-md hover:bg-blue-700 transition-colors",children:"Save Changes"})]})]})]}),l&&a.jsx("div",{className:"fixed inset-0 bg-black bg-opacity-75 flex items-center justify-center z-50",children:a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 max-w-md mx-4",children:[a.jsxs("div",{className:"flex items-center mb-4",children:[a.jsx("div",{className:"bg-red-100 rounded-full p-2 mr-3",children:a.jsx(fa,{className:"h-6 w-6 text-red-600"})}),a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Delete Material"})]}),a.jsxs("p",{className:"text-slate-300 mb-6",children:["Are you sure you want to delete ",a.jsx("strong",{children:r==null?void 0:r.materialName}),"? This action cannot be undone."]}),a.jsxs("div",{className:"flex justify-end space-x-3",children:[a.jsx("button",{onClick:()=>c(!1),className:"px-4 py-2 text-slate-300 hover:text-slate-100 hover:bg-slate-700 rounded-md transition-colors",children:"Cancel"}),a.jsx("button",{onClick:h,className:"px-4 py-2 bg-red-600 text-white rounded-md hover:bg-red-700 transition-colors",children:"Delete"})]})]})})]})}):null},tk=()=>{const t=nt(),{materialId:e}=Mx(),[s,n]=w.useState(!1),[r,i]=w.useState(null),[o,l]=w.useState(!0),[c,d]=w.useState(null);if(w.useEffect(()=>{(async()=>{try{l(!0);const g=(await vy()).find(x=>by(x.materialName)===e);g?i(g):d("Material not found")}catch(v){console.error("Error loading material:",v),d("Failed to load material")}finally{l(!1)}})()},[e]),o)return a.jsx(Ae,{children:a.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:a.jsx("div",{className:"text-center",children:a.jsx("div",{className:"text-slate-400",children:"Loading material..."})})})});if(c||!r)return a.jsx(Ae,{children:a.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx("h2",{className:"text-2xl font-bold text-slate-100 mb-4",children:c||"Material Not Found"}),a.jsx(ke,{onClick:()=>t("/raw-materials"),children:"Back to Raw Materials"})]})})});const u=()=>{n(!0)},h=()=>{n(!1)},f=async p=>{try{const v=await g2(r.id,p);v&&i(v),n(!1)}catch(v){console.error("Error updating material:",v)}},m=async p=>{try{await j2(p)?t("/raw-materials"):console.error("Failed to delete material")}catch(v){console.error("Error deleting material:",v)}};return a.jsx(Ae,{children:a.jsxs("div",{className:"min-h-screen bg-slate-900 p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-8",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsxs(ke,{variant:"secondary",onClick:()=>t("/raw-materials"),className:"flex items-center space-x-2",children:[a.jsx(Nt,{className:"h-4 w-4"}),a.jsx("span",{children:"Back to Raw Materials"})]}),a.jsx("h1",{className:"text-2xl font-bold text-slate-100",children:"Raw Material Details"})]}),a.jsxs(ke,{onClick:u,className:"flex items-center space-x-2",children:[a.jsx(Fh,{className:"h-4 w-4"}),a.jsx("span",{children:"Edit Material"})]})]}),a.jsxs("div",{className:"max-w-6xl mx-auto space-y-6",children:[a.jsx("div",{className:"bg-gradient-to-r from-slate-800 to-slate-700 rounded-lg border border-slate-600 p-8 shadow-xl",children:a.jsxs("div",{className:"flex items-start justify-between",children:[a.jsxs("div",{children:[a.jsx("h2",{className:"text-4xl font-bold text-slate-100 mb-3",children:r.materialName}),a.jsxs("div",{className:"flex items-center space-x-4 mb-4",children:[a.jsx("span",{className:"px-3 py-1 bg-blue-600 text-white text-sm font-medium rounded-full",children:r.tradeName}),a.jsxs("span",{className:"px-3 py-1 bg-slate-600 text-slate-200 text-sm rounded-full",children:["CAS: ",r.casNumber]})]})]}),a.jsxs("div",{className:"text-right",children:[a.jsx("p",{className:"text-sm text-slate-400 mb-1",children:"Supplier Cost"}),a.jsxs("p",{className:"text-3xl font-bold text-green-400",children:["$",r.supplierCost?r.supplierCost.toFixed(2):"0.00"]})]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 shadow-lg",children:[a.jsxs("h3",{className:"text-xl font-semibold text-slate-200 mb-6 flex items-center",children:[a.jsx("div",{className:"w-2 h-6 bg-blue-500 rounded mr-3"}),"Technical Information"]}),a.jsx("div",{className:"space-y-6",children:a.jsx("div",{className:"grid grid-cols-1 gap-4",children:a.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-3",children:"Chemical Properties"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Physical Form:"}),a.jsx("span",{className:"text-slate-200",children:r.physicalForm})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Purity:"}),a.jsx("span",{className:"text-slate-200",children:r.purity})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Weight/Volume:"}),a.jsxs("span",{className:"text-slate-200",children:[r.weightVolume," lbs/gallon"]})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Density:"}),a.jsx("span",{className:"text-slate-200",children:r.density})]})]})]})})})]}),a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 shadow-lg",children:[a.jsxs("h3",{className:"text-xl font-semibold text-slate-200 mb-6 flex items-center",children:[a.jsx("div",{className:"w-2 h-6 bg-green-500 rounded mr-3"}),"Supplier & Safety"]}),a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-3",children:"Supplier Information"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Supplier:"}),a.jsx("span",{className:"text-slate-200",children:r.supplierName})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Manufacturer:"}),a.jsx("span",{className:"text-slate-200",children:r.manufacture})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Country:"}),a.jsx("span",{className:"text-slate-200",children:r.country})]})]})]}),a.jsxs("div",{className:"bg-slate-700/30 rounded-lg p-4",children:[a.jsx("h4",{className:"text-sm font-semibold text-slate-300 mb-3",children:"Safety & Storage"}),a.jsxs("div",{className:"space-y-2 text-sm",children:[a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Hazard Class:"}),a.jsx("span",{className:"text-slate-200",children:r.hazardClass})]}),a.jsxs("div",{className:"flex justify-between",children:[a.jsx("span",{className:"text-slate-400",children:"Shelf Life:"}),a.jsx("span",{className:"text-slate-200",children:r.shelfLife})]})]}),a.jsxs("div",{className:"mt-3 pt-3 border-t border-slate-600",children:[a.jsx("p",{className:"text-xs text-slate-400",children:"Storage Conditions:"}),a.jsx("p",{className:"text-sm text-slate-200 mt-1",children:r.storageConditions})]})]})]})]})]}),a.jsxs("div",{className:"bg-slate-800 rounded-lg border border-slate-700 p-6 shadow-lg",children:[a.jsxs("div",{className:"flex items-center mb-6",children:[a.jsx("div",{className:"w-2 h-6 bg-purple-500 rounded mr-3"}),a.jsx("h3",{className:"text-xl font-semibold text-slate-200",children:"Description & Applications"})]}),a.jsx("div",{className:"bg-slate-700/30 rounded-lg border border-slate-600/50 p-6",children:a.jsx("p",{className:"text-slate-200 leading-relaxed",children:r.description})})]})]}),a.jsx(ek,{isOpen:s,onClose:h,onSave:f,onDelete:m,material:r})]})})},sk=({isOpen:t,onClose:e,onSave:s,currentUserEmail:n,isAdminReset:r=!1,targetUserName:i=""})=>{const[o,l]=w.useState({oldPassword:"",newPassword:"",confirmPassword:""}),[c,d]=w.useState({old:!1,new:!1,confirm:!1}),[u,h]=w.useState({}),f=(x,y)=>{l(b=>({...b,[x]:y})),u[x]&&h(b=>({...b,[x]:""}))},m=x=>{d(y=>({...y,[x]:!y[x]}))},p=()=>{const x={};return!r&&!o.oldPassword&&(x.oldPassword="Current password is required"),o.newPassword?o.newPassword.length<6&&(x.newPassword="New password must be at least 6 characters"):x.newPassword="New password is required",o.confirmPassword?o.newPassword!==o.confirmPassword&&(x.confirmPassword="Passwords do not match"):x.confirmPassword="Please confirm your new password",!r&&o.oldPassword===o.newPassword&&(x.newPassword="New password must be different from current password"),h(x),Object.keys(x).length===0},v=()=>{p()&&s({email:n,oldPassword:o.oldPassword,newPassword:o.newPassword})},g=()=>{l({oldPassword:"",newPassword:"",confirmPassword:""}),h({}),d({old:!1,new:!1,confirm:!1}),e()};return t?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:g}),a.jsxs("div",{className:"relative bg-slate-800 rounded-lg shadow-xl w-full max-w-md mx-4 border border-slate-700",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-slate-700",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"w-10 h-10 bg-blue-600 rounded-lg flex items-center justify-center",children:a.jsx(Rh,{className:"h-5 w-5 text-white"})}),a.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:r?`Reset Password for ${i}`:"Change Password"})]}),a.jsx("button",{onClick:g,className:"p-1 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-slate-400"})})]}),a.jsxs("div",{className:"p-6 space-y-4",children:[!r&&a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Current Password *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:c.old?"text":"password",value:o.oldPassword,onChange:x=>f("oldPassword",x.target.value),placeholder:"Enter your current password",className:`w-full px-3 py-2 pr-10 bg-slate-700 border rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.oldPassword?"border-red-500":"border-slate-600"}`}),a.jsx("button",{type:"button",onClick:()=>m("old"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200",children:c.old?a.jsx(Oo,{className:"h-4 w-4"}):a.jsx(Ro,{className:"h-4 w-4"})})]}),u.oldPassword&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.oldPassword})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"New Password *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:c.new?"text":"password",value:o.newPassword,onChange:x=>f("newPassword",x.target.value),placeholder:"Enter your new password",className:`w-full px-3 py-2 pr-10 bg-slate-700 border rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.newPassword?"border-red-500":"border-slate-600"}`}),a.jsx("button",{type:"button",onClick:()=>m("new"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200",children:c.new?a.jsx(Oo,{className:"h-4 w-4"}):a.jsx(Ro,{className:"h-4 w-4"})})]}),u.newPassword&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.newPassword}),a.jsx("p",{className:"text-slate-500 text-xs mt-1",children:"Minimum 6 characters"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-slate-200 mb-2",children:"Confirm New Password *"}),a.jsxs("div",{className:"relative",children:[a.jsx("input",{type:c.confirm?"text":"password",value:o.confirmPassword,onChange:x=>f("confirmPassword",x.target.value),placeholder:"Confirm your new password",className:`w-full px-3 py-2 pr-10 bg-slate-700 border rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent ${u.confirmPassword?"border-red-500":"border-slate-600"}`}),a.jsx("button",{type:"button",onClick:()=>m("confirm"),className:"absolute right-3 top-1/2 transform -translate-y-1/2 text-slate-400 hover:text-slate-200",children:c.confirm?a.jsx(Oo,{className:"h-4 w-4"}):a.jsx(Ro,{className:"h-4 w-4"})})]}),u.confirmPassword&&a.jsx("p",{className:"text-red-400 text-xs mt-1",children:u.confirmPassword})]})]}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-slate-700",children:[a.jsx(ke,{variant:"secondary",onClick:g,className:"bg-slate-700 hover:bg-slate-600 text-slate-200",children:"Cancel"}),a.jsx(ke,{onClick:v,className:"bg-blue-600 hover:bg-blue-500 text-white",children:r?"Reset Password":"Change Password"})]})]})]}):null},nk=({isOpen:t,onClose:e,user:s,onSave:n,onDelete:r,currentUserRole:i,onChangePassword:o})=>{const[l,c]=w.useState({name:"",email:"",contact:"",role:"",credentials:"",appAccess:[]}),[d,u]=w.useState(!1),h=_=>_==="NSight Admin"?[{id:"developer-mode",name:"Developer Mode",icon:ti},{id:"existing-company-mode",name:"Existing Company Mode",icon:er}]:[{id:"formulas",name:"Formulas",icon:ws},{id:"raw-materials",name:"Raw Materials",icon:vs},{id:"suppliers",name:"Suppliers",icon:Xe}],f=_=>{switch(_){case"Capacity Admin":return"admin/secure pass";case"NSight Admin":return"nsight-admin/enterprise pass";case"Employee":default:return"user/temporary pass"}},m=_=>{switch(_){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}};w.useEffect(()=>{s&&c({name:s.name||"",email:s.email||"",contact:s.contact||"",role:s.role||"Employee",credentials:s.credentials||f(s.role),appAccess:s.appAccess||[]})},[s]),w.useEffect(()=>{if(l.role&&s){const _=m(l.role),k=f(l.role);(JSON.stringify(l.appAccess)!==JSON.stringify(_)||l.credentials!==k)&&c(S=>({...S,appAccess:_,credentials:k}))}},[l.role,s]);const p=(_,k)=>{c(S=>({...S,[_]:k}))},v=_=>{c(k=>({...k,appAccess:k.appAccess.includes(_)?k.appAccess.filter(S=>S!==_):[...k.appAccess,_]}))},g=()=>{n({...s,...l}),e()},x=()=>{window.confirm(`Are you sure you want to delete ${s.name}? This action cannot be undone.`)&&(r(s.id),e())},y=()=>{u(!0)},b=()=>{u(!1)},N=async _=>{try{const k=await o({email:s.email,newPassword:_.newPassword,isAdminReset:!0});k&&k.success?(alert(`Password changed successfully for ${s.name}!`),u(!1)):alert(`Error: ${(k==null?void 0:k.error)||"Unknown error occurred"}`)}catch(k){console.error("Password change error:",k),alert("Error: Failed to change password. Please try again.")}};return t?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:e}),a.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-4xl mx-4 border border-gray-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-slate-700",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-slate-100",children:"Edit User"}),a.jsx("button",{onClick:e,className:"p-1 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-gray-400 dark:text-slate-400"})})]}),a.jsxs("div",{className:"p-6",children:[i==="Capacity Admin"&&a.jsx("div",{className:"pb-6 border-b border-slate-700 mb-6",children:a.jsxs(ke,{onClick:y,className:"bg-purple-600 hover:bg-purple-500 text-white flex items-center justify-center space-x-2 py-3 px-6",children:[a.jsx(Rh,{className:"w-4 h-4"}),a.jsxs("span",{children:["Change Password for ",s==null?void 0:s.name]})]})}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-slate-100 mb-4",children:"Basic Information"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Name"}),a.jsx("input",{type:"text",value:l.name,onChange:_=>p("name",_.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Email"}),a.jsx("input",{type:"email",value:l.email,onChange:_=>p("email",_.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Contact"}),a.jsx("input",{type:"text",value:l.contact,onChange:_=>p("contact",_.target.value),placeholder:"Phone number",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-slate-100 mb-4",children:"Role & Permissions"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Role & Access Level"}),a.jsxs("select",{value:l.role,onChange:_=>p("role",_.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:[a.jsx("option",{value:"Employee",className:"bg-white dark:bg-slate-700 text-gray-900 dark:text-slate-100",children:"Employee"}),a.jsx("option",{value:"Capacity Admin",className:"bg-white dark:bg-slate-700 text-gray-900 dark:text-slate-100",children:"Capacity Admin"}),a.jsx("option",{value:"NSight Admin",className:"bg-white dark:bg-slate-700 text-gray-900 dark:text-slate-100",children:"NSight Admin"})]}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:["Credentials: ",l.credentials]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-3",children:"App Access"}),a.jsx("div",{className:"space-y-3",children:h(l.role).map(_=>{const k=_.icon,S=l.appAccess.includes(_.id);return a.jsxs("button",{onClick:()=>v(_.id),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-all duration-200 ${S?"bg-blue-600 border-blue-500 text-white":"bg-slate-700 border-slate-600 text-slate-300 hover:bg-slate-600"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-md flex items-center justify-center ${S?"bg-blue-500":"bg-slate-600"}`,children:a.jsx(k,{className:"w-4 h-4"})}),a.jsx("span",{className:"font-medium",children:_.name})]}),S&&a.jsx(Dh,{className:"w-5 h-5"})]},_.id)})})]})]})]})]}),a.jsxs("div",{className:"flex items-center justify-between p-6 border-t border-gray-200 dark:border-slate-700",children:[a.jsxs(ke,{onClick:x,className:"bg-red-600 hover:bg-red-500 text-white flex items-center space-x-2",children:[a.jsx(fa,{className:"w-4 h-4"}),a.jsx("span",{children:"Delete User"})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(ke,{variant:"secondary",onClick:e,className:"bg-slate-700 hover:bg-slate-600 text-slate-200",children:"Cancel"}),a.jsx(ke,{onClick:g,className:"bg-blue-600 hover:bg-blue-500 text-white",children:"Save Changes"})]})]})]}),a.jsx(sk,{isOpen:d,onClose:b,onSave:N,currentUserEmail:s==null?void 0:s.email,isAdminReset:!0,targetUserName:s==null?void 0:s.name})]}):null},rk=({isOpen:t,onClose:e,onSave:s})=>{const[n,r]=w.useState({name:"",email:"",contact:"",role:"Employee",credentials:"user/temporary pass",appAccess:["formulas"],password:""}),i=[{value:"Employee",label:"Employee",credentials:"user/temporary pass"},{value:"Capacity Admin",label:"Capacity Admin",credentials:"admin/secure pass"},{value:"NSight Admin",label:"NSight Admin",credentials:"nsight-admin/enterprise pass"}],o=m=>m==="NSight Admin"?[{id:"developer-mode",name:"Developer Mode",icon:ti},{id:"existing-company-mode",name:"Existing Company Mode",icon:er}]:[{id:"formulas",name:"Formulas",icon:ws},{id:"raw-materials",name:"Raw Materials",icon:vs},{id:"suppliers",name:"Suppliers",icon:Xe}],l=m=>{switch(m){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}},c=m=>{switch(m){case"Capacity Admin":return"admin/secure pass";case"NSight Admin":return"nsight-admin/enterprise pass";case"Employee":default:return"user/temporary pass"}},d=(m,p)=>{r(v=>{const g={...v,[m]:p};return m==="role"&&(g.appAccess=l(p),g.credentials=c(p)),g})},u=m=>{r(p=>({...p,appAccess:p.appAccess.includes(m)?p.appAccess.filter(v=>v!==m):[...p.appAccess,m]}))},h=()=>{if(!n.name.trim()||!n.email.trim()){alert("Name and email are required");return}if(!n.password.trim()){alert("Password is required");return}if(n.password.length<6){alert("Password must be at least 6 characters long");return}const m={id:Date.now(),name:n.name.trim(),email:n.email.trim(),contact:n.contact.trim(),role:n.role,credentials:n.credentials,appAccess:n.appAccess,status:"Active",lastLogin:"Never",password:n.password.trim()};s(m),r({name:"",email:"",contact:"",role:"Employee",credentials:"user/temporary pass",appAccess:["formulas"],password:""}),e()},f=()=>{r({name:"",email:"",contact:"",role:"Employee",credentials:"user/temporary pass",appAccess:["formulas"],password:""}),e()};return t?a.jsxs("div",{className:"fixed inset-0 z-50 flex items-center justify-center",children:[a.jsx("div",{className:"absolute inset-0 bg-black bg-opacity-50 backdrop-blur-sm",onClick:f}),a.jsxs("div",{className:"relative bg-white dark:bg-slate-800 rounded-lg shadow-xl w-full max-w-4xl mx-4 border border-gray-200 dark:border-slate-700",children:[a.jsxs("div",{className:"flex items-center justify-between p-6 border-b border-gray-200 dark:border-slate-700",children:[a.jsx("h2",{className:"text-xl font-semibold text-gray-900 dark:text-slate-100",children:"Add User"}),a.jsx("button",{onClick:f,className:"p-1 hover:bg-gray-100 dark:hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(kt,{className:"h-5 w-5 text-gray-400 dark:text-slate-400"})})]}),a.jsx("div",{className:"p-6",children:a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-8",children:[a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-slate-100 mb-4",children:"Basic Information"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Name *"}),a.jsx("input",{type:"text",value:n.name,onChange:m=>d("name",m.target.value),placeholder:"Enter full name",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Email *"}),a.jsx("input",{type:"email",value:n.email,onChange:m=>d("email",m.target.value),placeholder:"Enter email address",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Contact"}),a.jsx("input",{type:"text",value:n.contact,onChange:m=>d("contact",m.target.value),placeholder:"Phone number (optional)",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Password *"}),a.jsx("input",{type:"password",value:n.password,onChange:m=>d("password",m.target.value),placeholder:"Create password for this user",className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 placeholder-gray-400 dark:placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent"}),a.jsx("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:"Minimum 6 characters"})]})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsx("h3",{className:"text-lg font-medium text-gray-900 dark:text-slate-100 mb-4",children:"Role & Permissions"}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-2",children:"Role & Access Level"}),a.jsx("select",{value:n.role,onChange:m=>d("role",m.target.value),className:"w-full px-3 py-2 bg-white dark:bg-slate-700 border border-gray-300 dark:border-slate-600 rounded-lg text-gray-900 dark:text-slate-100 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent",children:i.map(m=>a.jsx("option",{value:m.value,className:"bg-white dark:bg-slate-700 text-gray-900 dark:text-slate-100",children:m.label},m.value))}),a.jsxs("p",{className:"text-xs text-gray-500 dark:text-slate-400 mt-1",children:["Credentials: ",n.credentials]})]}),a.jsxs("div",{children:[a.jsx("label",{className:"block text-sm font-medium text-gray-700 dark:text-slate-200 mb-3",children:"App Access"}),a.jsx("div",{className:"space-y-3",children:o(n.role).map(m=>{const p=m.icon,v=n.appAccess.includes(m.id);return a.jsxs("button",{onClick:()=>u(m.id),className:`w-full flex items-center justify-between p-3 rounded-lg border transition-all duration-200 ${v?"bg-blue-600 border-blue-500 text-white":"bg-slate-700 border-slate-600 text-slate-300 hover:bg-slate-600"}`,children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:`w-8 h-8 rounded-md flex items-center justify-center ${v?"bg-blue-500":"bg-slate-600"}`,children:a.jsx(p,{className:"w-4 h-4"})}),a.jsx("span",{className:"font-medium",children:m.name})]}),v&&a.jsx(Dh,{className:"w-5 h-5"})]},m.id)})})]})]})]})}),a.jsxs("div",{className:"flex items-center justify-end space-x-3 p-6 border-t border-gray-200 dark:border-slate-700",children:[a.jsx(ke,{variant:"secondary",onClick:f,className:"bg-slate-700 hover:bg-slate-600 text-slate-200",children:"Cancel"}),a.jsx(ke,{onClick:h,className:"bg-blue-600 hover:bg-blue-500 text-white",children:"Add User"})]})]})]}):null},ik=()=>{const t=nt(),e=St(),{user:s,userProfile:n,getAllUsers:r,updateUserProfile:i,deleteUserProfile:o,adminCreateUser:l,changePassword:c,getDashboardRoute:d,loading:u}=js(),[h,f]=w.useState(""),[m,p]=w.useState([]),[v,g]=w.useState(!1),[x,y]=w.useState(!1),[b,N]=w.useState(null),[_,k]=w.useState(!1),[S,j]=w.useState("name"),[C,E]=w.useState("asc"),[M,P]=w.useState("all"),[R,Y]=w.useState("all"),[B,H]=w.useState("all"),[Q,O]=w.useState("all"),[U,q]=w.useState(!1),[X,A]=w.useState("name"),[F,T]=w.useState("asc"),[$,ne]=w.useState("all"),[de,oe]=w.useState("all"),[re,ee]=w.useState("all"),[Ct,Ue]=w.useState("all");w.useEffect(()=>{if(!u&&n&&n.role!=="Capacity Admin"){console.log(`🚫 Access denied to user management for role: ${n.role}, redirecting to dashboard`);const D=d();t(D,{replace:!0})}},[n,u,t,d]);const Ns=D=>{switch(D){case"Capacity Admin":return["formulas","suppliers","raw-materials"];case"NSight Admin":return["developer-mode","existing-company-mode"];case"Employee":return["formulas"];default:return["formulas"]}},V=D=>{switch(D){case"Capacity Admin":return"admin/secure pass";case"NSight Admin":return"nsight-admin/enterprise pass";case"Employee":return"user/temporary pass";default:return"user/temporary pass"}},ue=async()=>{if(!U)try{q(!0);const{data:D,error:te}=await r();if(te){console.error("Error loading users:",te);return}const L=D.map((G,ie)=>({id:G.id,name:`${G.first_name||""} ${G.last_name||""}`.trim()||G.email.split("@")[0],email:G.email||"",role:G.role||"Employee",status:"Active",lastLogin:G.created_at?new Date(G.created_at).toISOString().split("T")[0]:"Never",contact:"",appAccess:Ns(G.role||"Employee")||[],credentials:V(G.role||"Employee")||"",department:G.department||"",created_at:G.created_at,updated_at:G.updated_at}));p(L)}catch(D){console.error("Error in loadUsers:",D)}finally{q(!1)}};if(w.useEffect(()=>{ue()},[]),u)return a.jsx(Ae,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-300",children:"Loading..."})]})})});if(n&&n.role!=="Capacity Admin")return null;w.useEffect(()=>{const D=te=>{_&&!te.target.closest(".relative")&&k(!1)};return document.addEventListener("mousedown",D),()=>document.removeEventListener("mousedown",D)},[_]),w.useEffect(()=>{const D=new URLSearchParams(e.search);D.get("action")==="add"&&(y(!0),t("/user-management",{replace:!0}));const te=D.get("filterApp");te&&(O(te),Ue(te),t("/user-management",{replace:!0}))},[e.search,t]);const Oe=[...m.filter(D=>{const te=(D.name||"").toLowerCase().includes(h.toLowerCase())||(D.email||"").toLowerCase().includes(h.toLowerCase())||(D.id||"").toString().includes(h),L=M==="all"||D.role===M,G=R==="all"||D.status===R,ie=(D.email||"").split("@")[1],We=B==="all"||B==="capacity.com"&&ie==="capacity.com"||B==="nsight-inc.com"&&ie==="nsight-inc.com"||B==="other"&&ie!=="capacity.com"&&ie!=="nsight-inc.com",ni=Q==="all"||(D.appAccess||[]).includes(Q);return te&&L&&G&&We&&ni})].sort((D,te)=>{let L,G;switch(S){case"name":L=(D.name||"").toLowerCase(),G=(te.name||"").toLowerCase();break;case"role":const ie={Employee:1,Admin:2,"NSight Admin":3};L=ie[D.role]||4,G=ie[te.role]||4;break;case"lastLogin":L=new Date(D.lastLogin),G=new Date(te.lastLogin);break;case"email":L=(D.email||"").toLowerCase(),G=(te.email||"").toLowerCase();break;case"id":L=D.id,G=te.id;break;case"domain":L=(D.email||"").split("@")[1],G=(te.email||"").split("@")[1];break;case"appAccess":L=(D.appAccess||[]).length,G=(te.appAccess||[]).length;break;case"status":L=D.status,G=D.status;break;default:L=(D.name||"").toLowerCase(),G=(te.name||"").toLowerCase()}return L<G?C==="asc"?-1:1:L>G?C==="asc"?1:-1:0}),ks=D=>{switch(D){case"formulas":return a.jsx(ws,{className:"w-4 h-4 text-blue-500"});case"raw-materials":return a.jsx(vs,{className:"w-4 h-4 text-blue-500"});case"suppliers":return a.jsx(Xe,{className:"w-4 h-4 text-blue-500"});case"developer-mode":return a.jsx(ti,{className:"w-4 h-4 text-blue-500"});case"existing-company-mode":return a.jsx(er,{className:"w-4 h-4 text-green-500"});default:return null}},Be=D=>{switch(D){case"Admin":return"text-purple-600 bg-purple-100";case"Capacity Admin":return"text-green-600 bg-green-100";case"NSight Admin":return"text-indigo-600 bg-indigo-100";case"Employee":return"text-blue-600 bg-blue-100";default:return"text-slate-600 bg-slate-100"}},si=D=>{N(D),g(!0)},W=async D=>{try{const te={first_name:D.name.split(" ")[0]||"",last_name:D.name.split(" ").slice(1).join(" ")||"",role:D.role,department:D.department||""},{error:L}=await i(D.id,te);if(L){console.error("Error updating user:",L),alert("Failed to update user. Please try again.");return}await ue(),g(!1),N(null)}catch(te){console.error("Error in handleSaveUser:",te),alert("Failed to update user. Please try again.")}},be=async D=>{try{if(console.log("🔄 UserManagementPage: Deleting user with ID:",D),s&&s.id===D){alert("Cannot delete your own account while logged in. Please have another admin delete your account, or sign out first.");return}const te=m.find(ie=>ie.id===D);if(!te){alert("User not found in current list.");return}console.log("🔄 UserManagementPage: Deleting user:",te.email);const{data:L,error:G}=await o(D);if(G){console.error("❌ UserManagementPage: Delete failed:",G),alert(`Failed to delete user: ${G.message||G}`);return}console.log("✅ UserManagementPage: Delete successful, refreshing user list..."),await new Promise(ie=>setTimeout(ie,1e3));try{await ue(),console.log("📝 UserManagementPage: Refreshed user list after deletion"),m.some(We=>We.id===D)?(console.warn("⚠️ UserManagementPage: User still exists after deletion - likely auto-recreated"),alert("User profile was deleted but may have been automatically recreated. This can happen if the user is currently authenticated in another session.")):alert("User deleted successfully!")}catch(ie){console.error("❌ UserManagementPage: Error refreshing users:",ie),alert("User deleted but failed to refresh list. Please reload the page.");return}g(!1),N(null)}catch(te){console.error("❌ UserManagementPage: Unexpected error in handleDeleteUser:",te),alert(`Unexpected error: ${te.message}`)}},$e=()=>{g(!1),N(null)},Ze=()=>{y(!0)},cs=async D=>{try{console.log("🔧 Admin creating new user:",D.email);const{data:te,error:L}=await l(D.email,D.password,{firstName:D.name.split(" ")[0]||"",lastName:D.name.split(" ").slice(1).join(" ")||"",role:D.role,department:D.department||""});if(L){console.error("❌ Error creating user:",L),alert(`Failed to create user: ${L.message||L}`);return}console.log("✅ User created successfully:",te),alert(`User created successfully! Email: ${D.email}
Password: ${D.password}

Please share these credentials with the user and ask them to change their password on first login.`),await ue(),y(!1)}catch(te){console.error("❌ Error in handleSaveNewUser:",te),alert(`Unexpected error: ${te.message}`)}},ic=()=>{y(!1)},ac=D=>{A(D)},oc=()=>{T(F==="asc"?"desc":"asc")},lc=()=>{j("name"),E("asc"),P("all"),Y("all"),H("all"),O("all"),f(""),A("name"),T("asc"),ne("all"),oe("all"),ee("all"),Ue("all")},cc=()=>{j(X),E(F),P($),Y(de),H(re),O(Ct),k(!1)},Et=()=>{A(S),T(C),ne(M),oe(R),ee(B),Ue(Q),k(!1)},dc=()=>{_?Et():(A(S),T(C),ne(M),oe(R),ee(B),Ue(Q),k(!0))},uc=async D=>{if(!D||!D.email||!D.newPassword)return console.error("Invalid password data:",D),{success:!1,error:"Invalid password data provided"};if((n==null?void 0:n.role)!=="Capacity Admin")return console.error("Insufficient permissions for password change"),{success:!1,error:"Insufficient permissions"};try{if(console.log("Password change requested for:",D.email),console.log("Admin user:",n==null?void 0:n.email),D.email===(s==null?void 0:s.email)){console.log("Admin changing own password");const{error:te}=await c(D.newPassword);return te?(console.error("Password change error:",te),{success:!1,error:te.message||"Failed to change password"}):(console.log("Password change successful for own account"),{success:!0,message:`Password successfully changed for ${D.email}`})}else{console.log("Admin changing another user's password");const{data:{session:te}}=await xe.auth.getSession();if(!te)return console.error("No active session found"),{success:!1,error:"No active session found. Please log in again."};const L=await fetch("/api/admin/change-password",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({targetEmail:D.email,newPassword:D.newPassword,adminToken:te.access_token})});if(!L.ok){console.error("API request failed with status:",L.status);try{const ie=await L.json();return console.error("API Error:",ie.error),{success:!1,error:ie.error||"Failed to change password"}}catch(ie){return console.error("Failed to parse error response:",ie),{success:!1,error:"Failed to change password. Server error."}}}const G=await L.json();return console.log("Password change API response:",G),{success:!0,message:G.message||`Password successfully changed for ${D.email}`}}}catch(te){return console.error("Password change error:",te),{success:!1,error:te.message||"Failed to change password. Please try again."}}};return a.jsxs(Ae,{children:[a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(Nt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx("div",{className:"grid grid-cols-3 gap-1 p-2",children:[...Array(9)].map((D,te)=>a.jsx("div",{className:"w-2 h-2 bg-slate-400 rounded-sm"},te))}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"User Management"})]})]})}),a.jsx("div",{className:"bg-slate-800 border border-slate-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("input",{type:"text",placeholder:"Search by Name",value:h,onChange:D=>f(D.target.value),className:"px-4 py-2 bg-slate-700 border border-slate-600 rounded-lg text-slate-100 placeholder-slate-400 focus:outline-none focus:ring-2 focus:ring-blue-500 focus:border-transparent w-64"}),a.jsxs("div",{className:"relative",children:[a.jsxs("button",{onClick:dc,className:"flex items-center space-x-2 p-2 border border-slate-600 rounded-lg hover:bg-slate-700 transition-colors",children:[a.jsx(Ql,{className:"h-5 w-5 text-slate-300"}),a.jsx("span",{className:"text-sm text-slate-300",children:"Filter & Sort"}),a.jsx(_n,{className:"h-4 w-4 text-slate-300"})]}),_&&a.jsx("div",{className:"absolute right-0 mt-2 w-96 bg-slate-800 border border-slate-600 rounded-lg shadow-lg z-50",children:a.jsxs("div",{className:"p-4",children:[a.jsxs("div",{className:"mb-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-2",children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200",children:"Sort By"}),a.jsxs("button",{onClick:oc,className:"flex items-center space-x-1 px-2 py-1 bg-slate-700 hover:bg-slate-600 rounded text-xs text-slate-300 transition-colors",children:[a.jsx("span",{children:F==="asc"?"Ascending":"Descending"}),a.jsx("span",{children:F==="asc"?"↑":"↓"})]})]}),a.jsx("div",{className:"grid grid-cols-2 gap-2",children:[{key:"name",label:"Name"},{key:"role",label:"Role"},{key:"lastLogin",label:"Last Login"},{key:"email",label:"Email"},{key:"id",label:"ID"},{key:"domain",label:"Domain"},{key:"appAccess",label:"App Count"},{key:"status",label:"Status"}].map(D=>a.jsx("button",{onClick:()=>ac(D.key),className:`text-left px-3 py-2 rounded text-sm transition-colors ${X===D.key?"bg-blue-600 text-white":"bg-slate-700 text-slate-300 hover:bg-slate-600"}`,children:D.label},D.key))})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Role"}),a.jsxs("select",{value:$,onChange:D=>ne(D.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Roles"}),a.jsx("option",{value:"Employee",children:"Employee"}),a.jsx("option",{value:"Admin",children:"Admin"}),a.jsx("option",{value:"NSight Admin",children:"NSight Admin"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Status"}),a.jsxs("select",{value:de,onChange:D=>oe(D.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Status"}),a.jsx("option",{value:"Active",children:"Active"}),a.jsx("option",{value:"Inactive",children:"Inactive"})]})]})]}),a.jsxs("div",{className:"grid grid-cols-2 gap-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by Domain"}),a.jsxs("select",{value:re,onChange:D=>ee(D.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Domains"}),a.jsx("option",{value:"capacity.com",children:"@capacity.com"}),a.jsx("option",{value:"nsight-inc.com",children:"@nsight-inc.com"}),a.jsx("option",{value:"other",children:"Other Domains"})]})]}),a.jsxs("div",{children:[a.jsx("h3",{className:"text-sm font-medium text-slate-200 mb-2",children:"Filter by App Access"}),a.jsxs("select",{value:Ct,onChange:D=>Ue(D.target.value),className:"w-full p-2 bg-slate-700 border border-slate-600 rounded text-slate-200 text-sm",children:[a.jsx("option",{value:"all",children:"All Apps"}),a.jsx("option",{value:"formulas",children:"Has Formulas Access"}),a.jsx("option",{value:"suppliers",children:"Has Suppliers Access"}),a.jsx("option",{value:"raw-materials",children:"Has Raw Materials Access"}),a.jsx("option",{value:"developer-mode",children:"Has Developer Mode Access"}),a.jsx("option",{value:"existing-company-mode",children:"Has Existing Company Mode Access"})]})]})]})]}),a.jsxs("div",{className:"mt-6 pt-4 border-t border-slate-600 space-y-2",children:[a.jsxs("div",{className:"grid grid-cols-2 gap-2",children:[a.jsx("button",{onClick:Et,className:"px-3 py-2 bg-slate-600 text-white rounded text-sm hover:bg-slate-700 transition-colors",children:"Cancel"}),a.jsx("button",{onClick:cc,className:"px-3 py-2 bg-blue-600 text-white rounded text-sm hover:bg-blue-700 transition-colors font-medium",children:"Apply Filters"})]}),a.jsx("button",{onClick:lc,className:"w-full px-3 py-2 bg-red-600 text-white rounded text-sm hover:bg-red-700 transition-colors",children:"Clear All Filters"})]})]})})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:ue,disabled:U,className:"flex items-center space-x-2 px-3 py-2 bg-slate-700 hover:bg-slate-600 disabled:bg-slate-600 disabled:opacity-50 text-slate-200 rounded-lg transition-colors",title:"Refresh user list",children:[a.jsx("svg",{className:`h-4 w-4 ${U?"animate-spin":""}`,fill:"none",stroke:"currentColor",viewBox:"0 0 24 24",children:a.jsx("path",{strokeLinecap:"round",strokeLinejoin:"round",strokeWidth:2,d:"M4 4v5h.582m15.356 2A8.001 8.001 0 004.582 9m0 0H9m11 11v-5h-.581m0 0a8.003 8.003 0 01-15.357-2m15.357 2H15"})}),a.jsx("span",{children:U?"Refreshing...":"Refresh"})]}),(n==null?void 0:n.role)==="Capacity Admin"&&a.jsxs("button",{onClick:Ze,className:"flex items-center space-x-2 px-4 py-2 bg-blue-600 hover:bg-blue-500 text-white rounded-lg transition-colors",children:[a.jsx(tr,{className:"h-4 w-4"}),a.jsx("span",{children:"Add User"})]})]})]})}),a.jsxs("div",{className:"space-y-6",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{children:[a.jsx("h2",{className:"text-2xl font-semibold text-slate-100",children:"User Access Management"}),a.jsxs("div",{className:"flex items-center space-x-4 mt-2",children:[a.jsxs("p",{className:"text-sm text-slate-400",children:["Showing ",Oe.length," of ",m.length," users"]}),(M!=="all"||R!=="all"||B!=="all"||Q!=="all"||S!=="name")&&a.jsxs("div",{className:"flex items-center space-x-2 flex-wrap",children:[a.jsx("span",{className:"text-xs text-slate-500",children:"Active filters:"}),M!=="all"&&a.jsxs("span",{className:"px-2 py-1 bg-purple-600 text-white text-xs rounded",children:["Role: ",M]}),R!=="all"&&a.jsxs("span",{className:"px-2 py-1 bg-green-600 text-white text-xs rounded",children:["Status: ",R]}),B!=="all"&&a.jsxs("span",{className:"px-2 py-1 bg-orange-600 text-white text-xs rounded",children:["Domain: ",B]}),Q!=="all"&&a.jsxs("span",{className:"px-2 py-1 bg-blue-600 text-white text-xs rounded",children:["App: ",Q]}),S!=="name"&&a.jsxs("span",{className:"px-2 py-1 bg-slate-600 text-white text-xs rounded",children:["Sort: ",S," (",C,")"]})]})]})]})}),a.jsx("div",{className:"bg-slate-800 rounded-lg shadow-sm overflow-hidden border border-slate-700",children:a.jsx("div",{className:"overflow-x-auto",children:a.jsxs("table",{className:"w-full table-fixed min-w-[1240px]",children:[a.jsx("thead",{children:a.jsxs("tr",{className:"border-b border-slate-700 bg-slate-750",children:[a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[180px]",children:"Name"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[120px]",children:"ID"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[220px]",children:"Email"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[140px]",children:"Role"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[120px]",children:"Contact"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[160px]",children:"App Access"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[180px]",children:"Credentials"}),a.jsx("th",{className:"text-left px-6 py-4 text-sm font-medium text-slate-300 w-[80px]",children:"Actions"})]})}),a.jsx("tbody",{children:Oe.map((D,te)=>a.jsxs("tr",{className:"border-b border-slate-700 hover:bg-slate-700 transition-colors",children:[a.jsx("td",{className:"px-6 py-4 text-sm text-slate-100 font-medium truncate",title:D.name||"",children:D.name||""}),a.jsx("td",{className:"px-6 py-4",children:a.jsxs("span",{className:"inline-flex items-center px-2 py-1 bg-slate-700 text-slate-200 text-xs font-mono rounded border border-slate-600",children:["#",D.id||""]})}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300 truncate",title:D.email||"",children:a.jsx("a",{href:`mailto:${D.email||""}`,className:"text-blue-400 hover:text-blue-300 underline truncate block",children:D.email||""})}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("span",{className:`inline-flex items-center px-2 py-1 rounded-full text-xs font-medium truncate ${Be(D.role||"Employee")}`,children:D.role||"Employee"})}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300 truncate",title:D.contact||"",children:D.contact||"-"}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("div",{className:"flex items-center space-x-1 overflow-x-auto",children:(D.appAccess||[]).map((L,G)=>a.jsx("div",{className:"w-8 h-8 bg-slate-700 rounded-md flex items-center justify-center hover:bg-slate-600 transition-colors flex-shrink-0",title:typeof L=="string"?L.replace("-"," ").replace(/\b\w/g,ie=>ie.toUpperCase()):"",children:ks(L)},`${L}-${G}`))})}),a.jsx("td",{className:"px-6 py-4 text-sm text-slate-300 truncate",title:D.credentials||"",children:D.credentials||""}),a.jsx("td",{className:"px-6 py-4",children:a.jsx("button",{onClick:()=>si(D),className:"p-2 text-slate-400 hover:text-slate-200 hover:bg-slate-600 rounded-md transition-colors",title:"Edit user",children:a.jsx(Fh,{className:"h-4 w-4"})})})]},D.id||`user-${te}`))})]})})})]})]}),a.jsx(nk,{isOpen:v,onClose:$e,user:b,onSave:W,onDelete:be,currentUserRole:(n==null?void 0:n.role)||"Employee",onChangePassword:uc}),a.jsx(rk,{isOpen:x,onClose:ic,onSave:cs})]})},ak=()=>{var o;const t=nt(),{theme:e,changeTheme:s,isTransitioning:n}=qN(),r=[{id:"light",name:"Light Mode",icon:c2,description:"Light theme with bright colors",preview:"bg-white border-gray-200"},{id:"dark",name:"Dark Mode",icon:a2,description:"Dark theme with muted colors",preview:"bg-slate-800 border-slate-600"},{id:"system",name:"System",icon:i2,description:"Follow system preference",preview:"bg-gradient-to-r from-white to-slate-800 border-slate-400"}],i=l=>{s(l)};return a.jsx(Ae,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsx("div",{className:"flex items-center justify-between",children:a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx("button",{onClick:()=>t("/dashboard"),className:"p-2 hover:bg-slate-700 rounded-lg transition-colors",children:a.jsx(Nt,{className:"h-5 w-5 text-slate-400"})}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsx(gl,{className:"h-8 w-8 text-blue-500"}),a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"Settings"})]})]})}),a.jsxs("div",{className:"max-w-4xl mx-auto space-y-8",children:[a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"mb-6",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-100 mb-2",children:"Appearance"}),a.jsx("p",{className:"text-slate-400",children:"Customize how the application looks and feels"})]}),a.jsxs("div",{className:"space-y-4",children:[a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-medium text-slate-200 mb-4",children:"Theme"}),a.jsx("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-4",children:r.map(l=>{const c=l.icon,d=e===l.id;return a.jsxs("button",{onClick:()=>i(l.id),disabled:n,className:`relative p-4 rounded-lg border-2 transition-all duration-300 ease-in-out transform hover:scale-105 disabled:opacity-50 disabled:cursor-not-allowed ${d?"border-blue-500 bg-blue-500/10 ring-2 ring-blue-500/20":"border-slate-600 hover:border-slate-500 bg-slate-700/50"}`,children:[a.jsx("div",{className:`w-full h-20 rounded-md mb-3 border-2 ${l.preview} transition-all duration-300`,children:a.jsx("div",{className:"p-2 h-full flex items-center justify-center",children:a.jsx(c,{className:`h-6 w-6 ${l.id==="light"?"text-gray-600":l.id==="dark"?"text-slate-300":"text-slate-500"}`})})}),a.jsxs("div",{className:"text-left",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-1",children:[a.jsx(c,{className:"h-4 w-4 text-slate-400"}),a.jsx("span",{className:"font-medium text-slate-200",children:l.name}),d&&a.jsx("div",{className:"w-2 h-2 bg-blue-500 rounded-full animate-pulse"})]}),a.jsx("p",{className:"text-sm text-slate-400",children:l.description})]}),d&&a.jsx("div",{className:"absolute inset-0 rounded-lg bg-blue-500/5 animate-pulse"})]},l.id)})})]}),a.jsxs("div",{className:"flex justify-between items-center pt-4 border-t border-slate-700",children:[a.jsxs("div",{className:"text-sm text-slate-400",children:[a.jsx("span",{children:"Current theme: "}),a.jsx("span",{className:"text-slate-200 font-medium",children:(o=r.find(l=>l.id===e))==null?void 0:o.name}),n&&a.jsx("span",{className:"ml-2 text-blue-400 animate-pulse",children:"(Applying changes...)"})]}),a.jsx("div",{className:"text-xs text-slate-500",children:"Changes apply automatically"})]})]})]}),a.jsx(le,{className:"p-6 opacity-50",children:a.jsxs("div",{className:"mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-100 mb-2",children:"General Settings"}),a.jsx("p",{className:"text-slate-400",children:"Coming soon..."})]})}),a.jsx(le,{className:"p-6 opacity-50",children:a.jsxs("div",{className:"mb-4",children:[a.jsx("h2",{className:"text-xl font-semibold text-slate-100 mb-2",children:"Account Settings"}),a.jsx("p",{className:"text-slate-400",children:"Coming soon..."})]})})]})]})})};/*!
 * @kurkle/color v0.3.4
 * https://github.com/kurkle/color#readme
 * (c) 2024 Jukka Kurkela
 * Released under the MIT License
 */function Aa(t){return t+.5|0}const rn=(t,e,s)=>Math.max(Math.min(t,s),e);function Si(t){return rn(Aa(t*2.55),0,255)}function vn(t){return rn(Aa(t*255),0,255)}function Os(t){return rn(Aa(t/2.55)/100,0,1)}function qm(t){return rn(Aa(t*100),0,100)}const Ut={0:0,1:1,2:2,3:3,4:4,5:5,6:6,7:7,8:8,9:9,A:10,B:11,C:12,D:13,E:14,F:15,a:10,b:11,c:12,d:13,e:14,f:15},mu=[..."0123456789ABCDEF"],ok=t=>mu[t&15],lk=t=>mu[(t&240)>>4]+mu[t&15],io=t=>(t&240)>>4===(t&15),ck=t=>io(t.r)&&io(t.g)&&io(t.b)&&io(t.a);function dk(t){var e=t.length,s;return t[0]==="#"&&(e===4||e===5?s={r:255&Ut[t[1]]*17,g:255&Ut[t[2]]*17,b:255&Ut[t[3]]*17,a:e===5?Ut[t[4]]*17:255}:(e===7||e===9)&&(s={r:Ut[t[1]]<<4|Ut[t[2]],g:Ut[t[3]]<<4|Ut[t[4]],b:Ut[t[5]]<<4|Ut[t[6]],a:e===9?Ut[t[7]]<<4|Ut[t[8]]:255})),s}const uk=(t,e)=>t<255?e(t):"";function hk(t){var e=ck(t)?ok:lk;return t?"#"+e(t.r)+e(t.g)+e(t.b)+uk(t.a,e):void 0}const fk=/^(hsla?|hwb|hsv)\(\s*([-+.e\d]+)(?:deg)?[\s,]+([-+.e\d]+)%[\s,]+([-+.e\d]+)%(?:[\s,]+([-+.e\d]+)(%)?)?\s*\)$/;function _y(t,e,s){const n=e*Math.min(s,1-s),r=(i,o=(i+t/30)%12)=>s-n*Math.max(Math.min(o-3,9-o,1),-1);return[r(0),r(8),r(4)]}function mk(t,e,s){const n=(r,i=(r+t/60)%6)=>s-s*e*Math.max(Math.min(i,4-i,1),0);return[n(5),n(3),n(1)]}function pk(t,e,s){const n=_y(t,1,.5);let r;for(e+s>1&&(r=1/(e+s),e*=r,s*=r),r=0;r<3;r++)n[r]*=1-e-s,n[r]+=e;return n}function gk(t,e,s,n,r){return t===r?(e-s)/n+(e<s?6:0):e===r?(s-t)/n+2:(t-e)/n+4}function Uh(t){const s=t.r/255,n=t.g/255,r=t.b/255,i=Math.max(s,n,r),o=Math.min(s,n,r),l=(i+o)/2;let c,d,u;return i!==o&&(u=i-o,d=l>.5?u/(2-i-o):u/(i+o),c=gk(s,n,r,u,i),c=c*60+.5),[c|0,d||0,l]}function Bh(t,e,s,n){return(Array.isArray(e)?t(e[0],e[1],e[2]):t(e,s,n)).map(vn)}function Hh(t,e,s){return Bh(_y,t,e,s)}function xk(t,e,s){return Bh(pk,t,e,s)}function yk(t,e,s){return Bh(mk,t,e,s)}function jy(t){return(t%360+360)%360}function vk(t){const e=fk.exec(t);let s=255,n;if(!e)return;e[5]!==n&&(s=e[6]?Si(+e[5]):vn(+e[5]));const r=jy(+e[2]),i=+e[3]/100,o=+e[4]/100;return e[1]==="hwb"?n=xk(r,i,o):e[1]==="hsv"?n=yk(r,i,o):n=Hh(r,i,o),{r:n[0],g:n[1],b:n[2],a:s}}function bk(t,e){var s=Uh(t);s[0]=jy(s[0]+e),s=Hh(s),t.r=s[0],t.g=s[1],t.b=s[2]}function wk(t){if(!t)return;const e=Uh(t),s=e[0],n=qm(e[1]),r=qm(e[2]);return t.a<255?`hsla(${s}, ${n}%, ${r}%, ${Os(t.a)})`:`hsl(${s}, ${n}%, ${r}%)`}const Km={x:"dark",Z:"light",Y:"re",X:"blu",W:"gr",V:"medium",U:"slate",A:"ee",T:"ol",S:"or",B:"ra",C:"lateg",D:"ights",R:"in",Q:"turquois",E:"hi",P:"ro",O:"al",N:"le",M:"de",L:"yello",F:"en",K:"ch",G:"arks",H:"ea",I:"ightg",J:"wh"},Gm={OiceXe:"f0f8ff",antiquewEte:"faebd7",aqua:"ffff",aquamarRe:"7fffd4",azuY:"f0ffff",beige:"f5f5dc",bisque:"ffe4c4",black:"0",blanKedOmond:"ffebcd",Xe:"ff",XeviTet:"8a2be2",bPwn:"a52a2a",burlywood:"deb887",caMtXe:"5f9ea0",KartYuse:"7fff00",KocTate:"d2691e",cSO:"ff7f50",cSnflowerXe:"6495ed",cSnsilk:"fff8dc",crimson:"dc143c",cyan:"ffff",xXe:"8b",xcyan:"8b8b",xgTMnPd:"b8860b",xWay:"a9a9a9",xgYF:"6400",xgYy:"a9a9a9",xkhaki:"bdb76b",xmagFta:"8b008b",xTivegYF:"556b2f",xSange:"ff8c00",xScEd:"9932cc",xYd:"8b0000",xsOmon:"e9967a",xsHgYF:"8fbc8f",xUXe:"483d8b",xUWay:"2f4f4f",xUgYy:"2f4f4f",xQe:"ced1",xviTet:"9400d3",dAppRk:"ff1493",dApskyXe:"bfff",dimWay:"696969",dimgYy:"696969",dodgerXe:"1e90ff",fiYbrick:"b22222",flSOwEte:"fffaf0",foYstWAn:"228b22",fuKsia:"ff00ff",gaRsbSo:"dcdcdc",ghostwEte:"f8f8ff",gTd:"ffd700",gTMnPd:"daa520",Way:"808080",gYF:"8000",gYFLw:"adff2f",gYy:"808080",honeyMw:"f0fff0",hotpRk:"ff69b4",RdianYd:"cd5c5c",Rdigo:"4b0082",ivSy:"fffff0",khaki:"f0e68c",lavFMr:"e6e6fa",lavFMrXsh:"fff0f5",lawngYF:"7cfc00",NmoncEffon:"fffacd",ZXe:"add8e6",ZcSO:"f08080",Zcyan:"e0ffff",ZgTMnPdLw:"fafad2",ZWay:"d3d3d3",ZgYF:"90ee90",ZgYy:"d3d3d3",ZpRk:"ffb6c1",ZsOmon:"ffa07a",ZsHgYF:"20b2aa",ZskyXe:"87cefa",ZUWay:"778899",ZUgYy:"778899",ZstAlXe:"b0c4de",ZLw:"ffffe0",lime:"ff00",limegYF:"32cd32",lRF:"faf0e6",magFta:"ff00ff",maPon:"800000",VaquamarRe:"66cdaa",VXe:"cd",VScEd:"ba55d3",VpurpN:"9370db",VsHgYF:"3cb371",VUXe:"7b68ee",VsprRggYF:"fa9a",VQe:"48d1cc",VviTetYd:"c71585",midnightXe:"191970",mRtcYam:"f5fffa",mistyPse:"ffe4e1",moccasR:"ffe4b5",navajowEte:"ffdead",navy:"80",Tdlace:"fdf5e6",Tive:"808000",TivedBb:"6b8e23",Sange:"ffa500",SangeYd:"ff4500",ScEd:"da70d6",pOegTMnPd:"eee8aa",pOegYF:"98fb98",pOeQe:"afeeee",pOeviTetYd:"db7093",papayawEp:"ffefd5",pHKpuff:"ffdab9",peru:"cd853f",pRk:"ffc0cb",plum:"dda0dd",powMrXe:"b0e0e6",purpN:"800080",YbeccapurpN:"663399",Yd:"ff0000",Psybrown:"bc8f8f",PyOXe:"4169e1",saddNbPwn:"8b4513",sOmon:"fa8072",sandybPwn:"f4a460",sHgYF:"2e8b57",sHshell:"fff5ee",siFna:"a0522d",silver:"c0c0c0",skyXe:"87ceeb",UXe:"6a5acd",UWay:"708090",UgYy:"708090",snow:"fffafa",sprRggYF:"ff7f",stAlXe:"4682b4",tan:"d2b48c",teO:"8080",tEstN:"d8bfd8",tomato:"ff6347",Qe:"40e0d0",viTet:"ee82ee",JHt:"f5deb3",wEte:"ffffff",wEtesmoke:"f5f5f5",Lw:"ffff00",LwgYF:"9acd32"};function _k(){const t={},e=Object.keys(Gm),s=Object.keys(Km);let n,r,i,o,l;for(n=0;n<e.length;n++){for(o=l=e[n],r=0;r<s.length;r++)i=s[r],l=l.replace(i,Km[i]);i=parseInt(Gm[o],16),t[l]=[i>>16&255,i>>8&255,i&255]}return t}let ao;function jk(t){ao||(ao=_k(),ao.transparent=[0,0,0,0]);const e=ao[t.toLowerCase()];return e&&{r:e[0],g:e[1],b:e[2],a:e.length===4?e[3]:255}}const Nk=/^rgba?\(\s*([-+.\d]+)(%)?[\s,]+([-+.e\d]+)(%)?[\s,]+([-+.e\d]+)(%)?(?:[\s,/]+([-+.e\d]+)(%)?)?\s*\)$/;function kk(t){const e=Nk.exec(t);let s=255,n,r,i;if(e){if(e[7]!==n){const o=+e[7];s=e[8]?Si(o):rn(o*255,0,255)}return n=+e[1],r=+e[3],i=+e[5],n=255&(e[2]?Si(n):rn(n,0,255)),r=255&(e[4]?Si(r):rn(r,0,255)),i=255&(e[6]?Si(i):rn(i,0,255)),{r:n,g:r,b:i,a:s}}}function Sk(t){return t&&(t.a<255?`rgba(${t.r}, ${t.g}, ${t.b}, ${Os(t.a)})`:`rgb(${t.r}, ${t.g}, ${t.b})`)}const Kc=t=>t<=.0031308?t*12.92:Math.pow(t,1/2.4)*1.055-.055,mr=t=>t<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4);function Ck(t,e,s){const n=mr(Os(t.r)),r=mr(Os(t.g)),i=mr(Os(t.b));return{r:vn(Kc(n+s*(mr(Os(e.r))-n))),g:vn(Kc(r+s*(mr(Os(e.g))-r))),b:vn(Kc(i+s*(mr(Os(e.b))-i))),a:t.a+s*(e.a-t.a)}}function oo(t,e,s){if(t){let n=Uh(t);n[e]=Math.max(0,Math.min(n[e]+n[e]*s,e===0?360:1)),n=Hh(n),t.r=n[0],t.g=n[1],t.b=n[2]}}function Ny(t,e){return t&&Object.assign(e||{},t)}function Ym(t){var e={r:0,g:0,b:0,a:255};return Array.isArray(t)?t.length>=3&&(e={r:t[0],g:t[1],b:t[2],a:255},t.length>3&&(e.a=vn(t[3]))):(e=Ny(t,{r:0,g:0,b:0,a:1}),e.a=vn(e.a)),e}function Ek(t){return t.charAt(0)==="r"?kk(t):vk(t)}class ma{constructor(e){if(e instanceof ma)return e;const s=typeof e;let n;s==="object"?n=Ym(e):s==="string"&&(n=dk(e)||jk(e)||Ek(e)),this._rgb=n,this._valid=!!n}get valid(){return this._valid}get rgb(){var e=Ny(this._rgb);return e&&(e.a=Os(e.a)),e}set rgb(e){this._rgb=Ym(e)}rgbString(){return this._valid?Sk(this._rgb):void 0}hexString(){return this._valid?hk(this._rgb):void 0}hslString(){return this._valid?wk(this._rgb):void 0}mix(e,s){if(e){const n=this.rgb,r=e.rgb;let i;const o=s===i?.5:s,l=2*o-1,c=n.a-r.a,d=((l*c===-1?l:(l+c)/(1+l*c))+1)/2;i=1-d,n.r=255&d*n.r+i*r.r+.5,n.g=255&d*n.g+i*r.g+.5,n.b=255&d*n.b+i*r.b+.5,n.a=o*n.a+(1-o)*r.a,this.rgb=n}return this}interpolate(e,s){return e&&(this._rgb=Ck(this._rgb,e._rgb,s)),this}clone(){return new ma(this.rgb)}alpha(e){return this._rgb.a=vn(e),this}clearer(e){const s=this._rgb;return s.a*=1-e,this}greyscale(){const e=this._rgb,s=Aa(e.r*.3+e.g*.59+e.b*.11);return e.r=e.g=e.b=s,this}opaquer(e){const s=this._rgb;return s.a*=1+e,this}negate(){const e=this._rgb;return e.r=255-e.r,e.g=255-e.g,e.b=255-e.b,this}lighten(e){return oo(this._rgb,2,e),this}darken(e){return oo(this._rgb,2,-e),this}saturate(e){return oo(this._rgb,1,e),this}desaturate(e){return oo(this._rgb,1,-e),this}rotate(e){return bk(this._rgb,e),this}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */function Ss(){}const Pk=(()=>{let t=0;return()=>t++})();function ge(t){return t==null}function Se(t){if(Array.isArray&&Array.isArray(t))return!0;const e=Object.prototype.toString.call(t);return e.slice(0,7)==="[object"&&e.slice(-6)==="Array]"}function me(t){return t!==null&&Object.prototype.toString.call(t)==="[object Object]"}function Ie(t){return(typeof t=="number"||t instanceof Number)&&isFinite(+t)}function At(t,e){return Ie(t)?t:e}function ce(t,e){return typeof t>"u"?e:t}const Ak=(t,e)=>typeof t=="string"&&t.endsWith("%")?parseFloat(t)/100*e:+t;function _e(t,e,s){if(t&&typeof t.call=="function")return t.apply(s,e)}function ye(t,e,s,n){let r,i,o;if(Se(t))if(i=t.length,n)for(r=i-1;r>=0;r--)e.call(s,t[r],r);else for(r=0;r<i;r++)e.call(s,t[r],r);else if(me(t))for(o=Object.keys(t),i=o.length,r=0;r<i;r++)e.call(s,t[o[r]],o[r])}function xl(t,e){let s,n,r,i;if(!t||!e||t.length!==e.length)return!1;for(s=0,n=t.length;s<n;++s)if(r=t[s],i=e[s],r.datasetIndex!==i.datasetIndex||r.index!==i.index)return!1;return!0}function yl(t){if(Se(t))return t.map(yl);if(me(t)){const e=Object.create(null),s=Object.keys(t),n=s.length;let r=0;for(;r<n;++r)e[s[r]]=yl(t[s[r]]);return e}return t}function ky(t){return["__proto__","prototype","constructor"].indexOf(t)===-1}function Lk(t,e,s,n){if(!ky(t))return;const r=e[t],i=s[t];me(r)&&me(i)?pa(r,i,n):e[t]=yl(i)}function pa(t,e,s){const n=Se(e)?e:[e],r=n.length;if(!me(t))return t;s=s||{};const i=s.merger||Lk;let o;for(let l=0;l<r;++l){if(o=n[l],!me(o))continue;const c=Object.keys(o);for(let d=0,u=c.length;d<u;++d)i(c[d],t,o,s)}return t}function Hi(t,e){return pa(t,e,{merger:Tk})}function Tk(t,e,s){if(!ky(t))return;const n=e[t],r=s[t];me(n)&&me(r)?Hi(n,r):Object.prototype.hasOwnProperty.call(e,t)||(e[t]=yl(r))}const Jm={"":t=>t,x:t=>t.x,y:t=>t.y};function Mk(t){const e=t.split("."),s=[];let n="";for(const r of e)n+=r,n.endsWith("\\")?n=n.slice(0,-1)+".":(s.push(n),n="");return s}function Dk(t){const e=Mk(t);return s=>{for(const n of e){if(n==="")break;s=s&&s[n]}return s}}function Vr(t,e){return(Jm[e]||(Jm[e]=Dk(e)))(t)}function Vh(t){return t.charAt(0).toUpperCase()+t.slice(1)}const ga=t=>typeof t<"u",jn=t=>typeof t=="function",Qm=(t,e)=>{if(t.size!==e.size)return!1;for(const s of t)if(!e.has(s))return!1;return!0};function Ok(t){return t.type==="mouseup"||t.type==="click"||t.type==="contextmenu"}const Ve=Math.PI,It=2*Ve,Rk=It+Ve,vl=Number.POSITIVE_INFINITY,Ik=Ve/180,Dt=Ve/2,An=Ve/4,Xm=Ve*2/3,an=Math.log10,bs=Math.sign;function Vi(t,e,s){return Math.abs(t-e)<s}function Zm(t){const e=Math.round(t);t=Vi(t,e,t/1e3)?e:t;const s=Math.pow(10,Math.floor(an(t))),n=t/s;return(n<=1?1:n<=2?2:n<=5?5:10)*s}function Fk(t){const e=[],s=Math.sqrt(t);let n;for(n=1;n<s;n++)t%n===0&&(e.push(n),e.push(t/n));return s===(s|0)&&e.push(s),e.sort((r,i)=>r-i).pop(),e}function $k(t){return typeof t=="symbol"||typeof t=="object"&&t!==null&&!(Symbol.toPrimitive in t||"toString"in t||"valueOf"in t)}function xa(t){return!$k(t)&&!isNaN(parseFloat(t))&&isFinite(t)}function zk(t,e){const s=Math.round(t);return s-e<=t&&s+e>=t}function Sy(t,e,s){let n,r,i;for(n=0,r=t.length;n<r;n++)i=t[n][s],isNaN(i)||(e.min=Math.min(e.min,i),e.max=Math.max(e.max,i))}function on(t){return t*(Ve/180)}function Wh(t){return t*(180/Ve)}function ep(t){if(!Ie(t))return;let e=1,s=0;for(;Math.round(t*e)/e!==t;)e*=10,s++;return s}function Uk(t,e){const s=e.x-t.x,n=e.y-t.y,r=Math.sqrt(s*s+n*n);let i=Math.atan2(n,s);return i<-.5*Ve&&(i+=It),{angle:i,distance:r}}function pu(t,e){return Math.sqrt(Math.pow(e.x-t.x,2)+Math.pow(e.y-t.y,2))}function Bk(t,e){return(t-e+Rk)%It-Ve}function Tt(t){return(t%It+It)%It}function Cy(t,e,s,n){const r=Tt(t),i=Tt(e),o=Tt(s),l=Tt(i-r),c=Tt(o-r),d=Tt(r-i),u=Tt(r-o);return r===i||r===o||n&&i===o||l>c&&d<u}function Ot(t,e,s){return Math.max(e,Math.min(s,t))}function Hk(t){return Ot(t,-32768,32767)}function ln(t,e,s,n=1e-6){return t>=Math.min(e,s)-n&&t<=Math.max(e,s)+n}function qh(t,e,s){s=s||(o=>t[o]<e);let n=t.length-1,r=0,i;for(;n-r>1;)i=r+n>>1,s(i)?r=i:n=i;return{lo:r,hi:n}}const Vn=(t,e,s,n)=>qh(t,s,n?r=>{const i=t[r][e];return i<s||i===s&&t[r+1][e]===s}:r=>t[r][e]<s),Vk=(t,e,s)=>qh(t,s,n=>t[n][e]>=s);function Wk(t,e,s){let n=0,r=t.length;for(;n<r&&t[n]<e;)n++;for(;r>n&&t[r-1]>s;)r--;return n>0||r<t.length?t.slice(n,r):t}const Ey=["push","pop","shift","splice","unshift"];function qk(t,e){if(t._chartjs){t._chartjs.listeners.push(e);return}Object.defineProperty(t,"_chartjs",{configurable:!0,enumerable:!1,value:{listeners:[e]}}),Ey.forEach(s=>{const n="_onData"+Vh(s),r=t[s];Object.defineProperty(t,s,{configurable:!0,enumerable:!1,value(...i){const o=r.apply(this,i);return t._chartjs.listeners.forEach(l=>{typeof l[n]=="function"&&l[n](...i)}),o}})})}function tp(t,e){const s=t._chartjs;if(!s)return;const n=s.listeners,r=n.indexOf(e);r!==-1&&n.splice(r,1),!(n.length>0)&&(Ey.forEach(i=>{delete t[i]}),delete t._chartjs)}function Py(t){const e=new Set(t);return e.size===t.length?t:Array.from(e)}const Ay=function(){return typeof window>"u"?function(t){return t()}:window.requestAnimationFrame}();function Ly(t,e){let s=[],n=!1;return function(...r){s=r,n||(n=!0,Ay.call(window,()=>{n=!1,t.apply(e,s)}))}}function Kk(t,e){let s;return function(...n){return e?(clearTimeout(s),s=setTimeout(t,e,n)):t.apply(this,n),e}}const Kh=t=>t==="start"?"left":t==="end"?"right":"center",ot=(t,e,s)=>t==="start"?e:t==="end"?s:(e+s)/2,Gk=(t,e,s,n)=>t===(n?"left":"right")?s:t==="center"?(e+s)/2:e;function Yk(t,e,s){const n=e.length;let r=0,i=n;if(t._sorted){const{iScale:o,vScale:l,_parsed:c}=t,d=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null,u=o.axis,{min:h,max:f,minDefined:m,maxDefined:p}=o.getUserBounds();if(m){if(r=Math.min(Vn(c,u,h).lo,s?n:Vn(e,u,o.getPixelForValue(h)).lo),d){const v=c.slice(0,r+1).reverse().findIndex(g=>!ge(g[l.axis]));r-=Math.max(0,v)}r=Ot(r,0,n-1)}if(p){let v=Math.max(Vn(c,o.axis,f,!0).hi+1,s?0:Vn(e,u,o.getPixelForValue(f),!0).hi+1);if(d){const g=c.slice(v-1).findIndex(x=>!ge(x[l.axis]));v+=Math.max(0,g)}i=Ot(v,r,n)-r}else i=n-r}return{start:r,count:i}}function Jk(t){const{xScale:e,yScale:s,_scaleRanges:n}=t,r={xmin:e.min,xmax:e.max,ymin:s.min,ymax:s.max};if(!n)return t._scaleRanges=r,!0;const i=n.xmin!==e.min||n.xmax!==e.max||n.ymin!==s.min||n.ymax!==s.max;return Object.assign(n,r),i}const lo=t=>t===0||t===1,sp=(t,e,s)=>-(Math.pow(2,10*(t-=1))*Math.sin((t-e)*It/s)),np=(t,e,s)=>Math.pow(2,-10*t)*Math.sin((t-e)*It/s)+1,Wi={linear:t=>t,easeInQuad:t=>t*t,easeOutQuad:t=>-t*(t-2),easeInOutQuad:t=>(t/=.5)<1?.5*t*t:-.5*(--t*(t-2)-1),easeInCubic:t=>t*t*t,easeOutCubic:t=>(t-=1)*t*t+1,easeInOutCubic:t=>(t/=.5)<1?.5*t*t*t:.5*((t-=2)*t*t+2),easeInQuart:t=>t*t*t*t,easeOutQuart:t=>-((t-=1)*t*t*t-1),easeInOutQuart:t=>(t/=.5)<1?.5*t*t*t*t:-.5*((t-=2)*t*t*t-2),easeInQuint:t=>t*t*t*t*t,easeOutQuint:t=>(t-=1)*t*t*t*t+1,easeInOutQuint:t=>(t/=.5)<1?.5*t*t*t*t*t:.5*((t-=2)*t*t*t*t+2),easeInSine:t=>-Math.cos(t*Dt)+1,easeOutSine:t=>Math.sin(t*Dt),easeInOutSine:t=>-.5*(Math.cos(Ve*t)-1),easeInExpo:t=>t===0?0:Math.pow(2,10*(t-1)),easeOutExpo:t=>t===1?1:-Math.pow(2,-10*t)+1,easeInOutExpo:t=>lo(t)?t:t<.5?.5*Math.pow(2,10*(t*2-1)):.5*(-Math.pow(2,-10*(t*2-1))+2),easeInCirc:t=>t>=1?t:-(Math.sqrt(1-t*t)-1),easeOutCirc:t=>Math.sqrt(1-(t-=1)*t),easeInOutCirc:t=>(t/=.5)<1?-.5*(Math.sqrt(1-t*t)-1):.5*(Math.sqrt(1-(t-=2)*t)+1),easeInElastic:t=>lo(t)?t:sp(t,.075,.3),easeOutElastic:t=>lo(t)?t:np(t,.075,.3),easeInOutElastic(t){return lo(t)?t:t<.5?.5*sp(t*2,.1125,.45):.5+.5*np(t*2-1,.1125,.45)},easeInBack(t){return t*t*((1.70158+1)*t-1.70158)},easeOutBack(t){return(t-=1)*t*((1.70158+1)*t+1.70158)+1},easeInOutBack(t){let e=1.70158;return(t/=.5)<1?.5*(t*t*(((e*=1.525)+1)*t-e)):.5*((t-=2)*t*(((e*=1.525)+1)*t+e)+2)},easeInBounce:t=>1-Wi.easeOutBounce(1-t),easeOutBounce(t){return t<1/2.75?7.5625*t*t:t<2/2.75?7.5625*(t-=1.5/2.75)*t+.75:t<2.5/2.75?7.5625*(t-=2.25/2.75)*t+.9375:7.5625*(t-=2.625/2.75)*t+.984375},easeInOutBounce:t=>t<.5?Wi.easeInBounce(t*2)*.5:Wi.easeOutBounce(t*2-1)*.5+.5};function Gh(t){if(t&&typeof t=="object"){const e=t.toString();return e==="[object CanvasPattern]"||e==="[object CanvasGradient]"}return!1}function rp(t){return Gh(t)?t:new ma(t)}function Gc(t){return Gh(t)?t:new ma(t).saturate(.5).darken(.1).hexString()}const Qk=["x","y","borderWidth","radius","tension"],Xk=["color","borderColor","backgroundColor"];function Zk(t){t.set("animation",{delay:void 0,duration:1e3,easing:"easeOutQuart",fn:void 0,from:void 0,loop:void 0,to:void 0,type:void 0}),t.describe("animation",{_fallback:!1,_indexable:!1,_scriptable:e=>e!=="onProgress"&&e!=="onComplete"&&e!=="fn"}),t.set("animations",{colors:{type:"color",properties:Xk},numbers:{type:"number",properties:Qk}}),t.describe("animations",{_fallback:"animation"}),t.set("transitions",{active:{animation:{duration:400}},resize:{animation:{duration:0}},show:{animations:{colors:{from:"transparent"},visible:{type:"boolean",duration:0}}},hide:{animations:{colors:{to:"transparent"},visible:{type:"boolean",easing:"linear",fn:e=>e|0}}}})}function eS(t){t.set("layout",{autoPadding:!0,padding:{top:0,right:0,bottom:0,left:0}})}const ip=new Map;function tS(t,e){e=e||{};const s=t+JSON.stringify(e);let n=ip.get(s);return n||(n=new Intl.NumberFormat(t,e),ip.set(s,n)),n}function Yh(t,e,s){return tS(e,s).format(t)}const Ty={values(t){return Se(t)?t:""+t},numeric(t,e,s){if(t===0)return"0";const n=this.chart.options.locale;let r,i=t;if(s.length>1){const d=Math.max(Math.abs(s[0].value),Math.abs(s[s.length-1].value));(d<1e-4||d>1e15)&&(r="scientific"),i=sS(t,s)}const o=an(Math.abs(i)),l=isNaN(o)?1:Math.max(Math.min(-1*Math.floor(o),20),0),c={notation:r,minimumFractionDigits:l,maximumFractionDigits:l};return Object.assign(c,this.options.ticks.format),Yh(t,n,c)},logarithmic(t,e,s){if(t===0)return"0";const n=s[e].significand||t/Math.pow(10,Math.floor(an(t)));return[1,2,3,5,10,15].includes(n)||e>.8*s.length?Ty.numeric.call(this,t,e,s):""}};function sS(t,e){let s=e.length>3?e[2].value-e[1].value:e[1].value-e[0].value;return Math.abs(s)>=1&&t!==Math.floor(t)&&(s=t-Math.floor(t)),s}var Xl={formatters:Ty};function nS(t){t.set("scale",{display:!0,offset:!1,reverse:!1,beginAtZero:!1,bounds:"ticks",clip:!0,grace:0,grid:{display:!0,lineWidth:1,drawOnChartArea:!0,drawTicks:!0,tickLength:8,tickWidth:(e,s)=>s.lineWidth,tickColor:(e,s)=>s.color,offset:!1},border:{display:!0,dash:[],dashOffset:0,width:1},title:{display:!1,text:"",padding:{top:4,bottom:4}},ticks:{minRotation:0,maxRotation:50,mirror:!1,textStrokeWidth:0,textStrokeColor:"",padding:3,display:!0,autoSkip:!0,autoSkipPadding:3,labelOffset:0,callback:Xl.formatters.values,minor:{},major:{},align:"center",crossAlign:"near",showLabelBackdrop:!1,backdropColor:"rgba(255, 255, 255, 0.75)",backdropPadding:2}}),t.route("scale.ticks","color","","color"),t.route("scale.grid","color","","borderColor"),t.route("scale.border","color","","borderColor"),t.route("scale.title","color","","color"),t.describe("scale",{_fallback:!1,_scriptable:e=>!e.startsWith("before")&&!e.startsWith("after")&&e!=="callback"&&e!=="parser",_indexable:e=>e!=="borderDash"&&e!=="tickBorderDash"&&e!=="dash"}),t.describe("scales",{_fallback:"scale"}),t.describe("scale.ticks",{_scriptable:e=>e!=="backdropPadding"&&e!=="callback",_indexable:e=>e!=="backdropPadding"})}const sr=Object.create(null),gu=Object.create(null);function qi(t,e){if(!e)return t;const s=e.split(".");for(let n=0,r=s.length;n<r;++n){const i=s[n];t=t[i]||(t[i]=Object.create(null))}return t}function Yc(t,e,s){return typeof e=="string"?pa(qi(t,e),s):pa(qi(t,""),e)}class rS{constructor(e,s){this.animation=void 0,this.backgroundColor="rgba(0,0,0,0.1)",this.borderColor="rgba(0,0,0,0.1)",this.color="#666",this.datasets={},this.devicePixelRatio=n=>n.chart.platform.getDevicePixelRatio(),this.elements={},this.events=["mousemove","mouseout","click","touchstart","touchmove"],this.font={family:"'Helvetica Neue', 'Helvetica', 'Arial', sans-serif",size:12,style:"normal",lineHeight:1.2,weight:null},this.hover={},this.hoverBackgroundColor=(n,r)=>Gc(r.backgroundColor),this.hoverBorderColor=(n,r)=>Gc(r.borderColor),this.hoverColor=(n,r)=>Gc(r.color),this.indexAxis="x",this.interaction={mode:"nearest",intersect:!0,includeInvisible:!1},this.maintainAspectRatio=!0,this.onHover=null,this.onClick=null,this.parsing=!0,this.plugins={},this.responsive=!0,this.scale=void 0,this.scales={},this.showLine=!0,this.drawActiveElementsOnTop=!0,this.describe(e),this.apply(s)}set(e,s){return Yc(this,e,s)}get(e){return qi(this,e)}describe(e,s){return Yc(gu,e,s)}override(e,s){return Yc(sr,e,s)}route(e,s,n,r){const i=qi(this,e),o=qi(this,n),l="_"+s;Object.defineProperties(i,{[l]:{value:i[s],writable:!0},[s]:{enumerable:!0,get(){const c=this[l],d=o[r];return me(c)?Object.assign({},d,c):ce(c,d)},set(c){this[l]=c}}})}apply(e){e.forEach(s=>s(this))}}var Fe=new rS({_scriptable:t=>!t.startsWith("on"),_indexable:t=>t!=="events",hover:{_fallback:"interaction"},interaction:{_scriptable:!1,_indexable:!1}},[Zk,eS,nS]);function iS(t){return!t||ge(t.size)||ge(t.family)?null:(t.style?t.style+" ":"")+(t.weight?t.weight+" ":"")+t.size+"px "+t.family}function bl(t,e,s,n,r){let i=e[r];return i||(i=e[r]=t.measureText(r).width,s.push(r)),i>n&&(n=i),n}function aS(t,e,s,n){n=n||{};let r=n.data=n.data||{},i=n.garbageCollect=n.garbageCollect||[];n.font!==e&&(r=n.data={},i=n.garbageCollect=[],n.font=e),t.save(),t.font=e;let o=0;const l=s.length;let c,d,u,h,f;for(c=0;c<l;c++)if(h=s[c],h!=null&&!Se(h))o=bl(t,r,i,o,h);else if(Se(h))for(d=0,u=h.length;d<u;d++)f=h[d],f!=null&&!Se(f)&&(o=bl(t,r,i,o,f));t.restore();const m=i.length/2;if(m>s.length){for(c=0;c<m;c++)delete r[i[c]];i.splice(0,m)}return o}function Ln(t,e,s){const n=t.currentDevicePixelRatio,r=s!==0?Math.max(s/2,.5):0;return Math.round((e-r)*n)/n+r}function ap(t,e){!e&&!t||(e=e||t.getContext("2d"),e.save(),e.resetTransform(),e.clearRect(0,0,t.width,t.height),e.restore())}function xu(t,e,s,n){My(t,e,s,n,null)}function My(t,e,s,n,r){let i,o,l,c,d,u,h,f;const m=e.pointStyle,p=e.rotation,v=e.radius;let g=(p||0)*Ik;if(m&&typeof m=="object"&&(i=m.toString(),i==="[object HTMLImageElement]"||i==="[object HTMLCanvasElement]")){t.save(),t.translate(s,n),t.rotate(g),t.drawImage(m,-m.width/2,-m.height/2,m.width,m.height),t.restore();return}if(!(isNaN(v)||v<=0)){switch(t.beginPath(),m){default:r?t.ellipse(s,n,r/2,v,0,0,It):t.arc(s,n,v,0,It),t.closePath();break;case"triangle":u=r?r/2:v,t.moveTo(s+Math.sin(g)*u,n-Math.cos(g)*v),g+=Xm,t.lineTo(s+Math.sin(g)*u,n-Math.cos(g)*v),g+=Xm,t.lineTo(s+Math.sin(g)*u,n-Math.cos(g)*v),t.closePath();break;case"rectRounded":d=v*.516,c=v-d,o=Math.cos(g+An)*c,h=Math.cos(g+An)*(r?r/2-d:c),l=Math.sin(g+An)*c,f=Math.sin(g+An)*(r?r/2-d:c),t.arc(s-h,n-l,d,g-Ve,g-Dt),t.arc(s+f,n-o,d,g-Dt,g),t.arc(s+h,n+l,d,g,g+Dt),t.arc(s-f,n+o,d,g+Dt,g+Ve),t.closePath();break;case"rect":if(!p){c=Math.SQRT1_2*v,u=r?r/2:c,t.rect(s-u,n-c,2*u,2*c);break}g+=An;case"rectRot":h=Math.cos(g)*(r?r/2:v),o=Math.cos(g)*v,l=Math.sin(g)*v,f=Math.sin(g)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+f,n-o),t.lineTo(s+h,n+l),t.lineTo(s-f,n+o),t.closePath();break;case"crossRot":g+=An;case"cross":h=Math.cos(g)*(r?r/2:v),o=Math.cos(g)*v,l=Math.sin(g)*v,f=Math.sin(g)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o);break;case"star":h=Math.cos(g)*(r?r/2:v),o=Math.cos(g)*v,l=Math.sin(g)*v,f=Math.sin(g)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o),g+=An,h=Math.cos(g)*(r?r/2:v),o=Math.cos(g)*v,l=Math.sin(g)*v,f=Math.sin(g)*(r?r/2:v),t.moveTo(s-h,n-l),t.lineTo(s+h,n+l),t.moveTo(s+f,n-o),t.lineTo(s-f,n+o);break;case"line":o=r?r/2:Math.cos(g)*v,l=Math.sin(g)*v,t.moveTo(s-o,n-l),t.lineTo(s+o,n+l);break;case"dash":t.moveTo(s,n),t.lineTo(s+Math.cos(g)*(r?r/2:v),n+Math.sin(g)*v);break;case!1:t.closePath();break}t.fill(),e.borderWidth>0&&t.stroke()}}function Fs(t,e,s){return s=s||.5,!e||t&&t.x>e.left-s&&t.x<e.right+s&&t.y>e.top-s&&t.y<e.bottom+s}function Zl(t,e){t.save(),t.beginPath(),t.rect(e.left,e.top,e.right-e.left,e.bottom-e.top),t.clip()}function ec(t){t.restore()}function oS(t,e,s,n,r){if(!e)return t.lineTo(s.x,s.y);if(r==="middle"){const i=(e.x+s.x)/2;t.lineTo(i,e.y),t.lineTo(i,s.y)}else r==="after"!=!!n?t.lineTo(e.x,s.y):t.lineTo(s.x,e.y);t.lineTo(s.x,s.y)}function lS(t,e,s,n){if(!e)return t.lineTo(s.x,s.y);t.bezierCurveTo(n?e.cp1x:e.cp2x,n?e.cp1y:e.cp2y,n?s.cp2x:s.cp1x,n?s.cp2y:s.cp1y,s.x,s.y)}function cS(t,e){e.translation&&t.translate(e.translation[0],e.translation[1]),ge(e.rotation)||t.rotate(e.rotation),e.color&&(t.fillStyle=e.color),e.textAlign&&(t.textAlign=e.textAlign),e.textBaseline&&(t.textBaseline=e.textBaseline)}function dS(t,e,s,n,r){if(r.strikethrough||r.underline){const i=t.measureText(n),o=e-i.actualBoundingBoxLeft,l=e+i.actualBoundingBoxRight,c=s-i.actualBoundingBoxAscent,d=s+i.actualBoundingBoxDescent,u=r.strikethrough?(c+d)/2:d;t.strokeStyle=t.fillStyle,t.beginPath(),t.lineWidth=r.decorationWidth||2,t.moveTo(o,u),t.lineTo(l,u),t.stroke()}}function uS(t,e){const s=t.fillStyle;t.fillStyle=e.color,t.fillRect(e.left,e.top,e.width,e.height),t.fillStyle=s}function nr(t,e,s,n,r,i={}){const o=Se(e)?e:[e],l=i.strokeWidth>0&&i.strokeColor!=="";let c,d;for(t.save(),t.font=r.string,cS(t,i),c=0;c<o.length;++c)d=o[c],i.backdrop&&uS(t,i.backdrop),l&&(i.strokeColor&&(t.strokeStyle=i.strokeColor),ge(i.strokeWidth)||(t.lineWidth=i.strokeWidth),t.strokeText(d,s,n,i.maxWidth)),t.fillText(d,s,n,i.maxWidth),dS(t,s,n,d,i),n+=Number(r.lineHeight);t.restore()}function ya(t,e){const{x:s,y:n,w:r,h:i,radius:o}=e;t.arc(s+o.topLeft,n+o.topLeft,o.topLeft,1.5*Ve,Ve,!0),t.lineTo(s,n+i-o.bottomLeft),t.arc(s+o.bottomLeft,n+i-o.bottomLeft,o.bottomLeft,Ve,Dt,!0),t.lineTo(s+r-o.bottomRight,n+i),t.arc(s+r-o.bottomRight,n+i-o.bottomRight,o.bottomRight,Dt,0,!0),t.lineTo(s+r,n+o.topRight),t.arc(s+r-o.topRight,n+o.topRight,o.topRight,0,-Dt,!0),t.lineTo(s+o.topLeft,n)}const hS=/^(normal|(\d+(?:\.\d+)?)(px|em|%)?)$/,fS=/^(normal|italic|initial|inherit|unset|(oblique( -?[0-9]?[0-9]deg)?))$/;function mS(t,e){const s=(""+t).match(hS);if(!s||s[1]==="normal")return e*1.2;switch(t=+s[2],s[3]){case"px":return t;case"%":t/=100;break}return e*t}const pS=t=>+t||0;function Dy(t,e){const s={},n=me(e),r=n?Object.keys(e):e,i=me(t)?n?o=>ce(t[o],t[e[o]]):o=>t[o]:()=>t;for(const o of r)s[o]=pS(i(o));return s}function Oy(t){return Dy(t,{top:"y",right:"x",bottom:"y",left:"x"})}function Kn(t){return Dy(t,["topLeft","topRight","bottomLeft","bottomRight"])}function dt(t){const e=Oy(t);return e.width=e.left+e.right,e.height=e.top+e.bottom,e}function Ge(t,e){t=t||{},e=e||Fe.font;let s=ce(t.size,e.size);typeof s=="string"&&(s=parseInt(s,10));let n=ce(t.style,e.style);n&&!(""+n).match(fS)&&(console.warn('Invalid font style specified: "'+n+'"'),n=void 0);const r={family:ce(t.family,e.family),lineHeight:mS(ce(t.lineHeight,e.lineHeight),s),size:s,style:n,weight:ce(t.weight,e.weight),string:""};return r.string=iS(r),r}function co(t,e,s,n){let r=!0,i,o,l;for(i=0,o=t.length;i<o;++i)if(l=t[i],l!==void 0&&(e!==void 0&&typeof l=="function"&&(l=l(e),r=!1),s!==void 0&&Se(l)&&(l=l[s%l.length],r=!1),l!==void 0))return n&&!r&&(n.cacheable=!1),l}function gS(t,e,s){const{min:n,max:r}=t,i=Ak(e,(r-n)/2),o=(l,c)=>s&&l===0?0:l+c;return{min:o(n,-Math.abs(i)),max:o(r,i)}}function En(t,e){return Object.assign(Object.create(t),e)}function Jh(t,e=[""],s,n,r=()=>t[0]){const i=s||t;typeof n>"u"&&(n=$y("_fallback",t));const o={[Symbol.toStringTag]:"Object",_cacheable:!0,_scopes:t,_rootScopes:i,_fallback:n,_getTarget:r,override:l=>Jh([l,...t],e,i,n)};return new Proxy(o,{deleteProperty(l,c){return delete l[c],delete l._keys,delete t[0][c],!0},get(l,c){return Iy(l,c,()=>NS(c,e,t,l))},getOwnPropertyDescriptor(l,c){return Reflect.getOwnPropertyDescriptor(l._scopes[0],c)},getPrototypeOf(){return Reflect.getPrototypeOf(t[0])},has(l,c){return lp(l).includes(c)},ownKeys(l){return lp(l)},set(l,c,d){const u=l._storage||(l._storage=r());return l[c]=u[c]=d,delete l._keys,!0}})}function Wr(t,e,s,n){const r={_cacheable:!1,_proxy:t,_context:e,_subProxy:s,_stack:new Set,_descriptors:Ry(t,n),setContext:i=>Wr(t,i,s,n),override:i=>Wr(t.override(i),e,s,n)};return new Proxy(r,{deleteProperty(i,o){return delete i[o],delete t[o],!0},get(i,o,l){return Iy(i,o,()=>yS(i,o,l))},getOwnPropertyDescriptor(i,o){return i._descriptors.allKeys?Reflect.has(t,o)?{enumerable:!0,configurable:!0}:void 0:Reflect.getOwnPropertyDescriptor(t,o)},getPrototypeOf(){return Reflect.getPrototypeOf(t)},has(i,o){return Reflect.has(t,o)},ownKeys(){return Reflect.ownKeys(t)},set(i,o,l){return t[o]=l,delete i[o],!0}})}function Ry(t,e={scriptable:!0,indexable:!0}){const{_scriptable:s=e.scriptable,_indexable:n=e.indexable,_allKeys:r=e.allKeys}=t;return{allKeys:r,scriptable:s,indexable:n,isScriptable:jn(s)?s:()=>s,isIndexable:jn(n)?n:()=>n}}const xS=(t,e)=>t?t+Vh(e):e,Qh=(t,e)=>me(e)&&t!=="adapters"&&(Object.getPrototypeOf(e)===null||e.constructor===Object);function Iy(t,e,s){if(Object.prototype.hasOwnProperty.call(t,e)||e==="constructor")return t[e];const n=s();return t[e]=n,n}function yS(t,e,s){const{_proxy:n,_context:r,_subProxy:i,_descriptors:o}=t;let l=n[e];return jn(l)&&o.isScriptable(e)&&(l=vS(e,l,t,s)),Se(l)&&l.length&&(l=bS(e,l,t,o.isIndexable)),Qh(e,l)&&(l=Wr(l,r,i&&i[e],o)),l}function vS(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_stack:l}=s;if(l.has(t))throw new Error("Recursion detected: "+Array.from(l).join("->")+"->"+t);l.add(t);let c=e(i,o||n);return l.delete(t),Qh(t,c)&&(c=Xh(r._scopes,r,t,c)),c}function bS(t,e,s,n){const{_proxy:r,_context:i,_subProxy:o,_descriptors:l}=s;if(typeof i.index<"u"&&n(t))return e[i.index%e.length];if(me(e[0])){const c=e,d=r._scopes.filter(u=>u!==c);e=[];for(const u of c){const h=Xh(d,r,t,u);e.push(Wr(h,i,o&&o[t],l))}}return e}function Fy(t,e,s){return jn(t)?t(e,s):t}const wS=(t,e)=>t===!0?e:typeof t=="string"?Vr(e,t):void 0;function _S(t,e,s,n,r){for(const i of e){const o=wS(s,i);if(o){t.add(o);const l=Fy(o._fallback,s,r);if(typeof l<"u"&&l!==s&&l!==n)return l}else if(o===!1&&typeof n<"u"&&s!==n)return null}return!1}function Xh(t,e,s,n){const r=e._rootScopes,i=Fy(e._fallback,s,n),o=[...t,...r],l=new Set;l.add(n);let c=op(l,o,s,i||s,n);return c===null||typeof i<"u"&&i!==s&&(c=op(l,o,i,c,n),c===null)?!1:Jh(Array.from(l),[""],r,i,()=>jS(e,s,n))}function op(t,e,s,n,r){for(;s;)s=_S(t,e,s,n,r);return s}function jS(t,e,s){const n=t._getTarget();e in n||(n[e]={});const r=n[e];return Se(r)&&me(s)?s:r||{}}function NS(t,e,s,n){let r;for(const i of e)if(r=$y(xS(i,t),s),typeof r<"u")return Qh(t,r)?Xh(s,n,t,r):r}function $y(t,e){for(const s of e){if(!s)continue;const n=s[t];if(typeof n<"u")return n}}function lp(t){let e=t._keys;return e||(e=t._keys=kS(t._scopes)),e}function kS(t){const e=new Set;for(const s of t)for(const n of Object.keys(s).filter(r=>!r.startsWith("_")))e.add(n);return Array.from(e)}const SS=Number.EPSILON||1e-14,qr=(t,e)=>e<t.length&&!t[e].skip&&t[e],zy=t=>t==="x"?"y":"x";function CS(t,e,s,n){const r=t.skip?e:t,i=e,o=s.skip?e:s,l=pu(i,r),c=pu(o,i);let d=l/(l+c),u=c/(l+c);d=isNaN(d)?0:d,u=isNaN(u)?0:u;const h=n*d,f=n*u;return{previous:{x:i.x-h*(o.x-r.x),y:i.y-h*(o.y-r.y)},next:{x:i.x+f*(o.x-r.x),y:i.y+f*(o.y-r.y)}}}function ES(t,e,s){const n=t.length;let r,i,o,l,c,d=qr(t,0);for(let u=0;u<n-1;++u)if(c=d,d=qr(t,u+1),!(!c||!d)){if(Vi(e[u],0,SS)){s[u]=s[u+1]=0;continue}r=s[u]/e[u],i=s[u+1]/e[u],l=Math.pow(r,2)+Math.pow(i,2),!(l<=9)&&(o=3/Math.sqrt(l),s[u]=r*o*e[u],s[u+1]=i*o*e[u])}}function PS(t,e,s="x"){const n=zy(s),r=t.length;let i,o,l,c=qr(t,0);for(let d=0;d<r;++d){if(o=l,l=c,c=qr(t,d+1),!l)continue;const u=l[s],h=l[n];o&&(i=(u-o[s])/3,l[`cp1${s}`]=u-i,l[`cp1${n}`]=h-i*e[d]),c&&(i=(c[s]-u)/3,l[`cp2${s}`]=u+i,l[`cp2${n}`]=h+i*e[d])}}function AS(t,e="x"){const s=zy(e),n=t.length,r=Array(n).fill(0),i=Array(n);let o,l,c,d=qr(t,0);for(o=0;o<n;++o)if(l=c,c=d,d=qr(t,o+1),!!c){if(d){const u=d[e]-c[e];r[o]=u!==0?(d[s]-c[s])/u:0}i[o]=l?d?bs(r[o-1])!==bs(r[o])?0:(r[o-1]+r[o])/2:r[o-1]:r[o]}ES(t,r,i),PS(t,i,e)}function uo(t,e,s){return Math.max(Math.min(t,s),e)}function LS(t,e){let s,n,r,i,o,l=Fs(t[0],e);for(s=0,n=t.length;s<n;++s)o=i,i=l,l=s<n-1&&Fs(t[s+1],e),i&&(r=t[s],o&&(r.cp1x=uo(r.cp1x,e.left,e.right),r.cp1y=uo(r.cp1y,e.top,e.bottom)),l&&(r.cp2x=uo(r.cp2x,e.left,e.right),r.cp2y=uo(r.cp2y,e.top,e.bottom)))}function TS(t,e,s,n,r){let i,o,l,c;if(e.spanGaps&&(t=t.filter(d=>!d.skip)),e.cubicInterpolationMode==="monotone")AS(t,r);else{let d=n?t[t.length-1]:t[0];for(i=0,o=t.length;i<o;++i)l=t[i],c=CS(d,l,t[Math.min(i+1,o-(n?0:1))%o],e.tension),l.cp1x=c.previous.x,l.cp1y=c.previous.y,l.cp2x=c.next.x,l.cp2y=c.next.y,d=l}e.capBezierPoints&&LS(t,s)}function Zh(){return typeof window<"u"&&typeof document<"u"}function ef(t){let e=t.parentNode;return e&&e.toString()==="[object ShadowRoot]"&&(e=e.host),e}function wl(t,e,s){let n;return typeof t=="string"?(n=parseInt(t,10),t.indexOf("%")!==-1&&(n=n/100*e.parentNode[s])):n=t,n}const tc=t=>t.ownerDocument.defaultView.getComputedStyle(t,null);function MS(t,e){return tc(t).getPropertyValue(e)}const DS=["top","right","bottom","left"];function Gn(t,e,s){const n={};s=s?"-"+s:"";for(let r=0;r<4;r++){const i=DS[r];n[i]=parseFloat(t[e+"-"+i+s])||0}return n.width=n.left+n.right,n.height=n.top+n.bottom,n}const OS=(t,e,s)=>(t>0||e>0)&&(!s||!s.shadowRoot);function RS(t,e){const s=t.touches,n=s&&s.length?s[0]:t,{offsetX:r,offsetY:i}=n;let o=!1,l,c;if(OS(r,i,t.target))l=r,c=i;else{const d=e.getBoundingClientRect();l=n.clientX-d.left,c=n.clientY-d.top,o=!0}return{x:l,y:c,box:o}}function In(t,e){if("native"in t)return t;const{canvas:s,currentDevicePixelRatio:n}=e,r=tc(s),i=r.boxSizing==="border-box",o=Gn(r,"padding"),l=Gn(r,"border","width"),{x:c,y:d,box:u}=RS(t,s),h=o.left+(u&&l.left),f=o.top+(u&&l.top);let{width:m,height:p}=e;return i&&(m-=o.width+l.width,p-=o.height+l.height),{x:Math.round((c-h)/m*s.width/n),y:Math.round((d-f)/p*s.height/n)}}function IS(t,e,s){let n,r;if(e===void 0||s===void 0){const i=t&&ef(t);if(!i)e=t.clientWidth,s=t.clientHeight;else{const o=i.getBoundingClientRect(),l=tc(i),c=Gn(l,"border","width"),d=Gn(l,"padding");e=o.width-d.width-c.width,s=o.height-d.height-c.height,n=wl(l.maxWidth,i,"clientWidth"),r=wl(l.maxHeight,i,"clientHeight")}}return{width:e,height:s,maxWidth:n||vl,maxHeight:r||vl}}const ho=t=>Math.round(t*10)/10;function FS(t,e,s,n){const r=tc(t),i=Gn(r,"margin"),o=wl(r.maxWidth,t,"clientWidth")||vl,l=wl(r.maxHeight,t,"clientHeight")||vl,c=IS(t,e,s);let{width:d,height:u}=c;if(r.boxSizing==="content-box"){const f=Gn(r,"border","width"),m=Gn(r,"padding");d-=m.width+f.width,u-=m.height+f.height}return d=Math.max(0,d-i.width),u=Math.max(0,n?d/n:u-i.height),d=ho(Math.min(d,o,c.maxWidth)),u=ho(Math.min(u,l,c.maxHeight)),d&&!u&&(u=ho(d/2)),(e!==void 0||s!==void 0)&&n&&c.height&&u>c.height&&(u=c.height,d=ho(Math.floor(u*n))),{width:d,height:u}}function cp(t,e,s){const n=e||1,r=Math.floor(t.height*n),i=Math.floor(t.width*n);t.height=Math.floor(t.height),t.width=Math.floor(t.width);const o=t.canvas;return o.style&&(s||!o.style.height&&!o.style.width)&&(o.style.height=`${t.height}px`,o.style.width=`${t.width}px`),t.currentDevicePixelRatio!==n||o.height!==r||o.width!==i?(t.currentDevicePixelRatio=n,o.height=r,o.width=i,t.ctx.setTransform(n,0,0,n,0,0),!0):!1}const $S=function(){let t=!1;try{const e={get passive(){return t=!0,!1}};Zh()&&(window.addEventListener("test",null,e),window.removeEventListener("test",null,e))}catch{}return t}();function dp(t,e){const s=MS(t,e),n=s&&s.match(/^(\d+)(\.\d+)?px$/);return n?+n[1]:void 0}function Fn(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:t.y+s*(e.y-t.y)}}function zS(t,e,s,n){return{x:t.x+s*(e.x-t.x),y:n==="middle"?s<.5?t.y:e.y:n==="after"?s<1?t.y:e.y:s>0?e.y:t.y}}function US(t,e,s,n){const r={x:t.cp2x,y:t.cp2y},i={x:e.cp1x,y:e.cp1y},o=Fn(t,r,s),l=Fn(r,i,s),c=Fn(i,e,s),d=Fn(o,l,s),u=Fn(l,c,s);return Fn(d,u,s)}const BS=function(t,e){return{x(s){return t+t+e-s},setWidth(s){e=s},textAlign(s){return s==="center"?s:s==="right"?"left":"right"},xPlus(s,n){return s-n},leftForLtr(s,n){return s-n}}},HS=function(){return{x(t){return t},setWidth(t){},textAlign(t){return t},xPlus(t,e){return t+e},leftForLtr(t,e){return t}}};function Dr(t,e,s){return t?BS(e,s):HS()}function Uy(t,e){let s,n;(e==="ltr"||e==="rtl")&&(s=t.canvas.style,n=[s.getPropertyValue("direction"),s.getPropertyPriority("direction")],s.setProperty("direction",e,"important"),t.prevTextDirection=n)}function By(t,e){e!==void 0&&(delete t.prevTextDirection,t.canvas.style.setProperty("direction",e[0],e[1]))}function Hy(t){return t==="angle"?{between:Cy,compare:Bk,normalize:Tt}:{between:ln,compare:(e,s)=>e-s,normalize:e=>e}}function up({start:t,end:e,count:s,loop:n,style:r}){return{start:t%s,end:e%s,loop:n&&(e-t+1)%s===0,style:r}}function VS(t,e,s){const{property:n,start:r,end:i}=s,{between:o,normalize:l}=Hy(n),c=e.length;let{start:d,end:u,loop:h}=t,f,m;if(h){for(d+=c,u+=c,f=0,m=c;f<m&&o(l(e[d%c][n]),r,i);++f)d--,u--;d%=c,u%=c}return u<d&&(u+=c),{start:d,end:u,loop:h,style:t.style}}function Vy(t,e,s){if(!s)return[t];const{property:n,start:r,end:i}=s,o=e.length,{compare:l,between:c,normalize:d}=Hy(n),{start:u,end:h,loop:f,style:m}=VS(t,e,s),p=[];let v=!1,g=null,x,y,b;const N=()=>c(r,b,x)&&l(r,b)!==0,_=()=>l(i,x)===0||c(i,b,x),k=()=>v||N(),S=()=>!v||_();for(let j=u,C=u;j<=h;++j)y=e[j%o],!y.skip&&(x=d(y[n]),x!==b&&(v=c(x,r,i),g===null&&k()&&(g=l(x,r)===0?j:C),g!==null&&S()&&(p.push(up({start:g,end:j,loop:f,count:o,style:m})),g=null),C=j,b=x));return g!==null&&p.push(up({start:g,end:h,loop:f,count:o,style:m})),p}function Wy(t,e){const s=[],n=t.segments;for(let r=0;r<n.length;r++){const i=Vy(n[r],t.points,e);i.length&&s.push(...i)}return s}function WS(t,e,s,n){let r=0,i=e-1;if(s&&!n)for(;r<e&&!t[r].skip;)r++;for(;r<e&&t[r].skip;)r++;for(r%=e,s&&(i+=r);i>r&&t[i%e].skip;)i--;return i%=e,{start:r,end:i}}function qS(t,e,s,n){const r=t.length,i=[];let o=e,l=t[e],c;for(c=e+1;c<=s;++c){const d=t[c%r];d.skip||d.stop?l.skip||(n=!1,i.push({start:e%r,end:(c-1)%r,loop:n}),e=o=d.stop?c:null):(o=c,l.skip&&(e=c)),l=d}return o!==null&&i.push({start:e%r,end:o%r,loop:n}),i}function KS(t,e){const s=t.points,n=t.options.spanGaps,r=s.length;if(!r)return[];const i=!!t._loop,{start:o,end:l}=WS(s,r,i,n);if(n===!0)return hp(t,[{start:o,end:l,loop:i}],s,e);const c=l<o?l+r:l,d=!!t._fullLoop&&o===0&&l===r-1;return hp(t,qS(s,o,c,d),s,e)}function hp(t,e,s,n){return!n||!n.setContext||!s?e:GS(t,e,s,n)}function GS(t,e,s,n){const r=t._chart.getContext(),i=fp(t.options),{_datasetIndex:o,options:{spanGaps:l}}=t,c=s.length,d=[];let u=i,h=e[0].start,f=h;function m(p,v,g,x){const y=l?-1:1;if(p!==v){for(p+=c;s[p%c].skip;)p-=y;for(;s[v%c].skip;)v+=y;p%c!==v%c&&(d.push({start:p%c,end:v%c,loop:g,style:x}),u=x,h=v%c)}}for(const p of e){h=l?h:p.start;let v=s[h%c],g;for(f=h+1;f<=p.end;f++){const x=s[f%c];g=fp(n.setContext(En(r,{type:"segment",p0:v,p1:x,p0DataIndex:(f-1)%c,p1DataIndex:f%c,datasetIndex:o}))),YS(g,u)&&m(h,f-1,p.loop,u),v=x,u=g}h<f-1&&m(h,f-1,p.loop,u)}return d}function fp(t){return{backgroundColor:t.backgroundColor,borderCapStyle:t.borderCapStyle,borderDash:t.borderDash,borderDashOffset:t.borderDashOffset,borderJoinStyle:t.borderJoinStyle,borderWidth:t.borderWidth,borderColor:t.borderColor}}function YS(t,e){if(!e)return!1;const s=[],n=function(r,i){return Gh(i)?(s.includes(i)||s.push(i),s.indexOf(i)):i};return JSON.stringify(t,n)!==JSON.stringify(e,n)}function fo(t,e,s){return t.options.clip?t[s]:e[s]}function JS(t,e){const{xScale:s,yScale:n}=t;return s&&n?{left:fo(s,e,"left"),right:fo(s,e,"right"),top:fo(n,e,"top"),bottom:fo(n,e,"bottom")}:e}function qy(t,e){const s=e._clip;if(s.disabled)return!1;const n=JS(e,t.chartArea);return{left:s.left===!1?0:n.left-(s.left===!0?0:s.left),right:s.right===!1?t.width:n.right+(s.right===!0?0:s.right),top:s.top===!1?0:n.top-(s.top===!0?0:s.top),bottom:s.bottom===!1?t.height:n.bottom+(s.bottom===!0?0:s.bottom)}}/*!
 * Chart.js v4.5.0
 * https://www.chartjs.org
 * (c) 2025 Chart.js Contributors
 * Released under the MIT License
 */class QS{constructor(){this._request=null,this._charts=new Map,this._running=!1,this._lastDate=void 0}_notify(e,s,n,r){const i=s.listeners[r],o=s.duration;i.forEach(l=>l({chart:e,initial:s.initial,numSteps:o,currentStep:Math.min(n-s.start,o)}))}_refresh(){this._request||(this._running=!0,this._request=Ay.call(window,()=>{this._update(),this._request=null,this._running&&this._refresh()}))}_update(e=Date.now()){let s=0;this._charts.forEach((n,r)=>{if(!n.running||!n.items.length)return;const i=n.items;let o=i.length-1,l=!1,c;for(;o>=0;--o)c=i[o],c._active?(c._total>n.duration&&(n.duration=c._total),c.tick(e),l=!0):(i[o]=i[i.length-1],i.pop());l&&(r.draw(),this._notify(r,n,e,"progress")),i.length||(n.running=!1,this._notify(r,n,e,"complete"),n.initial=!1),s+=i.length}),this._lastDate=e,s===0&&(this._running=!1)}_getAnims(e){const s=this._charts;let n=s.get(e);return n||(n={running:!1,initial:!0,items:[],listeners:{complete:[],progress:[]}},s.set(e,n)),n}listen(e,s,n){this._getAnims(e).listeners[s].push(n)}add(e,s){!s||!s.length||this._getAnims(e).items.push(...s)}has(e){return this._getAnims(e).items.length>0}start(e){const s=this._charts.get(e);s&&(s.running=!0,s.start=Date.now(),s.duration=s.items.reduce((n,r)=>Math.max(n,r._duration),0),this._refresh())}running(e){if(!this._running)return!1;const s=this._charts.get(e);return!(!s||!s.running||!s.items.length)}stop(e){const s=this._charts.get(e);if(!s||!s.items.length)return;const n=s.items;let r=n.length-1;for(;r>=0;--r)n[r].cancel();s.items=[],this._notify(e,s,Date.now(),"complete")}remove(e){return this._charts.delete(e)}}var Ps=new QS;const mp="transparent",XS={boolean(t,e,s){return s>.5?e:t},color(t,e,s){const n=rp(t||mp),r=n.valid&&rp(e||mp);return r&&r.valid?r.mix(n,s).hexString():e},number(t,e,s){return t+(e-t)*s}};class ZS{constructor(e,s,n,r){const i=s[n];r=co([e.to,r,i,e.from]);const o=co([e.from,i,r]);this._active=!0,this._fn=e.fn||XS[e.type||typeof o],this._easing=Wi[e.easing]||Wi.linear,this._start=Math.floor(Date.now()+(e.delay||0)),this._duration=this._total=Math.floor(e.duration),this._loop=!!e.loop,this._target=s,this._prop=n,this._from=o,this._to=r,this._promises=void 0}active(){return this._active}update(e,s,n){if(this._active){this._notify(!1);const r=this._target[this._prop],i=n-this._start,o=this._duration-i;this._start=n,this._duration=Math.floor(Math.max(o,e.duration)),this._total+=i,this._loop=!!e.loop,this._to=co([e.to,s,r,e.from]),this._from=co([e.from,r,s])}}cancel(){this._active&&(this.tick(Date.now()),this._active=!1,this._notify(!1))}tick(e){const s=e-this._start,n=this._duration,r=this._prop,i=this._from,o=this._loop,l=this._to;let c;if(this._active=i!==l&&(o||s<n),!this._active){this._target[r]=l,this._notify(!0);return}if(s<0){this._target[r]=i;return}c=s/n%2,c=o&&c>1?2-c:c,c=this._easing(Math.min(1,Math.max(0,c))),this._target[r]=this._fn(i,l,c)}wait(){const e=this._promises||(this._promises=[]);return new Promise((s,n)=>{e.push({res:s,rej:n})})}_notify(e){const s=e?"res":"rej",n=this._promises||[];for(let r=0;r<n.length;r++)n[r][s]()}}class Ky{constructor(e,s){this._chart=e,this._properties=new Map,this.configure(s)}configure(e){if(!me(e))return;const s=Object.keys(Fe.animation),n=this._properties;Object.getOwnPropertyNames(e).forEach(r=>{const i=e[r];if(!me(i))return;const o={};for(const l of s)o[l]=i[l];(Se(i.properties)&&i.properties||[r]).forEach(l=>{(l===r||!n.has(l))&&n.set(l,o)})})}_animateOptions(e,s){const n=s.options,r=tC(e,n);if(!r)return[];const i=this._createAnimations(r,n);return n.$shared&&eC(e.options.$animations,n).then(()=>{e.options=n},()=>{}),i}_createAnimations(e,s){const n=this._properties,r=[],i=e.$animations||(e.$animations={}),o=Object.keys(s),l=Date.now();let c;for(c=o.length-1;c>=0;--c){const d=o[c];if(d.charAt(0)==="$")continue;if(d==="options"){r.push(...this._animateOptions(e,s));continue}const u=s[d];let h=i[d];const f=n.get(d);if(h)if(f&&h.active()){h.update(f,u,l);continue}else h.cancel();if(!f||!f.duration){e[d]=u;continue}i[d]=h=new ZS(f,e,d,u),r.push(h)}return r}update(e,s){if(this._properties.size===0){Object.assign(e,s);return}const n=this._createAnimations(e,s);if(n.length)return Ps.add(this._chart,n),!0}}function eC(t,e){const s=[],n=Object.keys(e);for(let r=0;r<n.length;r++){const i=t[n[r]];i&&i.active()&&s.push(i.wait())}return Promise.all(s)}function tC(t,e){if(!e)return;let s=t.options;if(!s){t.options=e;return}return s.$shared&&(t.options=s=Object.assign({},s,{$shared:!1,$animations:{}})),s}function pp(t,e){const s=t&&t.options||{},n=s.reverse,r=s.min===void 0?e:0,i=s.max===void 0?e:0;return{start:n?i:r,end:n?r:i}}function sC(t,e,s){if(s===!1)return!1;const n=pp(t,s),r=pp(e,s);return{top:r.end,right:n.end,bottom:r.start,left:n.start}}function nC(t){let e,s,n,r;return me(t)?(e=t.top,s=t.right,n=t.bottom,r=t.left):e=s=n=r=t,{top:e,right:s,bottom:n,left:r,disabled:t===!1}}function Gy(t,e){const s=[],n=t._getSortedDatasetMetas(e);let r,i;for(r=0,i=n.length;r<i;++r)s.push(n[r].index);return s}function gp(t,e,s,n={}){const r=t.keys,i=n.mode==="single";let o,l,c,d;if(e===null)return;let u=!1;for(o=0,l=r.length;o<l;++o){if(c=+r[o],c===s){if(u=!0,n.all)continue;break}d=t.values[c],Ie(d)&&(i||e===0||bs(e)===bs(d))&&(e+=d)}return!u&&!n.all?0:e}function rC(t,e){const{iScale:s,vScale:n}=e,r=s.axis==="x"?"x":"y",i=n.axis==="x"?"x":"y",o=Object.keys(t),l=new Array(o.length);let c,d,u;for(c=0,d=o.length;c<d;++c)u=o[c],l[c]={[r]:u,[i]:t[u]};return l}function Jc(t,e){const s=t&&t.options.stacked;return s||s===void 0&&e.stack!==void 0}function iC(t,e,s){return`${t.id}.${e.id}.${s.stack||s.type}`}function aC(t){const{min:e,max:s,minDefined:n,maxDefined:r}=t.getUserBounds();return{min:n?e:Number.NEGATIVE_INFINITY,max:r?s:Number.POSITIVE_INFINITY}}function oC(t,e,s){const n=t[e]||(t[e]={});return n[s]||(n[s]={})}function xp(t,e,s,n){for(const r of e.getMatchingVisibleMetas(n).reverse()){const i=t[r.index];if(s&&i>0||!s&&i<0)return r.index}return null}function yp(t,e){const{chart:s,_cachedMeta:n}=t,r=s._stacks||(s._stacks={}),{iScale:i,vScale:o,index:l}=n,c=i.axis,d=o.axis,u=iC(i,o,n),h=e.length;let f;for(let m=0;m<h;++m){const p=e[m],{[c]:v,[d]:g}=p,x=p._stacks||(p._stacks={});f=x[d]=oC(r,u,v),f[l]=g,f._top=xp(f,o,!0,n.type),f._bottom=xp(f,o,!1,n.type);const y=f._visualValues||(f._visualValues={});y[l]=g}}function Qc(t,e){const s=t.scales;return Object.keys(s).filter(n=>s[n].axis===e).shift()}function lC(t,e){return En(t,{active:!1,dataset:void 0,datasetIndex:e,index:e,mode:"default",type:"dataset"})}function cC(t,e,s){return En(t,{active:!1,dataIndex:e,parsed:void 0,raw:void 0,element:s,index:e,mode:"default",type:"data"})}function gi(t,e){const s=t.controller.index,n=t.vScale&&t.vScale.axis;if(n){e=e||t._parsed;for(const r of e){const i=r._stacks;if(!i||i[n]===void 0||i[n][s]===void 0)return;delete i[n][s],i[n]._visualValues!==void 0&&i[n]._visualValues[s]!==void 0&&delete i[n]._visualValues[s]}}}const Xc=t=>t==="reset"||t==="none",vp=(t,e)=>e?t:Object.assign({},t),dC=(t,e,s)=>t&&!e.hidden&&e._stacked&&{keys:Gy(s,!0),values:null};class Or{constructor(e,s){this.chart=e,this._ctx=e.ctx,this.index=s,this._cachedDataOpts={},this._cachedMeta=this.getMeta(),this._type=this._cachedMeta.type,this.options=void 0,this._parsing=!1,this._data=void 0,this._objectData=void 0,this._sharedOptions=void 0,this._drawStart=void 0,this._drawCount=void 0,this.enableOptionSharing=!1,this.supportsDecimation=!1,this.$context=void 0,this._syncList=[],this.datasetElementType=new.target.datasetElementType,this.dataElementType=new.target.dataElementType,this.initialize()}initialize(){const e=this._cachedMeta;this.configure(),this.linkScales(),e._stacked=Jc(e.vScale,e),this.addElements(),this.options.fill&&!this.chart.isPluginEnabled("filler")&&console.warn("Tried to use the 'fill' option without the 'Filler' plugin enabled. Please import and register the 'Filler' plugin and make sure it is not disabled in the options")}updateIndex(e){this.index!==e&&gi(this._cachedMeta),this.index=e}linkScales(){const e=this.chart,s=this._cachedMeta,n=this.getDataset(),r=(h,f,m,p)=>h==="x"?f:h==="r"?p:m,i=s.xAxisID=ce(n.xAxisID,Qc(e,"x")),o=s.yAxisID=ce(n.yAxisID,Qc(e,"y")),l=s.rAxisID=ce(n.rAxisID,Qc(e,"r")),c=s.indexAxis,d=s.iAxisID=r(c,i,o,l),u=s.vAxisID=r(c,o,i,l);s.xScale=this.getScaleForId(i),s.yScale=this.getScaleForId(o),s.rScale=this.getScaleForId(l),s.iScale=this.getScaleForId(d),s.vScale=this.getScaleForId(u)}getDataset(){return this.chart.data.datasets[this.index]}getMeta(){return this.chart.getDatasetMeta(this.index)}getScaleForId(e){return this.chart.scales[e]}_getOtherScale(e){const s=this._cachedMeta;return e===s.iScale?s.vScale:s.iScale}reset(){this._update("reset")}_destroy(){const e=this._cachedMeta;this._data&&tp(this._data,this),e._stacked&&gi(e)}_dataCheck(){const e=this.getDataset(),s=e.data||(e.data=[]),n=this._data;if(me(s)){const r=this._cachedMeta;this._data=rC(s,r)}else if(n!==s){if(n){tp(n,this);const r=this._cachedMeta;gi(r),r._parsed=[]}s&&Object.isExtensible(s)&&qk(s,this),this._syncList=[],this._data=s}}addElements(){const e=this._cachedMeta;this._dataCheck(),this.datasetElementType&&(e.dataset=new this.datasetElementType)}buildOrUpdateElements(e){const s=this._cachedMeta,n=this.getDataset();let r=!1;this._dataCheck();const i=s._stacked;s._stacked=Jc(s.vScale,s),s.stack!==n.stack&&(r=!0,gi(s),s.stack=n.stack),this._resyncElements(e),(r||i!==s._stacked)&&(yp(this,s._parsed),s._stacked=Jc(s.vScale,s))}configure(){const e=this.chart.config,s=e.datasetScopeKeys(this._type),n=e.getOptionScopes(this.getDataset(),s,!0);this.options=e.createResolver(n,this.getContext()),this._parsing=this.options.parsing,this._cachedDataOpts={}}parse(e,s){const{_cachedMeta:n,_data:r}=this,{iScale:i,_stacked:o}=n,l=i.axis;let c=e===0&&s===r.length?!0:n._sorted,d=e>0&&n._parsed[e-1],u,h,f;if(this._parsing===!1)n._parsed=r,n._sorted=!0,f=r;else{Se(r[e])?f=this.parseArrayData(n,r,e,s):me(r[e])?f=this.parseObjectData(n,r,e,s):f=this.parsePrimitiveData(n,r,e,s);const m=()=>h[l]===null||d&&h[l]<d[l];for(u=0;u<s;++u)n._parsed[u+e]=h=f[u],c&&(m()&&(c=!1),d=h);n._sorted=c}o&&yp(this,f)}parsePrimitiveData(e,s,n,r){const{iScale:i,vScale:o}=e,l=i.axis,c=o.axis,d=i.getLabels(),u=i===o,h=new Array(r);let f,m,p;for(f=0,m=r;f<m;++f)p=f+n,h[f]={[l]:u||i.parse(d[p],p),[c]:o.parse(s[p],p)};return h}parseArrayData(e,s,n,r){const{xScale:i,yScale:o}=e,l=new Array(r);let c,d,u,h;for(c=0,d=r;c<d;++c)u=c+n,h=s[u],l[c]={x:i.parse(h[0],u),y:o.parse(h[1],u)};return l}parseObjectData(e,s,n,r){const{xScale:i,yScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=new Array(r);let u,h,f,m;for(u=0,h=r;u<h;++u)f=u+n,m=s[f],d[u]={x:i.parse(Vr(m,l),f),y:o.parse(Vr(m,c),f)};return d}getParsed(e){return this._cachedMeta._parsed[e]}getDataElement(e){return this._cachedMeta.data[e]}applyStack(e,s,n){const r=this.chart,i=this._cachedMeta,o=s[e.axis],l={keys:Gy(r,!0),values:s._stacks[e.axis]._visualValues};return gp(l,o,i.index,{mode:n})}updateRangeFromParsed(e,s,n,r){const i=n[s.axis];let o=i===null?NaN:i;const l=r&&n._stacks[s.axis];r&&l&&(r.values=l,o=gp(r,i,this._cachedMeta.index)),e.min=Math.min(e.min,o),e.max=Math.max(e.max,o)}getMinMax(e,s){const n=this._cachedMeta,r=n._parsed,i=n._sorted&&e===n.iScale,o=r.length,l=this._getOtherScale(e),c=dC(s,n,this.chart),d={min:Number.POSITIVE_INFINITY,max:Number.NEGATIVE_INFINITY},{min:u,max:h}=aC(l);let f,m;function p(){m=r[f];const v=m[l.axis];return!Ie(m[e.axis])||u>v||h<v}for(f=0;f<o&&!(!p()&&(this.updateRangeFromParsed(d,e,m,c),i));++f);if(i){for(f=o-1;f>=0;--f)if(!p()){this.updateRangeFromParsed(d,e,m,c);break}}return d}getAllParsedValues(e){const s=this._cachedMeta._parsed,n=[];let r,i,o;for(r=0,i=s.length;r<i;++r)o=s[r][e.axis],Ie(o)&&n.push(o);return n}getMaxOverflow(){return!1}getLabelAndValue(e){const s=this._cachedMeta,n=s.iScale,r=s.vScale,i=this.getParsed(e);return{label:n?""+n.getLabelForValue(i[n.axis]):"",value:r?""+r.getLabelForValue(i[r.axis]):""}}_update(e){const s=this._cachedMeta;this.update(e||"default"),s._clip=nC(ce(this.options.clip,sC(s.xScale,s.yScale,this.getMaxOverflow())))}update(e){}draw(){const e=this._ctx,s=this.chart,n=this._cachedMeta,r=n.data||[],i=s.chartArea,o=[],l=this._drawStart||0,c=this._drawCount||r.length-l,d=this.options.drawActiveElementsOnTop;let u;for(n.dataset&&n.dataset.draw(e,i,l,c),u=l;u<l+c;++u){const h=r[u];h.hidden||(h.active&&d?o.push(h):h.draw(e,i))}for(u=0;u<o.length;++u)o[u].draw(e,i)}getStyle(e,s){const n=s?"active":"default";return e===void 0&&this._cachedMeta.dataset?this.resolveDatasetElementOptions(n):this.resolveDataElementOptions(e||0,n)}getContext(e,s,n){const r=this.getDataset();let i;if(e>=0&&e<this._cachedMeta.data.length){const o=this._cachedMeta.data[e];i=o.$context||(o.$context=cC(this.getContext(),e,o)),i.parsed=this.getParsed(e),i.raw=r.data[e],i.index=i.dataIndex=e}else i=this.$context||(this.$context=lC(this.chart.getContext(),this.index)),i.dataset=r,i.index=i.datasetIndex=this.index;return i.active=!!s,i.mode=n,i}resolveDatasetElementOptions(e){return this._resolveElementOptions(this.datasetElementType.id,e)}resolveDataElementOptions(e,s){return this._resolveElementOptions(this.dataElementType.id,s,e)}_resolveElementOptions(e,s="default",n){const r=s==="active",i=this._cachedDataOpts,o=e+"-"+s,l=i[o],c=this.enableOptionSharing&&ga(n);if(l)return vp(l,c);const d=this.chart.config,u=d.datasetElementScopeKeys(this._type,e),h=r?[`${e}Hover`,"hover",e,""]:[e,""],f=d.getOptionScopes(this.getDataset(),u),m=Object.keys(Fe.elements[e]),p=()=>this.getContext(n,r,s),v=d.resolveNamedOptions(f,m,p,h);return v.$shared&&(v.$shared=c,i[o]=Object.freeze(vp(v,c))),v}_resolveAnimations(e,s,n){const r=this.chart,i=this._cachedDataOpts,o=`animation-${s}`,l=i[o];if(l)return l;let c;if(r.options.animation!==!1){const u=this.chart.config,h=u.datasetAnimationScopeKeys(this._type,s),f=u.getOptionScopes(this.getDataset(),h);c=u.createResolver(f,this.getContext(e,n,s))}const d=new Ky(r,c&&c.animations);return c&&c._cacheable&&(i[o]=Object.freeze(d)),d}getSharedOptions(e){if(e.$shared)return this._sharedOptions||(this._sharedOptions=Object.assign({},e))}includeOptions(e,s){return!s||Xc(e)||this.chart._animationsDisabled}_getSharedOptions(e,s){const n=this.resolveDataElementOptions(e,s),r=this._sharedOptions,i=this.getSharedOptions(n),o=this.includeOptions(s,i)||i!==r;return this.updateSharedOptions(i,s,n),{sharedOptions:i,includeOptions:o}}updateElement(e,s,n,r){Xc(r)?Object.assign(e,n):this._resolveAnimations(s,r).update(e,n)}updateSharedOptions(e,s,n){e&&!Xc(s)&&this._resolveAnimations(void 0,s).update(e,n)}_setStyle(e,s,n,r){e.active=r;const i=this.getStyle(s,r);this._resolveAnimations(s,n,r).update(e,{options:!r&&this.getSharedOptions(i)||i})}removeHoverStyle(e,s,n){this._setStyle(e,n,"active",!1)}setHoverStyle(e,s,n){this._setStyle(e,n,"active",!0)}_removeDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!1)}_setDatasetHoverStyle(){const e=this._cachedMeta.dataset;e&&this._setStyle(e,void 0,"active",!0)}_resyncElements(e){const s=this._data,n=this._cachedMeta.data;for(const[l,c,d]of this._syncList)this[l](c,d);this._syncList=[];const r=n.length,i=s.length,o=Math.min(i,r);o&&this.parse(0,o),i>r?this._insertElements(r,i-r,e):i<r&&this._removeElements(i,r-i)}_insertElements(e,s,n=!0){const r=this._cachedMeta,i=r.data,o=e+s;let l;const c=d=>{for(d.length+=s,l=d.length-1;l>=o;l--)d[l]=d[l-s]};for(c(i),l=e;l<o;++l)i[l]=new this.dataElementType;this._parsing&&c(r._parsed),this.parse(e,s),n&&this.updateElements(i,e,s,"reset")}updateElements(e,s,n,r){}_removeElements(e,s){const n=this._cachedMeta;if(this._parsing){const r=n._parsed.splice(e,s);n._stacked&&gi(n,r)}n.data.splice(e,s)}_sync(e){if(this._parsing)this._syncList.push(e);else{const[s,n,r]=e;this[s](n,r)}this.chart._dataChanges.push([this.index,...e])}_onDataPush(){const e=arguments.length;this._sync(["_insertElements",this.getDataset().data.length-e,e])}_onDataPop(){this._sync(["_removeElements",this._cachedMeta.data.length-1,1])}_onDataShift(){this._sync(["_removeElements",0,1])}_onDataSplice(e,s){s&&this._sync(["_removeElements",e,s]);const n=arguments.length-2;n&&this._sync(["_insertElements",e,n])}_onDataUnshift(){this._sync(["_insertElements",0,arguments.length])}}Z(Or,"defaults",{}),Z(Or,"datasetElementType",null),Z(Or,"dataElementType",null);function uC(t,e){if(!t._cache.$bar){const s=t.getMatchingVisibleMetas(e);let n=[];for(let r=0,i=s.length;r<i;r++)n=n.concat(s[r].controller.getAllParsedValues(t));t._cache.$bar=Py(n.sort((r,i)=>r-i))}return t._cache.$bar}function hC(t){const e=t.iScale,s=uC(e,t.type);let n=e._length,r,i,o,l;const c=()=>{o===32767||o===-32768||(ga(l)&&(n=Math.min(n,Math.abs(o-l)||n)),l=o)};for(r=0,i=s.length;r<i;++r)o=e.getPixelForValue(s[r]),c();for(l=void 0,r=0,i=e.ticks.length;r<i;++r)o=e.getPixelForTick(r),c();return n}function fC(t,e,s,n){const r=s.barThickness;let i,o;return ge(r)?(i=e.min*s.categoryPercentage,o=s.barPercentage):(i=r*n,o=1),{chunk:i/n,ratio:o,start:e.pixels[t]-i/2}}function mC(t,e,s,n){const r=e.pixels,i=r[t];let o=t>0?r[t-1]:null,l=t<r.length-1?r[t+1]:null;const c=s.categoryPercentage;o===null&&(o=i-(l===null?e.end-e.start:l-i)),l===null&&(l=i+i-o);const d=i-(i-Math.min(o,l))/2*c;return{chunk:Math.abs(l-o)/2*c/n,ratio:s.barPercentage,start:d}}function pC(t,e,s,n){const r=s.parse(t[0],n),i=s.parse(t[1],n),o=Math.min(r,i),l=Math.max(r,i);let c=o,d=l;Math.abs(o)>Math.abs(l)&&(c=l,d=o),e[s.axis]=d,e._custom={barStart:c,barEnd:d,start:r,end:i,min:o,max:l}}function Yy(t,e,s,n){return Se(t)?pC(t,e,s,n):e[s.axis]=s.parse(t,n),e}function bp(t,e,s,n){const r=t.iScale,i=t.vScale,o=r.getLabels(),l=r===i,c=[];let d,u,h,f;for(d=s,u=s+n;d<u;++d)f=e[d],h={},h[r.axis]=l||r.parse(o[d],d),c.push(Yy(f,h,i,d));return c}function Zc(t){return t&&t.barStart!==void 0&&t.barEnd!==void 0}function gC(t,e,s){return t!==0?bs(t):(e.isHorizontal()?1:-1)*(e.min>=s?1:-1)}function xC(t){let e,s,n,r,i;return t.horizontal?(e=t.base>t.x,s="left",n="right"):(e=t.base<t.y,s="bottom",n="top"),e?(r="end",i="start"):(r="start",i="end"),{start:s,end:n,reverse:e,top:r,bottom:i}}function yC(t,e,s,n){let r=e.borderSkipped;const i={};if(!r){t.borderSkipped=i;return}if(r===!0){t.borderSkipped={top:!0,right:!0,bottom:!0,left:!0};return}const{start:o,end:l,reverse:c,top:d,bottom:u}=xC(t);r==="middle"&&s&&(t.enableBorderRadius=!0,(s._top||0)===n?r=d:(s._bottom||0)===n?r=u:(i[wp(u,o,l,c)]=!0,r=d)),i[wp(r,o,l,c)]=!0,t.borderSkipped=i}function wp(t,e,s,n){return n?(t=vC(t,e,s),t=_p(t,s,e)):t=_p(t,e,s),t}function vC(t,e,s){return t===e?s:t===s?e:t}function _p(t,e,s){return t==="start"?e:t==="end"?s:t}function bC(t,{inflateAmount:e},s){t.inflateAmount=e==="auto"?s===1?.33:0:e}class Io extends Or{parsePrimitiveData(e,s,n,r){return bp(e,s,n,r)}parseArrayData(e,s,n,r){return bp(e,s,n,r)}parseObjectData(e,s,n,r){const{iScale:i,vScale:o}=e,{xAxisKey:l="x",yAxisKey:c="y"}=this._parsing,d=i.axis==="x"?l:c,u=o.axis==="x"?l:c,h=[];let f,m,p,v;for(f=n,m=n+r;f<m;++f)v=s[f],p={},p[i.axis]=i.parse(Vr(v,d),f),h.push(Yy(Vr(v,u),p,o,f));return h}updateRangeFromParsed(e,s,n,r){super.updateRangeFromParsed(e,s,n,r);const i=n._custom;i&&s===this._cachedMeta.vScale&&(e.min=Math.min(e.min,i.min),e.max=Math.max(e.max,i.max))}getMaxOverflow(){return 0}getLabelAndValue(e){const s=this._cachedMeta,{iScale:n,vScale:r}=s,i=this.getParsed(e),o=i._custom,l=Zc(o)?"["+o.start+", "+o.end+"]":""+r.getLabelForValue(i[r.axis]);return{label:""+n.getLabelForValue(i[n.axis]),value:l}}initialize(){this.enableOptionSharing=!0,super.initialize();const e=this._cachedMeta;e.stack=this.getDataset().stack}update(e){const s=this._cachedMeta;this.updateElements(s.data,0,s.data.length,e)}updateElements(e,s,n,r){const i=r==="reset",{index:o,_cachedMeta:{vScale:l}}=this,c=l.getBasePixel(),d=l.isHorizontal(),u=this._getRuler(),{sharedOptions:h,includeOptions:f}=this._getSharedOptions(s,r);for(let m=s;m<s+n;m++){const p=this.getParsed(m),v=i||ge(p[l.axis])?{base:c,head:c}:this._calculateBarValuePixels(m),g=this._calculateBarIndexPixels(m,u),x=(p._stacks||{})[l.axis],y={horizontal:d,base:v.base,enableBorderRadius:!x||Zc(p._custom)||o===x._top||o===x._bottom,x:d?v.head:g.center,y:d?g.center:v.head,height:d?g.size:Math.abs(v.size),width:d?Math.abs(v.size):g.size};f&&(y.options=h||this.resolveDataElementOptions(m,e[m].active?"active":r));const b=y.options||e[m].options;yC(y,b,x,o),bC(y,b,u.ratio),this.updateElement(e[m],m,y,r)}}_getStacks(e,s){const{iScale:n}=this._cachedMeta,r=n.getMatchingVisibleMetas(this._type).filter(u=>u.controller.options.grouped),i=n.options.stacked,o=[],l=this._cachedMeta.controller.getParsed(s),c=l&&l[n.axis],d=u=>{const h=u._parsed.find(m=>m[n.axis]===c),f=h&&h[u.vScale.axis];if(ge(f)||isNaN(f))return!0};for(const u of r)if(!(s!==void 0&&d(u))&&((i===!1||o.indexOf(u.stack)===-1||i===void 0&&u.stack===void 0)&&o.push(u.stack),u.index===e))break;return o.length||o.push(void 0),o}_getStackCount(e){return this._getStacks(void 0,e).length}_getAxisCount(){return this._getAxis().length}getFirstScaleIdForIndexAxis(){const e=this.chart.scales,s=this.chart.options.indexAxis;return Object.keys(e).filter(n=>e[n].axis===s).shift()}_getAxis(){const e={},s=this.getFirstScaleIdForIndexAxis();for(const n of this.chart.data.datasets)e[ce(this.chart.options.indexAxis==="x"?n.xAxisID:n.yAxisID,s)]=!0;return Object.keys(e)}_getStackIndex(e,s,n){const r=this._getStacks(e,n),i=s!==void 0?r.indexOf(s):-1;return i===-1?r.length-1:i}_getRuler(){const e=this.options,s=this._cachedMeta,n=s.iScale,r=[];let i,o;for(i=0,o=s.data.length;i<o;++i)r.push(n.getPixelForValue(this.getParsed(i)[n.axis],i));const l=e.barThickness;return{min:l||hC(s),pixels:r,start:n._startPixel,end:n._endPixel,stackCount:this._getStackCount(),scale:n,grouped:e.grouped,ratio:l?1:e.categoryPercentage*e.barPercentage}}_calculateBarValuePixels(e){const{_cachedMeta:{vScale:s,_stacked:n,index:r},options:{base:i,minBarLength:o}}=this,l=i||0,c=this.getParsed(e),d=c._custom,u=Zc(d);let h=c[s.axis],f=0,m=n?this.applyStack(s,c,n):h,p,v;m!==h&&(f=m-h,m=h),u&&(h=d.barStart,m=d.barEnd-d.barStart,h!==0&&bs(h)!==bs(d.barEnd)&&(f=0),f+=h);const g=!ge(i)&&!u?i:f;let x=s.getPixelForValue(g);if(this.chart.getDataVisibility(e)?p=s.getPixelForValue(f+m):p=x,v=p-x,Math.abs(v)<o){v=gC(v,s,l)*o,h===l&&(x-=v/2);const y=s.getPixelForDecimal(0),b=s.getPixelForDecimal(1),N=Math.min(y,b),_=Math.max(y,b);x=Math.max(Math.min(x,_),N),p=x+v,n&&!u&&(c._stacks[s.axis]._visualValues[r]=s.getValueForPixel(p)-s.getValueForPixel(x))}if(x===s.getPixelForValue(l)){const y=bs(v)*s.getLineWidthForValue(l)/2;x+=y,v-=y}return{size:v,base:x,head:p,center:p+v/2}}_calculateBarIndexPixels(e,s){const n=s.scale,r=this.options,i=r.skipNull,o=ce(r.maxBarThickness,1/0);let l,c;const d=this._getAxisCount();if(s.grouped){const u=i?this._getStackCount(e):s.stackCount,h=r.barThickness==="flex"?mC(e,s,r,u*d):fC(e,s,r,u*d),f=this.chart.options.indexAxis==="x"?this.getDataset().xAxisID:this.getDataset().yAxisID,m=this._getAxis().indexOf(ce(f,this.getFirstScaleIdForIndexAxis())),p=this._getStackIndex(this.index,this._cachedMeta.stack,i?e:void 0)+m;l=h.start+h.chunk*p+h.chunk/2,c=Math.min(o,h.chunk*h.ratio)}else l=n.getPixelForValue(this.getParsed(e)[n.axis],e),c=Math.min(o,s.min*s.ratio);return{base:l-c/2,head:l+c/2,center:l,size:c}}draw(){const e=this._cachedMeta,s=e.vScale,n=e.data,r=n.length;let i=0;for(;i<r;++i)this.getParsed(i)[s.axis]!==null&&!n[i].hidden&&n[i].draw(this._ctx)}}Z(Io,"id","bar"),Z(Io,"defaults",{datasetElementType:!1,dataElementType:"bar",categoryPercentage:.8,barPercentage:.9,grouped:!0,animations:{numbers:{type:"number",properties:["x","y","base","width","height"]}}}),Z(Io,"overrides",{scales:{_index_:{type:"category",offset:!0,grid:{offset:!0}},_value_:{type:"linear",beginAtZero:!0}}});class Fo extends Or{initialize(){this.enableOptionSharing=!0,this.supportsDecimation=!0,super.initialize()}update(e){const s=this._cachedMeta,{dataset:n,data:r=[],_dataset:i}=s,o=this.chart._animationsDisabled;let{start:l,count:c}=Yk(s,r,o);this._drawStart=l,this._drawCount=c,Jk(s)&&(l=0,c=r.length),n._chart=this.chart,n._datasetIndex=this.index,n._decimated=!!i._decimated,n.points=r;const d=this.resolveDatasetElementOptions(e);this.options.showLine||(d.borderWidth=0),d.segment=this.options.segment,this.updateElement(n,void 0,{animated:!o,options:d},e),this.updateElements(r,l,c,e)}updateElements(e,s,n,r){const i=r==="reset",{iScale:o,vScale:l,_stacked:c,_dataset:d}=this._cachedMeta,{sharedOptions:u,includeOptions:h}=this._getSharedOptions(s,r),f=o.axis,m=l.axis,{spanGaps:p,segment:v}=this.options,g=xa(p)?p:Number.POSITIVE_INFINITY,x=this.chart._animationsDisabled||i||r==="none",y=s+n,b=e.length;let N=s>0&&this.getParsed(s-1);for(let _=0;_<b;++_){const k=e[_],S=x?k:{};if(_<s||_>=y){S.skip=!0;continue}const j=this.getParsed(_),C=ge(j[m]),E=S[f]=o.getPixelForValue(j[f],_),M=S[m]=i||C?l.getBasePixel():l.getPixelForValue(c?this.applyStack(l,j,c):j[m],_);S.skip=isNaN(E)||isNaN(M)||C,S.stop=_>0&&Math.abs(j[f]-N[f])>g,v&&(S.parsed=j,S.raw=d.data[_]),h&&(S.options=u||this.resolveDataElementOptions(_,k.active?"active":r)),x||this.updateElement(k,_,S,r),N=j}}getMaxOverflow(){const e=this._cachedMeta,s=e.dataset,n=s.options&&s.options.borderWidth||0,r=e.data||[];if(!r.length)return n;const i=r[0].size(this.resolveDataElementOptions(0)),o=r[r.length-1].size(this.resolveDataElementOptions(r.length-1));return Math.max(n,i,o)/2}draw(){const e=this._cachedMeta;e.dataset.updateControlPoints(this.chart.chartArea,e.iScale.axis),super.draw()}}Z(Fo,"id","line"),Z(Fo,"defaults",{datasetElementType:"line",dataElementType:"point",showLine:!0,spanGaps:!1}),Z(Fo,"overrides",{scales:{_index_:{type:"category"},_value_:{type:"linear"}}});function Tn(){throw new Error("This method is not implemented: Check that a complete date adapter is provided.")}class tf{constructor(e){Z(this,"options");this.options=e||{}}static override(e){Object.assign(tf.prototype,e)}init(){}formats(){return Tn()}parse(){return Tn()}format(){return Tn()}add(){return Tn()}diff(){return Tn()}startOf(){return Tn()}endOf(){return Tn()}}var wC={_date:tf};function _C(t,e,s,n){const{controller:r,data:i,_sorted:o}=t,l=r._cachedMeta.iScale,c=t.dataset&&t.dataset.options?t.dataset.options.spanGaps:null;if(l&&e===l.axis&&e!=="r"&&o&&i.length){const d=l._reversePixels?Vk:Vn;if(n){if(r._sharedOptions){const u=i[0],h=typeof u.getRange=="function"&&u.getRange(e);if(h){const f=d(i,e,s-h),m=d(i,e,s+h);return{lo:f.lo,hi:m.hi}}}}else{const u=d(i,e,s);if(c){const{vScale:h}=r._cachedMeta,{_parsed:f}=t,m=f.slice(0,u.lo+1).reverse().findIndex(v=>!ge(v[h.axis]));u.lo-=Math.max(0,m);const p=f.slice(u.hi).findIndex(v=>!ge(v[h.axis]));u.hi+=Math.max(0,p)}return u}}return{lo:0,hi:i.length-1}}function La(t,e,s,n,r){const i=t.getSortedVisibleDatasetMetas(),o=s[e];for(let l=0,c=i.length;l<c;++l){const{index:d,data:u}=i[l],{lo:h,hi:f}=_C(i[l],e,o,r);for(let m=h;m<=f;++m){const p=u[m];p.skip||n(p,d,m)}}}function jC(t){const e=t.indexOf("x")!==-1,s=t.indexOf("y")!==-1;return function(n,r){const i=e?Math.abs(n.x-r.x):0,o=s?Math.abs(n.y-r.y):0;return Math.sqrt(Math.pow(i,2)+Math.pow(o,2))}}function ed(t,e,s,n,r){const i=[];return!r&&!t.isPointInArea(e)||La(t,s,e,function(l,c,d){!r&&!Fs(l,t.chartArea,0)||l.inRange(e.x,e.y,n)&&i.push({element:l,datasetIndex:c,index:d})},!0),i}function NC(t,e,s,n){let r=[];function i(o,l,c){const{startAngle:d,endAngle:u}=o.getProps(["startAngle","endAngle"],n),{angle:h}=Uk(o,{x:e.x,y:e.y});Cy(h,d,u)&&r.push({element:o,datasetIndex:l,index:c})}return La(t,s,e,i),r}function kC(t,e,s,n,r,i){let o=[];const l=jC(s);let c=Number.POSITIVE_INFINITY;function d(u,h,f){const m=u.inRange(e.x,e.y,r);if(n&&!m)return;const p=u.getCenterPoint(r);if(!(!!i||t.isPointInArea(p))&&!m)return;const g=l(e,p);g<c?(o=[{element:u,datasetIndex:h,index:f}],c=g):g===c&&o.push({element:u,datasetIndex:h,index:f})}return La(t,s,e,d),o}function td(t,e,s,n,r,i){return!i&&!t.isPointInArea(e)?[]:s==="r"&&!n?NC(t,e,s,r):kC(t,e,s,n,r,i)}function jp(t,e,s,n,r){const i=[],o=s==="x"?"inXRange":"inYRange";let l=!1;return La(t,s,e,(c,d,u)=>{c[o]&&c[o](e[s],r)&&(i.push({element:c,datasetIndex:d,index:u}),l=l||c.inRange(e.x,e.y,r))}),n&&!l?[]:i}var SC={evaluateInteractionItems:La,modes:{index(t,e,s,n){const r=In(e,t),i=s.axis||"x",o=s.includeInvisible||!1,l=s.intersect?ed(t,r,i,n,o):td(t,r,i,!1,n,o),c=[];return l.length?(t.getSortedVisibleDatasetMetas().forEach(d=>{const u=l[0].index,h=d.data[u];h&&!h.skip&&c.push({element:h,datasetIndex:d.index,index:u})}),c):[]},dataset(t,e,s,n){const r=In(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;let l=s.intersect?ed(t,r,i,n,o):td(t,r,i,!1,n,o);if(l.length>0){const c=l[0].datasetIndex,d=t.getDatasetMeta(c).data;l=[];for(let u=0;u<d.length;++u)l.push({element:d[u],datasetIndex:c,index:u})}return l},point(t,e,s,n){const r=In(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return ed(t,r,i,n,o)},nearest(t,e,s,n){const r=In(e,t),i=s.axis||"xy",o=s.includeInvisible||!1;return td(t,r,i,s.intersect,n,o)},x(t,e,s,n){const r=In(e,t);return jp(t,r,"x",s.intersect,n)},y(t,e,s,n){const r=In(e,t);return jp(t,r,"y",s.intersect,n)}}};const Jy=["left","top","right","bottom"];function xi(t,e){return t.filter(s=>s.pos===e)}function Np(t,e){return t.filter(s=>Jy.indexOf(s.pos)===-1&&s.box.axis===e)}function yi(t,e){return t.sort((s,n)=>{const r=e?n:s,i=e?s:n;return r.weight===i.weight?r.index-i.index:r.weight-i.weight})}function CC(t){const e=[];let s,n,r,i,o,l;for(s=0,n=(t||[]).length;s<n;++s)r=t[s],{position:i,options:{stack:o,stackWeight:l=1}}=r,e.push({index:s,box:r,pos:i,horizontal:r.isHorizontal(),weight:r.weight,stack:o&&i+o,stackWeight:l});return e}function EC(t){const e={};for(const s of t){const{stack:n,pos:r,stackWeight:i}=s;if(!n||!Jy.includes(r))continue;const o=e[n]||(e[n]={count:0,placed:0,weight:0,size:0});o.count++,o.weight+=i}return e}function PC(t,e){const s=EC(t),{vBoxMaxWidth:n,hBoxMaxHeight:r}=e;let i,o,l;for(i=0,o=t.length;i<o;++i){l=t[i];const{fullSize:c}=l.box,d=s[l.stack],u=d&&l.stackWeight/d.weight;l.horizontal?(l.width=u?u*n:c&&e.availableWidth,l.height=r):(l.width=n,l.height=u?u*r:c&&e.availableHeight)}return s}function AC(t){const e=CC(t),s=yi(e.filter(d=>d.box.fullSize),!0),n=yi(xi(e,"left"),!0),r=yi(xi(e,"right")),i=yi(xi(e,"top"),!0),o=yi(xi(e,"bottom")),l=Np(e,"x"),c=Np(e,"y");return{fullSize:s,leftAndTop:n.concat(i),rightAndBottom:r.concat(c).concat(o).concat(l),chartArea:xi(e,"chartArea"),vertical:n.concat(r).concat(c),horizontal:i.concat(o).concat(l)}}function kp(t,e,s,n){return Math.max(t[s],e[s])+Math.max(t[n],e[n])}function Qy(t,e){t.top=Math.max(t.top,e.top),t.left=Math.max(t.left,e.left),t.bottom=Math.max(t.bottom,e.bottom),t.right=Math.max(t.right,e.right)}function LC(t,e,s,n){const{pos:r,box:i}=s,o=t.maxPadding;if(!me(r)){s.size&&(t[r]-=s.size);const h=n[s.stack]||{size:0,count:1};h.size=Math.max(h.size,s.horizontal?i.height:i.width),s.size=h.size/h.count,t[r]+=s.size}i.getPadding&&Qy(o,i.getPadding());const l=Math.max(0,e.outerWidth-kp(o,t,"left","right")),c=Math.max(0,e.outerHeight-kp(o,t,"top","bottom")),d=l!==t.w,u=c!==t.h;return t.w=l,t.h=c,s.horizontal?{same:d,other:u}:{same:u,other:d}}function TC(t){const e=t.maxPadding;function s(n){const r=Math.max(e[n]-t[n],0);return t[n]+=r,r}t.y+=s("top"),t.x+=s("left"),s("right"),s("bottom")}function MC(t,e){const s=e.maxPadding;function n(r){const i={left:0,top:0,right:0,bottom:0};return r.forEach(o=>{i[o]=Math.max(e[o],s[o])}),i}return n(t?["left","right"]:["top","bottom"])}function Ci(t,e,s,n){const r=[];let i,o,l,c,d,u;for(i=0,o=t.length,d=0;i<o;++i){l=t[i],c=l.box,c.update(l.width||e.w,l.height||e.h,MC(l.horizontal,e));const{same:h,other:f}=LC(e,s,l,n);d|=h&&r.length,u=u||f,c.fullSize||r.push(l)}return d&&Ci(r,e,s,n)||u}function mo(t,e,s,n,r){t.top=s,t.left=e,t.right=e+n,t.bottom=s+r,t.width=n,t.height=r}function Sp(t,e,s,n){const r=s.padding;let{x:i,y:o}=e;for(const l of t){const c=l.box,d=n[l.stack]||{count:1,placed:0,weight:1},u=l.stackWeight/d.weight||1;if(l.horizontal){const h=e.w*u,f=d.size||c.height;ga(d.start)&&(o=d.start),c.fullSize?mo(c,r.left,o,s.outerWidth-r.right-r.left,f):mo(c,e.left+d.placed,o,h,f),d.start=o,d.placed+=h,o=c.bottom}else{const h=e.h*u,f=d.size||c.width;ga(d.start)&&(i=d.start),c.fullSize?mo(c,i,r.top,f,s.outerHeight-r.bottom-r.top):mo(c,i,e.top+d.placed,f,h),d.start=i,d.placed+=h,i=c.right}}e.x=i,e.y=o}var Wt={addBox(t,e){t.boxes||(t.boxes=[]),e.fullSize=e.fullSize||!1,e.position=e.position||"top",e.weight=e.weight||0,e._layers=e._layers||function(){return[{z:0,draw(s){e.draw(s)}}]},t.boxes.push(e)},removeBox(t,e){const s=t.boxes?t.boxes.indexOf(e):-1;s!==-1&&t.boxes.splice(s,1)},configure(t,e,s){e.fullSize=s.fullSize,e.position=s.position,e.weight=s.weight},update(t,e,s,n){if(!t)return;const r=dt(t.options.layout.padding),i=Math.max(e-r.width,0),o=Math.max(s-r.height,0),l=AC(t.boxes),c=l.vertical,d=l.horizontal;ye(t.boxes,v=>{typeof v.beforeLayout=="function"&&v.beforeLayout()});const u=c.reduce((v,g)=>g.box.options&&g.box.options.display===!1?v:v+1,0)||1,h=Object.freeze({outerWidth:e,outerHeight:s,padding:r,availableWidth:i,availableHeight:o,vBoxMaxWidth:i/2/u,hBoxMaxHeight:o/2}),f=Object.assign({},r);Qy(f,dt(n));const m=Object.assign({maxPadding:f,w:i,h:o,x:r.left,y:r.top},r),p=PC(c.concat(d),h);Ci(l.fullSize,m,h,p),Ci(c,m,h,p),Ci(d,m,h,p)&&Ci(c,m,h,p),TC(m),Sp(l.leftAndTop,m,h,p),m.x+=m.w,m.y+=m.h,Sp(l.rightAndBottom,m,h,p),t.chartArea={left:m.left,top:m.top,right:m.left+m.w,bottom:m.top+m.h,height:m.h,width:m.w},ye(l.chartArea,v=>{const g=v.box;Object.assign(g,t.chartArea),g.update(m.w,m.h,{left:0,top:0,right:0,bottom:0})})}};class Xy{acquireContext(e,s){}releaseContext(e){return!1}addEventListener(e,s,n){}removeEventListener(e,s,n){}getDevicePixelRatio(){return 1}getMaximumSize(e,s,n,r){return s=Math.max(0,s||e.width),n=n||e.height,{width:s,height:Math.max(0,r?Math.floor(s/r):n)}}isAttached(e){return!0}updateConfig(e){}}class DC extends Xy{acquireContext(e){return e&&e.getContext&&e.getContext("2d")||null}updateConfig(e){e.options.animation=!1}}const $o="$chartjs",OC={touchstart:"mousedown",touchmove:"mousemove",touchend:"mouseup",pointerenter:"mouseenter",pointerdown:"mousedown",pointermove:"mousemove",pointerup:"mouseup",pointerleave:"mouseout",pointerout:"mouseout"},Cp=t=>t===null||t==="";function RC(t,e){const s=t.style,n=t.getAttribute("height"),r=t.getAttribute("width");if(t[$o]={initial:{height:n,width:r,style:{display:s.display,height:s.height,width:s.width}}},s.display=s.display||"block",s.boxSizing=s.boxSizing||"border-box",Cp(r)){const i=dp(t,"width");i!==void 0&&(t.width=i)}if(Cp(n))if(t.style.height==="")t.height=t.width/(e||2);else{const i=dp(t,"height");i!==void 0&&(t.height=i)}return t}const Zy=$S?{passive:!0}:!1;function IC(t,e,s){t&&t.addEventListener(e,s,Zy)}function FC(t,e,s){t&&t.canvas&&t.canvas.removeEventListener(e,s,Zy)}function $C(t,e){const s=OC[t.type]||t.type,{x:n,y:r}=In(t,e);return{type:s,chart:e,native:t,x:n!==void 0?n:null,y:r!==void 0?r:null}}function _l(t,e){for(const s of t)if(s===e||s.contains(e))return!0}function zC(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||_l(l.addedNodes,n),o=o&&!_l(l.removedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}function UC(t,e,s){const n=t.canvas,r=new MutationObserver(i=>{let o=!1;for(const l of i)o=o||_l(l.removedNodes,n),o=o&&!_l(l.addedNodes,n);o&&s()});return r.observe(document,{childList:!0,subtree:!0}),r}const va=new Map;let Ep=0;function ev(){const t=window.devicePixelRatio;t!==Ep&&(Ep=t,va.forEach((e,s)=>{s.currentDevicePixelRatio!==t&&e()}))}function BC(t,e){va.size||window.addEventListener("resize",ev),va.set(t,e)}function HC(t){va.delete(t),va.size||window.removeEventListener("resize",ev)}function VC(t,e,s){const n=t.canvas,r=n&&ef(n);if(!r)return;const i=Ly((l,c)=>{const d=r.clientWidth;s(l,c),d<r.clientWidth&&s()},window),o=new ResizeObserver(l=>{const c=l[0],d=c.contentRect.width,u=c.contentRect.height;d===0&&u===0||i(d,u)});return o.observe(r),BC(t,i),o}function sd(t,e,s){s&&s.disconnect(),e==="resize"&&HC(t)}function WC(t,e,s){const n=t.canvas,r=Ly(i=>{t.ctx!==null&&s($C(i,t))},t);return IC(n,e,r),r}class qC extends Xy{acquireContext(e,s){const n=e&&e.getContext&&e.getContext("2d");return n&&n.canvas===e?(RC(e,s),n):null}releaseContext(e){const s=e.canvas;if(!s[$o])return!1;const n=s[$o].initial;["height","width"].forEach(i=>{const o=n[i];ge(o)?s.removeAttribute(i):s.setAttribute(i,o)});const r=n.style||{};return Object.keys(r).forEach(i=>{s.style[i]=r[i]}),s.width=s.width,delete s[$o],!0}addEventListener(e,s,n){this.removeEventListener(e,s);const r=e.$proxies||(e.$proxies={}),o={attach:zC,detach:UC,resize:VC}[s]||WC;r[s]=o(e,s,n)}removeEventListener(e,s){const n=e.$proxies||(e.$proxies={}),r=n[s];if(!r)return;({attach:sd,detach:sd,resize:sd}[s]||FC)(e,s,r),n[s]=void 0}getDevicePixelRatio(){return window.devicePixelRatio}getMaximumSize(e,s,n,r){return FS(e,s,n,r)}isAttached(e){const s=e&&ef(e);return!!(s&&s.isConnected)}}function KC(t){return!Zh()||typeof OffscreenCanvas<"u"&&t instanceof OffscreenCanvas?DC:qC}class _s{constructor(){Z(this,"x");Z(this,"y");Z(this,"active",!1);Z(this,"options");Z(this,"$animations")}tooltipPosition(e){const{x:s,y:n}=this.getProps(["x","y"],e);return{x:s,y:n}}hasValue(){return xa(this.x)&&xa(this.y)}getProps(e,s){const n=this.$animations;if(!s||!n)return this;const r={};return e.forEach(i=>{r[i]=n[i]&&n[i].active()?n[i]._to:this[i]}),r}}Z(_s,"defaults",{}),Z(_s,"defaultRoutes");function GC(t,e){const s=t.options.ticks,n=YC(t),r=Math.min(s.maxTicksLimit||n,n),i=s.major.enabled?QC(e):[],o=i.length,l=i[0],c=i[o-1],d=[];if(o>r)return XC(e,d,i,o/r),d;const u=JC(i,e,r);if(o>0){let h,f;const m=o>1?Math.round((c-l)/(o-1)):null;for(po(e,d,u,ge(m)?0:l-m,l),h=0,f=o-1;h<f;h++)po(e,d,u,i[h],i[h+1]);return po(e,d,u,c,ge(m)?e.length:c+m),d}return po(e,d,u),d}function YC(t){const e=t.options.offset,s=t._tickSize(),n=t._length/s+(e?0:1),r=t._maxLength/s;return Math.floor(Math.min(n,r))}function JC(t,e,s){const n=ZC(t),r=e.length/s;if(!n)return Math.max(r,1);const i=Fk(n);for(let o=0,l=i.length-1;o<l;o++){const c=i[o];if(c>r)return c}return Math.max(r,1)}function QC(t){const e=[];let s,n;for(s=0,n=t.length;s<n;s++)t[s].major&&e.push(s);return e}function XC(t,e,s,n){let r=0,i=s[0],o;for(n=Math.ceil(n),o=0;o<t.length;o++)o===i&&(e.push(t[o]),r++,i=s[r*n])}function po(t,e,s,n,r){const i=ce(n,0),o=Math.min(ce(r,t.length),t.length);let l=0,c,d,u;for(s=Math.ceil(s),r&&(c=r-n,s=c/Math.floor(c/s)),u=i;u<0;)l++,u=Math.round(i+l*s);for(d=Math.max(i,0);d<o;d++)d===u&&(e.push(t[d]),l++,u=Math.round(i+l*s))}function ZC(t){const e=t.length;let s,n;if(e<2)return!1;for(n=t[0],s=1;s<e;++s)if(t[s]-t[s-1]!==n)return!1;return n}const e4=t=>t==="left"?"right":t==="right"?"left":t,Pp=(t,e,s)=>e==="top"||e==="left"?t[e]+s:t[e]-s,Ap=(t,e)=>Math.min(e||t,t);function Lp(t,e){const s=[],n=t.length/e,r=t.length;let i=0;for(;i<r;i+=n)s.push(t[Math.floor(i)]);return s}function t4(t,e,s){const n=t.ticks.length,r=Math.min(e,n-1),i=t._startPixel,o=t._endPixel,l=1e-6;let c=t.getPixelForTick(r),d;if(!(s&&(n===1?d=Math.max(c-i,o-c):e===0?d=(t.getPixelForTick(1)-c)/2:d=(c-t.getPixelForTick(r-1))/2,c+=r<e?d:-d,c<i-l||c>o+l)))return c}function s4(t,e){ye(t,s=>{const n=s.gc,r=n.length/2;let i;if(r>e){for(i=0;i<r;++i)delete s.data[n[i]];n.splice(0,r)}})}function vi(t){return t.drawTicks?t.tickLength:0}function Tp(t,e){if(!t.display)return 0;const s=Ge(t.font,e),n=dt(t.padding);return(Se(t.text)?t.text.length:1)*s.lineHeight+n.height}function n4(t,e){return En(t,{scale:e,type:"scale"})}function r4(t,e,s){return En(t,{tick:s,index:e,type:"tick"})}function i4(t,e,s){let n=Kh(t);return(s&&e!=="right"||!s&&e==="right")&&(n=e4(n)),n}function a4(t,e,s,n){const{top:r,left:i,bottom:o,right:l,chart:c}=t,{chartArea:d,scales:u}=c;let h=0,f,m,p;const v=o-r,g=l-i;if(t.isHorizontal()){if(m=ot(n,i,l),me(s)){const x=Object.keys(s)[0],y=s[x];p=u[x].getPixelForValue(y)+v-e}else s==="center"?p=(d.bottom+d.top)/2+v-e:p=Pp(t,s,e);f=l-i}else{if(me(s)){const x=Object.keys(s)[0],y=s[x];m=u[x].getPixelForValue(y)-g+e}else s==="center"?m=(d.left+d.right)/2-g+e:m=Pp(t,s,e);p=ot(n,o,r),h=s==="left"?-Dt:Dt}return{titleX:m,titleY:p,maxWidth:f,rotation:h}}class lr extends _s{constructor(e){super(),this.id=e.id,this.type=e.type,this.options=void 0,this.ctx=e.ctx,this.chart=e.chart,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this._margins={left:0,right:0,top:0,bottom:0},this.maxWidth=void 0,this.maxHeight=void 0,this.paddingTop=void 0,this.paddingBottom=void 0,this.paddingLeft=void 0,this.paddingRight=void 0,this.axis=void 0,this.labelRotation=void 0,this.min=void 0,this.max=void 0,this._range=void 0,this.ticks=[],this._gridLineItems=null,this._labelItems=null,this._labelSizes=null,this._length=0,this._maxLength=0,this._longestTextCache={},this._startPixel=void 0,this._endPixel=void 0,this._reversePixels=!1,this._userMax=void 0,this._userMin=void 0,this._suggestedMax=void 0,this._suggestedMin=void 0,this._ticksLength=0,this._borderValue=0,this._cache={},this._dataLimitsCached=!1,this.$context=void 0}init(e){this.options=e.setContext(this.getContext()),this.axis=e.axis,this._userMin=this.parse(e.min),this._userMax=this.parse(e.max),this._suggestedMin=this.parse(e.suggestedMin),this._suggestedMax=this.parse(e.suggestedMax)}parse(e,s){return e}getUserBounds(){let{_userMin:e,_userMax:s,_suggestedMin:n,_suggestedMax:r}=this;return e=At(e,Number.POSITIVE_INFINITY),s=At(s,Number.NEGATIVE_INFINITY),n=At(n,Number.POSITIVE_INFINITY),r=At(r,Number.NEGATIVE_INFINITY),{min:At(e,n),max:At(s,r),minDefined:Ie(e),maxDefined:Ie(s)}}getMinMax(e){let{min:s,max:n,minDefined:r,maxDefined:i}=this.getUserBounds(),o;if(r&&i)return{min:s,max:n};const l=this.getMatchingVisibleMetas();for(let c=0,d=l.length;c<d;++c)o=l[c].controller.getMinMax(this,e),r||(s=Math.min(s,o.min)),i||(n=Math.max(n,o.max));return s=i&&s>n?n:s,n=r&&s>n?s:n,{min:At(s,At(n,s)),max:At(n,At(s,n))}}getPadding(){return{left:this.paddingLeft||0,top:this.paddingTop||0,right:this.paddingRight||0,bottom:this.paddingBottom||0}}getTicks(){return this.ticks}getLabels(){const e=this.chart.data;return this.options.labels||(this.isHorizontal()?e.xLabels:e.yLabels)||e.labels||[]}getLabelItems(e=this.chart.chartArea){return this._labelItems||(this._labelItems=this._computeLabelItems(e))}beforeLayout(){this._cache={},this._dataLimitsCached=!1}beforeUpdate(){_e(this.options.beforeUpdate,[this])}update(e,s,n){const{beginAtZero:r,grace:i,ticks:o}=this.options,l=o.sampleSize;this.beforeUpdate(),this.maxWidth=e,this.maxHeight=s,this._margins=n=Object.assign({left:0,right:0,top:0,bottom:0},n),this.ticks=null,this._labelSizes=null,this._gridLineItems=null,this._labelItems=null,this.beforeSetDimensions(),this.setDimensions(),this.afterSetDimensions(),this._maxLength=this.isHorizontal()?this.width+n.left+n.right:this.height+n.top+n.bottom,this._dataLimitsCached||(this.beforeDataLimits(),this.determineDataLimits(),this.afterDataLimits(),this._range=gS(this,i,r),this._dataLimitsCached=!0),this.beforeBuildTicks(),this.ticks=this.buildTicks()||[],this.afterBuildTicks();const c=l<this.ticks.length;this._convertTicksToLabels(c?Lp(this.ticks,l):this.ticks),this.configure(),this.beforeCalculateLabelRotation(),this.calculateLabelRotation(),this.afterCalculateLabelRotation(),o.display&&(o.autoSkip||o.source==="auto")&&(this.ticks=GC(this,this.ticks),this._labelSizes=null,this.afterAutoSkip()),c&&this._convertTicksToLabels(this.ticks),this.beforeFit(),this.fit(),this.afterFit(),this.afterUpdate()}configure(){let e=this.options.reverse,s,n;this.isHorizontal()?(s=this.left,n=this.right):(s=this.top,n=this.bottom,e=!e),this._startPixel=s,this._endPixel=n,this._reversePixels=e,this._length=n-s,this._alignToPixels=this.options.alignToPixels}afterUpdate(){_e(this.options.afterUpdate,[this])}beforeSetDimensions(){_e(this.options.beforeSetDimensions,[this])}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=0,this.right=this.width):(this.height=this.maxHeight,this.top=0,this.bottom=this.height),this.paddingLeft=0,this.paddingTop=0,this.paddingRight=0,this.paddingBottom=0}afterSetDimensions(){_e(this.options.afterSetDimensions,[this])}_callHooks(e){this.chart.notifyPlugins(e,this.getContext()),_e(this.options[e],[this])}beforeDataLimits(){this._callHooks("beforeDataLimits")}determineDataLimits(){}afterDataLimits(){this._callHooks("afterDataLimits")}beforeBuildTicks(){this._callHooks("beforeBuildTicks")}buildTicks(){return[]}afterBuildTicks(){this._callHooks("afterBuildTicks")}beforeTickToLabelConversion(){_e(this.options.beforeTickToLabelConversion,[this])}generateTickLabels(e){const s=this.options.ticks;let n,r,i;for(n=0,r=e.length;n<r;n++)i=e[n],i.label=_e(s.callback,[i.value,n,e],this)}afterTickToLabelConversion(){_e(this.options.afterTickToLabelConversion,[this])}beforeCalculateLabelRotation(){_e(this.options.beforeCalculateLabelRotation,[this])}calculateLabelRotation(){const e=this.options,s=e.ticks,n=Ap(this.ticks.length,e.ticks.maxTicksLimit),r=s.minRotation||0,i=s.maxRotation;let o=r,l,c,d;if(!this._isVisible()||!s.display||r>=i||n<=1||!this.isHorizontal()){this.labelRotation=r;return}const u=this._getLabelSizes(),h=u.widest.width,f=u.highest.height,m=Ot(this.chart.width-h,0,this.maxWidth);l=e.offset?this.maxWidth/n:m/(n-1),h+6>l&&(l=m/(n-(e.offset?.5:1)),c=this.maxHeight-vi(e.grid)-s.padding-Tp(e.title,this.chart.options.font),d=Math.sqrt(h*h+f*f),o=Wh(Math.min(Math.asin(Ot((u.highest.height+6)/l,-1,1)),Math.asin(Ot(c/d,-1,1))-Math.asin(Ot(f/d,-1,1)))),o=Math.max(r,Math.min(i,o))),this.labelRotation=o}afterCalculateLabelRotation(){_e(this.options.afterCalculateLabelRotation,[this])}afterAutoSkip(){}beforeFit(){_e(this.options.beforeFit,[this])}fit(){const e={width:0,height:0},{chart:s,options:{ticks:n,title:r,grid:i}}=this,o=this._isVisible(),l=this.isHorizontal();if(o){const c=Tp(r,s.options.font);if(l?(e.width=this.maxWidth,e.height=vi(i)+c):(e.height=this.maxHeight,e.width=vi(i)+c),n.display&&this.ticks.length){const{first:d,last:u,widest:h,highest:f}=this._getLabelSizes(),m=n.padding*2,p=on(this.labelRotation),v=Math.cos(p),g=Math.sin(p);if(l){const x=n.mirror?0:g*h.width+v*f.height;e.height=Math.min(this.maxHeight,e.height+x+m)}else{const x=n.mirror?0:v*h.width+g*f.height;e.width=Math.min(this.maxWidth,e.width+x+m)}this._calculatePadding(d,u,g,v)}}this._handleMargins(),l?(this.width=this._length=s.width-this._margins.left-this._margins.right,this.height=e.height):(this.width=e.width,this.height=this._length=s.height-this._margins.top-this._margins.bottom)}_calculatePadding(e,s,n,r){const{ticks:{align:i,padding:o},position:l}=this.options,c=this.labelRotation!==0,d=l!=="top"&&this.axis==="x";if(this.isHorizontal()){const u=this.getPixelForTick(0)-this.left,h=this.right-this.getPixelForTick(this.ticks.length-1);let f=0,m=0;c?d?(f=r*e.width,m=n*s.height):(f=n*e.height,m=r*s.width):i==="start"?m=s.width:i==="end"?f=e.width:i!=="inner"&&(f=e.width/2,m=s.width/2),this.paddingLeft=Math.max((f-u+o)*this.width/(this.width-u),0),this.paddingRight=Math.max((m-h+o)*this.width/(this.width-h),0)}else{let u=s.height/2,h=e.height/2;i==="start"?(u=0,h=e.height):i==="end"&&(u=s.height,h=0),this.paddingTop=u+o,this.paddingBottom=h+o}}_handleMargins(){this._margins&&(this._margins.left=Math.max(this.paddingLeft,this._margins.left),this._margins.top=Math.max(this.paddingTop,this._margins.top),this._margins.right=Math.max(this.paddingRight,this._margins.right),this._margins.bottom=Math.max(this.paddingBottom,this._margins.bottom))}afterFit(){_e(this.options.afterFit,[this])}isHorizontal(){const{axis:e,position:s}=this.options;return s==="top"||s==="bottom"||e==="x"}isFullSize(){return this.options.fullSize}_convertTicksToLabels(e){this.beforeTickToLabelConversion(),this.generateTickLabels(e);let s,n;for(s=0,n=e.length;s<n;s++)ge(e[s].label)&&(e.splice(s,1),n--,s--);this.afterTickToLabelConversion()}_getLabelSizes(){let e=this._labelSizes;if(!e){const s=this.options.ticks.sampleSize;let n=this.ticks;s<n.length&&(n=Lp(n,s)),this._labelSizes=e=this._computeLabelSizes(n,n.length,this.options.ticks.maxTicksLimit)}return e}_computeLabelSizes(e,s,n){const{ctx:r,_longestTextCache:i}=this,o=[],l=[],c=Math.floor(s/Ap(s,n));let d=0,u=0,h,f,m,p,v,g,x,y,b,N,_;for(h=0;h<s;h+=c){if(p=e[h].label,v=this._resolveTickFontOptions(h),r.font=g=v.string,x=i[g]=i[g]||{data:{},gc:[]},y=v.lineHeight,b=N=0,!ge(p)&&!Se(p))b=bl(r,x.data,x.gc,b,p),N=y;else if(Se(p))for(f=0,m=p.length;f<m;++f)_=p[f],!ge(_)&&!Se(_)&&(b=bl(r,x.data,x.gc,b,_),N+=y);o.push(b),l.push(N),d=Math.max(b,d),u=Math.max(N,u)}s4(i,s);const k=o.indexOf(d),S=l.indexOf(u),j=C=>({width:o[C]||0,height:l[C]||0});return{first:j(0),last:j(s-1),widest:j(k),highest:j(S),widths:o,heights:l}}getLabelForValue(e){return e}getPixelForValue(e,s){return NaN}getValueForPixel(e){}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getPixelForDecimal(e){this._reversePixels&&(e=1-e);const s=this._startPixel+e*this._length;return Hk(this._alignToPixels?Ln(this.chart,s,0):s)}getDecimalForPixel(e){const s=(e-this._startPixel)/this._length;return this._reversePixels?1-s:s}getBasePixel(){return this.getPixelForValue(this.getBaseValue())}getBaseValue(){const{min:e,max:s}=this;return e<0&&s<0?s:e>0&&s>0?e:0}getContext(e){const s=this.ticks||[];if(e>=0&&e<s.length){const n=s[e];return n.$context||(n.$context=r4(this.getContext(),e,n))}return this.$context||(this.$context=n4(this.chart.getContext(),this))}_tickSize(){const e=this.options.ticks,s=on(this.labelRotation),n=Math.abs(Math.cos(s)),r=Math.abs(Math.sin(s)),i=this._getLabelSizes(),o=e.autoSkipPadding||0,l=i?i.widest.width+o:0,c=i?i.highest.height+o:0;return this.isHorizontal()?c*n>l*r?l/n:c/r:c*r<l*n?c/n:l/r}_isVisible(){const e=this.options.display;return e!=="auto"?!!e:this.getMatchingVisibleMetas().length>0}_computeGridLineItems(e){const s=this.axis,n=this.chart,r=this.options,{grid:i,position:o,border:l}=r,c=i.offset,d=this.isHorizontal(),h=this.ticks.length+(c?1:0),f=vi(i),m=[],p=l.setContext(this.getContext()),v=p.display?p.width:0,g=v/2,x=function(H){return Ln(n,H,v)};let y,b,N,_,k,S,j,C,E,M,P,R;if(o==="top")y=x(this.bottom),S=this.bottom-f,C=y-g,M=x(e.top)+g,R=e.bottom;else if(o==="bottom")y=x(this.top),M=e.top,R=x(e.bottom)-g,S=y+g,C=this.top+f;else if(o==="left")y=x(this.right),k=this.right-f,j=y-g,E=x(e.left)+g,P=e.right;else if(o==="right")y=x(this.left),E=e.left,P=x(e.right)-g,k=y+g,j=this.left+f;else if(s==="x"){if(o==="center")y=x((e.top+e.bottom)/2+.5);else if(me(o)){const H=Object.keys(o)[0],Q=o[H];y=x(this.chart.scales[H].getPixelForValue(Q))}M=e.top,R=e.bottom,S=y+g,C=S+f}else if(s==="y"){if(o==="center")y=x((e.left+e.right)/2);else if(me(o)){const H=Object.keys(o)[0],Q=o[H];y=x(this.chart.scales[H].getPixelForValue(Q))}k=y-g,j=k-f,E=e.left,P=e.right}const Y=ce(r.ticks.maxTicksLimit,h),B=Math.max(1,Math.ceil(h/Y));for(b=0;b<h;b+=B){const H=this.getContext(b),Q=i.setContext(H),O=l.setContext(H),U=Q.lineWidth,q=Q.color,X=O.dash||[],A=O.dashOffset,F=Q.tickWidth,T=Q.tickColor,$=Q.tickBorderDash||[],ne=Q.tickBorderDashOffset;N=t4(this,b,c),N!==void 0&&(_=Ln(n,N,U),d?k=j=E=P=_:S=C=M=R=_,m.push({tx1:k,ty1:S,tx2:j,ty2:C,x1:E,y1:M,x2:P,y2:R,width:U,color:q,borderDash:X,borderDashOffset:A,tickWidth:F,tickColor:T,tickBorderDash:$,tickBorderDashOffset:ne}))}return this._ticksLength=h,this._borderValue=y,m}_computeLabelItems(e){const s=this.axis,n=this.options,{position:r,ticks:i}=n,o=this.isHorizontal(),l=this.ticks,{align:c,crossAlign:d,padding:u,mirror:h}=i,f=vi(n.grid),m=f+u,p=h?-u:m,v=-on(this.labelRotation),g=[];let x,y,b,N,_,k,S,j,C,E,M,P,R="middle";if(r==="top")k=this.bottom-p,S=this._getXAxisLabelAlignment();else if(r==="bottom")k=this.top+p,S=this._getXAxisLabelAlignment();else if(r==="left"){const B=this._getYAxisLabelAlignment(f);S=B.textAlign,_=B.x}else if(r==="right"){const B=this._getYAxisLabelAlignment(f);S=B.textAlign,_=B.x}else if(s==="x"){if(r==="center")k=(e.top+e.bottom)/2+m;else if(me(r)){const B=Object.keys(r)[0],H=r[B];k=this.chart.scales[B].getPixelForValue(H)+m}S=this._getXAxisLabelAlignment()}else if(s==="y"){if(r==="center")_=(e.left+e.right)/2-m;else if(me(r)){const B=Object.keys(r)[0],H=r[B];_=this.chart.scales[B].getPixelForValue(H)}S=this._getYAxisLabelAlignment(f).textAlign}s==="y"&&(c==="start"?R="top":c==="end"&&(R="bottom"));const Y=this._getLabelSizes();for(x=0,y=l.length;x<y;++x){b=l[x],N=b.label;const B=i.setContext(this.getContext(x));j=this.getPixelForTick(x)+i.labelOffset,C=this._resolveTickFontOptions(x),E=C.lineHeight,M=Se(N)?N.length:1;const H=M/2,Q=B.color,O=B.textStrokeColor,U=B.textStrokeWidth;let q=S;o?(_=j,S==="inner"&&(x===y-1?q=this.options.reverse?"left":"right":x===0?q=this.options.reverse?"right":"left":q="center"),r==="top"?d==="near"||v!==0?P=-M*E+E/2:d==="center"?P=-Y.highest.height/2-H*E+E:P=-Y.highest.height+E/2:d==="near"||v!==0?P=E/2:d==="center"?P=Y.highest.height/2-H*E:P=Y.highest.height-M*E,h&&(P*=-1),v!==0&&!B.showLabelBackdrop&&(_+=E/2*Math.sin(v))):(k=j,P=(1-M)*E/2);let X;if(B.showLabelBackdrop){const A=dt(B.backdropPadding),F=Y.heights[x],T=Y.widths[x];let $=P-A.top,ne=0-A.left;switch(R){case"middle":$-=F/2;break;case"bottom":$-=F;break}switch(S){case"center":ne-=T/2;break;case"right":ne-=T;break;case"inner":x===y-1?ne-=T:x>0&&(ne-=T/2);break}X={left:ne,top:$,width:T+A.width,height:F+A.height,color:B.backdropColor}}g.push({label:N,font:C,textOffset:P,options:{rotation:v,color:Q,strokeColor:O,strokeWidth:U,textAlign:q,textBaseline:R,translation:[_,k],backdrop:X}})}return g}_getXAxisLabelAlignment(){const{position:e,ticks:s}=this.options;if(-on(this.labelRotation))return e==="top"?"left":"right";let r="center";return s.align==="start"?r="left":s.align==="end"?r="right":s.align==="inner"&&(r="inner"),r}_getYAxisLabelAlignment(e){const{position:s,ticks:{crossAlign:n,mirror:r,padding:i}}=this.options,o=this._getLabelSizes(),l=e+i,c=o.widest.width;let d,u;return s==="left"?r?(u=this.right+i,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u+=c)):(u=this.right-l,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u=this.left)):s==="right"?r?(u=this.left+i,n==="near"?d="right":n==="center"?(d="center",u-=c/2):(d="left",u-=c)):(u=this.left+l,n==="near"?d="left":n==="center"?(d="center",u+=c/2):(d="right",u=this.right)):d="right",{textAlign:d,x:u}}_computeLabelArea(){if(this.options.ticks.mirror)return;const e=this.chart,s=this.options.position;if(s==="left"||s==="right")return{top:0,left:this.left,bottom:e.height,right:this.right};if(s==="top"||s==="bottom")return{top:this.top,left:0,bottom:this.bottom,right:e.width}}drawBackground(){const{ctx:e,options:{backgroundColor:s},left:n,top:r,width:i,height:o}=this;s&&(e.save(),e.fillStyle=s,e.fillRect(n,r,i,o),e.restore())}getLineWidthForValue(e){const s=this.options.grid;if(!this._isVisible()||!s.display)return 0;const r=this.ticks.findIndex(i=>i.value===e);return r>=0?s.setContext(this.getContext(r)).lineWidth:0}drawGrid(e){const s=this.options.grid,n=this.ctx,r=this._gridLineItems||(this._gridLineItems=this._computeGridLineItems(e));let i,o;const l=(c,d,u)=>{!u.width||!u.color||(n.save(),n.lineWidth=u.width,n.strokeStyle=u.color,n.setLineDash(u.borderDash||[]),n.lineDashOffset=u.borderDashOffset,n.beginPath(),n.moveTo(c.x,c.y),n.lineTo(d.x,d.y),n.stroke(),n.restore())};if(s.display)for(i=0,o=r.length;i<o;++i){const c=r[i];s.drawOnChartArea&&l({x:c.x1,y:c.y1},{x:c.x2,y:c.y2},c),s.drawTicks&&l({x:c.tx1,y:c.ty1},{x:c.tx2,y:c.ty2},{color:c.tickColor,width:c.tickWidth,borderDash:c.tickBorderDash,borderDashOffset:c.tickBorderDashOffset})}}drawBorder(){const{chart:e,ctx:s,options:{border:n,grid:r}}=this,i=n.setContext(this.getContext()),o=n.display?i.width:0;if(!o)return;const l=r.setContext(this.getContext(0)).lineWidth,c=this._borderValue;let d,u,h,f;this.isHorizontal()?(d=Ln(e,this.left,o)-o/2,u=Ln(e,this.right,l)+l/2,h=f=c):(h=Ln(e,this.top,o)-o/2,f=Ln(e,this.bottom,l)+l/2,d=u=c),s.save(),s.lineWidth=i.width,s.strokeStyle=i.color,s.beginPath(),s.moveTo(d,h),s.lineTo(u,f),s.stroke(),s.restore()}drawLabels(e){if(!this.options.ticks.display)return;const n=this.ctx,r=this._computeLabelArea();r&&Zl(n,r);const i=this.getLabelItems(e);for(const o of i){const l=o.options,c=o.font,d=o.label,u=o.textOffset;nr(n,d,0,u,c,l)}r&&ec(n)}drawTitle(){const{ctx:e,options:{position:s,title:n,reverse:r}}=this;if(!n.display)return;const i=Ge(n.font),o=dt(n.padding),l=n.align;let c=i.lineHeight/2;s==="bottom"||s==="center"||me(s)?(c+=o.bottom,Se(n.text)&&(c+=i.lineHeight*(n.text.length-1))):c+=o.top;const{titleX:d,titleY:u,maxWidth:h,rotation:f}=a4(this,c,s,l);nr(e,n.text,0,0,i,{color:n.color,maxWidth:h,rotation:f,textAlign:i4(l,s,r),textBaseline:"middle",translation:[d,u]})}draw(e){this._isVisible()&&(this.drawBackground(),this.drawGrid(e),this.drawBorder(),this.drawTitle(),this.drawLabels(e))}_layers(){const e=this.options,s=e.ticks&&e.ticks.z||0,n=ce(e.grid&&e.grid.z,-1),r=ce(e.border&&e.border.z,0);return!this._isVisible()||this.draw!==lr.prototype.draw?[{z:s,draw:i=>{this.draw(i)}}]:[{z:n,draw:i=>{this.drawBackground(),this.drawGrid(i),this.drawTitle()}},{z:r,draw:()=>{this.drawBorder()}},{z:s,draw:i=>{this.drawLabels(i)}}]}getMatchingVisibleMetas(e){const s=this.chart.getSortedVisibleDatasetMetas(),n=this.axis+"AxisID",r=[];let i,o;for(i=0,o=s.length;i<o;++i){const l=s[i];l[n]===this.id&&(!e||l.type===e)&&r.push(l)}return r}_resolveTickFontOptions(e){const s=this.options.ticks.setContext(this.getContext(e));return Ge(s.font)}_maxDigits(){const e=this._resolveTickFontOptions(0).lineHeight;return(this.isHorizontal()?this.width:this.height)/e}}class go{constructor(e,s,n){this.type=e,this.scope=s,this.override=n,this.items=Object.create(null)}isForType(e){return Object.prototype.isPrototypeOf.call(this.type.prototype,e.prototype)}register(e){const s=Object.getPrototypeOf(e);let n;c4(s)&&(n=this.register(s));const r=this.items,i=e.id,o=this.scope+"."+i;if(!i)throw new Error("class does not have id: "+e);return i in r||(r[i]=e,o4(e,o,n),this.override&&Fe.override(e.id,e.overrides)),o}get(e){return this.items[e]}unregister(e){const s=this.items,n=e.id,r=this.scope;n in s&&delete s[n],r&&n in Fe[r]&&(delete Fe[r][n],this.override&&delete sr[n])}}function o4(t,e,s){const n=pa(Object.create(null),[s?Fe.get(s):{},Fe.get(e),t.defaults]);Fe.set(e,n),t.defaultRoutes&&l4(e,t.defaultRoutes),t.descriptors&&Fe.describe(e,t.descriptors)}function l4(t,e){Object.keys(e).forEach(s=>{const n=s.split("."),r=n.pop(),i=[t].concat(n).join("."),o=e[s].split("."),l=o.pop(),c=o.join(".");Fe.route(i,r,c,l)})}function c4(t){return"id"in t&&"defaults"in t}class d4{constructor(){this.controllers=new go(Or,"datasets",!0),this.elements=new go(_s,"elements"),this.plugins=new go(Object,"plugins"),this.scales=new go(lr,"scales"),this._typedRegistries=[this.controllers,this.scales,this.elements]}add(...e){this._each("register",e)}remove(...e){this._each("unregister",e)}addControllers(...e){this._each("register",e,this.controllers)}addElements(...e){this._each("register",e,this.elements)}addPlugins(...e){this._each("register",e,this.plugins)}addScales(...e){this._each("register",e,this.scales)}getController(e){return this._get(e,this.controllers,"controller")}getElement(e){return this._get(e,this.elements,"element")}getPlugin(e){return this._get(e,this.plugins,"plugin")}getScale(e){return this._get(e,this.scales,"scale")}removeControllers(...e){this._each("unregister",e,this.controllers)}removeElements(...e){this._each("unregister",e,this.elements)}removePlugins(...e){this._each("unregister",e,this.plugins)}removeScales(...e){this._each("unregister",e,this.scales)}_each(e,s,n){[...s].forEach(r=>{const i=n||this._getRegistryForType(r);n||i.isForType(r)||i===this.plugins&&r.id?this._exec(e,i,r):ye(r,o=>{const l=n||this._getRegistryForType(o);this._exec(e,l,o)})})}_exec(e,s,n){const r=Vh(e);_e(n["before"+r],[],n),s[e](n),_e(n["after"+r],[],n)}_getRegistryForType(e){for(let s=0;s<this._typedRegistries.length;s++){const n=this._typedRegistries[s];if(n.isForType(e))return n}return this.plugins}_get(e,s,n){const r=s.get(e);if(r===void 0)throw new Error('"'+e+'" is not a registered '+n+".");return r}}var ps=new d4;class u4{constructor(){this._init=[]}notify(e,s,n,r){s==="beforeInit"&&(this._init=this._createDescriptors(e,!0),this._notify(this._init,e,"install"));const i=r?this._descriptors(e).filter(r):this._descriptors(e),o=this._notify(i,e,s,n);return s==="afterDestroy"&&(this._notify(i,e,"stop"),this._notify(this._init,e,"uninstall")),o}_notify(e,s,n,r){r=r||{};for(const i of e){const o=i.plugin,l=o[n],c=[s,r,i.options];if(_e(l,c,o)===!1&&r.cancelable)return!1}return!0}invalidate(){ge(this._cache)||(this._oldCache=this._cache,this._cache=void 0)}_descriptors(e){if(this._cache)return this._cache;const s=this._cache=this._createDescriptors(e);return this._notifyStateChanges(e),s}_createDescriptors(e,s){const n=e&&e.config,r=ce(n.options&&n.options.plugins,{}),i=h4(n);return r===!1&&!s?[]:m4(e,i,r,s)}_notifyStateChanges(e){const s=this._oldCache||[],n=this._cache,r=(i,o)=>i.filter(l=>!o.some(c=>l.plugin.id===c.plugin.id));this._notify(r(s,n),e,"stop"),this._notify(r(n,s),e,"start")}}function h4(t){const e={},s=[],n=Object.keys(ps.plugins.items);for(let i=0;i<n.length;i++)s.push(ps.getPlugin(n[i]));const r=t.plugins||[];for(let i=0;i<r.length;i++){const o=r[i];s.indexOf(o)===-1&&(s.push(o),e[o.id]=!0)}return{plugins:s,localIds:e}}function f4(t,e){return!e&&t===!1?null:t===!0?{}:t}function m4(t,{plugins:e,localIds:s},n,r){const i=[],o=t.getContext();for(const l of e){const c=l.id,d=f4(n[c],r);d!==null&&i.push({plugin:l,options:p4(t.config,{plugin:l,local:s[c]},d,o)})}return i}function p4(t,{plugin:e,local:s},n,r){const i=t.pluginScopeKeys(e),o=t.getOptionScopes(n,i);return s&&e.defaults&&o.push(e.defaults),t.createResolver(o,r,[""],{scriptable:!1,indexable:!1,allKeys:!0})}function yu(t,e){const s=Fe.datasets[t]||{};return((e.datasets||{})[t]||{}).indexAxis||e.indexAxis||s.indexAxis||"x"}function g4(t,e){let s=t;return t==="_index_"?s=e:t==="_value_"&&(s=e==="x"?"y":"x"),s}function x4(t,e){return t===e?"_index_":"_value_"}function Mp(t){if(t==="x"||t==="y"||t==="r")return t}function y4(t){if(t==="top"||t==="bottom")return"x";if(t==="left"||t==="right")return"y"}function vu(t,...e){if(Mp(t))return t;for(const s of e){const n=s.axis||y4(s.position)||t.length>1&&Mp(t[0].toLowerCase());if(n)return n}throw new Error(`Cannot determine type of '${t}' axis. Please provide 'axis' or 'position' option.`)}function Dp(t,e,s){if(s[e+"AxisID"]===t)return{axis:e}}function v4(t,e){if(e.data&&e.data.datasets){const s=e.data.datasets.filter(n=>n.xAxisID===t||n.yAxisID===t);if(s.length)return Dp(t,"x",s[0])||Dp(t,"y",s[0])}return{}}function b4(t,e){const s=sr[t.type]||{scales:{}},n=e.scales||{},r=yu(t.type,e),i=Object.create(null);return Object.keys(n).forEach(o=>{const l=n[o];if(!me(l))return console.error(`Invalid scale configuration for scale: ${o}`);if(l._proxy)return console.warn(`Ignoring resolver passed as options for scale: ${o}`);const c=vu(o,l,v4(o,t),Fe.scales[l.type]),d=x4(c,r),u=s.scales||{};i[o]=Hi(Object.create(null),[{axis:c},l,u[c],u[d]])}),t.data.datasets.forEach(o=>{const l=o.type||t.type,c=o.indexAxis||yu(l,e),u=(sr[l]||{}).scales||{};Object.keys(u).forEach(h=>{const f=g4(h,c),m=o[f+"AxisID"]||f;i[m]=i[m]||Object.create(null),Hi(i[m],[{axis:f},n[m],u[h]])})}),Object.keys(i).forEach(o=>{const l=i[o];Hi(l,[Fe.scales[l.type],Fe.scale])}),i}function tv(t){const e=t.options||(t.options={});e.plugins=ce(e.plugins,{}),e.scales=b4(t,e)}function sv(t){return t=t||{},t.datasets=t.datasets||[],t.labels=t.labels||[],t}function w4(t){return t=t||{},t.data=sv(t.data),tv(t),t}const Op=new Map,nv=new Set;function xo(t,e){let s=Op.get(t);return s||(s=e(),Op.set(t,s),nv.add(s)),s}const bi=(t,e,s)=>{const n=Vr(e,s);n!==void 0&&t.add(n)};class _4{constructor(e){this._config=w4(e),this._scopeCache=new Map,this._resolverCache=new Map}get platform(){return this._config.platform}get type(){return this._config.type}set type(e){this._config.type=e}get data(){return this._config.data}set data(e){this._config.data=sv(e)}get options(){return this._config.options}set options(e){this._config.options=e}get plugins(){return this._config.plugins}update(){const e=this._config;this.clearCache(),tv(e)}clearCache(){this._scopeCache.clear(),this._resolverCache.clear()}datasetScopeKeys(e){return xo(e,()=>[[`datasets.${e}`,""]])}datasetAnimationScopeKeys(e,s){return xo(`${e}.transition.${s}`,()=>[[`datasets.${e}.transitions.${s}`,`transitions.${s}`],[`datasets.${e}`,""]])}datasetElementScopeKeys(e,s){return xo(`${e}-${s}`,()=>[[`datasets.${e}.elements.${s}`,`datasets.${e}`,`elements.${s}`,""]])}pluginScopeKeys(e){const s=e.id,n=this.type;return xo(`${n}-plugin-${s}`,()=>[[`plugins.${s}`,...e.additionalOptionScopes||[]]])}_cachedScopes(e,s){const n=this._scopeCache;let r=n.get(e);return(!r||s)&&(r=new Map,n.set(e,r)),r}getOptionScopes(e,s,n){const{options:r,type:i}=this,o=this._cachedScopes(e,n),l=o.get(s);if(l)return l;const c=new Set;s.forEach(u=>{e&&(c.add(e),u.forEach(h=>bi(c,e,h))),u.forEach(h=>bi(c,r,h)),u.forEach(h=>bi(c,sr[i]||{},h)),u.forEach(h=>bi(c,Fe,h)),u.forEach(h=>bi(c,gu,h))});const d=Array.from(c);return d.length===0&&d.push(Object.create(null)),nv.has(s)&&o.set(s,d),d}chartOptionScopes(){const{options:e,type:s}=this;return[e,sr[s]||{},Fe.datasets[s]||{},{type:s},Fe,gu]}resolveNamedOptions(e,s,n,r=[""]){const i={$shared:!0},{resolver:o,subPrefixes:l}=Rp(this._resolverCache,e,r);let c=o;if(N4(o,s)){i.$shared=!1,n=jn(n)?n():n;const d=this.createResolver(e,n,l);c=Wr(o,n,d)}for(const d of s)i[d]=c[d];return i}createResolver(e,s,n=[""],r){const{resolver:i}=Rp(this._resolverCache,e,n);return me(s)?Wr(i,s,void 0,r):i}}function Rp(t,e,s){let n=t.get(e);n||(n=new Map,t.set(e,n));const r=s.join();let i=n.get(r);return i||(i={resolver:Jh(e,s),subPrefixes:s.filter(l=>!l.toLowerCase().includes("hover"))},n.set(r,i)),i}const j4=t=>me(t)&&Object.getOwnPropertyNames(t).some(e=>jn(t[e]));function N4(t,e){const{isScriptable:s,isIndexable:n}=Ry(t);for(const r of e){const i=s(r),o=n(r),l=(o||i)&&t[r];if(i&&(jn(l)||j4(l))||o&&Se(l))return!0}return!1}var k4="4.5.0";const S4=["top","bottom","left","right","chartArea"];function Ip(t,e){return t==="top"||t==="bottom"||S4.indexOf(t)===-1&&e==="x"}function Fp(t,e){return function(s,n){return s[t]===n[t]?s[e]-n[e]:s[t]-n[t]}}function $p(t){const e=t.chart,s=e.options.animation;e.notifyPlugins("afterRender"),_e(s&&s.onComplete,[t],e)}function C4(t){const e=t.chart,s=e.options.animation;_e(s&&s.onProgress,[t],e)}function rv(t){return Zh()&&typeof t=="string"?t=document.getElementById(t):t&&t.length&&(t=t[0]),t&&t.canvas&&(t=t.canvas),t}const zo={},zp=t=>{const e=rv(t);return Object.values(zo).filter(s=>s.canvas===e).pop()};function E4(t,e,s){const n=Object.keys(t);for(const r of n){const i=+r;if(i>=e){const o=t[r];delete t[r],(s>0||i>e)&&(t[i+s]=o)}}}function P4(t,e,s,n){return!s||t.type==="mouseout"?null:n?e:t}var Gs;let sc=(Gs=class{static register(...e){ps.add(...e),Up()}static unregister(...e){ps.remove(...e),Up()}constructor(e,s){const n=this.config=new _4(s),r=rv(e),i=zp(r);if(i)throw new Error("Canvas is already in use. Chart with ID '"+i.id+"' must be destroyed before the canvas with ID '"+i.canvas.id+"' can be reused.");const o=n.createResolver(n.chartOptionScopes(),this.getContext());this.platform=new(n.platform||KC(r)),this.platform.updateConfig(n);const l=this.platform.acquireContext(r,o.aspectRatio),c=l&&l.canvas,d=c&&c.height,u=c&&c.width;if(this.id=Pk(),this.ctx=l,this.canvas=c,this.width=u,this.height=d,this._options=o,this._aspectRatio=this.aspectRatio,this._layers=[],this._metasets=[],this._stacks=void 0,this.boxes=[],this.currentDevicePixelRatio=void 0,this.chartArea=void 0,this._active=[],this._lastEvent=void 0,this._listeners={},this._responsiveListeners=void 0,this._sortedMetasets=[],this.scales={},this._plugins=new u4,this.$proxies={},this._hiddenIndices={},this.attached=!1,this._animationsDisabled=void 0,this.$context=void 0,this._doResize=Kk(h=>this.update(h),o.resizeDelay||0),this._dataChanges=[],zo[this.id]=this,!l||!c){console.error("Failed to create chart: can't acquire context from the given item");return}Ps.listen(this,"complete",$p),Ps.listen(this,"progress",C4),this._initialize(),this.attached&&this.update()}get aspectRatio(){const{options:{aspectRatio:e,maintainAspectRatio:s},width:n,height:r,_aspectRatio:i}=this;return ge(e)?s&&i?i:r?n/r:null:e}get data(){return this.config.data}set data(e){this.config.data=e}get options(){return this._options}set options(e){this.config.options=e}get registry(){return ps}_initialize(){return this.notifyPlugins("beforeInit"),this.options.responsive?this.resize():cp(this,this.options.devicePixelRatio),this.bindEvents(),this.notifyPlugins("afterInit"),this}clear(){return ap(this.canvas,this.ctx),this}stop(){return Ps.stop(this),this}resize(e,s){Ps.running(this)?this._resizeBeforeDraw={width:e,height:s}:this._resize(e,s)}_resize(e,s){const n=this.options,r=this.canvas,i=n.maintainAspectRatio&&this.aspectRatio,o=this.platform.getMaximumSize(r,e,s,i),l=n.devicePixelRatio||this.platform.getDevicePixelRatio(),c=this.width?"resize":"attach";this.width=o.width,this.height=o.height,this._aspectRatio=this.aspectRatio,cp(this,l,!0)&&(this.notifyPlugins("resize",{size:o}),_e(n.onResize,[this,o],this),this.attached&&this._doResize(c)&&this.render())}ensureScalesHaveIDs(){const s=this.options.scales||{};ye(s,(n,r)=>{n.id=r})}buildOrUpdateScales(){const e=this.options,s=e.scales,n=this.scales,r=Object.keys(n).reduce((o,l)=>(o[l]=!1,o),{});let i=[];s&&(i=i.concat(Object.keys(s).map(o=>{const l=s[o],c=vu(o,l),d=c==="r",u=c==="x";return{options:l,dposition:d?"chartArea":u?"bottom":"left",dtype:d?"radialLinear":u?"category":"linear"}}))),ye(i,o=>{const l=o.options,c=l.id,d=vu(c,l),u=ce(l.type,o.dtype);(l.position===void 0||Ip(l.position,d)!==Ip(o.dposition))&&(l.position=o.dposition),r[c]=!0;let h=null;if(c in n&&n[c].type===u)h=n[c];else{const f=ps.getScale(u);h=new f({id:c,type:u,ctx:this.ctx,chart:this}),n[h.id]=h}h.init(l,e)}),ye(r,(o,l)=>{o||delete n[l]}),ye(n,o=>{Wt.configure(this,o,o.options),Wt.addBox(this,o)})}_updateMetasets(){const e=this._metasets,s=this.data.datasets.length,n=e.length;if(e.sort((r,i)=>r.index-i.index),n>s){for(let r=s;r<n;++r)this._destroyDatasetMeta(r);e.splice(s,n-s)}this._sortedMetasets=e.slice(0).sort(Fp("order","index"))}_removeUnreferencedMetasets(){const{_metasets:e,data:{datasets:s}}=this;e.length>s.length&&delete this._stacks,e.forEach((n,r)=>{s.filter(i=>i===n._dataset).length===0&&this._destroyDatasetMeta(r)})}buildOrUpdateControllers(){const e=[],s=this.data.datasets;let n,r;for(this._removeUnreferencedMetasets(),n=0,r=s.length;n<r;n++){const i=s[n];let o=this.getDatasetMeta(n);const l=i.type||this.config.type;if(o.type&&o.type!==l&&(this._destroyDatasetMeta(n),o=this.getDatasetMeta(n)),o.type=l,o.indexAxis=i.indexAxis||yu(l,this.options),o.order=i.order||0,o.index=n,o.label=""+i.label,o.visible=this.isDatasetVisible(n),o.controller)o.controller.updateIndex(n),o.controller.linkScales();else{const c=ps.getController(l),{datasetElementType:d,dataElementType:u}=Fe.datasets[l];Object.assign(c,{dataElementType:ps.getElement(u),datasetElementType:d&&ps.getElement(d)}),o.controller=new c(this,n),e.push(o.controller)}}return this._updateMetasets(),e}_resetElements(){ye(this.data.datasets,(e,s)=>{this.getDatasetMeta(s).controller.reset()},this)}reset(){this._resetElements(),this.notifyPlugins("reset")}update(e){const s=this.config;s.update();const n=this._options=s.createResolver(s.chartOptionScopes(),this.getContext()),r=this._animationsDisabled=!n.animation;if(this._updateScales(),this._checkEventBindings(),this._updateHiddenIndices(),this._plugins.invalidate(),this.notifyPlugins("beforeUpdate",{mode:e,cancelable:!0})===!1)return;const i=this.buildOrUpdateControllers();this.notifyPlugins("beforeElementsUpdate");let o=0;for(let d=0,u=this.data.datasets.length;d<u;d++){const{controller:h}=this.getDatasetMeta(d),f=!r&&i.indexOf(h)===-1;h.buildOrUpdateElements(f),o=Math.max(+h.getMaxOverflow(),o)}o=this._minPadding=n.layout.autoPadding?o:0,this._updateLayout(o),r||ye(i,d=>{d.reset()}),this._updateDatasets(e),this.notifyPlugins("afterUpdate",{mode:e}),this._layers.sort(Fp("z","_idx"));const{_active:l,_lastEvent:c}=this;c?this._eventHandler(c,!0):l.length&&this._updateHoverStyles(l,l,!0),this.render()}_updateScales(){ye(this.scales,e=>{Wt.removeBox(this,e)}),this.ensureScalesHaveIDs(),this.buildOrUpdateScales()}_checkEventBindings(){const e=this.options,s=new Set(Object.keys(this._listeners)),n=new Set(e.events);(!Qm(s,n)||!!this._responsiveListeners!==e.responsive)&&(this.unbindEvents(),this.bindEvents())}_updateHiddenIndices(){const{_hiddenIndices:e}=this,s=this._getUniformDataChanges()||[];for(const{method:n,start:r,count:i}of s){const o=n==="_removeElements"?-i:i;E4(e,r,o)}}_getUniformDataChanges(){const e=this._dataChanges;if(!e||!e.length)return;this._dataChanges=[];const s=this.data.datasets.length,n=i=>new Set(e.filter(o=>o[0]===i).map((o,l)=>l+","+o.splice(1).join(","))),r=n(0);for(let i=1;i<s;i++)if(!Qm(r,n(i)))return;return Array.from(r).map(i=>i.split(",")).map(i=>({method:i[1],start:+i[2],count:+i[3]}))}_updateLayout(e){if(this.notifyPlugins("beforeLayout",{cancelable:!0})===!1)return;Wt.update(this,this.width,this.height,e);const s=this.chartArea,n=s.width<=0||s.height<=0;this._layers=[],ye(this.boxes,r=>{n&&r.position==="chartArea"||(r.configure&&r.configure(),this._layers.push(...r._layers()))},this),this._layers.forEach((r,i)=>{r._idx=i}),this.notifyPlugins("afterLayout")}_updateDatasets(e){if(this.notifyPlugins("beforeDatasetsUpdate",{mode:e,cancelable:!0})!==!1){for(let s=0,n=this.data.datasets.length;s<n;++s)this.getDatasetMeta(s).controller.configure();for(let s=0,n=this.data.datasets.length;s<n;++s)this._updateDataset(s,jn(e)?e({datasetIndex:s}):e);this.notifyPlugins("afterDatasetsUpdate",{mode:e})}}_updateDataset(e,s){const n=this.getDatasetMeta(e),r={meta:n,index:e,mode:s,cancelable:!0};this.notifyPlugins("beforeDatasetUpdate",r)!==!1&&(n.controller._update(s),r.cancelable=!1,this.notifyPlugins("afterDatasetUpdate",r))}render(){this.notifyPlugins("beforeRender",{cancelable:!0})!==!1&&(Ps.has(this)?this.attached&&!Ps.running(this)&&Ps.start(this):(this.draw(),$p({chart:this})))}draw(){let e;if(this._resizeBeforeDraw){const{width:n,height:r}=this._resizeBeforeDraw;this._resizeBeforeDraw=null,this._resize(n,r)}if(this.clear(),this.width<=0||this.height<=0||this.notifyPlugins("beforeDraw",{cancelable:!0})===!1)return;const s=this._layers;for(e=0;e<s.length&&s[e].z<=0;++e)s[e].draw(this.chartArea);for(this._drawDatasets();e<s.length;++e)s[e].draw(this.chartArea);this.notifyPlugins("afterDraw")}_getSortedDatasetMetas(e){const s=this._sortedMetasets,n=[];let r,i;for(r=0,i=s.length;r<i;++r){const o=s[r];(!e||o.visible)&&n.push(o)}return n}getSortedVisibleDatasetMetas(){return this._getSortedDatasetMetas(!0)}_drawDatasets(){if(this.notifyPlugins("beforeDatasetsDraw",{cancelable:!0})===!1)return;const e=this.getSortedVisibleDatasetMetas();for(let s=e.length-1;s>=0;--s)this._drawDataset(e[s]);this.notifyPlugins("afterDatasetsDraw")}_drawDataset(e){const s=this.ctx,n={meta:e,index:e.index,cancelable:!0},r=qy(this,e);this.notifyPlugins("beforeDatasetDraw",n)!==!1&&(r&&Zl(s,r),e.controller.draw(),r&&ec(s),n.cancelable=!1,this.notifyPlugins("afterDatasetDraw",n))}isPointInArea(e){return Fs(e,this.chartArea,this._minPadding)}getElementsAtEventForMode(e,s,n,r){const i=SC.modes[s];return typeof i=="function"?i(this,e,n,r):[]}getDatasetMeta(e){const s=this.data.datasets[e],n=this._metasets;let r=n.filter(i=>i&&i._dataset===s).pop();return r||(r={type:null,data:[],dataset:null,controller:null,hidden:null,xAxisID:null,yAxisID:null,order:s&&s.order||0,index:e,_dataset:s,_parsed:[],_sorted:!1},n.push(r)),r}getContext(){return this.$context||(this.$context=En(null,{chart:this,type:"chart"}))}getVisibleDatasetCount(){return this.getSortedVisibleDatasetMetas().length}isDatasetVisible(e){const s=this.data.datasets[e];if(!s)return!1;const n=this.getDatasetMeta(e);return typeof n.hidden=="boolean"?!n.hidden:!s.hidden}setDatasetVisibility(e,s){const n=this.getDatasetMeta(e);n.hidden=!s}toggleDataVisibility(e){this._hiddenIndices[e]=!this._hiddenIndices[e]}getDataVisibility(e){return!this._hiddenIndices[e]}_updateVisibility(e,s,n){const r=n?"show":"hide",i=this.getDatasetMeta(e),o=i.controller._resolveAnimations(void 0,r);ga(s)?(i.data[s].hidden=!n,this.update()):(this.setDatasetVisibility(e,n),o.update(i,{visible:n}),this.update(l=>l.datasetIndex===e?r:void 0))}hide(e,s){this._updateVisibility(e,s,!1)}show(e,s){this._updateVisibility(e,s,!0)}_destroyDatasetMeta(e){const s=this._metasets[e];s&&s.controller&&s.controller._destroy(),delete this._metasets[e]}_stop(){let e,s;for(this.stop(),Ps.remove(this),e=0,s=this.data.datasets.length;e<s;++e)this._destroyDatasetMeta(e)}destroy(){this.notifyPlugins("beforeDestroy");const{canvas:e,ctx:s}=this;this._stop(),this.config.clearCache(),e&&(this.unbindEvents(),ap(e,s),this.platform.releaseContext(s),this.canvas=null,this.ctx=null),delete zo[this.id],this.notifyPlugins("afterDestroy")}toBase64Image(...e){return this.canvas.toDataURL(...e)}bindEvents(){this.bindUserEvents(),this.options.responsive?this.bindResponsiveEvents():this.attached=!0}bindUserEvents(){const e=this._listeners,s=this.platform,n=(i,o)=>{s.addEventListener(this,i,o),e[i]=o},r=(i,o,l)=>{i.offsetX=o,i.offsetY=l,this._eventHandler(i)};ye(this.options.events,i=>n(i,r))}bindResponsiveEvents(){this._responsiveListeners||(this._responsiveListeners={});const e=this._responsiveListeners,s=this.platform,n=(c,d)=>{s.addEventListener(this,c,d),e[c]=d},r=(c,d)=>{e[c]&&(s.removeEventListener(this,c,d),delete e[c])},i=(c,d)=>{this.canvas&&this.resize(c,d)};let o;const l=()=>{r("attach",l),this.attached=!0,this.resize(),n("resize",i),n("detach",o)};o=()=>{this.attached=!1,r("resize",i),this._stop(),this._resize(0,0),n("attach",l)},s.isAttached(this.canvas)?l():o()}unbindEvents(){ye(this._listeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._listeners={},ye(this._responsiveListeners,(e,s)=>{this.platform.removeEventListener(this,s,e)}),this._responsiveListeners=void 0}updateHoverStyle(e,s,n){const r=n?"set":"remove";let i,o,l,c;for(s==="dataset"&&(i=this.getDatasetMeta(e[0].datasetIndex),i.controller["_"+r+"DatasetHoverStyle"]()),l=0,c=e.length;l<c;++l){o=e[l];const d=o&&this.getDatasetMeta(o.datasetIndex).controller;d&&d[r+"HoverStyle"](o.element,o.datasetIndex,o.index)}}getActiveElements(){return this._active||[]}setActiveElements(e){const s=this._active||[],n=e.map(({datasetIndex:i,index:o})=>{const l=this.getDatasetMeta(i);if(!l)throw new Error("No dataset found at index "+i);return{datasetIndex:i,element:l.data[o],index:o}});!xl(n,s)&&(this._active=n,this._lastEvent=null,this._updateHoverStyles(n,s))}notifyPlugins(e,s,n){return this._plugins.notify(this,e,s,n)}isPluginEnabled(e){return this._plugins._cache.filter(s=>s.plugin.id===e).length===1}_updateHoverStyles(e,s,n){const r=this.options.hover,i=(c,d)=>c.filter(u=>!d.some(h=>u.datasetIndex===h.datasetIndex&&u.index===h.index)),o=i(s,e),l=n?e:i(e,s);o.length&&this.updateHoverStyle(o,r.mode,!1),l.length&&r.mode&&this.updateHoverStyle(l,r.mode,!0)}_eventHandler(e,s){const n={event:e,replay:s,cancelable:!0,inChartArea:this.isPointInArea(e)},r=o=>(o.options.events||this.options.events).includes(e.native.type);if(this.notifyPlugins("beforeEvent",n,r)===!1)return;const i=this._handleEvent(e,s,n.inChartArea);return n.cancelable=!1,this.notifyPlugins("afterEvent",n,r),(i||n.changed)&&this.render(),this}_handleEvent(e,s,n){const{_active:r=[],options:i}=this,o=s,l=this._getActiveElements(e,r,n,o),c=Ok(e),d=P4(e,this._lastEvent,n,c);n&&(this._lastEvent=null,_e(i.onHover,[e,l,this],this),c&&_e(i.onClick,[e,l,this],this));const u=!xl(l,r);return(u||s)&&(this._active=l,this._updateHoverStyles(l,r,s)),this._lastEvent=d,u}_getActiveElements(e,s,n,r){if(e.type==="mouseout")return[];if(!n)return s;const i=this.options.hover;return this.getElementsAtEventForMode(e,i.mode,i,r)}},Z(Gs,"defaults",Fe),Z(Gs,"instances",zo),Z(Gs,"overrides",sr),Z(Gs,"registry",ps),Z(Gs,"version",k4),Z(Gs,"getChart",zp),Gs);function Up(){return ye(sc.instances,t=>t._plugins.invalidate())}function iv(t,e,s=e){t.lineCap=ce(s.borderCapStyle,e.borderCapStyle),t.setLineDash(ce(s.borderDash,e.borderDash)),t.lineDashOffset=ce(s.borderDashOffset,e.borderDashOffset),t.lineJoin=ce(s.borderJoinStyle,e.borderJoinStyle),t.lineWidth=ce(s.borderWidth,e.borderWidth),t.strokeStyle=ce(s.borderColor,e.borderColor)}function A4(t,e,s){t.lineTo(s.x,s.y)}function L4(t){return t.stepped?oS:t.tension||t.cubicInterpolationMode==="monotone"?lS:A4}function av(t,e,s={}){const n=t.length,{start:r=0,end:i=n-1}=s,{start:o,end:l}=e,c=Math.max(r,o),d=Math.min(i,l),u=r<o&&i<o||r>l&&i>l;return{count:n,start:c,loop:e.loop,ilen:d<c&&!u?n+d-c:d-c}}function T4(t,e,s,n){const{points:r,options:i}=e,{count:o,start:l,loop:c,ilen:d}=av(r,s,n),u=L4(i);let{move:h=!0,reverse:f}=n||{},m,p,v;for(m=0;m<=d;++m)p=r[(l+(f?d-m:m))%o],!p.skip&&(h?(t.moveTo(p.x,p.y),h=!1):u(t,v,p,f,i.stepped),v=p);return c&&(p=r[(l+(f?d:0))%o],u(t,v,p,f,i.stepped)),!!c}function M4(t,e,s,n){const r=e.points,{count:i,start:o,ilen:l}=av(r,s,n),{move:c=!0,reverse:d}=n||{};let u=0,h=0,f,m,p,v,g,x;const y=N=>(o+(d?l-N:N))%i,b=()=>{v!==g&&(t.lineTo(u,g),t.lineTo(u,v),t.lineTo(u,x))};for(c&&(m=r[y(0)],t.moveTo(m.x,m.y)),f=0;f<=l;++f){if(m=r[y(f)],m.skip)continue;const N=m.x,_=m.y,k=N|0;k===p?(_<v?v=_:_>g&&(g=_),u=(h*u+N)/++h):(b(),t.lineTo(N,_),p=k,h=0,v=g=_),x=_}b()}function bu(t){const e=t.options,s=e.borderDash&&e.borderDash.length;return!t._decimated&&!t._loop&&!e.tension&&e.cubicInterpolationMode!=="monotone"&&!e.stepped&&!s?M4:T4}function D4(t){return t.stepped?zS:t.tension||t.cubicInterpolationMode==="monotone"?US:Fn}function O4(t,e,s,n){let r=e._path;r||(r=e._path=new Path2D,e.path(r,s,n)&&r.closePath()),iv(t,e.options),t.stroke(r)}function R4(t,e,s,n){const{segments:r,options:i}=e,o=bu(e);for(const l of r)iv(t,i,l.style),t.beginPath(),o(t,e,l,{start:s,end:s+n-1})&&t.closePath(),t.stroke()}const I4=typeof Path2D=="function";function F4(t,e,s,n){I4&&!e.options.segment?O4(t,e,s,n):R4(t,e,s,n)}class cn extends _s{constructor(e){super(),this.animated=!0,this.options=void 0,this._chart=void 0,this._loop=void 0,this._fullLoop=void 0,this._path=void 0,this._points=void 0,this._segments=void 0,this._decimated=!1,this._pointsUpdated=!1,this._datasetIndex=void 0,e&&Object.assign(this,e)}updateControlPoints(e,s){const n=this.options;if((n.tension||n.cubicInterpolationMode==="monotone")&&!n.stepped&&!this._pointsUpdated){const r=n.spanGaps?this._loop:this._fullLoop;TS(this._points,n,e,r,s),this._pointsUpdated=!0}}set points(e){this._points=e,delete this._segments,delete this._path,this._pointsUpdated=!1}get points(){return this._points}get segments(){return this._segments||(this._segments=KS(this,this.options.segment))}first(){const e=this.segments,s=this.points;return e.length&&s[e[0].start]}last(){const e=this.segments,s=this.points,n=e.length;return n&&s[e[n-1].end]}interpolate(e,s){const n=this.options,r=e[s],i=this.points,o=Wy(this,{property:s,start:r,end:r});if(!o.length)return;const l=[],c=D4(n);let d,u;for(d=0,u=o.length;d<u;++d){const{start:h,end:f}=o[d],m=i[h],p=i[f];if(m===p){l.push(m);continue}const v=Math.abs((r-m[s])/(p[s]-m[s])),g=c(m,p,v,n.stepped);g[s]=e[s],l.push(g)}return l.length===1?l[0]:l}pathSegment(e,s,n){return bu(this)(e,this,s,n)}path(e,s,n){const r=this.segments,i=bu(this);let o=this._loop;s=s||0,n=n||this.points.length-s;for(const l of r)o&=i(e,this,l,{start:s,end:s+n-1});return!!o}draw(e,s,n,r){const i=this.options||{};(this.points||[]).length&&i.borderWidth&&(e.save(),F4(e,this,n,r),e.restore()),this.animated&&(this._pointsUpdated=!1,this._path=void 0)}}Z(cn,"id","line"),Z(cn,"defaults",{borderCapStyle:"butt",borderDash:[],borderDashOffset:0,borderJoinStyle:"miter",borderWidth:3,capBezierPoints:!0,cubicInterpolationMode:"default",fill:!1,spanGaps:!1,stepped:!1,tension:0}),Z(cn,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"}),Z(cn,"descriptors",{_scriptable:!0,_indexable:e=>e!=="borderDash"&&e!=="fill"});function Bp(t,e,s,n){const r=t.options,{[s]:i}=t.getProps([s],n);return Math.abs(e-i)<r.radius+r.hitRadius}class Uo extends _s{constructor(s){super();Z(this,"parsed");Z(this,"skip");Z(this,"stop");this.options=void 0,this.parsed=void 0,this.skip=void 0,this.stop=void 0,s&&Object.assign(this,s)}inRange(s,n,r){const i=this.options,{x:o,y:l}=this.getProps(["x","y"],r);return Math.pow(s-o,2)+Math.pow(n-l,2)<Math.pow(i.hitRadius+i.radius,2)}inXRange(s,n){return Bp(this,s,"x",n)}inYRange(s,n){return Bp(this,s,"y",n)}getCenterPoint(s){const{x:n,y:r}=this.getProps(["x","y"],s);return{x:n,y:r}}size(s){s=s||this.options||{};let n=s.radius||0;n=Math.max(n,n&&s.hoverRadius||0);const r=n&&s.borderWidth||0;return(n+r)*2}draw(s,n){const r=this.options;this.skip||r.radius<.1||!Fs(this,n,this.size(r)/2)||(s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.fillStyle=r.backgroundColor,xu(s,r,this.x,this.y))}getRange(){const s=this.options||{};return s.radius+s.hitRadius}}Z(Uo,"id","point"),Z(Uo,"defaults",{borderWidth:1,hitRadius:1,hoverBorderWidth:1,hoverRadius:4,pointStyle:"circle",radius:3,rotation:0}),Z(Uo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function ov(t,e){const{x:s,y:n,base:r,width:i,height:o}=t.getProps(["x","y","base","width","height"],e);let l,c,d,u,h;return t.horizontal?(h=o/2,l=Math.min(s,r),c=Math.max(s,r),d=n-h,u=n+h):(h=i/2,l=s-h,c=s+h,d=Math.min(n,r),u=Math.max(n,r)),{left:l,top:d,right:c,bottom:u}}function dn(t,e,s,n){return t?0:Ot(e,s,n)}function $4(t,e,s){const n=t.options.borderWidth,r=t.borderSkipped,i=Oy(n);return{t:dn(r.top,i.top,0,s),r:dn(r.right,i.right,0,e),b:dn(r.bottom,i.bottom,0,s),l:dn(r.left,i.left,0,e)}}function z4(t,e,s){const{enableBorderRadius:n}=t.getProps(["enableBorderRadius"]),r=t.options.borderRadius,i=Kn(r),o=Math.min(e,s),l=t.borderSkipped,c=n||me(r);return{topLeft:dn(!c||l.top||l.left,i.topLeft,0,o),topRight:dn(!c||l.top||l.right,i.topRight,0,o),bottomLeft:dn(!c||l.bottom||l.left,i.bottomLeft,0,o),bottomRight:dn(!c||l.bottom||l.right,i.bottomRight,0,o)}}function U4(t){const e=ov(t),s=e.right-e.left,n=e.bottom-e.top,r=$4(t,s/2,n/2),i=z4(t,s/2,n/2);return{outer:{x:e.left,y:e.top,w:s,h:n,radius:i},inner:{x:e.left+r.l,y:e.top+r.t,w:s-r.l-r.r,h:n-r.t-r.b,radius:{topLeft:Math.max(0,i.topLeft-Math.max(r.t,r.l)),topRight:Math.max(0,i.topRight-Math.max(r.t,r.r)),bottomLeft:Math.max(0,i.bottomLeft-Math.max(r.b,r.l)),bottomRight:Math.max(0,i.bottomRight-Math.max(r.b,r.r))}}}}function nd(t,e,s,n){const r=e===null,i=s===null,l=t&&!(r&&i)&&ov(t,n);return l&&(r||ln(e,l.left,l.right))&&(i||ln(s,l.top,l.bottom))}function B4(t){return t.topLeft||t.topRight||t.bottomLeft||t.bottomRight}function H4(t,e){t.rect(e.x,e.y,e.w,e.h)}function rd(t,e,s={}){const n=t.x!==s.x?-e:0,r=t.y!==s.y?-e:0,i=(t.x+t.w!==s.x+s.w?e:0)-n,o=(t.y+t.h!==s.y+s.h?e:0)-r;return{x:t.x+n,y:t.y+r,w:t.w+i,h:t.h+o,radius:t.radius}}class Bo extends _s{constructor(e){super(),this.options=void 0,this.horizontal=void 0,this.base=void 0,this.width=void 0,this.height=void 0,this.inflateAmount=void 0,e&&Object.assign(this,e)}draw(e){const{inflateAmount:s,options:{borderColor:n,backgroundColor:r}}=this,{inner:i,outer:o}=U4(this),l=B4(o.radius)?ya:H4;e.save(),(o.w!==i.w||o.h!==i.h)&&(e.beginPath(),l(e,rd(o,s,i)),e.clip(),l(e,rd(i,-s,o)),e.fillStyle=n,e.fill("evenodd")),e.beginPath(),l(e,rd(i,s)),e.fillStyle=r,e.fill(),e.restore()}inRange(e,s,n){return nd(this,e,s,n)}inXRange(e,s){return nd(this,e,null,s)}inYRange(e,s){return nd(this,null,e,s)}getCenterPoint(e){const{x:s,y:n,base:r,horizontal:i}=this.getProps(["x","y","base","horizontal"],e);return{x:i?(s+r)/2:s,y:i?n:(n+r)/2}}getRange(e){return e==="x"?this.width/2:this.height/2}}Z(Bo,"id","bar"),Z(Bo,"defaults",{borderSkipped:"start",borderWidth:0,borderRadius:0,inflateAmount:"auto",pointStyle:void 0}),Z(Bo,"defaultRoutes",{backgroundColor:"backgroundColor",borderColor:"borderColor"});function V4(t,e,s){const n=t.segments,r=t.points,i=e.points,o=[];for(const l of n){let{start:c,end:d}=l;d=nc(c,d,r);const u=wu(s,r[c],r[d],l.loop);if(!e.segments){o.push({source:l,target:u,start:r[c],end:r[d]});continue}const h=Wy(e,u);for(const f of h){const m=wu(s,i[f.start],i[f.end],f.loop),p=Vy(l,r,m);for(const v of p)o.push({source:v,target:f,start:{[s]:Hp(u,m,"start",Math.max)},end:{[s]:Hp(u,m,"end",Math.min)}})}}return o}function wu(t,e,s,n){if(n)return;let r=e[t],i=s[t];return t==="angle"&&(r=Tt(r),i=Tt(i)),{property:t,start:r,end:i}}function W4(t,e){const{x:s=null,y:n=null}=t||{},r=e.points,i=[];return e.segments.forEach(({start:o,end:l})=>{l=nc(o,l,r);const c=r[o],d=r[l];n!==null?(i.push({x:c.x,y:n}),i.push({x:d.x,y:n})):s!==null&&(i.push({x:s,y:c.y}),i.push({x:s,y:d.y}))}),i}function nc(t,e,s){for(;e>t;e--){const n=s[e];if(!isNaN(n.x)&&!isNaN(n.y))break}return e}function Hp(t,e,s,n){return t&&e?n(t[s],e[s]):t?t[s]:e?e[s]:0}function lv(t,e){let s=[],n=!1;return Se(t)?(n=!0,s=t):s=W4(t,e),s.length?new cn({points:s,options:{tension:0},_loop:n,_fullLoop:n}):null}function Vp(t){return t&&t.fill!==!1}function q4(t,e,s){let r=t[e].fill;const i=[e];let o;if(!s)return r;for(;r!==!1&&i.indexOf(r)===-1;){if(!Ie(r))return r;if(o=t[r],!o)return!1;if(o.visible)return r;i.push(r),r=o.fill}return!1}function K4(t,e,s){const n=Q4(t);if(me(n))return isNaN(n.value)?!1:n;let r=parseFloat(n);return Ie(r)&&Math.floor(r)===r?G4(n[0],e,r,s):["origin","start","end","stack","shape"].indexOf(n)>=0&&n}function G4(t,e,s,n){return(t==="-"||t==="+")&&(s=e+s),s===e||s<0||s>=n?!1:s}function Y4(t,e){let s=null;return t==="start"?s=e.bottom:t==="end"?s=e.top:me(t)?s=e.getPixelForValue(t.value):e.getBasePixel&&(s=e.getBasePixel()),s}function J4(t,e,s){let n;return t==="start"?n=s:t==="end"?n=e.options.reverse?e.min:e.max:me(t)?n=t.value:n=e.getBaseValue(),n}function Q4(t){const e=t.options,s=e.fill;let n=ce(s&&s.target,s);return n===void 0&&(n=!!e.backgroundColor),n===!1||n===null?!1:n===!0?"origin":n}function X4(t){const{scale:e,index:s,line:n}=t,r=[],i=n.segments,o=n.points,l=Z4(e,s);l.push(lv({x:null,y:e.bottom},n));for(let c=0;c<i.length;c++){const d=i[c];for(let u=d.start;u<=d.end;u++)eE(r,o[u],l)}return new cn({points:r,options:{}})}function Z4(t,e){const s=[],n=t.getMatchingVisibleMetas("line");for(let r=0;r<n.length;r++){const i=n[r];if(i.index===e)break;i.hidden||s.unshift(i.dataset)}return s}function eE(t,e,s){const n=[];for(let r=0;r<s.length;r++){const i=s[r],{first:o,last:l,point:c}=tE(i,e,"x");if(!(!c||o&&l)){if(o)n.unshift(c);else if(t.push(c),!l)break}}t.push(...n)}function tE(t,e,s){const n=t.interpolate(e,s);if(!n)return{};const r=n[s],i=t.segments,o=t.points;let l=!1,c=!1;for(let d=0;d<i.length;d++){const u=i[d],h=o[u.start][s],f=o[u.end][s];if(ln(r,h,f)){l=r===h,c=r===f;break}}return{first:l,last:c,point:n}}class cv{constructor(e){this.x=e.x,this.y=e.y,this.radius=e.radius}pathSegment(e,s,n){const{x:r,y:i,radius:o}=this;return s=s||{start:0,end:It},e.arc(r,i,o,s.end,s.start,!0),!n.bounds}interpolate(e){const{x:s,y:n,radius:r}=this,i=e.angle;return{x:s+Math.cos(i)*r,y:n+Math.sin(i)*r,angle:i}}}function sE(t){const{chart:e,fill:s,line:n}=t;if(Ie(s))return nE(e,s);if(s==="stack")return X4(t);if(s==="shape")return!0;const r=rE(t);return r instanceof cv?r:lv(r,n)}function nE(t,e){const s=t.getDatasetMeta(e);return s&&t.isDatasetVisible(e)?s.dataset:null}function rE(t){return(t.scale||{}).getPointPositionForValue?aE(t):iE(t)}function iE(t){const{scale:e={},fill:s}=t,n=Y4(s,e);if(Ie(n)){const r=e.isHorizontal();return{x:r?n:null,y:r?null:n}}return null}function aE(t){const{scale:e,fill:s}=t,n=e.options,r=e.getLabels().length,i=n.reverse?e.max:e.min,o=J4(s,e,i),l=[];if(n.grid.circular){const c=e.getPointPositionForValue(0,i);return new cv({x:c.x,y:c.y,radius:e.getDistanceFromCenterForValue(o)})}for(let c=0;c<r;++c)l.push(e.getPointPositionForValue(c,o));return l}function id(t,e,s){const n=sE(e),{chart:r,index:i,line:o,scale:l,axis:c}=e,d=o.options,u=d.fill,h=d.backgroundColor,{above:f=h,below:m=h}=u||{},p=r.getDatasetMeta(i),v=qy(r,p);n&&o.points.length&&(Zl(t,s),oE(t,{line:o,target:n,above:f,below:m,area:s,scale:l,axis:c,clip:v}),ec(t))}function oE(t,e){const{line:s,target:n,above:r,below:i,area:o,scale:l,clip:c}=e,d=s._loop?"angle":e.axis;t.save();let u=i;i!==r&&(d==="x"?(Wp(t,n,o.top),ad(t,{line:s,target:n,color:r,scale:l,property:d,clip:c}),t.restore(),t.save(),Wp(t,n,o.bottom)):d==="y"&&(qp(t,n,o.left),ad(t,{line:s,target:n,color:i,scale:l,property:d,clip:c}),t.restore(),t.save(),qp(t,n,o.right),u=r)),ad(t,{line:s,target:n,color:u,scale:l,property:d,clip:c}),t.restore()}function Wp(t,e,s){const{segments:n,points:r}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[nc(c,d,r)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(u.x,s),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(h.x,s)}t.lineTo(e.first().x,s),t.closePath(),t.clip()}function qp(t,e,s){const{segments:n,points:r}=e;let i=!0,o=!1;t.beginPath();for(const l of n){const{start:c,end:d}=l,u=r[c],h=r[nc(c,d,r)];i?(t.moveTo(u.x,u.y),i=!1):(t.lineTo(s,u.y),t.lineTo(u.x,u.y)),o=!!e.pathSegment(t,l,{move:o}),o?t.closePath():t.lineTo(s,h.y)}t.lineTo(s,e.first().y),t.closePath(),t.clip()}function ad(t,e){const{line:s,target:n,property:r,color:i,scale:o,clip:l}=e,c=V4(s,n,r);for(const{source:d,target:u,start:h,end:f}of c){const{style:{backgroundColor:m=i}={}}=d,p=n!==!0;t.save(),t.fillStyle=m,lE(t,o,l,p&&wu(r,h,f)),t.beginPath();const v=!!s.pathSegment(t,d);let g;if(p){v?t.closePath():Kp(t,n,f,r);const x=!!n.pathSegment(t,u,{move:v,reverse:!0});g=v&&x,g||Kp(t,n,h,r)}t.closePath(),t.fill(g?"evenodd":"nonzero"),t.restore()}}function lE(t,e,s,n){const r=e.chart.chartArea,{property:i,start:o,end:l}=n||{};if(i==="x"||i==="y"){let c,d,u,h;i==="x"?(c=o,d=r.top,u=l,h=r.bottom):(c=r.left,d=o,u=r.right,h=l),t.beginPath(),s&&(c=Math.max(c,s.left),u=Math.min(u,s.right),d=Math.max(d,s.top),h=Math.min(h,s.bottom)),t.rect(c,d,u-c,h-d),t.clip()}}function Kp(t,e,s,n){const r=e.interpolate(s,n);r&&t.lineTo(r.x,r.y)}var cE={id:"filler",afterDatasetsUpdate(t,e,s){const n=(t.data.datasets||[]).length,r=[];let i,o,l,c;for(o=0;o<n;++o)i=t.getDatasetMeta(o),l=i.dataset,c=null,l&&l.options&&l instanceof cn&&(c={visible:t.isDatasetVisible(o),index:o,fill:K4(l,o,n),chart:t,axis:i.controller.options.indexAxis,scale:i.vScale,line:l}),i.$filler=c,r.push(c);for(o=0;o<n;++o)c=r[o],!(!c||c.fill===!1)&&(c.fill=q4(r,o,s.propagate))},beforeDraw(t,e,s){const n=s.drawTime==="beforeDraw",r=t.getSortedVisibleDatasetMetas(),i=t.chartArea;for(let o=r.length-1;o>=0;--o){const l=r[o].$filler;l&&(l.line.updateControlPoints(i,l.axis),n&&l.fill&&id(t.ctx,l,i))}},beforeDatasetsDraw(t,e,s){if(s.drawTime!=="beforeDatasetsDraw")return;const n=t.getSortedVisibleDatasetMetas();for(let r=n.length-1;r>=0;--r){const i=n[r].$filler;Vp(i)&&id(t.ctx,i,t.chartArea)}},beforeDatasetDraw(t,e,s){const n=e.meta.$filler;!Vp(n)||s.drawTime!=="beforeDatasetDraw"||id(t.ctx,n,t.chartArea)},defaults:{propagate:!0,drawTime:"beforeDatasetDraw"}};const Gp=(t,e)=>{let{boxHeight:s=e,boxWidth:n=e}=t;return t.usePointStyle&&(s=Math.min(s,e),n=t.pointStyleWidth||Math.min(n,e)),{boxWidth:n,boxHeight:s,itemHeight:Math.max(e,s)}},dE=(t,e)=>t!==null&&e!==null&&t.datasetIndex===e.datasetIndex&&t.index===e.index;class Yp extends _s{constructor(e){super(),this._added=!1,this.legendHitBoxes=[],this._hoveredItem=null,this.doughnutMode=!1,this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this.legendItems=void 0,this.columnSizes=void 0,this.lineWidths=void 0,this.maxHeight=void 0,this.maxWidth=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.height=void 0,this.width=void 0,this._margins=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s,n){this.maxWidth=e,this.maxHeight=s,this._margins=n,this.setDimensions(),this.buildLabels(),this.fit()}setDimensions(){this.isHorizontal()?(this.width=this.maxWidth,this.left=this._margins.left,this.right=this.width):(this.height=this.maxHeight,this.top=this._margins.top,this.bottom=this.height)}buildLabels(){const e=this.options.labels||{};let s=_e(e.generateLabels,[this.chart],this)||[];e.filter&&(s=s.filter(n=>e.filter(n,this.chart.data))),e.sort&&(s=s.sort((n,r)=>e.sort(n,r,this.chart.data))),this.options.reverse&&s.reverse(),this.legendItems=s}fit(){const{options:e,ctx:s}=this;if(!e.display){this.width=this.height=0;return}const n=e.labels,r=Ge(n.font),i=r.size,o=this._computeTitleHeight(),{boxWidth:l,itemHeight:c}=Gp(n,i);let d,u;s.font=r.string,this.isHorizontal()?(d=this.maxWidth,u=this._fitRows(o,i,l,c)+10):(u=this.maxHeight,d=this._fitCols(o,r,l,c)+10),this.width=Math.min(d,e.maxWidth||this.maxWidth),this.height=Math.min(u,e.maxHeight||this.maxHeight)}_fitRows(e,s,n,r){const{ctx:i,maxWidth:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.lineWidths=[0],u=r+l;let h=e;i.textAlign="left",i.textBaseline="middle";let f=-1,m=-u;return this.legendItems.forEach((p,v)=>{const g=n+s/2+i.measureText(p.text).width;(v===0||d[d.length-1]+g+2*l>o)&&(h+=u,d[d.length-(v>0?0:1)]=0,m+=u,f++),c[v]={left:0,top:m,row:f,width:g,height:r},d[d.length-1]+=g+l}),h}_fitCols(e,s,n,r){const{ctx:i,maxHeight:o,options:{labels:{padding:l}}}=this,c=this.legendHitBoxes=[],d=this.columnSizes=[],u=o-e;let h=l,f=0,m=0,p=0,v=0;return this.legendItems.forEach((g,x)=>{const{itemWidth:y,itemHeight:b}=uE(n,s,i,g,r);x>0&&m+b+2*l>u&&(h+=f+l,d.push({width:f,height:m}),p+=f+l,v++,f=m=0),c[x]={left:p,top:m,col:v,width:y,height:b},f=Math.max(f,y),m+=b+l}),h+=f,d.push({width:f,height:m}),h}adjustHitBoxes(){if(!this.options.display)return;const e=this._computeTitleHeight(),{legendHitBoxes:s,options:{align:n,labels:{padding:r},rtl:i}}=this,o=Dr(i,this.left,this.width);if(this.isHorizontal()){let l=0,c=ot(n,this.left+r,this.right-this.lineWidths[l]);for(const d of s)l!==d.row&&(l=d.row,c=ot(n,this.left+r,this.right-this.lineWidths[l])),d.top+=this.top+e+r,d.left=o.leftForLtr(o.x(c),d.width),c+=d.width+r}else{let l=0,c=ot(n,this.top+e+r,this.bottom-this.columnSizes[l].height);for(const d of s)d.col!==l&&(l=d.col,c=ot(n,this.top+e+r,this.bottom-this.columnSizes[l].height)),d.top=c,d.left+=this.left+r,d.left=o.leftForLtr(o.x(d.left),d.width),c+=d.height+r}}isHorizontal(){return this.options.position==="top"||this.options.position==="bottom"}draw(){if(this.options.display){const e=this.ctx;Zl(e,this),this._draw(),ec(e)}}_draw(){const{options:e,columnSizes:s,lineWidths:n,ctx:r}=this,{align:i,labels:o}=e,l=Fe.color,c=Dr(e.rtl,this.left,this.width),d=Ge(o.font),{padding:u}=o,h=d.size,f=h/2;let m;this.drawTitle(),r.textAlign=c.textAlign("left"),r.textBaseline="middle",r.lineWidth=.5,r.font=d.string;const{boxWidth:p,boxHeight:v,itemHeight:g}=Gp(o,h),x=function(k,S,j){if(isNaN(p)||p<=0||isNaN(v)||v<0)return;r.save();const C=ce(j.lineWidth,1);if(r.fillStyle=ce(j.fillStyle,l),r.lineCap=ce(j.lineCap,"butt"),r.lineDashOffset=ce(j.lineDashOffset,0),r.lineJoin=ce(j.lineJoin,"miter"),r.lineWidth=C,r.strokeStyle=ce(j.strokeStyle,l),r.setLineDash(ce(j.lineDash,[])),o.usePointStyle){const E={radius:v*Math.SQRT2/2,pointStyle:j.pointStyle,rotation:j.rotation,borderWidth:C},M=c.xPlus(k,p/2),P=S+f;My(r,E,M,P,o.pointStyleWidth&&p)}else{const E=S+Math.max((h-v)/2,0),M=c.leftForLtr(k,p),P=Kn(j.borderRadius);r.beginPath(),Object.values(P).some(R=>R!==0)?ya(r,{x:M,y:E,w:p,h:v,radius:P}):r.rect(M,E,p,v),r.fill(),C!==0&&r.stroke()}r.restore()},y=function(k,S,j){nr(r,j.text,k,S+g/2,d,{strikethrough:j.hidden,textAlign:c.textAlign(j.textAlign)})},b=this.isHorizontal(),N=this._computeTitleHeight();b?m={x:ot(i,this.left+u,this.right-n[0]),y:this.top+u+N,line:0}:m={x:this.left+u,y:ot(i,this.top+N+u,this.bottom-s[0].height),line:0},Uy(this.ctx,e.textDirection);const _=g+u;this.legendItems.forEach((k,S)=>{r.strokeStyle=k.fontColor,r.fillStyle=k.fontColor;const j=r.measureText(k.text).width,C=c.textAlign(k.textAlign||(k.textAlign=o.textAlign)),E=p+f+j;let M=m.x,P=m.y;c.setWidth(this.width),b?S>0&&M+E+u>this.right&&(P=m.y+=_,m.line++,M=m.x=ot(i,this.left+u,this.right-n[m.line])):S>0&&P+_>this.bottom&&(M=m.x=M+s[m.line].width+u,m.line++,P=m.y=ot(i,this.top+N+u,this.bottom-s[m.line].height));const R=c.x(M);if(x(R,P,k),M=Gk(C,M+p+f,b?M+E:this.right,e.rtl),y(c.x(M),P,k),b)m.x+=E+u;else if(typeof k.text!="string"){const Y=d.lineHeight;m.y+=dv(k,Y)+u}else m.y+=_}),By(this.ctx,e.textDirection)}drawTitle(){const e=this.options,s=e.title,n=Ge(s.font),r=dt(s.padding);if(!s.display)return;const i=Dr(e.rtl,this.left,this.width),o=this.ctx,l=s.position,c=n.size/2,d=r.top+c;let u,h=this.left,f=this.width;if(this.isHorizontal())f=Math.max(...this.lineWidths),u=this.top+d,h=ot(e.align,h,this.right-f);else{const p=this.columnSizes.reduce((v,g)=>Math.max(v,g.height),0);u=d+ot(e.align,this.top,this.bottom-p-e.labels.padding-this._computeTitleHeight())}const m=ot(l,h,h+f);o.textAlign=i.textAlign(Kh(l)),o.textBaseline="middle",o.strokeStyle=s.color,o.fillStyle=s.color,o.font=n.string,nr(o,s.text,m,u,n)}_computeTitleHeight(){const e=this.options.title,s=Ge(e.font),n=dt(e.padding);return e.display?s.lineHeight+n.height:0}_getLegendItemAt(e,s){let n,r,i;if(ln(e,this.left,this.right)&&ln(s,this.top,this.bottom)){for(i=this.legendHitBoxes,n=0;n<i.length;++n)if(r=i[n],ln(e,r.left,r.left+r.width)&&ln(s,r.top,r.top+r.height))return this.legendItems[n]}return null}handleEvent(e){const s=this.options;if(!mE(e.type,s))return;const n=this._getLegendItemAt(e.x,e.y);if(e.type==="mousemove"||e.type==="mouseout"){const r=this._hoveredItem,i=dE(r,n);r&&!i&&_e(s.onLeave,[e,r,this],this),this._hoveredItem=n,n&&!i&&_e(s.onHover,[e,n,this],this)}else n&&_e(s.onClick,[e,n,this],this)}}function uE(t,e,s,n,r){const i=hE(n,t,e,s),o=fE(r,n,e.lineHeight);return{itemWidth:i,itemHeight:o}}function hE(t,e,s,n){let r=t.text;return r&&typeof r!="string"&&(r=r.reduce((i,o)=>i.length>o.length?i:o)),e+s.size/2+n.measureText(r).width}function fE(t,e,s){let n=t;return typeof e.text!="string"&&(n=dv(e,s)),n}function dv(t,e){const s=t.text?t.text.length:0;return e*s}function mE(t,e){return!!((t==="mousemove"||t==="mouseout")&&(e.onHover||e.onLeave)||e.onClick&&(t==="click"||t==="mouseup"))}var pE={id:"legend",_element:Yp,start(t,e,s){const n=t.legend=new Yp({ctx:t.ctx,options:s,chart:t});Wt.configure(t,n,s),Wt.addBox(t,n)},stop(t){Wt.removeBox(t,t.legend),delete t.legend},beforeUpdate(t,e,s){const n=t.legend;Wt.configure(t,n,s),n.options=s},afterUpdate(t){const e=t.legend;e.buildLabels(),e.adjustHitBoxes()},afterEvent(t,e){e.replay||t.legend.handleEvent(e.event)},defaults:{display:!0,position:"top",align:"center",fullSize:!0,reverse:!1,weight:1e3,onClick(t,e,s){const n=e.datasetIndex,r=s.chart;r.isDatasetVisible(n)?(r.hide(n),e.hidden=!0):(r.show(n),e.hidden=!1)},onHover:null,onLeave:null,labels:{color:t=>t.chart.options.color,boxWidth:40,padding:10,generateLabels(t){const e=t.data.datasets,{labels:{usePointStyle:s,pointStyle:n,textAlign:r,color:i,useBorderRadius:o,borderRadius:l}}=t.legend.options;return t._getSortedDatasetMetas().map(c=>{const d=c.controller.getStyle(s?0:void 0),u=dt(d.borderWidth);return{text:e[c.index].label,fillStyle:d.backgroundColor,fontColor:i,hidden:!c.visible,lineCap:d.borderCapStyle,lineDash:d.borderDash,lineDashOffset:d.borderDashOffset,lineJoin:d.borderJoinStyle,lineWidth:(u.width+u.height)/4,strokeStyle:d.borderColor,pointStyle:n||d.pointStyle,rotation:d.rotation,textAlign:r||d.textAlign,borderRadius:o&&(l||d.borderRadius),datasetIndex:c.index}},this)}},title:{color:t=>t.chart.options.color,display:!1,position:"center",text:""}},descriptors:{_scriptable:t=>!t.startsWith("on"),labels:{_scriptable:t=>!["generateLabels","filter","sort"].includes(t)}}};class uv extends _s{constructor(e){super(),this.chart=e.chart,this.options=e.options,this.ctx=e.ctx,this._padding=void 0,this.top=void 0,this.bottom=void 0,this.left=void 0,this.right=void 0,this.width=void 0,this.height=void 0,this.position=void 0,this.weight=void 0,this.fullSize=void 0}update(e,s){const n=this.options;if(this.left=0,this.top=0,!n.display){this.width=this.height=this.right=this.bottom=0;return}this.width=this.right=e,this.height=this.bottom=s;const r=Se(n.text)?n.text.length:1;this._padding=dt(n.padding);const i=r*Ge(n.font).lineHeight+this._padding.height;this.isHorizontal()?this.height=i:this.width=i}isHorizontal(){const e=this.options.position;return e==="top"||e==="bottom"}_drawArgs(e){const{top:s,left:n,bottom:r,right:i,options:o}=this,l=o.align;let c=0,d,u,h;return this.isHorizontal()?(u=ot(l,n,i),h=s+e,d=i-n):(o.position==="left"?(u=n+e,h=ot(l,r,s),c=Ve*-.5):(u=i-e,h=ot(l,s,r),c=Ve*.5),d=r-s),{titleX:u,titleY:h,maxWidth:d,rotation:c}}draw(){const e=this.ctx,s=this.options;if(!s.display)return;const n=Ge(s.font),i=n.lineHeight/2+this._padding.top,{titleX:o,titleY:l,maxWidth:c,rotation:d}=this._drawArgs(i);nr(e,s.text,0,0,n,{color:s.color,maxWidth:c,rotation:d,textAlign:Kh(s.align),textBaseline:"middle",translation:[o,l]})}}function gE(t,e){const s=new uv({ctx:t.ctx,options:e,chart:t});Wt.configure(t,s,e),Wt.addBox(t,s),t.titleBlock=s}var xE={id:"title",_element:uv,start(t,e,s){gE(t,s)},stop(t){const e=t.titleBlock;Wt.removeBox(t,e),delete t.titleBlock},beforeUpdate(t,e,s){const n=t.titleBlock;Wt.configure(t,n,s),n.options=s},defaults:{align:"center",display:!1,font:{weight:"bold"},fullSize:!0,padding:10,position:"top",text:"",weight:2e3},defaultRoutes:{color:"color"},descriptors:{_scriptable:!0,_indexable:!1}};const Ei={average(t){if(!t.length)return!1;let e,s,n=new Set,r=0,i=0;for(e=0,s=t.length;e<s;++e){const l=t[e].element;if(l&&l.hasValue()){const c=l.tooltipPosition();n.add(c.x),r+=c.y,++i}}return i===0||n.size===0?!1:{x:[...n].reduce((l,c)=>l+c)/n.size,y:r/i}},nearest(t,e){if(!t.length)return!1;let s=e.x,n=e.y,r=Number.POSITIVE_INFINITY,i,o,l;for(i=0,o=t.length;i<o;++i){const c=t[i].element;if(c&&c.hasValue()){const d=c.getCenterPoint(),u=pu(e,d);u<r&&(r=u,l=c)}}if(l){const c=l.tooltipPosition();s=c.x,n=c.y}return{x:s,y:n}}};function fs(t,e){return e&&(Se(e)?Array.prototype.push.apply(t,e):t.push(e)),t}function As(t){return(typeof t=="string"||t instanceof String)&&t.indexOf(`
`)>-1?t.split(`
`):t}function yE(t,e){const{element:s,datasetIndex:n,index:r}=e,i=t.getDatasetMeta(n).controller,{label:o,value:l}=i.getLabelAndValue(r);return{chart:t,label:o,parsed:i.getParsed(r),raw:t.data.datasets[n].data[r],formattedValue:l,dataset:i.getDataset(),dataIndex:r,datasetIndex:n,element:s}}function Jp(t,e){const s=t.chart.ctx,{body:n,footer:r,title:i}=t,{boxWidth:o,boxHeight:l}=e,c=Ge(e.bodyFont),d=Ge(e.titleFont),u=Ge(e.footerFont),h=i.length,f=r.length,m=n.length,p=dt(e.padding);let v=p.height,g=0,x=n.reduce((N,_)=>N+_.before.length+_.lines.length+_.after.length,0);if(x+=t.beforeBody.length+t.afterBody.length,h&&(v+=h*d.lineHeight+(h-1)*e.titleSpacing+e.titleMarginBottom),x){const N=e.displayColors?Math.max(l,c.lineHeight):c.lineHeight;v+=m*N+(x-m)*c.lineHeight+(x-1)*e.bodySpacing}f&&(v+=e.footerMarginTop+f*u.lineHeight+(f-1)*e.footerSpacing);let y=0;const b=function(N){g=Math.max(g,s.measureText(N).width+y)};return s.save(),s.font=d.string,ye(t.title,b),s.font=c.string,ye(t.beforeBody.concat(t.afterBody),b),y=e.displayColors?o+2+e.boxPadding:0,ye(n,N=>{ye(N.before,b),ye(N.lines,b),ye(N.after,b)}),y=0,s.font=u.string,ye(t.footer,b),s.restore(),g+=p.width,{width:g,height:v}}function vE(t,e){const{y:s,height:n}=e;return s<n/2?"top":s>t.height-n/2?"bottom":"center"}function bE(t,e,s,n){const{x:r,width:i}=n,o=s.caretSize+s.caretPadding;if(t==="left"&&r+i+o>e.width||t==="right"&&r-i-o<0)return!0}function wE(t,e,s,n){const{x:r,width:i}=s,{width:o,chartArea:{left:l,right:c}}=t;let d="center";return n==="center"?d=r<=(l+c)/2?"left":"right":r<=i/2?d="left":r>=o-i/2&&(d="right"),bE(d,t,e,s)&&(d="center"),d}function Qp(t,e,s){const n=s.yAlign||e.yAlign||vE(t,s);return{xAlign:s.xAlign||e.xAlign||wE(t,e,s,n),yAlign:n}}function _E(t,e){let{x:s,width:n}=t;return e==="right"?s-=n:e==="center"&&(s-=n/2),s}function jE(t,e,s){let{y:n,height:r}=t;return e==="top"?n+=s:e==="bottom"?n-=r+s:n-=r/2,n}function Xp(t,e,s,n){const{caretSize:r,caretPadding:i,cornerRadius:o}=t,{xAlign:l,yAlign:c}=s,d=r+i,{topLeft:u,topRight:h,bottomLeft:f,bottomRight:m}=Kn(o);let p=_E(e,l);const v=jE(e,c,d);return c==="center"?l==="left"?p+=d:l==="right"&&(p-=d):l==="left"?p-=Math.max(u,f)+r:l==="right"&&(p+=Math.max(h,m)+r),{x:Ot(p,0,n.width-e.width),y:Ot(v,0,n.height-e.height)}}function yo(t,e,s){const n=dt(s.padding);return e==="center"?t.x+t.width/2:e==="right"?t.x+t.width-n.right:t.x+n.left}function Zp(t){return fs([],As(t))}function NE(t,e,s){return En(t,{tooltip:e,tooltipItems:s,type:"tooltip"})}function eg(t,e){const s=e&&e.dataset&&e.dataset.tooltip&&e.dataset.tooltip.callbacks;return s?t.override(s):t}const hv={beforeTitle:Ss,title(t){if(t.length>0){const e=t[0],s=e.chart.data.labels,n=s?s.length:0;if(this&&this.options&&this.options.mode==="dataset")return e.dataset.label||"";if(e.label)return e.label;if(n>0&&e.dataIndex<n)return s[e.dataIndex]}return""},afterTitle:Ss,beforeBody:Ss,beforeLabel:Ss,label(t){if(this&&this.options&&this.options.mode==="dataset")return t.label+": "+t.formattedValue||t.formattedValue;let e=t.dataset.label||"";e&&(e+=": ");const s=t.formattedValue;return ge(s)||(e+=s),e},labelColor(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{borderColor:s.borderColor,backgroundColor:s.backgroundColor,borderWidth:s.borderWidth,borderDash:s.borderDash,borderDashOffset:s.borderDashOffset,borderRadius:0}},labelTextColor(){return this.options.bodyColor},labelPointStyle(t){const s=t.chart.getDatasetMeta(t.datasetIndex).controller.getStyle(t.dataIndex);return{pointStyle:s.pointStyle,rotation:s.rotation}},afterLabel:Ss,afterBody:Ss,beforeFooter:Ss,footer:Ss,afterFooter:Ss};function gt(t,e,s,n){const r=t[e].call(s,n);return typeof r>"u"?hv[e].call(s,n):r}class _u extends _s{constructor(e){super(),this.opacity=0,this._active=[],this._eventPosition=void 0,this._size=void 0,this._cachedAnimations=void 0,this._tooltipItems=[],this.$animations=void 0,this.$context=void 0,this.chart=e.chart,this.options=e.options,this.dataPoints=void 0,this.title=void 0,this.beforeBody=void 0,this.body=void 0,this.afterBody=void 0,this.footer=void 0,this.xAlign=void 0,this.yAlign=void 0,this.x=void 0,this.y=void 0,this.height=void 0,this.width=void 0,this.caretX=void 0,this.caretY=void 0,this.labelColors=void 0,this.labelPointStyles=void 0,this.labelTextColors=void 0}initialize(e){this.options=e,this._cachedAnimations=void 0,this.$context=void 0}_resolveAnimations(){const e=this._cachedAnimations;if(e)return e;const s=this.chart,n=this.options.setContext(this.getContext()),r=n.enabled&&s.options.animation&&n.animations,i=new Ky(this.chart,r);return r._cacheable&&(this._cachedAnimations=Object.freeze(i)),i}getContext(){return this.$context||(this.$context=NE(this.chart.getContext(),this,this._tooltipItems))}getTitle(e,s){const{callbacks:n}=s,r=gt(n,"beforeTitle",this,e),i=gt(n,"title",this,e),o=gt(n,"afterTitle",this,e);let l=[];return l=fs(l,As(r)),l=fs(l,As(i)),l=fs(l,As(o)),l}getBeforeBody(e,s){return Zp(gt(s.callbacks,"beforeBody",this,e))}getBody(e,s){const{callbacks:n}=s,r=[];return ye(e,i=>{const o={before:[],lines:[],after:[]},l=eg(n,i);fs(o.before,As(gt(l,"beforeLabel",this,i))),fs(o.lines,gt(l,"label",this,i)),fs(o.after,As(gt(l,"afterLabel",this,i))),r.push(o)}),r}getAfterBody(e,s){return Zp(gt(s.callbacks,"afterBody",this,e))}getFooter(e,s){const{callbacks:n}=s,r=gt(n,"beforeFooter",this,e),i=gt(n,"footer",this,e),o=gt(n,"afterFooter",this,e);let l=[];return l=fs(l,As(r)),l=fs(l,As(i)),l=fs(l,As(o)),l}_createItems(e){const s=this._active,n=this.chart.data,r=[],i=[],o=[];let l=[],c,d;for(c=0,d=s.length;c<d;++c)l.push(yE(this.chart,s[c]));return e.filter&&(l=l.filter((u,h,f)=>e.filter(u,h,f,n))),e.itemSort&&(l=l.sort((u,h)=>e.itemSort(u,h,n))),ye(l,u=>{const h=eg(e.callbacks,u);r.push(gt(h,"labelColor",this,u)),i.push(gt(h,"labelPointStyle",this,u)),o.push(gt(h,"labelTextColor",this,u))}),this.labelColors=r,this.labelPointStyles=i,this.labelTextColors=o,this.dataPoints=l,l}update(e,s){const n=this.options.setContext(this.getContext()),r=this._active;let i,o=[];if(!r.length)this.opacity!==0&&(i={opacity:0});else{const l=Ei[n.position].call(this,r,this._eventPosition);o=this._createItems(n),this.title=this.getTitle(o,n),this.beforeBody=this.getBeforeBody(o,n),this.body=this.getBody(o,n),this.afterBody=this.getAfterBody(o,n),this.footer=this.getFooter(o,n);const c=this._size=Jp(this,n),d=Object.assign({},l,c),u=Qp(this.chart,n,d),h=Xp(n,d,u,this.chart);this.xAlign=u.xAlign,this.yAlign=u.yAlign,i={opacity:1,x:h.x,y:h.y,width:c.width,height:c.height,caretX:l.x,caretY:l.y}}this._tooltipItems=o,this.$context=void 0,i&&this._resolveAnimations().update(this,i),e&&n.external&&n.external.call(this,{chart:this.chart,tooltip:this,replay:s})}drawCaret(e,s,n,r){const i=this.getCaretPosition(e,n,r);s.lineTo(i.x1,i.y1),s.lineTo(i.x2,i.y2),s.lineTo(i.x3,i.y3)}getCaretPosition(e,s,n){const{xAlign:r,yAlign:i}=this,{caretSize:o,cornerRadius:l}=n,{topLeft:c,topRight:d,bottomLeft:u,bottomRight:h}=Kn(l),{x:f,y:m}=e,{width:p,height:v}=s;let g,x,y,b,N,_;return i==="center"?(N=m+v/2,r==="left"?(g=f,x=g-o,b=N+o,_=N-o):(g=f+p,x=g+o,b=N-o,_=N+o),y=g):(r==="left"?x=f+Math.max(c,u)+o:r==="right"?x=f+p-Math.max(d,h)-o:x=this.caretX,i==="top"?(b=m,N=b-o,g=x-o,y=x+o):(b=m+v,N=b+o,g=x+o,y=x-o),_=b),{x1:g,x2:x,x3:y,y1:b,y2:N,y3:_}}drawTitle(e,s,n){const r=this.title,i=r.length;let o,l,c;if(i){const d=Dr(n.rtl,this.x,this.width);for(e.x=yo(this,n.titleAlign,n),s.textAlign=d.textAlign(n.titleAlign),s.textBaseline="middle",o=Ge(n.titleFont),l=n.titleSpacing,s.fillStyle=n.titleColor,s.font=o.string,c=0;c<i;++c)s.fillText(r[c],d.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+l,c+1===i&&(e.y+=n.titleMarginBottom-l)}}_drawColorBox(e,s,n,r,i){const o=this.labelColors[n],l=this.labelPointStyles[n],{boxHeight:c,boxWidth:d}=i,u=Ge(i.bodyFont),h=yo(this,"left",i),f=r.x(h),m=c<u.lineHeight?(u.lineHeight-c)/2:0,p=s.y+m;if(i.usePointStyle){const v={radius:Math.min(d,c)/2,pointStyle:l.pointStyle,rotation:l.rotation,borderWidth:1},g=r.leftForLtr(f,d)+d/2,x=p+c/2;e.strokeStyle=i.multiKeyBackground,e.fillStyle=i.multiKeyBackground,xu(e,v,g,x),e.strokeStyle=o.borderColor,e.fillStyle=o.backgroundColor,xu(e,v,g,x)}else{e.lineWidth=me(o.borderWidth)?Math.max(...Object.values(o.borderWidth)):o.borderWidth||1,e.strokeStyle=o.borderColor,e.setLineDash(o.borderDash||[]),e.lineDashOffset=o.borderDashOffset||0;const v=r.leftForLtr(f,d),g=r.leftForLtr(r.xPlus(f,1),d-2),x=Kn(o.borderRadius);Object.values(x).some(y=>y!==0)?(e.beginPath(),e.fillStyle=i.multiKeyBackground,ya(e,{x:v,y:p,w:d,h:c,radius:x}),e.fill(),e.stroke(),e.fillStyle=o.backgroundColor,e.beginPath(),ya(e,{x:g,y:p+1,w:d-2,h:c-2,radius:x}),e.fill()):(e.fillStyle=i.multiKeyBackground,e.fillRect(v,p,d,c),e.strokeRect(v,p,d,c),e.fillStyle=o.backgroundColor,e.fillRect(g,p+1,d-2,c-2))}e.fillStyle=this.labelTextColors[n]}drawBody(e,s,n){const{body:r}=this,{bodySpacing:i,bodyAlign:o,displayColors:l,boxHeight:c,boxWidth:d,boxPadding:u}=n,h=Ge(n.bodyFont);let f=h.lineHeight,m=0;const p=Dr(n.rtl,this.x,this.width),v=function(j){s.fillText(j,p.x(e.x+m),e.y+f/2),e.y+=f+i},g=p.textAlign(o);let x,y,b,N,_,k,S;for(s.textAlign=o,s.textBaseline="middle",s.font=h.string,e.x=yo(this,g,n),s.fillStyle=n.bodyColor,ye(this.beforeBody,v),m=l&&g!=="right"?o==="center"?d/2+u:d+2+u:0,N=0,k=r.length;N<k;++N){for(x=r[N],y=this.labelTextColors[N],s.fillStyle=y,ye(x.before,v),b=x.lines,l&&b.length&&(this._drawColorBox(s,e,N,p,n),f=Math.max(h.lineHeight,c)),_=0,S=b.length;_<S;++_)v(b[_]),f=h.lineHeight;ye(x.after,v)}m=0,f=h.lineHeight,ye(this.afterBody,v),e.y-=i}drawFooter(e,s,n){const r=this.footer,i=r.length;let o,l;if(i){const c=Dr(n.rtl,this.x,this.width);for(e.x=yo(this,n.footerAlign,n),e.y+=n.footerMarginTop,s.textAlign=c.textAlign(n.footerAlign),s.textBaseline="middle",o=Ge(n.footerFont),s.fillStyle=n.footerColor,s.font=o.string,l=0;l<i;++l)s.fillText(r[l],c.x(e.x),e.y+o.lineHeight/2),e.y+=o.lineHeight+n.footerSpacing}}drawBackground(e,s,n,r){const{xAlign:i,yAlign:o}=this,{x:l,y:c}=e,{width:d,height:u}=n,{topLeft:h,topRight:f,bottomLeft:m,bottomRight:p}=Kn(r.cornerRadius);s.fillStyle=r.backgroundColor,s.strokeStyle=r.borderColor,s.lineWidth=r.borderWidth,s.beginPath(),s.moveTo(l+h,c),o==="top"&&this.drawCaret(e,s,n,r),s.lineTo(l+d-f,c),s.quadraticCurveTo(l+d,c,l+d,c+f),o==="center"&&i==="right"&&this.drawCaret(e,s,n,r),s.lineTo(l+d,c+u-p),s.quadraticCurveTo(l+d,c+u,l+d-p,c+u),o==="bottom"&&this.drawCaret(e,s,n,r),s.lineTo(l+m,c+u),s.quadraticCurveTo(l,c+u,l,c+u-m),o==="center"&&i==="left"&&this.drawCaret(e,s,n,r),s.lineTo(l,c+h),s.quadraticCurveTo(l,c,l+h,c),s.closePath(),s.fill(),r.borderWidth>0&&s.stroke()}_updateAnimationTarget(e){const s=this.chart,n=this.$animations,r=n&&n.x,i=n&&n.y;if(r||i){const o=Ei[e.position].call(this,this._active,this._eventPosition);if(!o)return;const l=this._size=Jp(this,e),c=Object.assign({},o,this._size),d=Qp(s,e,c),u=Xp(e,c,d,s);(r._to!==u.x||i._to!==u.y)&&(this.xAlign=d.xAlign,this.yAlign=d.yAlign,this.width=l.width,this.height=l.height,this.caretX=o.x,this.caretY=o.y,this._resolveAnimations().update(this,u))}}_willRender(){return!!this.opacity}draw(e){const s=this.options.setContext(this.getContext());let n=this.opacity;if(!n)return;this._updateAnimationTarget(s);const r={width:this.width,height:this.height},i={x:this.x,y:this.y};n=Math.abs(n)<.001?0:n;const o=dt(s.padding),l=this.title.length||this.beforeBody.length||this.body.length||this.afterBody.length||this.footer.length;s.enabled&&l&&(e.save(),e.globalAlpha=n,this.drawBackground(i,e,r,s),Uy(e,s.textDirection),i.y+=o.top,this.drawTitle(i,e,s),this.drawBody(i,e,s),this.drawFooter(i,e,s),By(e,s.textDirection),e.restore())}getActiveElements(){return this._active||[]}setActiveElements(e,s){const n=this._active,r=e.map(({datasetIndex:l,index:c})=>{const d=this.chart.getDatasetMeta(l);if(!d)throw new Error("Cannot find a dataset at index "+l);return{datasetIndex:l,element:d.data[c],index:c}}),i=!xl(n,r),o=this._positionChanged(r,s);(i||o)&&(this._active=r,this._eventPosition=s,this._ignoreReplayEvents=!0,this.update(!0))}handleEvent(e,s,n=!0){if(s&&this._ignoreReplayEvents)return!1;this._ignoreReplayEvents=!1;const r=this.options,i=this._active||[],o=this._getActiveElements(e,i,s,n),l=this._positionChanged(o,e),c=s||!xl(o,i)||l;return c&&(this._active=o,(r.enabled||r.external)&&(this._eventPosition={x:e.x,y:e.y},this.update(!0,s))),c}_getActiveElements(e,s,n,r){const i=this.options;if(e.type==="mouseout")return[];if(!r)return s.filter(l=>this.chart.data.datasets[l.datasetIndex]&&this.chart.getDatasetMeta(l.datasetIndex).controller.getParsed(l.index)!==void 0);const o=this.chart.getElementsAtEventForMode(e,i.mode,i,n);return i.reverse&&o.reverse(),o}_positionChanged(e,s){const{caretX:n,caretY:r,options:i}=this,o=Ei[i.position].call(this,e,s);return o!==!1&&(n!==o.x||r!==o.y)}}Z(_u,"positioners",Ei);var kE={id:"tooltip",_element:_u,positioners:Ei,afterInit(t,e,s){s&&(t.tooltip=new _u({chart:t,options:s}))},beforeUpdate(t,e,s){t.tooltip&&t.tooltip.initialize(s)},reset(t,e,s){t.tooltip&&t.tooltip.initialize(s)},afterDraw(t){const e=t.tooltip;if(e&&e._willRender()){const s={tooltip:e};if(t.notifyPlugins("beforeTooltipDraw",{...s,cancelable:!0})===!1)return;e.draw(t.ctx),t.notifyPlugins("afterTooltipDraw",s)}},afterEvent(t,e){if(t.tooltip){const s=e.replay;t.tooltip.handleEvent(e.event,s,e.inChartArea)&&(e.changed=!0)}},defaults:{enabled:!0,external:null,position:"average",backgroundColor:"rgba(0,0,0,0.8)",titleColor:"#fff",titleFont:{weight:"bold"},titleSpacing:2,titleMarginBottom:6,titleAlign:"left",bodyColor:"#fff",bodySpacing:2,bodyFont:{},bodyAlign:"left",footerColor:"#fff",footerSpacing:2,footerMarginTop:6,footerFont:{weight:"bold"},footerAlign:"left",padding:6,caretPadding:2,caretSize:5,cornerRadius:6,boxHeight:(t,e)=>e.bodyFont.size,boxWidth:(t,e)=>e.bodyFont.size,multiKeyBackground:"#fff",displayColors:!0,boxPadding:0,borderColor:"rgba(0,0,0,0)",borderWidth:0,animation:{duration:400,easing:"easeOutQuart"},animations:{numbers:{type:"number",properties:["x","y","width","height","caretX","caretY"]},opacity:{easing:"linear",duration:200}},callbacks:hv},defaultRoutes:{bodyFont:"font",footerFont:"font",titleFont:"font"},descriptors:{_scriptable:t=>t!=="filter"&&t!=="itemSort"&&t!=="external",_indexable:!1,callbacks:{_scriptable:!1,_indexable:!1},animation:{_fallback:!1},animations:{_fallback:"animation"}},additionalOptionScopes:["interaction"]};const SE=(t,e,s,n)=>(typeof e=="string"?(s=t.push(e)-1,n.unshift({index:s,label:e})):isNaN(e)&&(s=null),s);function CE(t,e,s,n){const r=t.indexOf(e);if(r===-1)return SE(t,e,s,n);const i=t.lastIndexOf(e);return r!==i?s:r}const EE=(t,e)=>t===null?null:Ot(Math.round(t),0,e);function tg(t){const e=this.getLabels();return t>=0&&t<e.length?e[t]:t}class ju extends lr{constructor(e){super(e),this._startValue=void 0,this._valueRange=0,this._addedLabels=[]}init(e){const s=this._addedLabels;if(s.length){const n=this.getLabels();for(const{index:r,label:i}of s)n[r]===i&&n.splice(r,1);this._addedLabels=[]}super.init(e)}parse(e,s){if(ge(e))return null;const n=this.getLabels();return s=isFinite(s)&&n[s]===e?s:CE(n,e,ce(s,e),this._addedLabels),EE(s,n.length-1)}determineDataLimits(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let{min:n,max:r}=this.getMinMax(!0);this.options.bounds==="ticks"&&(e||(n=0),s||(r=this.getLabels().length-1)),this.min=n,this.max=r}buildTicks(){const e=this.min,s=this.max,n=this.options.offset,r=[];let i=this.getLabels();i=e===0&&s===i.length-1?i:i.slice(e,s+1),this._valueRange=Math.max(i.length-(n?0:1),1),this._startValue=this.min-(n?.5:0);for(let o=e;o<=s;o++)r.push({value:o});return r}getLabelForValue(e){return tg.call(this,e)}configure(){super.configure(),this.isHorizontal()||(this._reversePixels=!this._reversePixels)}getPixelForValue(e){return typeof e!="number"&&(e=this.parse(e)),e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getPixelForTick(e){const s=this.ticks;return e<0||e>s.length-1?null:this.getPixelForValue(s[e].value)}getValueForPixel(e){return Math.round(this._startValue+this.getDecimalForPixel(e)*this._valueRange)}getBasePixel(){return this.bottom}}Z(ju,"id","category"),Z(ju,"defaults",{ticks:{callback:tg}});function PE(t,e){const s=[],{bounds:r,step:i,min:o,max:l,precision:c,count:d,maxTicks:u,maxDigits:h,includeBounds:f}=t,m=i||1,p=u-1,{min:v,max:g}=e,x=!ge(o),y=!ge(l),b=!ge(d),N=(g-v)/(h+1);let _=Zm((g-v)/p/m)*m,k,S,j,C;if(_<1e-14&&!x&&!y)return[{value:v},{value:g}];C=Math.ceil(g/_)-Math.floor(v/_),C>p&&(_=Zm(C*_/p/m)*m),ge(c)||(k=Math.pow(10,c),_=Math.ceil(_*k)/k),r==="ticks"?(S=Math.floor(v/_)*_,j=Math.ceil(g/_)*_):(S=v,j=g),x&&y&&i&&zk((l-o)/i,_/1e3)?(C=Math.round(Math.min((l-o)/_,u)),_=(l-o)/C,S=o,j=l):b?(S=x?o:S,j=y?l:j,C=d-1,_=(j-S)/C):(C=(j-S)/_,Vi(C,Math.round(C),_/1e3)?C=Math.round(C):C=Math.ceil(C));const E=Math.max(ep(_),ep(S));k=Math.pow(10,ge(c)?E:c),S=Math.round(S*k)/k,j=Math.round(j*k)/k;let M=0;for(x&&(f&&S!==o?(s.push({value:o}),S<o&&M++,Vi(Math.round((S+M*_)*k)/k,o,sg(o,N,t))&&M++):S<o&&M++);M<C;++M){const P=Math.round((S+M*_)*k)/k;if(y&&P>l)break;s.push({value:P})}return y&&f&&j!==l?s.length&&Vi(s[s.length-1].value,l,sg(l,N,t))?s[s.length-1].value=l:s.push({value:l}):(!y||j===l)&&s.push({value:j}),s}function sg(t,e,{horizontal:s,minRotation:n}){const r=on(n),i=(s?Math.sin(r):Math.cos(r))||.001,o=.75*e*(""+t).length;return Math.min(e/i,o)}class jl extends lr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._endValue=void 0,this._valueRange=0}parse(e,s){return ge(e)||(typeof e=="number"||e instanceof Number)&&!isFinite(+e)?null:+e}handleTickRangeOptions(){const{beginAtZero:e}=this.options,{minDefined:s,maxDefined:n}=this.getUserBounds();let{min:r,max:i}=this;const o=c=>r=s?r:c,l=c=>i=n?i:c;if(e){const c=bs(r),d=bs(i);c<0&&d<0?l(0):c>0&&d>0&&o(0)}if(r===i){let c=i===0?1:Math.abs(i*.05);l(i+c),e||o(r-c)}this.min=r,this.max=i}getTickLimit(){const e=this.options.ticks;let{maxTicksLimit:s,stepSize:n}=e,r;return n?(r=Math.ceil(this.max/n)-Math.floor(this.min/n)+1,r>1e3&&(console.warn(`scales.${this.id}.ticks.stepSize: ${n} would result generating up to ${r} ticks. Limiting to 1000.`),r=1e3)):(r=this.computeTickLimit(),s=s||11),s&&(r=Math.min(s,r)),r}computeTickLimit(){return Number.POSITIVE_INFINITY}buildTicks(){const e=this.options,s=e.ticks;let n=this.getTickLimit();n=Math.max(2,n);const r={maxTicks:n,bounds:e.bounds,min:e.min,max:e.max,precision:s.precision,step:s.stepSize,count:s.count,maxDigits:this._maxDigits(),horizontal:this.isHorizontal(),minRotation:s.minRotation||0,includeBounds:s.includeBounds!==!1},i=this._range||this,o=PE(r,i);return e.bounds==="ticks"&&Sy(o,this,"value"),e.reverse?(o.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),o}configure(){const e=this.ticks;let s=this.min,n=this.max;if(super.configure(),this.options.offset&&e.length){const r=(n-s)/Math.max(e.length-1,1)/2;s-=r,n+=r}this._startValue=s,this._endValue=n,this._valueRange=n-s}getLabelForValue(e){return Yh(e,this.chart.options.locale,this.options.ticks.format)}}class Nu extends jl{determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Ie(e)?e:0,this.max=Ie(s)?s:1,this.handleTickRangeOptions()}computeTickLimit(){const e=this.isHorizontal(),s=e?this.width:this.height,n=on(this.options.ticks.minRotation),r=(e?Math.sin(n):Math.cos(n))||.001,i=this._resolveTickFontOptions(0);return Math.ceil(s/Math.min(40,i.lineHeight/r))}getPixelForValue(e){return e===null?NaN:this.getPixelForDecimal((e-this._startValue)/this._valueRange)}getValueForPixel(e){return this._startValue+this.getDecimalForPixel(e)*this._valueRange}}Z(Nu,"id","linear"),Z(Nu,"defaults",{ticks:{callback:Xl.formatters.numeric}});const ba=t=>Math.floor(an(t)),Mn=(t,e)=>Math.pow(10,ba(t)+e);function ng(t){return t/Math.pow(10,ba(t))===1}function rg(t,e,s){const n=Math.pow(10,s),r=Math.floor(t/n);return Math.ceil(e/n)-r}function AE(t,e){const s=e-t;let n=ba(s);for(;rg(t,e,n)>10;)n++;for(;rg(t,e,n)<10;)n--;return Math.min(n,ba(t))}function LE(t,{min:e,max:s}){e=At(t.min,e);const n=[],r=ba(e);let i=AE(e,s),o=i<0?Math.pow(10,Math.abs(i)):1;const l=Math.pow(10,i),c=r>i?Math.pow(10,r):0,d=Math.round((e-c)*o)/o,u=Math.floor((e-c)/l/10)*l*10;let h=Math.floor((d-u)/Math.pow(10,i)),f=At(t.min,Math.round((c+u+h*Math.pow(10,i))*o)/o);for(;f<s;)n.push({value:f,major:ng(f),significand:h}),h>=10?h=h<15?15:20:h++,h>=20&&(i++,h=2,o=i>=0?1:o),f=Math.round((c+u+h*Math.pow(10,i))*o)/o;const m=At(t.max,f);return n.push({value:m,major:ng(m),significand:h}),n}class ig extends lr{constructor(e){super(e),this.start=void 0,this.end=void 0,this._startValue=void 0,this._valueRange=0}parse(e,s){const n=jl.prototype.parse.apply(this,[e,s]);if(n===0){this._zero=!0;return}return Ie(n)&&n>0?n:null}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!0);this.min=Ie(e)?Math.max(0,e):null,this.max=Ie(s)?Math.max(0,s):null,this.options.beginAtZero&&(this._zero=!0),this._zero&&this.min!==this._suggestedMin&&!Ie(this._userMin)&&(this.min=e===Mn(this.min,0)?Mn(this.min,-1):Mn(this.min,0)),this.handleTickRangeOptions()}handleTickRangeOptions(){const{minDefined:e,maxDefined:s}=this.getUserBounds();let n=this.min,r=this.max;const i=l=>n=e?n:l,o=l=>r=s?r:l;n===r&&(n<=0?(i(1),o(10)):(i(Mn(n,-1)),o(Mn(r,1)))),n<=0&&i(Mn(r,-1)),r<=0&&o(Mn(n,1)),this.min=n,this.max=r}buildTicks(){const e=this.options,s={min:this._userMin,max:this._userMax},n=LE(s,this);return e.bounds==="ticks"&&Sy(n,this,"value"),e.reverse?(n.reverse(),this.start=this.max,this.end=this.min):(this.start=this.min,this.end=this.max),n}getLabelForValue(e){return e===void 0?"0":Yh(e,this.chart.options.locale,this.options.ticks.format)}configure(){const e=this.min;super.configure(),this._startValue=an(e),this._valueRange=an(this.max)-an(e)}getPixelForValue(e){return(e===void 0||e===0)&&(e=this.min),e===null||isNaN(e)?NaN:this.getPixelForDecimal(e===this.min?0:(an(e)-this._startValue)/this._valueRange)}getValueForPixel(e){const s=this.getDecimalForPixel(e);return Math.pow(10,this._startValue+s*this._valueRange)}}Z(ig,"id","logarithmic"),Z(ig,"defaults",{ticks:{callback:Xl.formatters.logarithmic,major:{enabled:!0}}});function ku(t){const e=t.ticks;if(e.display&&t.display){const s=dt(e.backdropPadding);return ce(e.font&&e.font.size,Fe.font.size)+s.height}return 0}function TE(t,e,s){return s=Se(s)?s:[s],{w:aS(t,e.string,s),h:s.length*e.lineHeight}}function ag(t,e,s,n,r){return t===n||t===r?{start:e-s/2,end:e+s/2}:t<n||t>r?{start:e-s,end:e}:{start:e,end:e+s}}function ME(t){const e={l:t.left+t._padding.left,r:t.right-t._padding.right,t:t.top+t._padding.top,b:t.bottom-t._padding.bottom},s=Object.assign({},e),n=[],r=[],i=t._pointLabels.length,o=t.options.pointLabels,l=o.centerPointLabels?Ve/i:0;for(let c=0;c<i;c++){const d=o.setContext(t.getPointLabelContext(c));r[c]=d.padding;const u=t.getPointPosition(c,t.drawingArea+r[c],l),h=Ge(d.font),f=TE(t.ctx,h,t._pointLabels[c]);n[c]=f;const m=Tt(t.getIndexAngle(c)+l),p=Math.round(Wh(m)),v=ag(p,u.x,f.w,0,180),g=ag(p,u.y,f.h,90,270);DE(s,e,m,v,g)}t.setCenterPoint(e.l-s.l,s.r-e.r,e.t-s.t,s.b-e.b),t._pointLabelItems=IE(t,n,r)}function DE(t,e,s,n,r){const i=Math.abs(Math.sin(s)),o=Math.abs(Math.cos(s));let l=0,c=0;n.start<e.l?(l=(e.l-n.start)/i,t.l=Math.min(t.l,e.l-l)):n.end>e.r&&(l=(n.end-e.r)/i,t.r=Math.max(t.r,e.r+l)),r.start<e.t?(c=(e.t-r.start)/o,t.t=Math.min(t.t,e.t-c)):r.end>e.b&&(c=(r.end-e.b)/o,t.b=Math.max(t.b,e.b+c))}function OE(t,e,s){const n=t.drawingArea,{extra:r,additionalAngle:i,padding:o,size:l}=s,c=t.getPointPosition(e,n+r+o,i),d=Math.round(Wh(Tt(c.angle+Dt))),u=zE(c.y,l.h,d),h=FE(d),f=$E(c.x,l.w,h);return{visible:!0,x:c.x,y:u,textAlign:h,left:f,top:u,right:f+l.w,bottom:u+l.h}}function RE(t,e){if(!e)return!0;const{left:s,top:n,right:r,bottom:i}=t;return!(Fs({x:s,y:n},e)||Fs({x:s,y:i},e)||Fs({x:r,y:n},e)||Fs({x:r,y:i},e))}function IE(t,e,s){const n=[],r=t._pointLabels.length,i=t.options,{centerPointLabels:o,display:l}=i.pointLabels,c={extra:ku(i)/2,additionalAngle:o?Ve/r:0};let d;for(let u=0;u<r;u++){c.padding=s[u],c.size=e[u];const h=OE(t,u,c);n.push(h),l==="auto"&&(h.visible=RE(h,d),h.visible&&(d=h))}return n}function FE(t){return t===0||t===180?"center":t<180?"left":"right"}function $E(t,e,s){return s==="right"?t-=e:s==="center"&&(t-=e/2),t}function zE(t,e,s){return s===90||s===270?t-=e/2:(s>270||s<90)&&(t-=e),t}function UE(t,e,s){const{left:n,top:r,right:i,bottom:o}=s,{backdropColor:l}=e;if(!ge(l)){const c=Kn(e.borderRadius),d=dt(e.backdropPadding);t.fillStyle=l;const u=n-d.left,h=r-d.top,f=i-n+d.width,m=o-r+d.height;Object.values(c).some(p=>p!==0)?(t.beginPath(),ya(t,{x:u,y:h,w:f,h:m,radius:c}),t.fill()):t.fillRect(u,h,f,m)}}function BE(t,e){const{ctx:s,options:{pointLabels:n}}=t;for(let r=e-1;r>=0;r--){const i=t._pointLabelItems[r];if(!i.visible)continue;const o=n.setContext(t.getPointLabelContext(r));UE(s,o,i);const l=Ge(o.font),{x:c,y:d,textAlign:u}=i;nr(s,t._pointLabels[r],c,d+l.lineHeight/2,l,{color:o.color,textAlign:u,textBaseline:"middle"})}}function fv(t,e,s,n){const{ctx:r}=t;if(s)r.arc(t.xCenter,t.yCenter,e,0,It);else{let i=t.getPointPosition(0,e);r.moveTo(i.x,i.y);for(let o=1;o<n;o++)i=t.getPointPosition(o,e),r.lineTo(i.x,i.y)}}function HE(t,e,s,n,r){const i=t.ctx,o=e.circular,{color:l,lineWidth:c}=e;!o&&!n||!l||!c||s<0||(i.save(),i.strokeStyle=l,i.lineWidth=c,i.setLineDash(r.dash||[]),i.lineDashOffset=r.dashOffset,i.beginPath(),fv(t,s,o,n),i.closePath(),i.stroke(),i.restore())}function VE(t,e,s){return En(t,{label:s,index:e,type:"pointLabel"})}class vo extends jl{constructor(e){super(e),this.xCenter=void 0,this.yCenter=void 0,this.drawingArea=void 0,this._pointLabels=[],this._pointLabelItems=[]}setDimensions(){const e=this._padding=dt(ku(this.options)/2),s=this.width=this.maxWidth-e.width,n=this.height=this.maxHeight-e.height;this.xCenter=Math.floor(this.left+s/2+e.left),this.yCenter=Math.floor(this.top+n/2+e.top),this.drawingArea=Math.floor(Math.min(s,n)/2)}determineDataLimits(){const{min:e,max:s}=this.getMinMax(!1);this.min=Ie(e)&&!isNaN(e)?e:0,this.max=Ie(s)&&!isNaN(s)?s:0,this.handleTickRangeOptions()}computeTickLimit(){return Math.ceil(this.drawingArea/ku(this.options))}generateTickLabels(e){jl.prototype.generateTickLabels.call(this,e),this._pointLabels=this.getLabels().map((s,n)=>{const r=_e(this.options.pointLabels.callback,[s,n],this);return r||r===0?r:""}).filter((s,n)=>this.chart.getDataVisibility(n))}fit(){const e=this.options;e.display&&e.pointLabels.display?ME(this):this.setCenterPoint(0,0,0,0)}setCenterPoint(e,s,n,r){this.xCenter+=Math.floor((e-s)/2),this.yCenter+=Math.floor((n-r)/2),this.drawingArea-=Math.min(this.drawingArea/2,Math.max(e,s,n,r))}getIndexAngle(e){const s=It/(this._pointLabels.length||1),n=this.options.startAngle||0;return Tt(e*s+on(n))}getDistanceFromCenterForValue(e){if(ge(e))return NaN;const s=this.drawingArea/(this.max-this.min);return this.options.reverse?(this.max-e)*s:(e-this.min)*s}getValueForDistanceFromCenter(e){if(ge(e))return NaN;const s=e/(this.drawingArea/(this.max-this.min));return this.options.reverse?this.max-s:this.min+s}getPointLabelContext(e){const s=this._pointLabels||[];if(e>=0&&e<s.length){const n=s[e];return VE(this.getContext(),e,n)}}getPointPosition(e,s,n=0){const r=this.getIndexAngle(e)-Dt+n;return{x:Math.cos(r)*s+this.xCenter,y:Math.sin(r)*s+this.yCenter,angle:r}}getPointPositionForValue(e,s){return this.getPointPosition(e,this.getDistanceFromCenterForValue(s))}getBasePosition(e){return this.getPointPositionForValue(e||0,this.getBaseValue())}getPointLabelPosition(e){const{left:s,top:n,right:r,bottom:i}=this._pointLabelItems[e];return{left:s,top:n,right:r,bottom:i}}drawBackground(){const{backgroundColor:e,grid:{circular:s}}=this.options;if(e){const n=this.ctx;n.save(),n.beginPath(),fv(this,this.getDistanceFromCenterForValue(this._endValue),s,this._pointLabels.length),n.closePath(),n.fillStyle=e,n.fill(),n.restore()}}drawGrid(){const e=this.ctx,s=this.options,{angleLines:n,grid:r,border:i}=s,o=this._pointLabels.length;let l,c,d;if(s.pointLabels.display&&BE(this,o),r.display&&this.ticks.forEach((u,h)=>{if(h!==0||h===0&&this.min<0){c=this.getDistanceFromCenterForValue(u.value);const f=this.getContext(h),m=r.setContext(f),p=i.setContext(f);HE(this,m,c,o,p)}}),n.display){for(e.save(),l=o-1;l>=0;l--){const u=n.setContext(this.getPointLabelContext(l)),{color:h,lineWidth:f}=u;!f||!h||(e.lineWidth=f,e.strokeStyle=h,e.setLineDash(u.borderDash),e.lineDashOffset=u.borderDashOffset,c=this.getDistanceFromCenterForValue(s.reverse?this.min:this.max),d=this.getPointPosition(l,c),e.beginPath(),e.moveTo(this.xCenter,this.yCenter),e.lineTo(d.x,d.y),e.stroke())}e.restore()}}drawBorder(){}drawLabels(){const e=this.ctx,s=this.options,n=s.ticks;if(!n.display)return;const r=this.getIndexAngle(0);let i,o;e.save(),e.translate(this.xCenter,this.yCenter),e.rotate(r),e.textAlign="center",e.textBaseline="middle",this.ticks.forEach((l,c)=>{if(c===0&&this.min>=0&&!s.reverse)return;const d=n.setContext(this.getContext(c)),u=Ge(d.font);if(i=this.getDistanceFromCenterForValue(this.ticks[c].value),d.showLabelBackdrop){e.font=u.string,o=e.measureText(l.label).width,e.fillStyle=d.backdropColor;const h=dt(d.backdropPadding);e.fillRect(-o/2-h.left,-i-u.size/2-h.top,o+h.width,u.size+h.height)}nr(e,l.label,0,-i,u,{color:d.color,strokeColor:d.textStrokeColor,strokeWidth:d.textStrokeWidth})}),e.restore()}drawTitle(){}}Z(vo,"id","radialLinear"),Z(vo,"defaults",{display:!0,animate:!0,position:"chartArea",angleLines:{display:!0,lineWidth:1,borderDash:[],borderDashOffset:0},grid:{circular:!1},startAngle:0,ticks:{showLabelBackdrop:!0,callback:Xl.formatters.numeric},pointLabels:{backdropColor:void 0,backdropPadding:2,display:!0,font:{size:10},callback(e){return e},padding:5,centerPointLabels:!1}}),Z(vo,"defaultRoutes",{"angleLines.color":"borderColor","pointLabels.color":"color","ticks.color":"color"}),Z(vo,"descriptors",{angleLines:{_fallback:"grid"}});const rc={millisecond:{common:!0,size:1,steps:1e3},second:{common:!0,size:1e3,steps:60},minute:{common:!0,size:6e4,steps:60},hour:{common:!0,size:36e5,steps:24},day:{common:!0,size:864e5,steps:30},week:{common:!1,size:6048e5,steps:4},month:{common:!0,size:2628e6,steps:12},quarter:{common:!1,size:7884e6,steps:4},year:{common:!0,size:3154e7}},vt=Object.keys(rc);function og(t,e){return t-e}function lg(t,e){if(ge(e))return null;const s=t._adapter,{parser:n,round:r,isoWeekday:i}=t._parseOpts;let o=e;return typeof n=="function"&&(o=n(o)),Ie(o)||(o=typeof n=="string"?s.parse(o,n):s.parse(o)),o===null?null:(r&&(o=r==="week"&&(xa(i)||i===!0)?s.startOf(o,"isoWeek",i):s.startOf(o,r)),+o)}function cg(t,e,s,n){const r=vt.length;for(let i=vt.indexOf(t);i<r-1;++i){const o=rc[vt[i]],l=o.steps?o.steps:Number.MAX_SAFE_INTEGER;if(o.common&&Math.ceil((s-e)/(l*o.size))<=n)return vt[i]}return vt[r-1]}function WE(t,e,s,n,r){for(let i=vt.length-1;i>=vt.indexOf(s);i--){const o=vt[i];if(rc[o].common&&t._adapter.diff(r,n,o)>=e-1)return o}return vt[s?vt.indexOf(s):0]}function qE(t){for(let e=vt.indexOf(t)+1,s=vt.length;e<s;++e)if(rc[vt[e]].common)return vt[e]}function dg(t,e,s){if(!s)t[e]=!0;else if(s.length){const{lo:n,hi:r}=qh(s,e),i=s[n]>=e?s[n]:s[r];t[i]=!0}}function KE(t,e,s,n){const r=t._adapter,i=+r.startOf(e[0].value,n),o=e[e.length-1].value;let l,c;for(l=i;l<=o;l=+r.add(l,1,n))c=s[l],c>=0&&(e[c].major=!0);return e}function ug(t,e,s){const n=[],r={},i=e.length;let o,l;for(o=0;o<i;++o)l=e[o],r[l]=o,n.push({value:l,major:!1});return i===0||!s?n:KE(t,n,r,s)}class Nl extends lr{constructor(e){super(e),this._cache={data:[],labels:[],all:[]},this._unit="day",this._majorUnit=void 0,this._offsets={},this._normalized=!1,this._parseOpts=void 0}init(e,s={}){const n=e.time||(e.time={}),r=this._adapter=new wC._date(e.adapters.date);r.init(s),Hi(n.displayFormats,r.formats()),this._parseOpts={parser:n.parser,round:n.round,isoWeekday:n.isoWeekday},super.init(e),this._normalized=s.normalized}parse(e,s){return e===void 0?null:lg(this,e)}beforeLayout(){super.beforeLayout(),this._cache={data:[],labels:[],all:[]}}determineDataLimits(){const e=this.options,s=this._adapter,n=e.time.unit||"day";let{min:r,max:i,minDefined:o,maxDefined:l}=this.getUserBounds();function c(d){!o&&!isNaN(d.min)&&(r=Math.min(r,d.min)),!l&&!isNaN(d.max)&&(i=Math.max(i,d.max))}(!o||!l)&&(c(this._getLabelBounds()),(e.bounds!=="ticks"||e.ticks.source!=="labels")&&c(this.getMinMax(!1))),r=Ie(r)&&!isNaN(r)?r:+s.startOf(Date.now(),n),i=Ie(i)&&!isNaN(i)?i:+s.endOf(Date.now(),n)+1,this.min=Math.min(r,i-1),this.max=Math.max(r+1,i)}_getLabelBounds(){const e=this.getLabelTimestamps();let s=Number.POSITIVE_INFINITY,n=Number.NEGATIVE_INFINITY;return e.length&&(s=e[0],n=e[e.length-1]),{min:s,max:n}}buildTicks(){const e=this.options,s=e.time,n=e.ticks,r=n.source==="labels"?this.getLabelTimestamps():this._generate();e.bounds==="ticks"&&r.length&&(this.min=this._userMin||r[0],this.max=this._userMax||r[r.length-1]);const i=this.min,o=this.max,l=Wk(r,i,o);return this._unit=s.unit||(n.autoSkip?cg(s.minUnit,this.min,this.max,this._getLabelCapacity(i)):WE(this,l.length,s.minUnit,this.min,this.max)),this._majorUnit=!n.major.enabled||this._unit==="year"?void 0:qE(this._unit),this.initOffsets(r),e.reverse&&l.reverse(),ug(this,l,this._majorUnit)}afterAutoSkip(){this.options.offsetAfterAutoskip&&this.initOffsets(this.ticks.map(e=>+e.value))}initOffsets(e=[]){let s=0,n=0,r,i;this.options.offset&&e.length&&(r=this.getDecimalForValue(e[0]),e.length===1?s=1-r:s=(this.getDecimalForValue(e[1])-r)/2,i=this.getDecimalForValue(e[e.length-1]),e.length===1?n=i:n=(i-this.getDecimalForValue(e[e.length-2]))/2);const o=e.length<3?.5:.25;s=Ot(s,0,o),n=Ot(n,0,o),this._offsets={start:s,end:n,factor:1/(s+1+n)}}_generate(){const e=this._adapter,s=this.min,n=this.max,r=this.options,i=r.time,o=i.unit||cg(i.minUnit,s,n,this._getLabelCapacity(s)),l=ce(r.ticks.stepSize,1),c=o==="week"?i.isoWeekday:!1,d=xa(c)||c===!0,u={};let h=s,f,m;if(d&&(h=+e.startOf(h,"isoWeek",c)),h=+e.startOf(h,d?"day":o),e.diff(n,s,o)>1e5*l)throw new Error(s+" and "+n+" are too far apart with stepSize of "+l+" "+o);const p=r.ticks.source==="data"&&this.getDataTimestamps();for(f=h,m=0;f<n;f=+e.add(f,l,o),m++)dg(u,f,p);return(f===n||r.bounds==="ticks"||m===1)&&dg(u,f,p),Object.keys(u).sort(og).map(v=>+v)}getLabelForValue(e){const s=this._adapter,n=this.options.time;return n.tooltipFormat?s.format(e,n.tooltipFormat):s.format(e,n.displayFormats.datetime)}format(e,s){const r=this.options.time.displayFormats,i=this._unit,o=s||r[i];return this._adapter.format(e,o)}_tickFormatFunction(e,s,n,r){const i=this.options,o=i.ticks.callback;if(o)return _e(o,[e,s,n],this);const l=i.time.displayFormats,c=this._unit,d=this._majorUnit,u=c&&l[c],h=d&&l[d],f=n[s],m=d&&h&&f&&f.major;return this._adapter.format(e,r||(m?h:u))}generateTickLabels(e){let s,n,r;for(s=0,n=e.length;s<n;++s)r=e[s],r.label=this._tickFormatFunction(r.value,s,e)}getDecimalForValue(e){return e===null?NaN:(e-this.min)/(this.max-this.min)}getPixelForValue(e){const s=this._offsets,n=this.getDecimalForValue(e);return this.getPixelForDecimal((s.start+n)*s.factor)}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return this.min+n*(this.max-this.min)}_getLabelSize(e){const s=this.options.ticks,n=this.ctx.measureText(e).width,r=on(this.isHorizontal()?s.maxRotation:s.minRotation),i=Math.cos(r),o=Math.sin(r),l=this._resolveTickFontOptions(0).size;return{w:n*i+l*o,h:n*o+l*i}}_getLabelCapacity(e){const s=this.options.time,n=s.displayFormats,r=n[s.unit]||n.millisecond,i=this._tickFormatFunction(e,0,ug(this,[e],this._majorUnit),r),o=this._getLabelSize(i),l=Math.floor(this.isHorizontal()?this.width/o.w:this.height/o.h)-1;return l>0?l:1}getDataTimestamps(){let e=this._cache.data||[],s,n;if(e.length)return e;const r=this.getMatchingVisibleMetas();if(this._normalized&&r.length)return this._cache.data=r[0].controller.getAllParsedValues(this);for(s=0,n=r.length;s<n;++s)e=e.concat(r[s].controller.getAllParsedValues(this));return this._cache.data=this.normalize(e)}getLabelTimestamps(){const e=this._cache.labels||[];let s,n;if(e.length)return e;const r=this.getLabels();for(s=0,n=r.length;s<n;++s)e.push(lg(this,r[s]));return this._cache.labels=this._normalized?e:this.normalize(e)}normalize(e){return Py(e.sort(og))}}Z(Nl,"id","time"),Z(Nl,"defaults",{bounds:"data",adapters:{},time:{parser:!1,unit:!1,round:!1,isoWeekday:!1,minUnit:"millisecond",displayFormats:{}},ticks:{source:"auto",callback:!1,major:{enabled:!1}}});function bo(t,e,s){let n=0,r=t.length-1,i,o,l,c;s?(e>=t[n].pos&&e<=t[r].pos&&({lo:n,hi:r}=Vn(t,"pos",e)),{pos:i,time:l}=t[n],{pos:o,time:c}=t[r]):(e>=t[n].time&&e<=t[r].time&&({lo:n,hi:r}=Vn(t,"time",e)),{time:i,pos:l}=t[n],{time:o,pos:c}=t[r]);const d=o-i;return d?l+(c-l)*(e-i)/d:l}class hg extends Nl{constructor(e){super(e),this._table=[],this._minPos=void 0,this._tableRange=void 0}initOffsets(){const e=this._getTimestampsForTable(),s=this._table=this.buildLookupTable(e);this._minPos=bo(s,this.min),this._tableRange=bo(s,this.max)-this._minPos,super.initOffsets(e)}buildLookupTable(e){const{min:s,max:n}=this,r=[],i=[];let o,l,c,d,u;for(o=0,l=e.length;o<l;++o)d=e[o],d>=s&&d<=n&&r.push(d);if(r.length<2)return[{time:s,pos:0},{time:n,pos:1}];for(o=0,l=r.length;o<l;++o)u=r[o+1],c=r[o-1],d=r[o],Math.round((u+c)/2)!==d&&i.push({time:d,pos:o/(l-1)});return i}_generate(){const e=this.min,s=this.max;let n=super.getDataTimestamps();return(!n.includes(e)||!n.length)&&n.splice(0,0,e),(!n.includes(s)||n.length===1)&&n.push(s),n.sort((r,i)=>r-i)}_getTimestampsForTable(){let e=this._cache.all||[];if(e.length)return e;const s=this.getDataTimestamps(),n=this.getLabelTimestamps();return s.length&&n.length?e=this.normalize(s.concat(n)):e=s.length?s:n,e=this._cache.all=e,e}getDecimalForValue(e){return(bo(this._table,e)-this._minPos)/this._tableRange}getValueForPixel(e){const s=this._offsets,n=this.getDecimalForPixel(e)/s.factor-s.end;return bo(this._table,n*this._tableRange+this._minPos,!0)}}Z(hg,"id","timeseries"),Z(hg,"defaults",Nl.defaults);const mv="label";function fg(t,e){typeof t=="function"?t(e):t&&(t.current=e)}function GE(t,e){const s=t.options;s&&e&&Object.assign(s,e)}function pv(t,e){t.labels=e}function gv(t,e){let s=arguments.length>2&&arguments[2]!==void 0?arguments[2]:mv;const n=[];t.datasets=e.map(r=>{const i=t.datasets.find(o=>o[s]===r[s]);return!i||!r.data||n.includes(i)?{...r}:(n.push(i),Object.assign(i,r),i)})}function YE(t){let e=arguments.length>1&&arguments[1]!==void 0?arguments[1]:mv;const s={labels:[],datasets:[]};return pv(s,t.labels),gv(s,t.datasets,e),s}function JE(t,e){const{height:s=150,width:n=300,redraw:r=!1,datasetIdKey:i,type:o,data:l,options:c,plugins:d=[],fallbackContent:u,updateMode:h,...f}=t,m=w.useRef(null),p=w.useRef(null),v=()=>{m.current&&(p.current=new sc(m.current,{type:o,data:YE(l,i),options:c&&{...c},plugins:d}),fg(e,p.current))},g=()=>{fg(e,null),p.current&&(p.current.destroy(),p.current=null)};return w.useEffect(()=>{!r&&p.current&&c&&GE(p.current,c)},[r,c]),w.useEffect(()=>{!r&&p.current&&pv(p.current.config.data,l.labels)},[r,l.labels]),w.useEffect(()=>{!r&&p.current&&l.datasets&&gv(p.current.config.data,l.datasets,i)},[r,l.datasets]),w.useEffect(()=>{p.current&&(r?(g(),setTimeout(v)):p.current.update(h))},[r,c,l.labels,l.datasets,h]),w.useEffect(()=>{p.current&&(g(),setTimeout(v))},[o]),w.useEffect(()=>(v(),()=>g()),[]),Sl.createElement("canvas",{ref:m,role:"img",height:s,width:n,...f},u)}const QE=w.forwardRef(JE);function xv(t,e){return sc.register(e),w.forwardRef((s,n)=>Sl.createElement(QE,{...s,ref:n,type:t}))}const od=xv("line",Fo),XE=xv("bar",Io);sc.register(ju,Nu,Uo,cn,Bo,xE,kE,pE,cE);const ZE=()=>{var U,q,X,A,F;const{userProfile:t,loading:e,getDashboardRoute:s}=js(),n=nt(),[r,i]=w.useState(new Date),[o,l]=w.useState({serverStatus:{uptime:"--",responseTime:"--",status:"loading"},database:{queryTime:"--",connections:"Loading...",maxConnections:"Loading...",slowQueries:"0",status:"loading"},network:{latency:"Testing...",status:"loading"}}),[c,d]=w.useState({activeUsers:{current:"--",peakToday:"--",peakHourLabel:"Loading...",recentlyActive:"--"},apiCallVolume:{requestsPerMinute:"--",requestsPerHour:"--",totalRequests:"--",mostUsedEndpoints:[]},databaseOperations:{readOperations:"--",writeOperations:"--",queryCount:"--",totalUsers:"--"},storageUsage:{databaseSize:"Loading...",tableCount:"Loading...",indexSize:"Loading...",growthRate:"Loading..."},status:"loading"}),[u,h]=w.useState({errorRates:{http4xx:"--",http5xx:"--",errorTrend:"loading",totalErrorsToday:"--"},failedOperations:{loginFailures:"--",databaseTimeouts:"--",authenticationErrors:"--",apiErrors:"--"},systemAlerts:{criticalAlerts:"--",warningAlerts:"--",lastCriticalAlert:"Loading...",alertStatus:"loading"},recentErrors:[],status:"loading"}),[f,m]=w.useState({apiHealth:{responseTime:"--",rateLimits:"--",status:"loading",diagnostics:null},databaseConnections:{activeConnections:"--",connectionPoolStatus:"--",poolHealth:"loading",diagnostics:null},rowLevelSecurity:{policyPerformance:"--",accessPatterns:"--",rlsStatus:"loading",diagnostics:null},status:"loading"}),[p,v]=w.useState({userGrowth:{dailyGrowth:[],totalUsers:"--",growthRate:"--",last30Days:"--",last7Days:"--"},peakUsagePatterns:{byDayOfWeek:[],byHour:[],peakDay:"--",peakHour:"--"},growthMetrics:{userGrowthRate:"--",dataGrowthEstimate:"--",recentDataGrowth:"--",averageUsersPerDay:"--"},performanceOverTime:{avgResponseTime:[],errorRate:[]},summary:{trendsAvailable:!1,dataQuality:"loading"},status:"loading"}),[g,x]=w.useState(!1),[y,b]=w.useState({apiHealth:!1,databaseConnections:!1,rowLevelSecurity:!1}),[N,_]=w.useState({infrastructure:!0,errors:!0,supabaseMetrics:!0,userAnalytics:!1,historicalTrends:!1});if(w.useEffect(()=>{if(!e&&t&&t.role!=="Capacity Admin"){console.log(`🚫 Access denied to system health for role: ${t.role}, redirecting to dashboard`);const T=s();n(T,{replace:!0})}},[t,e,n,s]),w.useEffect(()=>{S()},[]),w.useEffect(()=>{const T=setInterval(()=>{S()},3e4);return()=>clearInterval(T)},[]),t&&t.role!=="Capacity Admin")return null;if(e)return a.jsx(Ae,{children:a.jsx("div",{className:"flex items-center justify-center h-64",children:a.jsxs("div",{className:"text-center",children:[a.jsx("div",{className:"animate-spin rounded-full h-8 w-8 border-b-2 border-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-300",children:"Loading..."})]})})});const k=()=>window.location.hostname==="localhost"?"http://localhost:3001/api/system":"/api/system",S=async()=>{x(!0);const T=k();try{const[$,ne]=await Promise.all([fetch(`${T}/server-status`),fetch(`${T}/database-health`)]),[de,oe]=await Promise.all([$.json(),ne.json()]);l(re=>({...re,serverStatus:{uptime:de.uptime,responseTime:de.responseTime,status:de.status,lastCheck:de.lastCheck||de.timestamp,details:{actualUptimeSeconds:de.actualUptimeSeconds||"N/A",actualUptimeFormatted:de.actualUptimeFormatted||"Serverless Function"}},database:{queryTime:oe.queryTime||oe.averageResponseTime,connections:oe.connections||"Managed",maxConnections:oe.maxConnections||"Auto-scaling",slowQueries:oe.slowQueries||"0",status:oe.status||oe.overallHealth,details:{realUserCount:oe.realUserCount||"N/A",hasQueryError:oe.hasQueryError||!1,errorMessage:oe.errorMessage||null}}}));try{const ee=await(await fetch(`${T}/network`)).json();l(Ct=>({...Ct,network:{latency:ee.latency,status:ee.status}}))}catch(re){console.error("❌ Failed to fetch network metrics:",re),l(ee=>({...ee,network:{latency:"unavailable",status:"error"}}))}try{const ee=await(await fetch(`${T}/usage-analytics`)).json();d({activeUsers:ee.activeUsers,apiCallVolume:ee.apiCallVolume,databaseOperations:ee.databaseOperations,storageUsage:ee.storageUsage,status:ee.status||"healthy"})}catch(re){console.error("❌ Failed to fetch usage analytics:",re),d(ee=>({...ee,status:"error"}))}try{const ee=await(await fetch(`${T}/error-monitoring`)).json();h({errorRates:ee.errorRates,failedOperations:ee.failedOperations,systemAlerts:ee.systemAlerts,recentErrors:ee.recentErrors,status:ee.status||"healthy"})}catch(re){console.error("❌ Failed to fetch error monitoring data:",re),h(ee=>({...ee,status:"error"}))}try{const ee=await(await fetch(`${T}/supabase-metrics`)).json();m({apiHealth:ee.apiHealth,databaseConnections:ee.databaseConnections,rowLevelSecurity:ee.rowLevelSecurity,status:ee.status||"healthy"})}catch(re){console.error("❌ Failed to fetch Supabase metrics:",re),m(ee=>({...ee,status:"error"}))}try{const ee=await(await fetch(`${T}/historical-data`)).json();v({userGrowth:ee.userGrowth,peakUsagePatterns:ee.peakUsagePatterns,growthMetrics:ee.growthMetrics,performanceOverTime:ee.performanceOverTime,summary:ee.summary,status:"healthy"})}catch(re){console.error("❌ Failed to fetch historical data:",re),v(ee=>({...ee,status:"error"}))}i(new Date)}catch($){console.error("❌ Failed to fetch system metrics:",$),l(ne=>({serverStatus:{...ne.serverStatus,status:"error"},database:{...ne.database,status:"error"},network:ne.network})),h(ne=>({...ne,status:"error"}))}finally{x(!1)}},j=T=>{if(!T)return"text-slate-400";switch(T.toLowerCase()){case"healthy":case"good":case"normal":return"text-green-400";case"warning":return"text-yellow-400";case"critical":case"error":case"poor":return"text-red-400";default:return"text-slate-400"}},C=T=>{if(!T)return a.jsx(ts,{className:"h-5 w-5 text-slate-400"});switch(T.toLowerCase()){case"healthy":case"good":case"normal":return a.jsx(mi,{className:"h-5 w-5 text-green-400"});case"warning":return a.jsx(us,{className:"h-5 w-5 text-yellow-400"});case"critical":case"error":case"poor":return a.jsx(us,{className:"h-5 w-5 text-red-400"});default:return a.jsx(ts,{className:"h-5 w-5 text-slate-400"})}},E=T=>{b($=>({...$,[T]:!$[T]}))},M=T=>{_($=>({...$,[T]:!$[T]}))},P=({sectionKey:T,title:$,icon:ne,isExpanded:de,children:oe,errorIndicator:re})=>a.jsxs("div",{className:"space-y-6",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("button",{onClick:()=>M(T),className:"flex items-center space-x-2 hover:text-blue-300 transition-colors",children:[de?a.jsx(_n,{className:"h-5 w-5 text-blue-400"}):a.jsx(ha,{className:"h-5 w-5 text-blue-400"}),ne,a.jsx("h2",{className:"text-xl font-semibold text-slate-100",children:$})]}),re]}),de&&oe]}),R=()=>{const T=[o.serverStatus.status,o.database.status,o.network.status,c.status,u.status,f.status],$=T.filter(oe=>oe==="error").length,ne=T.filter(oe=>oe==="warning").length,de=T.filter(oe=>oe==="loading").length;return $>0?"critical":ne>1?"warning":de>0?"loading":"healthy"},Y=T=>{switch(T){case"healthy":return"text-green-400";case"warning":return"text-yellow-400";case"critical":return"text-red-400";case"loading":return"text-blue-400";default:return"text-slate-400"}},B=T=>{switch(T){case"healthy":return a.jsx(mi,{className:"h-12 w-12"});case"warning":return a.jsx(us,{className:"h-12 w-12"});case"critical":return a.jsx(qc,{className:"h-12 w-12"});case"loading":return a.jsx(ts,{className:"h-12 w-12 animate-pulse"});default:return a.jsx(Bi,{className:"h-12 w-12"})}},H=T=>{switch(T){case"healthy":return"All systems operational";case"warning":return"Some systems need attention";case"critical":return"Critical issues detected";case"loading":return"Checking system status...";default:return"System status unknown"}},Q=()=>{const T=[];return o.serverStatus.status==="error"&&T.push({type:"critical",title:"Server Connection Failed",message:"Unable to connect to monitoring endpoints",icon:a.jsx(ro,{className:"h-5 w-5"}),action:"Check server status"}),o.database.status==="error"&&T.push({type:"critical",title:"Database Connection Issues",message:"Database health check failed",icon:a.jsx(Ds,{className:"h-5 w-5"}),action:"Verify database connection"}),u.systemAlerts.criticalAlerts!=="--"&&parseInt(u.systemAlerts.criticalAlerts)>0&&T.push({type:"critical",title:`${u.systemAlerts.criticalAlerts} Critical System Alerts`,message:`Last critical: ${u.systemAlerts.lastCriticalAlert}`,icon:a.jsx(us,{className:"h-5 w-5"}),action:"Review alert details"}),u.failedOperations.authenticationErrors!=="--"&&parseInt(u.failedOperations.authenticationErrors)>5&&T.push({type:"warning",title:"High Authentication Failures",message:`${u.failedOperations.authenticationErrors} auth errors detected`,icon:a.jsx(qc,{className:"h-5 w-5"}),action:"Check authentication system"}),u.failedOperations.apiErrors!=="--"&&parseInt(u.failedOperations.apiErrors)>10&&T.push({type:"warning",title:"High API Error Rate",message:`${u.failedOperations.apiErrors} API errors in recent period`,icon:a.jsx(fu,{className:"h-5 w-5"}),action:"Investigate API issues"}),f.status==="error"&&T.push({type:"warning",title:"Supabase Metrics Unavailable",message:"Unable to fetch Supabase-specific metrics",icon:a.jsx(Ds,{className:"h-5 w-5"}),action:"Check Supabase connection"}),T.slice(0,4)},O=({title:T,diagnostics:$,sectionKey:ne})=>{const de=y[ne],oe=!$;return a.jsxs("div",{className:"mt-4 border-t border-slate-700 pt-4",children:[a.jsxs("button",{onClick:()=>!oe&&E(ne),disabled:oe,className:`flex items-center space-x-2 text-sm transition-colors ${oe?"text-slate-500 cursor-not-allowed":"text-slate-400 hover:text-slate-300"}`,children:[de?a.jsx(_n,{className:"h-4 w-4"}):a.jsx(ha,{className:"h-4 w-4"}),a.jsx(py,{className:"h-4 w-4"}),a.jsx("span",{children:oe?"Loading diagnostics...":"Diagnostic Details"})]}),de&&!oe&&a.jsxs("div",{className:"mt-3 space-y-3",children:[a.jsxs("div",{className:"text-xs text-slate-500",children:[$.totalTests&&`${$.totalTests} tests performed`,$.totalDbTests&&`${$.totalDbTests} database tests performed`,$.totalRlsTests&&`${$.totalRlsTests} RLS tests performed`,$.errorCount>0&&` • ${$.errorCount} errors`,$.slowTestCount>0&&` • ${$.slowTestCount} slow tests`,$.slowQueryCount>0&&` • ${$.slowQueryCount} slow queries`]}),$.issueType&&$.issueType!=="none"&&a.jsxs("div",{className:"text-xs text-yellow-400",children:[a.jsx("span",{className:"font-semibold",children:"Issue Type:"})," ",$.issueType]}),$.poolHealthReason&&a.jsxs("div",{className:"text-xs text-slate-400",children:[a.jsx("span",{className:"font-semibold",children:"Pool Status:"})," ",$.poolHealthReason]}),$.rlsStatusReason&&a.jsxs("div",{className:"text-xs text-slate-400",children:[a.jsx("span",{className:"font-semibold",children:"RLS Status:"})," ",$.rlsStatusReason]}),$.individualTests&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-slate-400 mb-2",children:"Individual Test Results:"}),a.jsx("div",{className:"space-y-1",children:$.individualTests.map((re,ee)=>a.jsxs("div",{className:"flex items-center justify-between text-xs",children:[a.jsx("span",{className:"text-slate-500",children:re.name}),a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx("span",{className:"font-mono text-slate-400",children:re.responseTime}),a.jsx("span",{className:`px-2 py-1 rounded text-xs ${re.status==="healthy"?"bg-green-900 text-green-300":re.status==="slow"?"bg-yellow-900 text-yellow-300":"bg-red-900 text-red-300"}`,children:re.status})]})]},ee))})]}),$.roleDistribution&&Object.keys($.roleDistribution).length>0&&a.jsxs("div",{children:[a.jsx("div",{className:"text-xs font-semibold text-slate-400 mb-2",children:"Role Distribution:"}),a.jsx("div",{className:"space-y-1",children:Object.entries($.roleDistribution).map(([re,ee])=>a.jsxs("div",{className:"flex justify-between text-xs",children:[a.jsx("span",{className:"text-slate-500",children:re}),a.jsxs("span",{className:"text-slate-400",children:[ee," users"]})]},re))})]})]})]})};return a.jsx(Ae,{children:a.jsxs("div",{className:"space-y-8",children:[a.jsxs("div",{className:"flex items-center justify-between",children:[a.jsxs("div",{className:"flex items-center space-x-4",children:[a.jsx(ts,{className:"h-8 w-8 text-blue-400"}),a.jsxs("div",{children:[a.jsx("h1",{className:"text-3xl font-bold text-slate-100",children:"System Health"}),a.jsx("p",{className:"text-slate-400",children:"Infrastructure & Performance Monitoring"})]})]}),a.jsxs("div",{className:"flex items-center space-x-3",children:[a.jsxs("button",{onClick:S,disabled:g,className:"flex items-center space-x-2 px-3 py-2 bg-blue-600 hover:bg-blue-500 disabled:bg-blue-600 disabled:opacity-50 text-white rounded-lg transition-colors text-sm",title:"Refresh metrics",children:[a.jsx(pi,{className:`h-4 w-4 ${g?"animate-spin":""}`}),a.jsx("span",{children:g?"Refreshing...":"Refresh"})]}),g&&a.jsxs("div",{className:"flex items-center space-x-2 text-blue-400",children:[a.jsx("div",{className:"animate-spin rounded-full h-4 w-4 border-b-2 border-blue-400"}),a.jsx("span",{className:"text-sm",children:"Fetching real data..."})]}),a.jsxs("div",{className:"text-sm text-slate-400",children:["Last updated: ",r.toLocaleTimeString()]})]})]}),a.jsxs("div",{className:"flex items-center justify-between bg-slate-800/50 p-4 rounded-lg border border-slate-700",children:[a.jsxs("div",{className:"flex items-center space-x-3",children:[B(R()),a.jsxs("div",{children:[a.jsx("h3",{className:"text-lg font-semibold text-slate-100",children:"Overall System Health"}),a.jsx("p",{className:`text-sm ${Y(R())}`,children:H(R())})]})]}),a.jsxs("div",{className:"text-sm text-slate-400",children:["Last checked: ",r.toLocaleTimeString()]})]}),Q().length>0&&a.jsxs("div",{className:"bg-red-900/20 border border-red-700 rounded-lg p-4",children:[a.jsxs("div",{className:"flex items-center justify-between mb-3",children:[a.jsxs("div",{className:"flex items-center space-x-2 text-red-400",children:[a.jsx(Bi,{className:"h-5 w-5"}),a.jsxs("span",{className:"font-semibold",children:["Critical Alerts (",Q().length,")"]})]}),a.jsx("div",{className:"text-xs text-red-300",children:"Requires immediate attention"})]}),a.jsx("div",{className:"space-y-3",children:Q().map((T,$)=>a.jsxs("div",{className:`flex items-start space-x-3 p-3 rounded-lg ${T.type==="critical"?"bg-red-900/30":"bg-yellow-900/30"}`,children:[a.jsx("div",{className:`flex-shrink-0 p-2 rounded-full ${T.type==="critical"?"bg-red-500 text-white":"bg-yellow-500 text-black"}`,children:T.icon}),a.jsxs("div",{className:"flex-1",children:[a.jsx("div",{className:`font-semibold ${T.type==="critical"?"text-red-200":"text-yellow-200"}`,children:T.title}),a.jsx("div",{className:"text-sm text-slate-300 mt-1",children:T.message}),a.jsxs("button",{className:`text-sm mt-2 hover:underline ${T.type==="critical"?"text-red-400":"text-yellow-400"}`,children:["→ ",T.action]})]})]},$))})]}),Q().length===0&&R()==="healthy"&&a.jsx("div",{className:"bg-green-900/20 border border-green-700 rounded-lg p-4",children:a.jsxs("div",{className:"flex items-center space-x-2 text-green-400",children:[a.jsx(mi,{className:"h-5 w-5"}),a.jsx("span",{className:"font-semibold",children:"No Critical Alerts"}),a.jsx("span",{className:"text-sm text-green-300",children:"• All systems operating normally"})]})}),a.jsx(P,{sectionKey:"infrastructure",title:"Infrastructure & Performance",icon:a.jsx(ro,{className:"h-6 w-6 text-blue-400"}),isExpanded:N.infrastructure,errorIndicator:o.serverStatus.status==="error"&&a.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[a.jsx(us,{className:"h-4 w-4"}),a.jsx("span",{children:"Unable to connect to monitoring endpoints"})]}),children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6",children:[a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ro,{className:"h-5 w-5 text-blue-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Server Status"})]}),C(o.serverStatus.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Uptime"}),a.jsx("span",{className:"text-slate-100 font-mono",children:o.serverStatus.uptime})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Response Time"}),a.jsx("span",{className:"text-slate-100 font-mono",children:o.serverStatus.responseTime})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Status"}),a.jsx("span",{className:`font-semibold capitalize ${j(o.serverStatus.status)}`,children:o.serverStatus.status})]})})]})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ds,{className:"h-5 w-5 text-green-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Database Health"})]}),C(o.database.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Query Time"}),a.jsx("span",{className:"text-slate-100 font-mono",children:o.database.queryTime})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Connections"}),a.jsx("span",{className:"text-slate-100 font-mono",children:"Managed by Platform"})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Slow Queries"}),a.jsx("span",{className:"text-slate-100 font-mono",children:o.database.slowQueries})]})})]})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(h2,{className:"h-5 w-5 text-purple-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Network"})]}),C(o.network.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsxs("div",{children:[a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Latency"}),a.jsx("span",{className:"text-slate-100 font-mono text-lg font-bold",children:o.network.latency})]}),a.jsx("div",{className:"w-full bg-slate-700 rounded-full h-2",children:a.jsx("div",{className:`h-2 rounded-full transition-all duration-300 ${o.network.status==="good"?"bg-green-400":o.network.status==="warning"?"bg-yellow-400":"bg-red-400"}`,style:{width:o.network.status==="good"?"25%":o.network.status==="warning"?"60%":"90%"}})})]}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Status"}),a.jsx("span",{className:`font-semibold capitalize ${j(o.network.status)}`,children:o.network.status})]})})]})]})]})}),a.jsx(P,{sectionKey:"errors",title:"Error Monitoring",icon:a.jsx(Bi,{className:"h-6 w-6 text-red-400"}),isExpanded:N.errors,errorIndicator:u.status==="error"&&a.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[a.jsx(us,{className:"h-4 w-4"}),a.jsx("span",{children:"Unable to fetch error monitoring data"})]}),children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(d2,{className:"h-5 w-5 text-red-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Error Rates"})]}),C(u.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"4xx Errors"}),a.jsx("span",{className:"text-slate-100 font-mono",children:u.errorRates.http4xx})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"5xx Errors"}),a.jsx("span",{className:"text-slate-100 font-mono",children:u.errorRates.http5xx})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Total Today"}),a.jsx("span",{className:"text-slate-100 font-mono",children:u.errorRates.totalErrorsToday})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Trend"}),a.jsx("span",{className:`font-mono text-xs capitalize ${u.errorRates.errorTrend==="improving"?"text-green-400":u.errorRates.errorTrend==="stable"?"text-yellow-400":"text-red-400"}`,children:u.errorRates.errorTrend})]})})]})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(qc,{className:"h-5 w-5 text-orange-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Failed Operations"})]}),C(u.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Login Failures"}),a.jsx("span",{className:"text-slate-100 font-mono",children:u.failedOperations.loginFailures})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"DB Timeouts"}),a.jsx("span",{className:"text-slate-100 font-mono",children:u.failedOperations.databaseTimeouts})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Auth Errors"}),a.jsx("span",{className:"text-slate-100 font-mono",children:u.failedOperations.authenticationErrors})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"API Errors"}),a.jsx("span",{className:"text-slate-100 font-mono",children:u.failedOperations.apiErrors})]})})]})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(us,{className:"h-5 w-5 text-yellow-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"System Alerts"})]}),C(u.systemAlerts.alertStatus)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Critical"}),a.jsx("span",{className:"text-red-400 font-mono font-bold",children:u.systemAlerts.criticalAlerts})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Warnings"}),a.jsx("span",{className:"text-yellow-400 font-mono",children:u.systemAlerts.warningAlerts})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Status"}),a.jsx("span",{className:`font-semibold capitalize ${j(u.systemAlerts.alertStatus)}`,children:u.systemAlerts.alertStatus})]})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Last Critical:"}),a.jsx("div",{className:"text-xs text-slate-300 font-mono",children:u.systemAlerts.lastCriticalAlert})]})]})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(e2,{className:"h-5 w-5 text-purple-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Recent Error Log"})]}),C(u.status)]}),a.jsxs("div",{className:"space-y-2",children:[u.recentErrors.length>0?u.recentErrors.slice(0,4).map((T,$)=>a.jsxs("div",{className:"border-l-2 border-red-400 pl-3 py-1",children:[a.jsx("div",{className:"text-xs text-red-400 font-mono",children:T.type}),a.jsx("div",{className:"text-xs text-slate-300 truncate",children:T.message}),a.jsx("div",{className:"text-xs text-slate-500",children:T.timestamp})]},$)):a.jsxs("div",{className:"text-center py-4",children:[a.jsx(mi,{className:"h-8 w-8 text-green-400 mx-auto mb-2"}),a.jsx("div",{className:"text-sm text-green-400",children:"No recent errors"}),a.jsx("div",{className:"text-xs text-slate-400",children:"System running smoothly"})]}),u.recentErrors.length>4&&a.jsxs("div",{className:"text-xs text-slate-400 text-center pt-2 border-t border-slate-700",children:["+",u.recentErrors.length-4," more errors"]})]})]})]})}),a.jsx(P,{sectionKey:"supabaseMetrics",title:"Supabase Specific Metrics",icon:a.jsx(Ds,{className:"h-6 w-6 text-purple-400"}),isExpanded:N.supabaseMetrics,errorIndicator:f.status==="error"&&a.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[a.jsx(us,{className:"h-4 w-4"}),a.jsx("span",{children:"Unable to fetch Supabase metrics"})]}),children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ro,{className:"h-5 w-5 text-purple-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Supabase API Health"})]}),C(f.apiHealth.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Response Times"}),a.jsx("span",{className:"text-slate-100 font-mono",children:f.apiHealth.responseTime})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Rate Limits"}),a.jsx("span",{className:"text-slate-100 font-mono",children:f.apiHealth.rateLimits})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Status"}),a.jsx("span",{className:`font-semibold capitalize ${j(f.apiHealth.status)}`,children:f.apiHealth.status})]})})]}),a.jsx(O,{title:"API Health Diagnostics",diagnostics:(U=f.apiHealth)==null?void 0:U.diagnostics,sectionKey:"apiHealth"})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ds,{className:"h-5 w-5 text-blue-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Database Connections"})]}),C(f.databaseConnections.poolHealth)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Active Connections"}),a.jsx("span",{className:"text-slate-100 font-mono",children:f.databaseConnections.activeConnections})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Connection Pool Status"}),a.jsx("span",{className:"text-slate-100 font-mono",children:f.databaseConnections.connectionPoolStatus})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Pool Health"}),a.jsx("span",{className:`font-semibold capitalize ${j(f.databaseConnections.poolHealth)}`,children:f.databaseConnections.poolHealth})]})})]}),a.jsx(O,{title:"Database Connection Diagnostics",diagnostics:(q=f.databaseConnections)==null?void 0:q.diagnostics,sectionKey:"databaseConnections"})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(ts,{className:"h-5 w-5 text-green-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Row Level Security"})]}),C(f.rowLevelSecurity.rlsStatus)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Policy Performance"}),a.jsx("span",{className:"text-slate-100 font-mono",children:f.rowLevelSecurity.policyPerformance})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Access Patterns"}),a.jsx("span",{className:"text-slate-100 font-mono",children:f.rowLevelSecurity.accessPatterns})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"RLS Status"}),a.jsx("span",{className:`font-semibold capitalize ${j(f.rowLevelSecurity.rlsStatus)}`,children:f.rowLevelSecurity.rlsStatus})]})})]}),a.jsx(O,{title:"RLS Diagnostics",diagnostics:(X=f.rowLevelSecurity)==null?void 0:X.diagnostics,sectionKey:"rowLevelSecurity"})]})]})}),a.jsx(P,{sectionKey:"userAnalytics",title:"Usage Analytics",icon:a.jsx(to,{className:"h-6 w-6 text-purple-400"}),isExpanded:N.userAnalytics,errorIndicator:c.status==="error"&&a.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[a.jsx(us,{className:"h-4 w-4"}),a.jsx("span",{children:"Unable to fetch usage analytics"})]}),children:a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-4 gap-6",children:[a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Xe,{className:"h-5 w-5 text-blue-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Active Users"})]}),C(c.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Current Online"}),a.jsx("span",{className:"text-slate-100 font-mono text-lg font-bold",children:c.activeUsers.current})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Peak Today"}),a.jsx("span",{className:"text-slate-100 font-mono",children:c.activeUsers.peakToday})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Peak Hour"}),a.jsx("span",{className:"text-slate-100 font-mono text-xs",children:c.activeUsers.peakHourLabel})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Recently Active"}),a.jsx("span",{className:"text-slate-100 font-mono",children:c.activeUsers.recentlyActive})]})})]})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(fu,{className:"h-5 w-5 text-yellow-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"API Calls"})]}),C(c.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Per Minute"}),a.jsx("span",{className:"text-slate-100 font-mono",children:c.apiCallVolume.requestsPerMinute})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Per Hour"}),a.jsx("span",{className:"text-slate-100 font-mono",children:c.apiCallVolume.requestsPerHour})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Total Today"}),a.jsx("span",{className:"text-slate-100 font-mono",children:c.apiCallVolume.totalRequests})]})}),a.jsxs("div",{children:[a.jsx("div",{className:"text-xs text-slate-400 mb-1",children:"Most Used:"}),a.jsx("div",{className:"text-xs text-slate-300 font-mono truncate",children:c.apiCallVolume.mostUsedEndpoints.length>0?((F=(A=c.apiCallVolume.mostUsedEndpoints[0])==null?void 0:A.endpoint)==null?void 0:F.split("/").pop())||"N/A":"Loading..."})]})]})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Ds,{className:"h-5 w-5 text-green-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"DB Operations"})]}),C(c.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Read Ops"}),a.jsx("span",{className:"text-slate-100 font-mono",children:c.databaseOperations.readOperations})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Write Ops"}),a.jsx("span",{className:"text-slate-100 font-mono",children:c.databaseOperations.writeOperations})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Total Queries"}),a.jsx("span",{className:"text-slate-100 font-mono",children:c.databaseOperations.queryCount})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Total Users"}),a.jsx("span",{className:"text-slate-100 font-mono",children:c.databaseOperations.totalUsers})]})})]})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(t2,{className:"h-5 w-5 text-orange-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Storage"})]}),C(c.status)]}),a.jsxs("div",{className:"space-y-3",children:[a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Database Size"}),a.jsx("span",{className:"text-slate-100 font-mono",children:c.storageUsage.databaseSize})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm mb-1",children:[a.jsx("span",{className:"text-slate-400",children:"Tables"}),a.jsx("span",{className:"text-slate-100 font-mono",children:c.storageUsage.tableCount})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Index Size"}),a.jsx("span",{className:"text-slate-100 font-mono",children:c.storageUsage.indexSize})]})}),a.jsx("div",{children:a.jsxs("div",{className:"flex justify-between text-sm",children:[a.jsx("span",{className:"text-slate-400",children:"Growth Rate"}),a.jsx("span",{className:"text-green-400 font-mono text-xs",children:c.storageUsage.growthRate})]})})]})]})]})}),a.jsxs(P,{sectionKey:"historicalTrends",title:"Trends & Historical Data",icon:a.jsx(to,{className:"h-6 w-6 text-indigo-400"}),isExpanded:N.historicalTrends,errorIndicator:p.status==="error"&&a.jsxs("div",{className:"flex items-center space-x-2 text-red-400 text-sm",children:[a.jsx(us,{className:"h-4 w-4"}),a.jsx("span",{children:"Unable to fetch historical data"})]}),children:[a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-4 gap-6",children:[a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(Xe,{className:"h-5 w-5 text-blue-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Total Users"})]}),a.jsx(pi,{className:"h-5 w-5 text-blue-400"})]}),a.jsx("div",{className:"text-2xl font-bold text-slate-100 mb-2",children:p.userGrowth.totalUsers}),a.jsxs("div",{className:"text-sm text-slate-400",children:["+",p.userGrowth.last7Days," this week"]})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(pi,{className:"h-5 w-5 text-green-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Growth Rate"})]}),a.jsx(pi,{className:"h-5 w-5 text-green-400"})]}),a.jsx("div",{className:"text-2xl font-bold text-slate-100 mb-2",children:p.userGrowth.growthRate}),a.jsx("div",{className:"text-sm text-slate-400",children:"Last 30 days"})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(so,{className:"h-5 w-5 text-purple-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Peak Day"})]}),a.jsx(so,{className:"h-5 w-5 text-purple-400"})]}),a.jsx("div",{className:"text-2xl font-bold text-slate-100 mb-2",children:p.peakUsagePatterns.peakDay}),a.jsx("div",{className:"text-sm text-slate-400",children:"Most registrations"})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center justify-between mb-4",children:[a.jsxs("div",{className:"flex items-center space-x-2",children:[a.jsx(no,{className:"h-5 w-5 text-orange-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Peak Hour"})]}),a.jsx(no,{className:"h-5 w-5 text-orange-400"})]}),a.jsx("div",{className:"text-2xl font-bold text-slate-100 mb-2",children:p.peakUsagePatterns.peakHour}),a.jsx("div",{className:"text-sm text-slate-400",children:"Busiest time"})]})]}),a.jsxs("div",{className:"grid grid-cols-1 lg:grid-cols-2 gap-6",children:[a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[a.jsx(pi,{className:"h-5 w-5 text-blue-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"User Growth Over Time"})]}),p.userGrowth.dailyGrowth.length>0?a.jsx("div",{className:"h-64",children:a.jsx(od,{data:{labels:p.userGrowth.dailyGrowth.map(T=>new Date(T.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Total Users",data:p.userGrowth.dailyGrowth.map(T=>T.totalUsers),borderColor:"rgb(59, 130, 246)",backgroundColor:"rgba(59, 130, 246, 0.1)",fill:!0,tension:.4},{label:"New Users",data:p.userGrowth.dailyGrowth.map(T=>T.newUsers),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",fill:!1,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(148, 163, 184)"}}},scales:{x:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}},y:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}}}}})}):a.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:a.jsxs("div",{className:"text-center",children:[a.jsx(to,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Loading growth data..."})]})})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[a.jsx(so,{className:"h-5 w-5 text-purple-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Peak Usage by Day"})]}),p.peakUsagePatterns.byDayOfWeek.length>0?a.jsx("div",{className:"h-64",children:a.jsx(XE,{data:{labels:p.peakUsagePatterns.byDayOfWeek.map(T=>T.day),datasets:[{label:"User Registrations",data:p.peakUsagePatterns.byDayOfWeek.map(T=>T.registrations),backgroundColor:"rgba(147, 51, 234, 0.6)",borderColor:"rgb(147, 51, 234)",borderWidth:1}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(148, 163, 184)"}}},scales:{x:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}},y:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}}}}})}):a.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:a.jsxs("div",{className:"text-center",children:[a.jsx(so,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Loading usage patterns..."})]})})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[a.jsx(ts,{className:"h-5 w-5 text-green-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Performance Over Time"})]}),p.performanceOverTime.avgResponseTime.length>0?a.jsx("div",{className:"h-64",children:a.jsx(od,{data:{labels:p.performanceOverTime.avgResponseTime.map(T=>new Date(T.date).toLocaleDateString("en-US",{month:"short",day:"numeric"})),datasets:[{label:"Avg Response Time (ms)",data:p.performanceOverTime.avgResponseTime.map(T=>T.responseTime),borderColor:"rgb(34, 197, 94)",backgroundColor:"rgba(34, 197, 94, 0.1)",fill:!1,tension:.4,yAxisID:"y"},{label:"Error Rate (%)",data:p.performanceOverTime.errorRate.map(T=>T.errorRate),borderColor:"rgb(239, 68, 68)",backgroundColor:"rgba(239, 68, 68, 0.1)",fill:!1,tension:.4,yAxisID:"y1"}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(148, 163, 184)"}}},scales:{x:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}},y:{type:"linear",display:!0,position:"left",ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}},y1:{type:"linear",display:!0,position:"right",ticks:{color:"rgb(148, 163, 184)"},grid:{drawOnChartArea:!1}}}}})}):a.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:a.jsxs("div",{className:"text-center",children:[a.jsx(ts,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Loading performance data..."})]})})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[a.jsx(no,{className:"h-5 w-5 text-orange-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Peak Usage by Hour"})]}),p.peakUsagePatterns.byHour.length>0?a.jsx("div",{className:"h-64",children:a.jsx(od,{data:{labels:p.peakUsagePatterns.byHour.map(T=>T.hour),datasets:[{label:"User Registrations",data:p.peakUsagePatterns.byHour.map(T=>T.registrations),borderColor:"rgb(251, 146, 60)",backgroundColor:"rgba(251, 146, 60, 0.1)",fill:!0,tension:.4}]},options:{responsive:!0,maintainAspectRatio:!1,plugins:{legend:{labels:{color:"rgb(148, 163, 184)"}}},scales:{x:{ticks:{color:"rgb(148, 163, 184)",maxTicksLimit:12},grid:{color:"rgba(148, 163, 184, 0.1)"}},y:{ticks:{color:"rgb(148, 163, 184)"},grid:{color:"rgba(148, 163, 184, 0.1)"}}}}})}):a.jsx("div",{className:"h-64 flex items-center justify-center text-slate-400",children:a.jsxs("div",{className:"text-center",children:[a.jsx(no,{className:"h-12 w-12 mx-auto mb-3 opacity-50"}),a.jsx("p",{children:"Loading hourly patterns..."})]})})]})]}),a.jsxs(le,{className:"p-6",children:[a.jsxs("div",{className:"flex items-center space-x-2 mb-6",children:[a.jsx(to,{className:"h-5 w-5 text-indigo-400"}),a.jsx("h3",{className:"font-semibold text-slate-100",children:"Growth Metrics Summary"})]}),a.jsxs("div",{className:"grid grid-cols-1 md:grid-cols-3 gap-6",children:[a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Average Users Per Day"}),a.jsx("div",{className:"text-xl font-semibold text-slate-100",children:p.growthMetrics.averageUsersPerDay})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Data Growth Estimate"}),a.jsx("div",{className:"text-xl font-semibold text-slate-100",children:p.growthMetrics.dataGrowthEstimate})]}),a.jsxs("div",{children:[a.jsx("div",{className:"text-sm text-slate-400 mb-1",children:"Recent Data Growth"}),a.jsx("div",{className:"text-xl font-semibold text-slate-100",children:p.growthMetrics.recentDataGrowth})]})]}),p.summary.dataQuality==="real_data"&&a.jsx("div",{className:"mt-4 p-3 bg-green-900/20 border border-green-700 rounded-lg",children:a.jsxs("div",{className:"flex items-center space-x-2 text-green-400 text-sm",children:[a.jsx(mi,{className:"h-4 w-4"}),a.jsxs("span",{children:["Displaying real data from ",p.summary.totalDataPoints," data points",p.summary.oldestRecord&&` • Since ${new Date(p.summary.oldestRecord).toLocaleDateString()}`]})]})})]})]})]})})},Cs=({children:t})=>{const{isAuthenticated:e,loading:s}=js(),n=St();return s?(console.log("🔄 ProtectedRoute - Still loading auth state..."),a.jsx("div",{className:"min-h-screen bg-slate-900 flex items-center justify-center",children:a.jsxs("div",{className:"text-center",children:[a.jsx(gy,{className:"h-8 w-8 animate-spin text-blue-500 mx-auto mb-4"}),a.jsx("p",{className:"text-slate-400",children:"Loading..."}),a.jsx("p",{className:"text-slate-500 text-sm mt-2",children:"Checking authentication..."})]})})):e?t:a.jsx(su,{to:"/auth",state:{from:n},replace:!0})};function eP(){const{pathname:t}=St();return w.useEffect(()=>{window.scrollTo(0,0)},[t]),null}function tP(){return a.jsx(KN,{children:a.jsx(WN,{children:a.jsxs(w_,{children:[a.jsx(eP,{}),a.jsxs(J1,{children:[a.jsx(Pt,{path:"/auth",element:a.jsx(m2,{})}),a.jsx(Pt,{path:"/dashboard",element:a.jsx(Cs,{children:a.jsx(V2,{})})}),a.jsx(Pt,{path:"/formulas",element:a.jsx(Cs,{children:a.jsx(q2,{})})}),a.jsx(Pt,{path:"/formulas/:formulaId",element:a.jsx(Cs,{children:a.jsx(K2,{})})}),a.jsx(Pt,{path:"/suppliers",element:a.jsx(Cs,{children:a.jsx(Q2,{})})}),a.jsx(Pt,{path:"/raw-materials",element:a.jsx(Cs,{children:a.jsx(Z2,{})})}),a.jsx(Pt,{path:"/raw-materials/:materialId",element:a.jsx(Cs,{children:a.jsx(tk,{})})}),a.jsx(Pt,{path:"/user-management",element:a.jsx(Cs,{children:a.jsx(ik,{})})}),a.jsx(Pt,{path:"/system-health",element:a.jsx(Cs,{children:a.jsx(ZE,{})})}),a.jsx(Pt,{path:"/settings",element:a.jsx(Cs,{children:a.jsx(ak,{})})}),a.jsx(Pt,{path:"/",element:a.jsx(su,{to:"/dashboard"})}),a.jsx(Pt,{path:"/login",element:a.jsx(su,{to:"/auth",replace:!0})})]})]})})})}ld.createRoot(document.getElementById("root")).render(a.jsx(Sl.StrictMode,{children:a.jsx(tP,{})}));
